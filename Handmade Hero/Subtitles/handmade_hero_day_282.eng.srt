1
00:00:01,500 --> 00:00:04,000
Hello, everyone, and welcome to handmade hero.

2
00:00:04,000 --> 00:00:06,600
The show where we code a complete game live on stream.

3
00:00:06,600 --> 00:00:08,600
Today is day 282.

4
00:00:08,600 --> 00:00:13,000
Yesterday, we implemented room based movement, scrolling for our

5
00:00:13,000 --> 00:00:17,300
camera and I'm not sure exactly what we're going to do today because

6
00:00:17,300 --> 00:00:21,000
we're basically working on, you know, sort of how game code is going

7
00:00:21,000 --> 00:00:22,200
to happen inside our game.

8
00:00:22,200 --> 00:00:26,100
Like the stuff that actually is the logic that is makes up the design

9
00:00:26,100 --> 00:00:26,600
of the game.

10
00:00:26,600 --> 00:00:29,600
If you will as opposed to most of the stuff we don't have it here

11
00:00:29,600 --> 00:00:30,400
which is trying to

12
00:00:30,700 --> 00:00:32,500
Like core engine Concepts, what we were doing.

13
00:00:33,100 --> 00:00:37,000
So we're kind of into that other Zone and so what I'd like to do today

14
00:00:37,000 --> 00:00:39,200
is continue down that path.

15
00:00:39,500 --> 00:00:43,400
And right now we I think probably what we should do is take a brief

16
00:00:43,400 --> 00:00:45,200
step back and just go through.

17
00:00:45,200 --> 00:00:47,300
Now that we have everything sort of working.

18
00:00:47,300 --> 00:00:51,100
The way that I envisioned it would sort of skeletally, maybe this

19
00:00:51,100 --> 00:00:54,000
clean up that code, and make sure that it's all happening in the

20
00:00:54,000 --> 00:00:55,400
places that we want it to happen.

21
00:00:55,400 --> 00:00:59,500
And in the way that we want it to happen so that we can move forward

22
00:00:59,500 --> 00:01:00,000
on that.

23
00:01:00,000 --> 00:01:00,400
And

24
00:01:00,900 --> 00:01:04,500
Like I said, the way that we're going to have to approach this is we

25
00:01:04,500 --> 00:01:09,500
probably have to get a little further down the road of actual game

26
00:01:09,800 --> 00:01:14,700
before we could really do much more in terms of making decisions about

27
00:01:14,700 --> 00:01:15,400
how we're going to do stuff.

28
00:01:15,400 --> 00:01:19,100
Like for example, right now I'm not even actually doing any entity

29
00:01:19,100 --> 00:01:19,800
packing.

30
00:01:20,000 --> 00:01:23,600
I'm just copying entities in two places as if they were being packed

31
00:01:23,600 --> 00:01:27,000
and so on a lot of that stuff, I think will persist because we just

32
00:01:27,000 --> 00:01:30,400
want, we just don't want to start over, engineering a sec.

33
00:01:30,600 --> 00:01:35,300
And if I'm not certain about what exactly it's going to entail.

34
00:01:35,300 --> 00:01:38,900
So right now, we're still a little bit early, as far as game code is

35
00:01:38,900 --> 00:01:41,800
concerned to make any hard decisions about stuff, but we're getting a

36
00:01:41,800 --> 00:01:42,400
little further.

37
00:01:42,400 --> 00:01:45,400
Anyway, I'm going to jump in there and just see what suits my fancy

38
00:01:45,400 --> 00:01:46,600
and that's case.

39
00:01:46,900 --> 00:01:51,300
And I think my suspicion is I think I mentioned this at the end of the

40
00:01:51,300 --> 00:01:54,600
last dream, clean a little things up, and then start to work on sort

41
00:01:54,600 --> 00:01:55,900
of the structural aspects.

42
00:01:56,100 --> 00:01:59,900
Let's actually make real rooms some rooms stacked on top of each

43
00:01:59,900 --> 00:02:00,400
other.

44
00:02:00,500 --> 00:02:03,300
Some rooms next to each other, the way that we actually want them to

45
00:02:03,300 --> 00:02:09,500
be and and get that encoding correct with the 3D in the physicality of

46
00:02:09,500 --> 00:02:12,800
it because there's like I think a lot of that code was just for me

47
00:02:12,800 --> 00:02:15,700
initially made our first attempts at making stuff work.

48
00:02:15,700 --> 00:02:17,700
We just have some stuff that's kind of residual in there.

49
00:02:17,700 --> 00:02:21,100
Like how we move entities how their Collision is structured that sort

50
00:02:21,100 --> 00:02:23,700
of stuff, you know, needs to kind of be upgraded.

51
00:02:23,700 --> 00:02:27,700
And so if that's like what I kind of think we probably need to focus

52
00:02:27,700 --> 00:02:29,000
on before moving any further.

53
00:02:30,300 --> 00:02:30,900
Alright.

54
00:02:31,400 --> 00:02:33,900
Today like I said is day to 82.

55
00:02:34,200 --> 00:02:38,300
So if you want to follow along at home packed day 281 source code

56
00:02:38,300 --> 00:02:43,700
that's what I'm starting with here and what I will do briefly as just

57
00:02:43,700 --> 00:02:47,500
run the game and show you where we are at the moment.

58
00:02:49,000 --> 00:02:49,700
Here we go.

59
00:02:52,600 --> 00:02:56,700
So yeah, like I said, you know, right now we've got our ability to

60
00:02:56,700 --> 00:02:59,800
kind of go through rooms now and surprise.

61
00:03:00,000 --> 00:03:01,600
Feels kind of nice to do that.

62
00:03:02,800 --> 00:03:07,700
My only sort of concern with it is, it's very quick, right?

63
00:03:07,700 --> 00:03:12,300
It's very Speedy that transition from room to room and I feel like for

64
00:03:12,300 --> 00:03:15,000
a Snappy action game like this, though, I don't know.

65
00:03:15,000 --> 00:03:17,100
I feel like that's sort of warranted.

66
00:03:17,200 --> 00:03:20,100
So I'm not really sure that we want to slow it down.

67
00:03:20,100 --> 00:03:24,600
Obviously, we could slow it down if we wanted to, and so, I don't

68
00:03:24,600 --> 00:03:27,000
know, we'll have to see over time whether we want a tune that to

69
00:03:27,000 --> 00:03:29,900
something slower or not, but it feels

70
00:03:30,000 --> 00:03:31,800
He's pretty good as you go from room to room.

71
00:03:31,800 --> 00:03:38,000
Now, I'm actually enjoying that that sense of motion quite a bit and

72
00:03:38,900 --> 00:03:42,100
you know, your character doesn't pause your character Still In Motion

73
00:03:42,100 --> 00:03:43,800
while you're doing it, which is also kind of nice.

74
00:03:44,000 --> 00:03:47,900
So it doesn't feel like a stall feels like actual progression through

75
00:03:47,900 --> 00:03:49,200
the world, right?

76
00:03:50,500 --> 00:03:51,400
So that's nice too.

77
00:03:53,100 --> 00:03:56,700
So anyway what I was trying to get across before though is that you

78
00:03:56,700 --> 00:04:00,600
know, we don't really have a solid model for how we want to do

79
00:04:00,600 --> 00:04:01,300
Collision stuff now.

80
00:04:01,300 --> 00:04:04,300
Because like I said, we're sort of into the stuff that's actually the

81
00:04:04,300 --> 00:04:08,800
way the game will really work and the way that I want to have the

82
00:04:08,800 --> 00:04:13,800
Collision stuff work is it is kind of integrating important and

83
00:04:13,800 --> 00:04:16,600
there's a couple things that we also want to support.

84
00:04:17,100 --> 00:04:19,700
Basically there's going downstairs and going

85
00:04:19,899 --> 00:04:25,300
there's are two operations that are, you know,

86
00:04:28,100 --> 00:04:28,900
How should I put this?

87
00:04:28,900 --> 00:04:33,200
So, going downstairs and going upstairs, are things that I do want to

88
00:04:33,200 --> 00:04:34,400
have happen in the game.

89
00:04:35,300 --> 00:04:39,900
Like it's things like Binding of Isaac, going downstairs is kind of

90
00:04:39,900 --> 00:04:40,400
nice.

91
00:04:40,800 --> 00:04:44,100
The way that it works you just kind of hop down a whole but there's no

92
00:04:44,100 --> 00:04:45,300
going back upstairs.

93
00:04:46,600 --> 00:04:49,600
And in Zelda, this was never really a thing.

94
00:04:50,200 --> 00:04:50,800
Zelda.

95
00:04:50,800 --> 00:04:54,900
Really doesn't super distinguish between going downstairs and just

96
00:04:54,900 --> 00:04:56,600
moving, right?

97
00:04:57,000 --> 00:05:00,700
So like if I'm in a, if I'm in like a room or something, you know,

98
00:05:00,700 --> 00:05:04,000
typically what will happen is, I'll just jump like this and like, you

99
00:05:04,000 --> 00:05:07,300
know, this part of the room will be drawn as if it was higher.

100
00:05:07,400 --> 00:05:11,600
This part is drawn as if it's lower and that is the act of going down

101
00:05:11,600 --> 00:05:13,700
just that, you know motion, right?

102
00:05:14,200 --> 00:05:15,900
Whereas I kind of want the

103
00:05:16,400 --> 00:05:20,500
Fucking I actually want, you know, to have this concept of stacking

104
00:05:20,500 --> 00:05:25,400
where I jumped down and I actually have the world come out at me and

105
00:05:25,400 --> 00:05:29,300
that layer peels away, which we had working in the game before but as

106
00:05:29,300 --> 00:05:30,700
a smooth ramp kind of a thing.

107
00:05:31,000 --> 00:05:33,000
Well the heroes now kind of a Hopi dude.

108
00:05:33,000 --> 00:05:36,800
So what I want to do is I want to also make sure that we get that sort

109
00:05:36,800 --> 00:05:37,600
of concept in there.

110
00:05:37,600 --> 00:05:42,200
Now, 54 in its final form, which is how do you hop between two

111
00:05:42,200 --> 00:05:44,100
different heights, if that makes sense?

112
00:05:45,300 --> 00:05:46,700
And those are very discreet.

113
00:05:46,700 --> 00:05:50,900
Meaning there isn't going to be like, there can be variability in the

114
00:05:50,900 --> 00:05:52,700
heights of things on this play field.

115
00:05:52,700 --> 00:05:56,500
Meaning we can you know sort of Jitter what those Heights are.

116
00:05:56,500 --> 00:05:59,500
In fact, I guess now I think about it we could Jitter those just at

117
00:05:59,500 --> 00:05:59,900
the moment.

118
00:06:00,000 --> 00:06:02,400
If we wanted to, I think, right?

119
00:06:02,600 --> 00:06:08,600
So in here, when I do an ad wall command, for example, we pass like

120
00:06:08,700 --> 00:06:14,500
ABS, add wall ABS XYZ, you know, I could give it something here.

121
00:06:14,500 --> 00:06:18,900
That was a random, random number

122
00:06:20,900 --> 00:06:23,700
I don't know what our random series is at the moment.

123
00:06:24,000 --> 00:06:24,800
Let's take a look.

124
00:06:26,100 --> 00:06:27,300
It's just at series.

125
00:06:28,500 --> 00:06:29,400
Series.

126
00:06:29,500 --> 00:06:32,400
Sounds like you're going to start interacting with an Apple product.

127
00:06:33,300 --> 00:06:37,000
So if I wanted to, you know, I could give some displacement here.

128
00:06:37,300 --> 00:06:39,600
I think we might even have a random between.

129
00:06:39,700 --> 00:06:43,500
I don't know if we do if we don't, but let's say you could do up to a

130
00:06:43,500 --> 00:06:45,900
quarter meter in either direction, right?

131
00:06:46,400 --> 00:06:50,200
So what I think we could do is we can actually stagger the locations

132
00:06:50,200 --> 00:06:51,500
of these things as well.

133
00:06:51,500 --> 00:06:55,300
I just want to double check that but you can see in here when I do

134
00:06:55,300 --> 00:06:58,100
sort of this chunk position, begin grenadine.

135
00:06:58,300 --> 00:06:59,000
That sort of stuff.

136
00:06:59,000 --> 00:07:02,400
When we actually have this entity, we can give that entity and offset,

137
00:07:02,400 --> 00:07:08,000
since when it gets packed into the world, that offset would be obeyed

138
00:07:08,000 --> 00:07:08,400
or rather.

139
00:07:08,400 --> 00:07:09,600
I guess it would be right here.

140
00:07:10,300 --> 00:07:15,900
That offset can actually include a z offset, right?

141
00:07:19,500 --> 00:07:21,100
So let's take a quick look at that.

142
00:07:21,400 --> 00:07:23,700
I just want to see if that works because we didn't really talk about

143
00:07:23,700 --> 00:07:24,100
that.

144
00:07:28,000 --> 00:07:32,700
So, those look like they did get the Z offset, but they don't seem to

145
00:07:32,700 --> 00:07:39,200
really draw as if they did, they are sorting as if they did, but not

146
00:07:39,200 --> 00:07:43,000
actually being displaced as if they did, which is a little bit weird

147
00:07:43,300 --> 00:07:44,400
to say the least.

148
00:07:48,100 --> 00:07:49,400
I'm not sure why that is.

149
00:07:52,700 --> 00:07:55,700
that may be a bug in our code for the Hop for the

150
00:07:57,600 --> 00:07:58,000
Points.

151
00:07:58,000 --> 00:07:58,600
But I'm not sure.

152
00:07:58,600 --> 00:07:59,800
So we'll have to look at that.

153
00:08:01,700 --> 00:08:03,700
Let's see, are these actually displaced?

154
00:08:03,700 --> 00:08:07,400
I guess I could tell by making them be displaced much more severely.

155
00:08:08,700 --> 00:08:09,900
So let's just double check.

156
00:08:13,200 --> 00:08:17,100
So let's say, I just place them up to a meter, which is absurd.

157
00:08:26,400 --> 00:08:34,900
Oh, whoops, I made a slight error there, admit that, that was an

158
00:08:34,900 --> 00:08:35,299
error.

159
00:08:35,400 --> 00:08:37,500
I didn't mean to do that to the wall.

160
00:08:37,500 --> 00:08:46,000
I meant to do it to the floor, my bad, you know, just you gotta

161
00:08:46,300 --> 00:08:49,600
sometimes make some, you make an error, you know, sometimes make an

162
00:08:49,600 --> 00:08:51,600
error, I made an error.

163
00:08:52,100 --> 00:08:54,000
I apologize for that upfront.

164
00:08:54,000 --> 00:08:55,900
That was, that was a

165
00:08:56,000 --> 00:08:57,100
A bad.

166
00:08:57,100 --> 00:08:59,300
I did a bad thing and I apologize.

167
00:09:00,000 --> 00:09:02,300
So, I'm going to pass random series here.

168
00:09:05,100 --> 00:09:10,200
Yeah, rough day.

169
00:09:10,300 --> 00:09:11,100
Let's put it that way.

170
00:09:11,300 --> 00:09:14,900
It was a rough day so I'm going to go ahead and now try this.

171
00:09:16,200 --> 00:09:18,500
See if I can do it actually correctly.

172
00:09:20,600 --> 00:09:24,000
By displacing the item, we really wanted to displace.

173
00:09:24,400 --> 00:09:25,600
There's an idea for you.

174
00:09:26,500 --> 00:09:31,500
So when we do add standard room, I will now pass along the, the

175
00:09:31,500 --> 00:09:36,100
serious that we are using and then I will remove that code from add

176
00:09:36,100 --> 00:09:38,700
wall since that was not in any way my intention.

177
00:09:39,800 --> 00:09:42,900
But hey, at least it looks like it was working.

178
00:09:43,000 --> 00:09:44,800
I just was looking at the wrong values.

179
00:09:45,400 --> 00:09:49,900
All right, so now these things actually are displaced, which is good,

180
00:09:49,900 --> 00:09:50,700
that's what I wanted.

181
00:09:50,700 --> 00:09:54,700
And so they can be displaced, right?

182
00:09:54,700 --> 00:09:56,000
And that's good.

183
00:09:56,300 --> 00:09:58,900
So as you can see, we can still Hopalong them just fine.

184
00:09:58,900 --> 00:10:00,800
And that's all good.

185
00:10:00,800 --> 00:10:01,400
Right?

186
00:10:01,800 --> 00:10:05,900
And what's interesting is, you can because the floor actually has

187
00:10:05,900 --> 00:10:06,400
Collision.

188
00:10:06,500 --> 00:10:10,600
I can't hop into some of those, I have to hop around them a little and

189
00:10:10,600 --> 00:10:14,300
then onto them because they actually have Collision volumes, which is

190
00:10:14,300 --> 00:10:15,000
exactly the point.

191
00:10:15,000 --> 00:10:15,400
I was trying,

192
00:10:15,500 --> 00:10:16,000
Only get two.

193
00:10:16,200 --> 00:10:18,700
So what we want to do here, right?

194
00:10:18,700 --> 00:10:22,000
Is we want to start thinking of these a little bit more specifically

195
00:10:22,000 --> 00:10:23,500
and starting to treat those diseases.

196
00:10:23,500 --> 00:10:23,900
Correct.

197
00:10:23,900 --> 00:10:25,800
And also we have these sort of sorting problems.

198
00:10:25,800 --> 00:10:27,700
Like, before you can see, when this thing gets high.

199
00:10:27,700 --> 00:10:30,400
Remember we hacked the Sorting for the for the dude.

200
00:10:30,500 --> 00:10:34,300
So we want to start to coalesce all that stuff and have a very, very

201
00:10:34,300 --> 00:10:38,800
specific way in which we handle all of these, the Z, displacements and

202
00:10:38,800 --> 00:10:39,900
going between levels.

203
00:10:40,100 --> 00:10:43,100
So that it's not as ad hoc, and we don't have like tons of problems

204
00:10:43,100 --> 00:10:44,700
with it throughout the whole development, right?

205
00:10:44,800 --> 00:10:45,300
We just don't want

206
00:10:45,400 --> 00:10:45,900
Want to.

207
00:10:48,800 --> 00:10:53,900
the point here is mostly that you're going to build a lot of code once

208
00:10:53,900 --> 00:10:56,100
you start making the game, proper

209
00:10:57,200 --> 00:11:02,200
You will build a lot of code on these systems as they stand and so if

210
00:11:02,200 --> 00:11:05,400
you make some sloppy decisions there, you're going to live with those

211
00:11:05,400 --> 00:11:07,400
sloppy decisions throughout, right?

212
00:11:07,400 --> 00:11:10,900
And so, we want to limit the number of those we have, by saying if

213
00:11:10,900 --> 00:11:14,000
there's ones, we can see the obvious right solution to here.

214
00:11:14,300 --> 00:11:16,300
We should do that first, right?

215
00:11:16,300 --> 00:11:18,400
We should actually fix those beforehand.

216
00:11:19,800 --> 00:11:20,600
So that looks works.

217
00:11:20,600 --> 00:11:21,000
Great there.

218
00:11:21,000 --> 00:11:23,200
You can see our hopping code is pretty awesome, right?

219
00:11:23,200 --> 00:11:24,300
It always Nails it.

220
00:11:25,100 --> 00:11:29,000
One of the nice things about procedural animation to is that it's

221
00:11:29,000 --> 00:11:29,900
never wrong.

222
00:11:29,900 --> 00:11:31,800
Like regular animation, is it always hits?

223
00:11:31,800 --> 00:11:34,900
Its Mark said oh he's like reacts properly and all that sort of stuff,

224
00:11:34,900 --> 00:11:35,500
right?

225
00:11:35,600 --> 00:11:37,900
You do have to worry about foot slide or anything like that.

226
00:11:38,700 --> 00:11:40,600
So anyway that's all looking great.

227
00:11:41,000 --> 00:11:42,800
And so I'm glad that that all worked.

228
00:11:42,900 --> 00:11:44,700
Oh wow, I got high enough to go up.

229
00:11:44,700 --> 00:11:45,900
One camera level.

230
00:11:46,200 --> 00:11:47,100
Did you see that?

231
00:11:49,600 --> 00:11:50,400
That was awesome.

232
00:11:53,800 --> 00:11:54,900
That was awesome.

233
00:11:56,900 --> 00:11:59,800
All right, I should I'm sorry this is not productive.

234
00:12:00,000 --> 00:12:00,800
Playing around with this.

235
00:12:00,800 --> 00:12:03,300
But you know, sometimes you just you play around with stuff.

236
00:12:05,400 --> 00:12:09,200
I kind of want to see what if we always bias it upwards.

237
00:12:09,300 --> 00:12:13,000
So that it's eminently possible to get to the next floor.

238
00:12:15,800 --> 00:12:17,100
I just want to see what happens.

239
00:12:24,500 --> 00:12:26,300
None of these look that high though.

240
00:12:26,300 --> 00:12:28,800
I guess that one, that one's low.

241
00:12:30,800 --> 00:12:33,100
Wait, why would?

242
00:12:37,700 --> 00:12:41,300
I should be looking for a point that's really fat, you know, saying

243
00:12:44,700 --> 00:12:46,000
Bear with me for a moment here.

244
00:12:46,400 --> 00:12:47,800
So, in Sim region,

245
00:12:49,900 --> 00:12:51,200
Let's let's zoom on down.

246
00:12:51,600 --> 00:12:54,100
Zoom on down, don't ask me what that was.

247
00:12:54,300 --> 00:12:59,100
Don't know what happens with the Cameron Z.

248
00:13:01,600 --> 00:13:02,600
We don't even check.

249
00:13:05,800 --> 00:13:12,100
so, this is what

250
00:13:13,200 --> 00:13:16,700
What, how are we doing?

251
00:13:16,700 --> 00:13:17,900
Z motion of the camera.

252
00:13:17,900 --> 00:13:22,300
Do we set the Z motion of the camera to the guy directly during

253
00:13:22,300 --> 00:13:23,500
movement or something?

254
00:13:31,700 --> 00:13:38,200
I mean, we do so we just hard set to the chunk Z, so forget that

255
00:13:38,200 --> 00:13:38,900
that's over.

256
00:13:41,800 --> 00:13:42,600
That's done.

257
00:13:43,100 --> 00:13:45,700
We actually want to have code like this, right?

258
00:13:45,700 --> 00:13:52,900
We want to have code where we can sort of go by go by height

259
00:13:52,900 --> 00:13:56,700
differences there and we want to be able to smoothly interpolate

260
00:13:56,700 --> 00:13:58,700
between those certainly, right?

261
00:14:00,100 --> 00:14:02,700
So let's take a look at how this is actually working because I'm not

262
00:14:02,700 --> 00:14:08,400
actually sure I want to also go into the world code and see what our

263
00:14:08,400 --> 00:14:11,200
tile like, what's our tile.

264
00:14:11,800 --> 00:14:15,500
Sort of Dimension here when we do chunk Tim.

265
00:14:15,900 --> 00:14:21,300
So we have chunk Tim's, we allow fully rectangular, right?

266
00:14:21,300 --> 00:14:23,600
Rectangular prisms, that looks like for our space.

267
00:14:25,000 --> 00:14:29,000
So I think what I'd want to do is just take a look here with the but

268
00:14:29,000 --> 00:14:29,400
the chunk.

269
00:14:29,400 --> 00:14:32,900
Damn actually was I like we still have ground chunk control in here,

270
00:14:32,900 --> 00:14:33,400
goodbye.

271
00:14:35,800 --> 00:14:41,100
So when I create the world which I guess would be in World mode when I

272
00:14:41,100 --> 00:14:43,000
create the world initially I pass it.

273
00:14:43,100 --> 00:14:48,000
What we want those Dimensions to be and so it looks like we say tile

274
00:14:48,000 --> 00:14:53,300
side and M tiled twice the tile side and M oh wait that's the

275
00:14:53,300 --> 00:14:53,600
greatest.

276
00:14:53,600 --> 00:14:57,400
Sorry we do ground buffer with grammar for height.

277
00:14:57,600 --> 00:14:59,900
So this is now irrelevant as well because

278
00:15:00,000 --> 00:15:01,700
Care about the ground buffers lining up with it.

279
00:15:01,700 --> 00:15:04,700
So our world chunk Dimension is going to have to be modified as well

280
00:15:05,100 --> 00:15:06,500
and typical floor height.

281
00:15:06,500 --> 00:15:09,800
The typical floor, height is 3 meters, right?

282
00:15:11,000 --> 00:15:14,700
And that's important because that's how much we would want our camera

283
00:15:14,700 --> 00:15:16,500
to move, right?

284
00:15:17,700 --> 00:15:22,300
So I guess how do I want to treat that?

285
00:15:22,300 --> 00:15:27,000
I want to treat it basically the same way that we're treating, the

286
00:15:27,000 --> 00:15:28,300
other Delta's here.

287
00:15:28,800 --> 00:15:29,800
So presumably there.

288
00:15:30,000 --> 00:15:33,200
Vroom, Delta code here would be, like, whatever the typical floor

289
00:15:33,200 --> 00:15:36,600
height would be, is how much we move, right?

290
00:15:36,900 --> 00:15:43,500
We could just keep these where we say, whatever the world mode is its

291
00:15:43,500 --> 00:15:44,700
typical floor height.

292
00:15:47,100 --> 00:15:52,200
I could just say that, that's how much that Delta is and then, the

293
00:15:52,200 --> 00:15:54,500
apron, I guess would be pretty similar.

294
00:15:54,500 --> 00:15:54,900
I guess.

295
00:15:54,900 --> 00:15:57,900
I don't even need to really change much about how that's working at

296
00:15:57,900 --> 00:15:58,200
all.

297
00:15:58,400 --> 00:16:00,600
I could just say that that's the same here.

298
00:16:01,500 --> 00:16:04,300
And so what I wanted to do is say, well, let's go ahead and treat

299
00:16:04,300 --> 00:16:08,100
these the same and I guess we could even treat it.

300
00:16:08,100 --> 00:16:11,500
Roughly the same in terms of pull in pull out, I think.

301
00:16:12,800 --> 00:16:14,100
So, I'm going to go ahead and do that.

302
00:16:16,200 --> 00:16:17,000
Let's take a look here.

303
00:16:17,000 --> 00:16:20,400
So, if I do this code out and like I said, you can see that this code

304
00:16:20,400 --> 00:16:23,100
has a fantastic amount of similarity to it, which is why I say, I

305
00:16:23,100 --> 00:16:25,900
think I said in the last dream, we should probably take a minute to

306
00:16:25,900 --> 00:16:30,000
condense it down because it can be made much less redundant but I

307
00:16:30,000 --> 00:16:32,200
still I'm just wanting to play around with it, the moment.

308
00:16:32,300 --> 00:16:35,000
So here, if I was to do the room, Delta stuff,

309
00:16:39,500 --> 00:16:40,900
This would allow me to do.

310
00:16:41,000 --> 00:16:41,400
Okay.

311
00:16:41,400 --> 00:16:44,100
So, you know, we're going up a room or here.

312
00:16:44,100 --> 00:16:45,400
We're going down a room.

313
00:16:47,700 --> 00:16:49,200
And then we do the map trunk space.

314
00:16:49,200 --> 00:16:49,700
Right?

315
00:16:49,700 --> 00:16:52,300
So if you look at this this is very, very regular.

316
00:16:52,300 --> 00:16:55,700
So I feel like this could be done with a for I Loop pretty trivially,

317
00:16:55,800 --> 00:16:56,500
right?

318
00:16:57,300 --> 00:17:01,800
And all we would do if we wanted to do that would be to Loop over the

319
00:17:01,800 --> 00:17:02,400
elements.

320
00:17:08,000 --> 00:17:14,599
So for each element we would do one of these right.

321
00:17:15,000 --> 00:17:18,400
Instead of doing like that X is 2 Y is and Dot you know dot whatever

322
00:17:18,400 --> 00:17:22,500
is we would just say like okay instead of dot X we just use ee right.

323
00:17:22,500 --> 00:17:24,400
Whatever the element is that we're on

324
00:17:25,599 --> 00:17:27,700
and then the same thing here, right?

325
00:17:27,700 --> 00:17:28,500
We just say

326
00:17:32,300 --> 00:17:37,200
Is this why does does anyone know why for a coder sometimes inserts?

327
00:17:37,600 --> 00:17:40,000
Like a space when I'm doing stuff?

328
00:17:40,100 --> 00:17:41,300
I don't know why.

329
00:17:41,600 --> 00:17:43,100
I haven't been able to figure that out.

330
00:17:44,400 --> 00:17:47,800
I'm not sure what I'm doing something and it insert a space after I

331
00:17:47,800 --> 00:17:50,000
hit left bracket, but only left bracket.

332
00:17:50,000 --> 00:17:52,800
I wonder if it's something in my custom file that I forgot about,

333
00:17:53,600 --> 00:17:56,500
which seems likely, but I just don't, I haven't had time to go.

334
00:17:56,500 --> 00:17:57,100
Look at it.

335
00:18:01,400 --> 00:18:03,200
Like, it does it but I don't know.

336
00:18:03,900 --> 00:18:05,600
Like, I can't always reproduce it.

337
00:18:05,600 --> 00:18:07,200
Like it just did it but I don't know.

338
00:18:07,300 --> 00:18:09,200
So I feel like maybe it's not just my bug.

339
00:18:09,200 --> 00:18:10,000
Maybe there's two.

340
00:18:14,000 --> 00:18:14,700
I don't know.

341
00:18:15,800 --> 00:18:17,000
Alan, if you're out there.

342
00:18:19,100 --> 00:18:20,300
You got any ideas?

343
00:18:21,100 --> 00:18:22,500
I don't know what that's from.

344
00:18:23,500 --> 00:18:23,900
Okay.

345
00:18:23,900 --> 00:18:31,600
So let's see, new camera P map into chunks space new camera P applied

346
00:18:31,600 --> 00:18:32,000
Delta.

347
00:18:32,000 --> 00:18:33,700
So that does Cascade properly.

348
00:18:34,200 --> 00:18:35,200
So, I think,

349
00:18:36,300 --> 00:18:41,200
That's a complete solution for that part of the equation, right for

350
00:18:41,200 --> 00:18:41,900
this part.

351
00:18:41,900 --> 00:18:43,300
I'm not sure about it yet.

352
00:18:43,400 --> 00:18:48,900
I'm going to put in the Z here and because the Z we need to do some

353
00:18:48,900 --> 00:18:51,200
slightly different things, which is to say that.

354
00:18:51,200 --> 00:18:56,000
Now, the bounce obviously can't be there because the balance is going

355
00:18:56,000 --> 00:18:58,300
in the direction that we would want to go.

356
00:18:58,300 --> 00:19:02,600
So, there shouldn't be any Z happening at all for, very obvious

357
00:19:02,600 --> 00:19:05,900
reasons, but we should still be able to condense this.

358
00:19:06,100 --> 00:19:06,200
Down.

359
00:19:06,200 --> 00:19:11,700
So that's not a huge deal either way, but just something to just

360
00:19:11,700 --> 00:19:12,600
something to note.

361
00:19:13,500 --> 00:19:18,800
All right, so I'm just going to go ahead and recompile this here.

362
00:19:19,100 --> 00:19:21,700
We condense that down and now we've also got Z Motion in there.

363
00:19:23,100 --> 00:19:26,300
Unfortunately, in order to actually try hopping up.

364
00:19:26,500 --> 00:19:30,900
I'm gonna need a little bit more of a, of a ramp kind of thing.

365
00:19:30,900 --> 00:19:33,100
Probably to see what happens if I do that.

366
00:19:33,200 --> 00:19:35,900
So, what I'm going to do is I'm just going to go ahead and create

367
00:19:36,000 --> 00:19:39,200
A ramp in that standard room just because why not, right?

368
00:19:43,200 --> 00:19:44,500
So here's World mode.

369
00:19:44,500 --> 00:19:50,500
And when I do add standard room, I'm gonna do a thing where instead of

370
00:19:50,500 --> 00:19:51,800
doing this random, right?

371
00:19:51,800 --> 00:19:53,100
I'm not going to do it random.

372
00:19:53,100 --> 00:19:57,900
I'm going to say that if offset X is greater than zero, then I'm going

373
00:19:57,900 --> 00:19:59,400
to apply an offset Z.

374
00:19:59,400 --> 00:20:02,500
So that basically the whole world is kind of a ramp that goes up.

375
00:20:02,700 --> 00:20:04,300
Maybe we'll also do.

376
00:20:04,300 --> 00:20:06,600
You know if offset Y is greater than 0?

377
00:20:06,600 --> 00:20:09,700
So, like the bottom, I'm so the top upper like this

378
00:20:09,800 --> 00:20:11,900
Corner upper right?

379
00:20:13,000 --> 00:20:17,000
We'll have that sort of look to it and so what I'll do there is I'll

380
00:20:17,000 --> 00:20:23,000
just say like okay yeah that ramp will just be oh dear it'll be like

381
00:20:23,000 --> 00:20:24,600
the offset X plus the offset.

382
00:20:24,600 --> 00:20:25,100
Why

383
00:20:28,000 --> 00:20:31,100
And and we'll make that be real.

384
00:20:31,600 --> 00:20:32,600
Let's get real here.

385
00:20:34,200 --> 00:20:36,900
Gotta love that, not very good, set of code analysis.

386
00:20:36,900 --> 00:20:40,700
It's like, hey, it's between negative four, four and negative, eight

387
00:20:40,700 --> 00:20:41,400
and eight.

388
00:20:41,400 --> 00:20:44,000
But for some reason, the expression evaluator couldn't tell that you

389
00:20:44,000 --> 00:20:48,900
couldn't cast at maximum positive or negative 12 to a real.

390
00:20:50,300 --> 00:20:53,000
Go figure pretty sure it can handle it.

391
00:20:53,000 --> 00:20:57,400
Anyway, let's go ahead and run this.

392
00:21:00,100 --> 00:21:01,900
So here we are coming upwards.

393
00:21:02,700 --> 00:21:04,500
Of course, can I actually get there?

394
00:21:04,600 --> 00:21:06,100
Oh, but you know what?

395
00:21:06,800 --> 00:21:09,200
We don't allow ourselves to hop up.

396
00:21:09,200 --> 00:21:10,200
Do we right now?

397
00:21:10,800 --> 00:21:12,200
At least not very large.

398
00:21:12,200 --> 00:21:14,700
We look for things that are below the head.

399
00:21:14,900 --> 00:21:18,100
So if you're higher than the head you can't really hop to it.

400
00:21:18,300 --> 00:21:20,600
Can you, is that true?

401
00:21:21,700 --> 00:21:23,300
So we may have to give ourselves.

402
00:21:23,300 --> 00:21:24,600
I don't know what our rules should be.

403
00:21:24,600 --> 00:21:27,900
Obviously you can't have two things that are you know too high.

404
00:21:28,700 --> 00:21:31,100
But what's the rule going to be for that?

405
00:21:32,100 --> 00:21:32,900
I don't know.

406
00:21:38,500 --> 00:21:39,000
Yeah, I don't know.

407
00:21:39,000 --> 00:21:40,200
Do we prevent that?

408
00:21:43,900 --> 00:21:45,600
Closest distance squared.

409
00:21:48,200 --> 00:21:49,600
well, maybe not

410
00:21:50,800 --> 00:21:53,100
Doesn't look like we're actively preventing that right now though.

411
00:21:53,400 --> 00:21:55,200
So why can't I hop in here?

412
00:21:59,300 --> 00:22:03,900
It looks like I did, it looks like it will never pick those higher

413
00:22:03,900 --> 00:22:05,900
ones, no matter what I try.

414
00:22:09,700 --> 00:22:10,100
Right.

415
00:22:10,200 --> 00:22:12,400
You can see it's only going to the lower ones.

416
00:22:15,700 --> 00:22:17,000
So, I'm not sure why that is.

417
00:22:17,000 --> 00:22:17,900
Why is that?

418
00:22:22,500 --> 00:22:22,700
Hm.

419
00:22:25,500 --> 00:22:28,800
I must have forgotten something about this code or there's just a bug

420
00:22:28,800 --> 00:22:29,200
in it.

421
00:22:30,900 --> 00:22:31,500
Let's see.

422
00:22:31,600 --> 00:22:33,500
Get closest traversable

423
00:22:35,600 --> 00:22:40,100
so, when we do the closest reversible thing here,

424
00:22:41,500 --> 00:22:45,100
That's not going to cause the hopping that's just the head bit.

425
00:22:45,100 --> 00:22:46,100
So here's

426
00:22:47,900 --> 00:22:49,000
here's how this works.

427
00:22:51,800 --> 00:22:56,800
So we are calling get closest reversible, and if it is found, we just

428
00:22:56,800 --> 00:22:57,700
do what we do.

429
00:22:57,700 --> 00:23:00,400
We never reject a move here, right?

430
00:23:00,400 --> 00:23:01,700
I mean, there's no rejection.

431
00:23:01,700 --> 00:23:05,200
So it would be, it would be inside, get closest, reversible.

432
00:23:05,600 --> 00:23:09,200
That would be what the problem would be, right?

433
00:23:12,400 --> 00:23:16,600
And I guess part of the problem might be that since we're taking Z

434
00:23:16,600 --> 00:23:17,800
into account.

435
00:23:17,800 --> 00:23:21,400
I mean it's possible that it never is the closest thing.

436
00:23:22,100 --> 00:23:26,500
I mean it could be right and so I guess I don't know.

437
00:23:26,700 --> 00:23:33,100
But what I would say is we can certainly we can certainly, you know,

438
00:23:33,400 --> 00:23:34,800
test that hypothesis.

439
00:23:34,900 --> 00:23:37,000
If I just assumed that the delta

440
00:23:38,200 --> 00:23:40,800
From the head to the point, which I've computed, which is a full

441
00:23:40,800 --> 00:23:45,100
three-dimensional Delta, if I just 0 at Z value, then I will only be

442
00:23:45,100 --> 00:23:49,200
testing what is the closest point in 2D, right?

443
00:23:50,100 --> 00:23:52,900
And so then I should be able to hop to other things.

444
00:23:54,400 --> 00:23:57,400
And now you can see that I actually do, right?

445
00:24:06,300 --> 00:24:08,500
So I guess the problem is they were just further away.

446
00:24:08,600 --> 00:24:11,300
Now what's interesting about that is that suggests to me that these

447
00:24:11,300 --> 00:24:14,200
things are much higher than I thought they were going to be, did I

448
00:24:14,200 --> 00:24:15,600
mess up that code?

449
00:24:15,700 --> 00:24:18,200
I guess that would already be two meters high.

450
00:24:20,500 --> 00:24:21,600
So, there is that.

451
00:24:28,100 --> 00:24:30,700
Max entity velocity is higher than it should be.

452
00:24:30,700 --> 00:24:32,300
What is the entity velocity Dare?

453
00:24:32,300 --> 00:24:32,900
I ask

454
00:24:41,100 --> 00:24:42,400
So those are much higher.

455
00:24:42,400 --> 00:24:43,700
I guess that's true though.

456
00:24:43,800 --> 00:24:46,500
Those are really, really high to be fair.

457
00:24:46,800 --> 00:24:51,300
So I should probably just tone those down for now because that's

458
00:24:51,300 --> 00:24:52,800
actually a pretty reasonable.

459
00:24:53,200 --> 00:24:56,100
Yeah, I don't think we want anything jumping up quite that much in a

460
00:24:56,100 --> 00:24:56,900
single shot.

461
00:24:57,900 --> 00:24:59,600
All right, so I guess that wasn't really weird.

462
00:24:59,600 --> 00:25:02,500
I guess that was actually what we would have expected, but

463
00:25:04,000 --> 00:25:08,100
Hold, please, because we've got more work to do in that regard.

464
00:25:08,200 --> 00:25:13,500
So first of all, I want to take that ad standard room and I would like

465
00:25:13,500 --> 00:25:15,100
this to not be so much.

466
00:25:15,400 --> 00:25:19,200
So what I'd like to do here is say okay, you know, maybe add like a

467
00:25:19,200 --> 00:25:23,900
tenth of that or I guess like a quarter of that, let's say so that it

468
00:25:23,900 --> 00:25:27,600
doesn't climb up quite so much because if it's going to be 8 plus 4

469
00:25:27,600 --> 00:25:33,500
2012 so like 1.2 meters would be a little too little but you know five

470
00:25:33,500 --> 00:25:33,600
me.

471
00:25:33,800 --> 00:25:36,100
There's maybe isn't too much because we're supposed to be making a

472
00:25:36,100 --> 00:25:39,000
ramp, so let's just let's just see if that's a little calmer.

473
00:25:40,000 --> 00:25:40,400
Yeah.

474
00:25:58,400 --> 00:26:00,700
So that's more reasonable certainly right?

475
00:26:03,200 --> 00:26:04,400
And that works really well.

476
00:26:15,700 --> 00:26:18,400
Okay, so that's fine.

477
00:26:18,800 --> 00:26:19,800
That's all good.

478
00:26:21,000 --> 00:26:24,100
And so I think we can move on to the other stuff that I wanted to work

479
00:26:24,100 --> 00:26:24,500
on there.

480
00:26:26,100 --> 00:26:26,600
For now.

481
00:26:31,200 --> 00:26:31,500
Yeah.

482
00:26:32,600 --> 00:26:33,200
So

483
00:26:36,800 --> 00:26:38,300
Since we have this in here.

484
00:26:39,000 --> 00:26:43,600
Oops, and made that CPP.

485
00:26:47,000 --> 00:26:48,700
Get closest.

486
00:26:50,800 --> 00:26:51,200
There we go.

487
00:26:52,300 --> 00:26:55,700
When we do the get closest reversible, the thing about that is I

488
00:26:55,700 --> 00:26:59,400
probably want to make sure that we don't leave this in here because

489
00:26:59,400 --> 00:26:59,900
obviously

490
00:27:00,000 --> 00:27:04,800
It would be bad if you imagine having a bunch of very like different

491
00:27:04,800 --> 00:27:08,300
heights that you could jump to close to you, it would not

492
00:27:08,300 --> 00:27:11,200
differentiate between like the one that's way, way down there and you

493
00:27:11,200 --> 00:27:14,200
wouldn't want to ever jump to and one that's right next to you.

494
00:27:14,500 --> 00:27:16,600
They would only be looking at their to D Delta.

495
00:27:17,800 --> 00:27:21,100
So first, what I'm going to do is I'm going to say, well let's get rid

496
00:27:21,100 --> 00:27:26,100
of that temporarily and see what happens with the with the more calm

497
00:27:26,100 --> 00:27:27,000
situation.

498
00:27:28,500 --> 00:27:28,800
Okay?

499
00:27:28,800 --> 00:27:29,800
So if the height difference is

500
00:27:30,000 --> 00:27:30,900
Aren't too much.

501
00:27:30,900 --> 00:27:33,700
Then closest point is still pretty good.

502
00:27:33,700 --> 00:27:37,500
It looks like right, that still works pretty well if it would seem

503
00:27:40,200 --> 00:27:40,700
Right.

504
00:27:55,300 --> 00:27:59,100
All right, it's interesting that it ever goes down.

505
00:27:59,100 --> 00:28:01,100
I'm not sure why it goes down like that.

506
00:28:02,400 --> 00:28:04,800
I guess we get just a little bit below zero.

507
00:28:06,900 --> 00:28:09,100
Which again is probably some stuff we want to work on with the camera

508
00:28:09,100 --> 00:28:09,400
code.

509
00:28:09,400 --> 00:28:14,400
But anyway so point being that's actually kind of nice because then we

510
00:28:14,400 --> 00:28:17,200
can still just use total distance and it's probably fine.

511
00:28:17,400 --> 00:28:20,900
Although I don't know like if we want there to be fairly big hops that

512
00:28:20,900 --> 00:28:24,500
that the, the fellow does that wouldn't work as well.

513
00:28:24,600 --> 00:28:27,400
So my see, my my thinking on this anyway,

514
00:28:28,700 --> 00:28:31,000
Is that we probably want to do something a little bit more.

515
00:28:31,000 --> 00:28:40,500
Like whatever the point is that's closest in 2D is greatly preferred,

516
00:28:40,500 --> 00:28:40,900
you know.

517
00:28:40,900 --> 00:28:46,500
So maybe we don't 0 it right but we probably do get rid of a lot of

518
00:28:46,500 --> 00:28:53,700
it, you know, and there's two ways we can do this one is we can take

519
00:28:53,700 --> 00:28:55,000
the head Point Z.

520
00:28:57,100 --> 00:28:59,100
And multiply it by some coefficient.

521
00:28:59,500 --> 00:29:04,700
So that things are effectively squashed in the Z Direction in terms of

522
00:29:04,700 --> 00:29:05,100
picking.

523
00:29:05,100 --> 00:29:08,300
What the closest point is and that seems like a reasonable thing to

524
00:29:08,300 --> 00:29:08,400
do.

525
00:29:08,400 --> 00:29:11,600
The other thing we could do is not if we don't actually want to

526
00:29:11,600 --> 00:29:15,100
compress the entire space, what we can do instead is just compress

527
00:29:15,100 --> 00:29:17,200
just the space right, nearby?

528
00:29:17,400 --> 00:29:22,100
So we could say is like up to one floor away in either direction.

529
00:29:22,100 --> 00:29:22,700
However much.

530
00:29:22,700 --> 00:29:25,700
We want you to hop that we just remove right.

531
00:29:25,700 --> 00:29:26,100
And that would just

532
00:29:26,300 --> 00:29:31,700
Really absolute value - that amount clamp 20, right?

533
00:29:34,300 --> 00:29:36,400
That would be another way of handling it.

534
00:29:36,400 --> 00:29:40,100
I don't know which one of those makes the most sense but I suspect

535
00:29:40,100 --> 00:29:45,400
that the one where we just remove a certain amount of the space is

536
00:29:45,400 --> 00:29:48,600
probably the best so I'm thinking that probably what we would want to

537
00:29:48,600 --> 00:29:53,500
do is say that the head to point Vector is going to be equal to you

538
00:29:53,500 --> 00:29:55,400
know whatever its absolute value.

539
00:29:55,400 --> 00:29:55,700
I'm sorry.

540
00:29:55,700 --> 00:29:59,400
They had to point Z value is going to be whatever its absolute value

541
00:29:59,400 --> 00:29:59,800
was

542
00:30:02,000 --> 00:30:07,100
So you know, now we know okay we know this is positive from zero to

543
00:30:07,200 --> 00:30:07,600
something.

544
00:30:07,600 --> 00:30:13,900
Positive, we'd subtract away whatever we wanted that, you know, and

545
00:30:15,500 --> 00:30:16,900
what should this value B?

546
00:30:17,600 --> 00:30:18,400
We don't really know.

547
00:30:18,900 --> 00:30:21,800
But we subtract away some amount that we're staying like everything

548
00:30:21,800 --> 00:30:23,900
within here is fair game for hopping.

549
00:30:25,100 --> 00:30:25,900
Or something.

550
00:30:26,300 --> 00:30:27,800
And maybe that's a little bit too much.

551
00:30:28,200 --> 00:30:32,200
So let's say it's to or something like this, whatever 1.5 I don't

552
00:30:32,200 --> 00:30:35,100
know, half the floor height, whatever we think you should be able to

553
00:30:35,100 --> 00:30:36,200
hop in one go.

554
00:30:37,900 --> 00:30:41,700
And I don't know what that is so we take whatever that is we subtract

555
00:30:41,700 --> 00:30:48,600
that away and then we clamp that clamp above zero I guess it's how we

556
00:30:48,600 --> 00:30:49,700
would say it right?

557
00:30:50,400 --> 00:30:54,900
And that way we know that it's only going to be values that are above

558
00:30:54,900 --> 00:30:59,500
one that we actually start discriminating based on the Z, right?

559
00:31:01,600 --> 00:31:02,400
So I don't know.

560
00:31:02,400 --> 00:31:04,000
That seems like one way to do it.

561
00:31:04,000 --> 00:31:04,700
I don't know.

562
00:31:04,700 --> 00:31:08,700
Like I said if that's the best way to do it or not, it's hard for me

563
00:31:08,700 --> 00:31:13,300
to determine really but you can kind of you can see roughly how this

564
00:31:13,300 --> 00:31:13,700
goes.

565
00:31:13,900 --> 00:31:17,500
And what's interesting about this too is you can see that we're going

566
00:31:17,500 --> 00:31:18,300
to have some problems.

567
00:31:18,300 --> 00:31:23,500
If we allow hopping between relatively high things, the head of the

568
00:31:23,500 --> 00:31:25,000
character, right?

569
00:31:25,900 --> 00:31:31,500
The head needs to interpolate on the Z just like everything else.

570
00:31:31,500 --> 00:31:32,300
Right?

571
00:31:32,300 --> 00:31:34,800
So there's that as well.

572
00:31:34,900 --> 00:31:38,200
There's also the sort of ancillary question, which is do, we actually

573
00:31:38,200 --> 00:31:43,300
want the spatial warping in X here or do we only wanted and why?

574
00:31:43,300 --> 00:31:46,400
Because you can see how this is a full perspective transform here.

575
00:31:46,400 --> 00:31:48,400
And we probably don't want that for gameplay purposes.

576
00:31:48,400 --> 00:31:52,000
We probably want those to be sort of more in line.

577
00:31:52,000 --> 00:31:55,200
So, again, we've got some work to do there in terms of how we're

578
00:31:55,200 --> 00:31:55,800
handling our

579
00:31:56,000 --> 00:31:58,900
Displacements more specifically, right?

580
00:32:03,400 --> 00:32:03,800
Yeah.

581
00:32:06,200 --> 00:32:07,400
Go little hero.

582
00:32:09,800 --> 00:32:10,000
Go.

583
00:32:10,000 --> 00:32:10,100
Go.

584
00:32:10,100 --> 00:32:10,300
Go.

585
00:32:10,300 --> 00:32:10,400
Go.

586
00:32:10,400 --> 00:32:10,800
Go.

587
00:32:14,500 --> 00:32:16,600
I should be able to hop over this wall.

588
00:32:16,900 --> 00:32:17,400
There we go.

589
00:32:21,700 --> 00:32:23,900
Oh man, but it inside the tree now.

590
00:32:27,800 --> 00:32:28,900
All right, anyway.

591
00:32:30,300 --> 00:32:32,000
Yeah, I'm playing around with that a little bit too much instead of

592
00:32:32,000 --> 00:32:32,400
programming.

593
00:32:32,400 --> 00:32:33,200
This is the problem.

594
00:32:33,200 --> 00:32:36,300
Whenever you make something that you enjoy moving around yourself, as

595
00:32:36,300 --> 00:32:38,800
you end up sitting there moving it around and not actually working.

596
00:32:39,800 --> 00:32:40,100
All right?

597
00:32:40,100 --> 00:32:40,600
So,

598
00:32:42,300 --> 00:32:43,200
Let's see here.

599
00:32:43,600 --> 00:32:46,600
Hmm again we have a number of things that we need to be working on

600
00:32:46,600 --> 00:32:48,900
Sosa question of choosing, which ones we want to.

601
00:32:48,900 --> 00:32:52,100
So I think what we want to do is try to tackle like the Z thing and

602
00:32:52,100 --> 00:32:54,700
get that nailed down for good.

603
00:32:54,700 --> 00:32:55,000
Right.

604
00:32:55,000 --> 00:32:56,900
I think that's probably what we want to do.

605
00:32:57,200 --> 00:32:59,700
And the problem that we have here is that we have to

606
00:33:00,000 --> 00:33:01,500
Different kinds of Z values.

607
00:33:01,800 --> 00:33:06,800
And so, what I'd like to propose is that we actually just have this is

608
00:33:06,800 --> 00:33:08,800
this is what I think is what I want to go with.

609
00:33:08,800 --> 00:33:11,800
And it's going to be a bit of a struggle to like move everything over

610
00:33:11,800 --> 00:33:14,900
to it, but I think it's worth doing and like I said, I want to do it

611
00:33:14,900 --> 00:33:17,300
one time and not have to worry about it again.

612
00:33:22,500 --> 00:33:23,800
So this is the plan.

613
00:33:25,200 --> 00:33:26,300
For finals, e.

614
00:33:28,300 --> 00:33:34,300
Okay, so I think what I want to do for the plan, for final Z based on

615
00:33:34,300 --> 00:33:37,700
all the trade-offs and sort of the experimentation we did with ramps,

616
00:33:37,700 --> 00:33:38,900
and all these sorts of things.

617
00:33:39,900 --> 00:33:45,700
What I'd like to do is I would like to say, look, I don't think actual

618
00:33:45,700 --> 00:33:49,500
z-transforms work very well in a 2-D game like this.

619
00:33:49,500 --> 00:33:50,400
I played around with them.

620
00:33:50,400 --> 00:33:53,200
A little, we had going up and down the ramp, it was cool, but there

621
00:33:53,200 --> 00:33:56,800
are just too many problems with it and it creates a sort of like

622
00:33:56,800 --> 00:33:58,000
difficult thing for the

623
00:33:58,100 --> 00:34:00,900
Person to understand who's looking at the game as well, because it's

624
00:34:00,900 --> 00:34:03,700
unclear like what the perspective means.

625
00:34:03,700 --> 00:34:05,300
And it's, it's just confusing.

626
00:34:07,000 --> 00:34:13,400
But at the same time, I really liked that feel of going up and down in

627
00:34:13,400 --> 00:34:14,800
the world, right?

628
00:34:14,900 --> 00:34:19,400
So, I like that idea of coming up and you like you you know you kind

629
00:34:19,400 --> 00:34:20,400
of move up a level.

630
00:34:20,600 --> 00:34:23,800
I like the idea of having that nice scaling transition that happens

631
00:34:23,800 --> 00:34:24,199
there.

632
00:34:25,199 --> 00:34:29,900
So what I think I want to do is make a very delineate, it split that

633
00:34:29,900 --> 00:34:32,600
there is basically a floor Z.

634
00:34:35,600 --> 00:34:38,199
And a, you know, actual Z.

635
00:34:41,600 --> 00:34:42,000
Okay.

636
00:34:43,199 --> 00:34:44,900
And so, what these would be

637
00:34:46,500 --> 00:34:51,100
Is this is something that actually creates perspective.

638
00:34:55,400 --> 00:34:58,300
And this is something that is entirely orthographic.

639
00:35:01,200 --> 00:35:01,700
Okay?

640
00:35:02,300 --> 00:35:07,000
This will be the actual Z in the world, so your actual Z coordinate is

641
00:35:07,000 --> 00:35:08,800
always treated as orthographic.

642
00:35:08,800 --> 00:35:11,600
Z your floor's e.

643
00:35:11,600 --> 00:35:16,000
On the other hand is going to be based on the world chunk, probably,

644
00:35:16,300 --> 00:35:16,900
right?

645
00:35:17,000 --> 00:35:20,200
So what we'll do is we'll just as we already have will say that world

646
00:35:20,200 --> 00:35:23,600
chunks are just slices through the world that you go up and down

647
00:35:23,600 --> 00:35:24,800
between discreetly.

648
00:35:26,000 --> 00:35:30,700
And so, whichever one of these your on, that will

649
00:35:31,000 --> 00:35:33,300
As you two have a transform.

650
00:35:34,800 --> 00:35:38,600
So when we actually set up your end of the transform, we will split it

651
00:35:38,600 --> 00:35:46,900
into two Z's, the actual Z and the floor Z and the actual Z will be in

652
00:35:46,900 --> 00:35:49,000
both places, meaning, right?

653
00:35:49,000 --> 00:35:52,600
Right now we have this thing where like your offset when you pass that

654
00:35:54,000 --> 00:35:55,100
And your transform.

655
00:35:55,100 --> 00:35:59,200
We had this in the renderer, this was effectively

656
00:36:00,100 --> 00:36:06,600
A and this was effectively Ortho Z but that will go away.

657
00:36:07,000 --> 00:36:07,500
Okay?

658
00:36:07,700 --> 00:36:13,300
And what we will actually do is just have actual Z in both places.

659
00:36:13,400 --> 00:36:17,900
So, everywhere is going to use the same Z and then the only thing that

660
00:36:17,900 --> 00:36:18,500
we do

661
00:36:20,400 --> 00:36:26,200
Is we will sift entities based on their floors e and put them into

662
00:36:26,200 --> 00:36:31,600
buckets for the renderer where there's a certain perspective plane

663
00:36:31,700 --> 00:36:34,000
each you know in each bucket, right?

664
00:36:34,900 --> 00:36:40,900
And those buckets will also correspond to our Alpha fade and the

665
00:36:40,900 --> 00:36:44,400
reason also that we need to do that in case you don't remember can

666
00:36:44,400 --> 00:36:45,000
spin a while.

667
00:36:45,000 --> 00:36:49,100
Since we talked about this I do like the alpha fate and I do think I

668
00:36:49,100 --> 00:36:50,000
want to ship it.

669
00:36:50,900 --> 00:36:53,600
So, I don't know if you remember, but as you get higher here,

670
00:36:53,600 --> 00:36:55,800
eventually things are supposed to fade out.

671
00:36:57,300 --> 00:37:00,000
I guess they don't quite fade out very soon because you can see things

672
00:37:00,000 --> 00:37:00,700
below you.

673
00:37:00,700 --> 00:37:02,300
So it's more like things above you.

674
00:37:02,400 --> 00:37:03,200
You know what I can do.

675
00:37:17,300 --> 00:37:22,100
What I could do is say okay, let's actually not do this.

676
00:37:23,700 --> 00:37:26,400
So this way the ramp goes in both directions.

677
00:37:27,600 --> 00:37:28,300
Right.

678
00:37:28,700 --> 00:37:30,900
So things get lower, in addition to getting higher.

679
00:37:31,500 --> 00:37:34,600
So now we should see that Alpha fade happen.

680
00:37:39,500 --> 00:37:40,500
Except we don't.

681
00:37:42,900 --> 00:37:43,600
That's weird.

682
00:37:47,400 --> 00:37:47,700
Hmm.

683
00:37:48,200 --> 00:37:51,400
Well I guess we've got two jobs to do then restore our Alpha fade

684
00:37:51,600 --> 00:37:52,200
first of all.

685
00:37:52,200 --> 00:37:54,300
Because it's, where's the alpha fade?

686
00:37:54,400 --> 00:37:56,100
I must have accidentally nuked it

687
00:37:59,100 --> 00:38:01,500
Cuz there's this Global Alpha value, right?

688
00:38:02,700 --> 00:38:07,800
It's probably that we just haven't updated this code fade, top start

689
00:38:07,800 --> 00:38:08,400
fade.

690
00:38:08,400 --> 00:38:11,900
Bottom start, where do we set those?

691
00:38:17,900 --> 00:38:18,900
Babe top.

692
00:38:25,200 --> 00:38:33,900
So we start at a fifth of the typical floor height, and we end at one

693
00:38:34,000 --> 00:38:36,600
at three-quarters of the typical floor height.

694
00:38:40,400 --> 00:38:42,700
We set the global Alpha based on that.

695
00:38:47,300 --> 00:38:47,700
Well.

696
00:38:50,300 --> 00:38:53,500
I'm also interested to know what if I just set the global a fall to

697
00:38:53,500 --> 00:38:54,400
0.1.

698
00:38:58,200 --> 00:38:59,800
okay, so we know the global

699
00:39:00,000 --> 00:39:00,700
Is working.

700
00:39:01,200 --> 00:39:03,300
So our fade values are just wrong.

701
00:39:04,200 --> 00:39:07,300
We must have updated it and not really paid attention to that when we

702
00:39:07,300 --> 00:39:08,700
were playing around with something else.

703
00:39:09,500 --> 00:39:11,900
So in here, where we do our fade topsy,

704
00:39:15,100 --> 00:39:16,500
what are we looking at?

705
00:39:16,600 --> 00:39:17,300
What value?

706
00:39:17,300 --> 00:39:18,100
We're looking at.

707
00:39:18,200 --> 00:39:21,800
We're looking at the camera relative G position of what an entity.

708
00:39:23,600 --> 00:39:27,200
yeah, so we're saying, hey whatever this entity is ground point is

709
00:39:28,600 --> 00:39:29,200
let's

710
00:39:31,800 --> 00:39:34,200
Let's subtract the cameras location.

711
00:39:37,600 --> 00:39:38,300
And see.

712
00:39:45,200 --> 00:39:47,300
That seems reasonable though.

713
00:39:54,400 --> 00:39:59,000
If the camera relative ground p z is greater than get any ground

714
00:39:59,000 --> 00:39:59,300
point.

715
00:39:59,300 --> 00:40:01,500
I don't really know to be honest, what that even does.

716
00:40:01,500 --> 00:40:04,900
I'm gonna not use that for a second just so I can see what happens if

717
00:40:04,900 --> 00:40:08,000
we use the entities P for a moment.

718
00:40:32,700 --> 00:40:33,300
Come back.

719
00:40:34,600 --> 00:40:35,000
There we go.

720
00:40:38,600 --> 00:40:45,700
So when we compute this and we do a clamp map to range, this is z

721
00:40:45,700 --> 00:40:50,200
value, must not be the Z value that, I think it would be I guess I

722
00:40:50,200 --> 00:40:53,300
don't know specifically what the cameras location is.

723
00:40:56,600 --> 00:40:58,600
So I guess let's step in there and take a look.

724
00:41:04,100 --> 00:41:04,600
There we go.

725
00:41:09,200 --> 00:41:11,300
so, if I take a look at this,

726
00:41:13,300 --> 00:41:16,600
And I say, what is the camera relative round pee?

727
00:41:27,200 --> 00:41:30,800
So the camera relative ground P for this entity.

728
00:41:32,400 --> 00:41:36,100
Is well, is well below.

729
00:41:37,300 --> 00:41:38,900
It's well below where the camera is.

730
00:41:38,900 --> 00:41:39,900
Where is the camera?

731
00:41:41,500 --> 00:41:47,300
cameras 2000, which is what I guess I would expect and What entity is

732
00:41:47,300 --> 00:41:47,700
this

733
00:41:49,800 --> 00:41:50,500
It's a floor.

734
00:41:55,300 --> 00:41:56,000
Which makes sense.

735
00:41:56,000 --> 00:41:57,700
This is probably that first entity.

736
00:41:58,200 --> 00:41:59,800
That's the corner entity anyway, it would it would

737
00:42:00,000 --> 00:42:01,600
I'm up, right?

738
00:42:05,000 --> 00:42:06,300
These are all at zero.

739
00:42:07,300 --> 00:42:08,800
Which is what we would expect.

740
00:42:18,100 --> 00:42:21,600
It is a little odd that I'm not seeing anyone who's like higher.

741
00:42:23,300 --> 00:42:23,600
Right?

742
00:42:23,600 --> 00:42:24,700
Because we should be.

743
00:42:28,800 --> 00:42:29,300
There we go.

744
00:42:31,200 --> 00:42:38,300
so yeah, those people should be fading out right fade top-end Z is 2

745
00:42:38,300 --> 00:42:39,400
point 2 5

746
00:42:45,800 --> 00:42:47,600
And fade top start Z.

747
00:42:53,400 --> 00:42:54,500
Is 1.5.

748
00:43:08,300 --> 00:43:09,700
I think I see what's going on here.

749
00:43:14,600 --> 00:43:20,000
so basically, what's happening, is that the way that we've got it set

750
00:43:20,000 --> 00:43:20,900
up currently

751
00:43:23,800 --> 00:43:26,500
When we move the camera down.

752
00:43:28,800 --> 00:43:30,500
Well, that's still wouldn't explain it.

753
00:43:30,500 --> 00:43:33,300
So I'm going to go ahead because I'm interested to know here.

754
00:43:38,900 --> 00:43:41,400
I want to do standard room.

755
00:43:42,100 --> 00:43:42,400
Well,

756
00:43:45,200 --> 00:43:48,600
I'm trying to think I want to place an entity specifically so that it

757
00:43:48,600 --> 00:43:53,900
would be high enough up that we would see that change and I'm just

758
00:43:53,900 --> 00:43:56,800
trying to think of the best way to do that one is I could place one

759
00:43:57,000 --> 00:43:58,100
specifically that high.

760
00:43:58,300 --> 00:44:01,200
The other thing I should probably do is let me get rid of a bunch of

761
00:44:01,200 --> 00:44:04,500
the entities so when we create, so we don't have as much to think

762
00:44:04,500 --> 00:44:06,100
about when we create the world.

763
00:44:06,100 --> 00:44:07,800
I'll only create one room.

764
00:44:09,900 --> 00:44:15,100
And so we won't have like many, many rooms screen index less than 1.

765
00:44:24,000 --> 00:44:27,000
and so if I was to go set the camera down,

766
00:44:29,800 --> 00:44:31,500
Right between these two.

767
00:44:33,500 --> 00:44:35,400
It's clear that at some point.

768
00:44:40,800 --> 00:44:41,900
I know what a problem is.

769
00:44:44,200 --> 00:44:45,800
So that camera pee.

770
00:44:48,100 --> 00:44:53,800
yeah, duh that camera p is the location that the camera starts at

771
00:44:55,000 --> 00:44:55,700
Right.

772
00:45:06,500 --> 00:45:14,300
So when we apply the offset to the world, we're applying the negative

773
00:45:14,700 --> 00:45:19,200
of the camera to where we're going to place things, right?

774
00:45:20,600 --> 00:45:21,500
If that makes sense.

775
00:45:28,500 --> 00:45:29,000
Although no.

776
00:45:29,000 --> 00:45:30,600
Well, okay, never mind.

777
00:45:32,200 --> 00:45:34,000
That should give us the exact same result.

778
00:45:44,300 --> 00:45:45,000
I don't get it.

779
00:45:45,100 --> 00:45:45,800
I don't

780
00:45:51,400 --> 00:45:53,900
I feel like I must be missing something relatively obvious, but I

781
00:45:53,900 --> 00:45:56,300
don't actually know what that something is, unfortunately.

782
00:46:04,300 --> 00:46:06,900
Because the first I thought that I had it was like, oh well the camera

783
00:46:06,900 --> 00:46:07,100
P.

784
00:46:07,100 --> 00:46:09,200
Probably isn't taking into account the awesome, but it actually,

785
00:46:09,200 --> 00:46:09,800
totally is.

786
00:46:10,100 --> 00:46:13,200
So this value is taking in account that smooth offset that we're

787
00:46:13,200 --> 00:46:13,700
applying.

788
00:46:13,900 --> 00:46:16,300
So, it should be consistent.

789
00:46:16,700 --> 00:46:20,700
It shouldn't be, you know, creating any kind of a weird error there.

790
00:46:21,200 --> 00:46:24,100
I suppose, I could also take a look and

791
00:46:25,600 --> 00:46:26,600
and just look at,

792
00:46:28,100 --> 00:46:29,900
if I was to add a debug value here,

793
00:46:40,700 --> 00:46:43,100
And maybe I'll do this only when it's the hero head.

794
00:46:50,400 --> 00:46:51,500
So that, when we're running.

795
00:46:55,300 --> 00:46:57,600
I can see what that is.

796
00:47:05,700 --> 00:47:10,300
So, here we see the camera relative Grampy for the head, right?

797
00:47:11,200 --> 00:47:14,600
And when we come down like that, you can see that it actually.

798
00:47:17,300 --> 00:47:20,300
It actually chases us down once where a certain distance and that

799
00:47:20,300 --> 00:47:21,200
makes sense, right?

800
00:47:21,300 --> 00:47:25,700
Because when we first hop down, we haven't gone far enough down for it

801
00:47:25,700 --> 00:47:28,200
to start thinking it needs to follow us, right?

802
00:47:28,200 --> 00:47:31,400
It hasn't he reached the apron but once it does reach that apron then

803
00:47:31,400 --> 00:47:34,600
it starts to try and pull us back in, right?

804
00:47:36,900 --> 00:47:39,600
So that looks like a relatively sane value.

805
00:47:39,800 --> 00:47:43,200
And then when I hit the floor, again, on the other side, that all

806
00:47:43,200 --> 00:47:44,200
looks pretty saying,

807
00:47:47,700 --> 00:47:52,700
Okay, so now let's talk about like this right here.

808
00:47:55,700 --> 00:47:58,700
Let's take a look at that guy because we only have one of those.

809
00:47:58,700 --> 00:47:59,700
So we could also be very

810
00:48:00,000 --> 00:48:00,200
That?

811
00:48:00,200 --> 00:48:02,000
Which one that was.

812
00:48:02,000 --> 00:48:05,100
That's the monstar I believe right?

813
00:48:05,500 --> 00:48:07,200
Oops monstar

814
00:48:08,400 --> 00:48:11,900
So now will show whatever the debug is the debug monstar value.

815
00:48:11,900 --> 00:48:15,000
So there's the debug monstar value, right?

816
00:48:22,000 --> 00:48:22,800
So okay.

817
00:48:24,300 --> 00:48:25,100
All right.

818
00:48:25,100 --> 00:48:26,300
Well, that makes it easy.

819
00:48:26,600 --> 00:48:29,600
So I guess really there is no bug.

820
00:48:30,400 --> 00:48:37,500
Our problem is simply that we we don't actually load in the world, one

821
00:48:37,600 --> 00:48:42,500
thing above us, so, it looks like the monstar just disappears.

822
00:48:42,500 --> 00:48:44,400
It gets unloaded, right?

823
00:48:44,400 --> 00:48:45,900
You can see it's not there anymore.

824
00:48:47,000 --> 00:48:47,800
It's just gone.

825
00:48:49,500 --> 00:48:50,500
At that point.

826
00:48:52,100 --> 00:48:54,600
So somehow that entity must be getting evicted.

827
00:48:59,200 --> 00:49:01,000
Because otherwise it would still be printing out.

828
00:49:01,000 --> 00:49:01,700
Something

829
00:49:04,400 --> 00:49:05,600
And instead of spreading out nothing.

830
00:49:08,400 --> 00:49:11,700
So, what happened to our enemies?

831
00:49:13,400 --> 00:49:14,800
And that's what we have to figure out.

832
00:49:14,900 --> 00:49:16,300
All right, so let me take a look.

833
00:49:18,500 --> 00:49:22,400
What's going on in terms of gather in the Z Direction.

834
00:49:28,100 --> 00:49:29,700
How big do we actually want to expand here?

835
00:49:29,700 --> 00:49:31,400
Do we want to do an upper floors?

836
00:49:31,500 --> 00:49:36,200
Hey, look, and I would say, yeah, we probably do for now, so let's go

837
00:49:36,200 --> 00:49:39,600
ahead and do that temporarily and see if that has to do with anything

838
00:49:39,600 --> 00:49:40,200
to do with it.

839
00:49:48,900 --> 00:49:50,800
So hey, now everything's fine again.

840
00:49:53,800 --> 00:49:55,000
Enter Alpha feed is working.

841
00:49:57,400 --> 00:50:00,500
So I guess that was just because we just were purging, we didn't ever

842
00:50:00,500 --> 00:50:04,800
keep those floors in which is kind of I guess I don't know why we

843
00:50:04,800 --> 00:50:07,900
weren't doing that but we just first whatever reason had not been.

844
00:50:08,700 --> 00:50:09,000
All right?

845
00:50:09,000 --> 00:50:11,600
So now I can I want to talk about the part that I actually wanted to

846
00:50:11,600 --> 00:50:12,400
talk about the.

847
00:50:13,500 --> 00:50:16,400
There is a question of should that Alpha fade be happening sooner?

848
00:50:16,400 --> 00:50:18,900
Which I suspect is probably yes, right.

849
00:50:22,900 --> 00:50:26,000
But the part that I wanted to talk about more specifically is what

850
00:50:26,000 --> 00:50:30,200
happens when you have trees that overlap week, you can kind of see

851
00:50:30,200 --> 00:50:30,900
what I'm talking about.

852
00:50:30,900 --> 00:50:34,500
And I mentioned this back when we first were doing this.

853
00:50:34,900 --> 00:50:41,000
So let's go ahead and and create in our standard room, something that

854
00:50:41,000 --> 00:50:44,200
will allow you to see a little more clearly, what's going on?

855
00:50:44,500 --> 00:50:46,600
So when we do add standard room,

856
00:50:51,300 --> 00:50:54,500
Oh, I guess I should say when we do the ad wall stuff.

857
00:50:54,600 --> 00:50:55,700
So this stuff here.

858
00:50:57,400 --> 00:50:59,800
what I'd like to do is say, let's add

859
00:51:00,000 --> 00:51:01,400
Some more walls in here.

860
00:51:03,400 --> 00:51:07,000
I'm going to add some in, I don't know why we're still doing it this

861
00:51:07,000 --> 00:51:12,700
way, but I'm going to add walls and say if tile x equals

862
00:51:14,900 --> 00:51:21,100
I don't know - 2 or I guess - negative 2 would be 3 in this case.

863
00:51:30,800 --> 00:51:31,600
And I guess now.

864
00:51:31,600 --> 00:51:32,100
I think about it, though.

865
00:51:32,100 --> 00:51:33,800
I probably want those on the other side.

866
00:51:37,100 --> 00:51:39,600
Something like that or maybe a little closer.

867
00:51:45,000 --> 00:51:47,500
Just something that we can see as it fades out.

868
00:51:47,800 --> 00:51:48,200
Okay.

869
00:51:49,500 --> 00:51:52,400
So hopefully you can kind of see what's going on here, right?

870
00:51:53,700 --> 00:51:59,300
When I when these fade in and out and this will only get worse as we

871
00:51:59,300 --> 00:52:00,800
have more stuff in the world, right?

872
00:52:00,800 --> 00:52:03,500
Like right now, we just have some placeholder, he kind of things like

873
00:52:03,500 --> 00:52:04,400
some trees or whatever.

874
00:52:05,400 --> 00:52:07,900
But as we get more stuff, this it'll get worse, you can see what

875
00:52:07,900 --> 00:52:08,700
happens.

876
00:52:09,200 --> 00:52:13,700
The alpha value for these things is such

877
00:52:13,900 --> 00:52:14,300
That.

878
00:52:16,100 --> 00:52:17,000
Let me see if I can.

879
00:52:20,500 --> 00:52:22,300
Get an even worse scenario here.

880
00:52:26,300 --> 00:52:26,800
There we go.

881
00:52:27,600 --> 00:52:31,000
The alpha is such that when you draw multiple things on top of each

882
00:52:31,000 --> 00:52:32,000
other, right?

883
00:52:32,200 --> 00:52:36,200
If I was drawing two things on top of each other, I get more coverage

884
00:52:36,200 --> 00:52:40,100
in that area because it's drawing the two trees independently.

885
00:52:40,300 --> 00:52:45,000
And each tree has a certain amount of fade right associated with it.

886
00:52:46,000 --> 00:52:52,000
So as a result, I end up in a scenario where that fade, that amount of

887
00:52:52,000 --> 00:52:56,000
fade right is inconsistent.

888
00:52:56,200 --> 00:52:59,700
And it depends on the amount of overlap, but that's probably not what

889
00:52:59,700 --> 00:53:01,200
we want, right?

890
00:53:01,600 --> 00:53:03,500
It's just kind of looks amateur, right?

891
00:53:03,500 --> 00:53:07,100
It looks like oh I'm just setting all the alpha values down lower but

892
00:53:07,100 --> 00:53:08,400
that's not what we would want.

893
00:53:08,400 --> 00:53:10,200
Our final thing to look like, right.

894
00:53:10,300 --> 00:53:14,000
What we want it to do is we want it to that whole layer to kind of

895
00:53:14,000 --> 00:53:15,100
fade out.

896
00:53:15,100 --> 00:53:20,700
If not all at the same Alpha, then at some artistically decided Alpha,

897
00:53:20,700 --> 00:53:24,200
certainly not just whatever the overdraw happens to be in that area,

898
00:53:24,200 --> 00:53:24,500
right?

899
00:53:24,500 --> 00:53:25,900
That's not a particularly

900
00:53:28,200 --> 00:53:29,600
That's not particularly compelling.

901
00:53:29,800 --> 00:53:33,600
I guess is what I would say as an artistic choice.

902
00:53:34,600 --> 00:53:38,500
So, what I would want to do is, I want to have it so that we Alpha

903
00:53:38,500 --> 00:53:42,500
Fade Out the entire thing as as one group.

904
00:53:42,700 --> 00:53:46,000
And in order to do that, the renderer needs to be able to render those

905
00:53:46,000 --> 00:53:46,800
in passes.

906
00:53:46,800 --> 00:53:51,300
It needs to be able to render all the entities that are in one slice

907
00:53:51,300 --> 00:53:54,100
into into one pass.

908
00:53:54,100 --> 00:53:57,100
And then all the entities that are in another slice into another fast

909
00:53:57,500 --> 00:53:59,800
because there's no way to do it in.

910
00:54:00,000 --> 00:54:02,600
You're going to do something crazy like building fragment list or

911
00:54:02,600 --> 00:54:03,300
something like this.

912
00:54:03,900 --> 00:54:05,000
There's no way to do it.

913
00:54:05,000 --> 00:54:09,500
Other than to basically draw the top layer into one bitmap, draw the

914
00:54:09,500 --> 00:54:12,900
bottom layer into another, and then composite the two with a single

915
00:54:12,900 --> 00:54:13,800
pass that does.

916
00:54:13,800 --> 00:54:17,200
Do the correct Alpha uniformly.

917
00:54:19,300 --> 00:54:23,300
If that makes sense, there's really no other way to do it, especially

918
00:54:23,300 --> 00:54:26,000
not if we want to have multiple layers of this that they're

919
00:54:26,000 --> 00:54:27,000
potentially doing it.

920
00:54:27,000 --> 00:54:30,600
Meaning, you know, a situation where you can have a bottom layer

921
00:54:30,600 --> 00:54:33,800
that's Alpha fading out as it gets further away and a top layer that's

922
00:54:33,800 --> 00:54:34,100
got it.

923
00:54:34,100 --> 00:54:37,100
That's fading in as it's coming down and they're sort of on top of

924
00:54:37,100 --> 00:54:38,200
each other like that.

925
00:54:38,400 --> 00:54:41,900
You know the more things you stack up, the more it would get

926
00:54:42,000 --> 00:54:44,500
intractable to try and figure out tricks that would make this not

927
00:54:44,500 --> 00:54:45,800
happen, okay?

928
00:54:47,200 --> 00:54:51,100
So that's that's that's what we're talking about.

929
00:54:54,100 --> 00:54:58,800
Yeah, so yeah, that's what we need to do.

930
00:54:59,400 --> 00:55:03,700
And that's going to require some some fiddling, right obviously.

931
00:55:04,300 --> 00:55:08,300
So if we take a look at the handmade render group stuff,

932
00:55:10,200 --> 00:55:12,200
we're going to start thinking about how this might go.

933
00:55:13,700 --> 00:55:17,900
Now we probably don't really have to be very specific about this.

934
00:55:18,100 --> 00:55:22,500
What we probably have to do is just expand our notion of sorting to

935
00:55:22,500 --> 00:55:26,800
actually have these two tranches because when we do our list sort and

936
00:55:26,800 --> 00:55:30,100
we already do our stuff where we play with how the sort key gets

937
00:55:30,100 --> 00:55:31,200
generated, right?

938
00:55:31,500 --> 00:55:34,900
We can probably just make it so that our sort stuff with like, sort

939
00:55:34,900 --> 00:55:37,300
bias and that's where stuff we can probably just make it so that this

940
00:55:37,300 --> 00:55:41,400
all comes out in the wash, and all we have to do is insert something.

941
00:55:42,200 --> 00:55:46,800
Into the render list that's like, hey, the alpha value when you get

942
00:55:46,800 --> 00:55:48,900
here, it changes right?

943
00:55:49,400 --> 00:55:52,800
Like the alpha value for all for this plate changes.

944
00:55:53,000 --> 00:56:00,700
We probably don't actually need to make an entirely separate path for

945
00:56:00,700 --> 00:56:02,800
saying, hey draw, all these things to this target draw, all these

946
00:56:02,800 --> 00:56:03,800
things to another Target.

947
00:56:04,000 --> 00:56:04,600
I think

948
00:56:06,600 --> 00:56:09,600
Now why might we not want to do that?

949
00:56:09,600 --> 00:56:12,100
Well, the reason we might not want to that is if we wanted to start

950
00:56:12,100 --> 00:56:18,000
using the multiple Alpha pass for other things, then you could imagine

951
00:56:18,000 --> 00:56:20,900
wanting to have those other things potentially be rendered.

952
00:56:20,900 --> 00:56:25,600
Such that their depths stuff was not related.

953
00:56:25,600 --> 00:56:29,200
Like their depth sort was not related to how they were having that

954
00:56:29,200 --> 00:56:29,500
happen.

955
00:56:29,800 --> 00:56:32,700
And so in that point you would want the ability to say hey this goes

956
00:56:32,700 --> 00:56:36,000
into a certain bin, this goes into a different bin, whatever right?

957
00:56:38,500 --> 00:56:43,400
Who, if you're like, I did not get much sleep last night.

958
00:56:44,700 --> 00:56:45,800
Thanks to mail jet.

959
00:56:46,400 --> 00:56:49,900
Anyway, I am not sure.

960
00:56:49,900 --> 00:56:51,800
So I'm not sure what I want to do about that.

961
00:56:52,300 --> 00:56:59,300
So I I mean I could see an argument either way for having them go.

962
00:57:01,300 --> 00:57:07,600
for having actual targets and, and having something different since we

963
00:57:07,600 --> 00:57:08,300
have

964
00:57:10,700 --> 00:57:13,900
I guess it does occur to me that we do have

965
00:57:15,600 --> 00:57:18,500
as part of the Sorting process clip rectangles.

966
00:57:19,400 --> 00:57:22,200
So we already kind of have this idea that everything that goes into

967
00:57:22,200 --> 00:57:24,800
the entry header has a clipped rectangle index.

968
00:57:25,400 --> 00:57:28,500
What we could do is expand that clipped rectangle index to also

969
00:57:28,500 --> 00:57:30,500
include a Target, right?

970
00:57:30,700 --> 00:57:34,500
So when we have render entry cliprect what we could say is, oh yeah,

971
00:57:34,500 --> 00:57:40,100
in addition to cliprect you also get a something here is like, you

972
00:57:40,100 --> 00:57:40,500
know,

973
00:57:42,600 --> 00:57:46,400
Render Target or something like this and then, you know, we can stack

974
00:57:46,400 --> 00:57:48,900
up and render targets and say, okay, there's red a target for the

975
00:57:48,900 --> 00:57:49,300
floor.

976
00:57:49,300 --> 00:57:51,500
There's a render Target for this floor around her for this 40, and for

977
00:57:51,500 --> 00:57:56,100
this floor, and at the end, we do Blitz each render Target on top of

978
00:57:56,100 --> 00:57:58,500
each other kind of a thing, right?

979
00:57:59,300 --> 00:58:04,100
So we could do that because we already support that sort of indexing

980
00:58:04,100 --> 00:58:08,000
per entry where we say, what's the state of this thing, as it kind of

981
00:58:08,000 --> 00:58:08,800
goes out the door.

982
00:58:13,100 --> 00:58:16,000
So, I don't know, I guess I will say, that's a good place to call it.

983
00:58:16,000 --> 00:58:18,100
It's a lot to think about, but that's what we want to do tomorrow,

984
00:58:18,100 --> 00:58:21,200
because we'd really like to get the Z situation completely sorted.

985
00:58:21,200 --> 00:58:23,900
I think, at least, in my opinion.

986
00:58:24,000 --> 00:58:25,300
So I'm gonna go ahead and go to the Q&A.

987
00:58:25,300 --> 00:58:26,300
And that's what we should.

988
00:58:26,300 --> 00:58:28,400
We're gonna have to come in tomorrow with a good idea of how we want

989
00:58:28,400 --> 00:58:29,600
to start tackling that.

990
00:59:04,700 --> 00:59:07,300
They blow that up down camera movement, looks so cool.

991
00:59:07,300 --> 00:59:10,100
I do hope the train height of the rooms makes good use of this.

992
00:59:11,400 --> 00:59:12,800
Well I don't know.

993
00:59:13,200 --> 00:59:17,000
Yeah I guess we could we could sort of leave it in so that as you go

994
00:59:17,000 --> 00:59:20,100
up it actually sort of moves up a little bit to follow you.

995
00:59:20,100 --> 00:59:22,900
Even if you're not leaving the room I definitely want it to

996
00:59:22,900 --> 00:59:23,500
transition.

997
00:59:23,500 --> 00:59:26,300
Like when you jump it's like a big transition to go to.

998
00:59:26,300 --> 00:59:29,100
The next room is like I jump in a hole and we go down.

999
00:59:31,200 --> 00:59:36,200
But yeah, I don't know, like we could use it for other sorts of things

1000
00:59:36,200 --> 00:59:36,700
as well.

1001
00:59:42,600 --> 00:59:45,100
Insofar, as could you do something with glm injeel?

1002
00:59:45,100 --> 00:59:47,400
Max blend equation for the alpha.

1003
01:00:07,300 --> 01:00:08,800
I mean not that I can think of.

1004
01:00:08,800 --> 01:00:10,200
Do you have a suggestion?

1005
01:00:10,600 --> 01:00:14,000
I mean, the fundamental problem is it's the same as the order

1006
01:00:14,000 --> 01:00:15,600
independent transparency problem.

1007
01:00:16,100 --> 01:00:21,400
The fundamental problem is that you have a surface being seen through

1008
01:00:21,400 --> 01:00:22,400
another surface.

1009
01:00:22,500 --> 01:00:23,300
Right?

1010
01:00:23,300 --> 01:00:28,500
And so the equations for that typically are going to involve going,

1011
01:00:28,500 --> 01:00:29,200
all right?

1012
01:00:29,200 --> 01:00:31,500
I'm looking through this color, so it should tint.

1013
01:00:31,500 --> 01:00:34,000
Whatever the color is below it or something like that, right?

1014
01:00:35,600 --> 01:00:38,500
and if I've got another one in between,

1015
01:00:40,200 --> 01:00:43,500
then I need to know that these two, even though I could draw them in

1016
01:00:43,500 --> 01:00:48,000
any order, I need to know that these two are going to be

1017
01:00:52,400 --> 01:00:56,300
are going to be combined in terms of their amount that they're going

1018
01:00:56,300 --> 01:00:57,000
to fade out.

1019
01:00:57,100 --> 01:00:59,100
So, whatever I would have seen, they need to fade out.

1020
01:00:59,900 --> 01:01:03,400
Now since we sort everything, we do have the advantage of knowing that

1021
01:01:03,400 --> 01:01:06,200
we're always going to draw them either this, this this or this this,

1022
01:01:06,200 --> 01:01:09,000
this depending on whether we choose to always draw front to back or

1023
01:01:09,000 --> 01:01:09,800
back to front.

1024
01:01:11,200 --> 01:01:14,900
So the question is well, alright, if I was always going to draw front

1025
01:01:14,900 --> 01:01:18,900
to back, is there some way that I could put something like in the

1026
01:01:18,900 --> 01:01:21,000
destination Alpha channel that lets me know?

1027
01:01:21,200 --> 01:01:27,500
When this guy is getting drawn that he should not add to the amount

1028
01:01:27,500 --> 01:01:30,100
that this guy got drawn to or something.

1029
01:01:30,500 --> 01:01:33,500
But I just don't know how, you know, what part of the color

1030
01:01:33,500 --> 01:01:36,900
contribution when you draw that final guy like, you know, say I'm

1031
01:01:36,900 --> 01:01:38,200
drawing back to front.

1032
01:01:39,400 --> 01:01:42,400
I draw, you know, the background, which is full-color.

1033
01:01:42,700 --> 01:01:45,900
I draw the next thing, which is the out, the faded out tree.

1034
01:01:46,400 --> 01:01:47,900
I modify that color.

1035
01:01:48,200 --> 01:01:50,100
And yeah, I can store something in the alpha Channel and the

1036
01:01:50,100 --> 01:01:50,500
destination.

1037
01:01:50,500 --> 01:01:51,500
I'll Channel I could.

1038
01:01:51,900 --> 01:01:54,200
And then I'm coming in and doing another Tree on top of it.

1039
01:01:54,300 --> 01:02:01,000
How do I know that the results should be as if I took, because the

1040
01:02:01,000 --> 01:02:04,200
correct result is that trees color right there?

1041
01:02:04,500 --> 01:02:07,900
Alpha blended with the thing underneath without the interceding tree?

1042
01:02:08,000 --> 01:02:09,100
Because remember, it would have

1043
01:02:09,200 --> 01:02:10,800
You included that other tree?

1044
01:02:12,000 --> 01:02:16,600
How do I know what to what value to take out of the RGB channel in

1045
01:02:16,600 --> 01:02:19,600
order to get it back to, what it used to be before the other tree was

1046
01:02:19,600 --> 01:02:21,500
there, right?

1047
01:02:24,000 --> 01:02:26,300
And it seems to me like it's just an impossible problem.

1048
01:02:26,400 --> 01:02:29,600
Like you can't because you have no idea what the out, what the RGB

1049
01:02:29,600 --> 01:02:30,900
value used to be.

1050
01:02:33,900 --> 01:02:34,800
And that's the problem.

1051
01:03:12,500 --> 01:03:15,900
To the person who said can you create the word of Warcraft game?

1052
01:03:18,200 --> 01:03:23,200
Like I would just like to say right now that blizzard totally needs to

1053
01:03:23,200 --> 01:03:27,800
create a game called word of Warcraft and it's basically like it's a

1054
01:03:28,000 --> 01:03:32,900
one of those games like Bookworm or letter Linker or whatever.

1055
01:03:33,400 --> 01:03:40,600
And you would just have to use all words that come from the warcraft

1056
01:03:40,700 --> 01:03:46,100
Universe to like beat enemies in spelling or something, right?

1057
01:03:47,900 --> 01:03:49,100
That would be so funny.

1058
01:04:19,600 --> 01:04:23,400
If the Contour of your entities wasn't anti-aliased, you could have

1059
01:04:23,400 --> 01:04:27,200
used the depth buffer and reverse, the render order of the entities

1060
01:04:27,200 --> 01:04:30,200
being faded front to back.

1061
01:04:32,700 --> 01:04:36,800
But alas is hard to do properly with the alpha blending around the

1062
01:04:36,800 --> 01:04:37,900
Contours.

1063
01:04:44,400 --> 01:04:47,200
well, a couple things, first of all, we don't really want to use the

1064
01:04:47,200 --> 01:04:49,200
depth buffer for that probably

1065
01:04:51,300 --> 01:04:55,000
Although I guess if we're, if the only solution is to do another pass

1066
01:04:55,000 --> 01:04:57,100
and it, you know, because you don't want to add a depth of her in a

1067
01:04:57,100 --> 01:04:59,900
reason because you're doubling your bandwidth, right?

1068
01:05:02,100 --> 01:05:03,400
Your readwrite bandwidth.

1069
01:05:04,100 --> 01:05:05,800
Is it for no reason?

1070
01:05:07,800 --> 01:05:12,100
But yeah, I guess if we have to produce a separate color buffer.

1071
01:05:12,100 --> 01:05:17,300
Anyway, maybe that's the better idea but as far as we're talking

1072
01:05:17,300 --> 01:05:19,600
about, you're saying reverse the render order for the entities being

1073
01:05:19,600 --> 01:05:27,700
faded so that their front to back then I guess I don't see how that

1074
01:05:27,700 --> 01:05:29,500
helps I guess.

1075
01:05:29,700 --> 01:05:30,100
Well, okay.

1076
01:05:30,100 --> 01:05:31,200
I guess I do see that helps.

1077
01:05:31,300 --> 01:05:33,800
So basically you'd use the depth buffer and you just go.

1078
01:05:33,800 --> 01:05:36,600
And then you clear the depth buffer when you

1079
01:05:36,900 --> 01:05:37,700
Or you started drawing.

1080
01:05:37,700 --> 01:05:41,100
The next floor is that basically the idea because that that would work

1081
01:05:50,600 --> 01:05:53,900
everywhere you mentioned rendering to an Austrian buffer then

1082
01:05:53,900 --> 01:05:57,300
compositing is one means of getting this are Dolph effect but you also

1083
01:05:57,300 --> 01:05:59,900
mention something along the lines of using a fragment

1084
01:06:00,500 --> 01:06:03,100
Could you please elaborate a bit more on that approach?

1085
01:06:03,600 --> 01:06:07,100
Yeah, it's it's really actually quite simple.

1086
01:06:08,800 --> 01:06:11,200
It's just something that you wouldn't think of.

1087
01:06:11,200 --> 01:06:15,200
If you didn't realize that modern gpus are basically just CPUs that

1088
01:06:15,200 --> 01:06:17,500
you have really poor ways of programming.

1089
01:06:20,700 --> 01:06:21,500
Okay, so

1090
01:06:36,200 --> 01:06:37,300
For lack of a better term.

1091
01:06:37,300 --> 01:06:41,800
I'll call these per-fragment Atomic lists but I don't even know what

1092
01:06:41,900 --> 01:06:42,800
you would call them.

1093
01:06:42,800 --> 01:06:44,900
That you don't even really need a name for them because they're just

1094
01:06:44,900 --> 01:06:47,000
the standard thing which you'll see in a second.

1095
01:06:48,400 --> 01:06:53,400
So the idea here is let's say that I wanted to solve order independent

1096
01:06:53,400 --> 01:06:56,400
transparency and the kind of problems were talking about are basically

1097
01:06:56,400 --> 01:06:59,900
anything that you want to do regarding the fact that there's multiple

1098
01:06:59,900 --> 01:07:03,900
things that cover a pixel and they can see some of them are like

1099
01:07:03,900 --> 01:07:05,300
translucent transparent, whatever.

1100
01:07:05,800 --> 01:07:10,500
okay, so, traditionally the problem is, you know, I've got a, you

1101
01:07:10,500 --> 01:07:14,700
know, a little pixel here right here in the thing,

1102
01:07:17,000 --> 01:07:21,700
This is my pixel and so typically, what's going to happen is

1103
01:07:21,700 --> 01:07:25,300
everything is like a forward rendering process, right?

1104
01:07:25,500 --> 01:07:28,800
So everything is like all these triangles come by and they all kind of

1105
01:07:28,800 --> 01:07:32,600
overlap this pixel partially, or completely, or whatever else, right?

1106
01:07:33,200 --> 01:07:38,300
And so my job is as a renderer designer, right is, I've got triangle,

1107
01:07:38,300 --> 01:07:41,400
zero and triangle 1 and triangle to and whatever, they're overlapping.

1108
01:07:41,400 --> 01:07:42,000
This pixel.

1109
01:07:42,300 --> 01:07:46,200
I'm supposed to design something so that when I see triangle, 01.

1110
01:07:46,200 --> 01:07:46,300
And

1111
01:07:46,500 --> 01:07:49,200
To come in and cover this pixel, right?

1112
01:07:49,200 --> 01:07:52,500
And each one has whatever its colors and you know lighting and

1113
01:07:52,500 --> 01:07:53,300
everything should be.

1114
01:07:53,900 --> 01:07:59,700
My job is seeing them in order make it so that basically something

1115
01:07:59,700 --> 01:08:01,900
happens with t 0, right?

1116
01:08:01,900 --> 01:08:05,400
That produces the new state of the pixel, okay?

1117
01:08:05,600 --> 01:08:09,700
That state then gets fed into T1, right?

1118
01:08:09,700 --> 01:08:14,000
Whatever happens here and that produces the new state, right?

1119
01:08:14,000 --> 01:08:16,300
Then that state gets fed into T2 and that

1120
01:08:16,399 --> 01:08:18,399
produces the final state, right?

1121
01:08:18,399 --> 01:08:23,000
So, it's always, you know, I have to think about making my renderer

1122
01:08:23,000 --> 01:08:27,100
work by saying every time, a triangle touches this pixel,

1123
01:08:28,200 --> 01:08:28,700
Right.

1124
01:08:28,700 --> 01:08:32,800
Then I have to compute a new state for the pixel, right?

1125
01:08:33,200 --> 01:08:36,200
And the reason that you get into trouble is if at some point what you

1126
01:08:36,200 --> 01:08:43,000
really wanted to do was know that if T2 was going to be here, don't do

1127
01:08:43,000 --> 01:08:45,300
something with t0 or something like that, right?

1128
01:08:45,399 --> 01:08:50,700
Meaning, if I have to start having magical foresight, right, to sort

1129
01:08:50,700 --> 01:08:53,899
of say, oh, I need to know what I might put in here before.

1130
01:08:53,899 --> 01:08:55,300
I know what I should do here.

1131
01:08:55,700 --> 01:08:57,600
And you see that example it's exactly what.

1132
01:08:57,700 --> 01:08:59,000
With our trees, right?

1133
01:08:59,000 --> 01:08:59,899
We have our two trees.

1134
01:09:00,000 --> 01:09:00,500
This.

1135
01:09:00,700 --> 01:09:05,300
And what I wanted to do was say oh in these pixels here, don't ever

1136
01:09:05,300 --> 01:09:08,899
render this tree with its Alpha because when this one comes in, it's

1137
01:09:08,899 --> 01:09:10,700
going to want to render its tree at the right Alpha there.

1138
01:09:10,700 --> 01:09:13,100
We don't want to see this tree behind it, right?

1139
01:09:13,500 --> 01:09:15,500
So it's exactly that thing.

1140
01:09:15,500 --> 01:09:17,899
If I just magically knew that the tree was coming it wouldn't be a

1141
01:09:17,899 --> 01:09:18,100
problem.

1142
01:09:18,399 --> 01:09:22,100
And so for example, D Seven, Samurai was suggesting, for example, a a

1143
01:09:22,100 --> 01:09:24,700
way of using the depth buffer.

1144
01:09:24,700 --> 01:09:28,600
So there's all these tricks that you then end up building where you're

1145
01:09:28,600 --> 01:09:29,800
like oh well I could sort.

1146
01:09:30,000 --> 01:09:32,500
The things first or I'll have a depth of 4 so I can reject certain

1147
01:09:32,500 --> 01:09:32,899
ones.

1148
01:09:33,000 --> 01:09:36,300
So I'll do a depth free pass and then the depth prepass will know that

1149
01:09:36,300 --> 01:09:40,500
t2s depth value is the closest Value so teeth 0 can check it and then

1150
01:09:40,500 --> 01:09:42,600
it knows and we'll put a flag in there and you know, and you just go

1151
01:09:42,600 --> 01:09:48,500
through all of these different things and you're like, ah, okay so

1152
01:09:48,500 --> 01:09:52,600
what for Pac-Man Atomic lists are as like, say forget it just let's

1153
01:09:52,600 --> 01:09:56,700
just assume we're going to burn a bunch of computational resources on

1154
01:09:56,700 --> 01:09:59,900
this problem and stop having

1155
01:10:00,000 --> 01:10:01,000
Do all of this.

1156
01:10:01,200 --> 01:10:02,200
Just forget about it.

1157
01:10:03,200 --> 01:10:06,900
And instead what we're going to do is every time a triangle covers,

1158
01:10:06,900 --> 01:10:11,200
this pixel what we're actually going to say is that the pixel itself

1159
01:10:11,200 --> 01:10:14,800
is not really storing a state, it's storing a list.

1160
01:10:16,000 --> 01:10:18,600
So the frame buffer is now a pointer buffer.

1161
01:10:20,400 --> 01:10:22,400
Effectively, right?

1162
01:10:22,900 --> 01:10:25,800
And you can imagine this if we went and implement it in our software,

1163
01:10:25,800 --> 01:10:27,200
renderer, it's pretty easy, right?

1164
01:10:27,300 --> 01:10:32,800
We just actually, for every pixel we make a little pointer to some

1165
01:10:32,800 --> 01:10:36,400
list of things, some list of triangles that covered it, right?

1166
01:10:37,500 --> 01:10:41,300
And that's exactly what you would do in the situation.

1167
01:10:41,500 --> 01:10:48,100
So, what you do is you write your pixel Shader to have some notion of

1168
01:10:48,100 --> 01:10:52,300
what it is trying to remember, right about these things that come

1169
01:10:52,300 --> 01:10:52,700
through.

1170
01:10:53,100 --> 01:10:56,900
And instead of making this have a color as it state, it just has a

1171
01:10:56,900 --> 01:10:59,300
pointer to the first fragment if it's 0.

1172
01:10:59,300 --> 01:11:01,600
Then there is no fragment there yet, right?

1173
01:11:01,800 --> 01:11:06,200
When it sees one, it just makes this thing point to that, fragment

1174
01:11:06,200 --> 01:11:06,900
whatever it is.

1175
01:11:07,300 --> 01:11:10,600
It sees the next one, it just does the standard push down thing like

1176
01:11:10,600 --> 01:11:11,500
we do, right?

1177
01:11:11,500 --> 01:11:14,900
It pushes it down one and puts it in its place and it creates a little

1178
01:11:14,900 --> 01:11:17,200
singly linked list that just stores.

1179
01:11:17,200 --> 01:11:21,600
All of the fragments that touched this thing, right?

1180
01:11:22,300 --> 01:11:23,800
And there's other ways you could do it, too.

1181
01:11:23,800 --> 01:11:26,900
You can also do more of a fixed array one where you just store, like,

1182
01:11:27,100 --> 01:11:30,100
for fragments per pixel or something, all the same Concepts.

1183
01:11:30,100 --> 01:11:33,700
You can either do it as a list or it erase all the same, trade-offs,

1184
01:11:33,700 --> 01:11:37,100
apply as you would be thinking in C or whatever saying,

1185
01:11:37,200 --> 01:11:38,200
Same stuff, right?

1186
01:11:40,600 --> 01:11:45,700
then at the end you now have this buffer, that's basically like, you

1187
01:11:45,700 --> 01:11:47,200
know, a linked list buffer,

1188
01:11:49,400 --> 01:11:51,500
And you write one final pixel Shader.

1189
01:11:52,500 --> 01:11:53,100
Right?

1190
01:11:53,300 --> 01:11:54,500
And that pixel Shader.

1191
01:11:54,500 --> 01:11:56,900
All it does is it reads this buffer.

1192
01:11:57,800 --> 01:11:59,700
pixel by pixel and outputs the

1193
01:12:00,000 --> 01:12:04,700
Color by looping, looping through the list, looks that all the things

1194
01:12:04,700 --> 01:12:07,200
in the list and making those decisions that it couldn't make before

1195
01:12:07,200 --> 01:12:08,300
because it couldn't see everything.

1196
01:12:08,700 --> 01:12:11,300
Well, now it can see everything at once decide what the final color

1197
01:12:11,300 --> 01:12:12,500
will be and outputs that.

1198
01:12:13,800 --> 01:12:14,200
Right.

1199
01:12:15,600 --> 01:12:18,600
So this goes from the linked list buffer to a color buffer and now you

1200
01:12:18,600 --> 01:12:22,400
actually have your image and like you said, one of things you could do

1201
01:12:22,500 --> 01:12:26,100
you could sort you could actually just run a sort in there, right?

1202
01:12:26,100 --> 01:12:30,100
And then retire, the fragments in order you could look to see whether

1203
01:12:30,100 --> 01:12:31,100
you have a fragment in there.

1204
01:12:31,100 --> 01:12:34,000
That says, I'm, you know, this is, this is on, you know, maybe these

1205
01:12:34,000 --> 01:12:36,500
things are keyed and these say, I'm on one level, I'm on another.

1206
01:12:36,600 --> 01:12:40,000
And you could blend them both separately, and then Alpha composite

1207
01:12:40,000 --> 01:12:41,600
them with a different Alpha value, right?

1208
01:12:41,600 --> 01:12:42,700
So you can do anything.

1209
01:12:42,700 --> 01:12:43,400
You could imagine

1210
01:12:43,600 --> 01:12:46,900
Make listen here, and it's just, it just gets very expensive to do all

1211
01:12:46,900 --> 01:12:48,700
this, but you could do it, right.

1212
01:12:50,200 --> 01:12:51,200
So, why did I call it?

1213
01:12:51,200 --> 01:12:52,600
A perfect monatomic list?

1214
01:12:53,200 --> 01:12:54,900
Well, the / fragment Parts pretty obvious?

1215
01:12:54,900 --> 01:12:57,000
It's because we're storing them for fragment in the frame buffer,

1216
01:12:57,000 --> 01:12:57,500
right?

1217
01:12:58,600 --> 01:13:04,000
But the atomic part, the reason for that is in a GPU architecture,

1218
01:13:04,400 --> 01:13:08,300
it's totally possible that the architects who created the hardware may

1219
01:13:08,300 --> 01:13:12,500
have had it such that multiple people could write to the frame buffer

1220
01:13:12,500 --> 01:13:14,300
at the same time, right?

1221
01:13:15,400 --> 01:13:23,300
So for example, let's say that I have a person who's working on a

1222
01:13:23,300 --> 01:13:26,300
piece of the frame buffer, and another person who's working on another

1223
01:13:26,300 --> 01:13:26,800
piece of paper.

1224
01:13:26,800 --> 01:13:28,000
So these are two different threads.

1225
01:13:28,000 --> 01:13:30,600
Here's three thread, a and thread be, right?

1226
01:13:31,000 --> 01:13:34,800
Or rather let's say they're both working on the same part of the frame

1227
01:13:34,800 --> 01:13:35,300
buffer.

1228
01:13:35,400 --> 01:13:39,200
So these both map to this part of the frame buffer.

1229
01:13:42,000 --> 01:13:42,500
Right.

1230
01:13:44,500 --> 01:13:48,500
The GPU could have done something where it bifurcated, the work to

1231
01:13:48,500 --> 01:13:53,000
Fred's threads A and B because it knows it can merge their work after

1232
01:13:53,000 --> 01:13:54,600
they're done, right?

1233
01:13:54,700 --> 01:13:59,400
Because in the standard way, that things work right in this way where

1234
01:13:59,400 --> 01:14:01,700
we just come in and do things one after the other.

1235
01:14:01,900 --> 01:14:06,600
If I know, for example, that I could enter leaves these in some clever

1236
01:14:06,600 --> 01:14:11,000
way after the fact or resolve their differences in some way or who

1237
01:14:11,000 --> 01:14:14,100
knows what I, you know, I could make that.

1238
01:14:14,500 --> 01:14:18,900
Or maybe I've got some situation where I'm literally loading the

1239
01:14:18,900 --> 01:14:22,200
pixels and like looping them through or whatever and I just, I don't

1240
01:14:22,200 --> 01:14:22,400
know.

1241
01:14:22,500 --> 01:14:24,500
I mean, I don't know but point being

1242
01:14:28,500 --> 01:14:31,600
How should I put this point being there's different ways that this

1243
01:14:31,600 --> 01:14:36,400
could involve threads actually do the same time, more likely.

1244
01:14:36,900 --> 01:14:42,300
And similarly, I have somewhere that I need to store the memory for

1245
01:14:42,300 --> 01:14:44,200
these linked lists, right?

1246
01:14:44,300 --> 01:14:47,700
So let's say that this is not really realistic because hey, the GPU

1247
01:14:47,700 --> 01:14:50,300
can't really do this or maybe it wouldn't or who knows whatever.

1248
01:14:51,100 --> 01:14:55,100
What I also know is, I need to store this linked List information

1249
01:14:55,100 --> 01:14:55,600
somewhere.

1250
01:14:56,000 --> 01:14:57,900
So maybe I have some

1251
01:14:58,400 --> 01:14:59,800
Buffer that I'm writing these.

1252
01:15:00,000 --> 01:15:02,900
Thanks to that kind of, you know, chain in, you know, like we do and

1253
01:15:02,900 --> 01:15:05,600
he made here, like we've got memory and we're all can these links

1254
01:15:06,000 --> 01:15:12,500
well, somehow, when I get the next link, when I get the next place to

1255
01:15:12,500 --> 01:15:17,900
slot in my chain of length values, if both A and B are both trying to

1256
01:15:17,900 --> 01:15:21,000
that the same time, you get all the classic multi-threading problems.

1257
01:15:22,100 --> 01:15:27,900
So certain gpus have the ability to do these Atomic operations that

1258
01:15:27,900 --> 01:15:29,400
allow you to do things like

1259
01:15:30,000 --> 01:15:34,000
Eight new links atomically so that multiple threads that are both

1260
01:15:34,000 --> 01:15:38,900
shading at the same time, don't hit that same the same multi-threading

1261
01:15:38,900 --> 01:15:39,300
problems.

1262
01:15:39,300 --> 01:15:42,400
We hit in handmade Hero on CPUs.

1263
01:15:42,600 --> 01:15:46,500
So you will see things like, you know, interlocked ad

1264
01:15:48,900 --> 01:15:52,700
Right or something is now something the Jeep you can do.

1265
01:15:52,900 --> 01:15:56,400
It can say, I need to do a locked increment and even if there's 12

1266
01:15:56,400 --> 01:16:00,400
shaders that are all trying to, like, grab these links out of the

1267
01:16:00,400 --> 01:16:00,900
pool.

1268
01:16:01,100 --> 01:16:04,000
Well, I'm going to make sure that they are serialized properly, so

1269
01:16:04,000 --> 01:16:05,400
they don't stomp on each other.

1270
01:16:09,300 --> 01:16:10,700
This is very modern.

1271
01:16:11,600 --> 01:16:14,700
This is not something you could have done, probably five six years

1272
01:16:14,700 --> 01:16:17,600
ago, it AMD added atomics.

1273
01:16:17,600 --> 01:16:19,200
I think added them first.

1274
01:16:19,300 --> 01:16:20,200
I can't remember.

1275
01:16:20,600 --> 01:16:24,600
But now basically all gpus that you would buy like if you went out to

1276
01:16:24,600 --> 01:16:30,500
buy GPU today, I don't know about mobile gpus but like in a in a PC it

1277
01:16:30,500 --> 01:16:34,100
would be very unusual to have one that didn't support operations.

1278
01:16:34,100 --> 01:16:35,600
That are actually this complicated.

1279
01:16:35,600 --> 01:16:37,500
That's the sort of things they can do now.

1280
01:16:39,200 --> 01:16:42,000
So as far as I know, like, you know, if you wanted to do an algorithm

1281
01:16:42,000 --> 01:16:45,800
that worked like this for handmade hero, you could and you really

1282
01:16:45,800 --> 01:16:50,600
would be mostly at worrying about older stuff like the Raspberry Pi or

1283
01:16:50,600 --> 01:16:54,100
Android phones or you know, whatever is where you would start to run

1284
01:16:54,100 --> 01:16:54,800
into problems.

1285
01:16:54,900 --> 01:17:01,500
But you know any any AMD Nvidia probably even Intel GPU purchased in

1286
01:17:01,500 --> 01:17:03,100
the last 2 years.

1287
01:17:03,300 --> 01:17:05,100
Would be able to do these

1288
01:17:06,400 --> 01:17:10,700
So so they're they're you know, they're around, they've been around

1289
01:17:10,700 --> 01:17:14,900
for a while they're just, you know, they're unusual because we're used

1290
01:17:14,900 --> 01:17:19,700
to thinking of Graphics in this like non General way but gpus keep

1291
01:17:19,700 --> 01:17:21,000
getting more and more General.

1292
01:17:21,000 --> 01:17:24,900
And so they do you can make a linked list for Pixel if you want.

1293
01:17:25,000 --> 01:17:27,600
And you just have to pay the cost of all that extra computation.

1294
01:17:27,600 --> 01:17:30,600
But if you're willing to pay it it can do it.

1295
01:18:09,900 --> 01:18:14,300
Kb3, sounds insane, or are there any modern games that use this?

1296
01:18:24,100 --> 01:18:28,400
you know, I'll be honest with you I guess I don't know but I assume so

1297
01:18:32,000 --> 01:18:33,800
I mean I guess I just I guess I don't know.

1298
01:18:34,300 --> 01:18:35,200
That's a good question.

1299
01:18:35,500 --> 01:18:37,400
I would assume that they do.

1300
01:18:41,200 --> 01:18:44,400
You know, I would ask, like the battlefield guys were tied, ask dice

1301
01:18:44,400 --> 01:18:45,100
or something?

1302
01:18:45,200 --> 01:18:48,900
And they probably like, oh, yeah, or maybe crytek, you know, they

1303
01:18:48,900 --> 01:18:50,300
seemed like the kind of thing they would do.

1304
01:18:52,800 --> 01:18:53,300
Quickly games.

1305
01:18:53,300 --> 01:18:55,500
Could you just pre-render normally to an Austrian buffer?

1306
01:18:55,500 --> 01:18:58,200
And then composite it with the primary frame buffer with the Fade Out

1307
01:18:58,200 --> 01:19:01,600
Alpha that will, that's what I'm suggesting we do.

1308
01:19:01,600 --> 01:19:04,100
That was my, that was what I was saying.

1309
01:19:04,100 --> 01:19:07,700
At the end of the stream is what we will probably do.

1310
01:19:08,200 --> 01:19:09,600
So yes, you definitely can do that.

1311
01:19:09,600 --> 01:19:14,900
And that's what I think we should do, but obviously, you know, there

1312
01:19:14,900 --> 01:19:15,900
are other options.

1313
01:19:22,700 --> 01:19:24,500
Do you Seven Samurai?

1314
01:19:30,400 --> 01:19:32,500
The anti asking didn't throw a wrench, you could have used the depth

1315
01:19:32,500 --> 01:19:35,200
buffer front to back running all the way and compensate for some of

1316
01:19:35,200 --> 01:19:36,500
the extra bandwidth unless overdraw.

1317
01:19:47,400 --> 01:19:49,000
I mean, so here's the thing.

1318
01:19:52,700 --> 01:19:58,900
we could if we wanted to use the depth buffer week, we could do

1319
01:19:58,900 --> 01:20:02,200
something like Alpha to coverage for

1320
01:20:06,100 --> 01:20:06,900
for the edges.

1321
01:20:08,200 --> 01:20:08,800
Right.

1322
01:20:13,100 --> 01:20:17,500
it just seems like again, I feel like that's probably more bandwidth

1323
01:20:17,500 --> 01:20:20,700
again than we should, then we need

1324
01:20:36,600 --> 01:20:37,200
Kb3.

1325
01:20:37,200 --> 01:20:39,400
I mean, that sounds like it has a huge performance implications

1326
01:20:39,400 --> 01:20:40,600
talking about the fragment list.

1327
01:20:45,800 --> 01:20:47,800
I mean, here's the way to think of it, right?

1328
01:20:51,700 --> 01:20:58,000
It all depends on what you are trying to do to put something good

1329
01:20:58,000 --> 01:20:59,400
looking on the screen.

1330
01:21:00,900 --> 01:21:04,800
Using the CPU and GPU power that you have, right?

1331
01:21:06,100 --> 01:21:13,000
And so let's say for example, that handmade hero was targeting like

1332
01:21:14,500 --> 01:21:15,800
super high end hardware.

1333
01:21:15,800 --> 01:21:20,000
For some reason like like we were like handmade hero is going to

1334
01:21:20,000 --> 01:21:24,700
require like a G-Force, 900 series.

1335
01:21:24,700 --> 01:21:29,200
So, you know, it's going to require a 980 at least, right?

1336
01:21:29,600 --> 01:21:30,200
So just

1337
01:21:30,800 --> 01:21:34,300
Don't even think of running ham this disc 2-D game, right?

1338
01:21:34,900 --> 01:21:39,200
Don't even think of running it on like an old like, you know, peace

1339
01:21:39,200 --> 01:21:40,300
are because forget it.

1340
01:21:41,200 --> 01:21:43,900
Let's say we're going to say that which is sort of what you know, like

1341
01:21:43,900 --> 01:21:46,800
someone like Battlefield says because they're looking to be like super

1342
01:21:46,800 --> 01:21:48,500
great and they'll do maybe they'll do like an old version.

1343
01:21:48,500 --> 01:21:51,100
So that people who don't have those can run on it or whatever.

1344
01:21:51,100 --> 01:21:54,700
But, you know, they're sort of saying, hey, you know, in order to get

1345
01:21:54,700 --> 01:21:56,600
play the game that this game was ment to be played.

1346
01:21:56,600 --> 01:21:59,700
You're supposed to be installing crazy Hardware in your machine.

1347
01:22:01,300 --> 01:22:02,900
So let's say we said that for handmade hero.

1348
01:22:03,600 --> 01:22:08,100
Well then it's like it's not like you're going to look and go.

1349
01:22:08,100 --> 01:22:09,300
Well, yeah, this per frame.

1350
01:22:09,300 --> 01:22:12,200
Atomic stuff is a really huge performance implications.

1351
01:22:12,400 --> 01:22:14,800
It will take us 10 20 times.

1352
01:22:15,100 --> 01:22:19,400
It'll be 10 or 20 times slower to render these Sprites using this

1353
01:22:19,400 --> 01:22:21,500
method then if we didn't use it, right.

1354
01:22:23,000 --> 01:22:28,100
But the question is, what were you going to do with that 10 or 20 x

1355
01:22:28,100 --> 01:22:28,600
overdraw?

1356
01:22:28,600 --> 01:22:31,500
Anyway, look, could you have done anything with it?

1357
01:22:31,500 --> 01:22:34,200
And maybe the answer is, no, look, maybe the answer is there so much

1358
01:22:34,200 --> 01:22:38,200
horsepower there, you couldn't have done anything useful with it, but

1359
01:22:38,200 --> 01:22:40,500
if you go ahead and say, well, we're going to spend it on making

1360
01:22:40,500 --> 01:22:44,100
atomics, and do you know a render resolve pass or whatever.

1361
01:22:44,400 --> 01:22:47,200
All of a sudden, maybe now, we can do all these super cool effects

1362
01:22:47,200 --> 01:22:50,900
like, you know, smoke with multiple depth ranges that comes in.

1363
01:22:50,900 --> 01:22:52,400
And like a the light goes through

1364
01:22:52,400 --> 01:22:55,500
Written like accumulates from different directions because we know

1365
01:22:55,500 --> 01:22:59,400
exactly what is going on at each depth level and we can do like we

1366
01:22:59,400 --> 01:23:02,200
have multiple depth levels of things through so we can do, you know,

1367
01:23:02,200 --> 01:23:04,900
bokeh properly going around edges and I mean who knows.

1368
01:23:04,900 --> 01:23:05,500
Right.

1369
01:23:08,200 --> 01:23:12,700
So all of these things are just tools and the idea is that gpus

1370
01:23:12,700 --> 01:23:16,100
nowadays if you decide to Target a higher end GPU you have a

1371
01:23:16,100 --> 01:23:18,000
ridiculous amount of horsepower.

1372
01:23:18,200 --> 01:23:21,500
And the question is, what are you going to do with that horsepower and

1373
01:23:21,500 --> 01:23:24,600
so things like Atomic list may sound ridiculous because you're like

1374
01:23:24,600 --> 01:23:27,800
well there's there's so much extra work involved here and like yeah it

1375
01:23:27,800 --> 01:23:30,700
may be 10 times more work or something, but

1376
01:23:31,700 --> 01:23:33,600
What were you going to do with that?

1377
01:23:33,600 --> 01:23:36,700
Where you just going to overdraw the screen like a thousand more times

1378
01:23:36,700 --> 01:23:39,000
or something you know or not that but you're going to overdraw the

1379
01:23:39,000 --> 01:23:40,300
screen 10 times more.

1380
01:23:40,700 --> 01:23:43,500
Well if you can figure out something useful to do with it, okay?

1381
01:23:43,800 --> 01:23:50,100
But if you can't write then, you know, this this becomes a very

1382
01:23:50,100 --> 01:23:52,600
attractive thing because now you can do algorithms, you couldn't have

1383
01:23:52,600 --> 01:23:55,900
done before and that's what a lot of these features are about.

1384
01:23:59,400 --> 01:23:59,800
speaking of,

1385
01:24:00,000 --> 01:24:00,600
Mooc example.

1386
01:24:00,600 --> 01:24:02,700
Do you see what David Rosen posted today?

1387
01:24:04,600 --> 01:24:05,400
I did not.

1388
01:24:14,300 --> 01:24:20,900
It just kind of looks like some fairly I guess to not be rude.

1389
01:24:20,900 --> 01:24:25,900
Fairly basic Blobby smoke.

1390
01:24:30,700 --> 01:24:32,600
It just looks like some particle systems.

1391
01:24:34,200 --> 01:24:36,700
If you want to see the smoke that I was like, whoa, that looks

1392
01:24:36,700 --> 01:24:37,300
awesome.

1393
01:24:39,300 --> 01:24:45,000
Did you see in the trailer for Battlefield one, the green mustard, gas

1394
01:24:45,000 --> 01:24:45,300
or whatever?

1395
01:24:45,300 --> 01:24:46,500
It was that stuff?

1396
01:24:46,500 --> 01:24:47,200
Looked amazing.

1397
01:24:47,200 --> 01:24:51,000
I'm there was like an in-game thing looked like, with that in it.

1398
01:24:51,000 --> 01:24:52,300
That looked so cool.

1399
01:24:52,300 --> 01:24:54,000
I'm very interested to see what that is.

1400
01:24:58,600 --> 01:24:59,600
Cosmic sword.

1401
01:24:59,600 --> 01:25:01,600
I thought most games were only designed to max out.

1402
01:25:01,600 --> 01:25:02,700
Console Hardware.

1403
01:25:04,000 --> 01:25:07,500
Well, you have to remember that atomics are in console Hardware.

1404
01:25:09,200 --> 01:25:15,000
Like a PlayStation 4 has a Tom has has fragment atomics.

1405
01:25:17,100 --> 01:25:19,900
I mean, I'll be honest with you, I don't program the PlayStation 4, so

1406
01:25:19,900 --> 01:25:23,400
I guess, I don't know, but it's a bulldozer courtship or whatever.

1407
01:25:23,400 --> 01:25:23,600
Right?

1408
01:25:23,600 --> 01:25:26,700
It was it I mean I'm pretty certain that.

1409
01:25:56,300 --> 01:25:58,300
All right, I'm going to wrap it up.

1410
01:26:04,800 --> 01:26:07,100
All right, thank you for joining me for this episode of handmade hero.

1411
01:26:07,100 --> 01:26:08,200
It's been a pleasure coding with you.

1412
01:26:08,200 --> 01:26:12,200
As always, if you would like to follow along, with series at home, you

1413
01:26:12,200 --> 01:26:14,500
can always pre-order the game on handmade here at our org and it comes

1414
01:26:14,500 --> 01:26:15,100
with the source code.

1415
01:26:15,100 --> 01:26:16,200
So you can follow along.

1416
01:26:16,400 --> 01:26:19,100
We also have a forum site, you can go to.

1417
01:26:19,100 --> 01:26:22,000
If you want to ask questions a patreon page, you can pledge to if you

1418
01:26:22,000 --> 01:26:24,400
want for the video series and a schedule about the tells you when

1419
01:26:24,400 --> 01:26:26,300
we're going to be live, speaking of what we're going to be live, will

1420
01:26:26,300 --> 01:26:27,300
be back here tomorrow.

1421
01:26:27,600 --> 01:26:28,100
5:00 p.m.

1422
01:26:28,100 --> 01:26:29,200
Pacific Daylight time.

1423
01:26:30,000 --> 01:26:33,600
And we also have a past episodes can annotate episode.

1424
01:26:33,800 --> 01:26:36,600
Guys can go to if you want to catch up on old episodes while you wait.

1425
01:26:37,300 --> 01:26:38,200
That's about it.

1426
01:26:38,200 --> 01:26:41,400
I hope to see you guys back here tomorrow till then have fun

1427
01:26:41,400 --> 01:26:41,800
programming.

1428
01:26:41,800 --> 01:26:43,000
I'll see you guys on the internet.

1429
01:26:43,000 --> 01:26:43,800
Take it easy, everyone.

