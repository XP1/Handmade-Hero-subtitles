1
00:00:01,070 --> 00:00:05,490
hello everyone and welcome to hand made

2
00:00:03,990 --> 00:00:09,449
here oh sure we code a complete game

3
00:00:05,490 --> 00:00:12,150
live on stream oh did this so question I

4
00:00:09,449 --> 00:00:15,058
guess we have did they start the thing

5
00:00:12,150 --> 00:00:20,399
where you have to pass authentication to

6
00:00:15,058 --> 00:00:21,629
the to the to twitch now or they fault

7
00:00:20,399 --> 00:00:23,788
because they said they were going to and

8
00:00:21,629 --> 00:00:25,589
I guess they did what I noticed is on

9
00:00:23,789 --> 00:00:28,140
their website they actually pass

10
00:00:25,589 --> 00:00:33,450
undefined like literally the word

11
00:00:28,140 --> 00:00:35,460
undefined for their for the actual like

12
00:00:33,450 --> 00:00:37,770
authentication key so I'm wondering if I

13
00:00:35,460 --> 00:00:39,000
can update this is this is why it which

14
00:00:37,770 --> 00:00:40,440
basically broke this for us they've

15
00:00:39,000 --> 00:00:42,179
broken it so many times because they

16
00:00:40,439 --> 00:00:44,369
keep changing their API for no reason

17
00:00:42,179 --> 00:00:48,479
whatsoever and they did it one more time

18
00:00:44,369 --> 00:00:51,359
so now it requires oo auth tokens to

19
00:00:48,479 --> 00:00:52,979
actually ask basic questions like

20
00:00:51,359 --> 00:00:54,929
whether a stream is live because you

21
00:00:52,979 --> 00:00:56,279
know you wouldn't want someone to know

22
00:00:54,929 --> 00:00:57,859
whether your stream is live it's not

23
00:00:56,280 --> 00:01:00,808
like you can just go to twitch TV slash

24
00:00:57,859 --> 00:01:02,730
handmade hero and search for the end of

25
00:01:00,808 --> 00:01:04,289
the word or the little live token which

26
00:01:02,729 --> 00:01:07,890
is literally what you can do if you

27
00:01:04,290 --> 00:01:12,030
wanted to scrape the website but it

28
00:01:07,890 --> 00:01:14,790
doesn't matter point being I'll probably

29
00:01:12,030 --> 00:01:16,799
have to update this but for now it will

30
00:01:14,790 --> 00:01:18,659
still be accurate it just it'll say live

31
00:01:16,799 --> 00:01:20,939
soon instead of actually changing this

32
00:01:18,659 --> 00:01:23,939
to the live view but you should be able

33
00:01:20,938 --> 00:01:27,959
to click on the twitch button here and

34
00:01:23,938 --> 00:01:31,008
and you know and go there so anyway what

35
00:01:27,959 --> 00:01:33,899
we're gonna do today is take a look at

36
00:01:31,009 --> 00:01:36,509
what we're sort of going to start almost

37
00:01:33,900 --> 00:01:38,880
a little bit early we're gonna start our

38
00:01:36,509 --> 00:01:40,140
lighting quality work and the reason

39
00:01:38,879 --> 00:01:42,959
that we're going to be doing that today

40
00:01:40,140 --> 00:01:47,879
is because we took a pretty close look

41
00:01:42,959 --> 00:01:49,949
at the raycast err and we debugged the

42
00:01:47,879 --> 00:01:52,560
new grid ray caster pretty thoroughly

43
00:01:49,950 --> 00:01:54,990
and i would say i was relatively

44
00:01:52,560 --> 00:01:57,629
confident after looking at the debug

45
00:01:54,989 --> 00:02:01,379
visualizations of it that the actual ray

46
00:01:57,629 --> 00:02:03,179
casting anyway is a-ok like it didn't

47
00:02:01,379 --> 00:02:07,140
look like there were any problems with

48
00:02:03,180 --> 00:02:09,149
the ray casting so the next step is we

49
00:02:07,140 --> 00:02:11,459
now have to work on light transport so

50
00:02:09,149 --> 00:02:12,810
once we have a ray cast from one place

51
00:02:11,459 --> 00:02:13,598
to another we need to make sure that

52
00:02:12,810 --> 00:02:15,519
we're actually

53
00:02:13,598 --> 00:02:18,998
correctly producing values that make

54
00:02:15,519 --> 00:02:22,239
sense in the system and the problem that

55
00:02:18,998 --> 00:02:24,549
we have if we want to go that step is

56
00:02:22,239 --> 00:02:26,980
that we never actually have done a

57
00:02:24,549 --> 00:02:29,709
lighting quality pass in the first place

58
00:02:26,979 --> 00:02:32,530
so we don't actually know one way or the

59
00:02:29,709 --> 00:02:36,639
other what should really be happening

60
00:02:32,530 --> 00:02:38,109
right meaning ray casting is is the kind

61
00:02:36,639 --> 00:02:39,609
of nice part of the process even though

62
00:02:38,109 --> 00:02:41,260
it was obviously very expensive and it's

63
00:02:39,609 --> 00:02:44,620
taken us a long time for how we're going

64
00:02:41,259 --> 00:02:46,568
to handle it properly so it's difficult

65
00:02:44,620 --> 00:02:48,280
to implement something fast but it's not

66
00:02:46,568 --> 00:02:50,199
difficult to see if it works because you

67
00:02:48,280 --> 00:02:53,979
can literally just draw the raycast

68
00:02:50,199 --> 00:02:56,138
and see if it does what you intuitively

69
00:02:53,979 --> 00:02:57,578
know it will do which is shoot in a

70
00:02:56,139 --> 00:02:59,469
direction until it hits the first thing

71
00:02:57,579 --> 00:03:01,329
and stop there and produce the correct

72
00:02:59,468 --> 00:03:03,519
normal for the service that it hits and

73
00:03:01,329 --> 00:03:07,449
we drew that and we did watch watch it

74
00:03:03,519 --> 00:03:08,889
work properly so we more or less know

75
00:03:07,449 --> 00:03:10,989
that that's working and there's a couple

76
00:03:08,889 --> 00:03:12,639
things we can do today to try to verify

77
00:03:10,989 --> 00:03:16,780
that we didn't miss anything and

78
00:03:12,639 --> 00:03:19,870
specifically what I mean by that is we

79
00:03:16,780 --> 00:03:21,969
didn't do any testing to ensure that the

80
00:03:19,870 --> 00:03:23,949
Ray results flow out because there's

81
00:03:21,969 --> 00:03:26,019
four Ray's cast at a time we didn't

82
00:03:23,949 --> 00:03:27,489
actually verify that like all four get

83
00:03:26,019 --> 00:03:30,459
written to the right place or things

84
00:03:27,489 --> 00:03:34,959
like that so there are a few things that

85
00:03:30,459 --> 00:03:36,878
have to do with the exit condition and I

86
00:03:34,959 --> 00:03:40,090
guess what I would say is we can go

87
00:03:36,878 --> 00:03:41,560
verify just that part as a separate

88
00:03:40,090 --> 00:03:44,229
exercise because we don't really know

89
00:03:41,560 --> 00:03:46,419
about that but beyond that the problem

90
00:03:44,229 --> 00:03:47,859
that we're going to have is if we would

91
00:03:46,419 --> 00:03:51,250
like to take the next step and get the

92
00:03:47,859 --> 00:03:54,400
lighting working nice and try to

93
00:03:51,250 --> 00:03:56,560
finalize it we need to start building an

94
00:03:54,400 --> 00:03:58,569
understanding of what we actually

95
00:03:56,560 --> 00:04:01,359
consider to be the correct results

96
00:03:58,568 --> 00:04:04,358
meaning at the moment we don't really

97
00:04:01,359 --> 00:04:07,439
have any definition of what we expect

98
00:04:04,359 --> 00:04:07,439
this thing to produce

99
00:04:13,400 --> 00:04:20,220
so what I would like to do is I would

100
00:04:16,259 --> 00:04:22,230
like to focus primarily on building a

101
00:04:20,220 --> 00:04:24,030
better understanding of what we actually

102
00:04:22,230 --> 00:04:27,120
think the lighting should produce in

103
00:04:24,029 --> 00:04:29,250
terms of values possibly start assigning

104
00:04:27,120 --> 00:04:31,530
some meaning to our values so you know

105
00:04:29,250 --> 00:04:33,300
right now we're just kind of bouncing

106
00:04:31,529 --> 00:04:35,969
around arbitrary quantities we don't

107
00:04:33,300 --> 00:04:38,370
have any kind of rigid definition for

108
00:04:35,970 --> 00:04:39,450
what they are and in order to finalize

109
00:04:38,370 --> 00:04:41,550
the lighting that we're gonna have to

110
00:04:39,449 --> 00:04:43,199
start having an actual understanding of

111
00:04:41,550 --> 00:04:45,990
what those things are and the reason

112
00:04:43,199 --> 00:04:46,918
that I say that is just because if you

113
00:04:45,990 --> 00:04:48,600
think about how we're going to debug

114
00:04:46,918 --> 00:04:52,168
this well there's only really two ways

115
00:04:48,600 --> 00:04:54,360
to debug this one is to just keep

116
00:04:52,168 --> 00:04:57,389
messing with it until we get lighting

117
00:04:54,360 --> 00:04:58,620
that sort of seems to work right right I

118
00:04:57,389 --> 00:05:01,740
mean for lack of a better term that's

119
00:04:58,620 --> 00:05:03,629
one way we could do it we look at the

120
00:05:01,740 --> 00:05:05,519
screen it looks buggy or doesn't look

121
00:05:03,629 --> 00:05:08,100
right we try to figure out what might be

122
00:05:05,519 --> 00:05:09,959
causing that and we go make some changes

123
00:05:08,100 --> 00:05:13,320
and then we try to see if that looks

124
00:05:09,959 --> 00:05:16,109
better you know I'm saying and that's

125
00:05:13,319 --> 00:05:18,478
just kind of a bit fraught with peril it

126
00:05:16,110 --> 00:05:20,009
usually leads into situations where the

127
00:05:18,478 --> 00:05:21,839
lighting will work okay in certain

128
00:05:20,009 --> 00:05:24,800
circumstances and not okay in others and

129
00:05:21,839 --> 00:05:27,209
then you're constantly in this like

130
00:05:24,800 --> 00:05:30,090
chasing your tail kind of pattern you

131
00:05:27,209 --> 00:05:31,889
know so the other way we can do it and

132
00:05:30,089 --> 00:05:34,469
the way that I'd like to try first is to

133
00:05:31,889 --> 00:05:36,000
actually assign some meaning and it

134
00:05:34,470 --> 00:05:38,700
doesn't have to be physical it doesn't

135
00:05:36,000 --> 00:05:40,860
have to be actually real like from the

136
00:05:38,699 --> 00:05:43,918
real physics of light in any way it can

137
00:05:40,860 --> 00:05:50,990
be made up if we want it to be but we

138
00:05:43,918 --> 00:05:54,599
can assign some like at least pseudo and

139
00:05:50,990 --> 00:05:57,449
almost a pseudo-scientific we can create

140
00:05:54,600 --> 00:05:59,370
our own definition of how we expect the

141
00:05:57,449 --> 00:06:01,800
light to behave and then we can validate

142
00:05:59,370 --> 00:06:03,449
against that meaning we can debug with

143
00:06:01,800 --> 00:06:06,090
the expectation that the system should

144
00:06:03,449 --> 00:06:09,029
produce those results and that's much

145
00:06:06,089 --> 00:06:11,099
easier because if we can come to a

146
00:06:09,029 --> 00:06:14,129
concrete definition of what we expect

147
00:06:11,100 --> 00:06:18,300
the lighting to do that's way better for

148
00:06:14,129 --> 00:06:20,788
us because at that point we can debug

149
00:06:18,300 --> 00:06:22,680
individual pieces of it right we can

150
00:06:20,788 --> 00:06:24,569
look at something and say well we we

151
00:06:22,680 --> 00:06:25,319
said that the way that this light should

152
00:06:24,569 --> 00:06:27,899
behave

153
00:06:25,319 --> 00:06:30,360
when it does a diffuse reflection off a

154
00:06:27,899 --> 00:06:32,849
surface or something right is that it

155
00:06:30,360 --> 00:06:34,889
should do X and if we go look at that

156
00:06:32,850 --> 00:06:37,620
part of the routine and it's not doing X

157
00:06:34,889 --> 00:06:40,259
then we know that that's a bug that we

158
00:06:37,620 --> 00:06:42,930
can look at independently of the rest of

159
00:06:40,259 --> 00:06:45,750
the system whereas if we take the first

160
00:06:42,930 --> 00:06:47,129
approach where the only thing that tells

161
00:06:45,750 --> 00:06:50,189
us whether it's working properly is

162
00:06:47,129 --> 00:06:53,100
whether we like the results it's really

163
00:06:50,189 --> 00:06:55,189
difficult to pinpoint what part of the

164
00:06:53,100 --> 00:06:57,540
routine is working poorly because

165
00:06:55,189 --> 00:07:01,680
they're all interconnected at that point

166
00:06:57,540 --> 00:07:05,390
each part you know okay so is the

167
00:07:01,680 --> 00:07:10,259
reflectance function working right and

168
00:07:05,389 --> 00:07:12,089
the diffuse blur is too dim or is the

169
00:07:10,259 --> 00:07:16,560
reflection function too dim and the

170
00:07:12,089 --> 00:07:17,819
diffuse blur is fine right like if all

171
00:07:16,560 --> 00:07:20,089
you're looking at are the final

172
00:07:17,819 --> 00:07:22,709
intensities that come out of the system

173
00:07:20,089 --> 00:07:24,810
there's many places where those

174
00:07:22,709 --> 00:07:27,959
intensities are modified and you don't

175
00:07:24,810 --> 00:07:30,959
have any real way of talking about who

176
00:07:27,959 --> 00:07:32,939
is operating incorrectly and who is

177
00:07:30,959 --> 00:07:35,669
operating correctly and you're just left

178
00:07:32,939 --> 00:07:38,610
with kind of a giant soup of variables

179
00:07:35,670 --> 00:07:39,900
that you have to tune and not really

180
00:07:38,610 --> 00:07:41,250
ever knowing if you have bugs in there

181
00:07:39,899 --> 00:07:49,169
because maybe you do maybe you don't

182
00:07:41,250 --> 00:07:52,079
right so so what I'd like to do is move

183
00:07:49,170 --> 00:07:53,939
forward on that and that's gonna be a

184
00:07:52,079 --> 00:07:58,169
little bit difficult because it's really

185
00:07:53,939 --> 00:08:00,240
not it's really not something that I do

186
00:07:58,170 --> 00:08:02,250
particularly often I don't work with

187
00:08:00,240 --> 00:08:03,689
light as much as I would probably like I

188
00:08:02,250 --> 00:08:06,180
probably should have spent more time at

189
00:08:03,689 --> 00:08:07,680
some point in my career but because I

190
00:08:06,180 --> 00:08:09,389
was working on character animation a lot

191
00:08:07,680 --> 00:08:13,379
of the time and rendering was really

192
00:08:09,389 --> 00:08:17,129
done sort of external to me I never

193
00:08:13,379 --> 00:08:18,959
really got a lot of experience with

194
00:08:17,129 --> 00:08:20,879
lighting functions and it's a bummer

195
00:08:18,959 --> 00:08:23,189
because you know it means that I'm just

196
00:08:20,879 --> 00:08:26,459
not good with them and a lot of the

197
00:08:23,189 --> 00:08:27,089
things that I should know cold I just

198
00:08:26,459 --> 00:08:32,189
don't know

199
00:08:27,089 --> 00:08:35,250
so as you can see we currently have the

200
00:08:32,190 --> 00:08:36,660
ability to this is a ray cast here we

201
00:08:35,250 --> 00:08:38,399
currently have the ability actually to

202
00:08:36,659 --> 00:08:40,469
step through rays as

203
00:08:38,399 --> 00:08:42,168
we wish let me see what is it f2

204
00:08:40,470 --> 00:08:46,550
probably

205
00:08:42,168 --> 00:08:49,309
you know f3 so what are the things that

206
00:08:46,549 --> 00:08:51,289
you can see here is that if I you know

207
00:08:49,309 --> 00:08:54,018
roll this around that can actually

208
00:08:51,289 --> 00:08:55,699
change like where the lighting is is

209
00:08:54,019 --> 00:08:58,730
actually getting positioned and I can

210
00:08:55,700 --> 00:09:01,009
also sort of change which ray is being

211
00:08:58,730 --> 00:09:03,139
shot out of it and so you can see here

212
00:09:01,009 --> 00:09:04,370
we can debug the raycast are pretty

213
00:09:03,139 --> 00:09:06,740
trivially and this is what I was talking

214
00:09:04,370 --> 00:09:10,879
about before so you can see here the Ray

215
00:09:06,740 --> 00:09:13,190
is getting shot towards this towards

216
00:09:10,879 --> 00:09:14,809
this cube here and it's hitting the cube

217
00:09:13,190 --> 00:09:18,740
and you can see the normal is coming

218
00:09:14,809 --> 00:09:21,198
back exactly as we expect and so for

219
00:09:18,740 --> 00:09:23,690
light transport we kind of know at least

220
00:09:21,198 --> 00:09:25,849
to a certain extent we know that it's

221
00:09:23,690 --> 00:09:27,290
working because we can or I'm sorry

222
00:09:25,850 --> 00:09:28,909
enough light transport for ray casting

223
00:09:27,289 --> 00:09:30,649
we kind of know that it's working

224
00:09:28,909 --> 00:09:32,269
because we can see where the Ray is

225
00:09:30,649 --> 00:09:34,399
hitting you know it's there's a little

226
00:09:32,269 --> 00:09:37,429
white box there as well and you can see

227
00:09:34,399 --> 00:09:39,769
the the back you know the the sort of

228
00:09:37,429 --> 00:09:42,078
like normal that's going to splash

229
00:09:39,769 --> 00:09:45,289
impact from the hit and you can see the

230
00:09:42,078 --> 00:09:46,969
Ray target from you know where where it

231
00:09:45,289 --> 00:09:48,919
was and where it went right and you can

232
00:09:46,970 --> 00:09:53,839
even see the grid squares that it you

233
00:09:48,919 --> 00:09:59,088
know marched along the way and so I

234
00:09:53,839 --> 00:10:00,380
guess you know short of the fact that

235
00:09:59,089 --> 00:10:02,570
I'm probably gonna want to go and do one

236
00:10:00,379 --> 00:10:05,059
more optimization pass on this ray

237
00:10:02,570 --> 00:10:07,640
caster you know there it it seems like

238
00:10:05,059 --> 00:10:09,859
we did our job right so it's like it's

239
00:10:07,639 --> 00:10:10,458
producing the correct results in the

240
00:10:09,860 --> 00:10:13,159
raycast

241
00:10:10,458 --> 00:10:15,588
so now what we need to know is like what

242
00:10:13,159 --> 00:10:22,250
should be happening on that transfer and

243
00:10:15,589 --> 00:10:25,010
if we look if we look at the speed for

244
00:10:22,250 --> 00:10:28,068
compute light propagation as well you

245
00:10:25,009 --> 00:10:30,259
know we again are not far from where we

246
00:10:28,068 --> 00:10:31,939
need to be target wise and I think we

247
00:10:30,259 --> 00:10:35,389
have a lot of opportunity to optimize

248
00:10:31,940 --> 00:10:38,510
this particular routine because it has a

249
00:10:35,389 --> 00:10:40,970
lot more control than the old tree walk

250
00:10:38,509 --> 00:10:42,110
did and there's things we can do that we

251
00:10:40,970 --> 00:10:44,149
haven't done yet that we probably should

252
00:10:42,110 --> 00:10:46,909
as well like making these grid squares

253
00:10:44,149 --> 00:10:50,448
larger because if we for example stop

254
00:10:46,909 --> 00:10:53,000
doing the pre computation of the walk

255
00:10:50,448 --> 00:10:55,490
table and rolled the walk table walk

256
00:10:53,000 --> 00:10:57,200
into the actual rate

257
00:10:55,490 --> 00:10:59,209
caste we could also do some interesting

258
00:10:57,200 --> 00:11:03,339
things there where we actually have our

259
00:10:59,208 --> 00:11:06,229
grid squares be much larger than the

260
00:11:03,339 --> 00:11:09,950
than the underlying geometry to bucket

261
00:11:06,230 --> 00:11:11,180
up a few more of things per cell which I

262
00:11:09,950 --> 00:11:13,490
think would accelerate this routine

263
00:11:11,179 --> 00:11:15,979
dramatically so I feel like we've got a

264
00:11:13,490 --> 00:11:17,629
lot of headway on that so I think we're

265
00:11:15,980 --> 00:11:20,269
gonna be able to get down to our 16

266
00:11:17,629 --> 00:11:26,179
millisecond budget there I think that's

267
00:11:20,269 --> 00:11:28,159
entirely within reason so I want to just

268
00:11:26,179 --> 00:11:30,528
put that aside for now and focus on what

269
00:11:28,159 --> 00:11:34,399
happens at this point so we have a cell

270
00:11:30,528 --> 00:11:36,950
we have a hit and the question is how do

271
00:11:34,399 --> 00:11:40,990
we know what kind of energy gets

272
00:11:36,950 --> 00:11:44,540
transferred from here to here right and

273
00:11:40,990 --> 00:11:47,419
I think the biggest challenge for me and

274
00:11:44,539 --> 00:11:52,039
the reason why I like I said I don't

275
00:11:47,419 --> 00:11:59,509
really know exactly how to approach this

276
00:11:52,039 --> 00:12:03,078
it's a bit tough is that how do we

277
00:11:59,509 --> 00:12:05,059
visualize that in a way that makes it

278
00:12:03,078 --> 00:12:15,620
intuitive as to whether it's doing what

279
00:12:05,059 --> 00:12:17,778
we expect right because if you if you

280
00:12:15,620 --> 00:12:20,269
look at how we debugged the raycasting

281
00:12:17,778 --> 00:12:21,740
that went really fast right remember we

282
00:12:20,269 --> 00:12:24,199
had a completely busted

283
00:12:21,740 --> 00:12:26,240
ray tracer and in like you know four

284
00:12:24,200 --> 00:12:27,230
hours or something total debug time I

285
00:12:26,240 --> 00:12:32,659
don't know how much it was it wasn't

286
00:12:27,230 --> 00:12:34,990
much we fixed like you know twelve bugs

287
00:12:32,659 --> 00:12:37,278
in or something it was it was just rapid

288
00:12:34,990 --> 00:12:40,669
you know every 10 minutes we found and

289
00:12:37,278 --> 00:12:45,078
fixed a bug and every single one of them

290
00:12:40,669 --> 00:12:46,429
right was because we could see it we

291
00:12:45,078 --> 00:12:49,519
could see what was supposed to happen

292
00:12:46,429 --> 00:12:51,828
and it was just obvious what was wrong

293
00:12:49,519 --> 00:12:53,059
you were just like oh okay it's you know

294
00:12:51,828 --> 00:12:54,799
it's not walking in the right direction

295
00:12:53,059 --> 00:12:56,539
so let's go look at the walk you know

296
00:12:54,799 --> 00:12:58,569
thing where you know how would this be

297
00:12:56,539 --> 00:13:00,379
happening right mm-hmm

298
00:12:58,570 --> 00:13:02,060
saying it's obvious what was wrong a

299
00:13:00,379 --> 00:13:03,470
little bit it's obvious where the bug is

300
00:13:02,059 --> 00:13:04,698
right you don't necessarily know what

301
00:13:03,470 --> 00:13:06,589
the bug is till we go look at the code

302
00:13:04,698 --> 00:13:08,289
and try to plug it but you know where

303
00:13:06,589 --> 00:13:12,350
the bug is

304
00:13:08,289 --> 00:13:17,299
but I don't know what would be a good

305
00:13:12,350 --> 00:13:18,980
way to visualize the underlying lighting

306
00:13:17,299 --> 00:13:21,949
in a way that makes it so that I can

307
00:13:18,980 --> 00:13:27,590
tell how this light transfer should be

308
00:13:21,950 --> 00:13:32,710
working right that's the problem so you

309
00:13:27,590 --> 00:13:38,000
know when I look at what's going on in

310
00:13:32,710 --> 00:13:41,660
you know in this system it's like how do

311
00:13:38,000 --> 00:13:45,200
I figure out how do I give myself

312
00:13:41,659 --> 00:13:47,569
something to hold on to where I can

313
00:13:45,200 --> 00:13:49,520
start to narrow in on like how this

314
00:13:47,570 --> 00:13:50,480
lighting transfer should work right

315
00:13:49,519 --> 00:13:56,090
mm-hmm

316
00:13:50,480 --> 00:14:01,909
and so my my only real idea at this

317
00:13:56,090 --> 00:14:10,399
point is to think could I do something

318
00:14:01,909 --> 00:14:14,089
where I draw like some kind of some kind

319
00:14:10,399 --> 00:14:17,419
of like trying to think of how to

320
00:14:14,090 --> 00:14:21,200
describe this imagine almost like we

321
00:14:17,419 --> 00:14:25,189
took the octahedral map and the

322
00:14:21,200 --> 00:14:29,390
octahedral map is 64 directions right if

323
00:14:25,190 --> 00:14:35,060
I took at each Center of each grid

324
00:14:29,389 --> 00:14:37,159
square right and I drew a line out

325
00:14:35,059 --> 00:14:42,199
through the center of each of those

326
00:14:37,159 --> 00:14:48,409
octahedral maps mapped pixels and I just

327
00:14:42,200 --> 00:14:51,770
drew it so that it was like getting

328
00:14:48,409 --> 00:14:54,980
longer the brighter it was in that

329
00:14:51,769 --> 00:14:59,899
direction so the values stored in the

330
00:14:54,980 --> 00:15:04,759
octahedral map at that point is what

331
00:14:59,899 --> 00:15:09,139
would is what would tell me how that was

332
00:15:04,759 --> 00:15:13,340
being transferred right so I'm just

333
00:15:09,139 --> 00:15:15,409
thinking if I started there and granted

334
00:15:13,340 --> 00:15:16,970
again like I don't I haven't started on

335
00:15:15,409 --> 00:15:18,889
the the concept of trying to find these

336
00:15:16,970 --> 00:15:20,570
quantities but if I started there then I

337
00:15:18,889 --> 00:15:22,939
at least have something where

338
00:15:20,570 --> 00:15:26,540
my voxel cells would be showing me

339
00:15:22,940 --> 00:15:29,990
something that I could use to intuit how

340
00:15:26,539 --> 00:15:33,259
on each step the light was getting

341
00:15:29,990 --> 00:15:36,710
propagated and the other thing that I

342
00:15:33,259 --> 00:15:40,819
think I could do once I put that in that

343
00:15:36,710 --> 00:15:42,879
my help is I could bind like a key on

344
00:15:40,820 --> 00:15:46,070
the keyboard

345
00:15:42,879 --> 00:15:47,779
two-stepping the lighting so rather like

346
00:15:46,070 --> 00:15:49,580
right now what happens is I run the

347
00:15:47,779 --> 00:15:51,889
lighting and it's just running like it's

348
00:15:49,580 --> 00:15:53,180
constantly feeding back right and right

349
00:15:51,889 --> 00:15:56,379
now we kind of have this problem that it

350
00:15:53,179 --> 00:15:59,659
massively produces massively too bright

351
00:15:56,379 --> 00:16:02,450
information but you know if I go into

352
00:15:59,659 --> 00:16:08,209
the the lighting code there's actually

353
00:16:02,450 --> 00:16:11,570
in that build diffuse maps here

354
00:16:08,210 --> 00:16:16,070
so we can actually artificially like

355
00:16:11,570 --> 00:16:17,450
really dampen the diffuse blur which

356
00:16:16,070 --> 00:16:18,710
again we have we have not actually

357
00:16:17,450 --> 00:16:20,180
worked out what those equations should

358
00:16:18,710 --> 00:16:22,389
be so who knows we don't know what the

359
00:16:20,179 --> 00:16:26,689
right value is here anyway

360
00:16:22,389 --> 00:16:29,629
but you can watch see how slowly over

361
00:16:26,690 --> 00:16:30,740
time the lighting kind of blossoms out

362
00:16:29,629 --> 00:16:32,720
like that like that's what's actually

363
00:16:30,740 --> 00:16:35,899
happening when you run it slowly when

364
00:16:32,720 --> 00:16:38,690
you run the update slowly what I could

365
00:16:35,899 --> 00:16:43,629
do is I could step the lighting kind of

366
00:16:38,690 --> 00:16:47,240
one at a time and I could look to see

367
00:16:43,629 --> 00:16:49,250
what's going on there right so so where

368
00:16:47,240 --> 00:16:51,200
are these lighting transfers happening

369
00:16:49,250 --> 00:16:53,330
and how is that spread occurring right

370
00:16:51,200 --> 00:16:55,850
and again that's just to give me some

371
00:16:53,330 --> 00:16:57,590
intuition of whether you know whether

372
00:16:55,850 --> 00:17:00,230
it's just a question of not having the

373
00:16:57,590 --> 00:17:01,940
math right under the hood so maybe we're

374
00:17:00,230 --> 00:17:04,970
doing the right things but with the

375
00:17:01,940 --> 00:17:06,559
wrong coefficients or whether it runs

376
00:17:04,970 --> 00:17:08,779
deeper than that and actually there are

377
00:17:06,559 --> 00:17:10,970
bugs in the propagation that's causing

378
00:17:08,779 --> 00:17:13,220
it to get over bright actually that have

379
00:17:10,970 --> 00:17:16,130
have nothing to do with the coefficients

380
00:17:13,220 --> 00:17:21,049
or how we're computing the light and so

381
00:17:16,130 --> 00:17:24,170
that's my thinking right and as you can

382
00:17:21,049 --> 00:17:26,089
see there's really no value you can set

383
00:17:24,170 --> 00:17:27,320
that produces a correct result here so

384
00:17:26,089 --> 00:17:29,599
it's not like we just have one

385
00:17:27,319 --> 00:17:31,279
coefficient wrong anyway because at the

386
00:17:29,599 --> 00:17:33,399
outset the light's not propagating at

387
00:17:31,279 --> 00:17:35,529
all right

388
00:17:33,400 --> 00:17:38,410
and then it kind of like hits a critical

389
00:17:35,529 --> 00:17:41,319
threshold and just propagates out to

390
00:17:38,410 --> 00:17:43,029
fulbright so there's definitely a

391
00:17:41,319 --> 00:17:45,279
feedback loop in there but I feel like

392
00:17:43,029 --> 00:17:47,559
to get a handle on what that feedback

393
00:17:45,279 --> 00:17:48,609
loop actually is I just feel like I need

394
00:17:47,559 --> 00:17:54,909
more information

395
00:17:48,609 --> 00:17:56,769
so when we actually run and we we sort

396
00:17:54,910 --> 00:18:00,090
of look at what we're getting here for

397
00:17:56,769 --> 00:18:02,710
results what I'd like to do as well is

398
00:18:00,089 --> 00:18:04,959
because the lighting grid is is fairly

399
00:18:02,710 --> 00:18:07,450
substantial like the the number of cells

400
00:18:04,960 --> 00:18:10,900
in the voxel lighting grid is is you

401
00:18:07,450 --> 00:18:12,789
know it's 16 by 16 by 24 it's not

402
00:18:10,900 --> 00:18:15,790
infinite by any stretch of the

403
00:18:12,789 --> 00:18:18,039
imagination but it's a lot to draw so if

404
00:18:15,789 --> 00:18:20,670
I were to look at all you know each one

405
00:18:18,039 --> 00:18:24,849
of these little cubes in the entire 3d

406
00:18:20,670 --> 00:18:27,460
volume here they would all have one of

407
00:18:24,849 --> 00:18:33,039
those little octahedral map blossoms on

408
00:18:27,460 --> 00:18:36,250
them and that is gonna be too much right

409
00:18:33,039 --> 00:18:38,950
it's just I it's just too much I won't

410
00:18:36,250 --> 00:18:41,710
be able to actually process that amount

411
00:18:38,950 --> 00:18:44,350
of visual information so what I might

412
00:18:41,710 --> 00:18:48,180
also do while I'm doing that particular

413
00:18:44,349 --> 00:18:51,759
pass over the system for debugging

414
00:18:48,180 --> 00:18:54,880
because I might also introduce a box

415
00:18:51,759 --> 00:18:58,019
that's just look we're just gonna look

416
00:18:54,880 --> 00:19:00,490
at the lighting in a small region right

417
00:18:58,019 --> 00:19:03,369
and there's two ways that I could do

418
00:19:00,490 --> 00:19:06,370
that one is I can actually shrink the

419
00:19:03,369 --> 00:19:07,689
size of the lighting voxel but the other

420
00:19:06,369 --> 00:19:10,089
which is probably what I'll do instead

421
00:19:07,690 --> 00:19:12,460
is I'll just introduce a secondary

422
00:19:10,089 --> 00:19:13,089
bounds and it's just like because I've

423
00:19:12,460 --> 00:19:16,180
done this before

424
00:19:13,089 --> 00:19:19,329
on stream you see me do it for the

425
00:19:16,180 --> 00:19:23,049
lighting system instead of actually

426
00:19:19,329 --> 00:19:25,629
producing any kind of debug information

427
00:19:23,049 --> 00:19:28,599
for all the cells I'll just produce it

428
00:19:25,630 --> 00:19:30,130
for just those ones inside the box and

429
00:19:28,599 --> 00:19:31,539
if that turns out not to give me the

430
00:19:30,130 --> 00:19:33,520
inside I need will figure something else

431
00:19:31,539 --> 00:19:39,279
out I guess but that's what I want to

432
00:19:33,519 --> 00:19:41,470
start with so if we take a look at the

433
00:19:39,279 --> 00:19:43,210
push lighting render values what you can

434
00:19:41,470 --> 00:19:44,980
see is we already have the push line

435
00:19:43,210 --> 00:19:47,319
segment for debug lines in here

436
00:19:44,980 --> 00:19:49,839
so what I can do

437
00:19:47,319 --> 00:19:53,049
is I really have two options one is I

438
00:19:49,839 --> 00:19:55,299
can actually draw line segments here and

439
00:19:53,049 --> 00:19:56,889
not take up any debug lines and that

440
00:19:55,299 --> 00:19:58,180
might be a better solution because

441
00:19:56,890 --> 00:20:01,509
there's really no reason that I need to

442
00:19:58,180 --> 00:20:03,039
do it earlier on in the pipeline so you

443
00:20:01,509 --> 00:20:05,379
know maybe instead of using the debug

444
00:20:03,039 --> 00:20:07,299
line call I'll just do this right oh

445
00:20:05,380 --> 00:20:08,980
I'll just I'll just push him here

446
00:20:07,299 --> 00:20:10,629
oh well although you know what it helps

447
00:20:08,980 --> 00:20:12,940
because it tells the renderer how much I

448
00:20:10,630 --> 00:20:14,380
need so maybe I will use the debug lines

449
00:20:12,940 --> 00:20:16,779
because that would that maybe be a

450
00:20:14,380 --> 00:20:20,380
little more convenient okay

451
00:20:16,779 --> 00:20:22,480
so what I'm gonna do is after we're done

452
00:20:20,380 --> 00:20:25,720
computing the lighting so once we're

453
00:20:22,480 --> 00:20:27,360
done once we do update lighting maybe

454
00:20:25,720 --> 00:20:30,250
I'll just make a function call for this

455
00:20:27,359 --> 00:20:33,279
just just period so after the internal

456
00:20:30,250 --> 00:20:36,339
lighting color core runs I'll just call

457
00:20:33,279 --> 00:20:44,710
the thing that's like you know debug

458
00:20:36,339 --> 00:20:46,629
draw octahedral values and in this

459
00:20:44,710 --> 00:20:52,200
particular case I guess I will need the

460
00:20:46,630 --> 00:20:52,200
spec Atlas and defuse defuse atlases I

461
00:20:54,240 --> 00:20:57,730
think I probably want to find a way to

462
00:20:56,650 --> 00:21:06,910
draw both of them

463
00:20:57,730 --> 00:21:09,700
would be my guess yeah so one of the

464
00:21:06,910 --> 00:21:10,840
things that it occurs to me as well just

465
00:21:09,700 --> 00:21:13,120
in terms of the way we're doing things

466
00:21:10,839 --> 00:21:14,559
so the way the diffuse blur works right

467
00:21:13,119 --> 00:21:20,799
now it doesn't really make any sense

468
00:21:14,559 --> 00:21:23,049
right because it's it's probably

469
00:21:20,799 --> 00:21:26,589
providing too much power to the system

470
00:21:23,049 --> 00:21:30,339
because your base is saying look we're

471
00:21:26,589 --> 00:21:33,309
not actually we're not actually reducing

472
00:21:30,339 --> 00:21:35,649
the reflected power of this thing when

473
00:21:33,309 --> 00:21:39,659
you know if you imagine a hundred

474
00:21:35,650 --> 00:21:41,560
photons came in on in this direction and

475
00:21:39,660 --> 00:21:44,259
now we're basically saying that a

476
00:21:41,559 --> 00:21:46,690
hundred photons also go out in all the

477
00:21:44,259 --> 00:21:50,980
directions only modulated by the cosine

478
00:21:46,690 --> 00:21:53,680
right and while that makes sense for a

479
00:21:50,980 --> 00:21:54,430
single bounce integration if you were

480
00:21:53,680 --> 00:21:57,340
doing it that way

481
00:21:54,430 --> 00:22:00,160
it doesn't actually work probably I

482
00:21:57,339 --> 00:22:01,179
would think for stored values right

483
00:22:00,160 --> 00:22:04,029
because the diffuse

484
00:22:01,180 --> 00:22:05,860
juice values that we're then going to

485
00:22:04,029 --> 00:22:07,720
use are going to be sampled on the next

486
00:22:05,859 --> 00:22:10,509
frame and I'm assuming that the the

487
00:22:07,720 --> 00:22:13,110
feedback loop has a lot to do with that

488
00:22:10,509 --> 00:22:13,109
right

489
00:22:22,910 --> 00:22:26,759
again I just want to draw it first

490
00:22:24,869 --> 00:22:28,799
before I draw any conclusions but you

491
00:22:26,759 --> 00:22:30,690
can you can kind of see why that's a

492
00:22:28,799 --> 00:22:32,819
little bit dicey like we haven't thought

493
00:22:30,690 --> 00:22:34,320
that through because we haven't started

494
00:22:32,819 --> 00:22:36,299
to work on lighting quality yet but

495
00:22:34,319 --> 00:22:37,769
there's definitely like an an element of

496
00:22:36,299 --> 00:22:44,669
that that just you know it makes me

497
00:22:37,769 --> 00:22:47,129
nervous right and and this system has a

498
00:22:44,670 --> 00:22:49,490
property that others the other raytracer

499
00:22:47,130 --> 00:22:53,580
didn't have which is that in this system

500
00:22:49,490 --> 00:22:56,130
one thing that we do is if we early out

501
00:22:53,579 --> 00:22:58,619
we pull from whatever cell we early

502
00:22:56,130 --> 00:23:02,220
doubt in and we put we take that light

503
00:22:58,619 --> 00:23:05,279
quantity and so that creates a possible

504
00:23:02,220 --> 00:23:09,210
reliance in this system on the diffuse

505
00:23:05,279 --> 00:23:11,039
map being power correct that wasn't in

506
00:23:09,210 --> 00:23:14,069
the previous system right the previous

507
00:23:11,039 --> 00:23:16,319
system was never going to do that it

508
00:23:14,069 --> 00:23:18,929
only would transfer if it actually hits

509
00:23:16,319 --> 00:23:20,419
something and so there are differences

510
00:23:18,930 --> 00:23:29,100
there that are important to understand

511
00:23:20,420 --> 00:23:34,500
right so if I loop through the the

512
00:23:29,099 --> 00:23:37,109
actual the the voxel so if I loop

513
00:23:34,500 --> 00:23:38,910
through the voxel here and I just say

514
00:23:37,109 --> 00:23:42,029
I'm gonna like I said define a

515
00:23:38,910 --> 00:23:44,880
particular narrower region inside the

516
00:23:42,029 --> 00:23:46,230
voxel and I'm not sure how I really want

517
00:23:44,880 --> 00:23:48,570
to do that but maybe what I'll do is

518
00:23:46,230 --> 00:23:51,539
I'll just take a predefined ratio of

519
00:23:48,569 --> 00:23:53,399
things so if normally it would be a

520
00:23:51,539 --> 00:23:55,619
certain dimension I'll divide that

521
00:23:53,400 --> 00:23:58,380
dimension by four or something right so

522
00:23:55,619 --> 00:24:00,239
I can say like alright the you know the

523
00:23:58,380 --> 00:24:01,800
number of cells that I want to loop over

524
00:24:00,240 --> 00:24:04,460
for this and if we look at the light

525
00:24:01,799 --> 00:24:07,649
Atlas you can see that it actually has a

526
00:24:04,460 --> 00:24:10,650
V 3 s in here right for the dimension so

527
00:24:07,650 --> 00:24:13,190
I can just say the debug dimension is

528
00:24:10,650 --> 00:24:16,200
going to be the speck Atlas voxel dim

529
00:24:13,190 --> 00:24:18,720
and what I can do is just say we're only

530
00:24:16,200 --> 00:24:22,410
going to use a subset of that so you

531
00:24:18,720 --> 00:24:25,710
know maybe we use only a quarter of the

532
00:24:22,410 --> 00:24:27,930
total voxel space right and then what

533
00:24:25,710 --> 00:24:31,569
I'm going to do is I'm going to say that

534
00:24:27,930 --> 00:24:34,480
well the start you know the

535
00:24:31,569 --> 00:24:38,500
the Vox is start area or whatever is

536
00:24:34,480 --> 00:24:40,329
going to be the debug dim and times two

537
00:24:38,500 --> 00:24:43,930
would be the center so maybe we'll just

538
00:24:40,329 --> 00:24:45,939
do like right because if we divide by

539
00:24:43,930 --> 00:24:48,190
four we have a quarter of the space and

540
00:24:45,940 --> 00:24:52,120
so what I'd like to do is move it up by

541
00:24:48,190 --> 00:24:54,430
one and a half of itself right so what I

542
00:24:52,119 --> 00:24:57,159
want to do here is say like look let's

543
00:24:54,430 --> 00:25:01,509
do debug dim times three over four or

544
00:24:57,160 --> 00:25:08,850
something right something like that I'm

545
00:25:01,509 --> 00:25:11,490
sorry no like that so basically we are

546
00:25:08,849 --> 00:25:14,469
moving it up by one and a half of itself

547
00:25:11,490 --> 00:25:16,210
and that will give us a roughly centered

548
00:25:14,470 --> 00:25:20,680
one so we're just going to pick out like

549
00:25:16,210 --> 00:25:23,230
the quarter in each dimension in the

550
00:25:20,680 --> 00:25:24,940
middle of the voxel and then all I'm

551
00:25:23,230 --> 00:25:26,559
gonna do here is I'm not even going to

552
00:25:24,940 --> 00:25:30,009
try to draw this first time I'm just

553
00:25:26,559 --> 00:25:32,349
going to try and isolate the area in

554
00:25:30,009 --> 00:25:37,089
fact I could just use a debug box call

555
00:25:32,349 --> 00:25:40,149
for now push debug box and that will

556
00:25:37,089 --> 00:25:41,769
give me just just a way of figuring out

557
00:25:40,150 --> 00:25:44,769
whether I'm drawing in the right place

558
00:25:41,769 --> 00:25:50,910
so in order to iterate over this I'll

559
00:25:44,769 --> 00:25:50,910
just do the standard you know Z first

560
00:25:51,900 --> 00:26:07,710
and I guess I can do it this way I'll

561
00:26:02,380 --> 00:26:07,710
just do a standard z Y X iteration

562
00:26:11,119 --> 00:26:15,509
again one of those things that see kind

563
00:26:13,048 --> 00:26:17,700
of makes it annoying to write you would

564
00:26:15,509 --> 00:26:19,048
like that to be way more automatic but

565
00:26:17,700 --> 00:26:22,740
it's actually fairly hard to do those in

566
00:26:19,048 --> 00:26:25,369
C and C++ they're not not particularly

567
00:26:22,740 --> 00:26:28,440
great languages but then again what is

568
00:26:25,369 --> 00:26:30,178
so if we go to the actual coordinate we

569
00:26:28,440 --> 00:26:35,308
want to draw it's just going to be the

570
00:26:30,179 --> 00:26:37,649
Vox start plus you know this this XYZ so

571
00:26:35,308 --> 00:26:40,889
at that point we have where we are in

572
00:26:37,648 --> 00:26:47,489
the voxel and like we know because we

573
00:26:40,890 --> 00:26:49,409
actually have the voxel system here we

574
00:26:47,490 --> 00:26:51,659
know we have calls we can use that to

575
00:26:49,409 --> 00:26:55,500
produce these but unfortunately we don't

576
00:26:51,659 --> 00:26:58,649
actually have this set up for the the

577
00:26:55,500 --> 00:27:01,440
spec atlas right if you remember if you

578
00:26:58,648 --> 00:27:03,839
go back to the spec atlas you can see we

579
00:27:01,440 --> 00:27:06,808
we don't actually store any of that

580
00:27:03,839 --> 00:27:09,449
information so what we kind of need to

581
00:27:06,808 --> 00:27:11,460
do is we need to borrow and I guess we

582
00:27:09,450 --> 00:27:13,048
actually already did this so I suppose I

583
00:27:11,460 --> 00:27:18,028
should have just used it a little bit

584
00:27:13,048 --> 00:27:20,009
more directly in fact if I just do voxel

585
00:27:18,028 --> 00:27:21,240
grid here we actually have the lighting

586
00:27:20,009 --> 00:27:30,480
grid I don't know if you remember this

587
00:27:21,240 --> 00:27:32,609
but we actually did already make one so

588
00:27:30,480 --> 00:27:35,730
the Atlas grid is the one that is lined

589
00:27:32,609 --> 00:27:39,240
up with the spec atlas so we can't

590
00:27:35,730 --> 00:27:42,390
actually use the Atlas grid here to do

591
00:27:39,240 --> 00:27:45,149
our dirty work for us so if we go to

592
00:27:42,390 --> 00:27:47,759
handmade voxel I can get the cell bounds

593
00:27:45,148 --> 00:27:51,479
here and I can just say look give me the

594
00:27:47,759 --> 00:27:53,308
cell bounds of this atlas right I can

595
00:27:51,480 --> 00:27:55,649
also do this which is probably more what

596
00:27:53,308 --> 00:27:57,750
I want because I actually only just want

597
00:27:55,648 --> 00:28:00,509
the Centers but what I'm going to do

598
00:27:57,750 --> 00:28:02,369
just to make sure that I'm doing what I

599
00:28:00,509 --> 00:28:04,919
think I'm doing is I'm actually going to

600
00:28:02,369 --> 00:28:11,579
ask for both of these I'm going to ask

601
00:28:04,919 --> 00:28:15,980
for the Atlas grid to give us both the

602
00:28:11,579 --> 00:28:18,409
center and the bounds

603
00:28:15,980 --> 00:28:22,190
and then I'm going to push to debug

604
00:28:18,410 --> 00:28:27,710
boxes on the first one I'm going to push

605
00:28:22,190 --> 00:28:30,740
on is going to be the bounds and I'll do

606
00:28:27,710 --> 00:28:38,120
that in like a dark blue I don't know

607
00:28:30,740 --> 00:28:40,779
why I just will could do a dark red and

608
00:28:38,119 --> 00:28:45,339
then I'm going to push the center P on

609
00:28:40,779 --> 00:28:45,339
and I'm going to do that in a bright red

610
00:28:47,529 --> 00:28:54,609
and what I need to do here is because I

611
00:28:51,740 --> 00:28:58,640
do want to push a debug box specifically

612
00:28:54,609 --> 00:29:03,409
I'm going to just take the center P and

613
00:28:58,640 --> 00:29:05,150
I'm going to do a rect Center dim where

614
00:29:03,410 --> 00:29:06,590
I just say that's where I want the box

615
00:29:05,150 --> 00:29:08,710
to be centered and then I want the

616
00:29:06,589 --> 00:29:09,949
dimension of the box to be you know

617
00:29:08,710 --> 00:29:14,000
something

618
00:29:09,950 --> 00:29:16,759
who knows what let's say it's that and

619
00:29:14,000 --> 00:29:18,759
this will give me just something that I

620
00:29:16,759 --> 00:29:21,440
can use it looks like I don't have

621
00:29:18,759 --> 00:29:29,329
operators for the v3 s for some reason

622
00:29:21,440 --> 00:29:34,009
which I will fix right now so here's the

623
00:29:29,329 --> 00:29:37,399
v3 s and we've oh no that's not what I

624
00:29:34,009 --> 00:29:40,160
wanted here's where we actually define

625
00:29:37,400 --> 00:29:43,220
the operators for the v3 s and those are

626
00:29:40,160 --> 00:29:47,000
the v2 s these are the VIII's your the

627
00:29:43,220 --> 00:29:51,319
v3 s is and I guess we must have I'm

628
00:29:47,000 --> 00:29:52,670
assuming we at least did add for it but

629
00:29:51,319 --> 00:29:56,240
you know honestly I don't actually see

630
00:29:52,670 --> 00:30:00,950
it so we may have just not done any

631
00:29:56,240 --> 00:30:04,190
operators for these at all we have a lot

632
00:30:00,950 --> 00:30:12,080
of math in this game we've built up here

633
00:30:04,190 --> 00:30:14,960
we go so you know we've got we've got x

634
00:30:12,079 --> 00:30:19,789
a constant on one side but not the other

635
00:30:14,960 --> 00:30:21,590
side and then we have divided on the

636
00:30:19,789 --> 00:30:25,099
other side so we should probably just

637
00:30:21,589 --> 00:30:27,878
say look you can do this in any order no

638
00:30:25,099 --> 00:30:34,138
one actually cares which order you use

639
00:30:27,878 --> 00:30:34,138
it's totally fine with us off again so

640
00:30:35,249 --> 00:30:43,588
once we've done that looks like we have

641
00:30:40,919 --> 00:30:47,528
cannot get to Oxford great oh sorry

642
00:30:43,588 --> 00:30:49,568
sorry about that once we have that done

643
00:30:47,528 --> 00:30:52,269
we should be able to take a look and it

644
00:30:49,568 --> 00:30:54,628
looks like I've got an issue here what

645
00:30:52,269 --> 00:30:54,628
is the issue

646
00:30:56,459 --> 00:31:02,558
syntax error did I put one too many I

647
00:30:58,808 --> 00:31:05,288
did so once we've got that we should be

648
00:31:02,558 --> 00:31:08,199
able to now see like just a bunch of

649
00:31:05,288 --> 00:31:12,578
boxes showing the region that this will

650
00:31:08,199 --> 00:31:17,679
cover and so there's the region and you

651
00:31:12,578 --> 00:31:21,578
can see it pretty clearly and so you

652
00:31:17,679 --> 00:31:24,009
know it looks about right

653
00:31:21,578 --> 00:31:25,448
I would say you can see here that it

654
00:31:24,009 --> 00:31:27,578
lines up perfectly with the interior

655
00:31:25,449 --> 00:31:29,318
boxes which is what it should do right

656
00:31:27,578 --> 00:31:32,948
you can see they overlap pretty much

657
00:31:29,318 --> 00:31:35,648
exactly and so this should give me a way

658
00:31:32,949 --> 00:31:36,538
to to now figure out what the heck is

659
00:31:35,648 --> 00:31:39,608
going on there

660
00:31:36,538 --> 00:31:42,038
so if I go ahead and remove one of these

661
00:31:39,608 --> 00:31:44,739
boxes so rather than getting the cell

662
00:31:42,038 --> 00:31:47,138
bounds here I mean maybe I still will

663
00:31:44,739 --> 00:31:48,879
but I'm just not going to draw them what

664
00:31:47,138 --> 00:31:54,278
I want to do now is I want to draw lines

665
00:31:48,878 --> 00:31:57,878
coming out of the of that center point I

666
00:31:54,278 --> 00:32:02,409
want to draw them based on the intensity

667
00:31:57,878 --> 00:32:08,408
that is seen at the in the spec Atlas at

668
00:32:02,409 --> 00:32:10,449
that Texel and I probably need to drop

669
00:32:08,409 --> 00:32:12,278
both the spec Atlas and the diffuse

670
00:32:10,449 --> 00:32:15,308
Atlas or at least be able to look at

671
00:32:12,278 --> 00:32:16,479
either of them and I don't really know

672
00:32:15,308 --> 00:32:25,298
that I'm going to be able to draw them

673
00:32:16,479 --> 00:32:28,318
both very effectively I mean I might be

674
00:32:25,298 --> 00:32:31,058
able to get away with drawing the

675
00:32:28,318 --> 00:32:34,538
diffuse Atlas first and the spec atlas

676
00:32:31,058 --> 00:32:36,578
on top of it because the spec atlas

677
00:32:34,538 --> 00:32:38,499
should always at the way we're doing it

678
00:32:36,578 --> 00:32:40,089
right now the spec atlas will actually

679
00:32:38,499 --> 00:32:42,548
generally be

680
00:32:40,089 --> 00:32:44,499
we'll have less stuff in it right

681
00:32:42,548 --> 00:32:46,950
because the few setlist is or always

682
00:32:44,499 --> 00:32:50,319
going to be sort of like a spread out

683
00:32:46,950 --> 00:33:08,649
version that has more cells filled in

684
00:32:50,319 --> 00:33:12,460
and so yeah so I guess I would say yeah

685
00:33:08,648 --> 00:33:15,728
like let's just try them both I guess so

686
00:33:12,460 --> 00:33:17,528
if I go over to the light atlas what you

687
00:33:15,729 --> 00:33:21,819
can see here is we've got sort of the

688
00:33:17,528 --> 00:33:25,048
the tyldum system right and I also have

689
00:33:21,819 --> 00:33:27,700
the octa they're inside the octahedral

690
00:33:25,048 --> 00:33:30,118
stuff for the math well actually is it

691
00:33:27,700 --> 00:33:30,119
in here

692
00:33:32,999 --> 00:33:39,429
let's let's take a look so yeah in here

693
00:33:37,690 --> 00:33:43,960
what we want to do is go ahead and and

694
00:33:39,429 --> 00:33:46,509
grab the actual yeah I'm a loop over

695
00:33:43,960 --> 00:33:52,119
this and just say look we're gonna go

696
00:33:46,509 --> 00:33:54,069
through all the texels in this thing

697
00:33:52,118 --> 00:33:56,528
that we care about so not the edge

698
00:33:54,069 --> 00:33:58,538
texels because they're only used in

699
00:33:56,528 --> 00:34:00,159
blending so we probably don't want to

700
00:33:58,538 --> 00:34:03,608
draw those because where would we draw

701
00:34:00,159 --> 00:34:08,079
them they don't have an obvious an

702
00:34:03,608 --> 00:34:09,878
obvious place where they would be they

703
00:34:08,079 --> 00:34:11,500
don't have like a place to be drawn

704
00:34:09,878 --> 00:34:14,139
they're just used for wrapping around

705
00:34:11,500 --> 00:34:24,548
and they really just represent copies of

706
00:34:14,139 --> 00:34:29,349
things anyway so so here where we have

707
00:34:24,548 --> 00:34:33,909
unit vector from octahedral I'm guessing

708
00:34:29,349 --> 00:34:37,179
that really what we need is more this

709
00:34:33,909 --> 00:34:39,010
right because we need it to account for

710
00:34:37,179 --> 00:34:41,679
the fact that yeah we're looking at pic

711
00:34:39,010 --> 00:34:43,720
Euler one we could also not I mean I

712
00:34:41,679 --> 00:34:45,490
think we want to use this one so what we

713
00:34:43,719 --> 00:34:48,068
want to do here is say yeah give us the

714
00:34:45,489 --> 00:34:50,318
direction from this T X to Y so there's

715
00:34:48,068 --> 00:34:52,418
our TX and dy and then we want to pass

716
00:34:50,318 --> 00:34:53,509
the correct coefficient so in this case

717
00:34:52,418 --> 00:34:57,799
we're talking about the Speck

718
00:34:53,510 --> 00:34:59,359
list and it's got the the öktem

719
00:34:57,800 --> 00:35:01,640
coefficient right no it's the o XY

720
00:34:59,358 --> 00:35:03,529
coefficient so we want to pass the o XY

721
00:35:01,639 --> 00:35:06,159
coefficient and that will give us back

722
00:35:03,530 --> 00:35:08,510
the direction in the world right so

723
00:35:06,159 --> 00:35:11,960
that's the direction that we actually

724
00:35:08,510 --> 00:35:14,030
want to draw and so now we just need to

725
00:35:11,960 --> 00:35:18,050
get that value from the light atlas

726
00:35:14,030 --> 00:35:21,859
right so we need to have a way in here

727
00:35:18,050 --> 00:35:25,030
that we can access the atlas like we

728
00:35:21,858 --> 00:35:27,858
need a way to actually access the value

729
00:35:25,030 --> 00:35:30,200
that's stored there and you can see here

730
00:35:27,858 --> 00:35:33,170
if we do light atlas offset with an X Y

731
00:35:30,199 --> 00:35:35,809
Z at 2x and 2y we should just be able to

732
00:35:33,170 --> 00:35:39,320
get what the actual displacement would

733
00:35:35,809 --> 00:35:45,679
be off of the main value and there may

734
00:35:39,320 --> 00:35:50,450
be say there may be a way we already do

735
00:35:45,679 --> 00:35:52,608
that I don't think so yeah so we might

736
00:35:50,449 --> 00:35:55,009
want to have a thing that just does a

737
00:35:52,608 --> 00:35:56,779
sample so we may want to have a thing

738
00:35:55,010 --> 00:35:59,720
here that we could use that just samples

739
00:35:56,780 --> 00:36:02,600
from the map and we don't really have

740
00:35:59,719 --> 00:36:05,299
one of those at the moment so something

741
00:36:02,599 --> 00:36:12,409
that's like well I you know what I guess

742
00:36:05,300 --> 00:36:14,359
get tile clamped does right I guess

743
00:36:12,409 --> 00:36:16,759
that's what we would want so if we do

744
00:36:14,358 --> 00:36:25,730
get tile clamped that'll bring us back a

745
00:36:16,760 --> 00:36:32,750
Texel there's our spec atlas we know our

746
00:36:25,730 --> 00:36:34,429
x or y RZ and RT x and t y and so we

747
00:36:32,750 --> 00:36:36,769
don't really need it to be clamped I

748
00:36:34,429 --> 00:36:38,659
guess yeah so we could just do this

749
00:36:36,769 --> 00:36:41,630
we even had that so I guess we did have

750
00:36:38,659 --> 00:36:44,719
all this already and that should give us

751
00:36:41,630 --> 00:36:48,849
back the Texel right and Texel in this

752
00:36:44,719 --> 00:36:48,849
case is of

753
00:36:51,230 --> 00:36:57,650
I guess it just gives us back a pointer

754
00:36:55,880 --> 00:36:59,809
to the yeah so never mind it gives us

755
00:36:57,650 --> 00:37:02,300
back it gives us back of Texel by just

756
00:36:59,809 --> 00:37:04,969
pointing to where in the map this thing

757
00:37:02,300 --> 00:37:09,470
actually is right so at that point we

758
00:37:04,969 --> 00:37:12,799
now know the are the G and the B so what

759
00:37:09,469 --> 00:37:15,919
we can do is we can just draw the

760
00:37:12,800 --> 00:37:17,599
intensity at this point for example so

761
00:37:15,920 --> 00:37:19,519
what we could do is say well let's just

762
00:37:17,599 --> 00:37:22,490
draw the intensity maybe what we'll do

763
00:37:19,519 --> 00:37:26,690
is we'll take the R plus the G you know

764
00:37:22,489 --> 00:37:29,659
plus the B right and we'll just call

765
00:37:26,690 --> 00:37:32,720
that the general intensity right for no

766
00:37:29,659 --> 00:37:34,969
real reason and then we'll draw a vector

767
00:37:32,719 --> 00:37:37,279
that's that long so we'll do push debug

768
00:37:34,969 --> 00:37:39,739
line we know the direction we'll

769
00:37:37,280 --> 00:37:42,829
multiply the intensity by the direction

770
00:37:39,739 --> 00:37:44,719
and we'll have a scale factor in there

771
00:37:42,829 --> 00:37:48,800
right and we don't know what that scale

772
00:37:44,719 --> 00:37:50,000
factor is but you know it's something so

773
00:37:48,800 --> 00:37:52,760
we'll have a scale factor times the

774
00:37:50,000 --> 00:37:54,769
intensity times the direction and we'll

775
00:37:52,760 --> 00:38:00,589
just offset from whatever the center P

776
00:37:54,769 --> 00:38:03,289
is we can also draw this with the actual

777
00:38:00,588 --> 00:38:09,338
color that it is so for example we can

778
00:38:03,289 --> 00:38:09,338
say that it'll just be that was it to e4

779
00:38:10,539 --> 00:38:19,009
was just before so we'll just say draw

780
00:38:14,929 --> 00:38:20,659
it as the color so that we can see what

781
00:38:19,010 --> 00:38:22,310
color is actually there as well now at

782
00:38:20,659 --> 00:38:24,618
the moment we're not really using

783
00:38:22,309 --> 00:38:26,150
colored lighting the light that we put

784
00:38:24,619 --> 00:38:28,338
in the scene is white and most of the

785
00:38:26,150 --> 00:38:30,588
reflectors are you know kind of just dim

786
00:38:28,338 --> 00:38:31,818
gray or something so there's not really

787
00:38:30,588 --> 00:38:34,460
we're not playing with colored

788
00:38:31,818 --> 00:38:37,608
reflectors yet we do want to we just

789
00:38:34,460 --> 00:38:43,309
haven't done that yet and oops I forgot

790
00:38:37,608 --> 00:38:45,380
to actually pull out the value and so

791
00:38:43,309 --> 00:38:47,900
what I want to do there is just you know

792
00:38:45,380 --> 00:38:50,800
again start to see what's going on with

793
00:38:47,900 --> 00:38:50,800
these lighting intensity

794
00:38:51,329 --> 00:39:00,839
that's a dot operator pushed it along

795
00:38:58,199 --> 00:39:02,929
does not take three arguments I believe

796
00:39:00,838 --> 00:39:05,778
you

797
00:39:02,929 --> 00:39:10,619
there we go

798
00:39:05,778 --> 00:39:11,938
and too many parentheses again today

799
00:39:10,619 --> 00:39:19,739
it's kind of a too many parentheses day

800
00:39:11,938 --> 00:39:22,978
I guess okay um so running this now well

801
00:39:19,739 --> 00:39:26,880
you know it looks exactly like what you

802
00:39:22,978 --> 00:39:29,129
expect right which is kind of good I

803
00:39:26,880 --> 00:39:33,568
guess meaning it does clearly let us see

804
00:39:29,130 --> 00:39:36,749
what's going on in the system is not you

805
00:39:33,568 --> 00:39:38,009
know there's nothing strange about

806
00:39:36,748 --> 00:39:47,248
what's going on in the system we are

807
00:39:38,009 --> 00:39:50,159
literally just getting a slow accretion

808
00:39:47,248 --> 00:39:51,418
of omnidirectional light over time right

809
00:39:50,159 --> 00:39:54,449
I mean you look at that and it's just

810
00:39:51,418 --> 00:39:57,688
like everything is getting larger slowly

811
00:39:54,449 --> 00:40:00,148
and then we are over that when we get

812
00:39:57,688 --> 00:40:02,719
over the value when we start Sparkle we

813
00:40:00,148 --> 00:40:08,699
need to probably clamp this down right

814
00:40:02,719 --> 00:40:11,309
so inside push debug line we should

815
00:40:08,699 --> 00:40:13,168
probably be clamping these so when we

816
00:40:11,309 --> 00:40:16,499
put this color in here like we should be

817
00:40:13,168 --> 00:40:17,848
clamping those right or we should do it

818
00:40:16,498 --> 00:40:20,398
later it doesn't really matter when

819
00:40:17,849 --> 00:40:22,169
exactly we do it right but like maybe

820
00:40:20,398 --> 00:40:24,478
back down here where we're actually

821
00:40:22,168 --> 00:40:27,199
going to do the push line segment and we

822
00:40:24,478 --> 00:40:27,198
do you know

823
00:40:30,739 --> 00:40:38,269
in here what we do is we do an RGBA pack

824
00:40:34,519 --> 00:40:40,099
four by eight so before we hit that pack

825
00:40:38,269 --> 00:40:46,610
we really will have wanted to do a

826
00:40:40,099 --> 00:40:50,389
min/max on this right so in here what we

827
00:40:46,610 --> 00:40:56,180
want to do is we want to do a like V for

828
00:40:50,389 --> 00:41:04,190
color equals minimum I don't know if we

829
00:40:56,179 --> 00:41:05,539
have yeah we do so we have one well we

830
00:41:04,190 --> 00:41:07,880
have one for v3 s I don't know if we

831
00:41:05,539 --> 00:41:12,610
have one for V fours but what we want to

832
00:41:07,880 --> 00:41:17,019
do here is like make them in that will

833
00:41:12,610 --> 00:41:17,019
basically prevent these things right

834
00:41:17,619 --> 00:41:30,949
from overflowing so I'm not sure what we

835
00:41:27,079 --> 00:41:32,840
called this last parameter or if we

836
00:41:30,949 --> 00:41:42,079
called that anything it's a good

837
00:41:32,840 --> 00:41:45,680
question now we didn't did we

838
00:41:42,079 --> 00:41:47,900
oh we did call it W all right I was

839
00:41:45,679 --> 00:41:55,329
wondering if we did I know we had an

840
00:41:47,900 --> 00:41:55,329
issue where uvw versus X Y Z W you know

841
00:41:55,539 --> 00:42:04,090
remember that from way back when all

842
00:41:57,739 --> 00:42:06,619
right so if we have a min Max for this

843
00:42:04,090 --> 00:42:10,850
we can now just drop that in here for

844
00:42:06,619 --> 00:42:12,739
our you know for our V fours and we

845
00:42:10,849 --> 00:42:14,779
should now be able to clamp those

846
00:42:12,739 --> 00:42:19,009
lighting values and we don't really need

847
00:42:14,780 --> 00:42:22,180
to do this but you know I just felt like

848
00:42:19,010 --> 00:42:25,160
we should so I want to take the minimum

849
00:42:22,179 --> 00:42:28,089
and the maximum value here to clamp

850
00:42:25,159 --> 00:42:33,670
these out so that we're never getting

851
00:42:28,090 --> 00:42:38,710
below oh wow all right

852
00:42:33,670 --> 00:42:42,430
looks like we already had clamp zero one

853
00:42:38,710 --> 00:42:45,440
waste of everyone's time there we go

854
00:42:42,429 --> 00:42:47,419
so I'm gonna clamp 0 1 the color value

855
00:42:45,440 --> 00:42:50,210
there that way you'll see as these

856
00:42:47,420 --> 00:42:53,420
things get larger during the light

857
00:42:50,210 --> 00:42:54,650
propagation phase now hopefully we can

858
00:42:53,420 --> 00:42:57,800
get these so that they just stay white

859
00:42:54,650 --> 00:43:00,380
right famous last words

860
00:42:57,800 --> 00:43:09,550
which they don't now why would that be

861
00:43:00,380 --> 00:43:09,550
not sure why they would Sparkle hmm

862
00:43:09,760 --> 00:43:21,470
that's awfully confusing oh yeah

863
00:43:18,340 --> 00:43:24,950
might want to actually use the color

864
00:43:21,469 --> 00:43:26,299
that we computed turns out that if you

865
00:43:24,949 --> 00:43:28,629
want to succeed in the game industry you

866
00:43:26,300 --> 00:43:36,350
have to use the color value you computed

867
00:43:28,630 --> 00:43:37,849
so let's take a look now well it's a

868
00:43:36,349 --> 00:43:40,039
little better but it still actually

869
00:43:37,849 --> 00:43:41,630
seems to have weird fluctuation there in

870
00:43:40,039 --> 00:43:43,219
color values I'm not sure why we would

871
00:43:41,630 --> 00:43:47,930
be getting that so I'd like to take a

872
00:43:43,219 --> 00:43:50,689
look at that hmm that doesn't make a lot

873
00:43:47,929 --> 00:43:55,669
of sense to me oh I see because we had

874
00:43:50,690 --> 00:43:58,599
two of them I guess I guess you can

875
00:43:55,670 --> 00:43:58,599
define the end points

876
00:44:08,550 --> 00:44:18,010
all right so that all looks good and you

877
00:44:15,699 --> 00:44:24,629
can just see so these things things just

878
00:44:18,010 --> 00:44:24,630
grow without bound right so you know I

879
00:44:24,840 --> 00:44:33,220
think the next thing I would like to do

880
00:44:27,489 --> 00:44:37,419
is I would like to be able to I'd like

881
00:44:33,219 --> 00:44:41,079
to be able to step this in a more

882
00:44:37,420 --> 00:44:43,990
controlled fashion so I want the

883
00:44:41,079 --> 00:44:48,750
lighting system perhaps to only update

884
00:44:43,989 --> 00:44:48,750
itself when I like tell it to you know

885
00:44:57,750 --> 00:45:08,650
so I'm not sure exactly what I should do

886
00:45:00,670 --> 00:45:13,740
here to do that exactly but I guess all

887
00:45:08,650 --> 00:45:29,349
I really need to do is if you never call

888
00:45:13,739 --> 00:45:32,619
update lighting so in here if we never

889
00:45:29,349 --> 00:45:40,029
call update lighting then we won't have

890
00:45:32,619 --> 00:45:41,679
a problem I don't think so we do have a

891
00:45:40,030 --> 00:45:44,410
slight issue which is we'd like to be

892
00:45:41,679 --> 00:45:46,239
able to push the lighting render values

893
00:45:44,409 --> 00:45:48,309
but I'm not sure we can do that if we've

894
00:45:46,239 --> 00:45:50,439
never updated the lighting so we may

895
00:45:48,309 --> 00:45:53,559
have to add some guards to prevent it

896
00:45:50,440 --> 00:45:58,269
from crashing in the because it will

897
00:45:53,559 --> 00:46:03,539
never have like allocated anything but

898
00:45:58,269 --> 00:46:03,539
we'll see so

899
00:46:03,860 --> 00:46:10,829
if we have an if zero here we should get

900
00:46:08,460 --> 00:46:13,820
no lighting now but we may also miss

901
00:46:10,829 --> 00:46:16,469
some values yeah

902
00:46:13,820 --> 00:46:17,820
so in this case like we haven't actually

903
00:46:16,469 --> 00:46:21,419
initialized the lighting it's never been

904
00:46:17,820 --> 00:46:24,990
called if we make this contingent on

905
00:46:21,420 --> 00:46:36,090
like pressing a key for example that

906
00:46:24,989 --> 00:46:42,000
would probably be sufficient so not sure

907
00:46:36,090 --> 00:47:02,120
how I want to do that we have the game

908
00:46:42,000 --> 00:47:02,119
input we could do Mouse but I don't know

909
00:47:04,340 --> 00:47:19,470
so where is mouse button so if I do

910
00:47:12,599 --> 00:47:20,779
input mouse button here and we you know

911
00:47:19,469 --> 00:47:25,649
take the

912
00:47:20,780 --> 00:47:29,450
left mouse button what's the button what

913
00:47:25,650 --> 00:47:29,450
do I use for moving the camera right now

914
00:47:29,599 --> 00:47:37,980
so I guess I use all of them for moving

915
00:47:31,710 --> 00:47:39,019
the camera I guess I could also use an F

916
00:47:37,980 --> 00:47:41,789
key press

917
00:47:39,019 --> 00:47:43,739
maybe I just use F key pressed so if I

918
00:47:41,789 --> 00:47:50,429
use F key pressed and we just I don't

919
00:47:43,739 --> 00:47:52,709
know find f9 to it let's say then I

920
00:47:50,429 --> 00:47:58,969
could just say look that that'll update

921
00:47:52,710 --> 00:47:58,970
the lighting one time I think right

922
00:48:06,739 --> 00:48:21,328
so here's me like single stepping the

923
00:48:09,900 --> 00:48:23,780
lighting right and that works real nice

924
00:48:21,329 --> 00:48:26,099
okay so now we're in good shape right

925
00:48:23,780 --> 00:48:28,250
because we can actually go in now and

926
00:48:26,099 --> 00:48:30,450
inspect these actual lighting values and

927
00:48:28,250 --> 00:48:36,929
you can kind of see what they're doing

928
00:48:30,449 --> 00:48:39,419
right and what's I think especially

929
00:48:36,929 --> 00:48:42,690
interesting about these is it looks like

930
00:48:39,420 --> 00:48:48,389
the lighting from the sky is sufficient

931
00:48:42,690 --> 00:48:50,730
to over bright these already like you

932
00:48:48,389 --> 00:48:56,460
can see how much light is coming from

933
00:48:50,730 --> 00:48:59,608
you know up above right you see those

934
00:48:56,460 --> 00:49:00,690
kind of growing and so it's not like

935
00:48:59,608 --> 00:49:04,139
they're picking up the light

936
00:49:00,690 --> 00:49:06,750
particularly rapidly from these you know

937
00:49:04,139 --> 00:49:08,519
but then as these start to get that so

938
00:49:06,750 --> 00:49:11,369
it looks like it's largely a moonlight

939
00:49:08,519 --> 00:49:12,989
issue at the immediate moment so let's

940
00:49:11,369 --> 00:49:14,910
turn the moonlight off and just see

941
00:49:12,989 --> 00:49:18,750
where we're at without the moonlight

942
00:49:14,909 --> 00:49:20,309
just let's just start there to try and

943
00:49:18,750 --> 00:49:22,920
like simplify this problem a little bit

944
00:49:20,309 --> 00:49:26,130
as we start to move into trying to

945
00:49:22,920 --> 00:49:28,050
define these lighting values so where

946
00:49:26,130 --> 00:49:30,150
does the moonlight actually come into

947
00:49:28,050 --> 00:49:34,109
the picture with the grid ray caster so

948
00:49:30,150 --> 00:49:37,940
here's the grid or a cast or and here's

949
00:49:34,108 --> 00:49:43,670
the moon so let's just get rid of this

950
00:49:37,940 --> 00:49:49,440
I'm assuming this is used somewhere here

951
00:49:43,670 --> 00:49:50,849
it is not so in grid ray cast if I get

952
00:49:49,440 --> 00:49:53,659
rid of this does that mean we're not do

953
00:49:50,849 --> 00:49:53,660
that mean we're not using this

954
00:49:54,730 --> 00:50:02,000
yeah so we're actually getting our moon

955
00:49:59,320 --> 00:50:04,550
color from somewhere else at the moment

956
00:50:02,000 --> 00:50:06,260
it looks like it's probably that's an a

957
00:50:04,550 --> 00:50:09,320
a B caster which we're not using at the

958
00:50:06,260 --> 00:50:11,150
moment so we're probably getting the

959
00:50:09,320 --> 00:50:15,070
moon from some kind of initialization

960
00:50:11,150 --> 00:50:24,639
that was happening in here I'm guessing

961
00:50:15,070 --> 00:50:30,050
see Wow

962
00:50:24,639 --> 00:50:35,529
okay so actually I'm wrong so this this

963
00:50:30,050 --> 00:50:38,480
must be a bug then right so if you look

964
00:50:35,530 --> 00:50:42,200
here's the a beer a cast which we're not

965
00:50:38,480 --> 00:50:49,159
using so at the moment this has no

966
00:50:42,199 --> 00:50:54,429
moonlight in it at all and yet it is

967
00:50:49,159 --> 00:50:54,429
saying as I allow this to grow

968
00:51:00,199 --> 00:51:11,149
it is saying that I'm getting a stronger

969
00:51:03,570 --> 00:51:11,150
light bounce from above than below right

970
00:51:11,389 --> 00:51:17,839
look at that so

971
00:51:23,108 --> 00:51:28,190
so I don't really know what's going on

972
00:51:25,639 --> 00:51:31,670
here but we've really screwed something

973
00:51:28,190 --> 00:51:34,130
up so I guess the good news here is we

974
00:51:31,670 --> 00:51:36,260
know we've got a bug because there's no

975
00:51:34,130 --> 00:51:38,358
light up there there's only like light

976
00:51:36,260 --> 00:51:40,609
in a couple places like here and here

977
00:51:38,358 --> 00:51:43,250
and stuff and so if you were going to

978
00:51:40,608 --> 00:51:46,210
find a light you'd find it over here and

979
00:51:43,250 --> 00:51:49,190
in fact some of the people seem to have

980
00:51:46,210 --> 00:52:02,599
what appear to be semi sensical results

981
00:51:49,190 --> 00:52:05,088
I guess I mean but not really but you

982
00:52:02,599 --> 00:52:07,400
can kind of see like there's this strong

983
00:52:05,088 --> 00:52:11,929
preference for like light that people

984
00:52:07,400 --> 00:52:13,250
are finding like over here you know so I

985
00:52:11,929 --> 00:52:15,368
think one thing we probably do want to

986
00:52:13,250 --> 00:52:17,570
do is we probably draw these lights

987
00:52:15,369 --> 00:52:20,420
we're not currently drawing the lights

988
00:52:17,570 --> 00:52:22,130
right now we probably should so we can

989
00:52:20,420 --> 00:52:23,510
actually see where they are because we

990
00:52:22,130 --> 00:52:27,318
also don't that's one thing we don't

991
00:52:23,510 --> 00:52:30,829
know so we should put that in here so

992
00:52:27,318 --> 00:52:34,068
here's the push light call right and we

993
00:52:30,829 --> 00:52:42,019
probably want to do a push cube call off

994
00:52:34,068 --> 00:52:43,818
of that so if I just come down here and

995
00:52:42,019 --> 00:52:46,539
do all I could do a push volume outline

996
00:52:43,818 --> 00:52:55,579
okay that's better

997
00:52:46,539 --> 00:53:00,920
so inside push light I tell you it's

998
00:52:55,579 --> 00:53:05,050
brutal I went to the ENT and they really

999
00:53:00,920 --> 00:53:05,050
don't know what's wrong with me so I

1000
00:53:05,469 --> 00:53:12,818
need one those Stephen Hawking things he

1001
00:53:07,818 --> 00:53:12,818
has had unfortunately

1002
00:53:17,159 --> 00:53:31,538
so in here what I'll do is I'll I'll

1003
00:53:21,010 --> 00:53:35,410
push the volume outline and I'll take a

1004
00:53:31,539 --> 00:53:37,329
look at the rectangle so I have the Box

1005
00:53:35,409 --> 00:53:46,690
min/max here so I'll just do a rectum

1006
00:53:37,329 --> 00:53:47,890
and Max and then we'll just draw it

1007
00:53:46,690 --> 00:53:55,568
we'll just draw it in white that's fine

1008
00:53:47,889 --> 00:54:01,348
we'll just use the default parameters so

1009
00:53:55,568 --> 00:54:04,509
if I run now here's where the lights are

1010
00:54:01,349 --> 00:54:06,818
right and you can see that we just kind

1011
00:54:04,510 --> 00:54:10,390
of stuck them up above like lamps I

1012
00:54:06,818 --> 00:54:12,568
guess was you know we we've spent

1013
00:54:10,389 --> 00:54:15,578
literally zero time on the world Jen

1014
00:54:12,568 --> 00:54:17,409
lighting stuff like we just threw a

1015
00:54:15,579 --> 00:54:20,200
light in above lamps I think it was what

1016
00:54:17,409 --> 00:54:22,838
we did just so we have some in there so

1017
00:54:20,199 --> 00:54:24,730
if you can see what's going on here this

1018
00:54:22,838 --> 00:54:28,659
is where you expect people to be picking

1019
00:54:24,730 --> 00:54:31,630
light up from right would be here but

1020
00:54:28,659 --> 00:54:35,500
they're definitely not and we need to

1021
00:54:31,630 --> 00:54:38,338
figure out why so as we sort of step

1022
00:54:35,500 --> 00:54:38,338
forward here

1023
00:54:44,309 --> 00:54:55,390
see it's for very strange and we would

1024
00:54:53,469 --> 00:54:57,250
definitely expect that some you know you

1025
00:54:55,389 --> 00:55:00,038
would getting this is where you should

1026
00:54:57,250 --> 00:55:01,989
be getting more of that light from but

1027
00:55:00,039 --> 00:55:03,849
just there's so much light coming from

1028
00:55:01,989 --> 00:55:08,439
this upper area and I just no

1029
00:55:03,849 --> 00:55:12,630
explanation for it okay so how are we

1030
00:55:08,440 --> 00:55:15,088
going to do this I don't know

1031
00:55:12,630 --> 00:55:17,710
so there's a couple of things we can do

1032
00:55:15,088 --> 00:55:21,969
but first I guess what I would like to

1033
00:55:17,710 --> 00:55:24,490
do is shift this guy over to look at one

1034
00:55:21,969 --> 00:55:29,879
of these right like I'd like this guy to

1035
00:55:24,489 --> 00:55:29,879
be up a bit so you know I don't know

1036
00:55:31,139 --> 00:55:40,598
that's weird what that was about

1037
00:55:34,989 --> 00:55:43,538
oh I know why it's because the lighting

1038
00:55:40,599 --> 00:55:45,400
stops having those when you don't

1039
00:55:43,539 --> 00:55:50,130
actually run it so what I probably

1040
00:55:45,400 --> 00:55:50,130
should do actually is those debug values

1041
00:55:55,829 --> 00:56:02,798
so in here I kind of need these to be

1042
00:56:00,358 --> 00:56:05,940
happening all the time because if they

1043
00:56:02,798 --> 00:56:09,489
don't then they don't get updated right

1044
00:56:05,940 --> 00:56:13,059
for a particular frame I'm not sure how

1045
00:56:09,489 --> 00:56:16,629
I would actually go about outputting

1046
00:56:13,059 --> 00:56:18,759
some of those because they don't always

1047
00:56:16,630 --> 00:56:22,980
exist right like some of them are only

1048
00:56:18,759 --> 00:56:25,568
in here but I guess what I could do is

1049
00:56:22,980 --> 00:56:29,588
you push render letting values I could

1050
00:56:25,568 --> 00:56:36,150
do the ones that always exist and so I

1051
00:56:29,588 --> 00:56:36,150
could do something like this right

1052
00:56:45,159 --> 00:56:56,819
so here I could as we are stepping these

1053
00:56:49,000 --> 00:56:56,820
right I could go ahead and roll through

1054
00:56:56,880 --> 00:57:01,869
where these are and I guess I have to

1055
00:56:59,289 --> 00:57:02,880
actually yeah I have to actually step to

1056
00:57:01,869 --> 00:57:06,450
to make that happen

1057
00:57:02,880 --> 00:57:06,450
that's a pain in the butt

1058
00:57:17,989 --> 00:57:30,839
so there's one of them for example 17

1059
00:57:23,150 --> 00:57:33,320
912 and I want one that kind of goes

1060
00:57:30,840 --> 00:57:33,320
upward

1061
00:57:45,079 --> 00:57:51,000
okay there we go

1062
00:57:47,840 --> 00:57:55,110
well yeah well is that enough

1063
00:57:51,000 --> 00:57:55,909
I don't know if that's enough it's not

1064
00:57:55,110 --> 00:58:02,030
enough

1065
00:57:55,909 --> 00:58:02,029
that's probably upward enough 90

1066
00:58:17,030 --> 00:58:23,910
maybe a hundred and ninety yeah a

1067
00:58:20,190 --> 00:58:27,450
hundred so 17 912 and a hundred maybe

1068
00:58:23,909 --> 00:58:38,730
you know would be good debug values I

1069
00:58:27,449 --> 00:58:43,379
don't know what are these 17 912 a

1070
00:58:38,730 --> 00:58:54,420
hundred seventeen and 1200 and so if I

1071
00:58:43,380 --> 00:58:57,329
go in here and yeah there we go all

1072
00:58:54,420 --> 00:59:01,110
right so now whenever I run I should

1073
00:58:57,329 --> 00:59:06,480
hopefully get you know a pretty good

1074
00:59:01,110 --> 00:59:11,130
like representative ray cast that goes

1075
00:59:06,480 --> 00:59:12,869
up toward the the area that we're

1076
00:59:11,130 --> 00:59:22,320
supposedly getting light you know what I

1077
00:59:12,869 --> 00:59:27,750
mean why are we above what seems weird

1078
00:59:22,320 --> 00:59:30,470
I guess I need to subtract one grid

1079
00:59:27,750 --> 00:59:30,469
sheet from it

1080
00:59:30,650 --> 00:59:37,849
I should probably also have a way to run

1081
00:59:33,679 --> 00:59:39,589
this like several steps at once so I can

1082
00:59:37,849 --> 00:59:52,969
get to the point where this actually

1083
00:59:39,590 --> 00:59:55,190
starts to happen right so oddly enough

1084
00:59:52,969 --> 00:59:57,829
actually like that direction in

1085
00:59:55,190 --> 01:00:00,230
particular I guess doesn't isn't quite

1086
00:59:57,829 --> 01:00:03,529
the one we want it's really a different

1087
01:00:00,230 --> 01:00:05,179
one so let's try that one more time it's

1088
01:00:03,530 --> 01:00:07,610
really going up in the opposite

1089
01:00:05,179 --> 01:00:10,369
direction meaning sort of this but

1090
01:00:07,610 --> 01:00:20,390
flipped if that makes sense so we'd like

1091
01:00:10,369 --> 01:00:22,549
to see we'd like to see also I want this

1092
01:00:20,389 --> 01:00:27,889
to be I don't know how this ended up so

1093
01:00:22,550 --> 01:00:30,310
far out I guess this whole thing was up

1094
01:00:27,889 --> 01:00:30,309
too much

1095
01:00:49,030 --> 01:00:52,720
should probably just do this algorithm

1096
01:00:50,500 --> 01:00:54,639
way or you know what maybe we should

1097
01:00:52,719 --> 01:00:56,769
just have a thing where we could pick if

1098
01:00:54,639 --> 01:00:58,389
we're gonna be debugging this a lot it

1099
01:00:56,769 --> 01:01:01,000
would be this is way too much of a pain

1100
01:00:58,389 --> 01:01:02,259
in the butt because it'd be not that

1101
01:01:01,000 --> 01:01:14,608
hard to make just a thing where you can

1102
01:01:02,260 --> 01:01:14,609
pick right where the heck is this thing

1103
01:01:20,400 --> 01:01:31,088
okay where how do I not see it at all

1104
01:01:23,500 --> 01:01:35,289
that doesn't really make sense there it

1105
01:01:31,088 --> 01:01:37,809
is oh right I forgot a lot of times you

1106
01:01:35,289 --> 01:01:39,909
won't see it because it's too large the

1107
01:01:37,809 --> 01:01:41,920
exterior voxel doesn't get things cast

1108
01:01:39,909 --> 01:01:45,129
from it and this is the next irreal of

1109
01:01:41,920 --> 01:01:56,380
exterior voxel index is that right it

1110
01:01:45,130 --> 01:01:59,858
sounds right sort of right anyway okay

1111
01:01:56,380 --> 01:02:02,200
so now we're at least actually on one of

1112
01:01:59,858 --> 01:02:08,259
the incorrect ones which I would like so

1113
01:02:02,199 --> 01:02:11,559
it's 17 9 12 wait but that is the one I

1114
01:02:08,260 --> 01:02:14,910
picked how did the debugger in index get

1115
01:02:11,559 --> 01:02:21,029
to be something other than that oh

1116
01:02:14,909 --> 01:02:25,750
because it's just an offset I'm an idiot

1117
01:02:21,030 --> 01:02:26,500
Wow all right all right so that was

1118
01:02:25,750 --> 01:02:33,039
complete waste of time

1119
01:02:26,500 --> 01:02:35,800
but anyway so yeah what we need to do is

1120
01:02:33,039 --> 01:02:39,489
we need to figure out how to maybe pick

1121
01:02:35,800 --> 01:02:43,030
a a grid direction for the actual cast

1122
01:02:39,489 --> 01:02:46,899
that's gonna go more towards the light

1123
01:02:43,030 --> 01:02:48,700
that we care about and then we need to

1124
01:02:46,900 --> 01:02:51,010
see like what the heck it's returning

1125
01:02:48,699 --> 01:02:54,460
because like something in that direction

1126
01:02:51,010 --> 01:02:58,530
is clearly returning a high value for no

1127
01:02:54,460 --> 01:02:58,530
apparent reason right and I don't know

1128
01:03:01,530 --> 01:03:08,510
well that's not awful yeah not quite

1129
01:03:20,900 --> 01:03:28,349
so I don't know I don't actually know I

1130
01:03:25,559 --> 01:03:33,989
should try to figure out what the Ray

1131
01:03:28,349 --> 01:03:42,299
indices I wonder if the Ray indices are

1132
01:03:33,989 --> 01:03:45,059
wrong so here's a thought one reason

1133
01:03:42,300 --> 01:03:46,710
that we could be seeing the directional

1134
01:03:45,059 --> 01:03:49,349
part of the bug is it could be that our

1135
01:03:46,710 --> 01:03:53,150
rays are actually going in different

1136
01:03:49,349 --> 01:03:55,799
directions than the right back location

1137
01:03:53,150 --> 01:03:58,260
that could easily be and we should look

1138
01:03:55,800 --> 01:04:00,630
at that pretty much right now I just

1139
01:03:58,260 --> 01:04:02,790
want to finish finding there we go

1140
01:04:00,630 --> 01:04:04,530
that one's pretty close would you say

1141
01:04:02,789 --> 01:04:06,480
let me take a look at let me let these

1142
01:04:04,530 --> 01:04:08,250
grow again and see if that's a roughly

1143
01:04:06,480 --> 01:04:09,990
close ray to the direction that's

1144
01:04:08,250 --> 01:04:14,630
getting the light I'm not charlie

1145
01:04:09,989 --> 01:04:17,759
certain it is but let's take a look okay

1146
01:04:14,630 --> 01:04:20,250
so if i zoom in now a little bit more on

1147
01:04:17,760 --> 01:04:22,800
the on the actual directional system

1148
01:04:20,250 --> 01:04:27,750
area yes so that's real close so I'm

1149
01:04:22,800 --> 01:04:32,610
gonna call 156 actually a better debug

1150
01:04:27,750 --> 01:04:36,440
ray index okay so if for example we were

1151
01:04:32,610 --> 01:04:39,870
casting in a particular direction and

1152
01:04:36,440 --> 01:04:41,610
then writing back to the wrong part of

1153
01:04:39,869 --> 01:04:43,889
the octahedral map that would explain

1154
01:04:41,610 --> 01:04:45,690
why we were seeing what looks like

1155
01:04:43,889 --> 01:04:47,009
directional lighting coming in to these

1156
01:04:45,690 --> 01:04:48,210
things but from a completely different

1157
01:04:47,010 --> 01:04:51,510
direction than where the light source is

1158
01:04:48,210 --> 01:04:53,400
right so that could be and we should

1159
01:04:51,510 --> 01:04:54,990
definitely test that and there's a lot

1160
01:04:53,400 --> 01:04:57,690
of ways you can test it so we'll go take

1161
01:04:54,989 --> 01:05:04,799
a look at some ways right that we can

1162
01:04:57,690 --> 01:05:09,650
use okay so here's an example right you

1163
01:05:04,800 --> 01:05:09,650
can see for this particular

1164
01:05:16,018 --> 01:05:22,348
well we set it to 156 but that's that's

1165
01:05:18,969 --> 01:05:22,348
not that doesn't look right

1166
01:05:23,190 --> 01:05:31,269
what am I missing that wasn't what it

1167
01:05:29,318 --> 01:05:34,480
was was it or do we dis truncate was it

1168
01:05:31,268 --> 01:05:36,129
155 oh so I guess it doesn't round it

1169
01:05:34,480 --> 01:05:44,259
truncates all right so I take it back

1170
01:05:36,130 --> 01:05:46,869
it's 155 all right so we can debug that

1171
01:05:44,259 --> 01:05:48,699
one specifically and we will but what

1172
01:05:46,869 --> 01:05:50,890
I'd like to do first is I think it'd

1173
01:05:48,699 --> 01:05:52,960
probably be a better idea to go and look

1174
01:05:50,889 --> 01:05:54,239
before we go any further to see whether

1175
01:05:52,960 --> 01:05:58,599
we're writing back to the correct place

1176
01:05:54,239 --> 01:06:01,419
so if I go to grid raycast

1177
01:05:58,599 --> 01:06:05,559
and just look and see when we're doing

1178
01:06:01,420 --> 01:06:08,349
our debugging and so this function will

1179
01:06:05,559 --> 01:06:12,278
have the debug augmentation added to it

1180
01:06:08,349 --> 01:06:15,400
I'd like to try to discuss who the heck

1181
01:06:12,278 --> 01:06:18,190
is getting written back to right so in

1182
01:06:15,400 --> 01:06:20,230
other words in here when we're doing our

1183
01:06:18,190 --> 01:06:24,730
store you know who's actually getting

1184
01:06:20,230 --> 01:06:30,639
stored to be fair with if debugging was

1185
01:06:24,730 --> 01:06:31,449
on we probably shouldn't be writing back

1186
01:06:30,639 --> 01:06:33,608
to it axel

1187
01:06:31,449 --> 01:06:37,118
I hope the debug system itself is not

1188
01:06:33,608 --> 01:06:40,659
causing this problem but could that be I

1189
01:06:37,119 --> 01:06:44,259
don't think that could be but anyway

1190
01:06:40,659 --> 01:06:48,338
so what I'd like to do here is when we

1191
01:06:44,259 --> 01:06:51,009
do this debug I'd like to figure out

1192
01:06:48,338 --> 01:06:54,130
which spec Texel we're writing to and

1193
01:06:51,009 --> 01:06:56,170
draw that right so in here we're gonna

1194
01:06:54,130 --> 01:06:58,150
say look here's the spec atlas and

1195
01:06:56,170 --> 01:06:59,380
whether we're debugging when we call

1196
01:06:58,150 --> 01:07:04,239
that grid raycast

1197
01:06:59,380 --> 01:07:07,358
I want to do a I want to do something

1198
01:07:04,239 --> 01:07:09,989
that draws where it what direction we

1199
01:07:07,358 --> 01:07:09,989
thought it should be

1200
01:07:10,619 --> 01:07:22,510
so inside full cast which is here

1201
01:07:18,429 --> 01:07:25,659
if we are going to be doing the debug

1202
01:07:22,510 --> 01:07:40,470
which is this one when we get these

1203
01:07:25,659 --> 01:07:43,480
texels what I would like to see well

1204
01:07:40,469 --> 01:07:46,328
this is gonna be harder so the problem

1205
01:07:43,480 --> 01:07:51,250
is we kind of just randomly write to it

1206
01:07:46,329 --> 01:07:53,230
arbitrary location here right which we

1207
01:07:51,250 --> 01:07:57,818
don't really want to do like this is not

1208
01:07:53,230 --> 01:08:00,099
a good thing that we've done here I also

1209
01:07:57,818 --> 01:08:02,858
don't know why there's a spec Texel B

1210
01:08:00,099 --> 01:08:05,740
because we don't use it so not sure why

1211
01:08:02,858 --> 01:08:07,869
we have that right the actual code

1212
01:08:05,739 --> 01:08:13,479
should be this but just to make sure

1213
01:08:07,869 --> 01:08:15,970
what I want to do here is say okay the

1214
01:08:13,480 --> 01:08:20,289
spec Texel a that you're writing to you

1215
01:08:15,969 --> 01:08:22,960
can see in here it just it just writes

1216
01:08:20,289 --> 01:08:26,710
to it I'm gonna go ahead and just create

1217
01:08:22,960 --> 01:08:31,838
a dummy buffer so that we don't that

1218
01:08:26,710 --> 01:08:33,880
this can't be affecting us so here's a

1219
01:08:31,838 --> 01:08:36,068
dummy buffer and I'm not going to do

1220
01:08:33,880 --> 01:08:37,690
this offset from Texel what I'm going to

1221
01:08:36,069 --> 01:08:40,929
do is I'm just gonna say there's a spec

1222
01:08:37,689 --> 01:08:47,710
Texel and it points to this and that's

1223
01:08:40,929 --> 01:08:51,810
it so now hopefully when someone writes

1224
01:08:47,710 --> 01:08:55,029
to this spec Texel it'll just be ignored

1225
01:08:51,810 --> 01:08:59,469
no one you know it won't it won't do

1226
01:08:55,029 --> 01:09:02,319
anything so if I run it now I'm assuming

1227
01:08:59,469 --> 01:09:03,880
that that wasn't the problem but I want

1228
01:09:02,319 --> 01:09:05,529
to make sure right I want to make sure

1229
01:09:03,880 --> 01:09:08,500
that that we don't have some other bug

1230
01:09:05,529 --> 01:09:10,299
in here where the debug system is

1231
01:09:08,500 --> 01:09:14,729
actually causing a problem I don't think

1232
01:09:10,298 --> 01:09:14,729
it could but just to make sure

1233
01:09:17,239 --> 01:09:23,189
and yeah so it wasn't a debug system

1234
01:09:20,789 --> 01:09:29,850
just want to make sure so you can see

1235
01:09:23,189 --> 01:09:32,460
here still the same problem and there's

1236
01:09:29,850 --> 01:09:35,280
an example of a cast that cast is

1237
01:09:32,460 --> 01:09:40,890
producing you know probably light that

1238
01:09:35,279 --> 01:09:45,960
it shouldn't okay so now what we need to

1239
01:09:40,890 --> 01:09:49,470
do is add some kind of debug ignition in

1240
01:09:45,960 --> 01:09:52,470
here where we actually determine where

1241
01:09:49,470 --> 01:09:54,420
this thing is coming from and try to

1242
01:09:52,470 --> 01:09:59,039
verify that we're casting in the correct

1243
01:09:54,420 --> 01:10:01,109
direction I think the way we would want

1244
01:09:59,039 --> 01:10:13,619
to do that is if we look at the debug

1245
01:10:01,109 --> 01:10:15,509
ray index here I guess we just have to

1246
01:10:13,619 --> 01:10:17,369
figure out how we would have pulled out

1247
01:10:15,510 --> 01:10:19,710
the Ray origin for I mean the ray

1248
01:10:17,369 --> 01:10:23,250
direction for that thing and see what we

1249
01:10:19,710 --> 01:10:29,659
do so here is our example we take the

1250
01:10:23,250 --> 01:10:29,659
sample dur here and so this

1251
01:10:34,409 --> 01:10:39,479
this is how it would have been computed

1252
01:10:36,439 --> 01:10:53,849
so we have a particular octahedron in da

1253
01:10:39,479 --> 01:10:55,889
index so you have a specific octahedron

1254
01:10:53,850 --> 01:10:58,110
index here and what we want to be able

1255
01:10:55,890 --> 01:11:03,000
to do is reverse engineer what that

1256
01:10:58,109 --> 01:11:06,119
would have been so here's our debug ray

1257
01:11:03,000 --> 01:11:10,319
index right which was rounded so that

1258
01:11:06,119 --> 01:11:12,899
was weird that was not yeah that was

1259
01:11:10,319 --> 01:11:22,979
weird but anyway if we go ahead and take

1260
01:11:12,899 --> 01:11:27,629
our debug der index or I should say do

1261
01:11:22,979 --> 01:11:30,509
you by Bray index so if we take our

1262
01:11:27,630 --> 01:11:32,220
debug ray index and now we want to

1263
01:11:30,510 --> 01:11:34,980
reverse engineer what these values would

1264
01:11:32,220 --> 01:11:37,619
have been so we want to know what

1265
01:11:34,979 --> 01:11:39,959
octahedron it would have been what we

1266
01:11:37,619 --> 01:11:42,539
can do is just divide by the light

1267
01:11:39,960 --> 01:11:44,880
sample directions per octahedron so the

1268
01:11:42,539 --> 01:11:53,220
debug opt index is actually going to be

1269
01:11:44,880 --> 01:11:54,989
this and then the debug I guess I don't

1270
01:11:53,220 --> 01:11:57,659
know what we would call this but inside

1271
01:11:54,989 --> 01:12:03,409
the octahedron we I guess we'd call this

1272
01:11:57,659 --> 01:12:05,849
the the map index is just going to be

1273
01:12:03,409 --> 01:12:12,449
the remainder in fact I could just do

1274
01:12:05,850 --> 01:12:14,310
the mod here so this is which octahedron

1275
01:12:12,449 --> 01:12:17,849
we were looking in this is which map we

1276
01:12:14,310 --> 01:12:21,630
were looking in and so now what we want

1277
01:12:17,850 --> 01:12:25,380
to know is what direction do we think

1278
01:12:21,630 --> 01:12:27,060
that should have been right and you can

1279
01:12:25,380 --> 01:12:30,239
see here how we were looping through it

1280
01:12:27,060 --> 01:12:36,030
so we're going through sy and then for

1281
01:12:30,239 --> 01:12:39,359
sy we're going through the the texels 1

1282
01:12:36,029 --> 01:12:42,149
2 3 4 right so what we would expect to

1283
01:12:39,359 --> 01:12:44,399
see here is if we got the map index we

1284
01:12:42,149 --> 01:12:47,159
now need to know what our T X and T Y

1285
01:12:44,399 --> 01:12:48,059
were and those are going to be found

1286
01:12:47,159 --> 01:12:50,670
exactly the same

1287
01:12:48,060 --> 01:12:53,190
so the map index divided by eight would

1288
01:12:50,670 --> 01:12:59,220
be the Y and the mod eight would be the

1289
01:12:53,189 --> 01:13:02,329
X right looking in here at the spec

1290
01:12:59,220 --> 01:13:07,530
Texel at that point we just have to

1291
01:13:02,329 --> 01:13:08,640
figure out where we get the well

1292
01:13:07,529 --> 01:13:11,489
actually you know what we don't really

1293
01:13:08,640 --> 01:13:12,750
care about this all we really need to do

1294
01:13:11,489 --> 01:13:15,689
is say look that's going to give us the

1295
01:13:12,750 --> 01:13:17,159
TX and the T y value that are uh knopf

1296
01:13:15,689 --> 01:13:20,309
set in fact these are actually about

1297
01:13:17,159 --> 01:13:22,619
like the octahedral because they don't

1298
01:13:20,310 --> 01:13:24,060
include the border right so we should be

1299
01:13:22,619 --> 01:13:31,229
able to look up directly into the

1300
01:13:24,060 --> 01:13:32,760
octahedral map for those so in here

1301
01:13:31,229 --> 01:13:34,739
where we would call unit vector from

1302
01:13:32,760 --> 01:13:39,449
octahedral that's all we should really

1303
01:13:34,739 --> 01:13:42,059
need now I want to I I mean maybe I

1304
01:13:39,449 --> 01:13:43,139
should call a direction from txt Y and

1305
01:13:42,060 --> 01:13:46,920
just make sure that we're doing

1306
01:13:43,140 --> 01:13:48,510
everything correctly and if I want to do

1307
01:13:46,920 --> 01:13:52,310
that then I just have to add one to each

1308
01:13:48,510 --> 01:13:52,310
of these to account for the border right

1309
01:14:01,100 --> 01:14:07,220
so that's all well and good and since

1310
01:14:05,539 --> 01:14:08,689
this is the spec atlas that we're

1311
01:14:07,220 --> 01:14:10,789
talking about here it'd be the spec

1312
01:14:08,689 --> 01:14:12,259
atlas of XY coefficient and question

1313
01:14:10,789 --> 01:14:13,220
although the Atlas is happening the same

1314
01:14:12,260 --> 01:14:16,550
dimension right now

1315
01:14:13,220 --> 01:14:18,350
so it wouldn't matter but this will give

1316
01:14:16,550 --> 01:14:19,850
us a way of figuring out what direction

1317
01:14:18,350 --> 01:14:23,900
this goes in so this is like our

1318
01:14:19,850 --> 01:14:26,539
expected direction and what I can do

1319
01:14:23,899 --> 01:14:29,659
then is I can after the grid raycast I

1320
01:14:26,539 --> 01:14:33,789
can push a line segment that basically

1321
01:14:29,659 --> 01:14:36,920
says wherever the Ray origin was right

1322
01:14:33,789 --> 01:14:39,380
draw something coming out that's the

1323
01:14:36,920 --> 01:14:44,210
expected direction and we'll do like you

1324
01:14:39,380 --> 01:14:46,970
know Virgin single Plus that in a color

1325
01:14:44,210 --> 01:14:55,039
that I can see really clearly so you

1326
01:14:46,970 --> 01:14:57,650
know maybe uh maybe magenta and this way

1327
01:14:55,039 --> 01:15:05,449
I can see what direction we expect this

1328
01:14:57,649 --> 01:15:08,420
ray to roughly be in and then we can we

1329
01:15:05,449 --> 01:15:10,309
can take we can see whether or not the

1330
01:15:08,420 --> 01:15:13,760
Rays are going in the rough direction

1331
01:15:10,310 --> 01:15:17,470
that we expect them to right that's

1332
01:15:13,760 --> 01:15:17,470
supposed to be capitalized

1333
01:15:21,220 --> 01:15:32,210
and push debug lines actually what I

1334
01:15:26,569 --> 01:15:34,099
wanted yeah and I think that should give

1335
01:15:32,210 --> 01:15:39,430
us a little bit of insight into whether

1336
01:15:34,100 --> 01:15:43,010
we've got these things lined up right so

1337
01:15:39,430 --> 01:15:50,710
let's take a look at the debug system

1338
01:15:43,010 --> 01:15:57,850
now and all I'm gonna do is perturb that

1339
01:15:50,710 --> 01:16:01,340
Ray index right it looks pretty good I

1340
01:15:57,850 --> 01:16:03,680
mean these octahedral maps are pretty

1341
01:16:01,340 --> 01:16:05,840
low res so you're only expecting them to

1342
01:16:03,680 --> 01:16:08,590
be roughly in line like they're not

1343
01:16:05,840 --> 01:16:08,590
going to be exact

1344
01:16:09,010 --> 01:16:12,010
right

1345
01:16:16,828 --> 01:16:28,948
so uh I wouldn't I wouldn't call that

1346
01:16:22,050 --> 01:16:28,949
suspicious yeah it it's pretty close so

1347
01:16:30,988 --> 01:16:37,138
so I would call that pretty reliable

1348
01:16:33,849 --> 01:16:39,670
like that doesn't look like an issue now

1349
01:16:37,139 --> 01:16:41,050
that doesn't tell us anything about the

1350
01:16:39,670 --> 01:16:42,520
sampling from the act you don't Matt but

1351
01:16:41,050 --> 01:16:45,400
it does look like we're writing back

1352
01:16:42,520 --> 01:16:47,770
into the right location so at that point

1353
01:16:45,399 --> 01:16:51,098
my question just becomes alright let's

1354
01:16:47,770 --> 01:16:53,440
take a look at this raycast specifically

1355
01:16:51,099 --> 01:16:55,840
you know and and I'm going to crank up

1356
01:16:53,439 --> 01:16:58,960
that that value again so that the single

1357
01:16:55,840 --> 01:17:01,779
steps are very large so where we do

1358
01:16:58,960 --> 01:17:04,260
build a few light Maps I'm gonna let

1359
01:17:01,779 --> 01:17:11,198
those get large quickly

1360
01:17:04,260 --> 01:17:20,940
so here's more of a aggressive spreading

1361
01:17:11,198 --> 01:17:20,939
parameter there and

1362
01:17:25,908 --> 01:17:35,658
here is the first lighting step oops

1363
01:17:31,368 --> 01:17:35,658
should I send out and need this up I

1364
01:17:43,069 --> 01:17:48,118
feel like I want to be able to see those

1365
01:17:46,078 --> 01:17:50,518
early steps more easily so maybe I

1366
01:17:48,118 --> 01:17:54,868
should also just make them a bit larger

1367
01:17:50,519 --> 01:17:59,760
so where we draw the lines maybe I will

1368
01:17:54,868 --> 01:18:01,799
try to well but even that doesn't really

1369
01:17:59,760 --> 01:18:03,869
make sense it's weird that we're getting

1370
01:18:01,800 --> 01:18:06,210
that getting so much light from such

1371
01:18:03,868 --> 01:18:09,808
small values in even initially because

1372
01:18:06,210 --> 01:18:15,840
one unit is one meter like one unit is

1373
01:18:09,809 --> 01:18:17,820
pretty far right oh but I put a scale

1374
01:18:15,840 --> 01:18:19,980
value in okay so did I put a scale of

1375
01:18:17,819 --> 01:18:26,189
value in there I think I did intensity

1376
01:18:19,979 --> 01:18:28,169
times scale I think I did right yeah so

1377
01:18:26,189 --> 01:18:32,839
let's just leave that at one then for

1378
01:18:28,170 --> 01:18:32,840
now and we'll see what happens there

1379
01:18:34,618 --> 01:18:47,399
although it's still that's still yeah I

1380
01:18:37,550 --> 01:18:52,380
feel like so right now there should be

1381
01:18:47,399 --> 01:18:57,589
like how are we getting that much light

1382
01:18:52,380 --> 01:18:57,590
like visible light from such tiny values

1383
01:18:57,679 --> 01:19:02,149
that just doesn't make sense does it

1384
01:19:06,899 --> 01:19:21,099
all right so this is only the spec atlas

1385
01:19:12,670 --> 01:19:23,859
let's get both of them so I'm gonna get

1386
01:19:21,100 --> 01:19:27,280
both of these and then what I want to do

1387
01:19:23,859 --> 01:19:38,618
is in here I want to do a spec value and

1388
01:19:27,279 --> 01:19:43,809
a diffuse value and then what I want to

1389
01:19:38,618 --> 01:19:54,069
do is I want to do a spec intensity of

1390
01:19:43,810 --> 01:20:02,710
diffuse intensity and actually maybe

1391
01:19:54,069 --> 01:20:12,069
I'll just do this so maybe we'll just

1392
01:20:02,710 --> 01:20:21,368
say look this process here we can just

1393
01:20:12,069 --> 01:20:27,809
abstract we just want to tell you what

1394
01:20:21,368 --> 01:20:27,809
Alice it is you'll go ahead and get it

1395
01:20:28,710 --> 01:20:35,219
not know which these are it get tile

1396
01:20:31,149 --> 01:20:35,219
unclamped there S's

1397
01:20:38,998 --> 01:20:48,478
so you'll just say that and then this

1398
01:20:46,920 --> 01:20:52,380
will just happen automatically for you

1399
01:20:48,479 --> 01:21:04,710
so you'll get the value it'll compute

1400
01:20:52,380 --> 01:21:07,828
the intensity and that's it so here I'm

1401
01:21:04,710 --> 01:21:13,429
going to say debug draw color derp I'm

1402
01:21:07,828 --> 01:21:15,868
gonna pass the spec atlas for that one

1403
01:21:13,429 --> 01:21:19,078
I'll need the lighting solution and the

1404
01:21:15,868 --> 01:21:22,618
Center P and then I'll do the same thing

1405
01:21:19,078 --> 01:21:25,170
for the diffuse Alice and the problem

1406
01:21:22,618 --> 01:21:26,268
here that I'm going to have is I'm not

1407
01:21:25,170 --> 01:21:30,149
gonna be able to tell the two apart

1408
01:21:26,269 --> 01:21:33,570
right so we're gonna have to come up

1409
01:21:30,149 --> 01:21:36,359
with some way of differentiating the

1410
01:21:33,569 --> 01:21:42,359
tube and I'm not sure how I'm gonna do

1411
01:21:36,359 --> 01:21:58,828
that that's that's that's a good

1412
01:21:42,359 --> 01:21:59,460
question I so I think that's all good

1413
01:21:58,828 --> 01:22:02,688
and

1414
01:21:59,460 --> 01:22:02,689
[Music]

1415
01:22:12,538 --> 01:22:20,229
so you can see the diffuse Atlas grows

1416
01:22:15,969 --> 01:22:25,899
at a rate totally absurd compared to the

1417
01:22:20,229 --> 01:22:27,759
spec Alice right and I guess that's what

1418
01:22:25,899 --> 01:22:31,089
you would expect because you're summing

1419
01:22:27,760 --> 01:22:37,030
up values from the spec Atlas into the

1420
01:22:31,090 --> 01:22:44,110
diffuse Atlas but I guess what I would

1421
01:22:37,029 --> 01:22:47,500
say is there's still some unanswered

1422
01:22:44,109 --> 01:22:50,828
questions there that I think we need to

1423
01:22:47,500 --> 01:22:52,179
start tracking down so first of all it

1424
01:22:50,828 --> 01:22:53,799
does look like you know like I was

1425
01:22:52,179 --> 01:22:55,270
thinking so starting the lighting

1426
01:22:53,800 --> 01:22:57,279
quality pass and working on what that

1427
01:22:55,270 --> 01:22:58,960
diffuse blur should actually do is gonna

1428
01:22:57,279 --> 01:23:02,920
be pretty critical because it definitely

1429
01:22:58,960 --> 01:23:05,788
grows way too quickly with the the spec

1430
01:23:02,920 --> 01:23:08,679
lighting input so that's unsurprising

1431
01:23:05,788 --> 01:23:12,009
but I think the other thing we need to

1432
01:23:08,679 --> 01:23:15,038
do is so if we just take a look just at

1433
01:23:12,010 --> 01:23:16,840
the spec atlas here to go back to the

1434
01:23:15,038 --> 01:23:20,939
previous debugging step because I want

1435
01:23:16,840 --> 01:23:24,250
to track this down I just don't know

1436
01:23:20,939 --> 01:23:27,939
where that up side lighting is coming

1437
01:23:24,250 --> 01:23:32,109
from so when we look here you know and

1438
01:23:27,939 --> 01:23:35,109
we see this like really clear bias up

1439
01:23:32,109 --> 01:23:41,889
towards all this like apparent lighting

1440
01:23:35,109 --> 01:23:45,819
that is coming from the sky right what

1441
01:23:41,889 --> 01:23:49,000
what is going on so maybe we can step in

1442
01:23:45,819 --> 01:23:51,299
to this particular lighting calculation

1443
01:23:49,000 --> 01:23:55,779
and take a look at what's coming back

1444
01:23:51,300 --> 01:24:01,179
you know another thing we could do is

1445
01:23:55,779 --> 01:24:04,599
turn off the gather from from outs like

1446
01:24:01,179 --> 01:24:06,399
don't do them and see just to see

1447
01:24:04,599 --> 01:24:09,489
whether that's the primary thing that's

1448
01:24:06,399 --> 01:24:11,920
causing us getting too much feedback you

1449
01:24:09,488 --> 01:24:14,718
know which would give us some some like

1450
01:24:11,920 --> 01:24:19,980
clues basically to what's happening

1451
01:24:14,719 --> 01:24:24,389
so if we take a look in in the raycast

1452
01:24:19,979 --> 01:24:26,519
er here where we go grid raycast and we

1453
01:24:24,389 --> 01:24:30,359
come out and here's where we're actually

1454
01:24:26,520 --> 01:24:32,159
doing our transfer computations so what

1455
01:24:30,359 --> 01:24:33,929
you can see here is we do this no matter

1456
01:24:32,158 --> 01:24:35,549
what so we're going to compute fox the

1457
01:24:33,929 --> 01:24:41,158
radiance no matter what happens here

1458
01:24:35,550 --> 01:24:42,840
right what I'm imagining is probably

1459
01:24:41,158 --> 01:24:47,279
happening is something along the lines

1460
01:24:42,840 --> 01:24:54,650
of like the diffuse and specular sees

1461
01:24:47,279 --> 01:25:00,479
like somehow have bright stuff at the

1462
01:24:54,649 --> 01:25:03,000
apron so when we hit the apron we record

1463
01:25:00,479 --> 01:25:09,569
a bright light coming back that isn't

1464
01:25:03,000 --> 01:25:12,500
there or something you know you know or

1465
01:25:09,569 --> 01:25:12,500
something like this

1466
01:25:15,658 --> 01:25:22,888
I don't know I'm not sure that's it

1467
01:25:20,969 --> 01:25:24,840
that's a tough one but what I can do

1468
01:25:22,889 --> 01:25:27,118
here is I can predicate this if we want

1469
01:25:24,840 --> 01:25:29,849
to where if we take the transfer PPS

1470
01:25:27,118 --> 01:25:31,768
values which at the moment are always

1471
01:25:29,849 --> 01:25:33,328
being written what I could do instead is

1472
01:25:31,769 --> 01:25:37,110
I can make it so that we don't write

1473
01:25:33,328 --> 01:25:44,268
them in the case where we didn't hit so

1474
01:25:37,109 --> 01:25:44,268
if we look here and we say if the probe

1475
01:25:48,828 --> 01:25:54,899
so if if we come out of here and we

1476
01:25:51,569 --> 01:25:56,819
don't actually think we hit anything and

1477
01:25:54,899 --> 01:25:58,469
I'm not sure that we ever really record

1478
01:25:56,819 --> 01:26:01,408
that information so you can see like

1479
01:25:58,469 --> 01:26:03,809
something kit would be the thing that

1480
01:26:01,408 --> 01:26:10,679
would tell us that whether we ever

1481
01:26:03,809 --> 01:26:14,130
actually hit and you know at the moment

1482
01:26:10,679 --> 01:26:17,609
anyway we never really record that

1483
01:26:14,130 --> 01:26:24,109
information but we easily could so you

1484
01:26:17,609 --> 01:26:26,759
could imagine you know doing this right

1485
01:26:24,109 --> 01:26:31,109
and it's the exact same loop now there's

1486
01:26:26,760 --> 01:26:34,439
no difference between the two but it

1487
01:26:31,109 --> 01:26:36,688
also because because basically the first

1488
01:26:34,439 --> 01:26:38,400
time this becomes true we exit out so it

1489
01:26:36,689 --> 01:26:41,668
doesn't matter that it persists so we

1490
01:26:38,399 --> 01:26:47,098
could look at it after the fact right so

1491
01:26:41,668 --> 01:26:48,479
when we break out of this loop for a

1492
01:26:47,099 --> 01:26:51,150
particular array Oh oops

1493
01:26:48,479 --> 01:26:54,059
and I did put it slightly - I know I

1494
01:26:51,149 --> 01:26:56,069
didn't put it in right place so when we

1495
01:26:54,059 --> 01:26:58,679
break out of this loop we could just

1496
01:26:56,069 --> 01:27:03,978
check to see and say look you know if

1497
01:26:58,679 --> 01:27:06,979
something was hit you can do this

1498
01:27:03,979 --> 01:27:06,979
otherwise

1499
01:27:13,520 --> 01:27:20,820
right so that's gonna stop anything but

1500
01:27:18,689 --> 01:27:25,139
an actual legitimate raycast from

1501
01:27:20,819 --> 01:27:27,329
actually producing color transfer and so

1502
01:27:25,140 --> 01:27:30,660
now if I look at it I just want to look

1503
01:27:27,329 --> 01:27:35,189
and see what I'm actually gonna see with

1504
01:27:30,659 --> 01:27:39,210
with these values right and what you can

1505
01:27:35,189 --> 01:27:42,599
see here is it's it's still completely

1506
01:27:39,210 --> 01:27:45,480
screwed right you can see what looks

1507
01:27:42,600 --> 01:27:49,620
like reasonable lighting results in a

1508
01:27:45,479 --> 01:27:53,779
sense but they're just totally the wrong

1509
01:27:49,619 --> 01:28:00,470
direction right there there's like no

1510
01:27:53,779 --> 01:28:00,469
there's no sense in that at all the the

1511
01:28:00,590 --> 01:28:10,100
spec map is overwhelmingly getting light

1512
01:28:05,270 --> 01:28:10,100
from a place that doesn't actually exist

1513
01:28:10,310 --> 01:28:16,620
there is no light up there at all so how

1514
01:28:14,340 --> 01:28:19,980
is it getting that and again this is

1515
01:28:16,619 --> 01:28:22,829
only this is very specifically when it

1516
01:28:19,979 --> 01:28:26,609
does hit something not when it doesn't

1517
01:28:22,829 --> 01:28:30,409
hit something so now let's try the

1518
01:28:26,609 --> 01:28:34,009
opposite now let's try disallowing hits

1519
01:28:30,409 --> 01:28:37,109
right and this should produce no light

1520
01:28:34,010 --> 01:28:38,820
right I don't think there should be any

1521
01:28:37,109 --> 01:28:40,859
way to actually get light into this

1522
01:28:38,819 --> 01:28:42,750
system so no matter how many times I hit

1523
01:28:40,859 --> 01:28:49,649
f9 to step the lighting we should see

1524
01:28:42,750 --> 01:28:50,939
nothing right okay so that's good it

1525
01:28:49,649 --> 01:28:53,339
doesn't really give us much information

1526
01:28:50,939 --> 01:28:55,289
but it at least tells us like oh okay

1527
01:28:53,340 --> 01:29:04,079
like we're not doing something totally

1528
01:28:55,289 --> 01:29:08,579
crazy all right so we've got some

1529
01:29:04,079 --> 01:29:11,699
serious issues going on here and it does

1530
01:29:08,579 --> 01:29:14,449
look like we're getting false reports of

1531
01:29:11,699 --> 01:29:14,449
hits and

1532
01:29:15,960 --> 01:29:22,409
well that's not true we're either

1533
01:29:19,380 --> 01:29:26,500
generating false hit reports or we're

1534
01:29:22,409 --> 01:29:31,210
miss writing the direction in a way that

1535
01:29:26,500 --> 01:29:35,619
we don't currently know how to look at

1536
01:29:31,210 --> 01:29:37,480
right like I tried to do a little bit of

1537
01:29:35,619 --> 01:29:39,099
verification that the place that the

1538
01:29:37,479 --> 01:29:42,909
spec Texel values were being written

1539
01:29:39,100 --> 01:29:46,390
back was correct now there is another

1540
01:29:42,909 --> 01:29:51,399
possibility which is that when we're

1541
01:29:46,390 --> 01:29:52,090
actually you know in doing the doing the

1542
01:29:51,399 --> 01:29:56,889
right back

1543
01:29:52,090 --> 01:29:58,600
so in the internal lighting core after

1544
01:29:56,890 --> 01:30:07,320
we call well after we call the internal

1545
01:29:58,600 --> 01:30:10,990
lighting core so this routine debug

1546
01:30:07,319 --> 01:30:13,569
dropped heedful values this routine

1547
01:30:10,989 --> 01:30:15,159
could be the thing that's wrong right I

1548
01:30:13,569 --> 01:30:19,539
mean it could be that we're drawing the

1549
01:30:15,159 --> 01:30:24,489
values erroneously somehow so like the T

1550
01:30:19,539 --> 01:30:34,600
Y and T X that we're asking for were

1551
01:30:24,489 --> 01:30:40,000
somehow pulling the wrong value out so

1552
01:30:34,600 --> 01:30:43,810
you know it's possible but I don't know

1553
01:30:40,000 --> 01:30:47,260
I think that's going to take some doing

1554
01:30:43,810 --> 01:30:48,970
to like actually kind of look into this

1555
01:30:47,260 --> 01:30:52,780
particular piece of code where we've

1556
01:30:48,970 --> 01:30:54,760
passed the spec texels here you know I

1557
01:30:52,779 --> 01:30:57,340
could try to sort of verify that that

1558
01:30:54,760 --> 01:31:01,350
code was correct if we look when we step

1559
01:30:57,340 --> 01:31:01,350
through the rows of the spec atlas

1560
01:31:05,260 --> 01:31:11,489
we're just looking at the one tile that

1561
01:31:08,170 --> 01:31:14,409
we're on and we're stepping to one and

1562
01:31:11,488 --> 01:31:16,359
then one plus the road that is where we

1563
01:31:14,409 --> 01:31:19,899
would expect to start right and then

1564
01:31:16,359 --> 01:31:23,738
five and one plus the row which is where

1565
01:31:19,899 --> 01:31:28,409
we respect the next one to be and those

1566
01:31:23,738 --> 01:31:31,269
both seem totally reasonable like that's

1567
01:31:28,409 --> 01:31:35,889
what you expect right and then the

1568
01:31:31,270 --> 01:31:38,320
sample Durer has to be updated that it

1569
01:31:35,890 --> 01:31:52,119
just I don't see what's wrong with that

1570
01:31:38,319 --> 01:31:55,380
it looks roughly correct to me so yeah I

1571
01:31:52,119 --> 01:31:55,380
just don't I just don't see

1572
01:32:02,409 --> 01:32:07,019
I don't quite see how that's wrong

1573
01:32:35,849 --> 01:32:42,190
so since we drew these and they looked

1574
01:32:38,439 --> 01:32:44,738
correct the yeah the only possibilities

1575
01:32:42,189 --> 01:32:47,439
are that the drawing code is somehow not

1576
01:32:44,738 --> 01:32:51,189
correct meaning we think we drew it and

1577
01:32:47,439 --> 01:32:53,799
we didn't really or somehow when you

1578
01:32:51,189 --> 01:32:55,618
actually call this it's slightly it's

1579
01:32:53,800 --> 01:33:06,279
subtly different in a way that we're not

1580
01:32:55,618 --> 01:33:15,399
picking up right but I am sorry I just

1581
01:33:06,279 --> 01:33:18,429
don't see it I don't see it yet and what

1582
01:33:15,399 --> 01:33:21,399
yeah like what what would be what could

1583
01:33:18,429 --> 01:33:23,940
possibly be causing that scenario to

1584
01:33:21,399 --> 01:33:23,939
occur

1585
01:33:28,210 --> 01:33:32,239
because as far as I can tell you know we

1586
01:33:30,619 --> 01:33:36,849
looked at the raycast er it looks like

1587
01:33:32,239 --> 01:33:36,849
it's doing the correct casting and I

1588
01:33:38,109 --> 01:33:46,250
mean especially with the if something

1589
01:33:40,699 --> 01:33:50,539
hit part on I think we even verified

1590
01:33:46,250 --> 01:33:57,949
that it's not even yeah I mean let's

1591
01:33:50,539 --> 01:34:00,439
let's take a look so let's take this

1592
01:33:57,949 --> 01:34:02,809
here and color it based on whether it

1593
01:34:00,439 --> 01:34:06,009
thinks something was hit or not so we

1594
01:34:02,810 --> 01:34:08,330
can see whether it really outed right

1595
01:34:06,010 --> 01:34:09,590
again don't expect to learn much from

1596
01:34:08,329 --> 01:34:11,630
this but it's just another piece of

1597
01:34:09,590 --> 01:34:14,449
information just because I'm not really

1598
01:34:11,630 --> 01:34:21,560
sure what to look for I just kind of

1599
01:34:14,449 --> 01:34:22,699
need to guess so in that well I guess in

1600
01:34:21,560 --> 01:34:24,200
this case we already sort of did the

1601
01:34:22,699 --> 01:34:26,739
test now I think about it if something

1602
01:34:24,199 --> 01:34:30,380
hit if we use the something hit version

1603
01:34:26,739 --> 01:34:35,109
and we're running it then when we look

1604
01:34:30,380 --> 01:34:35,109
at that guy it just won't draw right

1605
01:34:37,569 --> 01:34:41,420
yeah I mean it just doesn't draw so we

1606
01:34:40,189 --> 01:34:46,909
know that it doesn't think that's a hit

1607
01:34:41,420 --> 01:34:56,060
right we already know that why are we

1608
01:34:46,909 --> 01:34:57,979
getting multiple Ray casts here oh I

1609
01:34:56,060 --> 01:35:02,710
know why it's because we're not turning

1610
01:34:57,979 --> 01:35:02,709
debugging off in that case right

1611
01:35:08,600 --> 01:35:18,870
yeah I don't know that's a real puzzler

1612
01:35:12,738 --> 01:35:40,949
I'm gonna put this outside for now like

1613
01:35:18,869 --> 01:35:44,250
so and then I'm looking at so I guess if

1614
01:35:40,949 --> 01:35:47,880
I want to test this now I want to see I

1615
01:35:44,250 --> 01:35:50,640
guess I want to pick you know maybe like

1616
01:35:47,880 --> 01:35:53,400
the one next to me this one right here

1617
01:35:50,640 --> 01:35:56,280
and look at that direction that it seems

1618
01:35:53,399 --> 01:36:02,639
to think that it's getting lighting that

1619
01:35:56,279 --> 01:36:04,649
way right and again it's a little tough

1620
01:36:02,640 --> 01:36:08,340
to be completely honest with you it's a

1621
01:36:04,649 --> 01:36:11,039
little tough to necessarily call some of

1622
01:36:08,340 --> 01:36:16,020
these wrong because the octahedral map

1623
01:36:11,039 --> 01:36:19,319
is actually fairly sparse and you know

1624
01:36:16,020 --> 01:36:23,130
technically if I was looking at say you

1625
01:36:19,319 --> 01:36:25,738
know this one right here that could have

1626
01:36:23,130 --> 01:36:29,340
come from that light right those would

1627
01:36:25,738 --> 01:36:34,409
have probably been in the same spec map

1628
01:36:29,340 --> 01:36:37,289
region what doesn't make any sense is

1629
01:36:34,409 --> 01:36:38,699
for example you look in here I mean

1630
01:36:37,289 --> 01:36:43,550
so maybe what I should be doing is

1631
01:36:38,699 --> 01:36:48,090
looking it like that because you know I

1632
01:36:43,550 --> 01:36:49,949
should be seeing this should should be

1633
01:36:48,090 --> 01:36:52,800
where we're getting the light from like

1634
01:36:49,949 --> 01:36:54,719
this right here right like all of these

1635
01:36:52,800 --> 01:36:55,770
should be coming from over there you

1636
01:36:54,719 --> 01:36:59,239
know what I mean

1637
01:36:55,770 --> 01:36:59,239
at least

1638
01:37:00,050 --> 01:37:06,920
so if I shift my my guy over here and I

1639
01:37:05,658 --> 01:37:09,348
wonder yeah I wonder if there's some

1640
01:37:06,920 --> 01:37:14,179
easy way I could do a box pick on that I

1641
01:37:09,349 --> 01:37:15,980
just wouldn't take very long our debug

1642
01:37:14,179 --> 01:37:20,149
system is just really crappy it's too

1643
01:37:15,979 --> 01:37:22,759
bad anyway maybe I can just take a look

1644
01:37:20,149 --> 01:37:26,920
at what happens am I going the wrong way

1645
01:37:22,760 --> 01:37:26,920
on this I am

1646
01:37:35,300 --> 01:37:40,920
so like maybe I can take a look at what

1647
01:37:38,310 --> 01:37:47,700
happens from right here and see why you

1648
01:37:40,920 --> 01:37:50,390
know like I can't my I'm not hitting you

1649
01:37:47,699 --> 01:37:50,389
know this light

1650
01:38:06,988 --> 01:38:23,669
they're so 177 88 and that's in that's

1651
01:38:16,408 --> 01:38:24,238
in the in it so it's in nope so in the

1652
01:38:23,670 --> 01:38:30,868
in it

1653
01:38:24,238 --> 01:38:33,448
I want 1 77 88 and then I want to cast

1654
01:38:30,868 --> 01:38:35,069
like towards the light let me restart

1655
01:38:33,448 --> 01:38:39,529
that real quick because there's too many

1656
01:38:35,069 --> 01:38:39,529
too many lines being drawn I can't see

1657
01:38:59,470 --> 01:39:04,489
so I just want to pick a ray that goes

1658
01:39:02,180 --> 01:39:06,650
to the light source now and I want to

1659
01:39:04,488 --> 01:39:09,229
see what the heck is going on because

1660
01:39:06,649 --> 01:39:11,988
like why aren't we getting strong light

1661
01:39:09,229 --> 01:39:14,419
coming back from the light source right

1662
01:39:11,988 --> 01:39:15,759
like why why are we not hitting that

1663
01:39:14,420 --> 01:39:22,960
light source ever

1664
01:39:15,760 --> 01:39:22,960
apparently start down the lower

1665
01:39:57,520 --> 01:40:02,700
it's not hitting nope oh man so close

1666
01:40:25,279 --> 01:40:31,500
it doesn't seem like I'm really ever

1667
01:40:27,300 --> 01:40:33,590
getting there let's try that one more

1668
01:40:31,500 --> 01:40:33,590
time

1669
01:40:46,640 --> 01:40:50,420
I mean I guess it's possible that

1670
01:40:48,829 --> 01:40:51,680
they're just it never quite picks a ray

1671
01:40:50,420 --> 01:40:53,300
direction that can hit that would be

1672
01:40:51,680 --> 01:40:54,920
unfortunate and might mean that we don't

1673
01:40:53,300 --> 01:40:58,820
have a dense enough sampling of the

1674
01:40:54,920 --> 01:41:00,260
sphere over time but I mean that's sort

1675
01:40:58,819 --> 01:41:02,000
of a separate issue because we are

1676
01:41:00,260 --> 01:41:03,230
picking up a ton of light so the

1677
01:41:02,000 --> 01:41:07,550
question is if we're never hitting a

1678
01:41:03,229 --> 01:41:11,449
light source how are we doing that god

1679
01:41:07,550 --> 01:41:16,449
it's like so close I should just move

1680
01:41:11,449 --> 01:41:19,609
the light upward slightly you know I

1681
01:41:16,449 --> 01:41:20,929
just move the light upward slightly so

1682
01:41:19,609 --> 01:41:24,130
that I don't have to keep picking so

1683
01:41:20,930 --> 01:41:24,130
that was 159

1684
01:41:30,448 --> 01:41:36,109
that one like kind of goes through it

1685
01:41:33,090 --> 01:41:36,110
but it's just on the edge

1686
01:42:00,488 --> 01:42:09,948
I'm going to go in for my own benefit

1687
01:42:05,750 --> 01:42:13,698
and say I wonder if I can for the debug

1688
01:42:09,948 --> 01:42:18,289
ray caster I'm not sure I actually need

1689
01:42:13,698 --> 01:42:20,629
to I'm not sure that I actually need to

1690
01:42:18,289 --> 01:42:22,250
only run that in the one place that it's

1691
01:42:20,630 --> 01:42:24,590
being run like I could run that at the

1692
01:42:22,250 --> 01:42:26,300
push well I know but it hasn't actually

1693
01:42:24,590 --> 01:42:31,159
do anything so yeah I kind of do have to

1694
01:42:26,300 --> 01:42:32,750
so what I could do is just like in the

1695
01:42:31,158 --> 01:42:35,569
build a few slight Maps I could turn

1696
01:42:32,750 --> 01:42:37,250
that back to one for the moment well I

1697
01:42:35,569 --> 01:42:38,469
try to find the thing that hits the

1698
01:42:37,250 --> 01:42:40,880
light source so we're not getting those

1699
01:42:38,469 --> 01:42:43,969
so many light thinks I could also clamp

1700
01:42:40,880 --> 01:42:45,770
the total length of those things because

1701
01:42:43,969 --> 01:42:47,630
I guess we don't need to see that we

1702
01:42:45,770 --> 01:42:49,040
just need to know that it's wrong that's

1703
01:42:47,630 --> 01:42:54,469
probably what I should do actually now I

1704
01:42:49,039 --> 01:42:56,710
think about it so I have no idea

1705
01:42:54,469 --> 01:42:58,880
what would be a more efficient way of

1706
01:42:56,710 --> 01:43:00,439
debugging this short of like stopping

1707
01:42:58,880 --> 01:43:02,239
and like writing an actually fairly

1708
01:43:00,439 --> 01:43:04,509
complete debug system for picking these

1709
01:43:02,238 --> 01:43:04,509
things

1710
01:43:17,639 --> 01:43:35,189
okay there it is so there's a direct hit

1711
01:43:24,578 --> 01:43:44,648
on the light source 325 right so 325 I

1712
01:43:35,189 --> 01:43:51,189
can remember that cast here so some 88 3

1713
01:43:44,649 --> 01:43:56,919
2005 and now we should have a stable

1714
01:43:51,189 --> 01:44:01,800
debug scenario where when we run this I

1715
01:43:56,918 --> 01:44:06,479
can look specifically at what happens

1716
01:44:01,800 --> 01:44:10,889
with that cast right

1717
01:44:06,479 --> 01:44:10,889
should I not recompile this I didn't

1718
01:44:11,069 --> 01:44:19,299
nope I just didn't type it in so what

1719
01:44:16,868 --> 01:44:21,788
I'm gonna do is assume I guess I'll save

1720
01:44:19,300 --> 01:44:24,099
this for next time but what I'm gonna do

1721
01:44:21,788 --> 01:44:26,648
is just now step through the code and

1722
01:44:24,099 --> 01:44:29,378
find out you know where is that getting

1723
01:44:26,649 --> 01:44:32,769
written in the spec map right because

1724
01:44:29,378 --> 01:44:36,149
you can see that's a hit right so we

1725
01:44:32,769 --> 01:44:39,369
should be able to loop through and watch

1726
01:44:36,149 --> 01:44:41,199
that get hit and why is that not

1727
01:44:39,368 --> 01:44:42,698
producing a light spike in that

1728
01:44:41,198 --> 01:44:47,198
direction because it's definitely not

1729
01:44:42,698 --> 01:44:52,358
right as we watch the spec map

1730
01:44:47,198 --> 01:44:56,678
propagates we never see a light in that

1731
01:44:52,359 --> 01:44:59,079
direction for whatever reason and we

1732
01:44:56,679 --> 01:45:04,269
don't have an explanation for that like

1733
01:44:59,078 --> 01:45:08,948
at all right so something's up and we

1734
01:45:04,269 --> 01:45:13,239
don't know what but yeah we should be

1735
01:45:08,948 --> 01:45:14,589
seeing that grow as this sample picks up

1736
01:45:13,238 --> 01:45:17,168
but you know that's not really what

1737
01:45:14,590 --> 01:45:18,309
we're seeing so I might call it there

1738
01:45:17,168 --> 01:45:20,349
for today because jabba have a lot of

1739
01:45:18,309 --> 01:45:21,820
more debugging to do I would like to do

1740
01:45:20,349 --> 01:45:24,000
one more thing before we exit someone

1741
01:45:21,819 --> 01:45:32,960
had asked on the github

1742
01:45:24,000 --> 01:45:36,000
I guess the flowing point mask so the

1743
01:45:32,960 --> 01:45:38,250
when we did this to get rid of nad

1744
01:45:36,000 --> 01:45:43,409
normals we have this set default FP

1745
01:45:38,250 --> 01:45:45,810
behavior right when we did this I guess

1746
01:45:43,409 --> 01:45:48,359
control mask in that way that both

1747
01:45:45,810 --> 01:45:51,500
Windows and Linux are absolutely

1748
01:45:48,359 --> 01:45:53,698
horrible about H files

1749
01:45:51,500 --> 01:45:56,189
apparently x windows just define

1750
01:45:53,698 --> 01:45:58,469
something called control mask not x11

1751
01:45:56,189 --> 01:46:00,029
control mass not X underscore L control

1752
01:45:58,469 --> 01:46:03,359
mass not underscore control ISO just

1753
01:46:00,029 --> 01:46:05,130
control mask because they were like we

1754
01:46:03,359 --> 01:46:08,460
don't care about you you should just use

1755
01:46:05,130 --> 01:46:09,840
you should just only use names we let

1756
01:46:08,460 --> 01:46:13,439
you use and control mask isn't one of

1757
01:46:09,840 --> 01:46:16,140
them so apparently we shouldn't use this

1758
01:46:13,439 --> 01:46:18,629
because people who compiled on Linux you

1759
01:46:16,140 --> 01:46:22,160
know just had problems with it so we can

1760
01:46:18,630 --> 01:46:26,909
change it to something else like that

1761
01:46:22,159 --> 01:46:28,680
and again that doesn't change the code

1762
01:46:26,909 --> 01:46:30,599
at all it just makes it so that x11

1763
01:46:28,680 --> 01:46:41,130
scrappy header files won't screw us up

1764
01:46:30,600 --> 01:46:42,570
right so when uplink could or had a good

1765
01:46:41,130 --> 01:46:43,980
suggestion I just happened against us

1766
01:46:42,569 --> 01:46:45,569
and we should probably do this as well

1767
01:46:43,979 --> 01:46:47,159
and the suggestion was to only have one

1768
01:46:45,569 --> 01:46:49,289
light source and I totally agree with

1769
01:46:47,159 --> 01:46:50,659
that we should do that lower that's

1770
01:46:49,289 --> 01:46:53,430
another thing we can do this really easy

1771
01:46:50,659 --> 01:46:54,988
because then we don't have to worry

1772
01:46:53,430 --> 01:46:56,520
about where things are hitting light

1773
01:46:54,988 --> 01:47:00,869
sources potentially so what I could do

1774
01:46:56,520 --> 01:47:03,360
is say yeah okay maybe we'll just use

1775
01:47:00,869 --> 01:47:07,590
the debug light source so what we'll do

1776
01:47:03,359 --> 01:47:10,139
is we'll go in here and say when we

1777
01:47:07,590 --> 01:47:12,800
generate the room we we won't actually

1778
01:47:10,140 --> 01:47:17,190
so those lamps like that we put in there

1779
01:47:12,800 --> 01:47:20,340
we won't actually put the the lights on

1780
01:47:17,189 --> 01:47:23,029
those lamps so these I can just get rid

1781
01:47:20,340 --> 01:47:23,029
of right

1782
01:47:25,229 --> 01:47:30,069
so now when we run there's like

1783
01:47:27,369 --> 01:47:34,239
literally only just that one light you

1784
01:47:30,069 --> 01:47:37,479
know and I can go back to the build

1785
01:47:34,239 --> 01:47:39,340
diffuse light Maps now to be fair

1786
01:47:37,479 --> 01:47:41,229
there's still multiple lights there's

1787
01:47:39,340 --> 01:47:43,329
lights on the enemies but they're not in

1788
01:47:41,229 --> 01:47:44,679
the world right now like like we haven't

1789
01:47:43,329 --> 01:47:47,350
hopped to where they are so they

1790
01:47:44,680 --> 01:47:49,150
shouldn't even be in the entity system

1791
01:47:47,350 --> 01:47:51,100
so hopefully that wouldn't cause any

1792
01:47:49,149 --> 01:47:54,279
problems because the lighting system

1793
01:47:51,100 --> 01:47:57,220
can't actually access those so if we do

1794
01:47:54,279 --> 01:47:58,989
let it grow the fast way just as a quick

1795
01:47:57,220 --> 01:48:03,640
check to see what information we get out

1796
01:47:58,989 --> 01:48:05,289
of it we can now run it and we now know

1797
01:48:03,640 --> 01:48:07,030
that any light that's coming from the

1798
01:48:05,289 --> 01:48:11,319
system should be coming from this light

1799
01:48:07,029 --> 01:48:14,170
it's the only one there is so here's the

1800
01:48:11,319 --> 01:48:18,340
results and again exactly like I said

1801
01:48:14,170 --> 01:48:21,069
it's it's nonsensical right all of the

1802
01:48:18,340 --> 01:48:24,460
lights are coming from this direction

1803
01:48:21,069 --> 01:48:28,179
out here when they all should be coming

1804
01:48:24,460 --> 01:48:31,930
from this direction over here so we've

1805
01:48:28,180 --> 01:48:34,390
you know we've got some fundamental bug

1806
01:48:31,930 --> 01:48:40,300
with how we're lining up directions and

1807
01:48:34,390 --> 01:48:41,950
if you'll recall I've said this dozens

1808
01:48:40,300 --> 01:48:43,869
of times on handmade here right now but

1809
01:48:41,949 --> 01:48:46,809
I'll say it one more time all of these

1810
01:48:43,869 --> 01:48:50,829
languages like the people keep talking

1811
01:48:46,810 --> 01:48:53,880
about like rust or whatever they're all

1812
01:48:50,829 --> 01:48:56,859
designed for catching errors that are so

1813
01:48:53,880 --> 01:48:59,380
asinine and uninteresting to me because

1814
01:48:56,859 --> 01:49:02,349
they never take any of my time and they

1815
01:48:59,380 --> 01:49:04,239
offer me literally nothing for actually

1816
01:49:02,350 --> 01:49:08,260
debugging hard problems or writing code

1817
01:49:04,239 --> 01:49:10,929
that doesn't have those indexing like

1818
01:49:08,260 --> 01:49:14,860
lining up indices and where things are

1819
01:49:10,930 --> 01:49:17,650
that is where 90% of my bugs come from

1820
01:49:14,859 --> 01:49:19,059
and I don't know for sure that what

1821
01:49:17,649 --> 01:49:21,159
we're looking at here is an indexing bug

1822
01:49:19,060 --> 01:49:27,160
but I bet you dollars to doughnuts that

1823
01:49:21,159 --> 01:49:30,029
it probably is and I really wish people

1824
01:49:27,159 --> 01:49:34,750
would stop thinking that like you know

1825
01:49:30,029 --> 01:49:36,639
accidentally using a output parameter as

1826
01:49:34,750 --> 01:49:40,590
an input parameter or vice versa

1827
01:49:36,640 --> 01:49:43,240
or something was like we're programming

1828
01:49:40,590 --> 01:49:46,239
it needs like where we need to focus our

1829
01:49:43,239 --> 01:49:48,039
time we're like forgetting which part of

1830
01:49:46,239 --> 01:49:50,979
the code owns what memory block it's

1831
01:49:48,039 --> 01:49:53,529
like these are things that like take

1832
01:49:50,979 --> 01:49:55,289
none of my time by comparison to stuff

1833
01:49:53,529 --> 01:49:57,880
like this which takes all of my time and

1834
01:49:55,289 --> 01:49:59,619
like it's just weird it's like we spend

1835
01:49:57,880 --> 01:50:03,600
all of this language development

1836
01:49:59,619 --> 01:50:05,859
opportunity just dealing trying to make

1837
01:50:03,600 --> 01:50:06,970
trying to eliminate bugs that only

1838
01:50:05,859 --> 01:50:08,829
programmers

1839
01:50:06,970 --> 01:50:12,280
I wouldn't want on my team make anyway

1840
01:50:08,829 --> 01:50:13,869
and like I wish at least somebody and

1841
01:50:12,279 --> 01:50:16,269
maybe John is the person who's doing

1842
01:50:13,869 --> 01:50:18,460
this right I wish we would spend more

1843
01:50:16,270 --> 01:50:20,050
time making languages that don't have

1844
01:50:18,460 --> 01:50:23,170
the kinds of bugs that advanced

1845
01:50:20,050 --> 01:50:25,390
programmers make right like what are the

1846
01:50:23,170 --> 01:50:27,670
word of the people who really program a

1847
01:50:25,390 --> 01:50:29,800
lot and know what they're doing they

1848
01:50:27,670 --> 01:50:32,529
still have a ton of bugs it's not like I

1849
01:50:29,800 --> 01:50:34,750
don't have a ton of bugs could somebody

1850
01:50:32,529 --> 01:50:35,920
please take a second and make a language

1851
01:50:34,750 --> 01:50:38,130
that tries to lean into kind of bugs

1852
01:50:35,920 --> 01:50:41,440
that I have not the kind of bugs that

1853
01:50:38,130 --> 01:50:43,239
you know people who haven't don't even

1854
01:50:41,439 --> 01:50:44,829
understand but what like allocating

1855
01:50:43,239 --> 01:50:48,130
memory does like we've never actually

1856
01:50:44,829 --> 01:50:49,869
called virtual Alec like I don't really

1857
01:50:48,130 --> 01:50:52,090
care about that there's so many

1858
01:50:49,869 --> 01:50:54,069
languages for those kinds of programmers

1859
01:50:52,090 --> 01:50:59,110
why is that the only thing anyone makes

1860
01:50:54,069 --> 01:51:00,519
you know so like I'm pretty sure this is

1861
01:50:59,109 --> 01:51:02,289
probably some new necks problem it's

1862
01:51:00,520 --> 01:51:05,140
probably just a problem because there's

1863
01:51:02,289 --> 01:51:07,989
so many indices right we are trying to

1864
01:51:05,140 --> 01:51:10,660
like create voxels at different scales

1865
01:51:07,989 --> 01:51:13,059
we're trying to create maps for the

1866
01:51:10,659 --> 01:51:14,979
light that we store and there's so many

1867
01:51:13,060 --> 01:51:23,320
indices and they're really hard to get

1868
01:51:14,979 --> 01:51:25,829
right and I feel like that's almost

1869
01:51:23,319 --> 01:51:30,609
certainly what we're seeing here right

1870
01:51:25,829 --> 01:51:33,819
like we are probably doing something

1871
01:51:30,609 --> 01:51:35,829
where we think we're recording light

1872
01:51:33,819 --> 01:51:37,599
that's coming from here but we're

1873
01:51:35,829 --> 01:51:41,010
actually saying that it's coming from

1874
01:51:37,600 --> 01:51:41,010
there you know

1875
01:51:53,479 --> 01:52:02,719
I mean it could be something else but

1876
01:51:57,488 --> 01:52:06,859
that's what it is you know I bet that's

1877
01:52:02,720 --> 01:52:09,800
what it is because it sure does look

1878
01:52:06,859 --> 01:52:14,269
like that is an overwhelmingly biased

1879
01:52:09,800 --> 01:52:17,390
light field it is all shooting you know

1880
01:52:14,270 --> 01:52:19,010
directly in that direction and so you

1881
01:52:17,390 --> 01:52:20,630
imagine if all of those were actually

1882
01:52:19,010 --> 01:52:22,280
pointing this way you'd actually just

1883
01:52:20,630 --> 01:52:25,489
think it was right you know what I mean

1884
01:52:22,279 --> 01:52:28,130
so it does seem like there is some ray

1885
01:52:25,488 --> 01:52:29,238
casting going on but it seems like

1886
01:52:28,130 --> 01:52:31,670
totally busted

1887
01:52:29,238 --> 01:52:33,319
what I will say is how the heck are

1888
01:52:31,670 --> 01:52:34,640
these guys getting those lights I guess

1889
01:52:33,319 --> 01:52:36,649
they're getting them by hitting the

1890
01:52:34,640 --> 01:52:40,340
ground and then interpolating from these

1891
01:52:36,649 --> 01:52:41,869
right which is a problem we're always

1892
01:52:40,340 --> 01:52:43,699
gonna have with this kind of scheme and

1893
01:52:41,869 --> 01:52:44,710
fortunately for this game I don't think

1894
01:52:43,699 --> 01:52:46,639
we have to care about it too much

1895
01:52:44,710 --> 01:52:49,550
because it'll probably be fine once we

1896
01:52:46,640 --> 01:52:51,619
work it out but even so right you can

1897
01:52:49,550 --> 01:52:55,880
you can tell this just totally busted

1898
01:52:51,619 --> 01:52:59,019
like because all of these should be

1899
01:52:55,880 --> 01:52:59,020
going kind of the opposite direction

1900
01:53:12,079 --> 01:53:15,640
all right so we're go to brief Q&amp;A

1901
01:53:29,380 --> 01:53:36,109
yeah I agree with trying to move the

1902
01:53:31,699 --> 01:53:38,119
light it would give us some some limited

1903
01:53:36,109 --> 01:53:43,069
information so we could see like what

1904
01:53:38,119 --> 01:53:46,250
the actual you know what the actual

1905
01:53:43,069 --> 01:53:49,489
transform was on it so for example if we

1906
01:53:46,250 --> 01:53:55,010
know that we're getting light that goes

1907
01:53:49,489 --> 01:53:57,500
in if we know that we're getting light

1908
01:53:55,010 --> 01:53:59,539
that goes in that direction and then we

1909
01:53:57,500 --> 01:54:02,060
just take the debug light and move it to

1910
01:53:59,539 --> 01:54:05,750
the side right so we could go into the

1911
01:54:02,060 --> 01:54:15,890
world mode and we look at the debug

1912
01:54:05,750 --> 01:54:18,529
light right so here I can just add like

1913
01:54:15,890 --> 01:54:20,539
a bunch of X to it right now the problem

1914
01:54:18,529 --> 01:54:22,039
is I have to keep it in bounds because I

1915
01:54:20,539 --> 01:54:24,100
can't move it outside of the lighting

1916
01:54:22,039 --> 01:54:28,579
system entirely but I can just like

1917
01:54:24,100 --> 01:54:30,230
slide it off to the side so now you know

1918
01:54:28,579 --> 01:54:37,119
if you look at where the the debug light

1919
01:54:30,229 --> 01:54:41,829
is it should be I guess that was too far

1920
01:54:37,119 --> 01:54:41,829
because I don't see it anymore right oh

1921
01:54:42,100 --> 01:54:48,680
is it just is it just embedded in some

1922
01:54:44,569 --> 01:54:50,920
geometry looks like it's just over there

1923
01:54:48,680 --> 01:54:50,920
maybe

1924
01:54:55,640 --> 01:55:02,340
so that's just getting that's just still

1925
01:54:59,789 --> 01:55:04,319
well I guess you know what it did shear

1926
01:55:02,340 --> 01:55:05,730
somewhat this direction let's see if by

1927
01:55:04,319 --> 01:55:08,159
pulling it back we can share it the

1928
01:55:05,729 --> 01:55:11,819
other direction right so let's suppose

1929
01:55:08,159 --> 01:55:13,559
we set it this way and again I don't

1930
01:55:11,819 --> 01:55:15,269
know if it's still in bounds but let's

1931
01:55:13,560 --> 01:55:27,480
see if we bend it to the to the right

1932
01:55:15,270 --> 01:55:31,590
there huh

1933
01:55:27,479 --> 01:55:35,339
so no it's but it did change direction

1934
01:55:31,590 --> 01:55:39,360
right so actually moving it this way

1935
01:55:35,340 --> 01:55:41,760
slid things that way and again the

1936
01:55:39,359 --> 01:55:45,479
octahedral map is packed in a sort of

1937
01:55:41,760 --> 01:55:47,579
odd way right so you can imagine like

1938
01:55:45,479 --> 01:55:51,629
that being a case what I would say too

1939
01:55:47,579 --> 01:55:54,569
though is there's there's more here than

1940
01:55:51,630 --> 01:55:58,500
just that because this also seems

1941
01:55:54,569 --> 01:56:00,599
erroneous in other ways because how

1942
01:55:58,500 --> 01:56:04,170
would you be hitting this light from

1943
01:56:00,600 --> 01:56:05,130
here at all like that doesn't make a

1944
01:56:04,170 --> 01:56:07,409
whole lot of sense

1945
01:56:05,130 --> 01:56:11,699
maybe it's interpolated from here but

1946
01:56:07,409 --> 01:56:13,769
that's a bit of a stretch right so I

1947
01:56:11,699 --> 01:56:19,069
don't know so I feel like there's some

1948
01:56:13,770 --> 01:56:26,610
deeper problem going on there than just

1949
01:56:19,069 --> 01:56:29,429
maybe that it's that it's incorrectly

1950
01:56:26,609 --> 01:56:30,929
placed like I think there's maybe you

1951
01:56:29,430 --> 01:56:34,440
know a little bit yeah a little bit

1952
01:56:30,930 --> 01:56:38,119
deeper I don't know I'm not convinced

1953
01:56:34,439 --> 01:56:38,119
that it's as simple as that right

1954
01:56:44,689 --> 01:56:47,989
let's see

1955
01:57:02,310 --> 01:57:08,170
one of their two litters in the map with

1956
01:57:04,689 --> 01:57:10,809
only one light source well first of all

1957
01:57:08,170 --> 01:57:12,789
the lighting is buggy right now that's

1958
01:57:10,810 --> 01:57:15,220
what we're working on so part of it

1959
01:57:12,789 --> 01:57:18,970
might be that but I don't know that

1960
01:57:15,220 --> 01:57:21,579
there really are though if you're

1961
01:57:18,970 --> 01:57:27,190
talking about that that's just because

1962
01:57:21,579 --> 01:57:29,979
that's just the the the graphics card is

1963
01:57:27,189 --> 01:57:32,829
not being told to do anything when the

1964
01:57:29,979 --> 01:57:34,299
lighting sample area is out of bounds so

1965
01:57:32,829 --> 01:57:37,149
this is the only place you'd be able to

1966
01:57:34,300 --> 01:57:38,800
see in the game this just tiles

1967
01:57:37,149 --> 01:57:40,149
throughout the universe so you just see

1968
01:57:38,800 --> 01:57:41,949
there'd be another one over here another

1969
01:57:40,149 --> 01:57:44,379
one over here right but you can never

1970
01:57:41,949 --> 01:57:47,050
see over there and by the time we move

1971
01:57:44,380 --> 01:57:48,130
over there you know we will have updated

1972
01:57:47,050 --> 01:57:50,560
things now of course the lighting system

1973
01:57:48,130 --> 01:57:52,090
is frozen in place but by the time we

1974
01:57:50,560 --> 01:57:53,680
actually are looking at this area then

1975
01:57:52,090 --> 01:57:55,690
if we started to run it you can see that

1976
01:57:53,680 --> 01:57:57,430
it would you know actually only be doing

1977
01:57:55,689 --> 01:58:00,189
the lighting for this region and then

1978
01:57:57,430 --> 01:58:02,590
you would see that region is copied you

1979
01:58:00,189 --> 01:58:05,289
know around so that's just actually

1980
01:58:02,590 --> 01:58:06,670
because we don't we only simulate

1981
01:58:05,289 --> 01:58:10,060
lighting at the area that you're looking

1982
01:58:06,670 --> 01:58:13,029
at and if you look at in the debug mode

1983
01:58:10,060 --> 01:58:15,190
you can see stuff that's kind of further

1984
01:58:13,029 --> 01:58:18,250
than that and that's where that comes

1985
01:58:15,189 --> 01:58:20,559
from so I don't think we have any bugs

1986
01:58:18,250 --> 01:58:22,060
actually that have to do with that so I

1987
01:58:20,560 --> 01:58:23,920
think that's if that's you're talking

1988
01:58:22,060 --> 01:58:25,480
about that's that's all that is the bug

1989
01:58:23,920 --> 01:58:27,430
that we have at the moment is for the

1990
01:58:25,479 --> 01:58:30,969
grid based ray casting we just don't

1991
01:58:27,430 --> 01:58:32,650
seem to have any real coherence and what

1992
01:58:30,970 --> 01:58:37,420
the maps actually producing which is a

1993
01:58:32,649 --> 01:58:39,069
little bit odd I'm not sure one thing

1994
01:58:37,420 --> 01:58:41,409
that occurred to me just now that I

1995
01:58:39,069 --> 01:58:43,960
hadn't thought up before is since we can

1996
01:58:41,409 --> 01:58:47,139
use the lighting grid if we since we can

1997
01:58:43,960 --> 01:58:50,279
not use the lighting grid I wonder what

1998
01:58:47,140 --> 01:58:54,310
happens if we just use the AABB test or

1999
01:58:50,279 --> 01:58:58,269
instead because that would let us debug

2000
01:58:54,310 --> 01:59:02,710
the debug drawing which could also be

2001
01:58:58,270 --> 01:59:05,620
wrong right so if we do this which is a

2002
01:59:02,710 --> 01:59:08,590
correct lighting slew

2003
01:59:05,619 --> 01:59:13,229
okay so basically our debug drawing is

2004
01:59:08,590 --> 01:59:16,050
wrong right because look

2005
01:59:13,229 --> 01:59:18,089
this is the correct lighting right this

2006
01:59:16,050 --> 01:59:19,980
is what we would expect to see and then

2007
01:59:18,090 --> 01:59:22,500
we come out here and we can do stuff and

2008
01:59:19,979 --> 01:59:24,869
yeah so using the eight you know if we

2009
01:59:22,500 --> 01:59:25,948
don't use the grid we get reasonable

2010
01:59:24,869 --> 01:59:28,170
lighting and those things are in the

2011
01:59:25,948 --> 01:59:29,909
wrong place let me actually go to the

2012
01:59:28,170 --> 01:59:37,250
world mode here real quick and turn off

2013
01:59:29,909 --> 01:59:40,800
the the f9 key press so let's just say

2014
01:59:37,250 --> 01:59:43,859
that it's always updating so if we set

2015
01:59:40,800 --> 01:59:46,020
it to always updating and now we run we

2016
01:59:43,859 --> 01:59:47,609
should be able to like tune I don't know

2017
01:59:46,020 --> 01:59:50,160
I didn't think its before we should be

2018
01:59:47,609 --> 01:59:52,799
able to tune our debug lighting here so

2019
01:59:50,159 --> 01:59:55,439
that we actually see this doing the

2020
01:59:52,800 --> 01:59:59,699
correct thing as we move throughout the

2021
01:59:55,439 --> 02:00:02,448
world right and so let's just see what

2022
01:59:59,698 --> 02:00:04,349
did we screw up so that that was

2023
02:00:02,448 --> 02:00:07,439
excellent I don't know why I didn't

2024
02:00:04,350 --> 02:00:12,420
think of that before so if I look at

2025
02:00:07,439 --> 02:00:16,669
debug dropped a huge L values here this

2026
02:00:12,420 --> 02:00:21,659
is doing something dumb question is what

2027
02:00:16,670 --> 02:00:22,529
so here it is doing the center we assume

2028
02:00:21,659 --> 02:00:25,979
that's correct

2029
02:00:22,529 --> 02:00:27,779
because we don't really we probably

2030
02:00:25,979 --> 02:00:30,869
aren't looking at the wrong place I

2031
02:00:27,779 --> 02:00:33,179
don't know I don't think we are and then

2032
02:00:30,869 --> 02:00:34,710
we're just looping over the txt Y values

2033
02:00:33,179 --> 02:00:37,190
and asking this to draw them so

2034
02:00:34,710 --> 02:00:39,289
presumably if there's a bug it's in here

2035
02:00:37,189 --> 02:00:42,059
presumably

2036
02:00:39,289 --> 02:00:44,719
if I go over to debug draw color here

2037
02:00:42,060 --> 02:00:51,060
and we look at what we're passing right

2038
02:00:44,719 --> 02:00:53,369
oops and we look at the indices we say

2039
02:00:51,060 --> 02:00:57,090
okay I want to get the tile unclamp for

2040
02:00:53,369 --> 02:01:00,269
the X Y Z T X 2y that could obviously be

2041
02:00:57,090 --> 02:01:02,520
wrong so we want to look at that and we

2042
02:01:00,270 --> 02:01:05,640
also have the direction from T X D Y and

2043
02:01:02,520 --> 02:01:06,719
that could also be wrong right the rest

2044
02:01:05,640 --> 02:01:08,100
of this is pretty straight forward and

2045
02:01:06,719 --> 02:01:10,739
probably couldn't produce a directional

2046
02:01:08,100 --> 02:01:13,469
change so let's take a look at direction

2047
02:01:10,738 --> 02:01:15,899
from 2 X to Y now that just wants the Oh

2048
02:01:13,469 --> 02:01:20,630
X Y coefficient we don't know

2049
02:01:15,899 --> 02:01:20,629
necessarily that this is right I guess

2050
02:01:22,840 --> 02:01:29,680
I guess we should probably try to test

2051
02:01:27,189 --> 02:01:33,460
it more thoroughly I mean I guess we can

2052
02:01:29,680 --> 02:01:35,289
do that I thought we did though but we

2053
02:01:33,460 --> 02:01:37,329
could test it more thoroughly but we are

2054
02:01:35,289 --> 02:01:38,859
passing the X Y coefficient which is the

2055
02:01:37,329 --> 02:01:40,809
only real requirement and then we have

2056
02:01:38,859 --> 02:01:43,449
the 2x and 2y there they are offset by

2057
02:01:40,810 --> 02:01:48,070
one properly which is what we're seeing

2058
02:01:43,449 --> 02:01:50,949
here so it doesn't seem weird if I go to

2059
02:01:48,069 --> 02:01:55,090
get tile unclamped which is another

2060
02:01:50,949 --> 02:01:58,899
story all together in in get tile

2061
02:01:55,090 --> 02:02:00,640
unclamped you can see I've got the x y&amp;z

2062
02:01:58,899 --> 02:02:03,159
coming in here which I checked to make

2063
02:02:00,640 --> 02:02:06,280
sure it's not out of bounds which seems

2064
02:02:03,159 --> 02:02:09,309
good we then take the TX in the T Y and

2065
02:02:06,279 --> 02:02:12,099
we go to grab those by getting late exit

2066
02:02:09,310 --> 02:02:17,890
at texels computing the offset from them

2067
02:02:12,100 --> 02:02:22,360
right and then returning that value now

2068
02:02:17,890 --> 02:02:24,550
the light Atlas offset I suppose could

2069
02:02:22,359 --> 02:02:27,179
itself be wrong like this could be wrong

2070
02:02:24,550 --> 02:02:27,180
I guess

2071
02:02:35,890 --> 02:02:46,880
but it doesn't seem likely so it's it's

2072
02:02:43,760 --> 02:02:51,940
kind of gotta be sort of correct in the

2073
02:02:46,880 --> 02:02:51,940
sense that it's definitive though like

2074
02:03:03,439 --> 02:03:07,189
so I'm assuming

2075
02:03:12,238 --> 02:03:17,789
yeah I don't know like it's being used

2076
02:03:15,539 --> 02:03:20,130
for everything anyway so I'm not sure

2077
02:03:17,789 --> 02:03:28,649
that we could have really had much of a

2078
02:03:20,130 --> 02:03:31,100
bug with it so it's kind of confusing I

2079
02:03:28,649 --> 02:03:31,099
don't know

2080
02:03:41,869 --> 02:03:46,458
[Music]

2081
02:03:43,988 --> 02:03:48,828
hmm-hmm-hmm well at least we now know

2082
02:03:46,458 --> 02:03:50,328
though that this this is to blame but it

2083
02:03:48,828 --> 02:03:52,788
could be that we've got a bug in

2084
02:03:50,328 --> 02:03:54,228
direction from txt why and if we did

2085
02:03:52,788 --> 02:03:56,859
that would also mean that there's

2086
02:03:54,229 --> 02:03:59,749
problems with our generator as well

2087
02:03:56,859 --> 02:04:08,779
which could be important because I

2088
02:03:59,748 --> 02:04:16,029
believe that that gets used so in the h8

2089
02:04:08,779 --> 02:04:16,029
sphere right so when we actually do the

2090
02:04:16,090 --> 02:04:25,099
generator octahedral lighting pattern we

2091
02:04:18,679 --> 02:04:37,340
use direction from txt Y now what I

2092
02:04:25,099 --> 02:04:44,958
would assume direction that's in the

2093
02:04:37,340 --> 02:04:50,989
debug that's in debug that is in a

2094
02:04:44,958 --> 02:04:53,538
routine we haven't verified right so I

2095
02:04:50,988 --> 02:04:56,569
guess what I would say is this is highly

2096
02:04:53,538 --> 02:04:59,618
suspect right so I wonder if our

2097
02:04:56,569 --> 02:05:05,840
direction from txt Y code is actually

2098
02:04:59,618 --> 02:05:09,259
wrong because if it was that would make

2099
02:05:05,840 --> 02:05:11,269
a lot of sense right because then we

2100
02:05:09,260 --> 02:05:14,269
also would have directional errors in

2101
02:05:11,269 --> 02:05:17,539
our sampler only in the grid ray caster

2102
02:05:14,269 --> 02:05:20,869
and not in the a B because the a BB

2103
02:05:17,538 --> 02:05:23,899
doesn't use a table that builds that

2104
02:05:20,868 --> 02:05:26,649
does it or Mel no it does nevermind so

2105
02:05:23,899 --> 02:05:26,649
they both use that

2106
02:05:30,458 --> 02:05:34,099
so they both do use that so I guess

2107
02:05:32,779 --> 02:05:35,569
that's not as suspicious

2108
02:05:34,099 --> 02:05:40,550
I stand to say I thought it was only in

2109
02:05:35,569 --> 02:05:44,658
those places so I don't know I don't

2110
02:05:40,550 --> 02:05:45,498
know that's that's pretty confusing to

2111
02:05:44,658 --> 02:05:47,509
me

2112
02:05:45,498 --> 02:05:50,988
I don't immediately see what the problem

2113
02:05:47,510 --> 02:05:52,219
is there and like I said I might I might

2114
02:05:50,988 --> 02:05:57,049
say this until next time because it

2115
02:05:52,219 --> 02:05:59,590
looks like I have to to move in move

2116
02:05:57,050 --> 02:05:59,590
into it right

2117
02:06:08,380 --> 02:06:20,708
so yeah I would like to see what

2118
02:06:12,649 --> 02:06:20,709
direction it is going yeah and end like

2119
02:06:27,399 --> 02:06:35,559
and like if you look at it it's pretty

2120
02:06:33,220 --> 02:06:38,079
bizarre too because it doesn't seem to

2121
02:06:35,560 --> 02:06:39,520
be super obvious what the transfer

2122
02:06:38,079 --> 02:06:40,930
between the two are which I guess is

2123
02:06:39,520 --> 02:06:41,920
what you'd expect with an octahedral map

2124
02:06:40,930 --> 02:06:45,369
because in octave yield map was kind of

2125
02:06:41,920 --> 02:06:47,079
a somewhat difficult to immediately

2126
02:06:45,369 --> 02:06:49,359
intuit packing and it's easy to see how

2127
02:06:47,079 --> 02:06:51,100
it's packed but your brain doesn't

2128
02:06:49,359 --> 02:06:53,739
necessarily unwrap things octahedrally

2129
02:06:51,100 --> 02:06:56,380
very quickly but like you can see here

2130
02:06:53,739 --> 02:06:57,969
right if I move around let me let me go

2131
02:06:56,380 --> 02:06:59,140
maybe to an area where I can move around

2132
02:06:57,970 --> 02:07:10,810
more freely where there aren't as many

2133
02:06:59,140 --> 02:07:13,680
walls so here if I kind of look at the

2134
02:07:10,810 --> 02:07:13,680
way this is going

2135
02:07:18,140 --> 02:07:25,430
like what it just doesn't make any sense

2136
02:07:22,039 --> 02:07:27,920
it's really really strange so it's like

2137
02:07:25,430 --> 02:07:29,210
it does seem just totally broken because

2138
02:07:27,920 --> 02:07:31,489
like why would it

2139
02:07:29,210 --> 02:07:34,760
why would I suddenly be getting a bunch

2140
02:07:31,489 --> 02:07:38,029
of light showing up over here right

2141
02:07:34,760 --> 02:07:39,920
which by the way I'm not singing so like

2142
02:07:38,029 --> 02:07:41,960
if you look I'm not actually seeing it

2143
02:07:39,920 --> 02:07:44,930
there so I don't know is is it possible

2144
02:07:41,960 --> 02:07:48,199
that the X Y Z's are wrong somehow that

2145
02:07:44,930 --> 02:07:49,430
our input to this like I mean I don't

2146
02:07:48,199 --> 02:07:53,349
know that's the only thing I can think

2147
02:07:49,430 --> 02:07:57,619
of that would be like kind of in that

2148
02:07:53,350 --> 02:08:03,829
same general ballpark right I got my a

2149
02:07:57,619 --> 02:08:05,949
mine now I don't know um debug there we

2150
02:08:03,829 --> 02:08:05,949
go

2151
02:08:17,189 --> 02:08:32,349
so I guess I don't quite know it's

2152
02:08:30,878 --> 02:08:34,149
pretty difficult to it's pretty

2153
02:08:32,349 --> 02:08:36,309
difficult to guess I don't actually know

2154
02:08:34,149 --> 02:08:37,989
I think I'm gonna need more time like I

2155
02:08:36,309 --> 02:08:41,110
said so I'm probably gonna call it there

2156
02:08:37,988 --> 02:08:48,428
and we'll take a look but you know yeah

2157
02:08:41,109 --> 02:08:50,438
like this we could re-enable we had some

2158
02:08:48,429 --> 02:08:53,609
assertions in here too I think I don't

2159
02:08:50,439 --> 02:08:56,769
think we use them anymore but we could

2160
02:08:53,609 --> 02:08:59,679
let the light Atlas asserts like you

2161
02:08:56,769 --> 02:09:01,539
know check our bounds again but I don't

2162
02:08:59,679 --> 02:09:02,979
actually think we're picking things that

2163
02:09:01,538 --> 02:09:04,719
are out of bounds we're probably picking

2164
02:09:02,979 --> 02:09:09,128
things that are wrong would be you know

2165
02:09:04,719 --> 02:09:13,510
my guess I don't know though like you

2166
02:09:09,128 --> 02:09:15,069
know for I could see us like passing XY

2167
02:09:13,510 --> 02:09:17,550
z-- and Z's in the wrong order or

2168
02:09:15,069 --> 02:09:17,549
something like that

2169
02:09:20,829 --> 02:09:29,649
I don't know yeah I don't know it's it's

2170
02:09:27,640 --> 02:09:31,930
tough to say but I guess what I would

2171
02:09:29,649 --> 02:09:33,460
say here is like the we could re enable

2172
02:09:31,930 --> 02:09:37,210
this assert so we could just say look

2173
02:09:33,460 --> 02:09:44,380
you know it's light Atlas assert or I

2174
02:09:37,210 --> 02:09:46,270
guess I could do it like this oops and

2175
02:09:44,380 --> 02:09:50,590
that would just force it to actually do

2176
02:09:46,270 --> 02:09:52,810
an assertion there just in case I mean

2177
02:09:50,590 --> 02:09:58,750
like I said I don't think we'd actually

2178
02:09:52,810 --> 02:09:59,680
get one yeah we don't but yeah I just

2179
02:09:58,750 --> 02:10:01,359
think it's gonna take too long so I

2180
02:09:59,680 --> 02:10:03,760
think I'll save that for next time but

2181
02:10:01,359 --> 02:10:06,639
at least we kind of know like alright so

2182
02:10:03,760 --> 02:10:07,989
our debug drawing was wrong and that

2183
02:10:06,640 --> 02:10:10,480
means like some of our routines are

2184
02:10:07,989 --> 02:10:12,519
wrong so we can go try to verify some of

2185
02:10:10,479 --> 02:10:14,559
those routines and it actually wouldn't

2186
02:10:12,520 --> 02:10:18,940
be hard to make something that was like

2187
02:10:14,560 --> 02:10:21,280
a unit test of just those two math

2188
02:10:18,939 --> 02:10:22,989
routines right so while there's really

2189
02:10:21,279 --> 02:10:26,409
no way we can test the lighting system

2190
02:10:22,989 --> 02:10:28,750
with a test that would really work we

2191
02:10:26,409 --> 02:10:31,599
could test just the octahedral indexing

2192
02:10:28,750 --> 02:10:32,680
in and out and try to bulletproof that a

2193
02:10:31,600 --> 02:10:34,120
little bit so there are some things we

2194
02:10:32,680 --> 02:10:39,329
could do there and maybe that's like a

2195
02:10:34,119 --> 02:10:39,329
good next step for example all right

2196
02:11:02,119 --> 02:11:08,880
push debug line parameter order hmm you

2197
02:11:06,869 --> 02:11:14,430
know what that's not a bad suggestion I

2198
02:11:08,880 --> 02:11:24,119
don't I don't know that we it seems

2199
02:11:14,430 --> 02:11:28,289
unlikely but yeah you know could be so

2200
02:11:24,119 --> 02:11:31,590
if I go to debug draw larger you know

2201
02:11:28,289 --> 02:11:34,949
maybe it is that would be great but yeah

2202
02:11:31,590 --> 02:11:37,890
it's it's not right because the color is

2203
02:11:34,949 --> 02:11:40,319
the last value and you know here's the

2204
02:11:37,890 --> 02:11:48,480
center peep in the center p+ skew

2205
02:11:40,319 --> 02:11:52,819
intensity der so you know it's a bummer

2206
02:11:48,479 --> 02:11:52,819
right but it's alright

2207
02:11:57,590 --> 02:12:08,279
see if there are any other suggestions

2208
02:11:59,550 --> 02:12:10,610
for we sign-off direction inverted um it

2209
02:12:08,279 --> 02:12:14,059
doesn't look like it's inverted to me

2210
02:12:10,609 --> 02:12:16,259
does it look like it's inverted to you

2211
02:12:14,060 --> 02:12:18,480
because if it was inverted I would

2212
02:12:16,260 --> 02:12:20,400
expect to see it counter rotate with me

2213
02:12:18,479 --> 02:12:23,069
you know like if I move over here I

2214
02:12:20,399 --> 02:12:35,309
expect to see it start going that way

2215
02:12:23,069 --> 02:12:39,149
but it's really not doing that and oddly

2216
02:12:35,310 --> 02:12:41,010
enough it seems to like you know it's

2217
02:12:39,149 --> 02:12:43,349
weird it's it's just very strange I'm

2218
02:12:41,010 --> 02:12:46,199
not sure what I'm not really sure what's

2219
02:12:43,350 --> 02:12:50,329
going on here it's very absorbed but at

2220
02:12:46,199 --> 02:12:54,630
least we have a visualization that we

2221
02:12:50,329 --> 02:12:58,260
can now align to an actual versions

2222
02:12:54,630 --> 02:12:59,609
that's roughly working so we should be

2223
02:12:58,260 --> 02:13:01,320
able to debug this and get this to the

2224
02:12:59,609 --> 02:13:04,519
point where whatever the weird thing is

2225
02:13:01,319 --> 02:13:04,519
that we obviously screwed up

2226
02:13:12,619 --> 02:13:21,809
it just yeah it just looks weird

2227
02:13:19,859 --> 02:13:28,949
and if you look at what's going on here

2228
02:13:21,810 --> 02:13:30,870
too you know it's like I don't understa

2229
02:13:28,949 --> 02:13:34,229
be seeing it coming down here you know I

2230
02:13:30,869 --> 02:13:37,949
don't know it's very odd it's not right

2231
02:13:34,229 --> 02:13:39,479
I don't know how direction TX from T Y

2232
02:13:37,949 --> 02:13:41,899
direction from takes to you I could be

2233
02:13:39,479 --> 02:13:41,899
wrong though

2234
02:14:06,689 --> 02:14:12,889
I don't know

2235
02:14:28,109 --> 02:14:38,319
does this not pass through the thing we

2236
02:14:30,520 --> 02:14:41,520
did for having the 3d texture oh I see

2237
02:14:38,319 --> 02:14:46,269
no we don't tilt the line in the shader

2238
02:14:41,520 --> 02:14:52,389
these lines are just drawn directly far

2239
02:14:46,270 --> 02:14:53,889
as I know so yeah I don't know I think

2240
02:14:52,389 --> 02:14:57,159
we're just gonna have to spend another

2241
02:14:53,889 --> 02:14:59,289
serious debug session on it which is

2242
02:14:57,158 --> 02:15:03,069
fair like I said it's very complicated

2243
02:14:59,289 --> 02:15:06,369
code so it's gonna take a while to get

2244
02:15:03,069 --> 02:15:07,899
to but we'll get there

2245
02:15:06,369 --> 02:15:09,639
you can always break it down into

2246
02:15:07,899 --> 02:15:17,589
smaller pieces and then test those

2247
02:15:09,639 --> 02:15:18,639
pieces so alright thank you everyone for

2248
02:15:17,590 --> 02:15:19,960
joining me for the episode of hand made

2249
02:15:18,639 --> 02:15:21,940
here it's my pleasure coding with you as

2250
02:15:19,960 --> 02:15:23,319
always if you would like to follow along

2251
02:15:21,939 --> 02:15:24,969
with the series at home you can always

2252
02:15:23,319 --> 02:15:27,189
pre-order the game at hand made here org

2253
02:15:24,969 --> 02:15:30,489
and it comes with source code so you can

2254
02:15:27,189 --> 02:15:32,710
follow along with it assuming that my

2255
02:15:30,488 --> 02:15:34,839
voice isn't having troubles as it has

2256
02:15:32,710 --> 02:15:36,939
been I will be back here next week and

2257
02:15:34,840 --> 02:15:40,119
if it is I might take some time off to

2258
02:15:36,939 --> 02:15:41,678
let it rest we'll see nobody seems to

2259
02:15:40,119 --> 02:15:44,500
really quite know what's wrong with it

2260
02:15:41,679 --> 02:15:48,639
so I'm not sure how to give a forecast

2261
02:15:44,500 --> 02:15:52,000
on it but that's it for today I will see

2262
02:15:48,639 --> 02:15:53,590
you all back here next weekend assuming

2263
02:15:52,000 --> 02:15:54,550
all goes well and until then have fun

2264
02:15:53,590 --> 02:15:57,810
programming I'll see you ever on the

2265
02:15:54,550 --> 02:15:57,810
Internet particular buddy

