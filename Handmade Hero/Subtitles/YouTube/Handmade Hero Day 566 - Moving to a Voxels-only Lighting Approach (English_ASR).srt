1
00:00:01,879 --> 00:00:07,259
all righty hello everyone and welcome to

2
00:00:05,700 --> 00:00:10,410
handmade Hiro sure we code a complete

3
00:00:07,259 --> 00:00:13,650
game live on stream what I would like to

4
00:00:10,410 --> 00:00:16,320
say today is we are trying streaming

5
00:00:13,650 --> 00:00:18,480
from a new location today the the

6
00:00:16,320 --> 00:00:20,160
streaming setup has been moved so

7
00:00:18,480 --> 00:00:21,778
hopefully we don't have any problems it

8
00:00:20,160 --> 00:00:23,189
seemed to be solid during the pre stream

9
00:00:21,778 --> 00:00:24,618
it looks like it's streaming at 30

10
00:00:23,189 --> 00:00:27,929
frames a second with no dropped frames

11
00:00:24,618 --> 00:00:30,719
so hopefully everything is fine if it's

12
00:00:27,929 --> 00:00:32,308
not fine we'll have to address that

13
00:00:30,719 --> 00:00:36,359
after the stream I guess so we're just

14
00:00:32,308 --> 00:00:41,189
gonna go full pull and cross our fingers

15
00:00:36,359 --> 00:00:43,439
here that nothing goes awry if you

16
00:00:41,189 --> 00:00:47,750
remember from last time where we were at

17
00:00:43,439 --> 00:00:47,750
on the programming front oops

18
00:00:48,590 --> 00:00:55,680
try that one more time where we were at

19
00:00:52,590 --> 00:00:57,809
on the programming front we had sort of

20
00:00:55,679 --> 00:00:59,878
you know this is where it would be nice

21
00:00:57,808 --> 00:01:02,608
if I was completely caught up on all of

22
00:00:59,878 --> 00:01:04,048
the graphics literature because honestly

23
00:01:02,609 --> 00:01:06,900
we did something I've actually never

24
00:01:04,049 --> 00:01:08,790
seen before I've never seen anyone

25
00:01:06,900 --> 00:01:13,140
talking about this so it was kind of

26
00:01:08,790 --> 00:01:15,150
interesting and and neat we developed a

27
00:01:13,140 --> 00:01:16,650
scheme for interpolating lighting that

28
00:01:15,150 --> 00:01:18,570
allows us to interpolate lighting on a

29
00:01:16,650 --> 00:01:23,159
very low resolution grid but still get

30
00:01:18,569 --> 00:01:25,769
perfect spherical lighting fall-off so

31
00:01:23,159 --> 00:01:27,840
if you look at our test pattern here you

32
00:01:25,769 --> 00:01:31,709
can see that it appears like we have

33
00:01:27,840 --> 00:01:35,250
effectively infinite resolution on our

34
00:01:31,709 --> 00:01:38,489
spherical lights the actual voxel we are

35
00:01:35,250 --> 00:01:41,549
using is incredibly sparse it's like one

36
00:01:38,489 --> 00:01:44,419
per like one of these tiles right and

37
00:01:41,549 --> 00:01:46,860
yet we get this perfect fall-off and

38
00:01:44,420 --> 00:01:48,930
that's just because we invented on

39
00:01:46,859 --> 00:01:50,938
stream a different way of interpolating

40
00:01:48,930 --> 00:01:53,159
the lighting based on signed distance

41
00:01:50,938 --> 00:01:55,739
fields that I'm quite sure someone has

42
00:01:53,159 --> 00:01:57,299
probably invented before us we're

43
00:01:55,739 --> 00:02:00,328
probably not first but it was pretty

44
00:01:57,299 --> 00:02:03,210
exciting to do it anyway and so that's

45
00:02:00,328 --> 00:02:05,099
where we left off and using the

46
00:02:03,209 --> 00:02:07,408
knowledge of that what I'm hoping to do

47
00:02:05,099 --> 00:02:11,098
now is switch sides because it you know

48
00:02:07,409 --> 00:02:14,050
pretty clearly now at least in theory we

49
00:02:11,098 --> 00:02:16,349
could use this light field

50
00:02:14,050 --> 00:02:18,640
interpolation that we've got here to

51
00:02:16,349 --> 00:02:20,019
push a lot of good lighting into the

52
00:02:18,639 --> 00:02:23,829
system and have it be interpolated

53
00:02:20,020 --> 00:02:25,780
in theory right in broad theory meaning

54
00:02:23,830 --> 00:02:27,969
like hypothetically speaking if we do a

55
00:02:25,780 --> 00:02:31,870
good job with it then we could write and

56
00:02:27,969 --> 00:02:34,479
the only question is with this

57
00:02:31,870 --> 00:02:36,310
interpolation scheme that we have how

58
00:02:34,479 --> 00:02:38,829
easy is it to actually generate

59
00:02:36,310 --> 00:02:41,319
something that can be used with that

60
00:02:38,830 --> 00:02:42,790
scheme so if you know you know if you

61
00:02:41,319 --> 00:02:44,349
just want to do cheese lighting like

62
00:02:42,789 --> 00:02:46,419
we've got in there right now you know

63
00:02:44,349 --> 00:02:48,340
you can see I'm just literally feeding

64
00:02:46,419 --> 00:02:50,889
in four spheres you know you can kind of

65
00:02:48,340 --> 00:02:53,259
see it here there's a red sphere a blue

66
00:02:50,889 --> 00:02:56,619
sphere a green sphere and a white sphere

67
00:02:53,259 --> 00:02:59,229
of lighting and I'm literally just

68
00:02:56,620 --> 00:03:01,450
dumping those spheres in and setting the

69
00:02:59,229 --> 00:03:02,859
lighting and what that means is you know

70
00:03:01,449 --> 00:03:05,229
you get none of the nice lighting

71
00:03:02,860 --> 00:03:06,580
effects you would get if you actually do

72
00:03:05,229 --> 00:03:09,519
some light transport which is what we

73
00:03:06,580 --> 00:03:11,890
want you can see like the way that we

74
00:03:09,520 --> 00:03:13,719
have this setup here right you can see

75
00:03:11,889 --> 00:03:15,549
that the light transport allows the

76
00:03:13,719 --> 00:03:17,500
green sphere to go right on through the

77
00:03:15,550 --> 00:03:19,390
wall so it's not like we've got a point

78
00:03:17,500 --> 00:03:21,340
light here that actually is like gonna

79
00:03:19,389 --> 00:03:23,919
get shadowed and you also don't get a

80
00:03:21,340 --> 00:03:25,599
new bounce right so you know a green

81
00:03:23,919 --> 00:03:27,189
light over here would bounce off of this

82
00:03:25,599 --> 00:03:30,609
and you'd get more green over here or

83
00:03:27,189 --> 00:03:33,520
something right so just generally

84
00:03:30,610 --> 00:03:34,900
speaking you know this this doesn't

85
00:03:33,520 --> 00:03:36,130
produce any we're not doing any light

86
00:03:34,900 --> 00:03:37,539
transfer it's dumping stairs and his

87
00:03:36,129 --> 00:03:39,639
test fears you can see we can

88
00:03:37,539 --> 00:03:41,879
interpolate those test lights perfectly

89
00:03:39,639 --> 00:03:44,349
because we happen to know exactly how

90
00:03:41,879 --> 00:03:46,030
the light goes it's a perfect sphere

91
00:03:44,349 --> 00:03:50,439
fall off so it's trivial to put an

92
00:03:46,030 --> 00:03:54,969
analytic answer in there right but the

93
00:03:50,439 --> 00:03:57,129
problem we get now is we need to somehow

94
00:03:54,969 --> 00:03:59,139
take light transport into effect and

95
00:03:57,129 --> 00:04:01,810
when we compute that light transport

96
00:03:59,139 --> 00:04:04,839
transport it's not obvious necessarily

97
00:04:01,810 --> 00:04:07,780
how we would go about translating a

98
00:04:04,840 --> 00:04:09,459
light transport results computed it's a

99
00:04:07,780 --> 00:04:13,780
like a number of probes like this or

100
00:04:09,459 --> 00:04:15,959
whatever how we would go about computing

101
00:04:13,780 --> 00:04:17,980
a

102
00:04:15,959 --> 00:04:21,668
interpolation field of the kind that we

103
00:04:17,980 --> 00:04:23,890
need from those answers right and so

104
00:04:21,668 --> 00:04:27,279
that's really the thing that we don't

105
00:04:23,889 --> 00:04:31,120
know and I'm not sure

106
00:04:27,279 --> 00:04:34,089
what we can do necessarily to make that

107
00:04:31,120 --> 00:04:37,329
work well and so that's gonna kind of be

108
00:04:34,089 --> 00:04:38,969
a open research topic for us going

109
00:04:37,329 --> 00:04:41,560
forwards and and I really don't know

110
00:04:38,970 --> 00:04:45,580
what I do know is we've got something

111
00:04:41,560 --> 00:04:48,668
usable here I and so what I want to do

112
00:04:45,579 --> 00:04:50,769
is kind of flip sides if you will

113
00:04:48,668 --> 00:04:52,870
we've got like one end of the the things

114
00:04:50,769 --> 00:04:54,459
sort of we have a plausible answer for

115
00:04:52,870 --> 00:04:56,439
one of the things that seems to work

116
00:04:54,459 --> 00:04:58,449
really nicely and and that I you know

117
00:04:56,439 --> 00:05:02,040
could make a strong argument for it

118
00:04:58,449 --> 00:05:07,240
being good right what I'd like to do is

119
00:05:02,040 --> 00:05:09,400
have some answer now about what the

120
00:05:07,240 --> 00:05:11,319
other side of the equation looks like so

121
00:05:09,399 --> 00:05:13,779
I'd like to start working for the next

122
00:05:11,319 --> 00:05:15,699
couple of weekends on the upgrading or

123
00:05:13,779 --> 00:05:19,539
light transport side of things so that

124
00:05:15,699 --> 00:05:22,000
our light transport works and produces

125
00:05:19,540 --> 00:05:25,450
reasonable light transport results at

126
00:05:22,000 --> 00:05:27,910
light probe points or something right so

127
00:05:25,449 --> 00:05:29,800
we had light probe we had light

128
00:05:27,910 --> 00:05:32,260
transport working before working on

129
00:05:29,800 --> 00:05:35,139
surfaces that wasn't particularly useful

130
00:05:32,259 --> 00:05:36,579
for us because again we don't we just

131
00:05:35,139 --> 00:05:38,050
have letting it services we don't know

132
00:05:36,579 --> 00:05:40,000
how to light things like sprites that

133
00:05:38,050 --> 00:05:41,620
are standing up on a square I mean we

134
00:05:40,000 --> 00:05:44,228
could have lit them just from the square

135
00:05:41,620 --> 00:05:47,590
but what we'd rather have is our sprites

136
00:05:44,228 --> 00:05:50,079
and everything be lit continuously just

137
00:05:47,589 --> 00:05:52,060
like any surface would be and now you

138
00:05:50,079 --> 00:05:54,159
can see that our lighting voxel in real

139
00:05:52,060 --> 00:05:55,720
time is doing that 100%

140
00:05:54,160 --> 00:05:57,610
we just need to feed it with some good

141
00:05:55,720 --> 00:05:59,020
data so what I want to do is flip over

142
00:05:57,610 --> 00:06:02,410
to the light transport side of things

143
00:05:59,019 --> 00:06:04,990
try to work on that light transport here

144
00:06:02,410 --> 00:06:07,479
so that you know at each of these cubes

145
00:06:04,990 --> 00:06:09,430
that we got drawn in there try to

146
00:06:07,478 --> 00:06:13,439
produce good light transport at those

147
00:06:09,430 --> 00:06:18,610
points and with a sort of an eye a

148
00:06:13,439 --> 00:06:20,439
squinting eye if you will towards how we

149
00:06:18,610 --> 00:06:24,729
will output that to an interpolation

150
00:06:20,439 --> 00:06:26,649
scheme based on a voxel and so knowing

151
00:06:24,728 --> 00:06:28,509
what we know now about how we can do

152
00:06:26,649 --> 00:06:30,909
really good light reconstruction if we

153
00:06:28,509 --> 00:06:35,889
magically can turn something into a

154
00:06:30,910 --> 00:06:37,780
scientist in sealed then we just need to

155
00:06:35,889 --> 00:06:41,310
figure out how we would actually compute

156
00:06:37,779 --> 00:06:44,159
light transport data at some

157
00:06:41,310 --> 00:06:46,620
points that would then translate into a

158
00:06:44,160 --> 00:06:49,560
sign business field right and that's

159
00:06:46,620 --> 00:06:52,259
really where we're at now so that's what

160
00:06:49,560 --> 00:06:54,990
we have to work on and it's going to be

161
00:06:52,259 --> 00:06:57,480
a while it's gonna take us a while to do

162
00:06:54,990 --> 00:06:58,920
that because we have several steps of

163
00:06:57,480 --> 00:07:00,509
the problem that we need to really think

164
00:06:58,920 --> 00:07:03,810
through and implement and they're all

165
00:07:00,509 --> 00:07:07,319
fairly tricky the raycasting we've at

166
00:07:03,810 --> 00:07:08,790
least already written a version of so we

167
00:07:07,319 --> 00:07:11,040
can at least start with something

168
00:07:08,790 --> 00:07:13,110
reasonable with the raycasting but every

169
00:07:11,040 --> 00:07:15,480
other part we don't really know how

170
00:07:13,110 --> 00:07:17,280
we're gonna do so to give you an

171
00:07:15,480 --> 00:07:20,550
overview of what those parts are first

172
00:07:17,279 --> 00:07:22,049
we need at the end of the Ray Kassar so

173
00:07:20,550 --> 00:07:24,509
the Ray caster knows what service was

174
00:07:22,050 --> 00:07:26,759
hit we need a sampling solution so

175
00:07:24,509 --> 00:07:30,360
something that will sample the lighting

176
00:07:26,759 --> 00:07:32,099
voxel on the CPU side for example we

177
00:07:30,360 --> 00:07:33,660
need to write that code we have a little

178
00:07:32,100 --> 00:07:36,180
bit of it written already but we need to

179
00:07:33,660 --> 00:07:39,320
write it better so something that will

180
00:07:36,180 --> 00:07:42,750
sample last frames lighting voxel and

181
00:07:39,319 --> 00:07:45,480
give us back a useful answer there so we

182
00:07:42,750 --> 00:07:46,680
doing that we need because otherwise our

183
00:07:45,480 --> 00:07:48,420
ray casting doesn't generate anything

184
00:07:46,680 --> 00:07:50,850
right we yeah we cast array we know what

185
00:07:48,420 --> 00:07:52,230
we hit but who cares because just

186
00:07:50,850 --> 00:07:54,780
hitting something doesn't tell you

187
00:07:52,230 --> 00:07:57,150
anything you need to know about what the

188
00:07:54,779 --> 00:07:59,039
light coming back from that hit is and

189
00:07:57,149 --> 00:08:03,149
you don't really get anywhere with that

190
00:07:59,040 --> 00:08:05,640
right so when you do that then we need

191
00:08:03,149 --> 00:08:07,759
to do something that stores the light in

192
00:08:05,639 --> 00:08:10,139
the light probes because what we learned

193
00:08:07,759 --> 00:08:10,740
from our experience is I'm really glad

194
00:08:10,139 --> 00:08:12,719
we did this

195
00:08:10,740 --> 00:08:15,240
from our interpolation experimentation

196
00:08:12,720 --> 00:08:18,270
is you really don't want cubic light

197
00:08:15,240 --> 00:08:20,460
samples it doesn't really work it's not

198
00:08:18,269 --> 00:08:23,669
particularly helpful so what we'd much

199
00:08:20,459 --> 00:08:30,299
rather have and what we need to sort of

200
00:08:23,670 --> 00:08:32,759
work towards is some fundamental

201
00:08:30,300 --> 00:08:34,169
representation of the lighting at our

202
00:08:32,759 --> 00:08:40,860
light probes that allows us to

203
00:08:34,169 --> 00:08:46,669
reconstruct 3/4 to our really at the

204
00:08:40,860 --> 00:08:46,669
moment except for extract for different

205
00:08:48,710 --> 00:08:54,060
we want to basically be able to attract

206
00:08:50,879 --> 00:08:55,409
four signed distance fields where it has

207
00:08:54,059 --> 00:09:00,599
assigned a sense

208
00:08:55,409 --> 00:09:03,659
intensity for RGB plus a normal a

209
00:09:00,600 --> 00:09:08,070
smoothly varying normal we want to

210
00:09:03,659 --> 00:09:12,929
reconstruct those values four of them

211
00:09:08,070 --> 00:09:15,990
per voxel square and so they correspond

212
00:09:12,929 --> 00:09:18,479
roughly to the four most important

213
00:09:15,990 --> 00:09:24,440
directions of light in coming to that

214
00:09:18,480 --> 00:09:28,409
voxel square you might say and you know

215
00:09:24,440 --> 00:09:32,250
who the heck knows how you want to do

216
00:09:28,409 --> 00:09:34,078
that right and so if you think about how

217
00:09:32,250 --> 00:09:36,120
we might do that there's a lot of ways

218
00:09:34,078 --> 00:09:40,349
we could do it but it's pretty tough to

219
00:09:36,120 --> 00:09:41,610
say and we don't really even know if

220
00:09:40,350 --> 00:09:42,959
that's what we want to do like we may

221
00:09:41,610 --> 00:09:45,509
want to end up storing spherical

222
00:09:42,958 --> 00:09:48,509
harmonics at these lights source points

223
00:09:45,509 --> 00:09:50,669
instead or in the voxel right because

224
00:09:48,509 --> 00:09:53,370
that's a more complete representation of

225
00:09:50,669 --> 00:09:54,750
the light source however you know again

226
00:09:53,370 --> 00:09:56,759
we don't really know we don't know if

227
00:09:54,750 --> 00:10:01,440
that would have us good visual

228
00:09:56,759 --> 00:10:04,289
interpolation qualities I did check off

229
00:10:01,440 --> 00:10:05,850
stream separately about the thing I was

230
00:10:04,289 --> 00:10:07,230
curious about just to verify that you

231
00:10:05,850 --> 00:10:09,509
could add spherical harmonics

232
00:10:07,230 --> 00:10:10,649
coefficients together I was like if you

233
00:10:09,509 --> 00:10:12,269
remember last time I was sort of

234
00:10:10,649 --> 00:10:13,429
pontificating about it I was like quite

235
00:10:12,269 --> 00:10:16,230
certain that you should be able to

236
00:10:13,429 --> 00:10:17,729
because it's just a decomposition of the

237
00:10:16,230 --> 00:10:20,039
light into basis functions that should

238
00:10:17,730 --> 00:10:21,990
be orthogonal so you should be able to

239
00:10:20,039 --> 00:10:23,669
add them no problem but for some reason

240
00:10:21,990 --> 00:10:26,339
we weren't seeing that like obviously

241
00:10:23,669 --> 00:10:28,289
listed when we looked at a couple of

242
00:10:26,339 --> 00:10:30,990
reference pages so I didn't want to just

243
00:10:28,289 --> 00:10:35,069
declare that it was true but it does

244
00:10:30,990 --> 00:10:37,289
appear to be true right and so I guess

245
00:10:35,070 --> 00:10:39,000
all I would say is we really just don't

246
00:10:37,289 --> 00:10:40,799
know going into this exactly what we

247
00:10:39,000 --> 00:10:42,419
want to do and that's why I say it's

248
00:10:40,799 --> 00:10:46,588
gonna take us a while we have a lot to

249
00:10:42,419 --> 00:10:48,360
figure out and the reason that we can't

250
00:10:46,589 --> 00:10:51,089
just use exactly what we have right now

251
00:10:48,360 --> 00:10:53,519
with no thought is because when we're

252
00:10:51,089 --> 00:10:55,829
doing ray casting fundamentally what

253
00:10:53,519 --> 00:10:59,339
we're doing when we cast array is we're

254
00:10:55,828 --> 00:11:02,099
taking a normal that's the Ray direction

255
00:10:59,339 --> 00:11:03,839
that we cast the rayon and we're taking

256
00:11:02,100 --> 00:11:05,430
that normal and getting a piece of

257
00:11:03,839 --> 00:11:07,649
information back that's like what is the

258
00:11:05,429 --> 00:11:08,889
intensity of lighting coming in from

259
00:11:07,649 --> 00:11:13,570
that direction

260
00:11:08,889 --> 00:11:17,710
from that piece of information who knows

261
00:11:13,570 --> 00:11:20,500
what we do right we don't know how to

262
00:11:17,710 --> 00:11:23,290
store that in any particular way we

263
00:11:20,500 --> 00:11:26,049
can't just store it because we can't

264
00:11:23,289 --> 00:11:28,779
record every ray that we cast from every

265
00:11:26,049 --> 00:11:30,719
point they accumulate over time and we

266
00:11:28,779 --> 00:11:34,029
end up with like thousands of rays

267
00:11:30,720 --> 00:11:35,410
potentially per light probe stored and

268
00:11:34,029 --> 00:11:37,740
what would we do like it's way too

269
00:11:35,409 --> 00:11:40,600
expensive to work with all that data and

270
00:11:37,740 --> 00:11:42,340
so what we kind of need is some way of

271
00:11:40,600 --> 00:11:44,350
summing up what all the light that

272
00:11:42,340 --> 00:11:47,080
income that all the incoming light at

273
00:11:44,350 --> 00:11:49,269
any given point actually is and we don't

274
00:11:47,080 --> 00:11:50,950
have any way of doing that right now the

275
00:11:49,269 --> 00:11:53,470
reason spherical harmonics are sort of

276
00:11:50,950 --> 00:11:55,870
attractive as a way of keeping a running

277
00:11:53,470 --> 00:11:58,990
tally of light is because since they are

278
00:11:55,870 --> 00:12:01,019
a decomposition of lighting an

279
00:11:58,990 --> 00:12:04,149
orthogonal decomposition of lighting

280
00:12:01,019 --> 00:12:06,779
what we could do is take the

281
00:12:04,149 --> 00:12:09,699
decomposition of the light at each point

282
00:12:06,779 --> 00:12:11,350
when we do our ray cast and just take

283
00:12:09,700 --> 00:12:13,690
that decomposition of the incoming ray

284
00:12:11,350 --> 00:12:17,100
cast light add it to the existing

285
00:12:13,690 --> 00:12:19,930
circular monix fee Racal harmonics

286
00:12:17,100 --> 00:12:21,940
coefficients at every given light probe

287
00:12:19,929 --> 00:12:25,389
and just keep their running tally that

288
00:12:21,940 --> 00:12:28,600
way that is pretty attractive as an

289
00:12:25,389 --> 00:12:29,970
option right because it does allow us to

290
00:12:28,600 --> 00:12:33,430
sum things together

291
00:12:29,970 --> 00:12:35,290
however we don't actually know if that's

292
00:12:33,429 --> 00:12:38,649
the best way to do it there are other

293
00:12:35,289 --> 00:12:41,019
ways we could be tracking the lighting

294
00:12:38,649 --> 00:12:43,449
information at these points one way for

295
00:12:41,019 --> 00:12:46,299
example is using some kind of a like

296
00:12:43,450 --> 00:12:48,540
almost a cake clustering scheme where we

297
00:12:46,299 --> 00:12:54,969
would say something like alright each

298
00:12:48,539 --> 00:12:59,139
time we go to put a light sample in we

299
00:12:54,970 --> 00:13:01,600
look to see if there's like we keep for

300
00:12:59,139 --> 00:13:03,490
actual light directions and for

301
00:13:01,600 --> 00:13:06,490
intensities and when we go to add

302
00:13:03,490 --> 00:13:09,009
something in we add it to whatever light

303
00:13:06,490 --> 00:13:11,830
is closest like whichever lighting

304
00:13:09,009 --> 00:13:14,049
direction is closest and we bend the

305
00:13:11,830 --> 00:13:16,180
light in like we bend the normals

306
00:13:14,049 --> 00:13:18,509
towards it right so we kind of keep like

307
00:13:16,179 --> 00:13:23,159
a running K clusters algorithm almost of

308
00:13:18,509 --> 00:13:23,159
the four light directions and the four

309
00:13:23,589 --> 00:13:30,380
intensity's right

310
00:13:27,230 --> 00:13:35,180
it's just who knows I don't have an

311
00:13:30,379 --> 00:13:36,799
answer I'm just I'm as like non

312
00:13:35,179 --> 00:13:39,620
knowledgeable about this as you are I've

313
00:13:36,799 --> 00:13:41,958
never implemented a spatial accumulation

314
00:13:39,620 --> 00:13:43,850
lighting scheme like this before so I

315
00:13:41,958 --> 00:13:47,049
don't have any preconceived notions

316
00:13:43,850 --> 00:13:49,190
about what we should be doing I

317
00:13:47,049 --> 00:13:50,569
obviously am familiar with some of the

318
00:13:49,190 --> 00:13:52,699
literature so the reason that I think

319
00:13:50,570 --> 00:13:54,620
about spherical harmonics is because

320
00:13:52,698 --> 00:13:56,359
it's the thing that comes to mind that

321
00:13:54,620 --> 00:14:00,350
people generally use when they need to

322
00:13:56,360 --> 00:14:03,230
some lighting like that and so it seems

323
00:14:00,350 --> 00:14:06,079
like the obvious answer in our case the

324
00:14:03,230 --> 00:14:07,550
only thing I don't know is is it really

325
00:14:06,078 --> 00:14:12,049
the best thing for interpolating

326
00:14:07,549 --> 00:14:14,078
lighting because you know Fourier

327
00:14:12,049 --> 00:14:17,899
transforms which is sort of what it is

328
00:14:14,078 --> 00:14:20,198
Fourier transforms of things have a lot

329
00:14:17,899 --> 00:14:25,509
of kind of weird side effects to them

330
00:14:20,198 --> 00:14:28,879
they try to represent periodic functions

331
00:14:25,509 --> 00:14:30,919
they try to represent things that are

332
00:14:28,879 --> 00:14:33,740
fundamentally not periodic functions as

333
00:14:30,919 --> 00:14:38,120
things that are periodic functions and I

334
00:14:33,740 --> 00:14:40,549
just don't know I just don't know what

335
00:14:38,120 --> 00:14:42,820
to expect this is where lack of

336
00:14:40,549 --> 00:14:44,838
experience is you know it's tough but

337
00:14:42,820 --> 00:14:47,000
again that's the point of handmade here

338
00:14:44,839 --> 00:14:48,949
oh I like showing how I go about

339
00:14:47,000 --> 00:14:50,539
exploring things that I haven't done

340
00:14:48,948 --> 00:14:52,849
before because I think that's the most

341
00:14:50,539 --> 00:14:54,860
important thing for people to learn from

342
00:14:52,850 --> 00:14:56,690
a serious like this it's not how to do

343
00:14:54,860 --> 00:14:58,278
something you can always go read about

344
00:14:56,690 --> 00:14:59,779
how to do something if it's something

345
00:14:58,278 --> 00:15:01,250
someone's already done before the more

346
00:14:59,778 --> 00:15:02,838
interesting thing is how do you explore

347
00:15:01,250 --> 00:15:08,120
things people haven't done before or

348
00:15:02,839 --> 00:15:09,589
slight differences right so anyway if I

349
00:15:08,120 --> 00:15:12,078
had a lot of experience with spherical

350
00:15:09,589 --> 00:15:13,850
harmonics I would already know what

351
00:15:12,078 --> 00:15:16,849
things I think they're okay for what

352
00:15:13,850 --> 00:15:18,500
things I don't and so I just I don't

353
00:15:16,850 --> 00:15:20,149
know if I want to go down that road or

354
00:15:18,500 --> 00:15:22,009
not and I don't know if I want explore

355
00:15:20,149 --> 00:15:24,019
other options or not so it's really just

356
00:15:22,009 --> 00:15:26,389
gonna be a constant sort of learning

357
00:15:24,019 --> 00:15:30,399
mechanism there where I think about it

358
00:15:26,389 --> 00:15:33,589
and say maybe maybe not whatever right

359
00:15:30,399 --> 00:15:35,809
okay so I think the first thing I want

360
00:15:33,589 --> 00:15:39,590
to do now that I've kind of

361
00:15:35,809 --> 00:15:40,609
jabbered about that extensively i think

362
00:15:39,590 --> 00:15:42,379
i want to break this problem into

363
00:15:40,610 --> 00:15:44,240
smaller problems as i often do we have

364
00:15:42,379 --> 00:15:47,000
something very complicated now what i

365
00:15:44,240 --> 00:15:48,860
want to do is say alright we know that

366
00:15:47,000 --> 00:15:50,840
we can do four light-filled

367
00:15:48,860 --> 00:15:53,330
interpolations really nicely here i

368
00:15:50,840 --> 00:15:56,389
really like the look of that so

369
00:15:53,330 --> 00:15:59,870
artistically i feel like that's a good

370
00:15:56,389 --> 00:16:01,610
mesh it feels like this game to me and

371
00:15:59,870 --> 00:16:03,230
that's always important thing to keep in

372
00:16:01,610 --> 00:16:05,210
the back of your mind when you're doing

373
00:16:03,230 --> 00:16:06,740
rendering because remember the point of

374
00:16:05,210 --> 00:16:09,889
rendering in a game is not to be

375
00:16:06,740 --> 00:16:12,049
accurate it's not to be what real light

376
00:16:09,889 --> 00:16:15,139
does we don't care what real light does

377
00:16:12,049 --> 00:16:16,579
the point is to look like we want the

378
00:16:15,139 --> 00:16:20,210
game to look it's aesthetics

379
00:16:16,580 --> 00:16:21,980
right we simulate a lot of the real

380
00:16:20,210 --> 00:16:25,730
properties of lighting because they

381
00:16:21,980 --> 00:16:28,159
produce raising aesthetics right not

382
00:16:25,730 --> 00:16:30,710
because we care if the answer is right

383
00:16:28,159 --> 00:16:32,269
some games may care if they're if

384
00:16:30,710 --> 00:16:34,790
there's something specific about them

385
00:16:32,269 --> 00:16:38,149
but for most games it's about achieving

386
00:16:34,789 --> 00:16:40,610
an aesthetic we like shadows we like

387
00:16:38,149 --> 00:16:43,069
gradual fall we like for now all of

388
00:16:40,610 --> 00:16:45,710
these things they're pleasing to the eye

389
00:16:43,070 --> 00:16:47,120
that's why we put them in there but it's

390
00:16:45,710 --> 00:16:49,310
important not to lose sight of the fact

391
00:16:47,120 --> 00:16:52,519
that we put them in because they look

392
00:16:49,309 --> 00:16:55,789
good not because they are real we don't

393
00:16:52,519 --> 00:16:58,939
care about reality in a game we care

394
00:16:55,789 --> 00:17:00,860
about pleasing visuals or jarring

395
00:16:58,940 --> 00:17:02,420
visuals or grotesque visuals or whatever

396
00:17:00,860 --> 00:17:04,730
the goal of the game is there's an

397
00:17:02,419 --> 00:17:06,859
aesthetic there set by the design and

398
00:17:04,730 --> 00:17:10,429
your job as a graphics programmer is

399
00:17:06,859 --> 00:17:12,109
never to produce realistic imagery is to

400
00:17:10,429 --> 00:17:14,150
produce imagery that comports with the

401
00:17:12,109 --> 00:17:15,799
aesthetic of the game and if that if

402
00:17:14,150 --> 00:17:18,470
that game is supposed to be

403
00:17:15,799 --> 00:17:20,269
photorealistic then that's your job but

404
00:17:18,470 --> 00:17:23,120
if that game is supposed to not be photo

405
00:17:20,269 --> 00:17:25,129
realistic as ours is not then that is

406
00:17:23,119 --> 00:17:26,299
not part of the job criteria so it's

407
00:17:25,130 --> 00:17:27,890
really important to remember that as we

408
00:17:26,299 --> 00:17:30,019
go forward we're not looking for realism

409
00:17:27,890 --> 00:17:31,670
here we're looking for beauty we're

410
00:17:30,019 --> 00:17:33,710
looking for aesthetic comportment with

411
00:17:31,670 --> 00:17:36,009
the style of the game that plays nicely

412
00:17:33,710 --> 00:17:40,730
with Anna's artwork that makes its

413
00:17:36,009 --> 00:17:42,170
natural richness come out and not trying

414
00:17:40,730 --> 00:17:44,089
to make something that looks realistic

415
00:17:42,170 --> 00:17:48,740
right that's always important to keep in

416
00:17:44,089 --> 00:17:49,529
the back of your mind so because I like

417
00:17:48,740 --> 00:17:51,210
the wave

418
00:17:49,529 --> 00:17:53,220
signed distance field interpolation

419
00:17:51,210 --> 00:17:56,220
looks and it gives me some of that nice

420
00:17:53,220 --> 00:17:58,200
cartoon feel I really like that look I

421
00:17:56,220 --> 00:18:00,180
want to start without the spherical

422
00:17:58,200 --> 00:18:02,460
harmonics and see if I can do something

423
00:18:00,180 --> 00:18:04,170
without them if I can't we might fall

424
00:18:02,460 --> 00:18:05,490
back to that as our second attempt but

425
00:18:04,170 --> 00:18:08,279
that's where I'm thinking in my head I

426
00:18:05,490 --> 00:18:10,230
want to go so going from there what I

427
00:18:08,279 --> 00:18:12,509
want to do is break this up into smaller

428
00:18:10,230 --> 00:18:15,990
problems and just see how far I can get

429
00:18:12,509 --> 00:18:18,329
on smaller problems so the first problem

430
00:18:15,990 --> 00:18:21,359
I want to do is let's do direct

431
00:18:18,329 --> 00:18:26,879
recasting of one light and see if we can

432
00:18:21,359 --> 00:18:28,969
just produce just produce a version of

433
00:18:26,880 --> 00:18:31,560
what we see on the screen right now

434
00:18:28,970 --> 00:18:33,890
perhaps let's just pop over really

435
00:18:31,559 --> 00:18:37,259
quickly here to the lighting algorithm

436
00:18:33,890 --> 00:18:39,960
perhaps just one so I'm gonna take we

437
00:18:37,259 --> 00:18:41,640
have four lights going in here right you

438
00:18:39,960 --> 00:18:41,940
can see the four lights going in right

439
00:18:41,640 --> 00:18:47,030
here

440
00:18:41,940 --> 00:18:47,029
I'm gonna take out three of those lights

441
00:18:47,720 --> 00:18:54,960
and so if I just take take out three of

442
00:18:52,140 --> 00:18:57,690
those lights now what you will see is

443
00:18:54,960 --> 00:18:59,579
they don't well okay they're still set

444
00:18:57,690 --> 00:19:00,990
to their original value so I really what

445
00:18:59,579 --> 00:19:03,539
I actually need to do is actually clear

446
00:19:00,990 --> 00:19:05,640
them here so for example if I just go

447
00:19:03,539 --> 00:19:08,089
ahead and say light so you want to go

448
00:19:05,640 --> 00:19:12,000
zero light see two equals zero light

449
00:19:08,089 --> 00:19:14,879
it's light see three equals zero if we

450
00:19:12,000 --> 00:19:16,619
just truncate those light values so we

451
00:19:14,880 --> 00:19:18,960
only have the first light and I pop back

452
00:19:16,619 --> 00:19:21,599
to the game here then what you can see

453
00:19:18,960 --> 00:19:23,970
is a single light source that's just a

454
00:19:21,599 --> 00:19:27,659
sphere it's placed roughly above the

455
00:19:23,970 --> 00:19:29,549
head of the player and you can see that

456
00:19:27,660 --> 00:19:32,670
it actually produces a really pleasing

457
00:19:29,549 --> 00:19:34,529
look but it doesn't have any light

458
00:19:32,670 --> 00:19:37,080
transport so like when I'm here right

459
00:19:34,529 --> 00:19:40,829
what I want to see is I want to see this

460
00:19:37,079 --> 00:19:42,419
be shadowed out here right and it so

461
00:19:40,829 --> 00:19:44,849
there should be some I want to see some

462
00:19:42,420 --> 00:19:45,930
second area but I want to see any direct

463
00:19:44,849 --> 00:19:48,480
lighting over here like I'm getting

464
00:19:45,930 --> 00:19:52,049
right now right so what I want to do is

465
00:19:48,480 --> 00:19:53,940
let's start with this let's add our ray

466
00:19:52,049 --> 00:19:55,710
casting back in which will take a while

467
00:19:53,940 --> 00:19:57,000
because we again we haven't turned that

468
00:19:55,710 --> 00:19:59,670
on so we're gonna have to start really

469
00:19:57,000 --> 00:20:01,529
thinking about how that works let's turn

470
00:19:59,670 --> 00:20:03,179
that ray fasting on get the Ray casting

471
00:20:01,529 --> 00:20:05,368
working but we're gonna do

472
00:20:03,179 --> 00:20:07,469
instead of using the raycasting

473
00:20:05,368 --> 00:20:09,778
degenerate simulate actual secondary

474
00:20:07,469 --> 00:20:11,820
bounce transport we're just gonna do

475
00:20:09,778 --> 00:20:15,538
direct transport so all we're gonna do

476
00:20:11,819 --> 00:20:18,928
is at each of our light probes now right

477
00:20:15,538 --> 00:20:22,979
we're going to cast array from the light

478
00:20:18,929 --> 00:20:24,419
pour probe just one ray and the only

479
00:20:22,979 --> 00:20:28,169
thing we're going to do is cast it

480
00:20:24,419 --> 00:20:30,929
directly at the debug light if it hits

481
00:20:28,169 --> 00:20:32,729
the debug light we will basically stuff

482
00:20:30,929 --> 00:20:33,778
into the light probe the value that

483
00:20:32,729 --> 00:20:35,249
we're getting right now

484
00:20:33,778 --> 00:20:38,038
the direction to the light source and

485
00:20:35,249 --> 00:20:40,919
the intensity as a distance fall-off so

486
00:20:38,038 --> 00:20:44,969
no other light simulation whatsoever

487
00:20:40,919 --> 00:20:47,369
just that if it doesn't get the light

488
00:20:44,969 --> 00:20:50,729
source black no secondary transport

489
00:20:47,368 --> 00:20:52,648
right so that's the simplest possible

490
00:20:50,729 --> 00:20:56,069
thing we could do with the ray tracer

491
00:20:52,648 --> 00:20:58,528
compute a direct shadow let's try that

492
00:20:56,069 --> 00:21:00,960
and see if we can make that work if we

493
00:20:58,528 --> 00:21:02,909
can make that work that's a good first

494
00:21:00,960 --> 00:21:04,829
step forward and we'll see what the

495
00:21:02,909 --> 00:21:07,469
natural next step is after that maybe

496
00:21:04,829 --> 00:21:09,588
multiple light sources and we try to

497
00:21:07,469 --> 00:21:11,849
start tracking those directions right

498
00:21:09,588 --> 00:21:15,499
skip the secondary transport that's

499
00:21:11,848 --> 00:21:17,939
stage two right in order to get in that

500
00:21:15,499 --> 00:21:21,239
stage the first thing I need to do is

501
00:21:17,940 --> 00:21:24,659
actually get the light probe to voxel

502
00:21:21,239 --> 00:21:27,179
trans transcription working which we

503
00:21:24,659 --> 00:21:29,700
haven't done yet so that's actually

504
00:21:27,179 --> 00:21:33,778
direct light casting would be step 2

505
00:21:29,700 --> 00:21:36,929
step 1 or step that step 1 step 0 if you

506
00:21:33,778 --> 00:21:39,148
will is we need to go from light probes

507
00:21:36,929 --> 00:21:42,028
storage which is basically things that

508
00:21:39,148 --> 00:21:44,008
store information in the world to a

509
00:21:42,028 --> 00:21:46,798
screen space voxel that we use for light

510
00:21:44,009 --> 00:21:53,489
reconstruction so that's what we need to

511
00:21:46,798 --> 00:21:56,489
do now let's work on it okay so what we

512
00:21:53,489 --> 00:21:58,379
have here right is we've got a test

513
00:21:56,489 --> 00:22:01,558
light sphere turned on and what test

514
00:21:58,378 --> 00:22:04,769
light sphere does is it stuffs values

515
00:22:01,558 --> 00:22:07,348
directly into the voxel you can see that

516
00:22:04,769 --> 00:22:08,548
happening here it's just a thing they

517
00:22:07,348 --> 00:22:11,638
pull over here so my head's not in the

518
00:22:08,548 --> 00:22:12,778
way it's just a series of lights we

519
00:22:11,638 --> 00:22:14,959
could actually have turned this into for

520
00:22:12,778 --> 00:22:16,859
a lot I loop I was too lazy to do that

521
00:22:14,960 --> 00:22:20,900
but what you can see here

522
00:22:16,859 --> 00:22:23,519
this takes four light sources here and

523
00:22:20,900 --> 00:22:26,250
it just literally stuffs the values

524
00:22:23,519 --> 00:22:28,079
directly into the voxel right we also

525
00:22:26,250 --> 00:22:29,579
have the ability to set a checkerboard I

526
00:22:28,079 --> 00:22:32,669
don't know if that's still working but

527
00:22:29,579 --> 00:22:36,058
we could take a quick moment to set that

528
00:22:32,670 --> 00:22:38,250
up here is a checkerboard and so we turn

529
00:22:36,058 --> 00:22:41,009
off test fear we turn on checkerboard

530
00:22:38,250 --> 00:22:43,109
and I guess yeah like so we haven't

531
00:22:41,009 --> 00:22:44,910
actually ported that one yet so let's

532
00:22:43,109 --> 00:22:47,250
port our checkerboard let's get that

533
00:22:44,910 --> 00:22:49,740
going so what we need in our

534
00:22:47,250 --> 00:22:51,960
checkerboard is just one light source so

535
00:22:49,740 --> 00:22:53,370
probably just this one for the

536
00:22:51,960 --> 00:22:55,798
checkerboard I don't know that we want

537
00:22:53,369 --> 00:22:57,509
any other light sources we can see

538
00:22:55,798 --> 00:22:59,279
whether this actually works for us or

539
00:22:57,509 --> 00:23:00,599
not let me go ahead I shouldn't have

540
00:22:59,279 --> 00:23:03,119
closed the game I don't know why I was

541
00:23:00,599 --> 00:23:03,928
closed the game but because the code

542
00:23:03,119 --> 00:23:06,149
reloading would work

543
00:23:03,929 --> 00:23:08,100
so our checkerboard still works here you

544
00:23:06,150 --> 00:23:10,048
can kind of see an overlay of how big

545
00:23:08,099 --> 00:23:12,959
the voxel is right it's just this thing

546
00:23:10,048 --> 00:23:17,579
right here you can see it clamping out

547
00:23:12,960 --> 00:23:19,410
to the values there so in here we've got

548
00:23:17,579 --> 00:23:21,359
a checkerboard and a sphere like test

549
00:23:19,410 --> 00:23:23,400
pattern that's good we want to keep them

550
00:23:21,359 --> 00:23:26,279
in there but the actual pattern we need

551
00:23:23,400 --> 00:23:28,230
to start working on is what happens when

552
00:23:26,279 --> 00:23:30,660
we enable the light probes right and

553
00:23:28,230 --> 00:23:33,240
what the light probes do is the light

554
00:23:30,660 --> 00:23:35,070
probes are the the information we store

555
00:23:33,240 --> 00:23:38,390
in the scene to get frame to frame

556
00:23:35,069 --> 00:23:42,178
oops frame to frame coherence so we need

557
00:23:38,390 --> 00:23:46,110
this to be we need the light probes to

558
00:23:42,179 --> 00:23:48,210
work perfectly we want them to be able

559
00:23:46,109 --> 00:23:51,058
to reconstruct light as well as the

560
00:23:48,210 --> 00:23:53,009
other thing preferably now I can't be

561
00:23:51,058 --> 00:23:56,369
perfect because nothing's as perfect as

562
00:23:53,009 --> 00:23:58,650
an analytic solution right that test

563
00:23:56,369 --> 00:24:01,349
sphere is literally perfect analytic

564
00:23:58,650 --> 00:24:03,360
light fall-off there's nothing we can do

565
00:24:01,349 --> 00:24:05,009
better than an analytic solution for a

566
00:24:03,359 --> 00:24:07,019
light source so it can't quite be that

567
00:24:05,009 --> 00:24:08,609
good but we'd like to see is it getting

568
00:24:07,019 --> 00:24:12,740
almost that good we want to get as good

569
00:24:08,609 --> 00:24:12,740
close as we can to that solution

570
00:24:21,490 --> 00:24:25,700
all right

571
00:24:23,650 --> 00:24:29,870
so let's think about how we're gonna do

572
00:24:25,700 --> 00:24:33,350
that in our test light probes situation

573
00:24:29,869 --> 00:24:34,879
here right what you can see is we loop

574
00:24:33,349 --> 00:24:36,379
over our probes you can see we've got

575
00:24:34,880 --> 00:24:38,360
compile errors here and that's because

576
00:24:36,380 --> 00:24:42,740
this code has not been ported yet anyway

577
00:24:38,359 --> 00:24:44,809
right so you can kind of ignore that

578
00:24:42,740 --> 00:24:46,130
part for now but what we want to do in

579
00:24:44,809 --> 00:24:47,480
the light probe system is now set up

580
00:24:46,130 --> 00:24:49,880
something that's going to map light

581
00:24:47,480 --> 00:24:51,920
probes down onto something that we can

582
00:24:49,880 --> 00:24:54,170
use for our interpolation scheme right

583
00:24:51,920 --> 00:24:57,019
something that will allow us some nice

584
00:24:54,170 --> 00:24:59,240
light interpolation and again that's not

585
00:24:57,019 --> 00:25:00,619
it's not trivial it's it's something

586
00:24:59,240 --> 00:25:04,120
that we got to think about exactly how

587
00:25:00,619 --> 00:25:07,099
we're gonna do but you know off we go

588
00:25:04,119 --> 00:25:08,839
so in here where you can see we've got

589
00:25:07,099 --> 00:25:11,179
our probe index what we're doing is

590
00:25:08,839 --> 00:25:14,329
we're running through each probe as we

591
00:25:11,180 --> 00:25:18,440
go and we're looking at the probe that's

592
00:25:14,329 --> 00:25:20,629
inside a particular voxel and you know I

593
00:25:18,440 --> 00:25:23,180
don't really know if this is the best

594
00:25:20,630 --> 00:25:25,070
way for us to be doing this right now to

595
00:25:23,180 --> 00:25:26,690
be completely honest it seems like maybe

596
00:25:25,069 --> 00:25:28,429
it's not but we'll stick with it

597
00:25:26,690 --> 00:25:32,470
temporarily because I don't really know

598
00:25:28,430 --> 00:25:32,470
one way or the other what I would say is

599
00:25:33,039 --> 00:25:36,829
you know now that I think about it as

600
00:25:35,420 --> 00:25:38,810
I'm kind of thinking about it in my head

601
00:25:36,829 --> 00:25:41,599
I almost want to say we just don't want

602
00:25:38,809 --> 00:25:45,039
to do this so so let me tell you just

603
00:25:41,599 --> 00:25:49,369
just basically what I'm thinking here I

604
00:25:45,039 --> 00:25:56,799
think light probes are really not the

605
00:25:49,369 --> 00:25:56,799
thing that we want to use probably ever

606
00:25:57,069 --> 00:26:02,139
for actually reconstructing the voxel

607
00:26:02,410 --> 00:26:08,330
light probes are just a way of storing

608
00:26:05,359 --> 00:26:13,779
the voxels spatially from so from frame

609
00:26:08,329 --> 00:26:18,109
to frame we don't have to redo anything

610
00:26:13,779 --> 00:26:24,049
and light probes are places we want to

611
00:26:18,109 --> 00:26:26,089
cast from right but fundamentally

612
00:26:24,049 --> 00:26:30,139
speaking I think most of what we want to

613
00:26:26,089 --> 00:26:31,369
do is think of light probes as just ways

614
00:26:30,140 --> 00:26:33,350
of storing information for

615
00:26:31,369 --> 00:26:34,849
the voxel frame-to-frame so that when

616
00:26:33,349 --> 00:26:37,279
you come back the next frame you

617
00:26:34,849 --> 00:26:44,589
reconstruct what was in the voxel right

618
00:26:37,279 --> 00:26:44,589
I think that's mostly what we want

619
00:26:50,099 --> 00:26:54,750
and even as I'm saying that I'm thinking

620
00:26:52,920 --> 00:27:03,480
maybe even that isn't what we really

621
00:26:54,750 --> 00:27:07,339
want so so let let me let me suggest

622
00:27:03,480 --> 00:27:10,170
something even more ridiculous to you

623
00:27:07,339 --> 00:27:15,059
I'm thinking maybe what we want to do is

624
00:27:10,170 --> 00:27:17,730
just lock the light voxel in place so

625
00:27:15,059 --> 00:27:19,889
basically like the light voxel stays in

626
00:27:17,730 --> 00:27:22,230
one place and as you move the camera

627
00:27:19,890 --> 00:27:29,670
around it is it just is where it is

628
00:27:22,230 --> 00:27:32,670
right and when the camera when the

629
00:27:29,670 --> 00:27:34,560
center of simulation shifts so when we

630
00:27:32,670 --> 00:27:37,620
move the simulation center from one

631
00:27:34,559 --> 00:27:41,159
place to another what we will do is just

632
00:27:37,619 --> 00:27:46,079
copy the part of the voxel that overlaps

633
00:27:41,160 --> 00:27:48,330
to the new location and then the the new

634
00:27:46,079 --> 00:27:52,189
part of the voxel will just have to get

635
00:27:48,329 --> 00:27:55,230
new lighting thrown into it right I

636
00:27:52,190 --> 00:27:57,269
think that's mostly what we want stated

637
00:27:55,230 --> 00:28:00,390
alternately what I think we might want

638
00:27:57,269 --> 00:28:01,980
to do is store a large light voxel maybe

639
00:28:00,390 --> 00:28:04,830
one that's significantly bigger than the

640
00:28:01,980 --> 00:28:07,200
one we have so for example if we go to

641
00:28:04,829 --> 00:28:14,490
light voxel blah blah blah whatever it's

642
00:28:07,200 --> 00:28:16,670
called something here yeah um so when we

643
00:28:14,490 --> 00:28:19,079
look at this stuff

644
00:28:16,670 --> 00:28:21,900
this voxel Wow

645
00:28:19,079 --> 00:28:26,220
so right now we're using literally it's

646
00:28:21,900 --> 00:28:28,350
it's so crazy how small the voxel is so

647
00:28:26,220 --> 00:28:30,000
right now we're just using a 16 by 16 by

648
00:28:28,349 --> 00:28:32,389
16 voxel you see what I need about how

649
00:28:30,000 --> 00:28:34,710
good that lighting interpolation was

650
00:28:32,390 --> 00:28:36,900
that is just a really good lighting

651
00:28:34,710 --> 00:28:38,640
interpolation scheme don't let anyone

652
00:28:36,900 --> 00:28:41,460
tell you that handmade hero doesn't give

653
00:28:38,640 --> 00:28:45,030
you the sweet light interpolation

654
00:28:41,460 --> 00:28:51,840
schemes because we do that was pretty

655
00:28:45,029 --> 00:28:54,329
baller alright anyway so I guess what

656
00:28:51,839 --> 00:28:58,859
I'm saying is if we've got a 16 by 16 by

657
00:28:54,329 --> 00:29:01,019
16 view reagent voxel what I'm

658
00:28:58,859 --> 00:29:03,939
suggesting is maybe we store like a 128

659
00:29:01,019 --> 00:29:07,599
by 128 by 128 voxel

660
00:29:03,940 --> 00:29:10,450
as just like a region around the

661
00:29:07,599 --> 00:29:13,119
simulation area where we remember what

662
00:29:10,450 --> 00:29:17,019
the voxel values were so that we get

663
00:29:13,119 --> 00:29:19,658
that frame-to-frame coherence right then

664
00:29:17,019 --> 00:29:21,759
light probes don't store anything the

665
00:29:19,659 --> 00:29:23,919
only thing a light probe is a light

666
00:29:21,759 --> 00:29:26,139
probe is just a place that says here is

667
00:29:23,919 --> 00:29:29,259
some place that cast rays from for

668
00:29:26,138 --> 00:29:31,148
modifying the voxel but it's just

669
00:29:29,259 --> 00:29:34,839
letting us know we're like interiors of

670
00:29:31,148 --> 00:29:38,229
rooms are right or places that we want

671
00:29:34,839 --> 00:29:39,730
light information to be and maybe in the

672
00:29:38,230 --> 00:29:42,360
future we just get rid of them entirely

673
00:29:39,730 --> 00:29:45,128
and we just generate those values

674
00:29:42,359 --> 00:29:48,548
procedurally so like any place you can

675
00:29:45,128 --> 00:29:49,418
stand we just spam light rock I don't I

676
00:29:48,548 --> 00:29:52,990
don't care

677
00:29:49,419 --> 00:29:55,059
the point is light probes to generate to

678
00:29:52,990 --> 00:29:58,298
store nothing all they are is just

679
00:29:55,058 --> 00:30:01,298
telling you where to cast so if you go

680
00:29:58,298 --> 00:30:08,980
back and you look at the actual like

681
00:30:01,298 --> 00:30:11,829
platform code right and in here we kind

682
00:30:08,980 --> 00:30:13,000
of go through and we look at the stuff

683
00:30:11,829 --> 00:30:14,918
we were actually sending down with

684
00:30:13,000 --> 00:30:18,940
commands and all that nonsense right so

685
00:30:14,919 --> 00:30:21,490
this stuff this just goes away the only

686
00:30:18,940 --> 00:30:27,519
thing we know is this which is saying

687
00:30:21,490 --> 00:30:29,679
how many places do you want to cast

688
00:30:27,519 --> 00:30:32,200
light from and the really interesting

689
00:30:29,679 --> 00:30:35,259
thing about this is if we did that and

690
00:30:32,200 --> 00:30:38,798
that worked well it means we can get rid

691
00:30:35,259 --> 00:30:41,139
of light probe index assignment so we no

692
00:30:38,798 --> 00:30:43,750
longer need those indices to be stable

693
00:30:41,138 --> 00:30:47,798
either and how baller is that that is

694
00:30:43,750 --> 00:30:50,259
really baller right so I'm loving the

695
00:30:47,798 --> 00:30:51,519
way this is coming together I just don't

696
00:30:50,259 --> 00:30:53,649
want to get too excited about it because

697
00:30:51,519 --> 00:30:56,919
until we actually have it looking nice

698
00:30:53,648 --> 00:31:02,878
with real light transport you know it's

699
00:30:56,919 --> 00:31:04,870
it's it's it's not over to to till the

700
00:31:02,878 --> 00:31:07,028
try think of what the programming

701
00:31:04,869 --> 00:31:09,128
version of the phrase it's not over till

702
00:31:07,028 --> 00:31:12,490
the fat lady sings from opera

703
00:31:09,128 --> 00:31:15,819
it's not over till the high bit is set

704
00:31:12,490 --> 00:31:16,909
right it's not over til the most

705
00:31:15,819 --> 00:31:21,739
significant bit

706
00:31:16,909 --> 00:31:25,580
set so let's just say that that's the

707
00:31:21,739 --> 00:31:27,979
case so let's just say that we are now

708
00:31:25,579 --> 00:31:31,668
no longer going to be using that

709
00:31:27,979 --> 00:31:34,038
information and all we're gonna do from

710
00:31:31,669 --> 00:31:36,619
the light probe positions is we're going

711
00:31:34,038 --> 00:31:41,808
to cast rays and then inside the

712
00:31:36,618 --> 00:31:43,368
lighting system we will be tracking the

713
00:31:41,808 --> 00:31:46,278
radiance and that stuff will be tracking

714
00:31:43,368 --> 00:31:48,499
it as the actual voxel so inside

715
00:31:46,278 --> 00:31:51,548
lighting what I want to see here then is

716
00:31:48,499 --> 00:31:54,618
I want to see like our lighting solution

717
00:31:51,548 --> 00:31:56,179
and here we sort of have this light

718
00:31:54,618 --> 00:31:58,848
probe irradiance and the spatial probe

719
00:31:56,179 --> 00:32:01,190
index and all this garbage it's just no

720
00:31:58,848 --> 00:32:05,928
the answer is no we're not going to do

721
00:32:01,190 --> 00:32:07,879
it it doesn't happen false right so this

722
00:32:05,929 --> 00:32:11,899
would go away and we just wouldn't be

723
00:32:07,878 --> 00:32:13,788
worried about the probes and where they

724
00:32:11,898 --> 00:32:15,168
are in the box little we don't care

725
00:32:13,788 --> 00:32:18,319
about that we never have to look them up

726
00:32:15,169 --> 00:32:20,599
that way anymore and I love the sound of

727
00:32:18,319 --> 00:32:23,358
that so I'm really hoping that I can

728
00:32:20,598 --> 00:32:26,178
actually make that be true so we nuke

729
00:32:23,358 --> 00:32:29,028
that part and then what we say is in

730
00:32:26,179 --> 00:32:30,979
here we do have a voxel but the voxel is

731
00:32:29,028 --> 00:32:34,970
just the light box so it's actually just

732
00:32:30,979 --> 00:32:37,759
this thing right and that's the thing

733
00:32:34,970 --> 00:32:41,269
that we would use to look up but we want

734
00:32:37,759 --> 00:32:42,769
bigger we want a bigger version so we

735
00:32:41,269 --> 00:32:44,569
have a large version of this thing and

736
00:32:42,769 --> 00:32:48,769
we're sending down the small version of

737
00:32:44,569 --> 00:32:52,579
it right so we keep a 120 by 120 by 128

738
00:32:48,769 --> 00:32:55,608
we send down just the 16 by 16 center

739
00:32:52,579 --> 00:32:58,069
piece of that right or something like

740
00:32:55,608 --> 00:33:00,949
that and that's probably overkill so

741
00:32:58,069 --> 00:33:03,618
maybe maybe 64 by 6 4 by 64

742
00:33:00,950 --> 00:33:05,569
I don't know don't look at me I'm not a

743
00:33:03,618 --> 00:33:06,678
graphics programmer I'm not supposed to

744
00:33:05,569 --> 00:33:10,638
have to know this stuff

745
00:33:06,679 --> 00:33:13,849
all right anyway so this stuff goes away

746
00:33:10,638 --> 00:33:16,998
goodbye it was nice seeing you but no

747
00:33:13,848 --> 00:33:22,368
and then we say all right in here we

748
00:33:16,999 --> 00:33:24,700
have a light voxel cell and in there

749
00:33:22,368 --> 00:33:30,529
we're just going to store the light

750
00:33:24,700 --> 00:33:33,110
color and the light normal like we are

751
00:33:30,529 --> 00:33:35,089
sending down to the system but we

752
00:33:33,109 --> 00:33:41,389
actually want to keep some number of

753
00:33:35,089 --> 00:33:46,189
these just like this right so what we're

754
00:33:41,390 --> 00:33:49,780
gonna do is we're going to raycast you

755
00:33:46,190 --> 00:33:53,180
know each of the locations in the voxel

756
00:33:49,779 --> 00:33:54,559
and actually now that I think about it

757
00:33:53,180 --> 00:33:56,509
we may not even really need the light

758
00:33:54,559 --> 00:33:58,039
probes we may just be able to use the

759
00:33:56,509 --> 00:33:59,750
lights that are in the voxel cell and

760
00:33:58,039 --> 00:34:03,799
cast in their centers or something so

761
00:33:59,750 --> 00:34:07,519
again don't know we haven't thought it

762
00:34:03,799 --> 00:34:09,019
through yet so I'm not sure but chances

763
00:34:07,519 --> 00:34:10,789
are we want the light probe still

764
00:34:09,019 --> 00:34:14,150
because chances are we don't want to

765
00:34:10,789 --> 00:34:16,309
actually cast from just one location

766
00:34:14,150 --> 00:34:18,679
inside the voxel cell because we'll be

767
00:34:16,309 --> 00:34:22,849
too susceptible to voxel cell alignment

768
00:34:18,679 --> 00:34:25,639
at that point and that isn't really good

769
00:34:22,849 --> 00:34:27,559
right so all right just gonna start by

770
00:34:25,639 --> 00:34:30,109
trying to get this stuff working really

771
00:34:27,559 --> 00:34:32,840
really basic try to have something

772
00:34:30,110 --> 00:34:36,409
bigger than the original voxel and where

773
00:34:32,840 --> 00:34:40,300
we copy just out of the center so what

774
00:34:36,409 --> 00:34:44,690
we're gonna have in here is our cells

775
00:34:40,300 --> 00:34:46,330
the cells are going to be again a

776
00:34:44,690 --> 00:34:48,079
three-dimensional array and that

777
00:34:46,329 --> 00:34:52,610
3-dimensional rate is going to be

778
00:34:48,079 --> 00:34:55,668
related related to that light voxel that

779
00:34:52,610 --> 00:34:57,769
we have but it's not going to be the

780
00:34:55,668 --> 00:35:00,589
same dimension we want it to be bigger

781
00:34:57,769 --> 00:35:05,389
we want to encompass a larger space so

782
00:35:00,590 --> 00:35:10,519
when we go ahead and look at like in

783
00:35:05,389 --> 00:35:13,309
here where we've got like look up box

784
00:35:10,519 --> 00:35:15,259
will dab so where we've got the light

785
00:35:13,309 --> 00:35:18,590
look up voxel here you can see that the

786
00:35:15,260 --> 00:35:23,410
power is listed here and so maybe what

787
00:35:18,590 --> 00:35:26,980
we want here is the like sort of light

788
00:35:23,409 --> 00:35:26,980
large voxel

789
00:35:30,059 --> 00:35:36,329
and this is just a larger one and I

790
00:35:34,320 --> 00:35:39,210
don't know that we really need this one

791
00:35:36,329 --> 00:35:41,159
to be a power of two because I can't

792
00:35:39,210 --> 00:35:55,380
think of a lot of reasons why it would

793
00:35:41,159 --> 00:35:56,940
have to be for indexing into the voxel I

794
00:35:55,380 --> 00:35:59,160
guess that would maybe make it a little

795
00:35:56,940 --> 00:36:00,960
bit easier so maybe it is nice to still

796
00:35:59,159 --> 00:36:03,440
stick with a power of two the reason

797
00:36:00,960 --> 00:36:06,360
that a power two is maybe not the most

798
00:36:03,440 --> 00:36:09,090
nicest thing in the world is because the

799
00:36:06,360 --> 00:36:10,320
power of tube will never Center exactly

800
00:36:09,090 --> 00:36:12,090
you'll always be a little off-center

801
00:36:10,320 --> 00:36:13,559
right if you wanted to be centered

802
00:36:12,090 --> 00:36:18,960
perfectly you would want like an odd

803
00:36:13,559 --> 00:36:20,699
number of copies of the voxel so for

804
00:36:18,960 --> 00:36:22,199
example if you've got a sixteen by

805
00:36:20,699 --> 00:36:24,239
sixteen by sixteen like we were

806
00:36:22,199 --> 00:36:26,519
simulating before and we wanted to

807
00:36:24,239 --> 00:36:29,489
basically have like one cell around in

808
00:36:26,519 --> 00:36:35,789
every direction that would be three

809
00:36:29,489 --> 00:36:37,889
times the sixteen right and so I don't

810
00:36:35,789 --> 00:36:38,219
know if we really how we really wanna do

811
00:36:37,889 --> 00:36:40,049
that

812
00:36:38,219 --> 00:36:42,899
oh that was Molly's feeder its food time

813
00:36:40,050 --> 00:36:46,590
for the puss does she know I'm looking

814
00:36:42,900 --> 00:36:49,070
at a cat tree right now she is not even

815
00:36:46,590 --> 00:36:51,750
moving she's just a fully sleeping puss

816
00:36:49,070 --> 00:36:56,400
she she was exhausted from the move so I

817
00:36:51,750 --> 00:36:58,590
don't blame her all right anyway so I

818
00:36:56,400 --> 00:37:00,570
don't know exactly what we want to do

819
00:36:58,590 --> 00:37:03,059
here with that and so what I guess I'll

820
00:37:00,570 --> 00:37:06,240
say at the moment is I'm not gonna care

821
00:37:03,059 --> 00:37:11,159
I'm gonna use a pair of two that might

822
00:37:06,239 --> 00:37:13,259
be stupid so we're gonna kind of keep an

823
00:37:11,159 --> 00:37:16,349
eye on that let's put it that way as we

824
00:37:13,260 --> 00:37:23,760
go and what I'm gonna say is the light

825
00:37:16,349 --> 00:37:26,099
lookup voxel what we're gonna do is

826
00:37:23,760 --> 00:37:29,940
we're going to use two stops up so if

827
00:37:26,099 --> 00:37:32,369
we're using a 16 by 16 by 16 voxel at

828
00:37:29,940 --> 00:37:33,750
actual pixel shader time then we're

829
00:37:32,369 --> 00:37:35,460
going to be two stops up from that so

830
00:37:33,750 --> 00:37:38,789
we're gonna be 32 to 64

831
00:37:35,460 --> 00:37:42,400
so we're 64 by 64 by 64 on the storage

832
00:37:38,789 --> 00:37:46,239
voxel okay that's what we're doing

833
00:37:42,400 --> 00:37:47,889
I have to creat it and it's my codebase

834
00:37:46,239 --> 00:37:49,779
what are you gonna do about it nothing

835
00:37:47,889 --> 00:37:51,699
I'm the only one with right access to

836
00:37:49,780 --> 00:37:53,410
the repository and actually they were

837
00:37:51,699 --> 00:38:02,849
positive just up my mirror too so even

838
00:37:53,409 --> 00:38:06,339
if you hacked my repository anyway I

839
00:38:02,849 --> 00:38:09,159
hate kit case couldn't tell anyway uh so

840
00:38:06,340 --> 00:38:09,700
what we want to do here is we want to

841
00:38:09,159 --> 00:38:11,349
start

842
00:38:09,699 --> 00:38:14,559
initializing these cells with lighting

843
00:38:11,349 --> 00:38:16,000
data and what we want to do is when we

844
00:38:14,559 --> 00:38:18,219
go to output the lighting to the card

845
00:38:16,000 --> 00:38:21,130
we're gonna do now is output the

846
00:38:18,219 --> 00:38:23,079
lighting from these cells to those cells

847
00:38:21,130 --> 00:38:25,510
right so it's like a copy of the voxel

848
00:38:23,079 --> 00:38:27,519
from our internal version to the

849
00:38:25,510 --> 00:38:30,160
external version the graphics card is

850
00:38:27,519 --> 00:38:33,759
actually going to use and what we want

851
00:38:30,159 --> 00:38:37,029
to do to sort of take this in slow steps

852
00:38:33,760 --> 00:38:39,640
is the first thing we'll do is going to

853
00:38:37,030 --> 00:38:42,190
waves so instead of test light probes

854
00:38:39,639 --> 00:38:46,329
which is now not a thing we're not going

855
00:38:42,190 --> 00:38:48,639
to have that anymore um we're gonna call

856
00:38:46,329 --> 00:38:50,289
it test light transfer and what we're

857
00:38:48,639 --> 00:38:53,769
gonna do is we're gonna transfer

858
00:38:50,289 --> 00:38:59,230
lighting information in so it's a copy

859
00:38:53,769 --> 00:39:01,389
the probes are gone so here's our test

860
00:38:59,230 --> 00:39:04,719
transfer code we don't want any of this

861
00:39:01,389 --> 00:39:07,420
really all we're gonna have here is the

862
00:39:04,719 --> 00:39:09,639
irradiance pack is still going to be

863
00:39:07,420 --> 00:39:13,269
there but otherwise pretty much that's

864
00:39:09,639 --> 00:39:15,549
it right and then this stuff obviously

865
00:39:13,269 --> 00:39:17,050
is gonna occur as well I'm gonna get rid

866
00:39:15,550 --> 00:39:18,960
of this clearing here because we don't

867
00:39:17,050 --> 00:39:21,310
really need that at the immediate moment

868
00:39:18,960 --> 00:39:23,440
but here we have like how we're gonna

869
00:39:21,309 --> 00:39:25,000
pack this stuff together what I want to

870
00:39:23,440 --> 00:39:30,849
do is I want to assume then I get a

871
00:39:25,000 --> 00:39:32,920
light voxel cell back somehow and I want

872
00:39:30,849 --> 00:39:36,969
to pack the data in so now we've got our

873
00:39:32,920 --> 00:39:40,180
light and zero or light C zero right and

874
00:39:36,969 --> 00:39:43,559
we have this oops copied them I was a

875
00:39:40,179 --> 00:39:45,519
little aggressive there oh did the

876
00:39:43,559 --> 00:39:48,730
puss-puss find out that her food went

877
00:39:45,519 --> 00:39:50,920
off I think the post did I missed that I

878
00:39:48,730 --> 00:39:52,780
missed the puss head into the food I

879
00:39:50,920 --> 00:39:55,889
heard it go off she must have woken

880
00:39:52,780 --> 00:40:01,130
slowly gotten out of her sleep

881
00:39:55,889 --> 00:40:01,129
and and done it I don't know all right

882
00:40:01,489 --> 00:40:11,849
so yeah irradiance pack on a light just

883
00:40:06,420 --> 00:40:13,380
does the right thing right yeah um so we

884
00:40:11,849 --> 00:40:15,150
what we need to do now is just

885
00:40:13,380 --> 00:40:16,588
irradiance pack our light that doesn't

886
00:40:15,150 --> 00:40:18,720
go on the end channel that goes in the C

887
00:40:16,588 --> 00:40:20,759
channel we do irradiance pack our light

888
00:40:18,719 --> 00:40:23,219
and each of these light voxel cells

889
00:40:20,759 --> 00:40:24,748
right has the data we need right in it

890
00:40:23,219 --> 00:40:26,818
it's got the light that's what we're

891
00:40:24,748 --> 00:40:32,068
gonna be tracking so for each one of

892
00:40:26,818 --> 00:40:38,818
these we pack the light like so enemies

893
00:40:32,068 --> 00:40:42,389
say there's the transfer the normal is

894
00:40:38,818 --> 00:40:46,108
way easier as well because instead of

895
00:40:42,389 --> 00:40:48,480
just like having to pack it down we just

896
00:40:46,108 --> 00:40:50,818
copy it directly there is no encoding of

897
00:40:48,480 --> 00:40:53,789
our normals yet right we don't actually

898
00:40:50,818 --> 00:40:55,259
do that it's just this by normal to

899
00:40:53,789 --> 00:40:58,410
normal calls the only thing we actually

900
00:40:55,259 --> 00:41:00,719
do so right now we can just set this

901
00:40:58,409 --> 00:41:02,788
directly to light n that may get more

902
00:41:00,719 --> 00:41:04,348
complicated the future but at the moment

903
00:41:02,789 --> 00:41:06,778
it's just that by normal to normal call

904
00:41:04,349 --> 00:41:09,528
and that's all we actually do so let's

905
00:41:06,778 --> 00:41:09,528
go ahead and keep that

906
00:41:12,048 --> 00:41:16,318
so there's us doing the straight copy

907
00:41:14,489 --> 00:41:17,909
from the cell and that's all we need to

908
00:41:16,318 --> 00:41:20,998
do for the transfer the only question is

909
00:41:17,909 --> 00:41:23,009
where do we get it from and again here

910
00:41:20,998 --> 00:41:26,159
we sort of say well alright we need to

911
00:41:23,009 --> 00:41:28,498
again keep this centered around wherever

912
00:41:26,159 --> 00:41:31,489
the view is actually looking at this

913
00:41:28,498 --> 00:41:31,488
particular time right

914
00:41:31,768 --> 00:41:36,209
and I don't you know I wish I had a

915
00:41:34,380 --> 00:41:37,680
better handle on exactly how I want to

916
00:41:36,210 --> 00:41:39,989
do this I don't know

917
00:41:37,679 --> 00:41:42,298
so right now I'm just gonna do something

918
00:41:39,989 --> 00:41:50,759
that it may be a little Squinkie you

919
00:41:42,298 --> 00:41:52,498
know it may be I may be Squinkie a

920
00:41:50,759 --> 00:41:55,498
little bit too swiftly on this

921
00:41:52,498 --> 00:41:58,558
particular one and and you know we'll

922
00:41:55,498 --> 00:42:01,719
see in a second exactly house cranked it

923
00:41:58,559 --> 00:42:03,970
ends up being but

924
00:42:01,719 --> 00:42:07,118
bear with me because we're kind of

925
00:42:03,969 --> 00:42:09,669
exploring this territory and I don't

926
00:42:07,119 --> 00:42:12,880
actually know what I want yet and I will

927
00:42:09,670 --> 00:42:15,309
you know much like Potter Stewart said

928
00:42:12,880 --> 00:42:17,230
of pornography I will know it when I see

929
00:42:15,309 --> 00:42:21,059
it I may just not be able to quite

930
00:42:17,230 --> 00:42:23,608
define it oh we got the puss hello puss

931
00:42:21,059 --> 00:42:26,200
how are you doing

932
00:42:23,608 --> 00:42:28,960
did you have a good did you have a good

933
00:42:26,199 --> 00:42:31,778
lunch yeah I wish I had lunch right now

934
00:42:28,960 --> 00:42:34,210
I wish I had lunch right now I don't

935
00:42:31,778 --> 00:42:35,710
have an automated feeder do I I just

936
00:42:34,210 --> 00:42:39,240
have to do this dream but no fluid at

937
00:42:35,710 --> 00:42:43,329
all I have to do this dream with no food

938
00:42:39,239 --> 00:42:46,568
I'm a starving now but you got all kinds

939
00:42:43,329 --> 00:42:49,769
of good food didn't you what are you

940
00:42:46,568 --> 00:42:53,288
you're eating you're eating that that

941
00:42:49,768 --> 00:42:55,629
prescription food aren't you you're

942
00:42:53,289 --> 00:42:58,000
eating Royal Canin

943
00:42:55,630 --> 00:43:00,068
it's not what you're eating I think

944
00:42:58,000 --> 00:43:03,699
that's what she was eating all right

945
00:43:00,068 --> 00:43:05,798
plus I got access to keyboard though so

946
00:43:03,699 --> 00:43:07,659
is it possible could you possibly hang

947
00:43:05,798 --> 00:43:12,940
out over here for a little while

948
00:43:07,659 --> 00:43:14,920
no satin I'm on the table is that I got

949
00:43:12,940 --> 00:43:21,400
it I got puts I gotta type in some code

950
00:43:14,920 --> 00:43:26,858
baby is that okay Molly can I can I can

951
00:43:21,400 --> 00:43:31,028
i code some stuff we have a bit of a

952
00:43:26,858 --> 00:43:32,288
push situation here I don't know what

953
00:43:31,028 --> 00:43:36,130
we're gonna do about that exactly

954
00:43:32,289 --> 00:43:40,000
she likes to type on the keyboard out at

955
00:43:36,130 --> 00:43:41,470
this point so I don't know we're gonna

956
00:43:40,000 --> 00:43:44,259
have a little bit romantic try and type

957
00:43:41,469 --> 00:43:46,088
around the puss I'll try to type around

958
00:43:44,259 --> 00:43:47,409
the puss but we'll see she's basically

959
00:43:46,088 --> 00:43:50,588
sitting on the wrist rest now so you

960
00:43:47,409 --> 00:43:51,940
know how it is those of you cats at home

961
00:43:50,588 --> 00:43:53,500
will be familiar with this situation

962
00:43:51,940 --> 00:43:54,909
they like to be where the action is they

963
00:43:53,500 --> 00:43:56,679
don't necessarily understand the fact

964
00:43:54,909 --> 00:44:00,969
that you have work that you're trying to

965
00:43:56,679 --> 00:44:02,949
do we'll see all right so anyway inside

966
00:44:00,969 --> 00:44:04,509
here if I grab out my light cells and I

967
00:44:02,949 --> 00:44:08,379
pack them down then the question is just

968
00:44:04,509 --> 00:44:10,298
where do I get them from right so if I

969
00:44:08,380 --> 00:44:12,068
have some kind of an X Y Z okay now the

970
00:44:10,298 --> 00:44:14,079
puss is stepping on the keyboard

971
00:44:12,068 --> 00:44:16,630
that's good let's just keep keep going

972
00:44:14,079 --> 00:44:19,778
there we go so she's going off

973
00:44:16,630 --> 00:44:21,519
so if we take a look at the X Y Z's of

974
00:44:19,778 --> 00:44:23,889
the cells that we actually have here you

975
00:44:21,518 --> 00:44:25,598
can see we do have them the problem is

976
00:44:23,889 --> 00:44:28,419
they're just not in a particularly good

977
00:44:25,599 --> 00:44:30,278
location for our offsetting right so we

978
00:44:28,418 --> 00:44:34,148
probably want to do here is we just have

979
00:44:30,278 --> 00:44:34,449
like a Z offset a y offset or something

980
00:44:34,148 --> 00:44:37,719
like that

981
00:44:34,449 --> 00:44:39,338
OOP okay there's some push typing okay

982
00:44:37,719 --> 00:44:41,829
you're sitting on the Delete key baby

983
00:44:39,338 --> 00:44:44,949
that's not that's gonna be bad okay we

984
00:44:41,829 --> 00:44:48,159
don't and the tail right now is going

985
00:44:44,949 --> 00:44:50,918
like literally right along the prime

986
00:44:48,159 --> 00:44:52,719
part of the keyboard moly baby could we

987
00:44:50,918 --> 00:44:54,458
move could we possibly move you to the

988
00:44:52,719 --> 00:44:57,639
seat do you think that's a possible

989
00:44:54,458 --> 00:45:00,848
possibility what if we just come on baby

990
00:44:57,639 --> 00:45:02,858
what if we just if we just moved you

991
00:45:00,849 --> 00:45:05,169
right there would that be a good place

992
00:45:02,858 --> 00:45:08,380
do you wanna sit there sit down there at

993
00:45:05,168 --> 00:45:11,828
all I don't think it's I don't think she

994
00:45:08,380 --> 00:45:14,169
likes that seat very much what do you

995
00:45:11,829 --> 00:45:18,539
think about that well you think about

996
00:45:14,168 --> 00:45:22,408
that seat huh do you like that at all

997
00:45:18,539 --> 00:45:25,019
it's playing not warm enough huh

998
00:45:22,409 --> 00:45:27,219
all right she's going she's going okay

999
00:45:25,018 --> 00:45:28,629
so you know when the puss comes you just

1000
00:45:27,219 --> 00:45:31,028
got to deal with it that's just part of

1001
00:45:28,630 --> 00:45:32,919
programming a lot of people ask me you

1002
00:45:31,028 --> 00:45:35,528
like as a junior programmer what should

1003
00:45:32,918 --> 00:45:37,929
I be focusing on the answer is your cat

1004
00:45:35,528 --> 00:45:40,478
skills you should be good with with cats

1005
00:45:37,929 --> 00:45:42,059
especially if you've ever gonna work

1006
00:45:40,478 --> 00:45:46,388
with me you gotta be good with cats okay

1007
00:45:42,059 --> 00:45:49,119
so light box will sell we've got a zy in

1008
00:45:46,389 --> 00:45:51,369
an X here and if we were just looking in

1009
00:45:49,119 --> 00:45:52,989
the bottom corner that would be fine but

1010
00:45:51,369 --> 00:45:56,318
what we actually want to do is we want

1011
00:45:52,989 --> 00:45:58,239
to look at some portion of our larger

1012
00:45:56,318 --> 00:46:00,009
voxel that's where we've decided we are

1013
00:45:58,239 --> 00:46:03,880
I don't want to have to do anything

1014
00:46:00,009 --> 00:46:08,108
fancy here so I'm just gonna do like the

1015
00:46:03,880 --> 00:46:10,989
sort of like hot Zee hot X hot Y kind of

1016
00:46:08,108 --> 00:46:14,828
a thing where we basically say we've got

1017
00:46:10,989 --> 00:46:17,588
some portion of the voxel that's sort of

1018
00:46:14,829 --> 00:46:20,798
the interior part we care about and

1019
00:46:17,588 --> 00:46:23,619
we're going to offset our larger voxel

1020
00:46:20,798 --> 00:46:26,518
by that voxel right so this is just a

1021
00:46:23,619 --> 00:46:29,469
transfer from one voxel to another and

1022
00:46:26,518 --> 00:46:31,449
that's all we're doing here

1023
00:46:29,469 --> 00:46:33,940
and so what I'd like to do now is just

1024
00:46:31,449 --> 00:46:36,248
have a way of initializing our larger

1025
00:46:33,940 --> 00:46:38,048
voxel maybe with the test fear and then

1026
00:46:36,248 --> 00:46:40,778
verifying that that can actually be

1027
00:46:38,048 --> 00:46:45,489
copied in so let's say that I do this

1028
00:46:40,778 --> 00:46:47,978
here and we in fact I just literally

1029
00:46:45,489 --> 00:46:51,219
want to do this I'm gonna loop over the

1030
00:46:47,978 --> 00:46:58,088
large voxel initialize the large voxel

1031
00:46:51,219 --> 00:46:59,920
and then from the large voxel goat to

1032
00:46:58,088 --> 00:47:02,199
the small voxel right that's that's all

1033
00:46:59,920 --> 00:47:03,909
I really want to do all right so if I

1034
00:47:02,199 --> 00:47:06,998
was to literally just cut and paste all

1035
00:47:03,909 --> 00:47:10,588
this code right so I'm literally just

1036
00:47:06,998 --> 00:47:10,588
gonna cut and paste this entire thing

1037
00:47:10,650 --> 00:47:15,489
although I guess I only need one of them

1038
00:47:12,880 --> 00:47:22,088
we're only dealing with one light so I'm

1039
00:47:15,489 --> 00:47:24,639
not gonna I'm gonna do that right so

1040
00:47:22,088 --> 00:47:27,068
what I want to do here is I want to

1041
00:47:24,639 --> 00:47:28,929
store and in the light c0 I want to

1042
00:47:27,068 --> 00:47:30,849
actually again keep as a full light

1043
00:47:28,929 --> 00:47:33,429
value now so this is not gonna look like

1044
00:47:30,849 --> 00:47:36,338
that instead what we're gonna do is take

1045
00:47:33,429 --> 00:47:41,528
the actual like v4 we would have packed

1046
00:47:36,338 --> 00:47:43,838
down and and keep it right so that we

1047
00:47:41,528 --> 00:47:47,619
have what I think is the correct

1048
00:47:43,838 --> 00:47:50,139
settings here and then when we go to

1049
00:47:47,619 --> 00:47:50,890
pack it down later we'll you know pull

1050
00:47:50,139 --> 00:47:54,969
that out of it

1051
00:47:50,889 --> 00:47:57,248
so again gotta go through this with like

1052
00:47:54,969 --> 00:47:58,630
a finer tooth comb than we are at the

1053
00:47:57,248 --> 00:48:01,298
moment but basically what we're going to

1054
00:47:58,630 --> 00:48:04,809
do is we're going to insert into our

1055
00:48:01,298 --> 00:48:08,349
larger voxel the small smaller voxel

1056
00:48:04,809 --> 00:48:11,109
information here right and we compute

1057
00:48:08,349 --> 00:48:13,539
Vox Center P I now need an offset that's

1058
00:48:11,108 --> 00:48:16,960
like the hot voxel P part of that so

1059
00:48:13,539 --> 00:48:24,219
that's moved up so when we compute this

1060
00:48:16,960 --> 00:48:26,318
stuff right what we do trying to explain

1061
00:48:24,219 --> 00:48:28,389
this we have a small voxel inside a

1062
00:48:26,318 --> 00:48:29,679
large voxel I should probably draw this

1063
00:48:28,389 --> 00:48:31,778
out for you but I'm too lazy at the

1064
00:48:29,679 --> 00:48:35,259
moment we have a small box on a large

1065
00:48:31,778 --> 00:48:38,440
voxel the small voxel is some cut out of

1066
00:48:35,259 --> 00:48:40,478
the larger voxel we now want to test

1067
00:48:38,440 --> 00:48:42,740
that we can copy things from the small

1068
00:48:40,478 --> 00:48:45,049
part from some subset of the large box

1069
00:48:42,739 --> 00:48:48,889
boxes so what I want to do is initialize

1070
00:48:45,050 --> 00:48:51,110
the entire large voxel with the distance

1071
00:48:48,889 --> 00:49:10,629
to the light so this will basically be

1072
00:48:51,110 --> 00:49:20,539
you know something like this right and

1073
00:49:10,630 --> 00:49:21,920
that's all we actually need oops so we

1074
00:49:20,539 --> 00:49:23,599
just want to initialize the whole box

1075
00:49:21,920 --> 00:49:27,079
with that light the problem with doing

1076
00:49:23,599 --> 00:49:29,839
it this way is we previously said where

1077
00:49:27,079 --> 00:49:32,360
the light was in UVW space which doesn't

1078
00:49:29,840 --> 00:49:35,480
necessarily help us you can see us doing

1079
00:49:32,360 --> 00:49:37,519
that computation here so the vox uvw

1080
00:49:35,480 --> 00:49:40,190
like this this computation is kind of

1081
00:49:37,519 --> 00:49:43,550
useless right because we don't actually

1082
00:49:40,190 --> 00:49:44,539
know where the light is we this is

1083
00:49:43,550 --> 00:49:46,789
telling us where the light is in the

1084
00:49:44,539 --> 00:49:50,809
small voxel but this is the large voxel

1085
00:49:46,789 --> 00:49:53,960
right so while it's easy for us to tell

1086
00:49:50,809 --> 00:49:55,969
what the UVW is in the large voxel it's

1087
00:49:53,960 --> 00:49:59,539
not easy for us to tell what it is in

1088
00:49:55,969 --> 00:50:00,919
the small voxel so we kind of want to

1089
00:49:59,539 --> 00:50:05,179
make this work

1090
00:50:00,920 --> 00:50:07,130
a little bit more broadly and we want to

1091
00:50:05,179 --> 00:50:11,569
start talking about where this stuff is

1092
00:50:07,130 --> 00:50:12,980
in actual real space so we're getting

1093
00:50:11,570 --> 00:50:14,390
like I said we're gonna have to grind a

1094
00:50:12,980 --> 00:50:15,590
little bit get all this stuff working in

1095
00:50:14,389 --> 00:50:18,199
a slightly different way than it was

1096
00:50:15,590 --> 00:50:22,070
working before but the good news is like

1097
00:50:18,199 --> 00:50:24,439
hey this uvw stuff was just things that

1098
00:50:22,070 --> 00:50:25,940
we were sort of pre computing for using

1099
00:50:24,440 --> 00:50:28,130
the in voxel dim and this kind of

1100
00:50:25,940 --> 00:50:29,750
nonsense so what we can do is start to

1101
00:50:28,130 --> 00:50:33,200
just work back towards the world space

1102
00:50:29,750 --> 00:50:35,840
we had those values already those were

1103
00:50:33,199 --> 00:50:37,399
these like light P light p2 light p3

1104
00:50:35,840 --> 00:50:41,358
light before those are already in world

1105
00:50:37,400 --> 00:50:44,150
space so what I'd like to do here is say

1106
00:50:41,358 --> 00:50:45,980
we've got a Vox Center P and I'm going

1107
00:50:44,150 --> 00:50:51,200
to compute that as an actual location

1108
00:50:45,980 --> 00:50:56,079
the Vox Center P is going to be a offset

1109
00:50:51,199 --> 00:51:02,679
so if we said like Vox VIN corner

1110
00:50:56,079 --> 00:51:07,000
we had that value and then I added an

1111
00:51:02,679 --> 00:51:10,849
offset to it that was the you know

1112
00:51:07,000 --> 00:51:16,550
amount sort of of the voxel scaled by

1113
00:51:10,849 --> 00:51:18,380
whatever the voxel dim is right so we

1114
00:51:16,550 --> 00:51:19,519
have some notion of the minimum corner

1115
00:51:18,380 --> 00:51:22,220
we have some notion of the cell

1116
00:51:19,519 --> 00:51:24,530
dimension we scale that out and this is

1117
00:51:22,219 --> 00:51:31,569
where the center of our axle is now in

1118
00:51:24,530 --> 00:51:34,130
world space then we get rid of this and

1119
00:51:31,570 --> 00:51:37,370
now when we talk about our like normal

1120
00:51:34,130 --> 00:51:42,860
it's just going to be the light P minus

1121
00:51:37,369 --> 00:51:45,829
the Vox Center P the rest of this can

1122
00:51:42,860 --> 00:51:47,599
stay the same now we have a little bit

1123
00:51:45,829 --> 00:51:50,119
of an issue here because you can see

1124
00:51:47,599 --> 00:51:52,579
we've got a light color that's gonna be

1125
00:51:50,119 --> 00:51:55,489
the fall-off here that fall-off needs to

1126
00:51:52,579 --> 00:51:58,029
be broader right so it needs to be more

1127
00:51:55,489 --> 00:52:00,349
like you know like that or something

1128
00:51:58,030 --> 00:52:02,840
where it falls off at like a 4 meter

1129
00:52:00,349 --> 00:52:04,849
radius or something like that maybe even

1130
00:52:02,840 --> 00:52:07,820
a little bit more than that 8 meter

1131
00:52:04,849 --> 00:52:11,509
radius I don't know who knows doesn't

1132
00:52:07,820 --> 00:52:13,910
matter but it's something right then

1133
00:52:11,510 --> 00:52:16,760
we've got our light intensity and the

1134
00:52:13,909 --> 00:52:18,289
light intensity is again just something

1135
00:52:16,760 --> 00:52:19,490
we use to figure out how bright the

1136
00:52:18,289 --> 00:52:20,690
lights going to be back and stay the

1137
00:52:19,489 --> 00:52:23,149
same at the moment but we'll play with

1138
00:52:20,690 --> 00:52:25,429
that later and now we've got something

1139
00:52:23,150 --> 00:52:29,269
that will go through the whole world

1140
00:52:25,429 --> 00:52:31,699
space of this sort of voxel initializing

1141
00:52:29,269 --> 00:52:34,519
it to be the correct values for this one

1142
00:52:31,699 --> 00:52:36,199
light source that we're tracking then we

1143
00:52:34,519 --> 00:52:40,250
go through here we get rid of the probe

1144
00:52:36,199 --> 00:52:42,319
stuff we go through this and we say all

1145
00:52:40,250 --> 00:52:44,449
right when we do the light transfer we

1146
00:52:42,320 --> 00:52:46,820
pick stuff back up out of the voxel

1147
00:52:44,449 --> 00:52:48,679
based on just that center point

1148
00:52:46,820 --> 00:52:50,809
and you can see that happening here we

1149
00:52:48,679 --> 00:52:55,069
copy it in and that's the part that now

1150
00:52:50,809 --> 00:52:57,920
we're trying to get ok so let's move

1151
00:52:55,070 --> 00:53:00,440
towards that first thing we need to do

1152
00:52:57,920 --> 00:53:02,990
is actually put those values in there so

1153
00:53:00,440 --> 00:53:05,470
if you take a look in the lighting

1154
00:53:02,989 --> 00:53:09,519
solution we've got sort of this

1155
00:53:05,469 --> 00:53:09,519
information here about the voxel

1156
00:53:10,030 --> 00:53:14,350
that we commented out we now need to put

1157
00:53:12,280 --> 00:53:18,180
some of that back in here so for the

1158
00:53:14,349 --> 00:53:22,420
cells I want to do the Vox min corner

1159
00:53:18,179 --> 00:53:26,789
and the Vox seldom that that's how we're

1160
00:53:22,420 --> 00:53:26,789
gonna map from the voxel back out right

1161
00:53:34,320 --> 00:53:42,580
we're also gonna need the in seldom so

1162
00:53:41,050 --> 00:53:45,340
all that stuff basically just needs to

1163
00:53:42,579 --> 00:53:46,659
be known to us these two values are the

1164
00:53:45,340 --> 00:53:49,539
same

1165
00:53:46,659 --> 00:53:51,969
but what we probably want to do is be a

1166
00:53:49,539 --> 00:53:53,920
little bit careful about how we're

1167
00:53:51,969 --> 00:53:59,019
naming these things these two are the

1168
00:53:53,920 --> 00:54:04,300
same so they are the voxel like the cell

1169
00:53:59,019 --> 00:54:06,610
dim and the inverse seldom those are

1170
00:54:04,300 --> 00:54:08,680
correct no matter which voxel you're

1171
00:54:06,610 --> 00:54:10,960
talking about because our voxels line up

1172
00:54:08,679 --> 00:54:13,480
right the small one is just a subset of

1173
00:54:10,960 --> 00:54:15,970
the larger one so you only ever need to

1174
00:54:13,480 --> 00:54:18,400
talk about one set of dimensional values

1175
00:54:15,969 --> 00:54:20,529
right the cell dim and the emcell dim

1176
00:54:18,400 --> 00:54:23,019
are this the same no matter what fox are

1177
00:54:20,530 --> 00:54:26,769
talking about but in this case we

1178
00:54:23,019 --> 00:54:29,980
actually have two so we have a Vox min

1179
00:54:26,769 --> 00:54:32,289
corner for the large and a Vox min

1180
00:54:29,980 --> 00:54:36,789
corner for the small and they're not the

1181
00:54:32,289 --> 00:54:38,500
same right and we similarly that like

1182
00:54:36,789 --> 00:54:42,400
hot min coordinate maybe we'll call it

1183
00:54:38,500 --> 00:54:46,710
the hot location so we could actually

1184
00:54:42,400 --> 00:54:46,710
say this hot X Y Z

1185
00:54:54,519 --> 00:55:05,869
so we kind of have a Vox Minh corner hot

1186
00:54:57,460 --> 00:55:08,900
and then also a box in or hot corner I

1187
00:55:05,869 --> 00:55:14,269
that's the index of the hot corner

1188
00:55:08,900 --> 00:55:16,490
inside the large voxel right so that's

1189
00:55:14,269 --> 00:55:18,110
roughly what we need to track through

1190
00:55:16,489 --> 00:55:19,219
the system in order for it to work

1191
00:55:18,110 --> 00:55:21,980
properly

1192
00:55:19,219 --> 00:55:23,989
right we're gonna need to set those up

1193
00:55:21,980 --> 00:55:25,550
and then let me start cleaning a

1194
00:55:23,989 --> 00:55:30,109
compilers now so we're gonna start to

1195
00:55:25,550 --> 00:55:32,780
test this out so this stuff is no longer

1196
00:55:30,110 --> 00:55:34,579
with us it was not long for this world

1197
00:55:32,780 --> 00:55:36,710
we thought we were gonna need it we

1198
00:55:34,579 --> 00:55:39,650
didn't end up needing it it was just

1199
00:55:36,710 --> 00:55:41,510
something we played around with in here

1200
00:55:39,650 --> 00:55:44,269
where we do the spatial index again

1201
00:55:41,510 --> 00:55:48,140
don't care this stuff

1202
00:55:44,269 --> 00:55:50,690
similarly don't care so when we go

1203
00:55:48,139 --> 00:55:53,359
through the light probes now oh well

1204
00:55:50,690 --> 00:55:56,090
actually that's fine so the light probe

1205
00:55:53,360 --> 00:56:02,840
Peas we may still want but those are

1206
00:55:56,090 --> 00:56:05,000
just gonna be kind of directly used

1207
00:56:02,840 --> 00:56:06,650
without that box apart so we'll keep

1208
00:56:05,000 --> 00:56:10,400
those temporary likes think we may still

1209
00:56:06,650 --> 00:56:14,389
want those okay so if we do to the

1210
00:56:10,400 --> 00:56:17,030
spatial index here this stuff we don't

1211
00:56:14,389 --> 00:56:20,299
actually want so this this needs to stop

1212
00:56:17,030 --> 00:56:23,090
and this we now will have to reckon with

1213
00:56:20,300 --> 00:56:25,190
how the transfer like this is going to

1214
00:56:23,090 --> 00:56:27,829
end up being a voxel lookup so it's

1215
00:56:25,190 --> 00:56:29,300
gonna be a get probe lighting based on a

1216
00:56:27,829 --> 00:56:31,250
position now

1217
00:56:29,300 --> 00:56:34,880
so it's kind of a separate a separate

1218
00:56:31,250 --> 00:56:44,989
thing we need to go in let's just do

1219
00:56:34,880 --> 00:56:48,530
this who's next

1220
00:56:44,989 --> 00:56:49,069
so all of this code is just not a thing

1221
00:56:48,530 --> 00:56:51,830
anymore

1222
00:56:49,070 --> 00:56:55,010
right so these are just completely if

1223
00:56:51,829 --> 00:56:57,369
zeroed out like all of this stuff is not

1224
00:56:55,010 --> 00:56:57,370
a thing

1225
00:56:58,568 --> 00:57:09,858
and we'll delete it as soon as we are

1226
00:57:01,548 --> 00:57:12,079
sure we don't actually need it so in

1227
00:57:09,858 --> 00:57:13,880
here you can see where we are

1228
00:57:12,079 --> 00:57:15,170
initializing the spatial probe index

1229
00:57:13,880 --> 00:57:17,150
what we probably wanna do now is

1230
00:57:15,170 --> 00:57:23,619
actually initialize the rest of our

1231
00:57:17,150 --> 00:57:23,619
solution stuff so when we go in here and

1232
00:57:30,039 --> 00:57:36,170
that's not what I want there it is when

1233
00:57:33,588 --> 00:57:38,568
we get all this stuff all of this stuff

1234
00:57:36,170 --> 00:57:40,999
has to kind of be initialized this stuff

1235
00:57:38,568 --> 00:57:43,130
will vary per frame this stuff won't and

1236
00:57:40,998 --> 00:57:49,578
so what we should be able to do is just

1237
00:57:43,130 --> 00:57:51,499
set these here right if we want to I'm

1238
00:57:49,579 --> 00:57:54,229
going to let it vary for print per frame

1239
00:57:51,498 --> 00:57:58,098
probably so what I might do is say look

1240
00:57:54,228 --> 00:57:59,478
we'll we'll take that over here so when

1241
00:57:58,099 --> 00:58:02,209
we begin the letting computation if

1242
00:57:59,478 --> 00:58:08,048
every frame you wanted to vary it you

1243
00:58:02,208 --> 00:58:08,048
could and off you go right

1244
00:58:16,039 --> 00:58:31,579
I'm not sure that's the smartest way to

1245
00:58:18,199 --> 00:58:33,710
do this but alright and yet so now we

1246
00:58:31,579 --> 00:58:36,019
just kind of need to deal with exactly

1247
00:58:33,710 --> 00:58:38,530
how the light corner stuff is working

1248
00:58:36,019 --> 00:58:41,809
and we'll talk about that a little bit

1249
00:58:38,530 --> 00:58:42,860
more a little bit later on because

1250
00:58:41,809 --> 00:58:46,549
there's a bunch of stuff we have to do

1251
00:58:42,860 --> 00:58:49,789
to make that work properly but yes this

1252
00:58:46,550 --> 00:59:12,170
stuff now can go away and now we really

1253
00:58:49,789 --> 00:59:13,369
just need these two and this is all this

1254
00:59:12,170 --> 00:59:16,909
is all stuff we're gonna have to

1255
00:59:13,369 --> 00:59:19,880
actually fix so like what we need to do

1256
00:59:16,909 --> 00:59:24,109
now is we need to take the lighting

1257
00:59:19,880 --> 00:59:25,940
bounds and regularize them so instead of

1258
00:59:24,110 --> 00:59:27,620
when you call begin lighting computation

1259
00:59:25,940 --> 00:59:30,289
you're no longer going to be able to

1260
00:59:27,619 --> 00:59:32,690
call begin lighting computation with an

1261
00:59:30,289 --> 00:59:35,679
actual bounds you're gonna have to call

1262
00:59:32,690 --> 00:59:38,690
begin lighting computation with like a

1263
00:59:35,679 --> 00:59:41,539
center point or like a viewing point or

1264
00:59:38,690 --> 00:59:44,420
something and when we change the camera

1265
00:59:41,539 --> 00:59:46,519
location we have to update the lights as

1266
00:59:44,420 --> 00:59:48,920
well right so the lighting system will

1267
00:59:46,519 --> 00:59:51,619
now have to be camera aware and it has

1268
00:59:48,920 --> 00:59:55,190
to do transfers that will like be able

1269
00:59:51,619 --> 00:59:57,980
to copy parts of the voxels around if

1270
00:59:55,190 --> 00:59:59,630
that makes sense it's more complicated

1271
00:59:57,980 --> 01:00:02,389
than we're doing before but way better

1272
00:59:59,630 --> 01:00:05,150
like this will prevent us from having to

1273
01:00:02,389 --> 01:00:07,339
do a ton of the work we were doing like

1274
01:00:05,150 --> 01:00:10,039
we won't have to translate to and from

1275
01:00:07,340 --> 01:00:11,390
light probes anymore and the values that

1276
01:00:10,039 --> 01:00:12,860
we copied to the graphics card are the

1277
01:00:11,389 --> 01:00:14,839
same values we'd be tracking and all

1278
01:00:12,860 --> 01:00:16,220
that stuff so this is just way better I

1279
01:00:14,840 --> 01:00:19,190
think this is what we should have been

1280
01:00:16,219 --> 01:00:21,379
doing so yeah getting rid of the light

1281
01:00:19,190 --> 01:00:24,409
probes seems like a great idea because

1282
01:00:21,380 --> 01:00:26,450
there's just no need for it

1283
01:00:24,409 --> 01:00:29,659
and it also means that the entities

1284
01:00:26,449 --> 01:00:31,879
won't need to have light index as a sign

1285
01:00:29,659 --> 01:00:34,518
anything like that because we'll be

1286
01:00:31,880 --> 01:00:38,480
keeping track of the light spatially not

1287
01:00:34,518 --> 01:00:43,038
in terms of probes and that just seems

1288
01:00:38,480 --> 01:00:46,068
strictly better to me yeah so I think

1289
01:00:43,039 --> 01:00:46,490
that's all just better and we'll go from

1290
01:00:46,068 --> 01:00:48,500
there

1291
01:00:46,489 --> 01:00:50,419
all right so we have a ton of stuff to

1292
01:00:48,500 --> 01:00:53,659
do now to get that going

1293
01:00:50,420 --> 01:00:56,750
I think probably my goal for today cuz I

1294
01:00:53,659 --> 01:01:00,858
don't I have like maybe what 28 minutes

1295
01:00:56,750 --> 01:01:03,409
so 30 I maybe like 35 minutes so I think

1296
01:01:00,858 --> 01:01:05,568
of most what I want to do today is I

1297
01:01:03,409 --> 01:01:08,389
just want to go through and try to get

1298
01:01:05,568 --> 01:01:09,858
the voxels tracking properly we probably

1299
01:01:08,389 --> 01:01:11,000
won't be able to actually get to the

1300
01:01:09,858 --> 01:01:13,098
point where they're where they're

1301
01:01:11,000 --> 01:01:14,028
actually running properly just today

1302
01:01:13,099 --> 01:01:15,859
because there's a lot of plumbing that

1303
01:01:14,028 --> 01:01:18,980
has to happen but clean all that stuff

1304
01:01:15,858 --> 01:01:22,460
up and then tomorrow our goal will be to

1305
01:01:18,980 --> 01:01:26,990
get the light voxel reproducing the same

1306
01:01:22,460 --> 01:01:28,759
effect we have today and then we are

1307
01:01:26,989 --> 01:01:31,399
really in good shape because at that

1308
01:01:28,759 --> 01:01:33,889
point we are ready to just do ray

1309
01:01:31,400 --> 01:01:36,019
casting and go from there right and I

1310
01:01:33,889 --> 01:01:38,179
think that'll be really really pretty

1311
01:01:36,018 --> 01:01:40,068
easy we're even ready to sample we can

1312
01:01:38,179 --> 01:01:43,518
sample the lighting tribute at that

1313
01:01:40,068 --> 01:01:45,528
point too so yeah I think that at that

1314
01:01:43,518 --> 01:01:48,379
point it starts to be really good so

1315
01:01:45,528 --> 01:01:49,670
that's our goal for this weekend get

1316
01:01:48,380 --> 01:01:51,920
most of the plumbing them today as much

1317
01:01:49,670 --> 01:01:53,358
as we can tomorrow get it working and

1318
01:01:51,920 --> 01:01:56,599
then I'm and then at that point I'm a

1319
01:01:53,358 --> 01:01:58,239
happy camper because weed weed we've

1320
01:01:56,599 --> 01:02:01,940
been in really good shape

1321
01:01:58,239 --> 01:02:04,250
alright so let's push through what I

1322
01:02:01,940 --> 01:02:07,608
want to do is is now kind of go back and

1323
01:02:04,250 --> 01:02:09,858
and go to the outer code fix a little

1324
01:02:07,608 --> 01:02:10,400
bit of how that's working and we'll go

1325
01:02:09,858 --> 01:02:13,639
from there

1326
01:02:10,400 --> 01:02:16,099
so inside the world mode what we have

1327
01:02:13,639 --> 01:02:19,940
right now is like the camera right it

1328
01:02:16,099 --> 01:02:22,609
updates in a number of ways so when we

1329
01:02:19,940 --> 01:02:24,798
actually find those light pounds you can

1330
01:02:22,608 --> 01:02:27,469
see me look into the light bounce here

1331
01:02:24,798 --> 01:02:29,210
right and you can see when we do begin

1332
01:02:27,469 --> 01:02:32,629
lighting computation what we do is we

1333
01:02:29,210 --> 01:02:36,740
say we tell the lighting system where

1334
01:02:32,630 --> 01:02:38,298
the light pounds are I and the part of

1335
01:02:36,739 --> 01:02:41,000
the problem that is the lighting system

1336
01:02:38,298 --> 01:02:43,449
doesn't really know where the where the

1337
01:02:41,000 --> 01:02:46,838
light bounds are in absolute

1338
01:02:43,449 --> 01:02:52,439
space this is just telling it kind of

1339
01:02:46,838 --> 01:02:54,670
based on the random like location that's

1340
01:02:52,440 --> 01:02:56,260
it's based around the simulation center

1341
01:02:54,670 --> 01:02:59,440
they're not absolute coordinates right

1342
01:02:56,260 --> 01:03:02,230
and so I think what we would want to do

1343
01:02:59,440 --> 01:03:08,369
here is say alright you know we've got

1344
01:03:02,230 --> 01:03:10,750
the we've got the world camera rectangle

1345
01:03:08,369 --> 01:03:16,298
that we produce from the render group

1346
01:03:10,750 --> 01:03:20,289
here right and that is sort of use well

1347
01:03:16,298 --> 01:03:22,358
it's not really that useful I it's yeah

1348
01:03:20,289 --> 01:03:24,818
it's really not that useful what we

1349
01:03:22,358 --> 01:03:27,759
would probably rather have is actually

1350
01:03:24,818 --> 01:03:31,239
like look at what we're using for the

1351
01:03:27,760 --> 01:03:33,280
cameras absolute Center so you know when

1352
01:03:31,239 --> 01:03:38,279
we're actually doing the camera pulling

1353
01:03:33,280 --> 01:03:45,010
the camera information out here where we

1354
01:03:38,280 --> 01:03:47,440
grab that group know this so where we

1355
01:03:45,010 --> 01:03:49,180
actually look at the world camera P and

1356
01:03:47,440 --> 01:03:53,289
the simulation centre P like that

1357
01:03:49,179 --> 01:03:57,129
difference going on here right I think

1358
01:03:53,289 --> 01:04:01,119
what we actually want to do now is the

1359
01:03:57,130 --> 01:04:03,970
camera P is like where we are and we

1360
01:04:01,119 --> 01:04:06,130
know we can go from that some distance

1361
01:04:03,969 --> 01:04:07,929
forward and know that that's like

1362
01:04:06,130 --> 01:04:09,760
roughly what we're focusing on because

1363
01:04:07,929 --> 01:04:13,210
we do have a focal point like we know

1364
01:04:09,760 --> 01:04:14,680
roughly how far away we are from the

1365
01:04:13,210 --> 01:04:17,409
camera in terms of what we're trying to

1366
01:04:14,679 --> 01:04:21,368
look at and so I think what we want to

1367
01:04:17,409 --> 01:04:24,159
do is actually just ask or rather tell

1368
01:04:21,369 --> 01:04:27,309
the lighting system that like that's

1369
01:04:24,159 --> 01:04:29,348
what it should actually be given so I

1370
01:04:27,309 --> 01:04:32,019
think instead of light bounds which I

1371
01:04:29,349 --> 01:04:34,180
don't think we want anymore I think what

1372
01:04:32,019 --> 01:04:36,369
we want is more like here's the camera

1373
01:04:34,179 --> 01:04:40,509
position right and since this lighting

1374
01:04:36,369 --> 01:04:43,180
has to be stable we're going to tell you

1375
01:04:40,510 --> 01:04:46,000
the camera position and one other piece

1376
01:04:43,179 --> 01:04:50,798
of information which is how far away we

1377
01:04:46,000 --> 01:04:54,099
expect the camera to actually focus on

1378
01:04:50,798 --> 01:04:56,619
right so you can see the focus Z kind of

1379
01:04:54,099 --> 01:04:58,420
comes in here and so

1380
01:04:56,619 --> 01:05:01,150
we may need more information than that

1381
01:04:58,420 --> 01:05:03,550
but you know we'll we'll say we we do

1382
01:05:01,150 --> 01:05:05,559
something like this at the moment and

1383
01:05:03,550 --> 01:05:07,810
then what I'm going to do is say all

1384
01:05:05,559 --> 01:05:08,949
right that camera rect does that

1385
01:05:07,809 --> 01:05:10,269
actually get you straining because if it

1386
01:05:08,949 --> 01:05:13,619
doesn't then we're just going to we're

1387
01:05:10,269 --> 01:05:13,619
going to toast some of that stuff now

1388
01:05:20,340 --> 01:05:27,579
yes so all this stuff now I think we

1389
01:05:23,469 --> 01:05:29,919
want to kind of get rid of right and we

1390
01:05:27,579 --> 01:05:34,179
need this to sort of be a value that we

1391
01:05:29,920 --> 01:05:36,480
tune because we need the lighting to now

1392
01:05:34,179 --> 01:05:39,699
be stable we don't want the lighting

1393
01:05:36,480 --> 01:05:42,010
sampling points to shift around so we

1394
01:05:39,699 --> 01:05:44,919
want to just pick the largest volume we

1395
01:05:42,010 --> 01:05:48,040
need to light a line to that and that's

1396
01:05:44,920 --> 01:05:51,130
the end of it right so we then say all

1397
01:05:48,039 --> 01:05:53,489
right all of this stuff I think goes

1398
01:05:51,130 --> 01:05:53,490
away

1399
01:06:04,730 --> 01:06:09,858
well no it doesn't so the simulation

1400
01:06:07,699 --> 01:06:14,588
bounds are still are based on the camera

1401
01:06:09,858 --> 01:06:14,588
size what

1402
01:06:24,320 --> 01:06:32,530
that just seems totally busted I don't

1403
01:06:29,570 --> 01:06:32,530
want that at all

1404
01:06:34,210 --> 01:06:43,699
Wow okay so I don't really want that and

1405
01:06:38,119 --> 01:06:46,039
I don't know what that is doing there so

1406
01:06:43,699 --> 01:06:49,219
I want to start eliminating more of this

1407
01:06:46,039 --> 01:06:51,070
code actually quite a bit more so we're

1408
01:06:49,219 --> 01:06:53,779
gonna organize this a little differently

1409
01:06:51,070 --> 01:06:58,010
world camera rect is gonna get pulled

1410
01:06:53,780 --> 01:07:00,950
out screen bounds so on so symbols we

1411
01:06:58,010 --> 01:07:05,180
want but that's literally just gonna be

1412
01:07:00,949 --> 01:07:10,819
this all of this stuff I don't really

1413
01:07:05,179 --> 01:07:12,980
want happening more including this so I

1414
01:07:10,820 --> 01:07:14,480
don't know why we were still doing that

1415
01:07:12,980 --> 01:07:16,820
I feel like we should have removed that

1416
01:07:14,480 --> 01:07:18,860
but I guess we were trying to be

1417
01:07:16,820 --> 01:07:20,269
Squinkie I don't think we should have

1418
01:07:18,860 --> 01:07:26,269
been Squinkie like that I think that was

1419
01:07:20,269 --> 01:07:28,610
a bad squink so I'm gonna I wonder if

1420
01:07:26,269 --> 01:07:30,920
all of those and clean up the results

1421
01:07:28,610 --> 01:07:35,570
because I didn't like that that was

1422
01:07:30,920 --> 01:07:36,440
giving me a bad vibe a very bad vibe all

1423
01:07:35,570 --> 01:07:45,620
right so we're gonna deal with the

1424
01:07:36,440 --> 01:07:52,490
fallout from that in a minute here we

1425
01:07:45,619 --> 01:07:54,670
don't need this you don't need any of

1426
01:07:52,489 --> 01:07:54,669
this

1427
01:07:59,798 --> 01:08:20,539
and this is the large corner

1428
01:08:06,650 --> 01:08:21,889
specifically this is a Hadamard product

1429
01:08:20,539 --> 01:08:24,500
I'm not sure why I wrote that as a

1430
01:08:21,889 --> 01:08:26,779
standard product which we don't allow

1431
01:08:24,500 --> 01:08:28,819
for vectors specifically because it's

1432
01:08:26,779 --> 01:08:31,819
ambiguous which kind of product did you

1433
01:08:28,819 --> 01:08:42,949
want how do my products dot product

1434
01:08:31,819 --> 01:08:44,960
cross product here it looks like this is

1435
01:08:42,948 --> 01:08:47,269
a little weird because that should have

1436
01:08:44,960 --> 01:08:48,920
just been a multiplication so that we

1437
01:08:47,270 --> 01:08:51,560
had the red green and blue is all equal

1438
01:08:48,920 --> 01:08:53,329
channel there so don't ask me why that

1439
01:08:51,560 --> 01:08:54,859
was looking like that it was just a

1440
01:08:53,329 --> 01:09:02,329
holdover from when I did the cut

1441
01:08:54,859 --> 01:09:09,650
copypasta there this is just needs to be

1442
01:09:02,329 --> 01:09:19,880
an address of and now I think we're good

1443
01:09:09,649 --> 01:09:21,738
so in terms of the focus Z here again

1444
01:09:19,880 --> 01:09:24,650
I'm not really even sure we need the

1445
01:09:21,738 --> 01:09:27,408
focus Z so maybe I won't even use that

1446
01:09:24,649 --> 01:09:29,028
because we really need this voxel to be

1447
01:09:27,408 --> 01:09:31,548
stable so I'm not sure we can afford

1448
01:09:29,029 --> 01:09:35,889
stuff like the focus Z you probably just

1449
01:09:31,548 --> 01:09:39,798
needed to capsulate the frustum reliably

1450
01:09:35,889 --> 01:09:41,569
so we'll see alright so let's go ahead

1451
01:09:39,798 --> 01:09:44,448
and jump to begin the lightening

1452
01:09:41,569 --> 01:09:46,130
computation and now the big change here

1453
01:09:44,448 --> 01:09:51,289
is instead of a rectangle 3 this is

1454
01:09:46,130 --> 01:09:54,759
going to take a world position and

1455
01:09:51,289 --> 01:09:54,759
that's the location of the camera

1456
01:10:00,810 --> 01:10:06,940
all right so now we have to do is you

1457
01:10:04,300 --> 01:10:09,310
have to work backwards right we have to

1458
01:10:06,939 --> 01:10:13,329
now like figure out how we're going to

1459
01:10:09,310 --> 01:10:16,300
make this voxel be properly aligned with

1460
01:10:13,329 --> 01:10:18,279
our view now in order to make sure that

1461
01:10:16,300 --> 01:10:21,369
we have lighting that kind of covers the

1462
01:10:18,279 --> 01:10:23,170
region that we want obviously you know

1463
01:10:21,369 --> 01:10:27,789
you figure we got to push this thing out

1464
01:10:23,170 --> 01:10:31,210
along negative Z a certain ways and and

1465
01:10:27,789 --> 01:10:34,630
so on right and furthermore with the

1466
01:10:31,210 --> 01:10:36,279
world position with the camera P here we

1467
01:10:34,630 --> 01:10:37,690
also need to know the simulation center

1468
01:10:36,279 --> 01:10:41,559
because that's like the coordinate

1469
01:10:37,689 --> 01:10:46,439
system center so in order to get that

1470
01:10:41,560 --> 01:10:50,560
information we also need to produce like

1471
01:10:46,439 --> 01:10:52,769
let's see here where is that information

1472
01:10:50,560 --> 01:10:52,770
actually

1473
01:10:59,579 --> 01:11:07,720
so I guess actually the simulation

1474
01:11:05,439 --> 01:11:09,250
center is all is always at zero zero

1475
01:11:07,720 --> 01:11:11,680
zero but we just need to know yeah you

1476
01:11:09,250 --> 01:11:13,630
can see here so we actually have the

1477
01:11:11,680 --> 01:11:15,460
delta from sim value so actually what we

1478
01:11:13,630 --> 01:11:17,980
probably want to do is maybe something

1479
01:11:15,460 --> 01:11:28,050
more like this we would tell it where

1480
01:11:17,979 --> 01:11:31,629
the simulation center is or like that

1481
01:11:28,050 --> 01:11:34,029
and where the camera is relative to the

1482
01:11:31,630 --> 01:11:37,029
origin and those are the two things we

1483
01:11:34,029 --> 01:11:38,829
would pass because the simulation center

1484
01:11:37,029 --> 01:11:40,239
is zero zero zero so we want to know

1485
01:11:38,829 --> 01:11:43,539
where that is so that we have the

1486
01:11:40,239 --> 01:11:45,489
correct relative positioning for

1487
01:11:43,539 --> 01:11:48,340
everything so we'd actually want to do

1488
01:11:45,489 --> 01:11:51,309
this and then we would have Delta from

1489
01:11:48,340 --> 01:11:53,170
sim and you know Delta from sim just

1490
01:11:51,310 --> 01:11:56,770
tells us where the camera is relative to

1491
01:11:53,170 --> 01:12:00,220
that simulation center right and so what

1492
01:11:56,770 --> 01:12:04,240
we want to do now is say all right the

1493
01:12:00,220 --> 01:12:09,070
world origin P is sort of a way that we

1494
01:12:04,239 --> 01:12:09,449
would track where we line everything up

1495
01:12:09,069 --> 01:12:11,340
where

1496
01:12:09,449 --> 01:12:15,420
Vox OS and all that sort of stuff right

1497
01:12:11,340 --> 01:12:17,010
and so there's a yeah there's a lot of

1498
01:12:15,420 --> 01:12:19,500
different ways we might want this to

1499
01:12:17,010 --> 01:12:21,449
work but generally speaking what we want

1500
01:12:19,500 --> 01:12:24,449
to do is think about the voxel getting

1501
01:12:21,449 --> 01:12:25,979
updated over time so when we do begin

1502
01:12:24,449 --> 01:12:28,199
letting computation and you tell us the

1503
01:12:25,979 --> 01:12:32,789
origin P the first thing we want to do

1504
01:12:28,199 --> 01:12:36,710
is kind of move the existing voxel data

1505
01:12:32,789 --> 01:12:39,659
copy a subset of the voxel data and

1506
01:12:36,710 --> 01:12:42,569
clear the rest of the voxel if you will

1507
01:12:39,659 --> 01:12:47,689
so that we're like shifting the voxel

1508
01:12:42,569 --> 01:12:50,549
around in like a locked fashion with the

1509
01:12:47,689 --> 01:12:52,169
with the motion of the of the simulation

1510
01:12:50,550 --> 01:12:54,930
in the camera right that's what we

1511
01:12:52,170 --> 01:12:57,239
pretty much want now thankfully for us

1512
01:12:54,930 --> 01:12:59,310
we don't have to care about that stuff

1513
01:12:57,239 --> 01:13:02,939
yet and the reason that we don't have to

1514
01:12:59,310 --> 01:13:05,820
care about that stuff yet is because we

1515
01:13:02,939 --> 01:13:09,750
are just trying to do the basic

1516
01:13:05,819 --> 01:13:12,389
operation of computing the lighting on a

1517
01:13:09,750 --> 01:13:20,789
single frame so we don't need

1518
01:13:12,390 --> 01:13:23,970
hello plus hello so we don't really need

1519
01:13:20,789 --> 01:13:25,619
any particular frame to frame coherent

1520
01:13:23,970 --> 01:13:29,550
so we can skip that for now but this is

1521
01:13:25,619 --> 01:13:32,399
what we will need to to carry forward

1522
01:13:29,550 --> 01:13:34,890
with us and similarly when we look at

1523
01:13:32,399 --> 01:13:37,289
the voxel dimension stuff that stuff

1524
01:13:34,890 --> 01:13:40,490
okay plus can you just give me just not

1525
01:13:37,289 --> 01:13:40,489
okay thank you okay

1526
01:13:43,069 --> 01:13:48,989
yeah so when we want to compute the rest

1527
01:13:46,590 --> 01:13:50,670
of this stuff we we now need with this

1528
01:13:48,989 --> 01:13:53,489
like the set light bounds as well I'm

1529
01:13:50,670 --> 01:13:55,319
not sure what that's actually oh so the

1530
01:13:53,489 --> 01:13:57,329
set light bounds this stuff is important

1531
01:13:55,319 --> 01:13:58,799
to tell the pixel shader like what's

1532
01:13:57,329 --> 01:14:00,119
going on so we need them in and the

1533
01:13:58,800 --> 01:14:02,070
inverse light dim and all that stuff so

1534
01:14:00,119 --> 01:14:05,909
that's the stuff that we need to get

1535
01:14:02,069 --> 01:14:09,420
right at this point right so let's go

1536
01:14:05,909 --> 01:14:11,880
ahead and compute that stuff stabili so

1537
01:14:09,420 --> 01:14:15,750
the first thing I want to do is say we

1538
01:14:11,880 --> 01:14:20,100
know that the cell count for the small

1539
01:14:15,750 --> 01:14:22,880
voxel is is this right and so we know

1540
01:14:20,100 --> 01:14:26,630
that we want to set the debentures

1541
01:14:22,880 --> 01:14:29,239
for the light to be something based on

1542
01:14:26,630 --> 01:14:31,340
that that captures the size we actually

1543
01:14:29,238 --> 01:14:33,289
needed to capture and this has to now be

1544
01:14:31,340 --> 01:14:35,329
hard-coded so we can more or less just

1545
01:14:33,289 --> 01:14:37,460
Hardwell doesn't have be hard-coded this

1546
01:14:35,329 --> 01:14:39,289
has to be stable so we can now just hard

1547
01:14:37,460 --> 01:14:42,079
code it because it can't change frame to

1548
01:14:39,289 --> 01:14:44,000
frame or we would get like you'd see

1549
01:14:42,079 --> 01:14:46,420
visible artifacts if we were changing

1550
01:14:44,000 --> 01:14:49,399
where the light information was stored

1551
01:14:46,420 --> 01:14:51,679
from frame to frame so what I want to do

1552
01:14:49,399 --> 01:15:00,079
here is say well the lighting dimension

1553
01:14:51,679 --> 01:15:08,119
is therefore going to be like computed

1554
01:15:00,079 --> 01:15:09,679
this way the light dim is in fact I

1555
01:15:08,119 --> 01:15:17,929
guess if I look at light dim

1556
01:15:09,679 --> 01:15:20,000
I just need seldom though here right so

1557
01:15:17,929 --> 01:15:23,179
if I look at the voxel cell dim what I

1558
01:15:20,000 --> 01:15:30,079
want to do is say it's the cell count

1559
01:15:23,179 --> 01:15:31,940
right times the cell dimension or rather

1560
01:15:30,079 --> 01:15:36,619
this is that so I guess I don't need the

1561
01:15:31,939 --> 01:15:42,009
entire light tube so what I want to

1562
01:15:36,619 --> 01:15:42,010
actually say here is this

1563
01:15:51,329 --> 01:15:56,738
and I guess I'm not sure why do we have

1564
01:15:54,550 --> 01:15:58,630
a thing that both enables the light

1565
01:15:56,738 --> 01:16:01,029
bounce this way and then does it this

1566
01:15:58,630 --> 01:16:02,380
way I'm not really sure again we can

1567
01:16:01,029 --> 01:16:05,889
clean up I think we can clean up the

1568
01:16:02,380 --> 01:16:07,029
pipeline a bit once you get all this

1569
01:16:05,890 --> 01:16:09,400
working because then it will be

1570
01:16:07,029 --> 01:16:11,649
absolutely clear what actually needs to

1571
01:16:09,399 --> 01:16:13,049
go down to the graphics card and when so

1572
01:16:11,649 --> 01:16:15,609
we'll be able to simplify this a bit

1573
01:16:13,050 --> 01:16:17,079
anyway so when we do begin letting

1574
01:16:15,609 --> 01:16:21,039
concrete computation we've got our

1575
01:16:17,079 --> 01:16:23,319
solution flowing in here assuming the

1576
01:16:21,039 --> 01:16:26,529
lighting is enabled we've got our cell

1577
01:16:23,319 --> 01:16:30,149
information producing here our seldom is

1578
01:16:26,529 --> 01:16:33,238
just going to be some value that is

1579
01:16:30,149 --> 01:16:36,939
hard-coded to produce a large enough you

1580
01:16:33,238 --> 01:16:43,059
know a large enough size I'm gonna start

1581
01:16:36,939 --> 01:16:45,579
with two meters per voxel and we're

1582
01:16:43,060 --> 01:16:47,500
gonna see what that translates to that

1583
01:16:45,579 --> 01:16:50,260
may be too big I don't know what the

1584
01:16:47,500 --> 01:16:52,210
size of the voxel was before maybe we'll

1585
01:16:50,260 --> 01:16:57,430
start with one and we'll kind of go from

1586
01:16:52,210 --> 01:17:02,619
there we'll scale it as necessary maybe

1587
01:16:57,430 --> 01:17:03,880
it should be too I don't know um so then

1588
01:17:02,619 --> 01:17:07,449
we need to figure out like where this

1589
01:17:03,880 --> 01:17:10,210
thing is in terms of the sort of where

1590
01:17:07,449 --> 01:17:14,500
the the actual voxel is in space and

1591
01:17:10,210 --> 01:17:18,670
again we need this to be like locked to

1592
01:17:14,500 --> 01:17:21,550
the voxel seldom so we need it to be

1593
01:17:18,670 --> 01:17:24,039
spatially coherent so that it's

1594
01:17:21,550 --> 01:17:26,770
basically truncated right we don't want

1595
01:17:24,039 --> 01:17:28,719
it to have I mean we want it to be so

1596
01:17:26,770 --> 01:17:32,700
that it moves an entire voxel cell at a

1597
01:17:28,719 --> 01:17:35,560
time when it moves so we need the large

1598
01:17:32,699 --> 01:17:38,529
voxel and the hot voxel to be like

1599
01:17:35,560 --> 01:17:40,270
aligned in that way so if we look at how

1600
01:17:38,529 --> 01:17:42,759
we're gonna do this part here and we'll

1601
01:17:40,270 --> 01:17:45,840
look and we'll construct the the light

1602
01:17:42,760 --> 01:17:45,840
bounds in a second here

1603
01:17:51,140 --> 01:18:10,800
this is gonna just be this actually

1604
01:18:07,020 --> 01:18:13,770
remember what we had for our VIII's so

1605
01:18:10,800 --> 01:18:16,920
if we look at what we would use to

1606
01:18:13,770 --> 01:18:20,540
construct this it's like a rectangle dim

1607
01:18:16,920 --> 01:18:27,000
right like it's a record rectum in dim

1608
01:18:20,539 --> 01:18:28,769
so it's rectum in dim and it's

1609
01:18:27,000 --> 01:18:35,149
specifically the three-dimensional

1610
01:18:28,770 --> 01:18:35,150
version so it's this so the light bounds

1611
01:18:36,439 --> 01:18:40,619
is going to be reverse constructive now

1612
01:18:39,090 --> 01:18:43,949
so instead of passing it in we're gonna

1613
01:18:40,619 --> 01:18:46,470
construct it from the voxel and we're

1614
01:18:43,949 --> 01:18:48,630
gonna say that it's the light dimension

1615
01:18:46,470 --> 01:18:50,250
which is this Hadamard product here

1616
01:18:48,630 --> 01:18:53,520
whatever the cell did cell count is

1617
01:18:50,250 --> 01:18:56,850
times the box will sell Tim and then the

1618
01:18:53,520 --> 01:19:00,180
minimum value is just the that hot

1619
01:18:56,850 --> 01:19:02,550
corner right so then what we have to do

1620
01:19:00,180 --> 01:19:04,710
is figure out where this goes right and

1621
01:19:02,550 --> 01:19:08,310
this is relative to the camera but again

1622
01:19:04,710 --> 01:19:11,760
then truncated based on it's sort of

1623
01:19:08,310 --> 01:19:13,980
divisor right now the Vox mid corner

1624
01:19:11,760 --> 01:19:18,619
large is easier because that is

1625
01:19:13,979 --> 01:19:22,949
literally just an offset from the hop

1626
01:19:18,619 --> 01:19:29,010
from the hot corner so this is literally

1627
01:19:22,949 --> 01:19:32,300
just like you know a displacement and

1628
01:19:29,010 --> 01:19:39,690
it's specifically a displacement of the

1629
01:19:32,300 --> 01:19:41,730
cell dimension x however you know

1630
01:19:39,689 --> 01:19:45,449
whatever that hot corner value is that's

1631
01:19:41,729 --> 01:19:47,519
like the offset inside our larger voxel

1632
01:19:45,449 --> 01:19:50,039
so you know if we look at what we've got

1633
01:19:47,520 --> 01:19:52,770
here and we've got like min corner hot

1634
01:19:50,039 --> 01:19:54,779
and corner large this hot corner eye is

1635
01:19:52,770 --> 01:19:58,970
the thing that says how many voxels

1636
01:19:54,779 --> 01:20:01,579
squares you go to get from the large

1637
01:19:58,970 --> 01:20:06,340
corner to the hot corner that

1638
01:20:01,579 --> 01:20:21,019
lives inside of it so it would be this I

1639
01:20:06,340 --> 01:20:28,340
don't know if we have a v3 converter for

1640
01:20:21,020 --> 01:20:31,340
v3 s is just I must say we do and if we

1641
01:20:28,340 --> 01:20:39,110
don't I'll make one um so we have a

1642
01:20:31,340 --> 01:20:46,250
Hadamard product between those two and I

1643
01:20:39,109 --> 01:20:49,960
think that's it alright so obviously our

1644
01:20:46,250 --> 01:20:49,960
box sell dim and I don't know why I

1645
01:20:50,260 --> 01:20:58,270
didn't set this to an actual full vector

1646
01:20:52,609 --> 01:20:58,269
obviously it is this is supposed to be

1647
01:20:58,510 --> 01:21:15,079
yeah the mid corner hot this is actually

1648
01:21:05,449 --> 01:21:17,960
offset that way in this case it looks

1649
01:21:15,079 --> 01:21:20,659
like hot corner I'd most missing its

1650
01:21:17,960 --> 01:21:28,550
access pointer what else you got for me

1651
01:21:20,659 --> 01:21:32,349
compiler yeah so this cell count is not

1652
01:21:28,550 --> 01:21:35,510
an actual vector so that's a bit of a

1653
01:21:32,350 --> 01:21:38,990
screw-up there so what we actually want

1654
01:21:35,510 --> 01:21:41,060
here is the cell count in cell count

1655
01:21:38,989 --> 01:21:46,639
really doesn't need to exist I guess and

1656
01:21:41,060 --> 01:21:49,970
so in this case the cell count doesn't

1657
01:21:46,640 --> 01:21:52,730
vary over the voxel so we're really just

1658
01:21:49,970 --> 01:21:55,400
lofting it to it f32 and multiplying it

1659
01:21:52,729 --> 01:22:03,349
by the dim right it's just a scalar

1660
01:21:55,399 --> 01:22:06,109
multiply and in the light dim we don't

1661
01:22:03,350 --> 01:22:08,590
really compute at this point so we would

1662
01:22:06,109 --> 01:22:08,589
need to

1663
01:22:12,460 --> 01:22:24,050
so we're looking at something more like

1664
01:22:14,600 --> 01:22:26,900
that and so the only thing we really

1665
01:22:24,050 --> 01:22:30,460
need to know now is where actually is

1666
01:22:26,899 --> 01:22:32,839
the lighting relative to the camera and

1667
01:22:30,460 --> 01:22:34,100
it's kind of a little bit tricky to

1668
01:22:32,840 --> 01:22:37,460
figure out where that's going to be

1669
01:22:34,100 --> 01:22:40,190
obviously but again what we need it to

1670
01:22:37,460 --> 01:22:43,989
what we need to do is we need to

1671
01:22:40,189 --> 01:22:48,399
determine like what that value would be

1672
01:22:43,989 --> 01:22:52,099
locked to a world space coordinate right

1673
01:22:48,399 --> 01:22:54,319
so if you take a look at the origin P

1674
01:22:52,100 --> 01:22:58,039
and then you look at the camera offset

1675
01:22:54,319 --> 01:23:01,250
from origin so the problem that we have

1676
01:22:58,039 --> 01:23:06,380
now is we need to like make sure that

1677
01:23:01,250 --> 01:23:13,189
the camera offset in actual like like

1678
01:23:06,380 --> 01:23:17,539
literal space we need to make sure these

1679
01:23:13,189 --> 01:23:21,139
voxels don't shift around right now what

1680
01:23:17,539 --> 01:23:28,340
I would like to say so if we take a look

1681
01:23:21,140 --> 01:23:30,800
at the world position right then inside

1682
01:23:28,340 --> 01:23:33,860
where we actually determine the world

1683
01:23:30,800 --> 01:23:39,170
physician information you know we've got

1684
01:23:33,859 --> 01:23:44,329
a value in here that's like chunk dim in

1685
01:23:39,170 --> 01:23:57,340
meters and if we look at what that is

1686
01:23:44,329 --> 01:23:57,340
set to right the crate world

1687
01:23:58,340 --> 01:24:01,510
[Music]

1688
01:24:02,630 --> 01:24:09,359
there it is so if you look at where we

1689
01:24:05,789 --> 01:24:13,529
set world chunked him in meters you can

1690
01:24:09,359 --> 01:24:16,259
see that like the actual like sort of

1691
01:24:13,529 --> 01:24:19,439
stepping of the world in integer

1692
01:24:16,260 --> 01:24:22,440
coordinates ends up mapping down to like

1693
01:24:19,439 --> 01:24:28,889
sort of roughly like a room ish sized

1694
01:24:22,439 --> 01:24:32,419
area more or less so you know we don't

1695
01:24:28,890 --> 01:24:40,230
probably want the lighting voxel locked

1696
01:24:32,420 --> 01:24:42,270
well maybe we do I don't know that we

1697
01:24:40,229 --> 01:24:50,459
really want the lighting voxel locked to

1698
01:24:42,270 --> 01:24:54,480
that I mean maybe we do but doesn't seem

1699
01:24:50,460 --> 01:24:59,010
good so the problem that we're gonna

1700
01:24:54,479 --> 01:25:02,309
have here is we have to figure out how

1701
01:24:59,010 --> 01:25:07,260
to produce an accurate locked light

1702
01:25:02,310 --> 01:25:10,710
value that's truncated but that's

1703
01:25:07,260 --> 01:25:19,350
actually pretty tough so the reason that

1704
01:25:10,710 --> 01:25:22,579
this is difficult right is because if

1705
01:25:19,350 --> 01:25:24,960
you look at what we need to compute

1706
01:25:22,579 --> 01:25:29,489
coming into this function we have an

1707
01:25:24,960 --> 01:25:33,569
origin p value which we can turn into a

1708
01:25:29,489 --> 01:25:35,250
full float if we want to but the problem

1709
01:25:33,569 --> 01:25:39,199
is it will lose precision when we do

1710
01:25:35,250 --> 01:25:43,800
that so we need to figure out is where

1711
01:25:39,199 --> 01:25:51,119
should we be like we almost need to know

1712
01:25:43,800 --> 01:25:54,720
what the low bits are of the thing which

1713
01:25:51,119 --> 01:26:00,090
is is tricky so I I gotta think about

1714
01:25:54,720 --> 01:26:02,300
how we would do this hmm that's a tough

1715
01:26:00,090 --> 01:26:02,300
one

1716
01:26:03,060 --> 01:26:06,939
[Music]

1717
01:26:12,300 --> 01:26:15,989
this is something I wish I wasn't so

1718
01:26:13,979 --> 01:26:18,779
hungry I'm very hungry right now I don't

1719
01:26:15,988 --> 01:26:25,169
think very good what I'm not eating

1720
01:26:18,779 --> 01:26:29,268
I feel like this demands like at least

1721
01:26:25,170 --> 01:26:29,269
some peanuts or something whole a second

1722
01:26:51,670 --> 01:26:59,140
all right so the problem that we have

1723
01:26:55,699 --> 01:27:03,829
let's crunch on some peanuts shall we

1724
01:26:59,140 --> 01:27:10,579
much there all right so the problem that

1725
01:27:03,829 --> 01:27:14,289
we have here is the thing we want to

1726
01:27:10,579 --> 01:27:17,829
compute is you want to take origin P

1727
01:27:14,289 --> 01:27:22,850
plus the camera offset from the origin

1728
01:27:17,829 --> 01:27:26,539
we want to produce like a v3 from those

1729
01:27:22,850 --> 01:27:33,070
and then we want to divide by the voxel

1730
01:27:26,539 --> 01:27:33,069
seldom so x infox seldom basically write

1731
01:27:36,010 --> 01:27:47,480
and use something rounded to that as a

1732
01:27:45,109 --> 01:27:51,170
whole number right we want we want to

1733
01:27:47,479 --> 01:27:58,909
align this to a whole number multiple of

1734
01:27:51,170 --> 01:28:01,420
the voxel seldom in space right and the

1735
01:27:58,909 --> 01:28:01,420
problem is

1736
01:28:03,010 --> 01:28:11,470
if we literally did just a step so I was

1737
01:28:05,380 --> 01:28:16,480
sang we would lose precision in our

1738
01:28:11,470 --> 01:28:18,880
floats so we can do this a number of

1739
01:28:16,479 --> 01:28:22,599
ways one is we can just do the

1740
01:28:18,880 --> 01:28:24,940
computation in doubles I could the other

1741
01:28:22,600 --> 01:28:27,570
is we have to work out the math to

1742
01:28:24,939 --> 01:28:29,649
compute the value we actually want

1743
01:28:27,569 --> 01:28:34,899
without ever actually explicitly

1744
01:28:29,649 --> 01:28:39,629
creating the values right hopefully that

1745
01:28:34,899 --> 01:28:39,629
makes some sense so

1746
01:28:46,010 --> 01:28:56,440
I already need the whiteboard for this I

1747
01:28:53,590 --> 01:29:01,400
don't know if I can do it in ten minutes

1748
01:28:56,439 --> 01:29:13,000
but I'll try and we'll see where we go

1749
01:29:01,399 --> 01:29:20,259
from now I own room to have some peanuts

1750
01:29:13,000 --> 01:29:20,260
on hand for streams in general all right

1751
01:29:22,329 --> 01:29:40,100
problem solved so I neglected to test

1752
01:29:36,319 --> 01:29:41,449
the actual welcome Tabet when I moved

1753
01:29:40,100 --> 01:29:42,950
the set up here so this may not even

1754
01:29:41,449 --> 01:29:45,619
work it looks like it is at least

1755
01:29:42,949 --> 01:29:47,149
nominally plugged in so that's a good

1756
01:29:45,619 --> 01:29:51,609
sign

1757
01:29:47,149 --> 01:29:51,609
let's go ahead and open up Milton here

1758
01:29:52,449 --> 01:29:57,488
so Milton

1759
01:30:11,510 --> 01:30:20,840
I don't know what I want to call this

1760
01:30:15,010 --> 01:30:25,130
wait how does it day 563 is that really

1761
01:30:20,840 --> 01:30:28,909
right hold on a minute is that it is

1762
01:30:25,130 --> 01:30:38,328
that is that wrong it's a little late

1763
01:30:28,908 --> 01:30:39,399
now but is that wrong yeah that's

1764
01:30:38,328 --> 01:30:42,439
totally wrong

1765
01:30:39,399 --> 01:30:52,029
how did we end up if this is this is not

1766
01:30:42,439 --> 01:30:58,458
this is day 566 isn't it anyone isn't it

1767
01:30:52,029 --> 01:31:02,599
isn't it day 566 does anyone know I'm

1768
01:30:58,458 --> 01:31:07,118
gonna leave it as that if somebody knows

1769
01:31:02,599 --> 01:31:07,119
what day it actually is please tell me

1770
01:31:11,078 --> 01:31:14,109
all right

1771
01:31:15,029 --> 01:31:30,149
I think it's day 566 better I think so

1772
01:31:25,079 --> 01:31:36,539
look what was it up here so that was a

1773
01:31:30,149 --> 01:31:39,299
564 right so if that was day 564 then it

1774
01:31:36,539 --> 01:31:41,159
certainly can't be day 562 or whatever

1775
01:31:39,300 --> 01:31:43,340
we had on there that's like totally

1776
01:31:41,159 --> 01:31:43,340
wrong

1777
01:31:59,469 --> 01:32:07,480
so we need to align our voxels and what

1778
01:32:02,920 --> 01:32:14,969
we've got here is we have essentially a

1779
01:32:07,479 --> 01:32:14,968
problem of one set of grids oh wait

1780
01:32:15,060 --> 01:32:24,310
there we go we have what amounts to one

1781
01:32:20,770 --> 01:32:27,190
set of grids and we have another set of

1782
01:32:24,310 --> 01:32:29,260
grids that we want on top of those sets

1783
01:32:27,189 --> 01:32:31,210
of grids and we want to make sure that

1784
01:32:29,260 --> 01:32:34,600
they always line up right

1785
01:32:31,210 --> 01:32:36,609
not these two grids but this grid that

1786
01:32:34,600 --> 01:32:38,469
operates inside of this other grid we

1787
01:32:36,609 --> 01:32:42,429
want to make sure that they always line

1788
01:32:38,469 --> 01:32:45,550
up like that right so or like this or

1789
01:32:42,430 --> 01:32:47,829
whatever we never want to voxel it like

1790
01:32:45,550 --> 01:32:50,010
we never want our voxel to be like here

1791
01:32:47,829 --> 01:32:53,140
on one frame and then the simulation

1792
01:32:50,010 --> 01:32:55,570
center shifts and on the next frame it's

1793
01:32:53,140 --> 01:32:57,850
like that or something right so we

1794
01:32:55,569 --> 01:33:00,969
always want cells to have their centers

1795
01:32:57,850 --> 01:33:03,430
in the same places and we just shift the

1796
01:33:00,969 --> 01:33:05,230
voxel around so from frame to frame we

1797
01:33:03,430 --> 01:33:07,860
may move it's like they're on one frame

1798
01:33:05,229 --> 01:33:10,419
and on the next frame it should be like

1799
01:33:07,859 --> 01:33:12,549
exactly there but one cell over or

1800
01:33:10,420 --> 01:33:17,340
something but it always should move on

1801
01:33:12,550 --> 01:33:18,840
multiples in in some way like that right

1802
01:33:17,340 --> 01:33:23,250
okay

1803
01:33:18,840 --> 01:33:28,420
so the problem that we have is we are

1804
01:33:23,250 --> 01:33:32,229
working off of some oops we're working

1805
01:33:28,420 --> 01:33:35,800
off of some center point where that

1806
01:33:32,229 --> 01:33:40,869
center point is not the same size grid

1807
01:33:35,800 --> 01:33:43,150
right so if I actually bring up the the

1808
01:33:40,869 --> 01:33:45,698
grid size here let's suppose the tile

1809
01:33:43,149 --> 01:33:50,259
size is is really big right so like

1810
01:33:45,698 --> 01:33:52,539
here's the world grid and then our voxel

1811
01:33:50,260 --> 01:33:54,340
grid is like this tiny grid inside there

1812
01:33:52,539 --> 01:33:57,609
right it looks like that

1813
01:33:54,340 --> 01:34:01,119
that makes sense and we're trying to

1814
01:33:57,609 --> 01:34:03,670
align to this but our coordinate system

1815
01:34:01,119 --> 01:34:08,198
is based off of like the center of like

1816
01:34:03,670 --> 01:34:11,079
this right and that makes it really

1817
01:34:08,198 --> 01:34:13,269
difficult to reason about because if

1818
01:34:11,079 --> 01:34:17,500
we're trying to align two

1819
01:34:13,270 --> 01:34:20,560
this grid spacing this grid spacing is

1820
01:34:17,500 --> 01:34:23,619
unrelated right it doesn't we don't

1821
01:34:20,560 --> 01:34:26,200
start off being aligned to this grid

1822
01:34:23,619 --> 01:34:28,539
when we're at the center point of the

1823
01:34:26,199 --> 01:34:30,760
other grid if we were we'd be done

1824
01:34:28,539 --> 01:34:34,000
because we just align the camera offset

1825
01:34:30,760 --> 01:34:38,230
vector and be done right so our problem

1826
01:34:34,000 --> 01:34:43,329
boils down to giving a world position

1827
01:34:38,229 --> 01:34:50,489
right which remember is like written in

1828
01:34:43,329 --> 01:34:58,059
the form like index X index y index Z

1829
01:34:50,489 --> 01:35:02,880
right how to mark product with the world

1830
01:34:58,060 --> 01:35:06,550
chunk dim so chunk X chunk Y chunk Z

1831
01:35:02,880 --> 01:35:13,539
right this is the like index this is the

1832
01:35:06,550 --> 01:35:18,430
chunk dim so the Hadamard product here

1833
01:35:13,539 --> 01:35:22,000
of these two gives us what we want to

1834
01:35:18,430 --> 01:35:25,690
know about the center point perhaps of

1835
01:35:22,000 --> 01:35:30,029
this right eye and if I'm not mistaken

1836
01:35:25,689 --> 01:35:30,029
is that is that the entirety of it

1837
01:35:38,789 --> 01:35:43,140
yes oh you can see here like when you

1838
01:35:41,109 --> 01:35:47,769
subtract two of these positions right

1839
01:35:43,140 --> 01:35:52,390
all you really do is and when you when

1840
01:35:47,770 --> 01:35:56,100
you look at the offset as well right you

1841
01:35:52,390 --> 01:35:56,100
can see we can we can alkalis chord

1842
01:36:24,679 --> 01:36:44,239
hmm so I don't really see anywhere where

1843
01:36:42,738 --> 01:36:54,078
we make any other assumptions about the

1844
01:36:44,238 --> 01:36:56,808
world at all honestly so all we really

1845
01:36:54,078 --> 01:37:03,228
know is that we have a world chunk

1846
01:36:56,809 --> 01:37:06,079
dimming meters you can see we literally

1847
01:37:03,229 --> 01:37:09,559
are producing this and we want to make

1848
01:37:06,078 --> 01:37:11,389
sure that the thing that comes like when

1849
01:37:09,559 --> 01:37:13,550
we come out of this we're gonna have

1850
01:37:11,389 --> 01:37:15,998
some position like here and we just want

1851
01:37:13,550 --> 01:37:21,498
to know what the closest thing would be

1852
01:37:15,998 --> 01:37:23,300
aligned to our voxel grid right so we

1853
01:37:21,498 --> 01:37:28,550
basically have another thing here which

1854
01:37:23,300 --> 01:37:32,029
is the light like dim the light cell dim

1855
01:37:28,550 --> 01:37:38,559
right and this is the chunk dim so we

1856
01:37:32,029 --> 01:37:42,170
have like an LX and ly and LZ right and

1857
01:37:38,559 --> 01:37:45,130
what we want to know is after we do this

1858
01:37:42,170 --> 01:37:49,090
multiplication we want to know our

1859
01:37:45,130 --> 01:37:53,239
relative standing versus the light voxel

1860
01:37:49,090 --> 01:38:02,179
so we want to be able to to round it to

1861
01:37:53,238 --> 01:38:10,188
the nearest one of those right so if you

1862
01:38:02,179 --> 01:38:12,800
wanted to know you know I times C

1863
01:38:10,189 --> 01:38:15,590
because we could this is entirely scaler

1864
01:38:12,800 --> 01:38:17,719
right so we don't actually care about

1865
01:38:15,590 --> 01:38:20,958
the fact that these are vectors at all

1866
01:38:17,719 --> 01:38:25,908
this is a completely separate thing so

1867
01:38:20,958 --> 01:38:31,880
if we take I times C and divide it by L

1868
01:38:25,908 --> 01:38:34,819
right this value is going to tell us

1869
01:38:31,880 --> 01:38:37,788
which cell we're in in the light voxel

1870
01:38:34,819 --> 01:38:39,059
in absolute terms and all we really want

1871
01:38:37,788 --> 01:38:42,579
to know

1872
01:38:39,060 --> 01:38:45,910
it is essentially the modulus here right

1873
01:38:42,579 --> 01:38:54,279
so what we really want to know is what

1874
01:38:45,909 --> 01:38:55,930
is I times C mod L right that's what we

1875
01:38:54,279 --> 01:38:58,840
want to know because if we have that

1876
01:38:55,930 --> 01:39:00,700
value then we can do then we can solve

1877
01:38:58,840 --> 01:39:04,569
the problem because then we know how far

1878
01:39:00,699 --> 01:39:07,119
we are from an actual from the part of

1879
01:39:04,569 --> 01:39:08,559
the cell that would be perfectly aligned

1880
01:39:07,119 --> 01:39:13,979
with our light boxes in world space

1881
01:39:08,560 --> 01:39:13,980
right so

1882
01:39:22,219 --> 01:39:39,260
I mean since this is just a

1883
01:39:27,680 --> 01:39:44,420
multiplication presumably it's more or

1884
01:39:39,260 --> 01:39:48,699
less going to be the same thing like if

1885
01:39:44,420 --> 01:39:54,230
you imagined that this was a divide

1886
01:39:48,698 --> 01:39:57,319
instead of a modulus right then what you

1887
01:39:54,229 --> 01:40:05,869
would expect to see is you would expect

1888
01:39:57,319 --> 01:40:10,429
to see I times C divided by L could be

1889
01:40:05,869 --> 01:40:17,920
factored separately as I over L times C

1890
01:40:10,430 --> 01:40:17,920
over L and you'd get the same I'm sorry

1891
01:40:18,010 --> 01:40:21,460
that's not correct

1892
01:40:25,449 --> 01:40:29,630
trying to think of how I would factor

1893
01:40:27,560 --> 01:40:37,300
this cuz it would just be I times C over

1894
01:40:29,630 --> 01:40:39,380
L right that's all you would see so I

1895
01:40:37,300 --> 01:40:42,369
trying to think of yet what I could do

1896
01:40:39,380 --> 01:40:42,369
here that wouldn't have this problem

1897
01:40:50,390 --> 01:40:54,260
you'd think in all these years of

1898
01:40:52,159 --> 01:40:55,819
programming I would have had some time

1899
01:40:54,260 --> 01:40:56,659
when I wanted to factor a mod just I've

1900
01:40:55,819 --> 01:41:06,799
never done that before

1901
01:40:56,659 --> 01:41:08,599
I mean I can certainly add more stuff in

1902
01:41:06,800 --> 01:41:11,600
here right so like if I wanted to I

1903
01:41:08,600 --> 01:41:15,380
could factor it as I over L times C over

1904
01:41:11,600 --> 01:41:17,930
L and what I would end up with is I see

1905
01:41:15,380 --> 01:41:21,940
l squared at the bottom so if I wanted

1906
01:41:17,930 --> 01:41:28,490
to I could just knock out an L right

1907
01:41:21,939 --> 01:41:31,839
meaning this L over 1 here so if I do I

1908
01:41:28,489 --> 01:41:36,050
over L times C over L times L over 1

1909
01:41:31,840 --> 01:41:41,470
that would give me the factored version

1910
01:41:36,050 --> 01:41:48,590
right you know that multiplies to this

1911
01:41:41,470 --> 01:41:53,480
so if it was a divide and I just want to

1912
01:41:48,590 --> 01:41:57,730
know what the divided number is I can

1913
01:41:53,479 --> 01:42:02,089
break it apart and if I broke it apart

1914
01:41:57,729 --> 01:42:06,289
each one of these terms can be dealt

1915
01:42:02,090 --> 01:42:13,000
with separately and I know this one is

1916
01:42:06,289 --> 01:42:18,680
safe and I know this one is safe and

1917
01:42:13,000 --> 01:42:20,960
then this one I could guarantee was safe

1918
01:42:18,680 --> 01:42:25,159
because I could make sure that this

1919
01:42:20,960 --> 01:42:26,930
value was in integer right I can totally

1920
01:42:25,159 --> 01:42:28,729
make like right now I was thinking that

1921
01:42:26,930 --> 01:42:31,400
it would just be 2 right here's what I

1922
01:42:28,729 --> 01:42:37,250
think I put in there um and then this

1923
01:42:31,399 --> 01:42:46,579
would be safe as well right so if I want

1924
01:42:37,250 --> 01:42:48,920
to do a divide I certainly can the

1925
01:42:46,579 --> 01:42:51,920
question is just how would I recompose

1926
01:42:48,920 --> 01:42:57,100
the modulus because a modulus and divide

1927
01:42:51,920 --> 01:42:57,100
aren't the same thing right so

1928
01:42:58,819 --> 01:43:12,409
this tells me what I need to know for

1929
01:43:01,399 --> 01:43:13,849
how far yeah yeah like I don't really

1930
01:43:12,409 --> 01:43:23,949
see that really tells me much of

1931
01:43:13,850 --> 01:43:23,950
anything at all right so I'm curious

1932
01:43:39,649 --> 01:43:58,219
that's not really what I wanted this

1933
01:43:48,349 --> 01:44:00,590
this looks like what you would want of

1934
01:43:58,219 --> 01:44:02,719
course I don't know enough math to know

1935
01:44:00,590 --> 01:44:05,300
whether I should trust the math version

1936
01:44:02,719 --> 01:44:06,800
of statics changed the programming

1937
01:44:05,300 --> 01:44:18,079
version of Stack Exchange is pretty

1938
01:44:06,800 --> 01:44:20,179
risky but and these are additions so I

1939
01:44:18,078 --> 01:44:25,849
really want just a concise statement of

1940
01:44:20,179 --> 01:44:29,828
the of how which options I really have

1941
01:44:25,849 --> 01:44:29,828
modulus right

1942
01:44:46,750 --> 01:44:52,470
isn't there something from mathworld or

1943
01:44:48,970 --> 01:44:52,470
something that I could use here

1944
01:44:57,439 --> 01:45:04,699
this is not well okay maybe it is sort

1945
01:45:02,519 --> 01:45:04,699
of

1946
01:45:10,109 --> 01:45:18,359
I mean yeah I mean you could phrase it

1947
01:45:15,060 --> 01:45:21,810
in this in this way right so if a times

1948
01:45:18,359 --> 01:45:27,539
B mod C is the same as a mod C times B

1949
01:45:21,810 --> 01:45:31,050
mod C mod C then we certainly could

1950
01:45:27,539 --> 01:45:34,560
phrase it that way because we do have

1951
01:45:31,050 --> 01:45:41,600
that the problem is I'm not 100% certain

1952
01:45:34,560 --> 01:45:41,600
that we actually get much out of that

1953
01:45:41,779 --> 01:45:53,929
because again you can kind of see the

1954
01:45:44,550 --> 01:46:05,070
nastiness here right like if we have a

1955
01:45:53,930 --> 01:46:10,710
times B mod C equals a mod C did that

1956
01:46:05,069 --> 01:46:15,059
right a mod C times B mod C mod C right

1957
01:46:10,710 --> 01:46:18,210
if we're doing that then the problem

1958
01:46:15,060 --> 01:46:19,170
that we have is let's suppose we break

1959
01:46:18,210 --> 01:46:21,720
it up that way

1960
01:46:19,170 --> 01:46:24,569
it's pretty easy for us to say well it's

1961
01:46:21,720 --> 01:46:27,390
the index and the chunk mob the L right

1962
01:46:24,569 --> 01:46:37,019
and so here we would just say well index

1963
01:46:27,390 --> 01:46:42,390
mod L times chunk mod L mod L right and

1964
01:46:37,020 --> 01:46:46,080
that's fine the problem is this we still

1965
01:46:42,390 --> 01:46:49,590
don't really know what to do with

1966
01:46:46,079 --> 01:46:51,600
oh well no it's okay

1967
01:46:49,590 --> 01:46:54,449
so all right no we're fine we're fine

1968
01:46:51,600 --> 01:46:56,490
we're fine Thank You Khan Academy for

1969
01:46:54,449 --> 01:46:58,639
having that as the first thing on the

1970
01:46:56,489 --> 01:46:58,639
page

1971
01:47:01,420 --> 01:47:07,600
I do think that's fine because if we

1972
01:47:06,039 --> 01:47:10,720
think about what's gonna happen here

1973
01:47:07,600 --> 01:47:15,280
these two both are going to be just the

1974
01:47:10,720 --> 01:47:18,039
modulus that we've done right so if we

1975
01:47:15,279 --> 01:47:20,079
do I mod L we will get a small number

1976
01:47:18,039 --> 01:47:22,449
and if we do see mod L will also get a

1977
01:47:20,079 --> 01:47:25,800
small number right no matter how big I

1978
01:47:22,449 --> 01:47:30,609
and C were we should be fine there and

1979
01:47:25,800 --> 01:47:32,350
so as long as this we this number we

1980
01:47:30,609 --> 01:47:34,029
know is small and this number is small

1981
01:47:32,350 --> 01:47:35,860
and this number is small and that R so

1982
01:47:34,029 --> 01:47:39,399
this is the only number that could be

1983
01:47:35,859 --> 01:47:46,179
quite large so as long as we could

1984
01:47:39,399 --> 01:47:49,509
compute the modulus of that easily then

1985
01:47:46,180 --> 01:47:52,240
I think we're okay and so I think all we

1986
01:47:49,510 --> 01:47:57,670
need to do is make sure that the that

1987
01:47:52,239 --> 01:48:05,019
the that the light cell dimension is an

1988
01:47:57,670 --> 01:48:09,690
integer right if we just make sure that

1989
01:48:05,020 --> 01:48:16,870
the lights all dimension is an integer

1990
01:48:09,689 --> 01:48:21,609
we should be able to take the mod very

1991
01:48:16,869 --> 01:48:26,559
easily for example if we did pick a

1992
01:48:21,609 --> 01:48:30,039
number like 2 or 4 right then we would

1993
01:48:26,560 --> 01:48:33,190
be able to do the mod on the index for

1994
01:48:30,039 --> 01:48:35,319
the chunks we'd be able to do that

1995
01:48:33,189 --> 01:48:37,389
directly we would not need to ever

1996
01:48:35,319 --> 01:48:39,719
actually compute it right we could just

1997
01:48:37,390 --> 01:48:44,050
do a straightforward bit operation

1998
01:48:39,720 --> 01:48:48,250
because the mod the mod 2 or the mod 4

1999
01:48:44,050 --> 01:48:53,020
or whatever of you know any power of 2

2000
01:48:48,250 --> 01:48:55,359
value would just be the bottom bits of

2001
01:48:53,020 --> 01:48:57,730
the number so we know we wouldn't have

2002
01:48:55,359 --> 01:49:00,389
any numerical stability issues if we

2003
01:48:57,729 --> 01:49:02,799
just take the bottom bits of the number

2004
01:49:00,390 --> 01:49:04,570
and we know that those there's only a

2005
01:49:02,800 --> 01:49:06,880
few so we take like the to bottom it's

2006
01:49:04,569 --> 01:49:12,069
of the number and we multiply that by

2007
01:49:06,880 --> 01:49:14,819
the actual modulus of C times L of C mod

2008
01:49:12,069 --> 01:49:16,380
L right

2009
01:49:14,819 --> 01:49:20,009
would give us another small number that

2010
01:49:16,380 --> 01:49:20,430
could then be model so I'm okay with

2011
01:49:20,010 --> 01:49:25,159
that

2012
01:49:20,430 --> 01:49:29,130
right if we were to say like it's 2:00

2013
01:49:25,159 --> 01:49:30,389
or something right then we wouldn't we

2014
01:49:29,130 --> 01:49:34,159
want it when we want to take this

2015
01:49:30,390 --> 01:49:36,990
modulus we take a look at the origin P

2016
01:49:34,159 --> 01:49:43,170
so in world position right and it's got

2017
01:49:36,989 --> 01:49:45,449
this like chunk x y and z so if we were

2018
01:49:43,170 --> 01:49:49,319
to just look at those base values I have

2019
01:49:45,449 --> 01:49:51,899
to think about what happens with those

2020
01:49:49,319 --> 01:49:56,689
values when they're negative because

2021
01:49:51,899 --> 01:50:02,039
when they're negative then the mod the

2022
01:49:56,689 --> 01:50:05,549
low bits may need to be like flipped in

2023
01:50:02,039 --> 01:50:10,100
order to get us the right value so I'd

2024
01:50:05,550 --> 01:50:10,100
have to think about that but otherwise

2025
01:50:16,909 --> 01:50:21,809
otherwise I think we're okay

2026
01:50:20,159 --> 01:50:26,309
so what we want to do here is say yeah

2027
01:50:21,810 --> 01:50:27,900
like chunk XY and Z if we just look at

2028
01:50:26,310 --> 01:50:30,539
like what happens with chunk X for

2029
01:50:27,899 --> 01:50:35,759
example and we say we need to know the

2030
01:50:30,539 --> 01:50:41,609
mod of that for a 2 wide cell right then

2031
01:50:35,760 --> 01:50:44,789
all we should have to do I argue is just

2032
01:50:41,609 --> 01:50:48,569
take the inverse of like whatever the

2033
01:50:44,789 --> 01:50:53,010
bottom bits are right and and out the

2034
01:50:48,569 --> 01:50:56,059
rest so and out the top so for two I

2035
01:50:53,010 --> 01:51:03,090
think we just do this right

2036
01:50:56,060 --> 01:51:06,990
that is the mod of yeah of that index

2037
01:51:03,090 --> 01:51:15,920
right so then we need to know what the

2038
01:51:06,989 --> 01:51:15,920
modulus is don't we have modules

2039
01:51:27,039 --> 01:51:31,550
we must have a modulus somewhere we've

2040
01:51:29,810 --> 01:51:37,750
never done a floating-point modulus

2041
01:51:31,550 --> 01:51:37,750
there's no way that can't be true

2042
01:51:45,368 --> 01:51:55,759
seriously huh alright well we'll have to

2043
01:51:54,079 --> 01:51:59,750
get that in there tomorrow as well then

2044
01:51:55,760 --> 01:52:05,659
so we would need the modulus of whatever

2045
01:51:59,750 --> 01:52:08,380
the actual world sizes as well so we

2046
01:52:05,658 --> 01:52:08,379
would need that

2047
01:52:17,538 --> 01:52:25,038
where are you there is just too many

2048
01:52:22,849 --> 01:52:27,860
meters so we need the chunk dim in

2049
01:52:25,038 --> 01:52:30,469
meters and we would need to take the

2050
01:52:27,859 --> 01:52:33,920
modulus of that with respect to the

2051
01:52:30,469 --> 01:52:37,219
light as well so we'd basically need a

2052
01:52:33,920 --> 01:52:39,260
mod to of the chunk dim in meters and

2053
01:52:37,219 --> 01:52:44,840
then we would need to take the modulus

2054
01:52:39,260 --> 01:52:49,780
of the whole thing right like so but in

2055
01:52:44,840 --> 01:52:51,500
theory that's for our particular

2056
01:52:49,779 --> 01:52:54,768
coordinate origin

2057
01:52:51,500 --> 01:52:59,779
that's the offset from an even spacing

2058
01:52:54,769 --> 01:53:03,469
of the voxel cell dimension right so we

2059
01:52:59,779 --> 01:53:08,198
know that this is the you know the X

2060
01:53:03,469 --> 01:53:08,198
displacement basically like this is the

2061
01:53:08,380 --> 01:53:16,760
the offset that we would need to either

2062
01:53:13,939 --> 01:53:20,868
add up to top ourselves off or subtract

2063
01:53:16,760 --> 01:53:23,059
it a way to get to the origin so when we

2064
01:53:20,868 --> 01:53:25,788
want to determine like what the min

2065
01:53:23,059 --> 01:53:30,409
corner is let's say we were doing the

2066
01:53:25,788 --> 01:53:32,448
min corner off of just the origin P as

2067
01:53:30,408 --> 01:53:35,049
opposed to using the camera offset we do

2068
01:53:32,448 --> 01:53:38,359
want to use the camera offset probably

2069
01:53:35,050 --> 01:53:42,409
but let's suppose we did then the min

2070
01:53:38,359 --> 01:53:45,049
corner hot would just be whatever like

2071
01:53:42,408 --> 01:53:47,988
zero zero zero is minus that exodus

2072
01:53:45,050 --> 01:53:49,670
right so it would subtract away that and

2073
01:53:47,988 --> 01:53:54,018
then we would be flooring to the to the

2074
01:53:49,670 --> 01:53:56,960
box hold okay and that's really all we

2075
01:53:54,019 --> 01:53:59,750
were doing unfortunately we don't have a

2076
01:53:56,960 --> 01:54:03,139
modulus operator apparently which is

2077
01:53:59,750 --> 01:54:05,029
news to me so we need to kind of put

2078
01:54:03,139 --> 01:54:07,639
this stuff in there

2079
01:54:05,029 --> 01:54:10,359
I think that's stuff that we will save

2080
01:54:07,639 --> 01:54:15,250
till next time and we'll go to a QA now

2081
01:54:10,359 --> 01:54:15,250
but yeah but that's basically it

2082
01:54:35,099 --> 01:54:40,130
okay good so someone confirmed it was

2083
01:54:37,078 --> 01:54:44,939
day 566 which is what I thought it was

2084
01:54:40,130 --> 01:54:47,699
and so I think that I just set the timer

2085
01:54:44,939 --> 01:54:49,908
wrong or something so wanted to get that

2086
01:54:47,698 --> 01:54:49,908
corrected

2087
01:55:02,198 --> 01:55:06,879
you talking about non-realism

2088
01:55:04,229 --> 01:55:08,469
non-realistic but good-looking art got

2089
01:55:06,880 --> 01:55:11,288
me thinking do you plan on having game

2090
01:55:08,469 --> 01:55:21,849
entities that manipulate light in

2091
01:55:11,288 --> 01:55:24,908
extremely non real ways no we could

2092
01:55:21,849 --> 01:55:28,389
certainly play with it but I had not

2093
01:55:24,908 --> 01:55:31,268
really been considering any of that at

2094
01:55:28,389 --> 01:55:33,099
the moment it would be interesting to

2095
01:55:31,269 --> 01:55:36,699
have entities that sucked light out of a

2096
01:55:33,099 --> 01:55:39,610
room potentially that seems like it

2097
01:55:36,698 --> 01:55:41,558
might be fun I'm not sure about bending

2098
01:55:39,609 --> 01:55:44,109
normals around that sounds like I don't

2099
01:55:41,559 --> 01:55:46,809
think humans would necessarily like that

2100
01:55:44,109 --> 01:55:48,848
effect because they're they wouldn't

2101
01:55:46,809 --> 01:55:53,729
know what to make of it probably it's a

2102
01:55:48,849 --> 01:55:53,729
little bit too much if that makes sense

2103
01:55:55,139 --> 01:56:05,828
why not use mod directly so the the

2104
01:56:00,880 --> 01:56:08,319
modulus this operator doesn't actually

2105
01:56:05,828 --> 01:56:12,609
work for floating-point right it only

2106
01:56:08,319 --> 01:56:17,139
works for it only works for integer

2107
01:56:12,609 --> 01:56:20,799
values and if we're doing modulus on an

2108
01:56:17,139 --> 01:56:24,189
integer then yeah I mean I could write

2109
01:56:20,800 --> 01:56:27,550
it this way and presumably the compiler

2110
01:56:24,189 --> 01:56:31,389
is smart enough to do the right thing

2111
01:56:27,550 --> 01:56:32,590
there but again I kind of want to think

2112
01:56:31,389 --> 01:56:34,179
about what I want to happen when it's

2113
01:56:32,590 --> 01:56:36,159
negative and I need to think about a

2114
01:56:34,179 --> 01:56:38,168
bunch of stuff so I'm just gonna write

2115
01:56:36,158 --> 01:56:40,748
it like this for now and kind of remind

2116
01:56:38,168 --> 01:56:44,948
myself to go in and figure out what I

2117
01:56:40,748 --> 01:56:49,148
actually want to have happen in terms of

2118
01:56:44,948 --> 01:56:51,009
the the floating-point part a

2119
01:56:49,149 --> 01:56:54,099
floating-point modulus you actually have

2120
01:56:51,010 --> 01:56:57,219
to do right you actually have to

2121
01:56:54,099 --> 01:56:59,409
implement that in float somehow and in

2122
01:56:57,219 --> 01:57:02,800
this particular case because it happens

2123
01:56:59,408 --> 01:57:05,198
to be a mod by two honestly we could do

2124
01:57:02,800 --> 01:57:09,909
some bit manipulation and do it if we

2125
01:57:05,198 --> 01:57:13,948
wanted to because a mod by two just so

2126
01:57:09,908 --> 01:57:15,939
happens to be something you could do

2127
01:57:13,948 --> 01:57:22,119
more directly on the

2128
01:57:15,939 --> 01:57:23,379
bit values but I don't know that we

2129
01:57:22,119 --> 01:57:26,920
really want to do that I probably just

2130
01:57:23,380 --> 01:57:30,789
want to implement a regular modulus SSE

2131
01:57:26,920 --> 01:57:32,859
modulus that we just do like a floor a

2132
01:57:30,789 --> 01:57:36,729
floor whistle subtract kind of a thing

2133
01:57:32,859 --> 01:57:42,099
so I don't I don't anticipate doing that

2134
01:57:36,729 --> 01:57:43,389
but you know couldn't you contrive it so

2135
01:57:42,100 --> 01:57:45,699
that chunk dim is always an even

2136
01:57:43,390 --> 01:57:48,550
multiple of light seldom I certainly

2137
01:57:45,698 --> 01:57:49,839
could I could also do the opposite of

2138
01:57:48,550 --> 01:57:55,000
that

2139
01:57:49,840 --> 01:57:59,550
and make sure that that light dim is

2140
01:57:55,000 --> 01:58:05,680
always some small some even proportion

2141
01:57:59,550 --> 01:58:12,940
chunk dim right and that might be

2142
01:58:05,680 --> 01:58:15,159
smarter you know it's hard to say like

2143
01:58:12,939 --> 01:58:19,119
we could just take whatever the size of

2144
01:58:15,159 --> 01:58:21,250
the world dimension is divide it by some

2145
01:58:19,119 --> 01:58:25,869
known value that's the resolution we

2146
01:58:21,250 --> 01:58:29,380
want so we divide it by 17 or we divide

2147
01:58:25,869 --> 01:58:32,859
it by 10 or whatever and we say all

2148
01:58:29,380 --> 01:58:34,869
right now it's just matches in fact yeah

2149
01:58:32,859 --> 01:58:36,399
now that you bring that up I that might

2150
01:58:34,869 --> 01:58:39,420
be smarter because then you don't have

2151
01:58:36,399 --> 01:58:39,420
to worry about this anymore

2152
01:59:03,420 --> 01:59:07,149
that's a really good point I don't know

2153
01:59:05,618 --> 01:59:11,819
I didn't think of that I guess I didn't

2154
01:59:07,149 --> 01:59:11,819
have peanuts for most of the stream

2155
01:59:42,600 --> 01:59:47,100
called a view so are you asking

2156
01:59:44,789 --> 01:59:54,260
basically like how do you write math

2157
01:59:47,100 --> 01:59:54,260
stuff for people to understand clearly

2158
01:59:56,539 --> 02:00:02,909
is that what you're asking

2159
02:00:01,010 --> 02:00:03,989
rational coder asks I'm missing

2160
02:00:02,909 --> 02:00:05,789
something fundamental about spherical

2161
02:00:03,989 --> 02:00:08,489
harmonics I get the idea of decomposing

2162
02:00:05,789 --> 02:00:09,659
areas into spheres but I don't get how

2163
02:00:08,489 --> 02:00:11,159
you could use something like that to

2164
02:00:09,659 --> 02:00:12,599
accumulate some representation of light

2165
02:00:11,159 --> 02:00:14,939
that you can reconstruct would you like

2166
02:00:12,600 --> 02:00:17,550
to provide an interest some time so I

2167
02:00:14,939 --> 02:00:19,710
haven't ever worked with robotics so I

2168
02:00:17,550 --> 02:00:23,159
don't really feel qualified to give an

2169
02:00:19,710 --> 02:00:25,079
intro but what I can tell you to maybe

2170
02:00:23,159 --> 02:00:28,170
help frame the understanding there but

2171
02:00:25,079 --> 02:00:33,180
you should go read about it more it's

2172
02:00:28,170 --> 02:00:36,930
just that the idea of orthogonal basis

2173
02:00:33,180 --> 02:00:39,180
for things in general is that they can

2174
02:00:36,930 --> 02:00:45,300
be added I mean that's sort of why you

2175
02:00:39,180 --> 02:00:49,200
use them in a sense so for example if I

2176
02:00:45,300 --> 02:00:56,750
take and I break down a light source

2177
02:00:49,199 --> 02:01:00,929
right into a set of base light values

2178
02:00:56,750 --> 02:01:05,460
that I know are orthogonal right so I

2179
02:01:00,930 --> 02:01:07,409
know that they don't overlap right in in

2180
02:01:05,460 --> 02:01:09,180
any way they're they're linearly

2181
02:01:07,409 --> 02:01:15,059
independent of each other or whatever

2182
02:01:09,180 --> 02:01:17,280
right then I know that I can add those

2183
02:01:15,060 --> 02:01:19,350
together like a normal vector space and

2184
02:01:17,279 --> 02:01:21,509
I know that I'm getting standard vector

2185
02:01:19,350 --> 02:01:23,010
addition rules out of them right I know

2186
02:01:21,510 --> 02:01:25,320
that all the things that I would want to

2187
02:01:23,010 --> 02:01:27,869
do will work I can scale them by a

2188
02:01:25,319 --> 02:01:29,460
certain amount I can split one into two

2189
02:01:27,869 --> 02:01:31,229
halves and add them back together and

2190
02:01:29,460 --> 02:01:32,819
get the same result rights within the

2191
02:01:31,229 --> 02:01:34,109
two have scaled them add them and I get

2192
02:01:32,819 --> 02:01:36,210
the same result of scaling the original

2193
02:01:34,109 --> 02:01:39,269
right like all the same stuff you would

2194
02:01:36,210 --> 02:01:42,000
want to do in vector spaces spherical

2195
02:01:39,270 --> 02:01:44,940
harmonics are an orthogonal basis in

2196
02:01:42,000 --> 02:01:47,460
that regard as far as I know and so what

2197
02:01:44,939 --> 02:01:50,519
that means is that what you have done

2198
02:01:47,460 --> 02:01:53,399
when you decompose a spherical lighting

2199
02:01:50,520 --> 02:01:55,350
a set of spherical egg samples and you

2200
02:01:53,399 --> 02:01:55,658
can pose them into into basis functions

2201
02:01:55,350 --> 02:01:59,169
that

2202
02:01:55,658 --> 02:02:01,569
Saphira karmic basis functions what

2203
02:01:59,168 --> 02:02:05,260
you're basically saying is specifically

2204
02:02:01,569 --> 02:02:07,840
that they do add to reconstruct the

2205
02:02:05,260 --> 02:02:10,090
original and it was an orthogonal

2206
02:02:07,840 --> 02:02:12,788
decomposition so that if you want to add

2207
02:02:10,090 --> 02:02:15,010
those parameters separately

2208
02:02:12,788 --> 02:02:16,090
they will reconstruct if you'd added the

2209
02:02:15,010 --> 02:02:19,389
two Lighting's

2210
02:02:16,090 --> 02:02:21,099
separately right and this is no

2211
02:02:19,389 --> 02:02:22,328
different than any other deconstruction

2212
02:02:21,099 --> 02:02:26,168
you normally use like the discrete

2213
02:02:22,328 --> 02:02:28,058
cosine transform Fourier transform you

2214
02:02:26,168 --> 02:02:31,238
know laplacian like any kind of

2215
02:02:28,059 --> 02:02:32,949
transform that you normally use they all

2216
02:02:31,238 --> 02:02:36,038
share this property and that's the

2217
02:02:32,948 --> 02:02:37,988
reason why we like them right the reason

2218
02:02:36,038 --> 02:02:41,768
why people like these kind of transforms

2219
02:02:37,988 --> 02:02:43,569
is specifically because if you have a

2220
02:02:41,769 --> 02:02:46,719
transform that you just transfer them

2221
02:02:43,569 --> 02:02:48,788
some values you need you transform it

2222
02:02:46,719 --> 02:02:51,550
and then whatever you do in the other

2223
02:02:48,788 --> 02:02:53,948
space wouldn't correspond to the same

2224
02:02:51,550 --> 02:02:55,570
operations in the original space it's

2225
02:02:53,948 --> 02:02:58,238
really hard to work with that right

2226
02:02:55,569 --> 02:03:00,188
because if you have a nonlinear

2227
02:02:58,238 --> 02:03:01,598
transform like that then unless the

2228
02:03:00,189 --> 02:03:03,939
whole goal of the thing was to do

2229
02:03:01,599 --> 02:03:05,979
nonlinear work with it then you end up

2230
02:03:03,939 --> 02:03:07,479
with a problem of not being able to just

2231
02:03:05,979 --> 02:03:09,119
say oh I want to add these two lights

2232
02:03:07,479 --> 02:03:10,900
together I just add their circle

2233
02:03:09,118 --> 02:03:13,779
harmonic coefficients together whatever

2234
02:03:10,899 --> 02:03:15,308
or I have the Fourier transform of these

2235
02:03:13,779 --> 02:03:16,509
two waveforms I just add them together

2236
02:03:15,309 --> 02:03:20,260
and I get the same thing as adding the

2237
02:03:16,510 --> 02:03:24,429
two waveforms right that is typically

2238
02:03:20,260 --> 02:03:26,650
why you want these kinds of basis

2239
02:03:24,429 --> 02:03:29,918
functions they are the basis functions

2240
02:03:26,649 --> 02:03:31,839
which give you back useful operations we

2241
02:03:29,918 --> 02:03:33,788
can pick other basis functions all day

2242
02:03:31,840 --> 02:03:35,918
long but they won't have those same

2243
02:03:33,788 --> 02:03:37,688
properties if we just randomly pick them

2244
02:03:35,918 --> 02:03:39,578
you have to specifically construct basis

2245
02:03:37,689 --> 02:03:41,199
functions that have our thuggin

2246
02:03:39,578 --> 02:03:44,340
properties if you want to end up with a

2247
02:03:41,198 --> 02:03:44,339
vector space at the end of it right

2248
02:03:57,998 --> 02:04:02,389
okay so-called abuse is yeah essentially

2249
02:04:00,408 --> 02:04:04,069
or maybe anything with lots of jargon

2250
02:04:02,389 --> 02:04:06,380
that's kind of essential to working with

2251
02:04:04,069 --> 02:04:08,208
the subject seriously I find myself on

2252
02:04:06,380 --> 02:04:10,639
the other side a lot when I'm doing like

2253
02:04:08,208 --> 02:04:12,618
FPGA stuff and I have no idea what

2254
02:04:10,639 --> 02:04:14,239
people are talking about but once I

2255
02:04:12,618 --> 02:04:15,618
learn all the jargon it becomes second

2256
02:04:14,238 --> 02:04:19,308
nature to think about things in those

2257
02:04:15,618 --> 02:04:27,589
terms if that makes sense um so I guess

2258
02:04:19,309 --> 02:04:30,529
what I would say is when you are

2259
02:04:27,590 --> 02:04:34,309
explaining something I think it's

2260
02:04:30,529 --> 02:04:39,349
crucial to remember that what you are

2261
02:04:34,309 --> 02:04:43,070
trying to do is form a picture in the

2262
02:04:39,349 --> 02:04:47,349
person's head that works as a matter of

2263
02:04:43,069 --> 02:04:54,288
course right at least this is how I

2264
02:04:47,349 --> 02:04:56,869
think about it because you haven't

2265
02:04:54,288 --> 02:05:01,279
really understood something if you only

2266
02:04:56,868 --> 02:05:03,679
understand it in terms of the jargon you

2267
02:05:01,279 --> 02:05:06,590
only understand it if you understand it

2268
02:05:03,679 --> 02:05:09,940
without meeting the jargon that's how I

2269
02:05:06,590 --> 02:05:13,909
look at things right and as a

2270
02:05:09,939 --> 02:05:17,509
consequence it becomes pretty easy for

2271
02:05:13,908 --> 02:05:20,359
you to know if your explanation actually

2272
02:05:17,510 --> 02:05:22,550
is accessible to a beginner because it

2273
02:05:20,359 --> 02:05:26,598
should be possible to explain the thing

2274
02:05:22,550 --> 02:05:28,670
without any jargon and just mention what

2275
02:05:26,599 --> 02:05:34,190
the jargon is for the thing as you're

2276
02:05:28,670 --> 02:05:36,469
explaining it right so for example when

2277
02:05:34,189 --> 02:05:37,998
I answer a question in the QA I will

2278
02:05:36,469 --> 02:05:41,630
often use jargon because their brief

2279
02:05:37,998 --> 02:05:44,618
answers right like to give a various

2280
02:05:41,630 --> 02:05:47,659
example I just used the word orthogonal

2281
02:05:44,618 --> 02:05:50,029
in an explanation to somebody asking

2282
02:05:47,658 --> 02:05:52,908
about circular or onyx but I didn't

2283
02:05:50,029 --> 02:05:55,038
explain where orthogonal was right when

2284
02:05:52,908 --> 02:05:57,618
I explain things on handmade hero actual

2285
02:05:55,038 --> 02:06:01,130
the first time when we do something I

2286
02:05:57,618 --> 02:06:03,198
don't do that right if I say orthogonal

2287
02:06:01,130 --> 02:06:03,650
I then explain what does that actually

2288
02:06:03,198 --> 02:06:08,299
mean

2289
02:06:03,649 --> 02:06:10,248
right and usually what I see when I see

2290
02:06:08,300 --> 02:06:11,750
math explanations is they're almost

2291
02:06:10,248 --> 02:06:14,769
completely useless

2292
02:06:11,750 --> 02:06:14,770
so for example

2293
02:06:26,868 --> 02:06:39,438
I usually you get this sort of thing

2294
02:06:32,689 --> 02:06:41,570
right so if you look at this this is a

2295
02:06:39,439 --> 02:06:45,889
perfect example of a completely useless

2296
02:06:41,569 --> 02:06:49,929
explanation I would contend that there

2297
02:06:45,889 --> 02:06:54,590
is literally no person on earth period

2298
02:06:49,929 --> 02:06:56,599
full stop there are literally no people

2299
02:06:54,590 --> 02:06:58,699
who don't already know what an

2300
02:06:56,599 --> 02:07:02,418
orthogonal function is who could read

2301
02:06:58,698 --> 02:07:04,609
this right because there's nobody who

2302
02:07:02,418 --> 02:07:08,229
knows integral calculus who doesn't know

2303
02:07:04,609 --> 02:07:10,908
what an orthogonal function is right and

2304
02:07:08,229 --> 02:07:14,208
right off the bat you introduce all of

2305
02:07:10,908 --> 02:07:17,388
this garbage right which is like an

2306
02:07:14,208 --> 02:07:19,099
integral of three functions nobody has

2307
02:07:17,389 --> 02:07:22,519
told you what they are or how to think

2308
02:07:19,099 --> 02:07:23,208
about them right with an integral right

2309
02:07:22,519 --> 02:07:26,958
off the bat

2310
02:07:23,208 --> 02:07:27,889
you've got bracket syntax here write it

2311
02:07:26,958 --> 02:07:30,168
just forget it

2312
02:07:27,889 --> 02:07:33,288
right it's just a it's a nightmare right

2313
02:07:30,168 --> 02:07:35,029
and this is how most math is I don't

2314
02:07:33,288 --> 02:07:36,469
know why I have no idea why

2315
02:07:35,029 --> 02:07:41,840
mathematicians tend to write this way

2316
02:07:36,469 --> 02:07:43,429
right and similarly like if you look at

2317
02:07:41,840 --> 02:07:45,860
like something like the Fourier

2318
02:07:43,429 --> 02:07:49,969
transform that which is like you know

2319
02:07:45,859 --> 02:07:58,908
related here I bet we can get another

2320
02:07:49,969 --> 02:08:00,889
exact version of that right so this is

2321
02:07:58,908 --> 02:08:02,719
completely useless no one who doesn't

2322
02:08:00,889 --> 02:08:04,340
know what the Fourier transform is will

2323
02:08:02,719 --> 02:08:06,800
ever be able to read that equation

2324
02:08:04,340 --> 02:08:09,019
period I guarantee you there is not a

2325
02:08:06,800 --> 02:08:11,300
single human being on earth ever in the

2326
02:08:09,019 --> 02:08:13,760
history of time who didn't know what a

2327
02:08:11,300 --> 02:08:17,989
Fourier transform was read that and went

2328
02:08:13,760 --> 02:08:19,639
oh I understand now no chance zero the

2329
02:08:17,988 --> 02:08:21,378
only people who can use this equation

2330
02:08:19,639 --> 02:08:24,349
are people who already know what the

2331
02:08:21,378 --> 02:08:25,578
Fourier transform is and just need to

2332
02:08:24,349 --> 02:08:27,439
remember what the equation is because

2333
02:08:25,578 --> 02:08:30,908
they forgot or don't want to derive it

2334
02:08:27,439 --> 02:08:33,860
or something right like that's it okay

2335
02:08:30,908 --> 02:08:37,188
similarly this stuff is also completely

2336
02:08:33,859 --> 02:08:40,259
useless F : Arta C is completely

2337
02:08:37,189 --> 02:08:43,800
fricking useless right you

2338
02:08:40,260 --> 02:08:46,039
not like it literally first of all it

2339
02:08:43,800 --> 02:08:48,409
doesn't save any space I don't know why

2340
02:08:46,039 --> 02:08:50,550
mathematicians write stuff like this

2341
02:08:48,409 --> 02:08:56,399
especially not for like in an

2342
02:08:50,550 --> 02:08:59,820
explanatory context right because if you

2343
02:08:56,399 --> 02:09:03,949
just said if you just literally rip

2344
02:08:59,819 --> 02:09:08,130
wrote out the words a Fourier transform

2345
02:09:03,949 --> 02:09:12,210
is something that takes real numbers as

2346
02:09:08,130 --> 02:09:15,630
an input and outputs clump complex

2347
02:09:12,210 --> 02:09:17,460
numbers almost everyone who has had a

2348
02:09:15,630 --> 02:09:20,489
high school math class would understand

2349
02:09:17,460 --> 02:09:23,399
what you meant almost nobody who hasn't

2350
02:09:20,489 --> 02:09:23,819
had graduate math has any idea what that

2351
02:09:23,399 --> 02:09:28,799
is

2352
02:09:23,819 --> 02:09:30,750
right at least not in the US I guarantee

2353
02:09:28,800 --> 02:09:33,090
you if I went to anybody who went to

2354
02:09:30,750 --> 02:09:34,949
high school with me who didn't then go

2355
02:09:33,090 --> 02:09:37,079
on to be a mathematician and I said what

2356
02:09:34,949 --> 02:09:43,349
is F : are arris II mean to you they'd

2357
02:09:37,079 --> 02:09:44,850
say I have no frickin clue right and so

2358
02:09:43,350 --> 02:09:47,490
the important thing is constructing the

2359
02:09:44,850 --> 02:09:49,470
image in someone's mind this is useless

2360
02:09:47,489 --> 02:09:50,909
this is talking to an expert they

2361
02:09:49,470 --> 02:09:53,010
already know what a fourier transform is

2362
02:09:50,909 --> 02:09:55,439
so I have no idea why this is here what

2363
02:09:53,010 --> 02:09:57,780
you want to say instead is a Fourier

2364
02:09:55,439 --> 02:10:00,119
transform is is basically a function it

2365
02:09:57,779 --> 02:10:02,340
converts one thing into another thing

2366
02:10:00,119 --> 02:10:04,559
what are those two things well

2367
02:10:02,340 --> 02:10:06,720
the input to it is a real number the

2368
02:10:04,560 --> 02:10:08,490
output to it is a complex number you

2369
02:10:06,720 --> 02:10:10,409
remember what complex numbers are right

2370
02:10:08,489 --> 02:10:12,090
a complex number is the thing that has a

2371
02:10:10,409 --> 02:10:15,869
real number part right it's a regular

2372
02:10:12,090 --> 02:10:18,210
number like 3.2 and then a complex part

2373
02:10:15,869 --> 02:10:19,800
that's something times I now if you

2374
02:10:18,210 --> 02:10:22,710
forgot what I was from your high school

2375
02:10:19,800 --> 02:10:25,199
math class I is the square root of

2376
02:10:22,710 --> 02:10:26,579
negative one it might be kind of weird

2377
02:10:25,199 --> 02:10:28,439
to think about what the square root of

2378
02:10:26,579 --> 02:10:29,880
negative 1 is because it doesn't

2379
02:10:28,439 --> 02:10:32,429
actually exist that's why we call an

2380
02:10:29,880 --> 02:10:34,560
imaginary number but actually it's not

2381
02:10:32,430 --> 02:10:36,180
so weird if you think about it and the

2382
02:10:34,560 --> 02:10:39,480
reason is it's not so weird is because

2383
02:10:36,180 --> 02:10:43,560
look what if I wanted to say I gave you

2384
02:10:39,479 --> 02:10:45,179
a number right any number seven right

2385
02:10:43,560 --> 02:10:46,980
and I said take the square root of it

2386
02:10:45,180 --> 02:10:49,140
you know how to do it on your calculator

2387
02:10:46,979 --> 02:10:50,849
right you know how to do it you could

2388
02:10:49,140 --> 02:10:52,230
just type seven in its square root and

2389
02:10:50,850 --> 02:10:53,060
you even know what it means you means

2390
02:10:52,229 --> 02:10:55,399
that the answer

2391
02:10:53,060 --> 02:10:58,130
you get back if you square it you get

2392
02:10:55,399 --> 02:11:00,019
seven right everyone knows that so

2393
02:10:58,130 --> 02:11:01,430
you're like what's I am so confused I

2394
02:11:00,020 --> 02:11:02,480
don't get an imaginary number I don't

2395
02:11:01,430 --> 02:11:03,770
know it didn't make sense of my high

2396
02:11:02,479 --> 02:11:04,729
school math class that's correct it

2397
02:11:03,770 --> 02:11:07,160
didn't make sense because high school

2398
02:11:04,729 --> 02:11:09,559
math class suck in the textbooks suck

2399
02:11:07,159 --> 02:11:11,539
but it's not that hard to understand

2400
02:11:09,560 --> 02:11:13,370
what it is now I give you a negative

2401
02:11:11,539 --> 02:11:16,519
number I said can you tell me what the

2402
02:11:13,369 --> 02:11:18,649
square root of negative 7 is right well

2403
02:11:16,520 --> 02:11:20,570
you know what the square root of 7 was

2404
02:11:18,649 --> 02:11:23,509
because you just did it and so the only

2405
02:11:20,569 --> 02:11:26,559
thing we really need to do right is we

2406
02:11:23,510 --> 02:11:29,480
need to have a way of remembering that

2407
02:11:26,560 --> 02:11:31,730
the thing was negative because when we

2408
02:11:29,479 --> 02:11:33,889
square a number right if the thing that

2409
02:11:31,729 --> 02:11:35,899
we square is negative it just becomes

2410
02:11:33,890 --> 02:11:39,740
positive right negative 2 squared is 4

2411
02:11:35,899 --> 02:11:41,539
and 2 squared is 4 so if I ask you to

2412
02:11:39,739 --> 02:11:43,130
take the square root of 4 you can tell

2413
02:11:41,539 --> 02:11:46,220
me to I say take the square root of

2414
02:11:43,130 --> 02:11:48,680
negative 4 you're like I know that's

2415
02:11:46,220 --> 02:11:50,949
still - but it's like gotta be negative

2416
02:11:48,680 --> 02:11:53,480
so all we were trying to do with that is

2417
02:11:50,949 --> 02:11:56,029
remember we're trying to remember what

2418
02:11:53,479 --> 02:11:58,489
the sign was it's the thing that tells

2419
02:11:56,029 --> 02:12:01,340
us what the sign was when we started

2420
02:11:58,489 --> 02:12:02,779
right so you can actually get an

2421
02:12:01,340 --> 02:12:05,569
intuitive understanding of what I is

2422
02:12:02,779 --> 02:12:07,789
it's the place that the negative goes

2423
02:12:05,569 --> 02:12:09,920
when we Square rooted because we need it

2424
02:12:07,789 --> 02:12:14,329
to go somewhere we need to remember

2425
02:12:09,920 --> 02:12:17,329
right so we create an extra dimension to

2426
02:12:14,329 --> 02:12:20,029
our number system to remember that sign

2427
02:12:17,329 --> 02:12:22,039
and that allows us more flexibility

2428
02:12:20,029 --> 02:12:23,449
because now instead of when you ask me

2429
02:12:22,039 --> 02:12:25,579
what the red square root of negative 7

2430
02:12:23,449 --> 02:12:29,239
is and I say I don't know because it

2431
02:12:25,579 --> 02:12:30,800
can't exist right I say ah I can tell

2432
02:12:29,239 --> 02:12:34,159
you what the square root of 7 is and

2433
02:12:30,800 --> 02:12:36,770
then I can use an extra piece I can add

2434
02:12:34,159 --> 02:12:39,889
a piece to my representation of numbers

2435
02:12:36,770 --> 02:12:41,600
to remember whether it came from a

2436
02:12:39,890 --> 02:12:42,980
negative number to begin with right so

2437
02:12:41,600 --> 02:12:44,660
that's what we're gonna do with the

2438
02:12:42,979 --> 02:12:48,919
Fourier transform when we do that

2439
02:12:44,659 --> 02:12:51,439
transform we can think about that the

2440
02:12:48,920 --> 02:12:53,119
that I that we need there it actually

2441
02:12:51,439 --> 02:12:55,819
has some meaning it's not purely

2442
02:12:53,119 --> 02:12:57,590
imaginary it really does have some

2443
02:12:55,819 --> 02:13:00,500
connection to reality if you think about

2444
02:12:57,590 --> 02:13:02,029
it there's ways we can can connect it

2445
02:13:00,500 --> 02:13:03,380
back and that's one of them so before

2446
02:13:02,029 --> 02:13:05,329
you transform is one that's going to

2447
02:13:03,380 --> 02:13:05,579
take in a regular old number of the kind

2448
02:13:05,329 --> 02:13:07,409
you're

2449
02:13:05,579 --> 02:13:08,939
used to and it's gonna turn it into a

2450
02:13:07,409 --> 02:13:10,439
complex number which is maybe a number

2451
02:13:08,939 --> 02:13:12,239
you're not quite so used to but that

2452
02:13:10,439 --> 02:13:13,949
number is not that complicated it's

2453
02:13:12,239 --> 02:13:16,019
really just the same as a real number in

2454
02:13:13,949 --> 02:13:17,429
some sense with that extra accent

2455
02:13:16,020 --> 02:13:20,040
dimension added so that we can

2456
02:13:17,430 --> 02:13:25,200
understand a wider range of source for

2457
02:13:20,039 --> 02:13:27,000
our numbers okay so when we take the

2458
02:13:25,199 --> 02:13:32,609
Fourier transform what we're gonna do is

2459
02:13:27,000 --> 02:13:35,189
we need to turn something into we need

2460
02:13:32,609 --> 02:13:37,259
to turn something from the basic old

2461
02:13:35,189 --> 02:13:39,359
boring variety that you're used to right

2462
02:13:37,260 --> 02:13:41,039
the Euclidean space as you're usually

2463
02:13:39,359 --> 02:13:43,079
used to which is just the thing where

2464
02:13:41,039 --> 02:13:45,239
you know it's like the world around us

2465
02:13:43,079 --> 02:13:47,069
we walk in one direction we go straight

2466
02:13:45,239 --> 02:13:48,899
we walk in another direction we go

2467
02:13:47,069 --> 02:13:50,159
straight we start putting coordinate

2468
02:13:48,899 --> 02:13:52,259
systems on these things we're talking

2469
02:13:50,159 --> 02:13:54,899
about these like perpendicular lines

2470
02:13:52,260 --> 02:13:56,460
right that are just like rulers going in

2471
02:13:54,899 --> 02:13:59,639
directions and that's how we think of

2472
02:13:56,460 --> 02:14:01,590
our coordinate systems right but what a

2473
02:13:59,640 --> 02:14:03,930
Fourier transform does is it asks a

2474
02:14:01,590 --> 02:14:07,350
different question it's saying what if

2475
02:14:03,930 --> 02:14:09,480
we wanted to represent where we are in a

2476
02:14:07,350 --> 02:14:12,480
space or you know what the value of

2477
02:14:09,479 --> 02:14:15,000
something is with basis functions that

2478
02:14:12,479 --> 02:14:17,339
aren't just little rulers right they're

2479
02:14:15,000 --> 02:14:19,979
actually sine waves they're actually

2480
02:14:17,340 --> 02:14:23,579
wave forms thing is that oscillate right

2481
02:14:19,979 --> 02:14:26,250
and so rather than you just thinking

2482
02:14:23,579 --> 02:14:29,130
about as I turn a number up in my

2483
02:14:26,250 --> 02:14:30,750
coordinate system as X gets higher and

2484
02:14:29,130 --> 02:14:33,150
higher I'm just going further and

2485
02:14:30,750 --> 02:14:34,859
further along the x axis rather than

2486
02:14:33,149 --> 02:14:37,710
thinking about that we need to think

2487
02:14:34,859 --> 02:14:40,170
about is as I turn up my number X it

2488
02:14:37,710 --> 02:14:41,730
does get higher yes but then it starts

2489
02:14:40,170 --> 02:14:43,409
getting lower again and then it gets

2490
02:14:41,729 --> 02:14:45,750
negative and then it comes back up to

2491
02:14:43,409 --> 02:14:49,139
positive and then it goes up right so

2492
02:14:45,750 --> 02:14:51,300
it's oscillating okay and so what the

2493
02:14:49,140 --> 02:14:53,970
Fourier transform does is it tries to

2494
02:14:51,300 --> 02:14:56,760
take values that we were previously

2495
02:14:53,970 --> 02:14:59,159
maybe representing in some other space

2496
02:14:56,760 --> 02:15:01,050
that was actually like just representing

2497
02:14:59,159 --> 02:15:03,000
things as little rulers and we're trying

2498
02:15:01,050 --> 02:15:06,449
to then turn it into something that is

2499
02:15:03,000 --> 02:15:09,210
represented by sine waves adding these

2500
02:15:06,449 --> 02:15:11,130
sine waves together to reproduce the

2501
02:15:09,210 --> 02:15:14,840
result right so the basis functions the

2502
02:15:11,130 --> 02:15:17,550
output of a Fourier transform is a

2503
02:15:14,840 --> 02:15:18,989
representation of the input that's made

2504
02:15:17,550 --> 02:15:21,349
using sine waves

2505
02:15:18,988 --> 02:15:24,479
is kind of a weird thing to think about

2506
02:15:21,349 --> 02:15:26,489
but if you think about the kinds of

2507
02:15:24,479 --> 02:15:27,988
things that we need went and I could

2508
02:15:26,488 --> 02:15:30,049
keep going on about this but you get the

2509
02:15:27,988 --> 02:15:32,939
idea right so does that give you some

2510
02:15:30,050 --> 02:15:34,860
perspective I could keep going and talk

2511
02:15:32,939 --> 02:15:36,210
about how all right how do we start

2512
02:15:34,859 --> 02:15:37,649
making sine waves that cancel each other

2513
02:15:36,210 --> 02:15:39,328
out so that we can have the same sorts

2514
02:15:37,649 --> 02:15:44,038
of things that we want to have with

2515
02:15:39,328 --> 02:15:45,420
Rebecca right blah blah blah that's how

2516
02:15:44,038 --> 02:15:47,429
you explain something because now

2517
02:15:45,420 --> 02:15:49,078
someone has something in their brains

2518
02:15:47,429 --> 02:15:49,889
that can actually think about when

2519
02:15:49,078 --> 02:15:51,689
they're thinking about a Fourier

2520
02:15:49,889 --> 02:15:53,578
transform instead of this which is

2521
02:15:51,689 --> 02:15:56,819
nothing there's nothing in here to think

2522
02:15:53,578 --> 02:15:58,920
about it's just purely abstract right

2523
02:15:56,819 --> 02:16:01,349
there's nothing to hold on to you're

2524
02:15:58,920 --> 02:16:05,868
just floating in space and this is the

2525
02:16:01,349 --> 02:16:05,869
way math things often look right

2526
02:16:27,949 --> 02:16:30,899
serious thanks I guess I put too much

2527
02:16:29,880 --> 02:16:32,549
emphasis on accumulation and

2528
02:16:30,899 --> 02:16:33,599
reconstruction I can understand about

2529
02:16:32,549 --> 02:16:35,009
what you just said about the re now in

2530
02:16:33,599 --> 02:16:37,590
addition my misunderstanding is more

2531
02:16:35,010 --> 02:16:39,149
fundamental I understand how you can use

2532
02:16:37,590 --> 02:16:40,860
ray-tracing to get light intensities and

2533
02:16:39,149 --> 02:16:43,199
colors at probe points which can be

2534
02:16:40,860 --> 02:16:45,540
passed to your fragment shader but I

2535
02:16:43,200 --> 02:16:47,370
don't get how you can get some spherical

2536
02:16:45,540 --> 02:16:49,290
representation of light at probe points

2537
02:16:47,370 --> 02:16:50,400
and what the heck your fragment shader

2538
02:16:49,290 --> 02:16:52,889
would do with it

2539
02:16:50,399 --> 02:17:01,409
so again if we're talking about

2540
02:16:52,888 --> 02:17:07,529
spherical harmonics so spherical

2541
02:17:01,409 --> 02:17:11,968
harmonics are a series of lobe shapes

2542
02:17:07,530 --> 02:17:14,639
right much like the Fourier transform is

2543
02:17:11,968 --> 02:17:19,468
a series of sine waves that just are

2544
02:17:14,638 --> 02:17:21,119
linear like we're in time right look we

2545
02:17:19,468 --> 02:17:24,388
think of an audio waveform for a Fourier

2546
02:17:21,120 --> 02:17:26,910
transform let's say right we are just

2547
02:17:24,388 --> 02:17:28,500
taking a chunk and we're gonna pretend

2548
02:17:26,909 --> 02:17:30,030
that it's periodic so it's just

2549
02:17:28,500 --> 02:17:31,138
infinitely repeating because that's part

2550
02:17:30,030 --> 02:17:33,420
of the definition of how the Fourier

2551
02:17:31,138 --> 02:17:35,009
transform works see if you need the

2552
02:17:33,420 --> 02:17:37,290
Fourier transform to operate on a finite

2553
02:17:35,010 --> 02:17:41,639
window you actually it's actually kind

2554
02:17:37,290 --> 02:17:42,990
of wrong right but I we're gonna add a

2555
02:17:41,638 --> 02:17:45,569
bunch of sine waves together to

2556
02:17:42,989 --> 02:17:47,729
reconstruct some arbitrary signal that

2557
02:17:45,569 --> 02:17:49,709
we had right and you see this in the

2558
02:17:47,729 --> 02:17:51,929
Fourier transform the graphic equalizer

2559
02:17:49,709 --> 02:17:53,789
on your stereo is a Fourier transform of

2560
02:17:51,929 --> 02:17:56,280
the sound wave right a very low

2561
02:17:53,790 --> 02:17:58,260
resolution Fourier transform it's

2562
02:17:56,280 --> 02:17:59,760
showing you the various frequencies that

2563
02:17:58,260 --> 02:18:01,319
you would add together to get back the

2564
02:17:59,760 --> 02:18:03,030
sound wave it's just instead of showing

2565
02:18:01,319 --> 02:18:05,579
you the actual number you would need to

2566
02:18:03,030 --> 02:18:08,370
reconstruct it showing you a average of

2567
02:18:05,579 --> 02:18:12,479
those Bend into six buckets or five

2568
02:18:08,370 --> 02:18:14,040
buckets or whatever right so spherical

2569
02:18:12,479 --> 02:18:15,718
harmonics is the same way it's saying

2570
02:18:14,040 --> 02:18:18,330
look let's do basically the Fourier

2571
02:18:15,718 --> 02:18:20,369
transform on a sphere and so instead of

2572
02:18:18,329 --> 02:18:23,190
each thing just being a sine wave it's

2573
02:18:20,370 --> 02:18:26,550
actually like a sinusoidal lobe and if

2574
02:18:23,190 --> 02:18:29,579
we imagine taking any sphere with any

2575
02:18:26,549 --> 02:18:31,109
number any amount of data on it just

2576
02:18:29,579 --> 02:18:32,549
like the Fourier transform says that

2577
02:18:31,110 --> 02:18:34,469
with an infinite number of sine waves we

2578
02:18:32,549 --> 02:18:38,399
can reconstruct an infinitely precise

2579
02:18:34,468 --> 02:18:39,759
signal that you input the same is true

2580
02:18:38,399 --> 02:18:42,728
of the sphere a

2581
02:18:39,760 --> 02:18:44,978
infinitely large number of spherical

2582
02:18:42,728 --> 02:18:50,079
harmonic coefficients can reconstruct

2583
02:18:44,978 --> 02:18:51,308
any spherical information right so we

2584
02:18:50,079 --> 02:18:53,558
are never going to use infinite but if

2585
02:18:51,308 --> 02:18:56,170
we use enough we can reconstruct the

2586
02:18:53,558 --> 02:18:58,599
sphere of lighting from our spherical

2587
02:18:56,170 --> 02:19:01,079
harmonic coefficients and if we can

2588
02:18:58,599 --> 02:19:03,489
reconstruct the sphere of information

2589
02:19:01,079 --> 02:19:05,978
then when we actually need to do our

2590
02:19:03,489 --> 02:19:09,250
lighting lighting is just a series of

2591
02:19:05,978 --> 02:19:12,519
questions about what is coming in from a

2592
02:19:09,250 --> 02:19:16,569
sphere right that's what light is off of

2593
02:19:12,519 --> 02:19:19,149
the surface is it's you know a brdf or

2594
02:19:16,569 --> 02:19:21,939
any kind of like lighting transfer

2595
02:19:19,149 --> 02:19:24,728
function is just saying for some in

2596
02:19:21,939 --> 02:19:27,130
output direction I need to do some

2597
02:19:24,728 --> 02:19:31,119
summation over the sphere of different

2598
02:19:27,129 --> 02:19:34,598
you know input directions and that's how

2599
02:19:31,120 --> 02:19:37,719
much light goes out right and so as long

2600
02:19:34,599 --> 02:19:39,790
as the spherical harmonics can

2601
02:19:37,718 --> 02:19:41,649
reconstruct the data of the sphere it's

2602
02:19:39,790 --> 02:19:43,599
pretty easy actually because you just

2603
02:19:41,649 --> 02:19:43,929
ask the spherical harmonics anytime you

2604
02:19:43,599 --> 02:19:46,269
want

2605
02:19:43,929 --> 02:19:48,549
what's the lighting in this area and it

2606
02:19:46,269 --> 02:19:51,130
tells you right the same way a Fourier

2607
02:19:48,549 --> 02:19:53,889
transform can reconstruct a particular

2608
02:19:51,129 --> 02:19:55,389
part of a signal the spherical aromatic

2609
02:19:53,889 --> 02:20:00,099
ovations can reconstruct a particular

2610
02:19:55,389 --> 02:20:02,619
part of the sphere and how bright it was

2611
02:20:00,100 --> 02:20:03,819
at that point and so that's

2612
02:20:02,620 --> 02:20:07,829
fundamentally all you would be doing

2613
02:20:03,819 --> 02:20:07,829
with spherical harmonics right

2614
02:20:17,209 --> 02:20:21,129
all right let's end of the queues

2615
02:20:36,420 --> 02:20:39,658
all right thank you everybody for

2616
02:20:38,279 --> 02:20:41,250
joining me for this and a handmade hero

2617
02:20:39,658 --> 02:20:46,340
sort of pleasure coating with you as

2618
02:20:41,250 --> 02:20:49,799
always I am in the process of collecting

2619
02:20:46,340 --> 02:20:53,790
some questions because I'm going to be

2620
02:20:49,799 --> 02:20:55,500
doing a little bit of tutorial video

2621
02:20:53,790 --> 02:20:58,290
series at some point here soon in the

2622
02:20:55,500 --> 02:21:01,290
future and I am collecting questions

2623
02:20:58,290 --> 02:21:04,890
that are I would say generally

2624
02:21:01,290 --> 02:21:07,170
applicable novice questions was sort of

2625
02:21:04,889 --> 02:21:11,430
what I'm trying to get a collection of

2626
02:21:07,170 --> 02:21:13,738
and I've gotten a ton a ton a ton of

2627
02:21:11,430 --> 02:21:16,290
emails I don't know it might even be

2628
02:21:13,738 --> 02:21:20,180
over a hundred at this point but I

2629
02:21:16,290 --> 02:21:24,300
basically asked the question on Twitter

2630
02:21:20,180 --> 02:21:25,738
lo this Twitter maybe but here is the

2631
02:21:24,299 --> 02:21:27,059
the specific tweet that I'm talking

2632
02:21:25,738 --> 02:21:28,590
about but I said dear aspiring

2633
02:21:27,059 --> 02:21:30,809
Asperger's what programming concepts

2634
02:21:28,590 --> 02:21:34,228
techniques or processes do you most want

2635
02:21:30,809 --> 02:21:38,059
explained in tutorials and I said just

2636
02:21:34,228 --> 02:21:40,769
mail them to fact Molly rocket comm and

2637
02:21:38,059 --> 02:21:42,180
I've got like just tons and tons of

2638
02:21:40,770 --> 02:21:43,760
responses which is great so I'm kind of

2639
02:21:42,180 --> 02:21:46,408
going through and collating all of those

2640
02:21:43,760 --> 02:21:50,670
and planning exactly how I want to do

2641
02:21:46,408 --> 02:21:52,228
them but if anybody wasn't aware of this

2642
02:21:50,670 --> 02:21:53,790
I feel like I should mention on the

2643
02:21:52,228 --> 02:21:55,799
stream a few times just so people who

2644
02:21:53,790 --> 02:21:57,149
maybe don't read Twitter which honestly

2645
02:21:55,799 --> 02:21:59,719
should be pretty much everyone at this

2646
02:21:57,148 --> 02:22:02,728
point because it's a terrible platform

2647
02:21:59,719 --> 02:22:07,438
go ahead and email me your questions

2648
02:22:02,728 --> 02:22:09,629
there if you have some that you think

2649
02:22:07,439 --> 02:22:11,579
would be appropriate or even if you know

2650
02:22:09,629 --> 02:22:13,948
you think that there if you don't know

2651
02:22:11,579 --> 02:22:15,449
because I can always like I'll be like

2652
02:22:13,949 --> 02:22:16,920
sipping them and the things I think will

2653
02:22:15,449 --> 02:22:18,329
work well and things that I don't so you

2654
02:22:16,920 --> 02:22:20,699
don't you don't really need to censor

2655
02:22:18,329 --> 02:22:22,139
yourself just if you think you have a

2656
02:22:20,699 --> 02:22:23,220
question you might want to ask and send

2657
02:22:22,139 --> 02:22:24,778
it in and I'll deal with it

2658
02:22:23,219 --> 02:22:26,608
the reason I bring that up is because

2659
02:22:24,779 --> 02:22:29,130
during the presume we had a good one

2660
02:22:26,609 --> 02:22:30,779
which was a pointer aliasing it's

2661
02:22:29,129 --> 02:22:32,459
something a lot of novice programmers

2662
02:22:30,779 --> 02:22:33,750
don't know what it is but they probably

2663
02:22:32,459 --> 02:22:34,948
have heard of it and they aren't sure

2664
02:22:33,750 --> 02:22:36,090
whether they should care or what it

2665
02:22:34,949 --> 02:22:37,739
would mean

2666
02:22:36,090 --> 02:22:39,329
and so pointer aliasing is a good

2667
02:22:37,738 --> 02:22:42,029
example and I'm gonna add that one to

2668
02:22:39,329 --> 02:22:44,029
the list because I'm gonna probably want

2669
02:22:42,029 --> 02:22:46,199
to make a specific video that's like

2670
02:22:44,029 --> 02:22:48,689
what is pointer aliasing and why you

2671
02:22:46,199 --> 02:22:49,850
should care so if you have some of that

2672
02:22:48,689 --> 02:22:51,889
stuff

2673
02:22:49,850 --> 02:22:53,149
you think you might want to know about

2674
02:22:51,889 --> 02:22:54,858
yourself

2675
02:22:53,148 --> 02:22:57,920
that you think would make a good topic

2676
02:22:54,859 --> 02:23:00,439
as sort of a standalone piece that just

2677
02:22:57,920 --> 02:23:03,648
says here is a self-contained like 15

2678
02:23:00,439 --> 02:23:05,658
minute video explaining X that is

2679
02:23:03,648 --> 02:23:07,698
exactly what this project is about so do

2680
02:23:05,658 --> 02:23:10,639
send those two FAQ at Mali rocket comm

2681
02:23:07,699 --> 02:23:12,859
and more broadly if I get them on stream

2682
02:23:10,639 --> 02:23:15,469
I'll also try to remember ones that I

2683
02:23:12,859 --> 02:23:17,779
think would be good for that but I do

2684
02:23:15,469 --> 02:23:20,059
kind of use the number of times that a

2685
02:23:17,779 --> 02:23:23,329
question is asked as sort of a little

2686
02:23:20,059 --> 02:23:24,769
bit of an impromptu vote on which ones I

2687
02:23:23,329 --> 02:23:26,029
should prioritize covering because

2688
02:23:24,770 --> 02:23:27,619
they're the things that more people are

2689
02:23:26,029 --> 02:23:28,970
confused about or more people think they

2690
02:23:27,619 --> 02:23:32,600
want to know about and might spend time

2691
02:23:28,969 --> 02:23:34,579
to learn about so do send it in and that

2692
02:23:32,600 --> 02:23:37,609
way it kind of will will count as part

2693
02:23:34,579 --> 02:23:39,680
of that vote as well alright that's it

2694
02:23:37,609 --> 02:23:41,180
for today I'll be back tomorrow when

2695
02:23:39,680 --> 02:23:45,648
we're gonna finish doing the sort of

2696
02:23:41,180 --> 02:23:47,029
voxel large small voxel work and that's

2697
02:23:45,648 --> 02:23:48,618
really my goal for the weekend now I

2698
02:23:47,029 --> 02:23:49,970
think that's in good shape I'm glad we

2699
02:23:48,619 --> 02:23:51,790
thought of that stuff today I think

2700
02:23:49,969 --> 02:23:53,929
that's a good way to do things and

2701
02:23:51,790 --> 02:23:56,180
excited for that going forward so we can

2702
02:23:53,930 --> 02:23:59,238
get that finished up tomorrow same time

2703
02:23:56,180 --> 02:24:01,398
same place and then next week we can

2704
02:23:59,238 --> 02:24:03,228
start to focus on light transport and

2705
02:24:01,398 --> 02:24:04,549
working back through and then you know

2706
02:24:03,228 --> 02:24:05,809
we're getting closer we're getting

2707
02:24:04,549 --> 02:24:08,329
closer to having a really good lighting

2708
02:24:05,809 --> 02:24:10,579
solution which which is really where I

2709
02:24:08,329 --> 02:24:12,500
want to be lighting is is very difficult

2710
02:24:10,579 --> 02:24:14,779
and so getting good lighting solution in

2711
02:24:12,500 --> 02:24:15,799
places is a it's an accomplishment we

2712
02:24:14,779 --> 02:24:16,340
should give ourselves a pat on the back

2713
02:24:15,799 --> 02:24:19,309
floor

2714
02:24:16,340 --> 02:24:20,840
alright that's it if you want to follow

2715
02:24:19,309 --> 02:24:22,609
the series at home of course you can

2716
02:24:20,840 --> 02:24:24,710
always go to handmade here org and

2717
02:24:22,609 --> 02:24:26,180
pre-order the game it comes with a

2718
02:24:24,709 --> 02:24:27,289
source code so you can compile it

2719
02:24:26,180 --> 02:24:29,000
yourself and your own machine play

2720
02:24:27,290 --> 02:24:30,739
around with it if you would like to

2721
02:24:29,000 --> 02:24:32,059
finish the voxel work before I do it's a

2722
02:24:30,738 --> 02:24:33,379
good exercise to do it's pretty

2723
02:24:32,059 --> 02:24:36,198
straightforward

2724
02:24:33,379 --> 02:24:38,679
so maybe give that a shot and then tune

2725
02:24:36,199 --> 02:24:41,329
back in tomorrow and I will do it myself

2726
02:24:38,680 --> 02:24:43,010
until then have fun program everyone and

2727
02:24:41,329 --> 02:24:45,549
I'll see y'all on the Internet

2728
02:24:43,010 --> 02:24:45,550
take it easy everybody

