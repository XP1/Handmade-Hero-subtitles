1
00:00:01,189 --> 00:00:05,129
hello everybody and welcome to handmade

2
00:00:03,540 --> 00:00:08,849
Hero the show recode a complete game

3
00:00:05,129 --> 00:00:12,570
live on stream we have to do some

4
00:00:08,849 --> 00:00:15,539
lighting today we sort of put things

5
00:00:12,570 --> 00:00:18,329
into actually I would say a pretty nice

6
00:00:15,539 --> 00:00:23,778
place at the end of last stream where we

7
00:00:18,329 --> 00:00:26,098
had a decent or at least decent enough

8
00:00:23,778 --> 00:00:29,039
representation of the world and we did

9
00:00:26,099 --> 00:00:31,379
some bounce lighting on it and the

10
00:00:29,039 --> 00:00:33,270
problem that I think we had at the end

11
00:00:31,379 --> 00:00:37,170
of the last dream was just that we don't

12
00:00:33,270 --> 00:00:40,500
really know at the moment whether or not

13
00:00:37,170 --> 00:00:45,000
it's it's actually lighting correctly we

14
00:00:40,500 --> 00:00:46,439
sort of you know did we did the basic so

15
00:00:45,000 --> 00:00:49,320
we got the basic stuff implemented with

16
00:00:46,439 --> 00:00:51,058
our new scheme but you know we don't

17
00:00:49,320 --> 00:00:53,039
have any sort of real like

18
00:00:51,058 --> 00:00:55,500
well-constructed tests in there to

19
00:00:53,039 --> 00:00:56,698
really determine whether or not we're

20
00:00:55,500 --> 00:00:59,579
actually performing computations

21
00:00:56,698 --> 00:01:02,179
correctly you know we put in a thing

22
00:00:59,579 --> 00:01:07,500
that does ray casting against

23
00:01:02,179 --> 00:01:09,719
essentially like quadrilaterals and we

24
00:01:07,500 --> 00:01:11,549
didn't really do any sort of

25
00:01:09,719 --> 00:01:16,079
verification that that ray test actually

26
00:01:11,549 --> 00:01:20,368
works and so I think when we looked at

27
00:01:16,079 --> 00:01:22,829
the results it looked like maybe the

28
00:01:20,368 --> 00:01:25,259
that wasn't really working correctly or

29
00:01:22,829 --> 00:01:27,868
at least you know maybe something else

30
00:01:25,259 --> 00:01:29,700
was wrong so it kind of we kind of are

31
00:01:27,868 --> 00:01:31,739
getting close to having something we can

32
00:01:29,700 --> 00:01:33,269
sort of iterate on and then we're flying

33
00:01:31,739 --> 00:01:36,000
down to something that we want but word

34
00:01:33,269 --> 00:01:38,250
I think we're still at the point where

35
00:01:36,000 --> 00:01:41,728
we need to do a little bit more sort of

36
00:01:38,250 --> 00:01:44,310
testing and checking on it maybe

37
00:01:41,728 --> 00:01:47,489
construct some structured tests where we

38
00:01:44,310 --> 00:01:50,368
can verify that it's working or at least

39
00:01:47,489 --> 00:01:54,359
draw some things that would let us know

40
00:01:50,368 --> 00:01:56,459
I'm Oh Hannah made ray is still up that

41
00:01:54,359 --> 00:02:02,968
just loaded handmade ray where's here we

42
00:01:56,459 --> 00:02:04,530
go we need him here oh okay so if we

43
00:02:02,968 --> 00:02:07,408
take a look at what happens here in the

44
00:02:04,530 --> 00:02:10,590
world if I run the lighting you can

45
00:02:07,409 --> 00:02:13,760
actually see what we've got here here is

46
00:02:10,590 --> 00:02:15,469
like a subdivided version we

47
00:02:13,759 --> 00:02:17,719
one of the things that we added was the

48
00:02:15,469 --> 00:02:23,959
ability to subdivide services down to

49
00:02:17,719 --> 00:02:26,709
get sort of a higher resolution result

50
00:02:23,959 --> 00:02:31,299
right and we can sort of see that the

51
00:02:26,709 --> 00:02:31,299
things are sort of making sense I mean

52
00:02:31,329 --> 00:02:37,430
it there's some things that indicate you

53
00:02:35,719 --> 00:02:39,318
know correct behavior but there's

54
00:02:37,430 --> 00:02:42,290
definitely other things that you know

55
00:02:39,318 --> 00:02:44,780
maybe don't if you look at like what's

56
00:02:42,289 --> 00:02:49,060
going on here I'm not 100% clear on why

57
00:02:44,780 --> 00:02:52,849
this would hello nobody's running

58
00:02:49,060 --> 00:02:55,969
can we stop kami um yeah could we just

59
00:02:52,849 --> 00:02:55,969
[Music]

60
00:03:03,219 --> 00:03:10,009
I'm sorry I don't know why the

61
00:03:07,789 --> 00:03:12,699
diagnostic tools were like tracking that

62
00:03:10,009 --> 00:03:18,888
there I was not trying to run a

63
00:03:12,699 --> 00:03:21,548
performance profile um so anyway so if

64
00:03:18,889 --> 00:03:24,010
we take a look at what's going on here

65
00:03:21,549 --> 00:03:26,680
we can sort of see that some of it looks

66
00:03:24,009 --> 00:03:29,689
reasonable but some of it maybe doesn't

67
00:03:26,680 --> 00:03:31,639
and I think you know like I said it's

68
00:03:29,689 --> 00:03:32,989
it's gonna be hard for us to converge on

69
00:03:31,639 --> 00:03:34,819
a good lighting solution unless week

70
00:03:32,989 --> 00:03:37,459
maybe get a little bit more information

71
00:03:34,818 --> 00:03:40,128
about whether things are working the way

72
00:03:37,459 --> 00:03:41,900
that we think they should work and so on

73
00:03:40,128 --> 00:03:44,628
we also have some other things that I

74
00:03:41,900 --> 00:03:47,269
think are pretty indicative of stuff

75
00:03:44,628 --> 00:03:49,370
that should be modified if you look at

76
00:03:47,269 --> 00:03:53,840
like what this giant plate is here

77
00:03:49,370 --> 00:03:55,340
that's actually the hero right eye and

78
00:03:53,840 --> 00:03:58,549
one of the things that's interesting

79
00:03:55,340 --> 00:04:00,229
about that is that it should really be

80
00:03:58,549 --> 00:04:02,959
pulling its lighting from something

81
00:04:00,229 --> 00:04:05,530
that's more representative of what it

82
00:04:02,959 --> 00:04:11,139
represents in the world and not

83
00:04:05,530 --> 00:04:13,789
necessarily it's sprite plate right

84
00:04:11,139 --> 00:04:17,750
because it's sprite plate is not

85
00:04:13,789 --> 00:04:18,469
necessarily where we want to light the

86
00:04:17,750 --> 00:04:20,478
hero right

87
00:04:18,470 --> 00:04:21,530
the here I may want to be lit as if it's

88
00:04:20,478 --> 00:04:25,069
straight up and down

89
00:04:21,529 --> 00:04:27,529
so it may want to be pulling its

90
00:04:25,069 --> 00:04:28,939
lighting from an interpolator

91
00:04:27,529 --> 00:04:30,859
that's different from where it's drawing

92
00:04:28,939 --> 00:04:33,889
its lighting because of that fo 2 D

93
00:04:30,860 --> 00:04:35,750
aspect of it right so that's also

94
00:04:33,889 --> 00:04:41,629
something that we were gonna want to

95
00:04:35,750 --> 00:04:43,970
take a look at but as you can kind of

96
00:04:41,629 --> 00:04:46,189
see we're getting closer to something

97
00:04:43,970 --> 00:04:48,530
that's sort of useable as the hero moves

98
00:04:46,189 --> 00:04:50,329
around in here we do have you know sort

99
00:04:48,529 --> 00:04:52,009
of light playing across it and it does

100
00:04:50,329 --> 00:04:53,779
interpolate smoothly like we're not

101
00:04:52,009 --> 00:04:55,189
getting a lot of artifacts and stuff we

102
00:04:53,779 --> 00:04:57,949
do have a little bit of sort of a

103
00:04:55,189 --> 00:04:58,939
directional banding aspect to it so

104
00:04:57,949 --> 00:05:02,719
we're probably going to want to do

105
00:04:58,939 --> 00:05:04,819
something to address that that will

106
00:05:02,720 --> 00:05:06,320
probably be as simple as making sure

107
00:05:04,819 --> 00:05:09,139
that our sampling is a little more

108
00:05:06,319 --> 00:05:11,389
jittered and it's kind of subtle you

109
00:05:09,139 --> 00:05:13,969
can't really see it that obvious in most

110
00:05:11,389 --> 00:05:16,579
places but you can sort of see it that

111
00:05:13,970 --> 00:05:20,380
sort of bias that occurs because of the

112
00:05:16,579 --> 00:05:24,139
fact that our lighting is done on voxels

113
00:05:20,379 --> 00:05:28,399
alright so if we switch back here and

114
00:05:24,139 --> 00:05:33,610
take a look at this man I'm struggling

115
00:05:28,399 --> 00:05:33,609
today get some water here

116
00:05:41,939 --> 00:05:46,329
what I would like to do again is just

117
00:05:44,860 --> 00:05:49,030
maybe sort of start to figure out

118
00:05:46,329 --> 00:05:52,810
whether you know we've got reasonable

119
00:05:49,029 --> 00:05:58,119
equations in there for example for the

120
00:05:52,810 --> 00:05:59,649
raycasting and also for the way in which

121
00:05:58,120 --> 00:06:01,120
the light is getting transferred and

122
00:05:59,649 --> 00:06:05,709
there are definitely some things in

123
00:06:01,120 --> 00:06:07,509
there that kind of feel like maybe we're

124
00:06:05,709 --> 00:06:10,509
not getting very reasonable results from

125
00:06:07,509 --> 00:06:12,069
them I don't actually know like you know

126
00:06:10,509 --> 00:06:15,159
if I if I look at some of these things

127
00:06:12,069 --> 00:06:17,860
it does seem a little odd I don't know

128
00:06:15,160 --> 00:06:21,400
how many rays per element we were

129
00:06:17,860 --> 00:06:22,930
casting but in this case here for

130
00:06:21,399 --> 00:06:24,939
example you know we're getting

131
00:06:22,930 --> 00:06:28,660
situations where certain lighting

132
00:06:24,939 --> 00:06:31,689
elements have like overwhelmingly blue

133
00:06:28,660 --> 00:06:34,030
or overwhelmingly red right next to each

134
00:06:31,689 --> 00:06:35,620
other and in order for those sorts of

135
00:06:34,029 --> 00:06:37,659
things to be true for example you know

136
00:06:35,620 --> 00:06:40,420
we would have to have like only one hit

137
00:06:37,660 --> 00:06:42,910
me the direction that's not entirely out

138
00:06:40,420 --> 00:06:44,740
of the question obviously because we

139
00:06:42,910 --> 00:06:47,350
sort of have light only coming from

140
00:06:44,740 --> 00:06:51,550
those two places and directly above is

141
00:06:47,350 --> 00:06:53,350
not actually producing any light so I

142
00:06:51,550 --> 00:06:54,490
could sort of see that happening one of

143
00:06:53,350 --> 00:06:56,080
the things that we probably do want to

144
00:06:54,490 --> 00:06:58,710
do as well here is put in some kind of

145
00:06:56,079 --> 00:07:01,329
ambient lighting that gives it just

146
00:06:58,709 --> 00:07:04,569
something besides that the basic light

147
00:07:01,329 --> 00:07:07,180
that's coming in so that we don't have

148
00:07:04,569 --> 00:07:08,889
such strong directionality you know in

149
00:07:07,180 --> 00:07:10,750
this case we've got just one light

150
00:07:08,889 --> 00:07:13,389
that's right here it's the only light in

151
00:07:10,750 --> 00:07:16,050
the entire world so everything has to be

152
00:07:13,389 --> 00:07:21,699
bounce light that kind of comes from

153
00:07:16,050 --> 00:07:24,370
this light eventually and again so if I

154
00:07:21,699 --> 00:07:26,560
look at how this is working some things

155
00:07:24,370 --> 00:07:28,930
that make me a little uncomfortable you

156
00:07:26,560 --> 00:07:30,430
can kind of see that that in here we've

157
00:07:28,930 --> 00:07:32,740
got like sort of some of these things

158
00:07:30,430 --> 00:07:37,810
can't see the light at all others of

159
00:07:32,740 --> 00:07:39,840
these things can like for example trying

160
00:07:37,810 --> 00:07:44,790
to see if I can zoom in here there we go

161
00:07:39,839 --> 00:07:47,679
I would expect in a lot of cases like

162
00:07:44,790 --> 00:07:50,410
for the light which is this thing right

163
00:07:47,680 --> 00:07:52,120
here I would expect it to not be able to

164
00:07:50,410 --> 00:07:55,150
see for example this

165
00:07:52,120 --> 00:07:58,449
right here but that element is lit that

166
00:07:55,149 --> 00:08:00,159
seems very peculiar to me I also don't

167
00:07:58,449 --> 00:08:03,000
understand why these can't see the light

168
00:08:00,160 --> 00:08:06,040
source maybe they randomly picked wrong

169
00:08:03,000 --> 00:08:08,019
but again it just seems kind of like

170
00:08:06,040 --> 00:08:12,340
maybe we're getting some pho results

171
00:08:08,019 --> 00:08:14,019
here that I don't necessarily trust so

172
00:08:12,339 --> 00:08:15,609
I'm gonna try and figure out a strategy

173
00:08:14,019 --> 00:08:17,370
today I think the job for the day is

174
00:08:15,610 --> 00:08:20,919
gonna be a metaphor a strategy today

175
00:08:17,370 --> 00:08:22,720
where I can try to validate some things

176
00:08:20,918 --> 00:08:24,909
about our raycasting and some things

177
00:08:22,720 --> 00:08:28,000
about our light transfer to just try to

178
00:08:24,910 --> 00:08:30,850
debug it under the assumption that there

179
00:08:28,000 --> 00:08:32,620
are bugs in it and while I don't

180
00:08:30,850 --> 00:08:34,149
necessarily know that there are just

181
00:08:32,620 --> 00:08:37,450
think we have some strong indications

182
00:08:34,149 --> 00:08:39,399
that there are again another example

183
00:08:37,450 --> 00:08:40,870
would be like right here you can see

184
00:08:39,399 --> 00:08:42,370
that there's no light on these even

185
00:08:40,870 --> 00:08:44,080
though the light is right next to it and

186
00:08:42,370 --> 00:08:45,850
it would seem like almost anywhere you

187
00:08:44,080 --> 00:08:51,400
could have picked on here would have hit

188
00:08:45,850 --> 00:08:52,778
this light and I don't know why right so

189
00:08:51,399 --> 00:08:54,220
just a lot of stuff like that is just

190
00:08:52,778 --> 00:08:56,379
making me nervous so although this looks

191
00:08:54,220 --> 00:08:57,639
like it's doing something that sort of

192
00:08:56,379 --> 00:08:59,350
resembles the lighting solution I

193
00:08:57,639 --> 00:09:03,458
suspect we've got some serious bugs in

194
00:08:59,350 --> 00:09:04,870
there they may be subtle math mistakes

195
00:09:03,458 --> 00:09:07,389
or something like that but they create

196
00:09:04,870 --> 00:09:08,889
the serious problems I think and so I

197
00:09:07,389 --> 00:09:12,278
want to go ahead and take a look at

198
00:09:08,889 --> 00:09:17,259
those just sort of methodically today as

199
00:09:12,278 --> 00:09:19,929
much as I can so if I bring up the if I

200
00:09:17,259 --> 00:09:23,528
bring up the render group here and we

201
00:09:19,929 --> 00:09:27,039
take a look at the lighting equations we

202
00:09:23,528 --> 00:09:29,620
got them right here so here is our our

203
00:09:27,039 --> 00:09:31,750
ray cast so what we'd like to do is

204
00:09:29,620 --> 00:09:34,419
validate this ray cast validate that

205
00:09:31,750 --> 00:09:37,299
it's actually working and that it does

206
00:09:34,419 --> 00:09:38,469
what we think it's supposed to do and

207
00:09:37,299 --> 00:09:41,490
then the other thing that we want to do

208
00:09:38,470 --> 00:09:44,830
is this compute light propagation here

209
00:09:41,490 --> 00:09:46,690
compute light propagation is the thing

210
00:09:44,830 --> 00:09:52,360
that actually spreads the light around

211
00:09:46,690 --> 00:09:54,160
and uses the ray casts and we we want to

212
00:09:52,360 --> 00:09:57,550
try and figure out whether this is you

213
00:09:54,159 --> 00:10:00,730
know sort of correctly setting there's

214
00:09:57,549 --> 00:10:02,169
light values on each iteration I don't

215
00:10:00,730 --> 00:10:04,350
know how many iterations we're doing

216
00:10:02,169 --> 00:10:04,349
right now

217
00:10:06,688 --> 00:10:15,669
so we do four and then the final gather

218
00:10:11,639 --> 00:10:17,948
that is just the thing that looks from a

219
00:10:15,669 --> 00:10:21,128
particular surface and tries to see what

220
00:10:17,948 --> 00:10:23,519
kind of light it's getting obviously

221
00:10:21,129 --> 00:10:27,310
that can also have a mistake in it and

222
00:10:23,519 --> 00:10:28,629
and we'll have to see I guess one thing

223
00:10:27,309 --> 00:10:36,789
that's interesting about the final

224
00:10:28,629 --> 00:10:39,100
gather is that it kind of throws away

225
00:10:36,789 --> 00:10:43,620
the information that we've already used

226
00:10:39,100 --> 00:10:43,620
when we spread the light around kind of

227
00:10:47,759 --> 00:10:57,639
right which is kind of odd because each

228
00:10:53,620 --> 00:11:03,159
of these surface elements it already had

229
00:10:57,639 --> 00:11:05,259
in here emission information stored so I

230
00:11:03,159 --> 00:11:07,448
suppose we probably should be using that

231
00:11:05,259 --> 00:11:09,938
emission information as a guide in some

232
00:11:07,448 --> 00:11:13,659
way probably or at least find ways of

233
00:11:09,938 --> 00:11:16,240
tracking that emission information maybe

234
00:11:13,659 --> 00:11:18,789
while we're doing this compute light

235
00:11:16,240 --> 00:11:21,850
propagation it would seem right like as

236
00:11:18,789 --> 00:11:24,360
we go through the admit errs and we push

237
00:11:21,850 --> 00:11:31,980
things on it would seem like you would

238
00:11:24,360 --> 00:11:36,850
want to build this up yeah hard to say

239
00:11:31,980 --> 00:11:38,558
but anyway so these this again even if

240
00:11:36,850 --> 00:11:40,329
the raycast was working properly

241
00:11:38,558 --> 00:11:42,938
there might be something we're doing in

242
00:11:40,328 --> 00:11:45,099
here that's dumb and if we went ahead

243
00:11:42,938 --> 00:11:48,458
and looked at at what's going on there

244
00:11:45,100 --> 00:11:52,629
we could maybe figure out some some sort

245
00:11:48,458 --> 00:11:54,128
of maybe accumulation bug or there's

246
00:11:52,629 --> 00:11:58,180
also of course the just how we're

247
00:11:54,129 --> 00:11:59,649
sampling that might be dumb so there's a

248
00:11:58,179 --> 00:12:03,508
lot of things that we can do in here

249
00:11:59,649 --> 00:12:03,509
that you know may might be important

250
00:12:09,990 --> 00:12:14,980
even just this way of sampling the

251
00:12:12,940 --> 00:12:16,420
hemisphere is probably not great so even

252
00:12:14,980 --> 00:12:18,879
that can be improved I don't know that

253
00:12:16,419 --> 00:12:21,069
it's necessarily buggy but that's a you

254
00:12:18,879 --> 00:12:23,529
know that's definitely something we

255
00:12:21,070 --> 00:12:25,120
could fix all right so let's first start

256
00:12:23,529 --> 00:12:26,799
with an inspection of this code and make

257
00:12:25,120 --> 00:12:28,840
sure that it makes reasonable sense to

258
00:12:26,799 --> 00:12:30,179
us and then maybe let's try to construct

259
00:12:28,840 --> 00:12:32,860
some test cases that lets us know

260
00:12:30,179 --> 00:12:34,929
whether or not we're actually doing this

261
00:12:32,860 --> 00:12:36,519
rate cast properly and one of the things

262
00:12:34,929 --> 00:12:37,870
too is when we're calling this rate cast

263
00:12:36,519 --> 00:12:38,919
right we should verify that we're

264
00:12:37,870 --> 00:12:40,539
actually calling it with the right

265
00:12:38,919 --> 00:12:46,839
things that we think we should be

266
00:12:40,539 --> 00:12:51,599
calling it with all right so a couple

267
00:12:46,840 --> 00:12:51,600
things here that also I would point out

268
00:12:52,950 --> 00:12:57,070
so when we're running through here right

269
00:12:55,450 --> 00:13:00,850
we're looking for a closest hit as well

270
00:12:57,070 --> 00:13:02,770
so we're sort of when we don't get a hit

271
00:13:00,850 --> 00:13:04,210
this is where we would put in the

272
00:13:02,769 --> 00:13:05,889
ambient lighting if there was going to

273
00:13:04,210 --> 00:13:07,720
be like a skybox or something like that

274
00:13:05,889 --> 00:13:09,759
that would be what would be in here so

275
00:13:07,720 --> 00:13:12,129
if somebody like shoots array and never

276
00:13:09,759 --> 00:13:14,259
hits anything this is where we would put

277
00:13:12,129 --> 00:13:23,740
that and just as an example like you

278
00:13:14,259 --> 00:13:26,590
know if we said for example this value

279
00:13:23,740 --> 00:13:29,519
right here which is the result color I

280
00:13:26,590 --> 00:13:29,519
think

281
00:13:35,799 --> 00:13:40,139
well I guess not I was gonna say I think

282
00:13:38,049 --> 00:13:42,609
this would be okay but it doesn't

283
00:13:40,139 --> 00:13:44,589
actually look like for the light

284
00:13:42,610 --> 00:13:47,139
spreading anyway so it would have to be

285
00:13:44,589 --> 00:13:53,410
in here where we get this incident color

286
00:13:47,139 --> 00:13:54,970
on the raycast yeah so during the final

287
00:13:53,409 --> 00:13:58,808
gather where we do the raycast we

288
00:13:54,970 --> 00:14:01,660
retrieve an incident color and what we

289
00:13:58,808 --> 00:14:03,519
could do there is say alright so it's

290
00:14:01,659 --> 00:14:06,368
free for us to just return an ambient

291
00:14:03,519 --> 00:14:10,438
color here so if we wanted say like a

292
00:14:06,369 --> 00:14:12,910
grey sky box that was going to come in

293
00:14:10,438 --> 00:14:15,399
we could do so pretty trivially right

294
00:14:12,909 --> 00:14:17,488
and then when we ran the lighting we

295
00:14:15,399 --> 00:14:20,230
would have ambient light so for example

296
00:14:17,489 --> 00:14:24,339
if I were to run it here I should get

297
00:14:20,230 --> 00:14:29,230
some and you can so you know looking at

298
00:14:24,339 --> 00:14:33,129
that the difference that that that

299
00:14:29,230 --> 00:14:36,519
created Alone's is pretty like that's

300
00:14:33,129 --> 00:14:40,350
not what that should have done it looks

301
00:14:36,519 --> 00:14:43,959
like we've got some overflow problems

302
00:14:40,350 --> 00:14:46,178
like adding light should never have made

303
00:14:43,958 --> 00:14:48,818
the scene darker it looks like we've got

304
00:14:46,178 --> 00:14:50,198
some problems where we're passing

305
00:14:48,818 --> 00:14:56,039
something over bright like we're not

306
00:14:50,198 --> 00:14:56,039
clamping the light amount or something

307
00:14:58,990 --> 00:15:06,278
I'm not sure how that's possible like we

308
00:15:01,509 --> 00:15:09,909
do definitely clamp but we must be doing

309
00:15:06,278 --> 00:15:11,769
something weird there yeah I mean I I

310
00:15:09,909 --> 00:15:13,719
think we've already sort of hit upon a

311
00:15:11,769 --> 00:15:19,809
bug because adding more light to the

312
00:15:13,720 --> 00:15:21,339
scene should never should never be able

313
00:15:19,809 --> 00:15:32,379
to do that so we're doing something real

314
00:15:21,339 --> 00:15:36,430
dumb here I guess one thing is this the

315
00:15:32,379 --> 00:15:40,330
the normals are typically bent in the

316
00:15:36,429 --> 00:15:46,449
direction of the strongest incident

317
00:15:40,330 --> 00:15:50,410
light and I suppose that could be you

318
00:15:46,450 --> 00:15:52,990
know that could be something so let me

319
00:15:50,409 --> 00:15:54,519
just take that out of the I don't know

320
00:15:52,990 --> 00:15:55,509
if you guys remember this but one of the

321
00:15:54,519 --> 00:15:58,028
things we were doing is saying well

322
00:15:55,509 --> 00:16:02,139
let's go ahead and produce normals that

323
00:15:58,028 --> 00:16:06,458
are weighted by the direction that the

324
00:16:02,139 --> 00:16:07,659
light the strongest incoming light let

325
00:16:06,458 --> 00:16:12,069
me just see what happens if I get rid of

326
00:16:07,659 --> 00:16:16,719
that yeah so that doesn't really affect

327
00:16:12,070 --> 00:16:18,459
it too appreciably it looks like so yeah

328
00:16:16,720 --> 00:16:21,070
I guess all I could say is we definitely

329
00:16:18,458 --> 00:16:24,359
got some bad bugs in here so now it's a

330
00:16:21,070 --> 00:16:24,360
question of finding out what they are

331
00:16:26,190 --> 00:16:33,820
looking at this I mean it's pretty

332
00:16:30,820 --> 00:16:37,420
straightforward we start with a zero

333
00:16:33,820 --> 00:16:42,670
accumulator we accumulate colors we

334
00:16:37,419 --> 00:16:45,278
write those colors back that's really it

335
00:16:42,669 --> 00:16:46,719
so I'm not sure how that could really be

336
00:16:45,278 --> 00:16:50,379
all that weird you know

337
00:16:46,720 --> 00:16:52,089
we'll start with obvious stuff if the

338
00:16:50,379 --> 00:16:54,610
incident light was always just pure red

339
00:16:52,089 --> 00:17:03,089
just a pure red light what do we see

340
00:16:54,610 --> 00:17:03,089
right and so that's

341
00:17:03,149 --> 00:17:18,279
kind of strange so if I was to leave the

342
00:17:15,779 --> 00:17:20,109
average if I was to set the average

343
00:17:18,279 --> 00:17:22,299
direction to the light to be just the

344
00:17:20,109 --> 00:17:25,149
surface normal and then I was to set the

345
00:17:22,299 --> 00:17:27,909
incident light to always just be red

346
00:17:25,150 --> 00:17:30,490
I should just see a red scene right I

347
00:17:27,910 --> 00:17:34,990
mean that's what I should see you know

348
00:17:30,490 --> 00:17:39,269
but that is not what I'm seeing like

349
00:17:34,990 --> 00:17:39,269
that's just kind of somewhat nonsensical

350
00:17:41,910 --> 00:17:46,000
so yeah we got to figure out what's

351
00:17:44,380 --> 00:17:53,740
going on here I don't really know what's

352
00:17:46,000 --> 00:17:55,720
going on um so when we output our

353
00:17:53,740 --> 00:18:08,349
lighting quads

354
00:17:55,720 --> 00:18:10,990
I guess the lighting quads we're we're

355
00:18:08,349 --> 00:18:19,119
outputting just the emitters though so I

356
00:18:10,990 --> 00:18:21,009
guess that that actually makes some

357
00:18:19,119 --> 00:18:24,009
sense right so these are just the

358
00:18:21,009 --> 00:18:28,690
emitters if I switch off from just the

359
00:18:24,009 --> 00:18:32,140
admit errs this is a more of a

360
00:18:28,690 --> 00:18:37,809
representation of that final gather

361
00:18:32,140 --> 00:18:41,110
right but looking at that here I mean

362
00:18:37,809 --> 00:18:43,889
it's still wrong you know I'm saying it

363
00:18:41,109 --> 00:18:47,129
still looks roughly to be that same

364
00:18:43,890 --> 00:18:47,130
problematic look

365
00:18:51,309 --> 00:18:57,190
so what's going on I have no idea I

366
00:19:03,609 --> 00:19:10,759
guess I'm just gonna step through this

367
00:19:05,599 --> 00:19:11,779
and see because if we are cold setting

368
00:19:10,759 --> 00:19:13,009
the incident light in the average

369
00:19:11,779 --> 00:19:16,960
directional light those are the only

370
00:19:13,009 --> 00:19:16,960
things we actually use right

371
00:19:32,349 --> 00:19:48,969
of course we did make it greater than

372
00:19:34,179 --> 00:19:52,350
4000 I'm sitting taking a look at

373
00:19:48,970 --> 00:19:55,549
lighting textures here I would say that

374
00:19:52,349 --> 00:19:55,549
[Music]

375
00:19:56,278 --> 00:20:04,048
well there are a couple things that we

376
00:19:58,210 --> 00:20:04,048
should probably probably try to do here

377
00:20:04,230 --> 00:20:14,048
the first is that if I look at what's

378
00:20:09,700 --> 00:20:15,190
going on in the OpenGL code so here's

379
00:20:14,048 --> 00:20:18,819
the program that actually does the

380
00:20:15,190 --> 00:20:22,350
lighting so if I take a look at the the

381
00:20:18,819 --> 00:20:22,349
lighting code that's right here

382
00:20:24,099 --> 00:20:28,949
and you can see that it's doing I mean

383
00:20:26,440 --> 00:20:35,590
exactly what you expect it's taking the

384
00:20:28,950 --> 00:20:40,980
light and it's doing a it's doing a

385
00:20:35,589 --> 00:20:44,069
distance fall-off and it's doing a

386
00:20:40,980 --> 00:20:47,399
cosine fall-off on wherever that

387
00:20:44,069 --> 00:20:47,398
incoming light is

388
00:20:49,150 --> 00:20:52,239
[Music]

389
00:20:55,819 --> 00:21:01,919
yeah there's just so many things going

390
00:20:57,839 --> 00:21:07,109
on here sort of need to be separate at

391
00:21:01,920 --> 00:21:11,180
the same time because for starters since

392
00:21:07,109 --> 00:21:17,969
we've got this voxel lighting going on I

393
00:21:11,180 --> 00:21:20,610
I don't actually know why we would be

394
00:21:17,970 --> 00:21:23,250
having light positions involved here at

395
00:21:20,609 --> 00:21:30,719
all because the light positions we don't

396
00:21:23,250 --> 00:21:32,849
even know I mean I guess I guess this is

397
00:21:30,720 --> 00:21:39,150
just because we're trying to do a blend

398
00:21:32,849 --> 00:21:42,899
here of multiple sample points and we're

399
00:21:39,150 --> 00:21:47,190
trying to get those sample points to you

400
00:21:42,900 --> 00:21:53,519
know interpolate so I don't actually

401
00:21:47,190 --> 00:21:55,410
know I don't actually know that there's

402
00:21:53,519 --> 00:21:58,559
really distance fall-off here per se

403
00:21:55,410 --> 00:22:00,090
this is really just a case of taking a

404
00:21:58,559 --> 00:22:02,190
couple scattered sample points and

405
00:22:00,089 --> 00:22:07,199
combining them together so this is

406
00:22:02,190 --> 00:22:13,080
really the only fall off but what I

407
00:22:07,200 --> 00:22:14,940
would say is this probably shouldn't be

408
00:22:13,079 --> 00:22:18,389
part of the contribution equation

409
00:22:14,940 --> 00:22:23,279
because the contribution should be

410
00:22:18,390 --> 00:22:24,690
entirely like the contribution of this

411
00:22:23,279 --> 00:22:31,670
thing should be based on the

412
00:22:24,690 --> 00:22:31,670
interpolation between the samples but

413
00:22:37,559 --> 00:22:41,279
but that contribution should not be

414
00:22:39,839 --> 00:22:43,349
modified by the direction of fall-off

415
00:22:41,279 --> 00:22:51,389
the directional Falls should just affect

416
00:22:43,349 --> 00:22:56,689
the light right so it should look more

417
00:22:51,390 --> 00:22:56,690
like that or perhaps more to the point

418
00:23:06,799 --> 00:23:10,710
so something like this where we're

419
00:23:09,299 --> 00:23:12,240
saying like alright we've got the

420
00:23:10,710 --> 00:23:14,309
contribution amount that gets multiplied

421
00:23:12,240 --> 00:23:16,079
in but we've also got the directional

422
00:23:14,309 --> 00:23:17,579
fault that gets multiplied in the

423
00:23:16,079 --> 00:23:19,919
direction of false doesn't count for

424
00:23:17,579 --> 00:23:25,409
renormalization right because we don't

425
00:23:19,920 --> 00:23:27,600
want the light to get brighter the

426
00:23:25,410 --> 00:23:31,440
fall-off will create the light dimming

427
00:23:27,599 --> 00:23:33,750
effect as the angle gets steeper but if

428
00:23:31,440 --> 00:23:36,720
we were to track that in the contribs

429
00:23:33,750 --> 00:23:39,599
well then when we renormalize we will of

430
00:23:36,720 --> 00:23:43,079
course renormalize it away which we

431
00:23:39,599 --> 00:23:46,019
don't want to do so I think that's what

432
00:23:43,079 --> 00:23:50,759
I think that was just kind of a mistake

433
00:23:46,019 --> 00:23:53,069
there right so when we're doing this

434
00:23:50,759 --> 00:23:56,549
this RGB here and we do the one over

435
00:23:53,069 --> 00:23:59,569
result a this maybe also needs to get

436
00:23:56,549 --> 00:23:59,569
clamped it's hard to say

437
00:24:04,900 --> 00:24:12,820
I mean I guess if we look at how this is

438
00:24:10,900 --> 00:24:16,110
working here the contribution of these

439
00:24:12,819 --> 00:24:16,109
samples as we go through them

440
00:24:22,930 --> 00:24:28,150
I mean I don't really even know to be

441
00:24:25,900 --> 00:24:32,250
honest whether this should be doing like

442
00:24:28,150 --> 00:24:32,250
just do we really want this at all like

443
00:24:43,299 --> 00:24:49,159
so this represents the location of the

444
00:24:47,059 --> 00:24:51,919
light in the world

445
00:24:49,160 --> 00:24:54,350
of the it's and it's not really a light

446
00:24:51,920 --> 00:24:56,300
right what it does is it represents a

447
00:24:54,349 --> 00:25:01,009
location of a lighting sample that we

448
00:24:56,299 --> 00:25:02,899
took and so we've got two levels of

449
00:25:01,009 --> 00:25:07,430
London going on here right we have a

450
00:25:02,900 --> 00:25:11,180
voxel blending that's going on and then

451
00:25:07,430 --> 00:25:13,759
we're looping between those but it's

452
00:25:11,180 --> 00:25:17,150
unclear to me that we even want to take

453
00:25:13,759 --> 00:25:19,789
this light position into account like if

454
00:25:17,150 --> 00:25:21,380
we actually want the voxel lighting to

455
00:25:19,789 --> 00:25:23,690
be just a straight box of light we

456
00:25:21,380 --> 00:25:26,390
wouldn't do that so whether this makes

457
00:25:23,690 --> 00:25:28,160
any sense or not I'm not sure what this

458
00:25:26,390 --> 00:25:31,070
is basically doing is saying as I get

459
00:25:28,160 --> 00:25:33,500
closer or further from a particular

460
00:25:31,069 --> 00:25:45,619
light sample I want to diminish its

461
00:25:33,500 --> 00:25:50,319
contribution right and when we

462
00:25:45,619 --> 00:25:50,319
renormalize this we're basically saying

463
00:25:52,539 --> 00:26:00,819
we want that to to be brought back up to

464
00:25:56,599 --> 00:26:04,129
1.0 so no matter how much we added here

465
00:26:00,819 --> 00:26:08,119
we just want to eventually make sure

466
00:26:04,130 --> 00:26:10,160
that that it's that it's even what you

467
00:26:08,119 --> 00:26:14,179
can see here is although this gets

468
00:26:10,160 --> 00:26:15,620
clamped from 0 to 1 we're summing a

469
00:26:14,180 --> 00:26:18,289
bunch of them so it could be very well

470
00:26:15,619 --> 00:26:21,399
higher than 1 but in theory this should

471
00:26:18,289 --> 00:26:21,399
should knock it back

472
00:26:24,630 --> 00:26:30,960
so I don't see any real way that that

473
00:26:28,119 --> 00:26:30,959
could overflow

474
00:26:42,519 --> 00:26:46,940
but it's hard to say what I do think is

475
00:26:45,380 --> 00:26:49,040
clear is that the directional fall-off

476
00:26:46,940 --> 00:26:52,190
there should not have been involved in

477
00:26:49,039 --> 00:26:55,389
the contribution that's just a straight

478
00:26:52,190 --> 00:26:55,390
up oops

479
00:26:59,079 --> 00:27:14,169
expected x equals comma unexpected x

480
00:27:03,920 --> 00:27:16,279
equals boobs I agree

481
00:27:14,170 --> 00:27:25,420
x equals doesn't make a lot of sense

482
00:27:16,279 --> 00:27:25,420
there all right so let's keep moving on

483
00:27:28,690 --> 00:27:33,410
so that you know was not a particularly

484
00:27:31,819 --> 00:27:36,169
relevant part of the lighting solution

485
00:27:33,410 --> 00:27:39,470
at this point either although you cans

486
00:27:36,170 --> 00:27:44,690
can see it made some difference it

487
00:27:39,470 --> 00:27:45,980
doesn't seem to super make a lot like we

488
00:27:44,690 --> 00:27:47,779
still get all kinds of weird stuff

489
00:27:45,980 --> 00:27:49,160
happening and we're still not getting

490
00:27:47,779 --> 00:27:50,960
that ambient light that I thought we

491
00:27:49,160 --> 00:27:52,940
should get so we've still got lots of

492
00:27:50,960 --> 00:27:54,470
problems here there's actually good news

493
00:27:52,940 --> 00:27:56,000
the more problems we have the more

494
00:27:54,470 --> 00:27:59,440
likely our lighting will get better as

495
00:27:56,000 --> 00:28:03,289
we fix them up which is good

496
00:27:59,440 --> 00:28:05,750
all right so but I don't see any ways

497
00:28:03,289 --> 00:28:09,889
that this can overflow really so I think

498
00:28:05,750 --> 00:28:11,720
that that wasn't the problem I think

499
00:28:09,890 --> 00:28:15,070
something else is the problem I'm just

500
00:28:11,720 --> 00:28:15,069
not sure exactly what

501
00:28:26,259 --> 00:28:34,250
so let's ping-pong back over here so we

502
00:28:33,109 --> 00:28:36,199
got the incident light in the average

503
00:28:34,250 --> 00:28:37,640
direction to light their hard set so

504
00:28:36,200 --> 00:28:40,700
right now things retain their surface

505
00:28:37,640 --> 00:28:43,580
normal instead of bending it towards the

506
00:28:40,700 --> 00:28:47,330
light sources and we have the incident

507
00:28:43,579 --> 00:28:50,329
light which is just supposed to be set

508
00:28:47,329 --> 00:28:53,779
to read what we would expect about that

509
00:28:50,329 --> 00:28:55,730
after doing gather final lighting would

510
00:28:53,779 --> 00:28:57,200
we would expect that if we drew the

511
00:28:55,730 --> 00:28:58,610
incident light in the average direction

512
00:28:57,200 --> 00:28:59,900
to light we would just get pure red

513
00:28:58,609 --> 00:29:02,750
right that's what we would expect

514
00:28:59,900 --> 00:29:08,300
everywhere because when we come through

515
00:29:02,750 --> 00:29:11,029
here and we do the output lighting

516
00:29:08,299 --> 00:29:13,190
texture is call when we come through

517
00:29:11,029 --> 00:29:16,819
here and we output our link list of

518
00:29:13,190 --> 00:29:20,180
light samples per voxel then what we

519
00:29:16,819 --> 00:29:24,230
would see here is we we should see this

520
00:29:20,180 --> 00:29:28,370
incident light getting 1 0-0 which

521
00:29:24,230 --> 00:29:31,940
should end up giving us a to 5500 value

522
00:29:28,369 --> 00:29:33,169
that we pack in there right so I guess

523
00:29:31,940 --> 00:29:34,400
what the first thing I could do is just

524
00:29:33,170 --> 00:29:35,509
verify that that's actually what's

525
00:29:34,400 --> 00:29:37,490
happening but that's what we would

526
00:29:35,509 --> 00:29:39,740
expect to be happening and that's what

527
00:29:37,490 --> 00:29:43,150
we would expect to be sending down to

528
00:29:39,740 --> 00:29:43,150
the voxel layer right

529
00:29:56,650 --> 00:30:02,950
so I should see here's where we run the

530
00:29:59,799 --> 00:30:08,769
output I should be able to see in the

531
00:30:02,950 --> 00:30:12,039
incident light oh sorry we're still

532
00:30:08,769 --> 00:30:16,619
running a debug big build here which

533
00:30:12,039 --> 00:30:16,619
doesn't really let us inspect the values

534
00:30:39,329 --> 00:30:48,429
the difference of speed between debug

535
00:30:41,470 --> 00:30:50,829
and release is rather pronounced so

536
00:30:48,430 --> 00:30:53,170
here's the incident light values they

537
00:30:50,829 --> 00:30:53,589
are what we expect them to be so that's

538
00:30:53,170 --> 00:30:59,610
good

539
00:30:53,589 --> 00:31:01,779
and if we look at the packing version

540
00:30:59,609 --> 00:31:05,619
that's exactly what I would expect it to

541
00:31:01,779 --> 00:31:14,619
be as well and so when we actually go to

542
00:31:05,619 --> 00:31:17,019
send this down yeah I mean that looks

543
00:31:14,619 --> 00:31:24,000
fully correct that's exactly at what I

544
00:31:17,019 --> 00:31:28,769
would expect let's take a look at the

545
00:31:24,000 --> 00:31:28,769
average directional light as well

546
00:31:39,710 --> 00:31:45,039
in this case we're looking at negative Z

547
00:31:47,500 --> 00:31:54,829
negative Y so these these look like

548
00:31:50,779 --> 00:31:56,629
surface normals to me so that all looks

549
00:31:54,829 --> 00:31:59,149
fine like we got you know most of our

550
00:31:56,630 --> 00:32:04,760
things or cubes in the world these that

551
00:31:59,150 --> 00:32:09,170
makes perfect sense so that all seems

552
00:32:04,759 --> 00:32:11,029
pretty good so yeah if all of those

553
00:32:09,170 --> 00:32:16,610
things are getting sent down exactly

554
00:32:11,029 --> 00:32:18,410
that way I mean one problem that we do

555
00:32:16,609 --> 00:32:20,599
have right is we don't have a way of

556
00:32:18,410 --> 00:32:24,650
directly visit visualizing the lighting

557
00:32:20,599 --> 00:32:29,269
clouds here because when we do an output

558
00:32:24,650 --> 00:32:37,400
lighting quads those lighting quads are

559
00:32:29,269 --> 00:32:40,309
going to get lit by the the voxel itself

560
00:32:37,400 --> 00:32:41,840
which messes up our debug view right so

561
00:32:40,309 --> 00:32:46,669
like for example you know when I run

562
00:32:41,839 --> 00:32:48,909
this back to release mode there turn

563
00:32:46,670 --> 00:32:48,910
around

564
00:33:01,000 --> 00:33:05,558
so if we take a look at what happens

565
00:33:03,109 --> 00:33:05,558
here right

566
00:33:05,619 --> 00:33:12,109
all of these emitters that we're viewing

567
00:33:08,329 --> 00:33:14,839
right now are also being lit you know by

568
00:33:12,109 --> 00:33:16,879
the Z bias program which we don't

569
00:33:14,839 --> 00:33:18,619
actually want if we just wanted to see

570
00:33:16,880 --> 00:33:22,280
what their pure emission values are

571
00:33:18,619 --> 00:33:25,969
right and that's why if you take a look

572
00:33:22,279 --> 00:33:27,549
at what you're seeing here it's when we

573
00:33:25,970 --> 00:33:30,679
switch back to doing actual rendering

574
00:33:27,549 --> 00:33:34,879
there's a lot more light that's because

575
00:33:30,679 --> 00:33:38,960
the emitter quads version is showing the

576
00:33:34,880 --> 00:33:41,240
results of just the emission bounces

577
00:33:38,960 --> 00:33:54,230
whereas this is showing the results of

578
00:33:41,240 --> 00:33:58,009
the actual gather right so yeah that's

579
00:33:54,230 --> 00:34:00,710
all but again so if you take a look at

580
00:33:58,009 --> 00:34:03,440
what we're seeing here the result of the

581
00:34:00,710 --> 00:34:05,808
action will gather again doesn't make a

582
00:34:03,440 --> 00:34:11,329
lot of sense because I'm I'm throwing

583
00:34:05,808 --> 00:34:14,090
away that information I'm I'm not

584
00:34:11,329 --> 00:34:17,569
actually recording the actual gather

585
00:34:14,090 --> 00:34:20,149
information I'm just setting the

586
00:34:17,570 --> 00:34:22,700
incident light color to red and the

587
00:34:20,148 --> 00:34:27,019
direction to be whatever the surface

588
00:34:22,699 --> 00:34:29,569
normal was but you can see what I'm

589
00:34:27,019 --> 00:34:34,340
seeing here is actually a very distinct

590
00:34:29,570 --> 00:34:36,500
set of patterns that are not constant in

591
00:34:34,340 --> 00:34:39,490
any way like they're very variable they

592
00:34:36,500 --> 00:34:41,570
you know they have way too much

593
00:34:39,489 --> 00:34:45,918
information in there for something that

594
00:34:41,570 --> 00:34:48,730
was supposed to be hard set so we

595
00:34:45,918 --> 00:34:51,079
definitely have some problems here and

596
00:34:48,730 --> 00:34:56,289
again I'm just kind of slowly moved

597
00:34:51,079 --> 00:34:56,289
towards what they might be so

598
00:34:59,219 --> 00:35:13,509
what the book got changed here so again

599
00:35:05,320 --> 00:35:19,030
going back to the shader code I'm kind

600
00:35:13,510 --> 00:35:21,910
of wondering here what I am doing that's

601
00:35:19,030 --> 00:35:23,560
making such a weird thing happen now if

602
00:35:21,909 --> 00:35:25,210
there were no lighting samples in a

603
00:35:23,559 --> 00:35:27,389
voxel then this wouldn't produce any

604
00:35:25,210 --> 00:35:27,389
light

605
00:35:37,130 --> 00:35:40,880
and now that I think about it I'm not

606
00:35:38,869 --> 00:35:44,599
sure why this is result dot a greater

607
00:35:40,880 --> 00:35:50,930
than one because it should renormalize

608
00:35:44,599 --> 00:35:53,569
regardless right it should be if it's

609
00:35:50,929 --> 00:35:56,109
greater than zero I don't know where

610
00:35:53,570 --> 00:35:56,110
that came from

611
00:35:58,869 --> 00:36:03,079
because it always should renormalize the

612
00:36:01,400 --> 00:36:10,220
contribution so that's just weird as

613
00:36:03,079 --> 00:36:12,049
well right so after you like add all the

614
00:36:10,219 --> 00:36:15,169
contributions in you should get

615
00:36:12,050 --> 00:36:17,570
something that renormalize is back to

616
00:36:15,170 --> 00:36:18,470
one so that was also a mistake probably

617
00:36:17,570 --> 00:36:20,620
because we've made so many modifications

618
00:36:18,469 --> 00:36:24,709
to this code you know stuff kind of gets

619
00:36:20,619 --> 00:36:26,569
Squinkie in there but again you know

620
00:36:24,710 --> 00:36:30,679
just absolutely nonsensical results here

621
00:36:26,570 --> 00:36:34,519
right like this should be like how is it

622
00:36:30,679 --> 00:36:41,119
black it should be pure red and I have

623
00:36:34,519 --> 00:36:43,400
no idea why so again let's start with

624
00:36:41,119 --> 00:36:45,679
some sort of obvious stuff here I'm

625
00:36:43,400 --> 00:36:47,510
gonna stuff the color value here I'm

626
00:36:45,679 --> 00:36:53,419
just gonna tell it that the color is

627
00:36:47,510 --> 00:36:56,150
green always so no matter what voxel it

628
00:36:53,420 --> 00:36:57,860
happens to be picking for lighting it

629
00:36:56,150 --> 00:37:01,039
will always think that that voxel is

630
00:36:57,860 --> 00:37:05,030
green and we should get just pure green

631
00:37:01,039 --> 00:37:10,519
right and it looks like we do so this is

632
00:37:05,030 --> 00:37:14,710
just green times the value ah okay well

633
00:37:10,519 --> 00:37:18,639
I should have guessed that I guess haha

634
00:37:14,710 --> 00:37:23,480
so that's why under a pure red light I

635
00:37:18,639 --> 00:37:27,349
guess it does make sense that the blue

636
00:37:23,480 --> 00:37:30,769
surface which cannot reflect any red

637
00:37:27,349 --> 00:37:32,319
light that that makes sense okay I'll

638
00:37:30,769 --> 00:37:38,449
give that one to you

639
00:37:32,320 --> 00:37:41,030
fair enough okay so we're gonna just

640
00:37:38,449 --> 00:37:44,230
return to your green light here and

641
00:37:41,030 --> 00:37:44,230
verify that that's okay

642
00:37:49,030 --> 00:37:53,800
and these are both black because red and

643
00:37:51,760 --> 00:37:57,900
the red and green surfaces don't reflect

644
00:37:53,800 --> 00:38:01,330
in a green light so when they multiply

645
00:37:57,900 --> 00:38:03,670
they won't get any any results that's

646
00:38:01,329 --> 00:38:08,789
totally fine looks like I'm going to go

647
00:38:03,670 --> 00:38:08,789
ahead and set it to pure blue light

648
00:38:13,650 --> 00:38:22,289
again that looks okay and pure red light

649
00:38:36,659 --> 00:38:42,329
and then I'll seems pretty reasonable

650
00:38:37,920 --> 00:38:44,940
I'm not sure why these steps are darker

651
00:38:42,329 --> 00:38:50,460
I don't know if those steps are supposed

652
00:38:44,940 --> 00:38:55,800
to have a darker color to them so I'm a

653
00:38:50,460 --> 00:38:58,199
little unsure about that but all right

654
00:38:55,800 --> 00:39:00,840
so that'll looks fine so if we were to

655
00:38:58,199 --> 00:39:04,919
stuff the voxel with ones we should just

656
00:39:00,840 --> 00:39:06,570
get a pure yeah and we do and okay so

657
00:39:04,920 --> 00:39:09,150
these should be darker they were green

658
00:39:06,570 --> 00:39:12,000
whereas the ground is white at the

659
00:39:09,150 --> 00:39:14,639
moment so that's fine

660
00:39:12,000 --> 00:39:17,969
so the voxel interpolation is it like

661
00:39:14,639 --> 00:39:21,299
totally busted or anything right

662
00:39:17,969 --> 00:39:24,059
it's producing sane results in the case

663
00:39:21,300 --> 00:39:28,019
where we just stuff a white light in

664
00:39:24,059 --> 00:39:34,170
there you know everything's fine so if I

665
00:39:28,019 --> 00:39:42,900
was to then go and say well okay let's

666
00:39:34,170 --> 00:39:50,190
pretend that every light that we loop

667
00:39:42,900 --> 00:39:58,410
through has a known set of values so the

668
00:39:50,190 --> 00:40:03,650
light color let's say was white so every

669
00:39:58,409 --> 00:40:03,649
light sample here is going to be white I

670
00:40:04,039 --> 00:40:15,239
would expect to get and and that the

671
00:40:09,840 --> 00:40:18,030
direct the direction fall-off is going

672
00:40:15,239 --> 00:40:20,009
to be 1.0 so there's no directional

673
00:40:18,030 --> 00:40:23,850
fall-off and the light color is white

674
00:40:20,010 --> 00:40:27,630
I should see just pure white now it

675
00:40:23,849 --> 00:40:29,989
didn't like that try to redefine the

676
00:40:27,630 --> 00:40:29,990
variable

677
00:40:33,048 --> 00:40:53,099
assignment of incompatible types like

678
00:40:40,469 --> 00:40:58,969
color is not everybody used anymore so

679
00:40:53,099 --> 00:41:01,650
that's okay so we'll do that all right

680
00:40:58,969 --> 00:41:08,068
too much yeah I agree with that too

681
00:41:01,650 --> 00:41:09,389
sorry too many typos all right so now

682
00:41:08,068 --> 00:41:12,838
I'm assuming that the light color is

683
00:41:09,389 --> 00:41:15,179
white and I'm summing it together so

684
00:41:12,838 --> 00:41:18,480
here is one where we basically have you

685
00:41:15,179 --> 00:41:21,798
know white light samples everywhere and

686
00:41:18,480 --> 00:41:24,119
you could kind of see that this is bad

687
00:41:21,798 --> 00:41:26,519
because here we just have nothing but

688
00:41:24,119 --> 00:41:29,970
white light samples and yet we still get

689
00:41:26,519 --> 00:41:32,670
places where things are wrong and I

690
00:41:29,969 --> 00:41:35,219
don't know I'm just assuming that the

691
00:41:32,670 --> 00:41:40,619
reason for that is because the voxels in

692
00:41:35,219 --> 00:41:42,838
that area didn't get any sample values

693
00:41:40,619 --> 00:41:45,269
in them like this happens to be a voxel

694
00:41:42,838 --> 00:41:46,889
it just doesn't have any data and so

695
00:41:45,269 --> 00:41:53,278
when it goes there it can't figure out

696
00:41:46,889 --> 00:41:55,759
what the color must be right and there's

697
00:41:53,278 --> 00:41:58,889
a couple of different ways that we could

698
00:41:55,760 --> 00:42:04,380
you know try to fix that we could try to

699
00:41:58,889 --> 00:42:06,719
add to a given voxel we could try to

700
00:42:04,380 --> 00:42:09,059
like add you know duplicate light

701
00:42:06,719 --> 00:42:12,328
sources that are near the boundaries of

702
00:42:09,059 --> 00:42:14,190
voxels or things like this but this is

703
00:42:12,329 --> 00:42:16,230
kind of a problem with this lighting

704
00:42:14,190 --> 00:42:19,950
scheme that the voxel lookup doesn't

705
00:42:16,230 --> 00:42:23,818
super handle very well which is just

706
00:42:19,949 --> 00:42:26,009
that fact that it can't really it

707
00:42:23,818 --> 00:42:26,940
doesn't grab the light from the plate

708
00:42:26,010 --> 00:42:30,380
everywhere that it would necessarily

709
00:42:26,940 --> 00:42:30,380
need to grab the light right

710
00:42:36,579 --> 00:42:41,630
and this is one of those things where

711
00:42:38,719 --> 00:42:43,129
like you know we can imagine running

712
00:42:41,630 --> 00:42:47,599
something on our Vauxhall that would

713
00:42:43,130 --> 00:42:48,800
sort of spread the light out especially

714
00:42:47,599 --> 00:42:51,920
if we go to some scheme where we

715
00:42:48,800 --> 00:42:53,570
actually just have the voxel itself has

716
00:42:51,920 --> 00:42:55,280
a bit of like what's the light going

717
00:42:53,570 --> 00:42:56,900
through it which is kind of what we've

718
00:42:55,280 --> 00:43:01,160
been moving towards but we haven't quite

719
00:42:56,900 --> 00:43:02,690
gotten there yet but again you can kind

720
00:43:01,159 --> 00:43:06,649
of see some weirdness here right like

721
00:43:02,690 --> 00:43:13,929
why are we getting these sort of darker

722
00:43:06,650 --> 00:43:16,039
patterns here you know what's going on

723
00:43:13,929 --> 00:43:18,259
so looking at this there's a couple

724
00:43:16,039 --> 00:43:20,630
different reasons for this like one

725
00:43:18,260 --> 00:43:23,450
could be because the contributes were

726
00:43:20,630 --> 00:43:24,800
bad or wrong because we know the

727
00:43:23,449 --> 00:43:27,919
direction will fall off is not that any

728
00:43:24,800 --> 00:43:29,630
more but you know we're summing up these

729
00:43:27,920 --> 00:43:33,349
contributes and then we're normalizing

730
00:43:29,630 --> 00:43:34,880
by them after the fact I so it should

731
00:43:33,349 --> 00:43:36,470
that should just be taken out of the

732
00:43:34,880 --> 00:43:38,030
equation so the only really thing that

733
00:43:36,469 --> 00:43:43,909
should be possible there is if there are

734
00:43:38,030 --> 00:43:47,320
no light indices at all so you know what

735
00:43:43,909 --> 00:43:49,879
would how could we test for that right

736
00:43:47,320 --> 00:43:55,670
so let's go ahead and say if there was

737
00:43:49,880 --> 00:43:58,309
no light index so there's no lights in

738
00:43:55,670 --> 00:44:02,450
this box at all then what I'm going to

739
00:43:58,309 --> 00:44:07,460
do is I'm going to set light or just the

740
00:44:02,449 --> 00:44:12,919
result I'm gonna set the result to pure

741
00:44:07,460 --> 00:44:17,929
yellow anywhere that there's no light

742
00:44:12,920 --> 00:44:22,358
sample so I can verify to myself that

743
00:44:17,929 --> 00:44:22,358
that's actually what's going on right

744
00:44:24,820 --> 00:44:33,380
so here is that and what you can kind of

745
00:44:30,440 --> 00:44:35,630
see here is that suggest sit no that's

746
00:44:33,380 --> 00:44:37,490
that's not what's going on here right

747
00:44:35,630 --> 00:44:40,730
something that we got a different bug

748
00:44:37,489 --> 00:44:42,829
because you can see it blurring towards

749
00:44:40,730 --> 00:44:48,050
yellow on the outside of the voxel where

750
00:44:42,829 --> 00:44:51,619
there might not be anything I guess you

751
00:44:48,050 --> 00:45:05,150
know maybe I'd say that oh but you know

752
00:44:51,619 --> 00:45:09,130
what that's a blue light so so how would

753
00:45:05,150 --> 00:45:09,130
I go about that

754
00:45:14,338 --> 00:45:19,619
because the problem is this gets

755
00:45:15,809 --> 00:45:22,079
multiplied after I guess what I could do

756
00:45:19,619 --> 00:45:24,719
is temporarily so here's one thing I

757
00:45:22,079 --> 00:45:30,689
could do let's get rid of that for one

758
00:45:24,719 --> 00:45:34,289
second and I'll go in here and say okay

759
00:45:30,688 --> 00:45:36,688
during this service select RGB times L

760
00:45:34,289 --> 00:45:40,799
bit I'm gonna just actually set it to

761
00:45:36,688 --> 00:45:50,969
the light color so now whatever the

762
00:45:40,798 --> 00:45:52,469
light color is is what we will see this

763
00:45:50,969 --> 00:45:58,369
is whatever comes back from the light

764
00:45:52,469 --> 00:46:04,528
color and you can see that you know it's

765
00:45:58,369 --> 00:46:05,969
sort of darker in here right so those

766
00:46:04,528 --> 00:46:08,188
are the light colors that are incoming

767
00:46:05,969 --> 00:46:09,769
so if I come back here now and say all

768
00:46:08,188 --> 00:46:12,389
right why is that happening

769
00:46:09,768 --> 00:46:16,588
now if I wanted to I could say if light

770
00:46:12,389 --> 00:46:17,848
I equals zero well okay in that case the

771
00:46:16,588 --> 00:46:20,969
result is going to be equal to that

772
00:46:17,849 --> 00:46:23,489
bright yellow so now we should be able

773
00:46:20,969 --> 00:46:25,108
to see that bright yellow anywhere that

774
00:46:23,489 --> 00:46:27,119
you know we're getting in correct

775
00:46:25,108 --> 00:46:29,699
lighting results or can't compute

776
00:46:27,119 --> 00:46:31,140
letting results correctly everything is

777
00:46:29,699 --> 00:46:32,999
yell at the start because the voxel is

778
00:46:31,139 --> 00:46:36,409
completely empty which means it's not

779
00:46:32,998 --> 00:46:39,419
finding any lighting samples then when I

780
00:46:36,409 --> 00:46:42,659
go ahead and move on here what you can

781
00:46:39,420 --> 00:46:45,449
see is like yeah we're getting exactly

782
00:46:42,659 --> 00:46:47,399
the problem I was talking about you can

783
00:46:45,449 --> 00:46:50,309
see that as we look through here there's

784
00:46:47,400 --> 00:46:54,719
just a ton of places where there's just

785
00:46:50,309 --> 00:46:56,849
no lighting samples to pull from so the

786
00:46:54,719 --> 00:46:59,929
next question I guess is why are there

787
00:46:56,849 --> 00:47:02,999
no lighting samples to pull from and a

788
00:46:59,929 --> 00:47:08,099
closely related question would be can we

789
00:47:02,998 --> 00:47:11,368
do something about that how that is it

790
00:47:08,099 --> 00:47:13,318
right so let's take a look at what

791
00:47:11,369 --> 00:47:15,239
happens if I set this to red instead of

792
00:47:13,318 --> 00:47:18,679
yet yellow so it's a little easier to

793
00:47:15,239 --> 00:47:18,679
see like I put the pure red

794
00:47:23,000 --> 00:47:26,780
and what you can see is that there's

795
00:47:24,739 --> 00:47:29,659
some places like right in here that seem

796
00:47:26,780 --> 00:47:32,480
pretty bad but honestly a lot of the

797
00:47:29,659 --> 00:47:33,949
places are only trending towards a

798
00:47:32,480 --> 00:47:36,170
location in the voxel that doesn't have

799
00:47:33,949 --> 00:47:38,210
samples but they're still inside a

800
00:47:36,170 --> 00:47:40,789
region that does right

801
00:47:38,210 --> 00:47:45,019
so one thing we probably want to do is

802
00:47:40,789 --> 00:47:47,809
let the contribute I think would be my

803
00:47:45,019 --> 00:47:50,239
suggestion so instead of renormalizing

804
00:47:47,809 --> 00:47:52,340
the voxel sample here I think what we

805
00:47:50,239 --> 00:47:58,369
want to do is actually have some voxel

806
00:47:52,340 --> 00:48:01,970
light return the full v4 that way the

807
00:47:58,369 --> 00:48:07,449
contribution value is tracked and then

808
00:48:01,969 --> 00:48:07,449
when we come through and do our our

809
00:48:08,170 --> 00:48:15,789
voxel summation here what we could do is

810
00:48:11,840 --> 00:48:18,789
try to make the looping respect that

811
00:48:15,789 --> 00:48:18,789
right

812
00:48:31,570 --> 00:48:38,809
so if we grab each of these we now would

813
00:48:34,639 --> 00:48:41,420
have if we restore the actual v4 we

814
00:48:38,809 --> 00:48:43,670
would now know what the voxel lighting

815
00:48:41,420 --> 00:48:49,840
was in that area and whether or not we

816
00:48:43,670 --> 00:48:49,840
got any samples right then when we lurk

817
00:48:50,650 --> 00:48:58,360
we could try to take this into account

818
00:48:53,889 --> 00:49:07,159
right we could try to take into account

819
00:48:58,360 --> 00:49:13,610
that lack of lighting as necessary right

820
00:49:07,159 --> 00:49:16,869
and so yeah like imagine doing something

821
00:49:13,610 --> 00:49:16,870
here called Vox slurp

822
00:49:29,659 --> 00:49:35,179
and again a lot of the stuff we're gonna

823
00:49:33,409 --> 00:49:37,489
have to think hard about because you

824
00:49:35,179 --> 00:49:39,108
know you can't be doing as I'm really

825
00:49:37,489 --> 00:49:41,059
like just playing with the lighting here

826
00:49:39,108 --> 00:49:43,549
and trying to figure out stuff that we

827
00:49:41,059 --> 00:49:48,500
think can work but this is like pretty

828
00:49:43,550 --> 00:49:51,140
expensive stuff that's going on here so

829
00:49:48,500 --> 00:49:53,510
it's not necessarily a given that we

830
00:49:51,139 --> 00:49:57,108
would be able to do any of this stuff

831
00:49:53,510 --> 00:49:58,670
actually in the shipping version but

832
00:49:57,108 --> 00:50:00,710
we're just trying to find something that

833
00:49:58,670 --> 00:50:02,720
can work and then you know we'll

834
00:50:00,710 --> 00:50:05,090
optimize it from the working version as

835
00:50:02,719 --> 00:50:06,739
much as we can but with lighting again

836
00:50:05,090 --> 00:50:10,760
we just the fine thing that works first

837
00:50:06,739 --> 00:50:12,019
and then once we have found it then we

838
00:50:10,760 --> 00:50:22,310
have to try and figure how to get it to

839
00:50:12,019 --> 00:50:24,289
run reasonably right so here is a box

840
00:50:22,309 --> 00:50:31,670
lerp that's just gonna do the straight

841
00:50:24,289 --> 00:50:35,059
lip exactly as it was doing it ooh but

842
00:50:31,670 --> 00:50:41,720
somehow that changed the result what

843
00:50:35,059 --> 00:50:44,679
happened there oh right I this has to

844
00:50:41,719 --> 00:50:44,679
renormalize at the end

845
00:51:01,860 --> 00:51:09,450
so there's oddly enough that already

846
00:51:06,269 --> 00:51:13,320
looks better which doesn't make really

847
00:51:09,449 --> 00:51:15,149
much sense to me although I guess the

848
00:51:13,320 --> 00:51:20,160
fact that it's doing the voxel

849
00:51:15,150 --> 00:51:32,430
interpolation using the contribution

850
00:51:20,159 --> 00:51:33,509
values is itself enough yeah that's

851
00:51:32,429 --> 00:51:35,429
pretty interesting that that alone

852
00:51:33,510 --> 00:51:37,260
helped but then when I was going to say

853
00:51:35,429 --> 00:51:39,929
is when we're actually doing this this

854
00:51:37,260 --> 00:51:44,570
looping value what I wanted to then do

855
00:51:39,929 --> 00:51:44,569
was say alright let's just assume that

856
00:51:45,469 --> 00:51:53,329
the result is l0 right so I'll just

857
00:51:49,920 --> 00:52:04,730
start with that and what we'll do is say

858
00:51:53,329 --> 00:52:04,730
if L 1 dot a is 0 or I should say if

859
00:52:05,510 --> 00:52:09,680
trying to think of how to write this

860
00:52:07,230 --> 00:52:09,679
exactly

861
00:52:21,608 --> 00:52:32,568
maybe something like this so I guess a

862
00:52:29,420 --> 00:52:34,519
if L zeros alpha value is zero so

863
00:52:32,568 --> 00:52:37,068
there's no samples there then we just

864
00:52:34,518 --> 00:52:38,919
want to use L 1 right we're not going to

865
00:52:37,068 --> 00:52:43,788
blend between them because we can't

866
00:52:38,920 --> 00:52:55,548
there's no light there similarly if L

867
00:52:43,789 --> 00:52:59,089
zeros is all right actually now I think

868
00:52:55,548 --> 00:53:02,150
about this we could I'm gonna I'll keep

869
00:52:59,088 --> 00:53:03,259
doing this just for fun but we could

870
00:53:02,150 --> 00:53:06,730
actually do this in an easier way to

871
00:53:03,259 --> 00:53:10,130
what we could do is just for every voxel

872
00:53:06,730 --> 00:53:13,219
when we set that voxel value we could

873
00:53:10,130 --> 00:53:17,180
look to see if its neighbors or rather

874
00:53:13,219 --> 00:53:20,449
for every voxel in the grid after we're

875
00:53:17,179 --> 00:53:22,460
done computing it for any voxel that

876
00:53:20,449 --> 00:53:24,558
doesn't have any lights in it just set

877
00:53:22,460 --> 00:53:29,389
its light pointer to point to the light

878
00:53:24,559 --> 00:53:33,920
of some voxel in its vicinity that does

879
00:53:29,389 --> 00:53:38,150
have one right because then we wouldn't

880
00:53:33,920 --> 00:53:40,099
need to do any of the special casing in

881
00:53:38,150 --> 00:53:42,980
fact I think that's just better because

882
00:53:40,099 --> 00:53:49,640
that incurs no speed penalty like this

883
00:53:42,980 --> 00:53:53,838
does in just a regular case so I think

884
00:53:49,639 --> 00:53:55,989
that's actually better than what I was

885
00:53:53,838 --> 00:53:55,989
doing

886
00:54:00,940 --> 00:54:04,090
all right

887
00:54:16,568 --> 00:54:20,228
all right so I think what I'll do is

888
00:54:18,278 --> 00:54:22,208
I'll do that yeah I'll come do that I'm

889
00:54:20,228 --> 00:54:34,298
gonna I think I might take a quick break

890
00:54:22,208 --> 00:54:35,948
from streaming I but let's do that when

891
00:54:34,298 --> 00:54:41,018
I come back let's loop through all the

892
00:54:35,949 --> 00:54:43,389
voxels and and what we'll do is we'll

893
00:54:41,018 --> 00:54:45,308
set a neighbor as equal to two ones that

894
00:54:43,389 --> 00:54:47,798
any empty neighbor will get set to a

895
00:54:45,309 --> 00:54:49,028
full neighbor neighbor in the way I'm

896
00:54:47,798 --> 00:54:52,208
going to take a quick break from stream

897
00:54:49,028 --> 00:55:10,498
and then I will be back in just a few

898
00:54:52,208 --> 00:55:10,498
moments okay back to it so yeah the I

899
00:55:13,588 --> 00:55:17,380
think the first thing that I do want to

900
00:55:15,849 --> 00:55:19,929
do then is just try to get it so that

901
00:55:17,380 --> 00:55:22,659
we're not sampling from places don't

902
00:55:19,929 --> 00:55:24,668
have samples in them and I think the

903
00:55:22,659 --> 00:55:32,289
only way to do that is just to make sure

904
00:55:24,668 --> 00:55:34,418
that we get that we always that we

905
00:55:32,289 --> 00:55:37,839
always flood fill our voxel essentially

906
00:55:34,418 --> 00:55:39,879
and make sure that things that don't

907
00:55:37,838 --> 00:55:43,708
have anything in them take something

908
00:55:39,880 --> 00:55:46,419
from their neighbor where possible right

909
00:55:43,708 --> 00:55:52,719
so here in output lighting textures

910
00:55:46,418 --> 00:55:55,358
right what I could do is say you know

911
00:55:52,719 --> 00:56:00,639
much like we were doing in this loop

912
00:55:55,358 --> 00:56:02,608
here what I could do is do a simple sort

913
00:56:00,639 --> 00:56:07,538
of directional fill after the fact here

914
00:56:02,608 --> 00:56:10,498
so this is our lighting textures output

915
00:56:07,539 --> 00:56:10,499
lighting textures function

916
00:56:12,568 --> 00:56:19,548
so right here where we go through each

917
00:56:14,518 --> 00:56:23,399
of the values what I can do is just look

918
00:56:19,548 --> 00:56:25,829
for any given one of these look at its

919
00:56:23,400 --> 00:56:37,229
neighbors if it's zero so we could say

920
00:56:25,829 --> 00:56:41,160
it's like alright if we take a look at

921
00:56:37,228 --> 00:56:46,678
the thing that we were packing here

922
00:56:41,159 --> 00:56:52,978
which is look at that this value right

923
00:56:46,679 --> 00:56:57,539
here voxels ZYX if I was to go ahead and

924
00:56:52,978 --> 00:57:01,618
look at that and see that it was not

925
00:56:57,539 --> 00:57:08,609
filled then what I could do is is set it

926
00:57:01,619 --> 00:57:11,130
to like a neighbor value and all I would

927
00:57:08,608 --> 00:57:14,548
do here is look to see where I could

928
00:57:11,130 --> 00:57:16,709
find a neighbor value right now for

929
00:57:14,548 --> 00:57:19,679
simplicity I think what I'll do at the

930
00:57:16,708 --> 00:57:23,788
moment is I'll just go ahead and only

931
00:57:19,679 --> 00:57:26,639
search just the you know reduced set by

932
00:57:23,789 --> 00:57:29,699
one so I know anytime I find one I can

933
00:57:26,639 --> 00:57:32,938
just look at each of the direct

934
00:57:29,699 --> 00:57:37,650
neighbors to see what's in there

935
00:57:32,938 --> 00:57:41,178
right so I could say all right neighbor

936
00:57:37,650 --> 00:57:52,309
equals deaths look up you know Z minus 1

937
00:57:41,179 --> 00:57:57,139
Y X like so and then I can do like

938
00:57:52,309 --> 00:57:57,140
neighbor equals neighbor and neighbor

939
00:57:57,918 --> 00:58:05,848
and just look through each of these in

940
00:58:03,449 --> 00:58:08,338
turn and again this is only when we

941
00:58:05,849 --> 00:58:09,749
initially create the voxel that we're

942
00:58:08,338 --> 00:58:14,639
doing this we're not doing it on every

943
00:58:09,748 --> 00:58:17,538
lookup right so we'll look at Z plus 1

944
00:58:14,639 --> 00:58:17,538
and Z minus 1

945
00:58:23,559 --> 00:58:39,039
and I don't know how many of these we

946
00:58:25,659 --> 00:58:42,519
actually want to do but you know I guess

947
00:58:39,039 --> 00:58:49,570
in this case we probably wanted do it

948
00:58:42,519 --> 00:58:51,550
this way we go

949
00:58:49,570 --> 00:58:56,530
so here I'll do like all the Z minus

950
00:58:51,550 --> 00:58:58,660
ones so we'll do Cu minus one

951
00:58:56,530 --> 00:59:00,609
I guess we could we could just do all of

952
00:58:58,659 --> 00:59:05,889
them here so we'll do all the Z minus

953
00:59:00,608 --> 00:59:08,588
ones will do I almost want to do this in

954
00:59:05,889 --> 00:59:11,980
a for loop there's so many of them but

955
00:59:08,588 --> 00:59:17,559
I'll do the Z minus ones here and we'll

956
00:59:11,980 --> 00:59:20,740
do y -1 to y plus one like so and in

957
00:59:17,559 --> 00:59:25,588
each of these cases we would do X minus

958
00:59:20,739 --> 00:59:25,588
1/2 X plus 1 right

959
00:59:38,539 --> 00:59:43,139
so here we have all the combinations for

960
00:59:40,980 --> 00:59:43,980
the Z minus 1 layer we've got y -1 X

961
00:59:43,139 --> 00:59:46,219
minus 1

962
00:59:43,980 --> 00:59:51,679
you know minus 1 plus 0 or whatever we

963
00:59:46,219 --> 01:00:02,279
would do this for each of them like so

964
00:59:51,679 --> 01:00:05,899
kind of an unholy terror and all we be

965
01:00:02,280 --> 01:00:05,900
changing it was the Z layer part of it

966
01:00:16,820 --> 01:00:27,119
and that's it so this should propagate

967
01:00:25,170 --> 01:00:30,000
it'll just search the neighborhood of

968
01:00:27,119 --> 01:00:32,280
the voxel and if it finds anything that

969
01:00:30,000 --> 01:00:39,358
it can use is the pointer to the light

970
01:00:32,280 --> 01:00:49,290
samples it will use it right what's it

971
01:00:39,358 --> 01:00:50,639
saying you 16 and that's it so I don't

972
01:00:49,289 --> 01:00:52,409
know hopefully that would give us

973
01:00:50,639 --> 01:00:54,089
something where we propagate those light

974
01:00:52,409 --> 01:00:59,608
values out to neighbors who don't have

975
01:00:54,090 --> 01:01:02,070
any light values and we'll see what

976
01:00:59,608 --> 01:01:03,900
happens so I don't see any difference

977
01:01:02,070 --> 01:01:08,220
there at all that looks exactly same to

978
01:01:03,900 --> 01:01:14,490
me which is weird right because that

979
01:01:08,219 --> 01:01:16,949
should have allowed to grab some

980
01:01:14,489 --> 01:01:20,519
neighbor light values there which it

981
01:01:16,949 --> 01:01:23,569
doesn't look like it did and I don't

982
01:01:20,519 --> 01:01:23,570
know why right

983
01:01:29,030 --> 01:01:39,080
anymore

984
01:01:30,179 --> 01:01:42,210
ah that's a little peculiar

985
01:01:39,079 --> 01:01:46,610
so I guess well you know what they know

986
01:01:42,210 --> 01:01:49,800
and maybe isn't so because the voxel

987
01:01:46,610 --> 01:01:56,720
that could just be on the edge of the

988
01:01:49,800 --> 01:01:56,720
voxel as well in fact I think it is

989
01:02:14,059 --> 01:02:21,429
yeah but even so so looking at that

990
01:02:16,519 --> 01:02:23,960
again since the voxel boundaries are

991
01:02:21,429 --> 01:02:27,230
presumably relatively tight fit to the

992
01:02:23,960 --> 01:02:32,510
scene what we should probably do is also

993
01:02:27,230 --> 01:02:34,280
expand those but again since this is

994
01:02:32,510 --> 01:02:36,620
only this isn't actually doing that

995
01:02:34,280 --> 01:02:42,650
search it doesn't have an apron there

996
01:02:36,619 --> 01:02:47,230
right so you know if we really want this

997
01:02:42,650 --> 01:02:50,599
to go all the way to the edge it has to

998
01:02:47,230 --> 01:02:58,190
actually not have these one and minus

999
01:02:50,599 --> 01:02:59,480
ones in there but even that so let's

1000
01:02:58,190 --> 01:03:02,659
take a look at some we know aren't on

1001
01:02:59,480 --> 01:03:06,409
the edge right we know all of these are

1002
01:03:02,659 --> 01:03:13,190
not on the edge right none of those are

1003
01:03:06,409 --> 01:03:16,730
on the edge so again it's kind of kind

1004
01:03:13,190 --> 01:03:19,400
of busted like there's just a lot of

1005
01:03:16,730 --> 01:03:21,139
bugs in here I have to figure out a good

1006
01:03:19,400 --> 01:03:22,280
way to sort of pare this down because

1007
01:03:21,139 --> 01:03:23,900
there's just a lot of stuff that isn't

1008
01:03:22,280 --> 01:03:25,940
making sense so we have a lot of

1009
01:03:23,900 --> 01:03:28,610
problems but it's hard with something

1010
01:03:25,940 --> 01:03:30,740
like lighting to figure out exactly how

1011
01:03:28,610 --> 01:03:33,289
to go about track of them sort of using

1012
01:03:30,739 --> 01:03:34,549
the structured art procedure here to do

1013
01:03:33,289 --> 01:03:36,590
it where I'm like putting in known

1014
01:03:34,550 --> 01:03:45,289
values to see what happens on the way

1015
01:03:36,590 --> 01:03:46,430
out but it's not really sufficient and

1016
01:03:45,289 --> 01:03:49,279
it feels like we're gonna have to

1017
01:03:46,429 --> 01:04:02,029
construct a more rigorous test case if

1018
01:03:49,280 --> 01:04:04,250
we want to get anywhere on it so if I if

1019
01:04:02,030 --> 01:04:07,120
I step back for a second and just say

1020
01:04:04,250 --> 01:04:07,119
what

1021
01:04:14,139 --> 01:04:19,670
you know let's let's verify that that's

1022
01:04:17,179 --> 01:04:21,289
working at all just first because that

1023
01:04:19,670 --> 01:04:22,490
should have filled interior nodes it

1024
01:04:21,289 --> 01:04:24,559
doesn't even look like it was doing that

1025
01:04:22,489 --> 01:04:36,379
so I'm kind of not sure what's happening

1026
01:04:24,559 --> 01:04:37,759
there you'll see is so bad at telling

1027
01:04:36,380 --> 01:04:49,160
you anything about what your code did in

1028
01:04:37,760 --> 01:05:05,510
release mode I guess what I can do is

1029
01:04:49,159 --> 01:05:07,519
set something so in this case what I'll

1030
01:05:05,510 --> 01:05:09,260
do is I'll just stop assuming that it

1031
01:05:07,519 --> 01:05:11,989
filled something in I'll stop the

1032
01:05:09,260 --> 01:05:15,050
program there so it should crash there I

1033
01:05:11,989 --> 01:05:18,049
mean well the cert there right if I ever

1034
01:05:15,050 --> 01:05:22,660
fill in a value so yes you can see that

1035
01:05:18,050 --> 01:05:22,660
I am filling in a value in theory right

1036
01:05:23,800 --> 01:05:28,970
and hey it looks like it wasn't

1037
01:05:26,329 --> 01:05:31,759
optimized away this time so you know it

1038
01:05:28,969 --> 01:05:36,349
is finding a value there and it is

1039
01:05:31,760 --> 01:05:39,410
actually doing a you know replacement of

1040
01:05:36,349 --> 01:05:46,819
whatever this previous value was which

1041
01:05:39,409 --> 01:05:49,759
was zero is now getting replaced with of

1042
01:05:46,820 --> 01:05:52,340
course it's now getting replaced with an

1043
01:05:49,760 --> 01:05:54,260
actual value so it does seem to be doing

1044
01:05:52,340 --> 01:05:57,140
some fill right it does seem to be

1045
01:05:54,260 --> 01:05:59,270
putting some values in to places where

1046
01:05:57,139 --> 01:06:00,679
they weren't previously put so that's

1047
01:05:59,269 --> 01:06:03,619
good

1048
01:06:00,679 --> 01:06:07,129
but it doesn't solve our problem right

1049
01:06:03,619 --> 01:06:08,750
like we are still seeing exactly what we

1050
01:06:07,130 --> 01:06:10,990
were seeing before to a first

1051
01:06:08,750 --> 01:06:10,989
approximation

1052
01:06:16,489 --> 01:06:27,419
so the question is what to do next I'm

1053
01:06:24,989 --> 01:06:28,439
gonna get rid of this for now leave it

1054
01:06:27,420 --> 01:06:31,159
in there in case you want to play with

1055
01:06:28,440 --> 01:06:31,159
something like that later

1056
01:06:47,210 --> 01:06:58,280
so again focusing on this just for a

1057
01:06:52,280 --> 01:07:00,980
second these locations are places that

1058
01:06:58,280 --> 01:07:07,099
just don't have voxel lighting samples

1059
01:07:00,980 --> 01:07:09,079
right and some of the patterns that I'm

1060
01:07:07,099 --> 01:07:11,030
seeing you're just really strange too

1061
01:07:09,079 --> 01:07:13,400
right

1062
01:07:11,030 --> 01:07:16,309
like I don't really understand this

1063
01:07:13,400 --> 01:07:18,680
pattern here because it should be a

1064
01:07:16,309 --> 01:07:21,079
fairly straightforward voxel pattern

1065
01:07:18,679 --> 01:07:24,259
like it shouldn't be something that's

1066
01:07:21,079 --> 01:07:27,140
got like a circular feel to it like that

1067
01:07:24,260 --> 01:07:29,720
I know it's just it's very strange I

1068
01:07:27,139 --> 01:07:31,699
don't understand the results at all like

1069
01:07:29,719 --> 01:07:34,068
I'm completely at a loss to what's

1070
01:07:31,699 --> 01:07:35,719
actually going on there and again I

1071
01:07:34,068 --> 01:07:40,670
think part of that is just this sort of

1072
01:07:35,719 --> 01:07:45,649
issue with too many things going on not

1073
01:07:40,670 --> 01:07:56,030
well enough tested if I go through and

1074
01:07:45,650 --> 01:07:59,500
set here if I take a stick back from

1075
01:07:56,030 --> 01:07:59,500
here and just say you know

1076
01:08:11,550 --> 01:08:28,989
if I just took the voxel values

1077
01:08:22,088 --> 01:08:31,119
themselves and I draw them so this

1078
01:08:28,989 --> 01:08:36,369
should give us like kind of a rainbow

1079
01:08:31,119 --> 01:08:43,329
sort of a look right based on where in

1080
01:08:36,369 --> 01:08:46,779
the voxel you actually are and you can

1081
01:08:43,329 --> 01:08:50,529
see it sort of does right now I don't

1082
01:08:46,779 --> 01:08:55,509
remember and I have to look what the

1083
01:08:50,529 --> 01:09:02,050
voxel so our voxel is only eight by

1084
01:08:55,510 --> 01:09:06,850
eight by eight somehow so actually

1085
01:09:02,050 --> 01:09:17,079
that's a more reasonable normalization

1086
01:09:06,850 --> 01:09:19,359
factor there so this is just an attempt

1087
01:09:17,079 --> 01:09:24,039
to verify that the voxel interpolation

1088
01:09:19,359 --> 01:09:28,630
itself didn't become broken and that

1089
01:09:24,039 --> 01:09:35,229
looks reasonable right that's a nice

1090
01:09:28,630 --> 01:09:43,779
color wash you know I don't see a lot of

1091
01:09:35,229 --> 01:09:45,369
artifacting on that so it seems anyway

1092
01:09:43,779 --> 01:09:49,649
at least a first approximation that the

1093
01:09:45,369 --> 01:09:49,649
voxel interpolation is fine

1094
01:09:54,590 --> 01:10:06,630
so that's fine so it's just what we're

1095
01:10:04,289 --> 01:10:10,920
returning from the voxel that's somehow

1096
01:10:06,630 --> 01:10:15,539
producing that patterns so this must be

1097
01:10:10,920 --> 01:10:17,550
pretty busted in here right like where

1098
01:10:15,539 --> 01:10:18,960
we end up having contributions and don't

1099
01:10:17,550 --> 01:10:22,020
or something

1100
01:10:18,960 --> 01:10:24,439
must be pretty bizarre so let's start

1101
01:10:22,020 --> 01:10:30,720
again by doing some things that are

1102
01:10:24,439 --> 01:10:36,000
relatively simple let's just ignore all

1103
01:10:30,720 --> 01:10:45,750
of this stuff entirely and let's just

1104
01:10:36,000 --> 01:10:49,170
set the results to be green or red based

1105
01:10:45,750 --> 01:10:53,270
on whether or not there was a sample and

1106
01:10:49,170 --> 01:10:53,270
so this should give us something

1107
01:10:53,390 --> 01:10:58,079
obviously starts out all red because

1108
01:10:55,229 --> 01:10:59,339
there are no box of samples and now it's

1109
01:10:58,079 --> 01:11:07,529
green and there's only red where there

1110
01:10:59,340 --> 01:11:10,170
aren't samples right now again I really

1111
01:11:07,529 --> 01:11:11,880
don't quite know how it's possible that

1112
01:11:10,170 --> 01:11:16,680
there's no samples and wherever we're

1113
01:11:11,880 --> 01:11:18,960
interpolating to but I guess that's

1114
01:11:16,680 --> 01:11:21,539
because you know like if I had to let's

1115
01:11:18,960 --> 01:11:25,230
say I had to assume that there wasn't a

1116
01:11:21,539 --> 01:11:28,199
bug then the reason that we're getting

1117
01:11:25,229 --> 01:11:31,500
say red in this area would be because

1118
01:11:28,199 --> 01:11:41,699
there's a voxel cell right here where

1119
01:11:31,500 --> 01:11:43,859
there is no there are no samples it

1120
01:11:41,699 --> 01:11:46,920
would be nice to be able to see the

1121
01:11:43,859 --> 01:11:50,429
voxels easily so I wonder if maybe I

1122
01:11:46,920 --> 01:11:55,279
should do that real quick we already had

1123
01:11:50,430 --> 01:11:55,280
a way to draw that right

1124
01:11:55,369 --> 01:11:58,369
it's

1125
01:12:02,100 --> 01:12:06,090
this one right here yeah

1126
01:12:13,609 --> 01:12:18,819
I think it's actually this

1127
01:12:28,168 --> 01:12:37,639
so here you can sort of see the lighting

1128
01:12:33,599 --> 01:12:40,199
solution visualized in voxel form and

1129
01:12:37,639 --> 01:12:44,399
anywhere where there is a sample there

1130
01:12:40,198 --> 01:12:50,868
will be a green cube and so you know

1131
01:12:44,399 --> 01:12:53,639
here's the here's a hole right here and

1132
01:12:50,868 --> 01:12:56,248
you can see that that that is probably

1133
01:12:53,639 --> 01:13:06,208
what's happening right there so let's

1134
01:12:56,248 --> 01:13:10,648
turn on the filling oh you know what I'm

1135
01:13:06,208 --> 01:13:20,010
an idiot this the filling we were doing

1136
01:13:10,649 --> 01:13:22,128
before the packing so that well no

1137
01:13:20,010 --> 01:13:25,530
that's fine because we're updating that

1138
01:13:22,128 --> 01:13:27,858
texture directly though so I'm not I

1139
01:13:25,529 --> 01:13:31,259
mean well I am an idiot but I'm not any

1140
01:13:27,859 --> 01:13:34,709
because of that I think it's important

1141
01:13:31,260 --> 01:13:39,570
to remember so if we go ahead here and

1142
01:13:34,708 --> 01:13:45,748
and take a look at what we end up with

1143
01:13:39,569 --> 01:13:49,340
now there isn't I don't think any hole

1144
01:13:45,748 --> 01:13:49,340
there right

1145
01:13:50,479 --> 01:13:53,479
yeah

1146
01:13:56,989 --> 01:14:08,689
so that did work that whole feeling so

1147
01:14:07,100 --> 01:14:26,900
let me go ahead and try to do something

1148
01:14:08,689 --> 01:14:27,769
a little more sane here so what I'm

1149
01:14:26,899 --> 01:14:29,569
going to do is I'm going to turn this

1150
01:14:27,770 --> 01:14:31,780
into four I loop like I saying I wanted

1151
01:14:29,569 --> 01:14:31,779
to

1152
01:14:50,680 --> 01:15:00,159
and what I'm gonna look at this value

1153
01:14:53,859 --> 01:15:07,059
I'm just gonna do like plus DZ plus plus

1154
01:15:00,159 --> 01:15:08,529
DX plus dy so I'm gonna say turn that

1155
01:15:07,060 --> 01:15:10,570
into a four I loop like I wanted to do

1156
01:15:08,529 --> 01:15:12,880
which again is doesn't really help us

1157
01:15:10,569 --> 01:15:16,559
yet but because I want to do a slight

1158
01:15:12,880 --> 01:15:16,560
change to it so it can fill everything

1159
01:15:17,220 --> 01:15:28,449
so what I didn't want to do is I want to

1160
01:15:21,279 --> 01:15:32,289
be able to take this these downs here

1161
01:15:28,449 --> 01:15:39,220
and widen this up to look at the entire

1162
01:15:32,289 --> 01:15:45,430
voxel and so here I just want to say

1163
01:15:39,220 --> 01:15:51,670
like okay you know if Z equals zero then

1164
01:15:45,430 --> 01:15:59,880
I don't want to look behind I just want

1165
01:15:51,670 --> 01:15:59,880
to start at the current Z level and if Z

1166
01:16:00,960 --> 01:16:17,590
equals like look up Z minus one then I

1167
01:16:09,909 --> 01:16:22,649
don't want to go ahead so this is right

1168
01:16:17,590 --> 01:16:22,650
the new way that's actually clamped

1169
01:16:27,569 --> 01:16:35,989
so this way we can do this on the lookup

1170
01:16:32,989 --> 01:16:35,989
oops

1171
01:16:48,118 --> 01:16:57,868
missing a parenthesis there there we go

1172
01:16:54,849 --> 01:17:02,109
not sure why didn't get that there we go

1173
01:16:57,868 --> 01:17:04,568
it's been a bad day alright so anyway we

1174
01:17:02,109 --> 01:17:06,338
can look at the X Y Z's there and clamp

1175
01:17:04,569 --> 01:17:08,889
them so that now we're only going to run

1176
01:17:06,338 --> 01:17:11,139
within the legal offset from wherever we

1177
01:17:08,889 --> 01:17:16,378
are if we get to the edge of the voxel

1178
01:17:11,139 --> 01:17:19,689
we won't look beyond into the void right

1179
01:17:16,378 --> 01:17:20,858
into a legal place or at least well

1180
01:17:19,689 --> 01:17:25,109
that's what I tried to do but I

1181
01:17:20,859 --> 01:17:25,109
obviously didn't quite do it right I

1182
01:17:27,029 --> 01:17:30,268
missed one there

1183
01:17:38,109 --> 01:17:42,920
and so now we should be filling

1184
01:17:40,369 --> 01:17:48,920
basically everything or anything that

1185
01:17:42,920 --> 01:17:51,529
had a neighbor even close to it and it

1186
01:17:48,920 --> 01:17:56,630
looks like now we're pretty close to

1187
01:17:51,529 --> 01:17:58,519
good and so I think all we would

1188
01:17:56,630 --> 01:18:02,449
probably have to do is clamp our voxel

1189
01:17:58,520 --> 01:18:03,590
lookups to not interpolate outside so if

1190
01:18:02,449 --> 01:18:08,329
we take a look what's happening here

1191
01:18:03,590 --> 01:18:12,050
where we do this textile fetch here that

1192
01:18:08,329 --> 01:18:15,829
that voxel at you can see it's it's not

1193
01:18:12,050 --> 01:18:18,050
like clamped at all right so if it was

1194
01:18:15,829 --> 01:18:21,529
gonna look outside of where the voxel

1195
01:18:18,050 --> 01:18:24,619
was it just would and we don't really

1196
01:18:21,529 --> 01:18:26,329
want that to happen so when we go to

1197
01:18:24,619 --> 01:18:29,930
actually some of this what we want to do

1198
01:18:26,329 --> 01:18:38,899
is clamp these app values we know we

1199
01:18:29,930 --> 01:18:44,780
shouldn't ever not really sure we don't

1200
01:18:38,899 --> 01:18:46,819
really pass down the the voxel here so

1201
01:18:44,779 --> 01:18:50,179
you know I'm trying to get our best way

1202
01:18:46,819 --> 01:18:52,609
to clamp the voxel um so you can see

1203
01:18:50,180 --> 01:19:01,220
here we do our inverse seldom times the

1204
01:18:52,609 --> 01:19:04,939
min corner right and we we're sort of

1205
01:19:01,220 --> 01:19:08,869
making sure that that we get the you

1206
01:19:04,939 --> 01:19:12,349
know the the eight voxels that surround

1207
01:19:08,869 --> 01:19:15,019
this this point but some of those voxels

1208
01:19:12,350 --> 01:19:17,780
might not actually be in right we might

1209
01:19:15,020 --> 01:19:22,070
be looking at a negative or negative one

1210
01:19:17,779 --> 01:19:23,929
or or an 8 which would be outside so we

1211
01:19:22,069 --> 01:19:25,939
want to be able to do here is say when

1212
01:19:23,930 --> 01:19:29,289
we go to look this up you know we want

1213
01:19:25,939 --> 01:19:29,289
to be able to do like a

1214
01:19:35,430 --> 01:20:00,369
we want to do something like this and

1215
01:19:45,359 --> 01:20:02,259
this is is really just right and we want

1216
01:20:00,369 --> 01:20:03,670
to know what the voxel dimension is here

1217
01:20:02,260 --> 01:20:12,610
so we're going to want that to be an

1218
01:20:03,670 --> 01:20:14,640
actual like included value sorry about

1219
01:20:12,609 --> 01:20:14,639
that

1220
01:20:18,130 --> 01:20:24,819
and ideally now you know it wouldn't be

1221
01:20:22,000 --> 01:20:27,399
if I did that correctly it wouldn't ever

1222
01:20:24,819 --> 01:20:29,880
look outside the voxel so now we've

1223
01:20:27,399 --> 01:20:36,299
filled all the holes in the voxel grid

1224
01:20:29,880 --> 01:20:39,190
and we have that we might look in right

1225
01:20:36,300 --> 01:20:42,010
and we have made it so that it never

1226
01:20:39,189 --> 01:20:45,069
like looks outside of the voxel grid it

1227
01:20:42,010 --> 01:20:46,539
just resamples the same voxel it's in if

1228
01:20:45,069 --> 01:20:47,769
it would have tried to look outside

1229
01:20:46,539 --> 01:20:51,550
because we know there's nothing there to

1230
01:20:47,770 --> 01:20:53,440
look for and so now we've we've

1231
01:20:51,550 --> 01:20:56,860
eliminated those red patches which is

1232
01:20:53,439 --> 01:21:03,029
like important and what we'd like to do

1233
01:20:56,859 --> 01:21:03,029
here is like like get a Vox dimension

1234
01:21:03,390 --> 01:21:16,710
and so let's take a look let me see

1235
01:21:08,619 --> 01:21:20,819
about putting this in here so right here

1236
01:21:16,710 --> 01:21:20,819
this is where we would want to do that

1237
01:21:24,000 --> 01:21:32,649
so we know we've got this like these

1238
01:21:30,369 --> 01:21:36,670
constants here and we would like them to

1239
01:21:32,649 --> 01:21:38,229
come through in the shader so what I'm

1240
01:21:36,670 --> 01:21:39,699
going to do is actually have them

1241
01:21:38,229 --> 01:21:47,109
literally just come through in the

1242
01:21:39,699 --> 01:21:49,359
shader as confines right so we got the X

1243
01:21:47,109 --> 01:21:51,279
Y and the Z here there's the x y&amp;z there

1244
01:21:49,359 --> 01:21:53,769
and now that way those will be available

1245
01:21:51,279 --> 01:21:56,529
in the shader and if we change them they

1246
01:21:53,770 --> 01:22:00,780
are properly changed all right so what

1247
01:21:56,529 --> 01:22:00,779
we would do here is say like that

1248
01:22:05,739 --> 01:22:08,859
something like that

1249
01:22:10,100 --> 01:22:24,170
and that way we can do in here we just

1250
01:22:12,560 --> 01:22:26,570
do clamp box and now we should have a

1251
01:22:24,170 --> 01:22:28,909
way to clamp our voxel - if we decide to

1252
01:22:26,569 --> 01:22:32,889
make it bigger or smaller or you know

1253
01:22:28,909 --> 01:22:37,300
whatever else whoa

1254
01:22:32,890 --> 01:22:37,300
or not what did i do there

1255
01:22:56,170 --> 01:23:00,909
sorry I meant to pass minus one there I

1256
01:23:01,029 --> 01:23:05,529
am not sure where that's coming from

1257
01:23:15,590 --> 01:23:32,270
so yeah that's where that's going from

1258
01:23:30,800 --> 01:23:41,579
it's an ugly

1259
01:23:32,270 --> 01:23:44,040
typo'd all right um so I think we're

1260
01:23:41,579 --> 01:23:46,050
pretty good now on that part of things

1261
01:23:44,039 --> 01:23:49,439
that all made sense as we went through

1262
01:23:46,050 --> 01:23:53,909
it but that's just the first step right

1263
01:23:49,439 --> 01:23:56,069
so now we have to start saying well okay

1264
01:23:53,908 --> 01:23:58,019
so we figured out how to keep ourselves

1265
01:23:56,069 --> 01:24:00,179
from sampling voxel values that weren't

1266
01:23:58,020 --> 01:24:01,710
there but now we have to make it so that

1267
01:24:00,179 --> 01:24:05,069
when we sample values that are there

1268
01:24:01,710 --> 01:24:06,270
they make sense okay so here's taking

1269
01:24:05,069 --> 01:24:11,460
the directional fall-off out of the

1270
01:24:06,270 --> 01:24:13,230
equation and setting the light value is

1271
01:24:11,460 --> 01:24:15,029
always equal to one but having the

1272
01:24:13,229 --> 01:24:16,408
contribution value be whatever the

1273
01:24:15,029 --> 01:24:18,689
contribution value was for the samples

1274
01:24:16,408 --> 01:24:20,579
so this is basically now we're trying to

1275
01:24:18,689 --> 01:24:24,869
get our sample interpolation to be

1276
01:24:20,579 --> 01:24:27,479
something sane right and so that's gonna

1277
01:24:24,869 --> 01:24:29,519
take a bit of work as well so what we

1278
01:24:27,479 --> 01:24:31,319
can see here is that once we turn on

1279
01:24:29,520 --> 01:24:33,810
that part of things we get a lot of

1280
01:24:31,319 --> 01:24:38,759
weird like scalloping like sort of

1281
01:24:33,810 --> 01:24:42,120
spherical weirdness happening right and

1282
01:24:38,760 --> 01:24:44,789
so now let's try to like hone in on that

1283
01:24:42,119 --> 01:24:52,139
and figure out like what what we're

1284
01:24:44,789 --> 01:24:54,929
getting here so fundamentally speaking

1285
01:24:52,139 --> 01:24:56,699
inside one of these voxels what we're

1286
01:24:54,929 --> 01:24:58,199
doing is we're throwing down a bunch of

1287
01:24:56,698 --> 01:24:59,669
light samples and there could be like a

1288
01:24:58,198 --> 01:25:01,738
dozen of these right there could be a

1289
01:24:59,670 --> 01:25:03,989
bunch of them which are basically points

1290
01:25:01,738 --> 01:25:10,468
in space which say we computed lighting

1291
01:25:03,988 --> 01:25:13,859
at this place so what we want to do is

1292
01:25:10,469 --> 01:25:17,369
we want to try and figure out what that

1293
01:25:13,859 --> 01:25:21,809
implies for the actual pixel that we're

1294
01:25:17,369 --> 01:25:23,639
trying to light right now right so it

1295
01:25:21,810 --> 01:25:26,489
seems like we would want the fall-off

1296
01:25:23,639 --> 01:25:28,050
and that sort of stuff to make sense

1297
01:25:26,488 --> 01:25:31,679
right what we want to do

1298
01:25:28,050 --> 01:25:35,220
is we want to have it so that as you go

1299
01:25:31,680 --> 01:25:36,570
towards any one of these points since we

1300
01:25:35,220 --> 01:25:39,119
know we computed the lighting at that

1301
01:25:36,569 --> 01:25:43,279
point when you get to that point the

1302
01:25:39,119 --> 01:25:46,769
light should be very strongly correlated

1303
01:25:43,279 --> 01:25:48,300
hmm with what we computed at that

1304
01:25:46,770 --> 01:25:49,980
location right because we don't really

1305
01:25:48,300 --> 01:25:52,470
have to do much reconstruction in that

1306
01:25:49,979 --> 01:25:55,439
in that case because what the incident

1307
01:25:52,470 --> 01:25:57,300
light is at that point we is known it's

1308
01:25:55,439 --> 01:26:00,000
not like in between sample points where

1309
01:25:57,300 --> 01:26:03,600
we're trying to reconstruct it so that

1310
01:26:00,000 --> 01:26:06,149
contribution value right is supposed to

1311
01:26:03,600 --> 01:26:10,340
be 1.0 when you're right on it which it

1312
01:26:06,149 --> 01:26:16,129
should be because the length of of these

1313
01:26:10,340 --> 01:26:16,130
the sample point in world space right

1314
01:26:16,579 --> 01:26:25,170
that length should be 0 at that location

1315
01:26:20,609 --> 01:26:30,929
and you know we want to sort of make it

1316
01:26:25,170 --> 01:26:35,430
so that that value ramps up quickly

1317
01:26:30,930 --> 01:26:39,480
potentially so it's pretty tight

1318
01:26:35,430 --> 01:26:43,130
fall-off so what we're doing here is

1319
01:26:39,479 --> 01:26:43,129
we're saying r8 would take that length

1320
01:26:43,640 --> 01:26:50,039
we want that length off to potentially

1321
01:26:46,199 --> 01:26:52,979
be very fast but we don't necessarily

1322
01:26:50,039 --> 01:26:54,840
ever want it what we'd like to do is

1323
01:26:52,979 --> 01:27:00,149
we'd like to make it so that it never

1324
01:26:54,840 --> 01:27:01,949
quite goes to 0 potentially because we

1325
01:27:00,149 --> 01:27:05,849
don't want to lose the sample ever

1326
01:27:01,949 --> 01:27:06,869
probably I would say uh so I'd say the

1327
01:27:05,850 --> 01:27:08,730
way that we're doing it right now is

1328
01:27:06,869 --> 01:27:11,789
maybe not the smartest thing in the

1329
01:27:08,729 --> 01:27:13,919
world I would say that the way that

1330
01:27:11,789 --> 01:27:16,170
we're doing it right now what we

1331
01:27:13,920 --> 01:27:19,420
probably want to do is

1332
01:27:16,170 --> 01:27:19,420
[Music]

1333
01:27:23,439 --> 01:27:30,399
we want it to sort of asymptotically

1334
01:27:25,850 --> 01:27:30,400
approach one right

1335
01:27:51,958 --> 01:27:56,639
so I'm not sure exactly what that should

1336
01:27:53,908 --> 01:28:01,558
be here but basically what I'm saying is

1337
01:27:56,639 --> 01:28:04,469
we want a value here right where this

1338
01:28:01,559 --> 01:28:06,090
will go rapidly towards one as it goes

1339
01:28:04,469 --> 01:28:08,038
away from the point but never quite get

1340
01:28:06,090 --> 01:28:10,498
there so that we always keep at least a

1341
01:28:08,038 --> 01:28:13,078
little bit of contribution from this

1342
01:28:10,498 --> 01:28:17,458
thing but as you get further away from

1343
01:28:13,078 --> 01:28:19,948
it you get much less contribution and

1344
01:28:17,458 --> 01:28:27,149
I'm trying to think of how I would do

1345
01:28:19,948 --> 01:28:32,669
that but I'm not quite sure this value

1346
01:28:27,149 --> 01:28:35,788
is sort of unbounded right because we

1347
01:28:32,670 --> 01:28:38,880
don't really know what its maximum could

1348
01:28:35,788 --> 01:28:44,938
be I suppose it can't be bigger than the

1349
01:28:38,880 --> 01:28:48,630
voxel but that's really all we know

1350
01:28:44,939 --> 01:28:53,400
about it and if we were to divide it

1351
01:28:48,630 --> 01:28:56,389
directly by that value you know yeah I'm

1352
01:28:53,399 --> 01:29:00,509
not really sure what we want to do here

1353
01:28:56,389 --> 01:29:02,609
this is a bit tricky but whatever the

1354
01:29:00,510 --> 01:29:05,989
inverse voxel dimension is right we know

1355
01:29:02,609 --> 01:29:05,988
what that is because we've got it

1356
01:29:06,889 --> 01:29:13,979
right we've got that box in cell dim so

1357
01:29:11,038 --> 01:29:18,478
if we wanted to we could use the box and

1358
01:29:13,979 --> 01:29:20,550
seldom here as a multiplier because

1359
01:29:18,479 --> 01:29:23,579
since it's already won over this the

1360
01:29:20,550 --> 01:29:25,248
dimension of the cell that would give us

1361
01:29:23,578 --> 01:29:26,819
something that we knew it couldn't

1362
01:29:25,248 --> 01:29:29,219
exceed one

1363
01:29:26,819 --> 01:29:30,929
it just doesn't necessarily ask him talk

1364
01:29:29,219 --> 01:29:34,050
to me I approach it quickly like I

1365
01:29:30,929 --> 01:29:37,380
wanted it to I think there's probably

1366
01:29:34,050 --> 01:29:44,248
smarter math we could do here but if I

1367
01:29:37,380 --> 01:29:46,400
went ahead and said okay let's take the

1368
01:29:44,248 --> 01:29:46,399
end

1369
01:29:47,329 --> 01:29:52,250
the Vox them sell dim so if I take this

1370
01:29:50,659 --> 01:29:54,199
distance and I multiply that it should

1371
01:29:52,250 --> 01:29:59,359
now normalize it so that the maximum

1372
01:29:54,199 --> 01:30:04,300
distance would be like 1 1 1 right so it

1373
01:29:59,359 --> 01:30:08,630
would be like a square root of 3 right

1374
01:30:04,300 --> 01:30:19,369
where is how do I do square root on this

1375
01:30:08,630 --> 01:30:23,600
crazy calculator is is that supposed to

1376
01:30:19,369 --> 01:30:30,739
be square root it looks more like a

1377
01:30:23,600 --> 01:30:35,720
checkmark apparently so

1378
01:30:30,739 --> 01:30:41,779
all right so I'm thinking maybe just

1379
01:30:35,720 --> 01:30:46,880
like you know I I want to multiply by

1380
01:30:41,779 --> 01:30:52,130
the inverse of that to keep you know to

1381
01:30:46,880 --> 01:30:54,289
keep the value same so I want something

1382
01:30:52,130 --> 01:30:57,050
like how do I invert this value this

1383
01:30:54,289 --> 01:31:00,579
calculator is is nuts

1384
01:30:57,050 --> 01:31:00,579
where's the IMP button

1385
01:31:05,800 --> 01:31:17,020
I don't even know what to say is there

1386
01:31:11,380 --> 01:31:18,489
no inverse button wait of course yeah

1387
01:31:17,020 --> 01:31:21,760
there must not be an inverse button

1388
01:31:18,489 --> 01:31:23,050
because here are the two these are the

1389
01:31:21,760 --> 01:31:30,520
inverse of each other and they're both

1390
01:31:23,050 --> 01:31:33,279
on here god anyway I don't even know how

1391
01:31:30,520 --> 01:31:41,440
to copy a value here because there's no

1392
01:31:33,279 --> 01:31:43,689
menu on this thing this is such a piece

1393
01:31:41,439 --> 01:31:53,979
of look at me right-clicking on this

1394
01:31:43,689 --> 01:31:57,819
it's not doing anything weird oh man how

1395
01:31:53,979 --> 01:31:59,949
do you mess up a calculator answer you

1396
01:31:57,819 --> 01:32:04,509
ask Microsoft to write it alright so

1397
01:31:59,949 --> 01:32:17,349
here's the here's the value I actually

1398
01:32:04,510 --> 01:32:18,550
wanted maybe a little bit too precise so

1399
01:32:17,350 --> 01:32:20,940
I'm basically just looking at something

1400
01:32:18,550 --> 01:32:25,270
that would would try to keep things

1401
01:32:20,939 --> 01:32:27,399
bounded to the length of a voxel in

1402
01:32:25,270 --> 01:32:28,720
terms of interpolation values I don't

1403
01:32:27,399 --> 01:32:34,029
know whether that's really sufficient

1404
01:32:28,720 --> 01:32:35,770
though and so you know yeah if you look

1405
01:32:34,029 --> 01:32:37,449
at what's going on here from what we're

1406
01:32:35,770 --> 01:32:39,850
getting we get these weird like radial

1407
01:32:37,449 --> 01:32:42,819
fall-off patterns and again I don't

1408
01:32:39,850 --> 01:32:44,910
really understand those so I'm I want to

1409
01:32:42,819 --> 01:32:47,349
investigate further because I there

1410
01:32:44,909 --> 01:32:49,149
remember we're not actually blending

1411
01:32:47,350 --> 01:32:51,840
different samples we're blending the

1412
01:32:49,149 --> 01:32:55,299
same sample because I'm overwriting the

1413
01:32:51,840 --> 01:32:56,710
values here the direction will fall off

1414
01:32:55,300 --> 01:32:59,380
in the light color which are the things

1415
01:32:56,710 --> 01:33:02,949
that we actually were computing I'm

1416
01:32:59,380 --> 01:33:05,199
throwing out right so the only thing

1417
01:33:02,949 --> 01:33:08,789
we're looking at here is the result of

1418
01:33:05,199 --> 01:33:14,409
the renormalization by the contribute

1419
01:33:08,789 --> 01:33:18,460
that's all now we know we always enter

1420
01:33:14,409 --> 01:33:19,659
this loop right because if we didn't

1421
01:33:18,460 --> 01:33:21,550
enter this loop we

1422
01:33:19,659 --> 01:33:23,710
would have seen it before right so if I

1423
01:33:21,550 --> 01:33:26,770
if I look remember we did this this is

1424
01:33:23,710 --> 01:33:38,710
what we were doing for if I note that we

1425
01:33:26,770 --> 01:33:41,980
never enter the loop I can stuff that

1426
01:33:38,710 --> 01:33:45,579
read value and the work we did before I

1427
01:33:41,979 --> 01:33:51,669
seem to be ensuring that that was never

1428
01:33:45,579 --> 01:34:00,600
happening right so that means we always

1429
01:33:51,670 --> 01:34:03,100
enter the loop right you can see no red

1430
01:34:00,600 --> 01:34:04,900
so given that we always enter the loop

1431
01:34:03,100 --> 01:34:08,800
what that means is we must be getting

1432
01:34:04,899 --> 01:34:12,069
contribute of zero right because of this

1433
01:34:08,800 --> 01:34:14,860
or something so I'm going to start by

1434
01:34:12,069 --> 01:34:16,539
seeing if that's true so does the

1435
01:34:14,859 --> 01:34:19,839
scalloped pattern come solely from this

1436
01:34:16,539 --> 01:34:22,779
equation I my guess is it must but let's

1437
01:34:19,840 --> 01:34:25,119
first validate that that's true maybe

1438
01:34:22,779 --> 01:34:29,889
we've got a different bug and we just

1439
01:34:25,119 --> 01:34:32,920
don't understand it okay so that looks

1440
01:34:29,890 --> 01:34:35,590
right everything is just the white color

1441
01:34:32,920 --> 01:34:37,539
which is what we would expect so it's

1442
01:34:35,590 --> 01:34:39,970
just this equation that's causing our

1443
01:34:37,539 --> 01:34:42,399
country values our alpha value to go to

1444
01:34:39,970 --> 01:34:45,159
zero occasionally and the question is

1445
01:34:42,399 --> 01:34:46,149
how is that happening if we're taking

1446
01:34:45,159 --> 01:34:51,239
the length of something that's supposed

1447
01:34:46,149 --> 01:34:51,239
to be renormalized we know that both ah

1448
01:34:51,390 --> 01:34:58,390
well okay I think I see what we're doing

1449
01:34:54,250 --> 01:35:01,149
here potentially since we are computing

1450
01:34:58,390 --> 01:35:04,920
the value outside we're competing these

1451
01:35:01,149 --> 01:35:04,920
values in neighboring voxels as well

1452
01:35:08,970 --> 01:35:16,360
that does mean that we could be more

1453
01:35:13,000 --> 01:35:19,539
than one voxel unit away from the thing

1454
01:35:16,359 --> 01:35:24,849
that we're using we could actually be

1455
01:35:19,539 --> 01:35:27,100
two voxel units away right so rather

1456
01:35:24,850 --> 01:35:31,770
than being one one one it would actually

1457
01:35:27,100 --> 01:35:31,770
be two to two right

1458
01:35:34,220 --> 01:36:00,060
so we'd actually be talking about this

1459
01:35:49,470 --> 01:36:01,740
value to eight eight six seven right

1460
01:36:00,060 --> 01:36:04,550
that would be the actual value that

1461
01:36:01,739 --> 01:36:15,779
would be required to ensure that we

1462
01:36:04,550 --> 01:36:17,699
never go to zero on the contribution so

1463
01:36:15,779 --> 01:36:22,469
it's better but we still have that

1464
01:36:17,699 --> 01:36:24,329
problem so we're just not computing this

1465
01:36:22,470 --> 01:36:29,880
quite right the other thing that I would

1466
01:36:24,329 --> 01:36:33,350
point out about this is like I said I

1467
01:36:29,880 --> 01:36:38,039
would rather have a better math

1468
01:36:33,350 --> 01:36:41,910
operation to be using here right I would

1469
01:36:38,039 --> 01:36:52,979
rather have something you know and maybe

1470
01:36:41,909 --> 01:36:54,689
I should just do like so you know right

1471
01:36:52,979 --> 01:37:00,509
so you know I'd rather have something

1472
01:36:54,689 --> 01:37:02,879
like this fundamentally speaking where

1473
01:37:00,510 --> 01:37:07,890
like you know the thing just goes up

1474
01:37:02,880 --> 01:37:11,130
forever and you know trends towards zero

1475
01:37:07,890 --> 01:37:13,590
but never actually hits it because I

1476
01:37:11,130 --> 01:37:17,029
don't I just want to make sure that

1477
01:37:13,590 --> 01:37:21,449
samples that are closer to you are more

1478
01:37:17,029 --> 01:37:22,829
reasonable and and you know so maybe we

1479
01:37:21,449 --> 01:37:24,779
just use a fall from that and not try to

1480
01:37:22,829 --> 01:37:27,359
get that that way we always are waiting

1481
01:37:24,779 --> 01:37:28,829
everything but we just wait things lower

1482
01:37:27,359 --> 01:37:29,969
as we go and maybe we need to tune that

1483
01:37:28,829 --> 01:37:32,729
fall function but that way we don't have

1484
01:37:29,970 --> 01:37:38,010
to try and like get that correct or

1485
01:37:32,729 --> 01:37:43,549
whatever all right so now if we assume

1486
01:37:38,010 --> 01:37:46,050
that the light color is is always

1487
01:37:43,550 --> 01:37:47,579
going to come from the right place now

1488
01:37:46,050 --> 01:37:49,380
we go back to like executing the

1489
01:37:47,579 --> 01:37:51,269
lighting equation now we're actually

1490
01:37:49,380 --> 01:37:54,300
blending samples together correctly

1491
01:37:51,270 --> 01:37:57,230
well correctly is a strong term in this

1492
01:37:54,300 --> 01:37:59,400
case we're actually blending colors

1493
01:37:57,229 --> 01:38:04,259
together in a way that doesn't produce

1494
01:37:59,399 --> 01:38:05,698
its own set of artifacts right and

1495
01:38:04,260 --> 01:38:07,860
already things are definitely looking

1496
01:38:05,698 --> 01:38:11,329
better I just think maybe we've still

1497
01:38:07,859 --> 01:38:13,439
got some weird issues here potentially

1498
01:38:11,329 --> 01:38:16,380
but you can sort of see that it's

1499
01:38:13,439 --> 01:38:18,928
starting to get rid of some of the

1500
01:38:16,380 --> 01:38:22,319
artifacts we were seeing even though we

1501
01:38:18,929 --> 01:38:26,158
still have quite a few to deal with

1502
01:38:22,319 --> 01:38:30,889
right all right so let's take a look at

1503
01:38:26,158 --> 01:38:30,888
what we let's see what we can see here

1504
01:38:39,198 --> 01:38:49,259
from the render group itself we do know

1505
01:38:44,698 --> 01:38:58,638
that we're stuffing a an incident light

1506
01:38:49,260 --> 01:39:01,340
value of one I read rightful red Channel

1507
01:38:58,639 --> 01:39:05,819
and we're stuffing that value directly

1508
01:39:01,340 --> 01:39:08,190
so if I go in here and look at what I

1509
01:39:05,819 --> 01:39:10,170
would expect to see if I was to take the

1510
01:39:08,189 --> 01:39:13,469
fall-off out of it so we'll leave the

1511
01:39:10,170 --> 01:39:15,869
fall-off part in here then what I would

1512
01:39:13,469 --> 01:39:21,539
expect to see is always blending red

1513
01:39:15,869 --> 01:39:25,800
light with red light right and that

1514
01:39:21,539 --> 01:39:27,869
should give me pure red everywhere so

1515
01:39:25,800 --> 01:39:30,600
once we take a look at the fall-off

1516
01:39:27,869 --> 01:39:32,219
aspect of it then what we're doing is

1517
01:39:30,600 --> 01:39:33,960
we're saying alright we want to take the

1518
01:39:32,219 --> 01:39:37,170
light direction whatever the light

1519
01:39:33,960 --> 01:39:41,698
direction is and we want that light

1520
01:39:37,170 --> 01:39:44,908
direction to now do a fall-off on versus

1521
01:39:41,698 --> 01:39:46,859
what our normal is and if I put that in

1522
01:39:44,908 --> 01:39:50,219
we get a bunch of things that look wrong

1523
01:39:46,859 --> 01:39:53,639
I think what we may be doing here is we

1524
01:39:50,219 --> 01:39:59,609
may be encoding our normals wrong or

1525
01:39:53,640 --> 01:40:02,160
or something but I don't like the look

1526
01:39:59,609 --> 01:40:04,259
of that at all so instead of using this

1527
01:40:02,159 --> 01:40:05,789
fall-off instead of doing this which I

1528
01:40:04,260 --> 01:40:09,119
don't think is particularly instructive

1529
01:40:05,789 --> 01:40:10,350
and it's not gonna really help us do a

1530
01:40:09,119 --> 01:40:12,510
great job you're freaking out it's going

1531
01:40:10,350 --> 01:40:15,930
on I'm gonna get rid of the fall-off and

1532
01:40:12,510 --> 01:40:20,730
so do I'm gonna do is I'm gonna stuff

1533
01:40:15,930 --> 01:40:22,260
the light color that we're gonna use in

1534
01:40:20,729 --> 01:40:25,409
this equation I'm going to stuff that

1535
01:40:22,260 --> 01:40:27,210
color with the light direction so I can

1536
01:40:25,409 --> 01:40:33,289
just render what it thinks the light

1537
01:40:27,210 --> 01:40:33,289
direction is at any given point directly

1538
01:40:33,859 --> 01:40:41,449
or not what do you do what's it

1539
01:40:38,670 --> 01:40:41,449
complaining about there

1540
01:40:47,520 --> 01:40:58,050
oh that's what it's complaining about

1541
01:40:53,569 --> 01:41:04,759
can't set a v4 from a v3 everyone knows

1542
01:40:58,050 --> 01:41:14,070
that I so now if we take a look at at

1543
01:41:04,760 --> 01:41:20,369
what we're getting here I I would say

1544
01:41:14,069 --> 01:41:23,479
that that's pretty like doesn't make a

1545
01:41:20,369 --> 01:41:23,479
whole lot of sense to me

1546
01:41:34,840 --> 01:41:40,579
now the problem is we're averaging these

1547
01:41:38,029 --> 01:41:42,979
things together there's multiple normals

1548
01:41:40,579 --> 01:41:46,100
in the voxels so actually I guess the

1549
01:41:42,979 --> 01:41:49,819
one problem we've got here is that we're

1550
01:41:46,100 --> 01:41:57,410
we have no real way of visualizing what

1551
01:41:49,819 --> 01:41:58,880
all the normals are in there so we don't

1552
01:41:57,409 --> 01:42:00,559
really know if that's at all wrong

1553
01:41:58,880 --> 01:42:07,100
because you know you have to remember

1554
01:42:00,560 --> 01:42:09,289
this is a voxel and so for example the

1555
01:42:07,100 --> 01:42:12,410
you know right in here there's this

1556
01:42:09,289 --> 01:42:14,479
plate for the hero and all of those

1557
01:42:12,409 --> 01:42:16,069
normals are gonna add it in like so like

1558
01:42:14,479 --> 01:42:18,649
they will affect the normals here and so

1559
01:42:16,069 --> 01:42:21,519
on right but each of those samples is

1560
01:42:18,649 --> 01:42:21,519
stored separately

1561
01:42:21,579 --> 01:42:28,220
so I don't really know what I want to do

1562
01:42:26,689 --> 01:42:32,479
is see whether these normals are

1563
01:42:28,220 --> 01:42:34,730
reasonable but I don't really have a

1564
01:42:32,479 --> 01:42:36,769
good way of drawing that since I have to

1565
01:42:34,729 --> 01:42:42,279
just draw in this the way we're sampling

1566
01:42:36,770 --> 01:42:42,280
the shader I have to just draw one value

1567
01:42:44,109 --> 01:42:49,059
and so I don't really have

1568
01:42:53,179 --> 01:43:00,359
hmm I don't really have much I can do to

1569
01:42:56,550 --> 01:43:04,159
debug that value directly in the shader

1570
01:43:00,359 --> 01:43:07,139
right because what I would expect to see

1571
01:43:04,158 --> 01:43:10,019
but which I can't necessarily figure out

1572
01:43:07,140 --> 01:43:11,730
a way to directly visualize is like all

1573
01:43:10,020 --> 01:43:15,510
the normals should be the same across

1574
01:43:11,729 --> 01:43:18,419
all these phases right so what that

1575
01:43:15,510 --> 01:43:23,219
means is that if I were to pick the part

1576
01:43:18,420 --> 01:43:24,569
of the normal in that voxel the lighting

1577
01:43:23,219 --> 01:43:26,100
samples that were coming from these

1578
01:43:24,569 --> 01:43:28,529
phases should all have the same normal

1579
01:43:26,100 --> 01:43:30,210
but I don't know which one of those I'm

1580
01:43:28,529 --> 01:43:39,929
looking at when I look at the various

1581
01:43:30,210 --> 01:43:41,819
links in the voxel list right so that

1582
01:43:39,929 --> 01:43:43,289
part's a little bit nuts and there's I'm

1583
01:43:41,819 --> 01:43:45,179
not sure what I can really do to

1584
01:43:43,289 --> 01:43:47,310
mitigate that like what I want to do is

1585
01:43:45,179 --> 01:43:51,329
basically draw a bunch of little arrows

1586
01:43:47,310 --> 01:43:52,890
in here that show me where all the we're

1587
01:43:51,329 --> 01:43:55,979
all the point samples sorry the problem

1588
01:43:52,890 --> 01:43:59,719
is if even though I can go ahead and do

1589
01:43:55,979 --> 01:44:02,279
that and that is more or less what we do

1590
01:43:59,719 --> 01:44:04,890
when we are doing those lighting

1591
01:44:02,279 --> 01:44:06,988
elements what I don't have is a way to

1592
01:44:04,890 --> 01:44:10,380
do that from what the shader thinks they

1593
01:44:06,988 --> 01:44:12,479
are right because you know I can go to

1594
01:44:10,380 --> 01:44:14,069
bug this from the other side and add

1595
01:44:12,479 --> 01:44:15,750
some drawing in there that would allow

1596
01:44:14,069 --> 01:44:18,000
me to see where those light samples are

1597
01:44:15,750 --> 01:44:20,908
and what their normals are unfortunately

1598
01:44:18,000 --> 01:44:23,100
that doesn't help me with the other part

1599
01:44:20,908 --> 01:44:24,599
of the other side of it which is are

1600
01:44:23,100 --> 01:44:28,530
they getting read correctly in the

1601
01:44:24,600 --> 01:44:32,760
shader right so one of them is easier to

1602
01:44:28,529 --> 01:44:34,710
debug one of them is harder I suppose we

1603
01:44:32,760 --> 01:44:37,320
could start by just doing the easier one

1604
01:44:34,710 --> 01:44:39,929
to debug because if we find bugs there

1605
01:44:37,319 --> 01:44:41,729
then hey that was free right that was

1606
01:44:39,929 --> 01:44:44,279
let me not free but it was a lot cheaper

1607
01:44:41,729 --> 01:44:45,509
than what we'd have to chart figuring

1608
01:44:44,279 --> 01:44:50,309
out in order to debug it on the other

1609
01:44:45,510 --> 01:44:52,829
side so I guess that's probably the way

1610
01:44:50,310 --> 01:44:55,320
we should do it's there I can't think of

1611
01:44:52,829 --> 01:45:03,380
a like great way to do it either way but

1612
01:44:55,319 --> 01:45:03,380
you know what are you gonna do so I

1613
01:45:04,869 --> 01:45:10,729
let's take a look at what's going on

1614
01:45:06,890 --> 01:45:14,329
here so when we do extract reflectors

1615
01:45:10,729 --> 01:45:17,179
from quads and we are gonna record these

1616
01:45:14,329 --> 01:45:20,960
thermals we're recording the normal from

1617
01:45:17,180 --> 01:45:25,490
one vertex in that you know whatever

1618
01:45:20,960 --> 01:45:27,649
that thing was right and I guess I mean

1619
01:45:25,489 --> 01:45:29,719
I don't know for sure but I guess we've

1620
01:45:27,649 --> 01:45:32,659
never really verified that those are

1621
01:45:29,720 --> 01:45:35,750
100% correct values so even our input is

1622
01:45:32,659 --> 01:45:39,409
potentially suspect however when we were

1623
01:45:35,750 --> 01:45:41,739
just doing basic lighting you know it

1624
01:45:39,409 --> 01:45:45,349
looked like our normals were pretty good

1625
01:45:41,739 --> 01:45:47,689
so I'm not super suspect of this value

1626
01:45:45,350 --> 01:45:51,320
here but honestly if we're gonna go the

1627
01:45:47,689 --> 01:45:53,719
the whole way and debug it entirely we

1628
01:45:51,319 --> 01:45:58,460
don't really even know that our element

1629
01:45:53,720 --> 01:46:01,400
normals are correct right so we might

1630
01:45:58,460 --> 01:46:04,100
want to we might want to verify even

1631
01:46:01,399 --> 01:46:08,329
that but if we then go and look at where

1632
01:46:04,100 --> 01:46:11,020
this the average light directions stuff

1633
01:46:08,329 --> 01:46:13,909
is coming from which is what this

1634
01:46:11,020 --> 01:46:16,280
directional fall-off light D RGB thing

1635
01:46:13,909 --> 01:46:18,710
is is coming from if we look at where

1636
01:46:16,279 --> 01:46:20,529
that's coming from right now we're just

1637
01:46:18,710 --> 01:46:23,840
passing through those element normals

1638
01:46:20,529 --> 01:46:26,179
and so we should never like those never

1639
01:46:23,840 --> 01:46:33,980
get modified like anywhere else right

1640
01:46:26,180 --> 01:46:37,490
they get set here and there's never a

1641
01:46:33,979 --> 01:46:39,439
place where they get changed right so

1642
01:46:37,489 --> 01:46:42,050
we're literally taking just those

1643
01:46:39,439 --> 01:46:44,839
normals which we assumed to be correct

1644
01:46:42,050 --> 01:46:46,400
but again we don't necessarily now and

1645
01:46:44,840 --> 01:46:48,409
then what we're doing is we're just

1646
01:46:46,399 --> 01:46:51,439
stuffing that directly into the average

1647
01:46:48,409 --> 01:46:54,880
direction to light when we go to encode

1648
01:46:51,439 --> 01:47:02,949
the average directional light which is

1649
01:46:54,880 --> 01:47:02,949
not there yeah

1650
01:47:04,369 --> 01:47:09,448
mmm-hmm we're gonna include that value

1651
01:47:07,140 --> 01:47:10,590
we're just encoding it directly we Pat

1652
01:47:09,448 --> 01:47:20,009
it with a zero because it's getting

1653
01:47:10,590 --> 01:47:22,170
stuffed in a color bitmap and we pack it

1654
01:47:20,010 --> 01:47:23,460
in here we're literally just taking

1655
01:47:22,170 --> 01:47:26,789
whatever is the packing index and we're

1656
01:47:23,460 --> 01:47:41,880
sticking in that D value right look

1657
01:47:26,789 --> 01:47:44,429
that's it so yeah I mean at least in

1658
01:47:41,880 --> 01:47:49,140
theory I don't see a lot of ways that

1659
01:47:44,429 --> 01:47:51,679
that could really be going wrong it's

1660
01:47:49,140 --> 01:47:51,679
hard to say

1661
01:48:06,429 --> 01:48:11,748
it just looks really straightforward and

1662
01:48:09,519 --> 01:48:13,639
when we were looking at this incident

1663
01:48:11,748 --> 01:48:15,168
like Direction values you know I stepped

1664
01:48:13,639 --> 01:48:18,498
through here and I did take a look at

1665
01:48:15,168 --> 01:48:24,349
what we were packing him sending out

1666
01:48:18,498 --> 01:48:34,938
there and it did seem like the average

1667
01:48:24,349 --> 01:48:39,609
Direction delight was generally sane so

1668
01:48:34,939 --> 01:48:39,609
yeah I don't know what's going on there

1669
01:48:43,510 --> 01:48:49,458
so I guess one thing we could do is say

1670
01:48:45,979 --> 01:48:51,859
well alright I you know I guess we also

1671
01:48:49,458 --> 01:48:59,979
don't know let's draw the world normal

1672
01:48:51,859 --> 01:48:59,979
as well that should be 100% consistent

1673
01:49:02,618 --> 01:49:06,219
just as a start

1674
01:49:08,050 --> 01:49:21,800
so that looks very good to me right that

1675
01:49:13,849 --> 01:49:26,748
that looks like quite good I am very

1676
01:49:21,800 --> 01:49:28,399
very okay with that so yeah it seems

1677
01:49:26,748 --> 01:49:30,498
like this world numbers are reasonable

1678
01:49:28,399 --> 01:49:35,030
it seemed like the light directions are

1679
01:49:30,498 --> 01:49:39,918
reasonable as well so I'm just not sure

1680
01:49:35,029 --> 01:49:47,840
I understand why something would be

1681
01:49:39,918 --> 01:49:50,918
going wrong in there but it kind of

1682
01:49:47,840 --> 01:49:50,918
looks like something is

1683
01:49:56,380 --> 01:50:01,849
but I get even even that I mean I guess

1684
01:49:59,569 --> 01:50:03,859
I don't really know that that's true if

1685
01:50:01,849 --> 01:50:07,429
we go back and look at what we're seeing

1686
01:50:03,859 --> 01:50:11,779
here we know that we're stuffing pure

1687
01:50:07,429 --> 01:50:15,199
red into the light source when we are

1688
01:50:11,779 --> 01:50:16,908
looking at things with unambiguous

1689
01:50:15,198 --> 01:50:18,859
normals like you're in here it actually

1690
01:50:16,908 --> 01:50:25,688
looks like it's giving pretty reasonable

1691
01:50:18,859 --> 01:50:33,498
results right to a certain extent anyway

1692
01:50:25,689 --> 01:50:35,869
I would say so you know it's mostly

1693
01:50:33,498 --> 01:50:47,029
things kind of like up in here that are

1694
01:50:35,868 --> 01:50:49,549
not making a lot of sense to me like

1695
01:50:47,029 --> 01:50:51,559
here and here and I you know I guess I

1696
01:50:49,550 --> 01:50:54,769
could convince myself that that was sort

1697
01:50:51,559 --> 01:51:01,360
of being done correctly in that these

1698
01:50:54,769 --> 01:51:04,579
were places where the fact that there is

1699
01:51:01,359 --> 01:51:07,679
you know additional light normals is

1700
01:51:04,578 --> 01:51:10,969
getting weighted in more heavily at

1701
01:51:07,680 --> 01:51:10,969
[Music]

1702
01:51:15,319 --> 01:51:35,130
hey I'm just not sure I mean effectively

1703
01:51:33,930 --> 01:51:46,770
the problem that I'm having with it

1704
01:51:35,130 --> 01:51:50,970
right is I just don't really know when

1705
01:51:46,770 --> 01:51:55,470
we're sort of getting that fall-off

1706
01:51:50,970 --> 01:51:58,949
value in there I just don't really know

1707
01:51:55,470 --> 01:52:02,550
what to expect from it on the one hand

1708
01:51:58,949 --> 01:52:04,470
you know where we've got sort of the

1709
01:52:02,550 --> 01:52:06,090
world normals which I think we know are

1710
01:52:04,470 --> 01:52:08,220
correct and then we've got the incoming

1711
01:52:06,090 --> 01:52:09,300
light direction dotting those two

1712
01:52:08,220 --> 01:52:10,470
together should be pretty

1713
01:52:09,300 --> 01:52:12,659
straightforward and give us the fault

1714
01:52:10,470 --> 01:52:14,520
that we want on the other hand you have

1715
01:52:12,659 --> 01:52:17,880
to recall that we're summing up a bunch

1716
01:52:14,520 --> 01:52:19,470
of samples here and in the case right

1717
01:52:17,880 --> 01:52:24,319
now where we're stuffing the light

1718
01:52:19,470 --> 01:52:27,270
direction to be coming from a very from

1719
01:52:24,319 --> 01:52:29,579
directly away from whatever the surface

1720
01:52:27,270 --> 01:52:34,740
is right because we're stuffing in a

1721
01:52:29,579 --> 01:52:39,449
false value there right I just don't

1722
01:52:34,739 --> 01:52:41,219
know what to expect from it I don't feel

1723
01:52:39,449 --> 01:52:42,599
like I have a good wave because we're

1724
01:52:41,220 --> 01:52:43,770
summing a bunch of them together I don't

1725
01:52:42,600 --> 01:52:45,570
feel like I have a good way to really

1726
01:52:43,770 --> 01:52:49,820
like push structure to are through there

1727
01:52:45,569 --> 01:52:49,819
and get something that I expect out

1728
01:52:54,248 --> 01:53:06,109
um yeah I'm just not sure I'm interested

1729
01:53:04,429 --> 01:53:10,090
to see what we look like currently if we

1730
01:53:06,109 --> 01:53:10,089
do our standard lighting path

1731
01:53:40,689 --> 01:53:54,099
so this includes our ambient light at

1732
01:53:46,880 --> 01:53:57,500
the moment right I'm gonna go ahead and

1733
01:53:54,100 --> 01:54:04,219
take off that ambient light because now

1734
01:53:57,500 --> 01:54:06,409
it seems to actually be working so now

1735
01:54:04,219 --> 01:54:14,420
we'll just have that one this light

1736
01:54:06,409 --> 01:54:20,289
source right here and I'm just

1737
01:54:14,420 --> 01:54:20,289
interested to see what we end up with so

1738
01:54:29,500 --> 01:54:31,560
you

1739
01:54:32,079 --> 01:54:43,029
I guess I would say you know it's

1740
01:54:35,680 --> 01:54:49,060
getting closer to same but I still think

1741
01:54:43,029 --> 01:54:50,439
we've got some bugs separate from the

1742
01:54:49,060 --> 01:54:52,300
lighting transport which we haven't

1743
01:54:50,439 --> 01:54:55,000
started debugging it I still think we've

1744
01:54:52,300 --> 01:54:59,170
got some nastiness going on in there let

1745
01:54:55,000 --> 01:55:05,909
me see what happens here if we add back

1746
01:54:59,170 --> 01:55:05,909
in the surface reflectance as well so

1747
01:55:22,479 --> 01:55:28,689
you know it's getting a lot better right

1748
01:55:29,229 --> 01:55:35,959
fixing the voxel interpolation bugs

1749
01:55:31,909 --> 01:55:41,599
definitely made a big improvement to the

1750
01:55:35,960 --> 01:55:43,189
quality right and so I think we're kind

1751
01:55:41,600 --> 01:55:50,360
of we're still behind the eight ball a

1752
01:55:43,189 --> 01:55:52,399
little bit here but we're getting a lot

1753
01:55:50,359 --> 01:55:55,519
better I mean that's starting to look

1754
01:55:52,399 --> 01:55:57,979
pretty good and we've just got some like

1755
01:55:55,520 --> 01:55:59,930
you know why are we getting no light in

1756
01:55:57,979 --> 01:56:06,529
these sort of under clipped areas

1757
01:55:59,930 --> 01:56:12,440
probably because those reflectors never

1758
01:56:06,529 --> 01:56:15,349
got any contribution there because like

1759
01:56:12,439 --> 01:56:17,210
their their distribution point was like

1760
01:56:15,350 --> 01:56:19,190
underground or most of the distribution

1761
01:56:17,210 --> 01:56:23,779
or underground or something like this I

1762
01:56:19,189 --> 01:56:28,969
don't know exactly but but you know like

1763
01:56:23,779 --> 01:56:30,829
that's that's starting to be lighting

1764
01:56:28,970 --> 01:56:34,070
that you could actually imagine using

1765
01:56:30,829 --> 01:56:36,350
right it's not there yet but like you

1766
01:56:34,069 --> 01:56:42,439
can see as I move around I'm getting

1767
01:56:36,350 --> 01:56:44,390
some pretty good like I'm getting some

1768
01:56:42,439 --> 01:56:46,129
pretty good results from that right and

1769
01:56:44,390 --> 01:56:48,650
this is something I think we could run

1770
01:56:46,130 --> 01:56:54,440
on the GPU pretty easily and that's just

1771
01:56:48,649 --> 01:56:57,079
pretty cool right I'm getting a little

1772
01:56:54,439 --> 01:56:59,899
excited about that like this might

1773
01:56:57,079 --> 01:57:01,640
actually turn out pretty pretty neat you

1774
01:56:59,899 --> 01:57:06,079
know I know when I started it whether we

1775
01:57:01,640 --> 01:57:07,520
would get somewhere usable or not but

1776
01:57:06,079 --> 01:57:09,019
that seems like you know if I come back

1777
01:57:07,520 --> 01:57:13,040
here and I look at what we're looking at

1778
01:57:09,020 --> 01:57:17,210
right and I just like try some lighting

1779
01:57:13,039 --> 01:57:21,380
mean that's that's great that's really

1780
01:57:17,210 --> 01:57:23,810
usable in terms of you know light and

1781
01:57:21,380 --> 01:57:24,859
that's not special case to one light so

1782
01:57:23,810 --> 01:57:26,480
this is something that could have as

1783
01:57:24,859 --> 01:57:30,729
many lights in it as we want it doesn't

1784
01:57:26,479 --> 01:57:30,729
cost more to have more lights really

1785
01:57:31,300 --> 01:57:35,360
so I think that's pretty good and you

1786
01:57:33,770 --> 01:57:38,540
can see that we've still definitely got

1787
01:57:35,359 --> 01:57:44,658
some bugs like that shouldn't have been

1788
01:57:38,539 --> 01:57:47,210
able to see the light source so I think

1789
01:57:44,658 --> 01:57:50,809
if we go and just just push a little bit

1790
01:57:47,210 --> 01:57:53,810
harder on the debugging eye and get a

1791
01:57:50,810 --> 01:57:55,489
few more steps down I think we might

1792
01:57:53,810 --> 01:58:00,139
actually have a nice real time letting

1793
01:57:55,488 --> 01:58:01,459
solution here right that we can have so

1794
01:58:00,139 --> 01:58:03,859
we can have kind of nice lights in

1795
01:58:01,460 --> 01:58:06,020
handmade Hiro which I want cuz they're

1796
01:58:03,859 --> 01:58:12,439
nice and they help the mood a lot right

1797
01:58:06,020 --> 01:58:14,900
like having just a big ol flat game with

1798
01:58:12,439 --> 01:58:17,919
without anything in the game really

1799
01:58:14,899 --> 01:58:21,229
responding to the lighting at all I

1800
01:58:17,920 --> 01:58:25,460
definitely makes it harder to establish

1801
01:58:21,229 --> 01:58:27,259
that kind of nice mood and sense so I

1802
01:58:25,460 --> 01:58:28,639
like I like where this is going right

1803
01:58:27,260 --> 01:58:33,800
that's starting to look pretty cool to

1804
01:58:28,639 --> 01:58:39,529
me that's a good thing so yeah I think

1805
01:58:33,800 --> 01:58:41,420
the next thing we got to do is is take a

1806
01:58:39,529 --> 01:58:44,840
look at why we're getting like no

1807
01:58:41,420 --> 01:58:48,469
samples or weird sample stuff in some of

1808
01:58:44,840 --> 01:58:50,060
these areas right where it doesn't

1809
01:58:48,469 --> 01:58:54,050
really make a whole lot of sense as to

1810
01:58:50,060 --> 01:58:55,099
why they would be so under sampled and I

1811
01:58:54,050 --> 01:58:56,810
and I don't know if that's because like

1812
01:58:55,099 --> 01:58:58,219
all the samples are underground or what

1813
01:58:56,810 --> 01:58:59,960
exactly it's happening like I said

1814
01:58:58,219 --> 01:59:05,960
before I'm not not sure what's going on

1815
01:58:59,960 --> 01:59:08,210
there uh but we got to fix that and then

1816
01:59:05,960 --> 01:59:09,980
the other thing I think we lot of fixes

1817
01:59:08,210 --> 01:59:11,960
I think are light transport is still

1818
01:59:09,979 --> 01:59:13,908
kind of busted I think our ray caster

1819
01:59:11,960 --> 01:59:15,770
might be slightly busted or maybe we're

1820
01:59:13,908 --> 01:59:18,828
like just allowing things that shouldn't

1821
01:59:15,770 --> 01:59:20,719
be allowed somewhere in there and then I

1822
01:59:18,828 --> 01:59:22,789
think we could be at a point where we'll

1823
01:59:20,719 --> 01:59:26,658
transfer it over the GPU side of things

1824
01:59:22,789 --> 01:59:28,310
and try to figure out a way to run it on

1825
01:59:26,658 --> 01:59:31,359
the GPU for a few iterations so that

1826
01:59:28,310 --> 01:59:31,360
it'll be reasonably quick

1827
01:59:43,140 --> 01:59:46,140
yeah

1828
01:59:49,140 --> 01:59:58,280
so if we assumed that let's go back to

1829
01:59:52,109 --> 01:59:58,279
our sort of ambient light here

1830
02:00:13,220 --> 02:00:17,510
so if we assume like an incoming ambient

1831
02:00:15,350 --> 02:00:23,090
light there you can see that really

1832
02:00:17,510 --> 02:00:25,090
brightens up the scene quite a bit but

1833
02:00:23,090 --> 02:00:28,159
we lose a lot of that sort of

1834
02:00:25,090 --> 02:00:29,180
directional niceness for this light so

1835
02:00:28,159 --> 02:00:31,340
it seems like that's almost a little bit

1836
02:00:29,180 --> 02:00:42,800
too that's it's like weird that that's

1837
02:00:31,340 --> 02:00:45,520
producing that much ambient light for

1838
02:00:42,800 --> 02:00:45,520
the final gather

1839
02:00:54,930 --> 02:01:01,320
well I guess what's interesting about

1840
02:00:56,909 --> 02:01:03,559
that is we aren't using a divisor here

1841
02:01:01,319 --> 02:01:03,559
though

1842
02:01:06,949 --> 02:01:17,429
which explains it because yeah I mean

1843
02:01:15,600 --> 02:01:19,470
this should be this should be able to be

1844
02:01:17,430 --> 02:01:23,280
set to something like this so really

1845
02:01:19,470 --> 02:01:24,900
this should have a divisor there the

1846
02:01:23,279 --> 02:01:27,389
number of raised we sample when we do

1847
02:01:24,899 --> 02:01:44,129
our final lighting should divide the

1848
02:01:27,390 --> 02:01:46,470
accumulator right right so for every Ray

1849
02:01:44,130 --> 02:01:49,800
we sample we should be multiplying

1850
02:01:46,470 --> 02:01:51,750
whatever the the incident accumulator is

1851
02:01:49,800 --> 02:01:54,750
that that's I don't know why we weren't

1852
02:01:51,750 --> 02:02:00,090
doing that must have had a reason I'm

1853
02:01:54,750 --> 02:02:03,420
just not sure what that reason was so

1854
02:02:00,090 --> 02:02:05,819
that's more like it right now we can see

1855
02:02:03,420 --> 02:02:08,970
that there is an ambient gray light like

1856
02:02:05,819 --> 02:02:13,309
a skylight coming in that's the sort of

1857
02:02:08,970 --> 02:02:17,940
omnidirectional and then we've also got

1858
02:02:13,310 --> 02:02:20,730
our sort of point light here that we're

1859
02:02:17,939 --> 02:02:23,250
moving around so you know you get more

1860
02:02:20,729 --> 02:02:27,089
light in this area and less light sort

1861
02:02:23,250 --> 02:02:29,310
of in the other areas I don't really

1862
02:02:27,090 --> 02:02:32,880
remember where we set the strength of

1863
02:02:29,310 --> 02:02:34,470
that light source but again right you

1864
02:02:32,880 --> 02:02:36,329
can just see how this is really starting

1865
02:02:34,470 --> 02:02:40,170
to come together right I mean that's

1866
02:02:36,329 --> 02:02:41,939
that's looking much nicer now and I

1867
02:02:40,170 --> 02:02:43,380
think we've still got some nasty bugs in

1868
02:02:41,939 --> 02:02:46,589
there I think it'll get a lot better

1869
02:02:43,380 --> 02:02:48,329
once we get those out of there but just

1870
02:02:46,590 --> 02:02:49,860
looking at this I think if even if we

1871
02:02:48,329 --> 02:02:50,399
move just this to the GPU it would look

1872
02:02:49,859 --> 02:02:53,059
pretty cool

1873
02:02:50,399 --> 02:02:59,219
you just have some nasty artifacts right

1874
02:02:53,060 --> 02:03:00,450
like this kind of crap is no good so

1875
02:02:59,220 --> 02:03:02,869
we're getting there I think we're

1876
02:03:00,449 --> 02:03:02,869
getting there

1877
02:03:08,470 --> 02:03:22,940
yeah let's go ahead and do some Q&amp;A here

1878
02:03:17,569 --> 02:03:25,299
I can't seem to use the mouse for some

1879
02:03:22,939 --> 02:03:25,299
reason

1880
02:03:46,470 --> 02:03:49,890
recruiting win cat the size the window

1881
02:03:48,810 --> 02:03:51,090
determines how many buttons are shown

1882
02:03:49,890 --> 02:03:53,280
you can either stretch the window

1883
02:03:51,090 --> 02:03:55,590
vertically or you can press the up arrow

1884
02:03:53,279 --> 02:04:01,920
button to make this shown buttons shift

1885
02:03:55,590 --> 02:04:07,170
into the other set seriously why doesn't

1886
02:04:01,920 --> 02:04:09,590
it set the size by default to how big it

1887
02:04:07,170 --> 02:04:09,590
should be

1888
02:04:15,859 --> 02:04:18,939
oh my god

1889
02:04:24,119 --> 02:04:28,469
[Music]

1890
02:04:25,289 --> 02:04:28,469
all right

1891
02:04:44,770 --> 02:04:49,969
the car - said I think the error and the

1892
02:04:47,599 --> 02:04:53,199
colors are this in the same positions

1893
02:04:49,969 --> 02:04:56,689
where the normal calculations look funny

1894
02:04:53,198 --> 02:04:58,669
yeah I agree I mean like I said I'm

1895
02:04:56,689 --> 02:05:03,759
really just not quite sure what's

1896
02:04:58,670 --> 02:05:08,809
happening there but I think we've got

1897
02:05:03,760 --> 02:05:13,010
some I think we've got some like little

1898
02:05:08,809 --> 02:05:15,050
insidious bugs in in some you know much

1899
02:05:13,010 --> 02:05:18,039
like the voxel interpolation stuff you

1900
02:05:15,050 --> 02:05:21,440
kinda just have to go in in like

1901
02:05:18,038 --> 02:05:23,658
validate each individual section because

1902
02:05:21,439 --> 02:05:27,408
I think we've got some obvious bugs in I

1903
02:05:23,658 --> 02:05:38,138
think the Ray caster probably also has

1904
02:05:27,408 --> 02:05:38,138
some bugs in there so yeah

1905
02:05:43,210 --> 02:05:47,649
right it said not sure if you heard but

1906
02:05:45,430 --> 02:05:50,710
someone rewrote depends that exe for

1907
02:05:47,649 --> 02:05:56,199
Windows 10 no I did not know that but

1908
02:05:50,710 --> 02:06:13,109
that's pretty great let me see what's

1909
02:05:56,199 --> 02:06:13,109
going on with that that's pretty cool

1910
02:06:25,789 --> 02:06:29,840
well I'm a fan of that we don't really

1911
02:06:28,159 --> 02:06:33,639
use that much on handmade hero right now

1912
02:06:29,840 --> 02:06:33,640
but that's very good to know

1913
02:06:38,829 --> 02:06:44,350
do they have an easy download here

1914
02:06:54,340 --> 02:07:02,569
yeah that's that's pretty cool we might

1915
02:06:59,449 --> 02:07:04,609
have to take a look at that at some

1916
02:07:02,569 --> 02:07:08,029
point if we ever have a reason to do so

1917
02:07:04,609 --> 02:07:10,369
that's cool because yeah the I like the

1918
02:07:08,029 --> 02:07:13,899
old dependency Walker program it's cool

1919
02:07:10,369 --> 02:07:20,630
but it definitely it was definitely like

1920
02:07:13,899 --> 02:07:26,589
not maintained really you know so it's

1921
02:07:20,630 --> 02:07:26,590
cool that someone is taking that on

1922
02:08:00,128 --> 02:08:10,139
alright looks like new cues so I will go

1923
02:08:05,229 --> 02:08:10,139
ahead and shut things down

1924
02:08:22,020 --> 02:08:27,580
to green x6 so you used Emacs without

1925
02:08:26,170 --> 02:08:31,630
code completion F for critter how do you

1926
02:08:27,579 --> 02:08:33,789
work without code completion code

1927
02:08:31,630 --> 02:08:37,890
completion so I assume you mean like

1928
02:08:33,789 --> 02:08:37,890
like structure members or whatever

1929
02:08:40,380 --> 02:08:47,380
because I do use word completion right

1930
02:08:43,539 --> 02:08:48,970
so I often do like you know that sort of

1931
02:08:47,380 --> 02:08:53,859
thing

1932
02:08:48,970 --> 02:08:56,560
I don't so code completion is a tough

1933
02:08:53,859 --> 02:08:59,469
one for me because I don't really want

1934
02:08:56,560 --> 02:09:02,440
code completion most of the time when

1935
02:08:59,470 --> 02:09:07,690
I've you had to use like Visual Studio

1936
02:09:02,439 --> 02:09:10,419
and stuff when it had it on it drives me

1937
02:09:07,689 --> 02:09:12,579
nuts but I think mostly that's because

1938
02:09:10,420 --> 02:09:15,460
of the way it was implemented so I think

1939
02:09:12,579 --> 02:09:18,039
code completion would be useful if it

1940
02:09:15,460 --> 02:09:19,630
was done probably differently like like

1941
02:09:18,039 --> 02:09:23,140
I probably never really want code

1942
02:09:19,630 --> 02:09:24,970
completion I probably just want a

1943
02:09:23,140 --> 02:09:27,280
heads-up display that shows me the

1944
02:09:24,970 --> 02:09:30,909
structs and the functions that I happen

1945
02:09:27,279 --> 02:09:33,250
to be around at that time because what I

1946
02:09:30,909 --> 02:09:37,029
usually do right is I do that manually

1947
02:09:33,250 --> 02:09:39,329
by going like you know finding the thing

1948
02:09:37,029 --> 02:09:43,420
that I'm looking for here and then

1949
02:09:39,329 --> 02:09:47,350
typing in here or whatever so I have it

1950
02:09:43,420 --> 02:09:50,170
up and I'm looking at it that's really

1951
02:09:47,350 --> 02:09:51,940
what I want the completion I don't

1952
02:09:50,170 --> 02:09:55,770
really care that much about other than

1953
02:09:51,939 --> 02:09:58,349
obviously when I hit tab it could use

1954
02:09:55,770 --> 02:10:00,220
that information to only offer

1955
02:09:58,350 --> 02:10:03,280
completions that made sense

1956
02:10:00,220 --> 02:10:04,780
so that's you know a plus but I don't

1957
02:10:03,279 --> 02:10:06,670
find that to be a huge for activity

1958
02:10:04,779 --> 02:10:09,489
problem the thing that I would probably

1959
02:10:06,670 --> 02:10:11,260
get us at least a slight win from is if

1960
02:10:09,489 --> 02:10:15,189
it just automatically brought up the

1961
02:10:11,260 --> 02:10:17,110
things that I was that were involved in

1962
02:10:15,189 --> 02:10:19,569
the current function automatically line

1963
02:10:17,109 --> 02:10:22,500
them up on the left that's what I would

1964
02:10:19,569 --> 02:10:22,500
really want right

1965
02:10:25,170 --> 02:10:29,260
long billion when the lighting is in

1966
02:10:27,789 --> 02:10:32,229
real time will that tend to hide some of

1967
02:10:29,260 --> 02:10:33,970
them are minor artifacts I don't think

1968
02:10:32,229 --> 02:10:35,709
so if anything the opposite will

1969
02:10:33,970 --> 02:10:37,869
probably be true like for all we know we

1970
02:10:35,710 --> 02:10:40,539
will have some artifacts that only

1971
02:10:37,869 --> 02:10:42,519
really are evident when we are moving

1972
02:10:40,539 --> 02:10:45,369
the light around continuously or lights

1973
02:10:42,520 --> 02:10:48,430
are moving around continuously so I

1974
02:10:45,369 --> 02:10:54,399
would say that we we certainly shouldn't

1975
02:10:48,430 --> 02:10:56,680
count on having any you know gifts if

1976
02:10:54,399 --> 02:10:59,019
you will in terms of covering up our

1977
02:10:56,680 --> 02:11:00,700
mistakes from the real-time lighting if

1978
02:10:59,020 --> 02:11:03,370
anything I think we'll probably end up

1979
02:11:00,699 --> 02:11:07,659
with the opposite where you know we

1980
02:11:03,369 --> 02:11:10,140
might end up with a artifact or two that

1981
02:11:07,659 --> 02:11:14,430
we have to address that is only actually

1982
02:11:10,140 --> 02:11:14,430
noticeable when you move around

1983
02:11:21,619 --> 02:11:24,670
all right

1984
02:11:37,640 --> 02:11:44,690
dragoon six was sending a gift

1985
02:11:50,529 --> 02:11:57,309
I can't seem to open it on my machine

1986
02:11:53,828 --> 02:12:00,519
for some reason like it's hard to copy

1987
02:11:57,309 --> 02:12:02,710
things like links to in the terminal

1988
02:12:00,520 --> 02:12:13,690
they underlined but then they don't open

1989
02:12:02,710 --> 02:12:15,279
era know why Linux is doing that but so

1990
02:12:13,689 --> 02:12:19,029
I'm not really sure what this gif is

1991
02:12:15,279 --> 02:12:26,019
showing during the typing it just looks

1992
02:12:19,029 --> 02:12:29,698
like yeah I don't really know what

1993
02:12:26,020 --> 02:12:29,699
that's gif is showing

1994
02:12:36,529 --> 02:12:42,590
sorry I can't quite tell I mean I

1995
02:12:41,180 --> 02:12:47,119
watched it but it doesn't really it just

1996
02:12:42,590 --> 02:12:49,010
kind of showed the it just kind of

1997
02:12:47,119 --> 02:12:51,500
showed like a copy of the identifiers

1998
02:12:49,010 --> 02:12:53,000
below where it was being typed which I'm

1999
02:12:51,500 --> 02:12:56,140
not sure what that how that relates to

2000
02:12:53,000 --> 02:12:56,140
the previous discussion

2001
02:13:05,159 --> 02:13:09,849
shooing a heads-up display of the

2002
02:13:07,090 --> 02:13:12,720
possible I have that didn't that was not

2003
02:13:09,850 --> 02:13:20,890
in the gift the gift didn't show that

2004
02:13:12,720 --> 02:13:23,680
you serve that gift shows that at least

2005
02:13:20,890 --> 02:13:25,270
on mine someone it just types sad and

2006
02:13:23,680 --> 02:13:26,730
then it shows sad bar underneath it and

2007
02:13:25,270 --> 02:13:38,140
then it just becomes a blank screen

2008
02:13:26,729 --> 02:13:40,769
there's no arguments shown there am I

2009
02:13:38,140 --> 02:13:40,770
wrong about that

2010
02:13:46,399 --> 02:13:50,449
maybe the gift is busted

2011
02:13:56,630 --> 02:14:00,500
saiyr twink she says I know finding a

2012
02:13:58,760 --> 02:14:02,210
bad API is not hard but if you're a

2013
02:14:00,500 --> 02:14:03,979
steed you ever run into an API that was

2014
02:14:02,210 --> 02:14:07,000
great to work with one that you seem to

2015
02:14:03,979 --> 02:14:07,000
magically just click with

2016
02:14:42,488 --> 02:14:56,738
I mean I guess it depends on I mean it

2017
02:14:53,140 --> 02:15:06,579
depends on what you consider part of in

2018
02:14:56,738 --> 02:15:09,329
the API and and how much I I mean I

2019
02:15:06,579 --> 02:15:15,689
think the short answer is probably no

2020
02:15:09,329 --> 02:15:18,579
you know I don't really think I have

2021
02:15:15,689 --> 02:15:20,679
there's certainly certain api's that I

2022
02:15:18,579 --> 02:15:22,059
feel like have good parts of them are

2023
02:15:20,680 --> 02:15:24,719
parts of api's that seem to be

2024
02:15:22,060 --> 02:15:24,719
particularly good

2025
02:15:36,979 --> 02:15:42,539
but I don't know yeah I'm having trouble

2026
02:15:41,279 --> 02:15:50,459
thinking of something that I thought was

2027
02:15:42,538 --> 02:15:52,588
like a really great API I mean the sad

2028
02:15:50,458 --> 02:15:54,298
fact of the matter is it seems to me

2029
02:15:52,588 --> 02:15:57,059
like most people don't spend any time

2030
02:15:54,298 --> 02:15:58,559
designing api's and they don't spend any

2031
02:15:57,059 --> 02:15:59,208
time practicing or getting better at it

2032
02:15:58,559 --> 02:16:02,189
either

2033
02:15:59,208 --> 02:16:04,168
so most api's are just shipped by people

2034
02:16:02,189 --> 02:16:07,048
who have no API design experience and

2035
02:16:04,168 --> 02:16:10,488
they don't spend any time making their

2036
02:16:07,048 --> 02:16:10,488
api's actually work

2037
02:16:18,560 --> 02:16:26,230
I will say that doesn't appear to work

2038
02:16:22,939 --> 02:16:26,229
very well does it

2039
02:16:37,920 --> 02:16:47,599
is this supposed to be showing me some

2040
02:16:39,989 --> 02:16:47,599
dependencies it doesn't seem too

2041
02:17:09,280 --> 02:17:17,000
try to read this gif again yeah it

2042
02:17:15,020 --> 02:17:21,590
doesn't work on this either I'm using

2043
02:17:17,000 --> 02:17:24,489
chromium but it just goes blank after

2044
02:17:21,590 --> 02:17:24,489
that part

2045
02:17:36,129 --> 02:17:51,218
uh all right I'm gonna wind it down soon

2046
02:17:47,159 --> 02:17:58,239
Oh another another attempt at that get

2047
02:17:51,218 --> 02:18:00,459
the guess I could try it in Firefox

2048
02:17:58,239 --> 02:18:13,869
going okay yeah this one's working

2049
02:18:00,459 --> 02:18:16,000
better um so yeah like what what I'm

2050
02:18:13,870 --> 02:18:20,320
seeing in this this gif is is works for

2051
02:18:16,000 --> 02:18:22,478
me and know that that what's shown in

2052
02:18:20,319 --> 02:18:24,728
that gif is the kind of stuff that I

2053
02:18:22,478 --> 02:18:26,228
don't want look I definitely don't want

2054
02:18:24,728 --> 02:18:29,648
that I find that to be counterproductive

2055
02:18:26,228 --> 02:18:33,459
and I'm slower with that than I am

2056
02:18:29,648 --> 02:18:38,289
without it the reason is because I I

2057
02:18:33,459 --> 02:18:41,079
don't want it to be transient it needs

2058
02:18:38,290 --> 02:18:42,820
to be permanent so when I am editing a

2059
02:18:41,079 --> 02:18:47,530
piece of code it has to show me the

2060
02:18:42,819 --> 02:18:49,569
related stuff permanently on the side it

2061
02:18:47,530 --> 02:18:50,769
can't be flickering in and out that is

2062
02:18:49,569 --> 02:18:54,939
not useful to me it needs to be

2063
02:18:50,769 --> 02:18:57,909
permanently there so if you know the

2064
02:18:54,939 --> 02:18:59,409
function that I'm in or the 10 line

2065
02:18:57,909 --> 02:19:02,228
window that I'm editing right now or

2066
02:18:59,409 --> 02:19:04,718
whatever involves these three structures

2067
02:19:02,228 --> 02:19:06,879
and these five functions those the

2068
02:19:04,718 --> 02:19:11,648
prototypes and structs that have to be

2069
02:19:06,879 --> 02:19:14,348
on the right side in full permanently

2070
02:19:11,648 --> 02:19:16,359
and until I move somewhere else and

2071
02:19:14,349 --> 02:19:21,069
start editing something else they can't

2072
02:19:16,360 --> 02:19:23,739
flicker in and out right it's just not

2073
02:19:21,069 --> 02:19:26,349
useful I don't need you to show me

2074
02:19:23,739 --> 02:19:29,590
something so restricted right because I

2075
02:19:26,349 --> 02:19:32,530
know my code pretty well what I need you

2076
02:19:29,590 --> 02:19:34,030
to do is give me a heads up display that

2077
02:19:32,530 --> 02:19:36,040
shows the parts of my code that are

2078
02:19:34,030 --> 02:19:37,689
related to this part of the code so that

2079
02:19:36,040 --> 02:19:38,649
I can look at them and glance and make

2080
02:19:37,689 --> 02:19:40,809
sure that there wasn't something

2081
02:19:38,648 --> 02:19:42,789
forgotten in those or see if there was

2082
02:19:40,808 --> 02:19:44,289
comments in there that I needed to be

2083
02:19:42,790 --> 02:19:45,790
reading while I'm doing this you know

2084
02:19:44,290 --> 02:19:47,710
and these types of code completion

2085
02:19:45,790 --> 02:19:49,149
things they don't really solve that

2086
02:19:47,709 --> 02:19:49,629
problem which is the problem that I

2087
02:19:49,148 --> 02:19:53,829
actually

2088
02:19:49,629 --> 02:19:55,359
have just like telling me which member

2089
02:19:53,829 --> 02:19:57,159
functions around this thing is just not

2090
02:19:55,360 --> 02:20:00,189
a problem I tend to have that much right

2091
02:19:57,159 --> 02:20:02,228
like and it's not a problem that's like

2092
02:20:00,189 --> 02:20:07,540
gonna make a huge difference if it

2093
02:20:02,228 --> 02:20:10,239
solves it for me what I want is

2094
02:20:07,540 --> 02:20:14,140
situational awareness and that requires

2095
02:20:10,239 --> 02:20:16,719
actual permanent clear display of the

2096
02:20:14,139 --> 02:20:22,689
related parts of the code hopefully that

2097
02:20:16,719 --> 02:20:24,549
makes some sense all right why this

2098
02:20:22,689 --> 02:20:28,860
depends program doesn't work I don't

2099
02:20:24,549 --> 02:20:28,859
know but I guess that's the end of that

2100
02:20:36,239 --> 02:20:43,569
all right um I'm gonna go ahead and

2101
02:20:41,379 --> 02:20:44,978
close everything down thank you for one

2102
02:20:43,569 --> 02:20:46,180
for joining me for an episode of hand

2103
02:20:44,978 --> 02:20:47,619
made here at certified recording with

2104
02:20:46,180 --> 02:20:48,909
you as always if you would like to

2105
02:20:47,620 --> 02:20:50,530
follow along with series at home you can

2106
02:20:48,909 --> 02:20:52,600
always pre-order the game on hand Mahiro

2107
02:20:50,530 --> 02:20:54,340
org it comes with a source code so you

2108
02:20:52,600 --> 02:20:56,439
can play around with it we also have a

2109
02:20:54,340 --> 02:20:59,260
forum site you can go to if you want to

2110
02:20:56,439 --> 02:21:00,670
ask questions we have a patreon page you

2111
02:20:59,260 --> 02:21:03,370
go to from us fourth video series we

2112
02:21:00,670 --> 02:21:04,930
have a schedule bot that tells you when

2113
02:21:03,370 --> 02:21:06,490
we're gonna be live and an episode guide

2114
02:21:04,930 --> 02:21:08,470
which we will try to figure out how to

2115
02:21:06,489 --> 02:21:10,270
get updated I guess it wasn't updating

2116
02:21:08,469 --> 02:21:13,119
because of a server problem

2117
02:21:10,270 --> 02:21:17,530
I don't do the episode guy that's other

2118
02:21:13,120 --> 02:21:18,880
folks so yeah but I will be talking to

2119
02:21:17,530 --> 02:21:21,280
me below ever to see if I can figure out

2120
02:21:18,879 --> 02:21:24,549
fix the thing that is stopping him from

2121
02:21:21,280 --> 02:21:27,880
being able to update it and then that

2122
02:21:24,549 --> 02:21:30,219
should be back as well alright that's it

2123
02:21:27,879 --> 02:21:32,769
for today I will not be here tomorrow

2124
02:21:30,219 --> 02:21:35,889
because I have prior record engagements

2125
02:21:32,770 --> 02:21:39,220
I have to do so I will be back probably

2126
02:21:35,889 --> 02:21:40,750
the weekend after until then take it

2127
02:21:39,219 --> 02:21:43,539
easy everyone have fun programming and

2128
02:21:40,750 --> 02:21:45,959
I'll see everyone on the Internet thank

2129
02:21:43,540 --> 02:21:45,960
you is everybody

