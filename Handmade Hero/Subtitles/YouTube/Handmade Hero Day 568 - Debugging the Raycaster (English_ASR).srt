1
00:00:00,890 --> 00:00:04,919
hello everybody and welcome to handmade

2
00:00:03,240 --> 00:00:08,609
Hero show where I code a complete game

3
00:00:04,919 --> 00:00:12,059
live on stream you may be asking

4
00:00:08,609 --> 00:00:18,750
yourself Casey what are you drinking

5
00:00:12,058 --> 00:00:20,579
today hmm hmm and the answer is I'm

6
00:00:18,750 --> 00:00:24,329
actually drinking handmade coffee

7
00:00:20,579 --> 00:00:26,098
the very first coffee to be officially

8
00:00:24,329 --> 00:00:29,428
sanctioned by the handmade hero

9
00:00:26,099 --> 00:00:31,469
television show where can you get some

10
00:00:29,428 --> 00:00:35,850
of this handmade coffee you may ask well

11
00:00:31,469 --> 00:00:38,700
I guess the answer is I don't know it

12
00:00:35,850 --> 00:00:42,000
was actually given to me by a viewer of

13
00:00:38,700 --> 00:00:45,270
the show at handmade Seattle

14
00:00:42,000 --> 00:00:48,899
his name is Arad I don't actually know

15
00:00:45,270 --> 00:00:51,690
if he would actually ever take a coffee

16
00:00:48,899 --> 00:00:56,308
order for somebody cuz he hand roast his

17
00:00:51,689 --> 00:00:57,839
own coffee I think because he is in the

18
00:00:56,308 --> 00:01:03,378
Bay Area and said that he thinks the

19
00:00:57,840 --> 00:01:06,030
coffee there is not very good but I

20
00:01:03,378 --> 00:01:09,509
posted on Twitter a little shot of the

21
00:01:06,030 --> 00:01:11,099
handmade hero coffee and a lot of people

22
00:01:09,510 --> 00:01:13,049
were interested about interested to know

23
00:01:11,099 --> 00:01:15,899
about it that is where it came from I do

24
00:01:13,049 --> 00:01:16,409
not make my own coffee I mean I get

25
00:01:15,900 --> 00:01:18,750
beans

26
00:01:16,409 --> 00:01:20,189
I grind them and I put them through an

27
00:01:18,750 --> 00:01:24,109
espresso machine that is about as

28
00:01:20,188 --> 00:01:26,478
handmade as my coffee gets but I was

29
00:01:24,109 --> 00:01:31,560
extremely honored to be presented with a

30
00:01:26,478 --> 00:01:37,459
bag of handmade coffee and I do think I

31
00:01:31,560 --> 00:01:42,000
have actually the the Twitter handle for

32
00:01:37,459 --> 00:01:43,709
the fellow who made it it's and I will

33
00:01:42,000 --> 00:01:51,090
try to treat that out it's it's at the

34
00:01:43,709 --> 00:01:53,819
Eradicator IRA i ra di CA tio R so that

35
00:01:51,090 --> 00:01:56,728
is where the coffee came from and if

36
00:01:53,819 --> 00:01:59,129
you're interested in handmade coffee you

37
00:01:56,728 --> 00:02:01,019
can you can hit up Eradicator on twitter

38
00:01:59,129 --> 00:02:02,310
and see if he has any tips for you I

39
00:02:01,019 --> 00:02:03,629
don't even know how he's doing it I

40
00:02:02,310 --> 00:02:05,640
guess he must have some kind of a home

41
00:02:03,629 --> 00:02:08,429
roasting setup which I don't even know

42
00:02:05,640 --> 00:02:10,530
do they make like a little roasting

43
00:02:08,429 --> 00:02:12,949
thing I mean I think if you're in the

44
00:02:10,530 --> 00:02:15,229
Bay Area you can't have a house can you

45
00:02:12,949 --> 00:02:17,469
you would have to be like extremely

46
00:02:15,229 --> 00:02:21,109
wealthy I don't know maybe he is but

47
00:02:17,469 --> 00:02:22,759
just seems unlikely right that you'd

48
00:02:21,110 --> 00:02:24,830
have like a big outdoor roaster there or

49
00:02:22,759 --> 00:02:29,780
something like that anyway thanks again

50
00:02:24,830 --> 00:02:32,810
to rod for that it's awesome and yeah

51
00:02:29,780 --> 00:02:34,280
unfortunately I'm running out so left

52
00:02:32,810 --> 00:02:37,610
feed back to the regular coffee probably

53
00:02:34,280 --> 00:02:38,750
next week but until then I'm on the

54
00:02:37,610 --> 00:02:40,489
handmade coffee and it's pretty

55
00:02:38,750 --> 00:02:44,930
delicious this was a this was from

56
00:02:40,489 --> 00:02:51,069
Ethiopia beans t.o.p and beans you can

57
00:02:44,930 --> 00:02:54,980
see it's labeled on the bottom alright

58
00:02:51,068 --> 00:03:00,889
let's go ahead and get this going I'm

59
00:02:54,979 --> 00:03:03,469
gonna switch over to do sorry the new

60
00:03:00,889 --> 00:03:04,809
setup I got a can I still get used to

61
00:03:03,469 --> 00:03:07,789
things

62
00:03:04,810 --> 00:03:10,729
so where did we leave off we've been

63
00:03:07,789 --> 00:03:11,989
since we had I was away for one weekend

64
00:03:10,729 --> 00:03:14,449
and then handmade Seattle was last

65
00:03:11,989 --> 00:03:16,189
weekend so I haven't really been

66
00:03:14,449 --> 00:03:17,539
streaming for a while so you may have

67
00:03:16,189 --> 00:03:20,859
forgotten I mean I may have forgotten

68
00:03:17,539 --> 00:03:24,858
what we were doing so what are we doing

69
00:03:20,859 --> 00:03:27,049
well actually surprisingly I didn't

70
00:03:24,859 --> 00:03:29,689
forget what we were doing we were in the

71
00:03:27,049 --> 00:03:32,870
middle of doing some work with the Ray

72
00:03:29,689 --> 00:03:34,639
casting that we use for lighting and if

73
00:03:32,870 --> 00:03:38,930
I go ahead and do a quick build of the

74
00:03:34,639 --> 00:03:41,899
game here and then launch remedy EPG and

75
00:03:38,930 --> 00:03:43,969
you can see a run of the current state

76
00:03:41,900 --> 00:03:45,829
of things what we had just done at the

77
00:03:43,969 --> 00:03:49,430
end of last name if I'm not in error is

78
00:03:45,829 --> 00:03:51,739
thrown in the Ray caster and had it

79
00:03:49,430 --> 00:03:54,409
basically set the lighting in an area

80
00:03:51,739 --> 00:03:57,079
based on you know to either the correct

81
00:03:54,409 --> 00:04:02,930
radial fallout well correct rid of the

82
00:03:57,079 --> 00:04:05,719
radial test fall off or zero if the Ray

83
00:04:02,930 --> 00:04:07,459
to the light source was occluded and we

84
00:04:05,719 --> 00:04:09,049
got this weird modeling pattern which

85
00:04:07,459 --> 00:04:11,060
was a little surprising at first but

86
00:04:09,049 --> 00:04:13,219
then I realized it may not really be all

87
00:04:11,060 --> 00:04:15,769
that surprising and the reason for that

88
00:04:13,219 --> 00:04:19,399
is because we were just ray casting from

89
00:04:15,769 --> 00:04:21,168
the center excuse me

90
00:04:19,399 --> 00:04:24,859
we were just ray casting from the center

91
00:04:21,168 --> 00:04:26,959
of the voxels of the lighting voxels and

92
00:04:24,860 --> 00:04:28,520
so it's not particularly surprised

93
00:04:26,959 --> 00:04:30,758
that we would get this pattern actually

94
00:04:28,519 --> 00:04:35,359
now think about it because since we have

95
00:04:30,759 --> 00:04:38,060
unevenly the height of our things this

96
00:04:35,360 --> 00:04:40,150
kind of variant if the Centers of the

97
00:04:38,060 --> 00:04:43,550
voxels the places we were casting from

98
00:04:40,149 --> 00:04:46,429
happened to be like sort of along the

99
00:04:43,550 --> 00:04:49,720
bottom here what you would get is you

100
00:04:46,430 --> 00:04:53,000
would definitely get this sort of same

101
00:04:49,720 --> 00:04:54,919
occluding or non occluding behavior of

102
00:04:53,000 --> 00:04:56,598
the light source as you moved around or

103
00:04:54,918 --> 00:04:59,689
other things like that could easily

104
00:04:56,598 --> 00:05:01,399
happen right depending on whether or not

105
00:04:59,689 --> 00:05:04,969
you could see whether or not the

106
00:05:01,399 --> 00:05:07,129
particular ray that was cast to that

107
00:05:04,970 --> 00:05:09,650
voxel center from the light source hits

108
00:05:07,129 --> 00:05:13,519
something or didn't hit something right

109
00:05:09,649 --> 00:05:16,609
so we actually don't really know I mean

110
00:05:13,519 --> 00:05:18,049
although you know it probably is also

111
00:05:16,610 --> 00:05:19,580
there's some bugs in there because we

112
00:05:18,050 --> 00:05:22,400
haven't really done much with that ray

113
00:05:19,579 --> 00:05:25,219
casting stuff but although we don't

114
00:05:22,399 --> 00:05:27,469
really know if there's a bug or not we

115
00:05:25,220 --> 00:05:28,940
just know there might be we also don't

116
00:05:27,470 --> 00:05:29,990
we aren't really doing what we would

117
00:05:28,939 --> 00:05:32,509
want to do anyway

118
00:05:29,990 --> 00:05:34,668
because what we'd like to do is move and

119
00:05:32,509 --> 00:05:35,870
really get started this today I didn't

120
00:05:34,668 --> 00:05:37,430
want to start at the end of last dream

121
00:05:35,870 --> 00:05:39,259
because it's a bunch of work obviously

122
00:05:37,430 --> 00:05:41,509
and kind of moving more towards the full

123
00:05:39,259 --> 00:05:43,669
lighting solution but now today we can

124
00:05:41,509 --> 00:05:45,680
start down that road what we want to do

125
00:05:43,668 --> 00:05:48,019
is use the positioning of these light

126
00:05:45,680 --> 00:05:50,329
probes because that's the whole point of

127
00:05:48,019 --> 00:05:52,819
the light probes right the idea behind

128
00:05:50,329 --> 00:05:55,250
the light probes is that when we build

129
00:05:52,819 --> 00:05:58,699
the level what we want to do is

130
00:05:55,250 --> 00:06:00,589
specifically tell the game here is where

131
00:05:58,699 --> 00:06:02,629
we want you to compute the lighting from

132
00:06:00,589 --> 00:06:05,418
because otherwise we're always gonna

133
00:06:02,629 --> 00:06:07,279
have crazy artifacts that have to do

134
00:06:05,418 --> 00:06:09,198
with the fact that where we choose to do

135
00:06:07,279 --> 00:06:12,500
casting from happens to be like inside

136
00:06:09,199 --> 00:06:14,658
something right so if we actually use

137
00:06:12,500 --> 00:06:17,779
the voxel of the lighting voxel centers

138
00:06:14,658 --> 00:06:19,519
we would be in a lot of trouble because

139
00:06:17,779 --> 00:06:22,629
we would constantly be getting artifacts

140
00:06:19,519 --> 00:06:25,519
similar to these so even if there isn't

141
00:06:22,629 --> 00:06:27,468
or I should say even if what we're

142
00:06:25,519 --> 00:06:29,538
seeing right now is just bugs that we're

143
00:06:27,468 --> 00:06:32,629
gonna go clean up in the actual ray

144
00:06:29,538 --> 00:06:35,240
casting or whatever right we do also

145
00:06:32,629 --> 00:06:37,098
need to address this other potential

146
00:06:35,240 --> 00:06:39,650
source of problems which is the fact

147
00:06:37,098 --> 00:06:40,740
that the precise nature of these

148
00:06:39,649 --> 00:06:44,969
lighting probes

149
00:06:40,740 --> 00:06:47,009
is that we need them to help us not have

150
00:06:44,970 --> 00:06:49,080
weird placement of raycasting

151
00:06:47,009 --> 00:06:52,020
information and that's something that we

152
00:06:49,079 --> 00:06:53,519
have not done yet so we need to do both

153
00:06:52,019 --> 00:06:55,288
of those things both figure out if we've

154
00:06:53,519 --> 00:06:56,549
got other bugs that are in the rake

155
00:06:55,288 --> 00:06:58,649
house is the first time we've turned it

156
00:06:56,550 --> 00:07:00,449
on since we did all the rewriting so if

157
00:06:58,649 --> 00:07:03,269
to fix the raycast or any bugs in there

158
00:07:00,449 --> 00:07:04,680
and then we need to also or maybe we do

159
00:07:03,269 --> 00:07:07,409
this the opposite order we need to be

160
00:07:04,680 --> 00:07:09,689
casting and thinking about the lighting

161
00:07:07,410 --> 00:07:11,850
from the light probe because the whole

162
00:07:09,689 --> 00:07:13,829
reason they're there now they no longer

163
00:07:11,850 --> 00:07:16,860
will even be storing any information

164
00:07:13,829 --> 00:07:20,819
which is kind of cool they're just there

165
00:07:16,860 --> 00:07:22,889
in fact we could we can even say they're

166
00:07:20,819 --> 00:07:24,389
effectively guides there like sampling

167
00:07:22,889 --> 00:07:26,460
guides they're just telling the system

168
00:07:24,389 --> 00:07:27,900
where to sample from they're not even

169
00:07:26,459 --> 00:07:29,879
really storing any lighting information

170
00:07:27,899 --> 00:07:31,679
anymore which is great if it turns out

171
00:07:29,879 --> 00:07:34,288
we can get away get away with that

172
00:07:31,680 --> 00:07:35,310
that's actually really fantastic for a

173
00:07:34,288 --> 00:07:37,110
number of reasons I've explained before

174
00:07:35,310 --> 00:07:39,839
but basically it means we don't have to

175
00:07:37,110 --> 00:07:42,840
track these things through the through

176
00:07:39,839 --> 00:07:46,279
the frame process like we don't have to

177
00:07:42,839 --> 00:07:48,478
go from frame to frame knowing that this

178
00:07:46,279 --> 00:07:49,348
probe and this probe were like the same

179
00:07:48,478 --> 00:07:51,120
probe or anything like that

180
00:07:49,348 --> 00:07:53,279
because all we're doing is throwing

181
00:07:51,120 --> 00:07:55,199
sample points into a system so every

182
00:07:53,279 --> 00:07:56,579
frame we can just throw them in and then

183
00:07:55,199 --> 00:07:58,259
the next frame we can throw in a totally

184
00:07:56,579 --> 00:08:01,139
different set if we wanted to and this

185
00:07:58,259 --> 00:08:03,089
would not affect our ability to execute

186
00:08:01,139 --> 00:08:07,650
the algorithm faithfully that's like

187
00:08:03,089 --> 00:08:10,888
really great right so that's that's a

188
00:08:07,649 --> 00:08:15,209
pretty that would be a pretty a pretty

189
00:08:10,889 --> 00:08:18,000
big deal right so anyway that's where

190
00:08:15,209 --> 00:08:19,198
we're at currently and so we're gonna

191
00:08:18,000 --> 00:08:21,209
have to sort of go through this slowly

192
00:08:19,199 --> 00:08:22,740
because we haven't been you know we

193
00:08:21,209 --> 00:08:26,549
haven't been programming in two weeks

194
00:08:22,740 --> 00:08:28,408
three weeks and so we kind of got to get

195
00:08:26,550 --> 00:08:29,939
back in the swing of things here if you

196
00:08:28,408 --> 00:08:31,529
remember correctly we're calling build

197
00:08:29,939 --> 00:08:32,729
spatial partition for lighting build

198
00:08:31,529 --> 00:08:34,708
spatial partition for lighting is the

199
00:08:32,729 --> 00:08:36,629
thing which basically says okay you know

200
00:08:34,708 --> 00:08:38,519
make some acceleration structure we can

201
00:08:36,629 --> 00:08:39,778
use for faster ray casting we probably

202
00:08:38,519 --> 00:08:42,179
need to do some work on that but that's

203
00:08:39,778 --> 00:08:43,588
what's going on there and then compute

204
00:08:42,179 --> 00:08:45,778
letting propagation as you can see is

205
00:08:43,589 --> 00:08:47,640
turned off that's because we haven't

206
00:08:45,778 --> 00:08:49,320
really gotten to the part where we want

207
00:08:47,639 --> 00:08:51,480
to do secondary bounces that's what

208
00:08:49,320 --> 00:08:53,010
compute light propagation will be for is

209
00:08:51,480 --> 00:08:53,999
for like basically doing secondary

210
00:08:53,009 --> 00:08:57,159
bounces

211
00:08:53,999 --> 00:08:58,389
so what we're doing right now is we're

212
00:08:57,159 --> 00:08:59,799
doing testing and if you remember

213
00:08:58,389 --> 00:09:02,139
correctly what we can do here is we have

214
00:08:59,799 --> 00:09:04,149
some pound affiance those pound defines

215
00:09:02,139 --> 00:09:06,308
determine what kind of lighting test

216
00:09:04,149 --> 00:09:08,289
we're running if I turn to a sphere

217
00:09:06,308 --> 00:09:10,088
based lighting test what you can see is

218
00:09:08,289 --> 00:09:12,458
that we just get the nice radial

219
00:09:10,089 --> 00:09:14,259
fall-off version right and you can see

220
00:09:12,458 --> 00:09:16,058
this has like three separate lighting

221
00:09:14,259 --> 00:09:18,550
spheres I'm sorry four separate lighting

222
00:09:16,058 --> 00:09:22,480
stores because we actually allow four

223
00:09:18,549 --> 00:09:25,269
separate interpolator patterns that

224
00:09:22,480 --> 00:09:26,350
doesn't mean four light sources you can

225
00:09:25,269 --> 00:09:28,688
use an infinite number of light sources

226
00:09:26,350 --> 00:09:30,550
it just means there's four perfect

227
00:09:28,688 --> 00:09:32,259
interpolators in there and so we just

228
00:09:30,549 --> 00:09:34,448
have to output our lighting in a way

229
00:09:32,259 --> 00:09:36,699
that for perfect interpolators could

230
00:09:34,448 --> 00:09:41,019
reconstruct right so it's the same as

231
00:09:36,698 --> 00:09:45,008
sort of saying yeah like if we were

232
00:09:41,019 --> 00:09:47,649
playing say a series of sound effects

233
00:09:45,009 --> 00:09:51,369
let's say right the good way to think

234
00:09:47,649 --> 00:09:53,619
about this is stereo sound right we all

235
00:09:51,369 --> 00:09:55,360
know that stereo sound is sufficient for

236
00:09:53,619 --> 00:09:57,339
playing sound to a spatial sound to a

237
00:09:55,360 --> 00:09:59,259
certain degree what it does is it takes

238
00:09:57,339 --> 00:10:00,699
all the sounds and it mixes them down so

239
00:09:59,259 --> 00:10:01,959
that you put some on the left channel

240
00:10:00,698 --> 00:10:03,549
some on the right channel and some in

241
00:10:01,958 --> 00:10:06,428
both I mean most of them go out and both

242
00:10:03,549 --> 00:10:09,219
at different ratios and that mix down is

243
00:10:06,428 --> 00:10:11,350
basically taking the actual locations of

244
00:10:09,220 --> 00:10:12,639
things trying to roughly figure out what

245
00:10:11,350 --> 00:10:13,928
they would sound like to the left and

246
00:10:12,639 --> 00:10:16,509
right ear and then putting them out

247
00:10:13,928 --> 00:10:19,419
through that those channels right so

248
00:10:16,509 --> 00:10:20,919
effectively you've got tons of sounds

249
00:10:19,419 --> 00:10:23,049
each one has a particular spatial

250
00:10:20,919 --> 00:10:26,919
location and you're trying to mix down

251
00:10:23,049 --> 00:10:29,859
that full set of information into just

252
00:10:26,919 --> 00:10:32,049
two output sounds that will capture what

253
00:10:29,860 --> 00:10:33,970
it should roughly sound like right and

254
00:10:32,049 --> 00:10:36,219
that's exactly the kind of thing we're

255
00:10:33,970 --> 00:10:40,629
doing here we're saying look our output

256
00:10:36,220 --> 00:10:42,670
channel is four perfect things so if we

257
00:10:40,629 --> 00:10:44,860
only add four light sources you could

258
00:10:42,669 --> 00:10:50,110
capture them exactly correctly with the

259
00:10:44,860 --> 00:10:51,699
interpolator but we will probably have

260
00:10:50,110 --> 00:10:53,499
more than four light sources in some

261
00:10:51,698 --> 00:10:55,659
areas or maybe in all areas there'll be

262
00:10:53,499 --> 00:10:57,159
a lot more and in fact really another

263
00:10:55,659 --> 00:10:59,048
way to think about it would be not only

264
00:10:57,159 --> 00:11:00,548
do we have four light sources but

265
00:10:59,048 --> 00:11:02,019
there's all the bounces right so it's a

266
00:11:00,548 --> 00:11:03,578
complete radio it's like a cleat

267
00:11:02,019 --> 00:11:07,320
radiosity solution that we're kind of

268
00:11:03,578 --> 00:11:08,789
gonna have here and so you know

269
00:11:07,320 --> 00:11:12,030
we're trying to do is figure out what

270
00:11:08,789 --> 00:11:14,519
that total lighting solution how do we

271
00:11:12,029 --> 00:11:16,049
best present to the user using only for

272
00:11:14,519 --> 00:11:16,919
playback channels is a good way to think

273
00:11:16,049 --> 00:11:18,959
about it right

274
00:11:16,919 --> 00:11:22,019
so we're effectively trying to say how

275
00:11:18,960 --> 00:11:24,900
do we reconstruct as closely as possible

276
00:11:22,019 --> 00:11:27,529
the lighting solution we want from a

277
00:11:24,899 --> 00:11:29,669
limit that limited number of

278
00:11:27,529 --> 00:11:31,980
interpolation parameters that we have

279
00:11:29,669 --> 00:11:33,689
right but I'm optimistic we'll be able

280
00:11:31,980 --> 00:11:35,370
to do it pretty good right because you

281
00:11:33,690 --> 00:11:37,620
know you can see that it's a pretty good

282
00:11:35,370 --> 00:11:38,940
interpolation reconstructs things pretty

283
00:11:37,620 --> 00:11:40,049
nicely so I think we should be able to

284
00:11:38,940 --> 00:11:44,400
figure out ways doesn't make it work

285
00:11:40,049 --> 00:11:45,990
hopefully all right so that's what we're

286
00:11:44,399 --> 00:11:47,909
working with and so what we need to do

287
00:11:45,990 --> 00:11:50,700
now is start getting the actual lighting

288
00:11:47,909 --> 00:11:52,469
transfer working and what I've did first

289
00:11:50,700 --> 00:11:56,280
is you can see in this this transfer

290
00:11:52,470 --> 00:11:58,170
test I did here what you can see is what

291
00:11:56,279 --> 00:12:00,569
we're doing here is saying look we've

292
00:11:58,169 --> 00:12:01,860
got these voxel cells of our lighting

293
00:12:00,570 --> 00:12:03,540
solution what we're going to do is go

294
00:12:01,860 --> 00:12:06,629
ahead and pack the voxel cells of the

295
00:12:03,539 --> 00:12:08,309
leg solution and send them out so that

296
00:12:06,629 --> 00:12:10,500
basically means that now we're using

297
00:12:08,309 --> 00:12:15,059
kind of for lack of a better term a real

298
00:12:10,500 --> 00:12:16,500
solution right and the real solution is

299
00:12:15,059 --> 00:12:18,449
something we're going to compute up

300
00:12:16,500 --> 00:12:20,850
above right so we're actually now

301
00:12:18,450 --> 00:12:22,920
tracking a solution over time like you

302
00:12:20,850 --> 00:12:25,710
know for reals and what you can see here

303
00:12:22,919 --> 00:12:27,299
is we do have a thing where we're you

304
00:12:25,710 --> 00:12:29,280
know this this is the the actual box

305
00:12:27,299 --> 00:12:30,809
solution here we do have a thing where

306
00:12:29,279 --> 00:12:32,250
we can sort of say what do we actually

307
00:12:30,809 --> 00:12:34,859
want to have happen here you can see the

308
00:12:32,250 --> 00:12:37,139
raycast if I turn off this raycast

309
00:12:34,860 --> 00:12:39,509
so let's suppose I just assumed that all

310
00:12:37,139 --> 00:12:42,899
rays hit and now we're just going to use

311
00:12:39,509 --> 00:12:46,559
the this sort of voxel that remains over

312
00:12:42,899 --> 00:12:48,360
time then what you can see is I think we

313
00:12:46,559 --> 00:12:51,000
I don't think we actually do the copy

314
00:12:48,360 --> 00:12:53,009
the motion copy yet right but what you

315
00:12:51,000 --> 00:12:55,740
can see is other than the frames where

316
00:12:53,009 --> 00:12:57,450
the motion copy would be wrong well you

317
00:12:55,740 --> 00:12:58,710
know what and then it's never gonna be

318
00:12:57,450 --> 00:13:00,480
wrong there's no accumulation this is

319
00:12:58,710 --> 00:13:02,310
just hard set every time so we have to

320
00:13:00,480 --> 00:13:05,070
worry about that what you can see is

321
00:13:02,309 --> 00:13:07,649
this version works just as well as the

322
00:13:05,070 --> 00:13:10,440
other version so we know at least for

323
00:13:07,649 --> 00:13:13,409
our current test purposes there is no

324
00:13:10,440 --> 00:13:15,030
bug in the voxel - voxel thing so the

325
00:13:13,409 --> 00:13:17,339
fact that we've got a stored Vox inline

326
00:13:15,029 --> 00:13:19,889
solution we're out putting that voxel to

327
00:13:17,340 --> 00:13:21,210
the card for interpolation I'm we're not

328
00:13:19,889 --> 00:13:24,269
really seeing any bugs there

329
00:13:21,210 --> 00:13:27,389
right so that's working you okay all

330
00:13:24,269 --> 00:13:29,579
right so what's not working okay is our

331
00:13:27,389 --> 00:13:31,799
rate cast here all we're doing to test

332
00:13:29,580 --> 00:13:33,990
the raycast is just saying look if we

333
00:13:31,799 --> 00:13:36,929
were to take wherever we believe the

334
00:13:33,990 --> 00:13:38,850
voxel center to be right we do a rate

335
00:13:36,929 --> 00:13:43,500
cast on that and where we believe the

336
00:13:38,850 --> 00:13:44,159
light the direction we believe the light

337
00:13:43,500 --> 00:13:46,200
to be in

338
00:13:44,159 --> 00:13:48,240
so we're saying from this voxel Center

339
00:13:46,200 --> 00:13:50,250
we already looked at where the light was

340
00:13:48,240 --> 00:13:53,610
and we did a subtraction to find that

341
00:13:50,250 --> 00:13:55,470
direction right we normalize that and

342
00:13:53,610 --> 00:13:57,840
now we have a unit vector pointing

343
00:13:55,470 --> 00:14:01,950
towards the light source if we call the

344
00:13:57,840 --> 00:14:05,129
ray caster as you can see here and we

345
00:14:01,950 --> 00:14:07,770
look to see is the distance we could get

346
00:14:05,129 --> 00:14:10,769
along this ray less than the distance

347
00:14:07,769 --> 00:14:12,899
that the light actually is if that's the

348
00:14:10,769 --> 00:14:15,329
case then unfortunately we've hit

349
00:14:12,899 --> 00:14:17,730
something and so we can't actually

350
00:14:15,330 --> 00:14:19,740
provide the light in this case right so

351
00:14:17,730 --> 00:14:22,170
it's just a simple shadow binary a

352
00:14:19,740 --> 00:14:25,590
boolean shadow not really something we

353
00:14:22,169 --> 00:14:27,509
want to do in the future because we want

354
00:14:25,590 --> 00:14:29,790
a rich like full bounce solution so

355
00:14:27,509 --> 00:14:31,319
we're gonna use our the stuff we did

356
00:14:29,789 --> 00:14:35,309
before about actually convicting light

357
00:14:31,320 --> 00:14:37,080
around but for testing the ray caster we

358
00:14:35,309 --> 00:14:38,909
would like to just start with a simple

359
00:14:37,080 --> 00:14:40,980
solution which is just like let's see if

360
00:14:38,909 --> 00:14:43,289
we can just say shadow on or off right

361
00:14:40,980 --> 00:14:45,779
and it'll be a kind of crappy lighting

362
00:14:43,289 --> 00:14:48,629
algorithm but it's something we can more

363
00:14:45,779 --> 00:14:50,339
easily visually inspect and what we see

364
00:14:48,629 --> 00:14:52,460
when we turn this on right is we get a

365
00:14:50,340 --> 00:14:56,610
pretty pockmark version of this thing

366
00:14:52,460 --> 00:14:58,139
and so if I run the thing right you can

367
00:14:56,610 --> 00:14:59,580
kind of see now that we get these sort

368
00:14:58,139 --> 00:15:01,769
of weird anomalies and so now the

369
00:14:59,580 --> 00:15:04,139
question is well all right what's busted

370
00:15:01,769 --> 00:15:05,970
right like you know why are we why are

371
00:15:04,139 --> 00:15:09,169
we getting that and our goal here again

372
00:15:05,970 --> 00:15:11,970
is not to make this run because we care

373
00:15:09,169 --> 00:15:13,709
because we don't care this isn't the

374
00:15:11,970 --> 00:15:16,170
lighting we're going to use what we're

375
00:15:13,710 --> 00:15:18,330
trying to do here is say before we

376
00:15:16,169 --> 00:15:20,250
actually get into the weeds of like a

377
00:15:18,330 --> 00:15:21,600
rich lighting solution which we know

378
00:15:20,250 --> 00:15:22,889
will be more complicated in which we

379
00:15:21,600 --> 00:15:25,350
already kind of wrote part of and we're

380
00:15:22,889 --> 00:15:27,029
gonna kind of move into that we're

381
00:15:25,350 --> 00:15:28,920
trying to instead is just test the Ray

382
00:15:27,029 --> 00:15:30,689
casting because since all of our

383
00:15:28,919 --> 00:15:32,669
lighting movement is gonna be based on

384
00:15:30,690 --> 00:15:33,720
doing light tests to see if you can go

385
00:15:32,669 --> 00:15:34,829
from one place to another without

386
00:15:33,720 --> 00:15:36,420
hitting something

387
00:15:34,830 --> 00:15:38,639
we need to first make sure that that's

388
00:15:36,419 --> 00:15:40,079
working and if you remember correctly we

389
00:15:38,639 --> 00:15:41,759
also have this ability to push debug

390
00:15:40,080 --> 00:15:45,600
lines so one things we did at the end of

391
00:15:41,759 --> 00:15:49,950
the last week's last lab close three

392
00:15:45,600 --> 00:15:52,709
weeks ago the last show we did is we

393
00:15:49,950 --> 00:15:54,899
were drawing some debug lines so that we

394
00:15:52,708 --> 00:15:57,778
could actually see what we were looking

395
00:15:54,899 --> 00:15:59,190
at here right and if you look at you

396
00:15:57,778 --> 00:16:00,629
know it's hard to see because the

397
00:15:59,190 --> 00:16:03,000
lighting solution is actually being

398
00:16:00,629 --> 00:16:05,730
applied right but we can pretty

399
00:16:03,000 --> 00:16:08,879
trivially turn that off if we want to as

400
00:16:05,730 --> 00:16:10,139
well but if you look and if you you know

401
00:16:08,879 --> 00:16:14,370
if you look at what we're seeing here

402
00:16:10,139 --> 00:16:17,039
and you kind of look at the at the where

403
00:16:14,370 --> 00:16:20,610
the lines are being drawn the lines that

404
00:16:17,039 --> 00:16:22,799
are being drawn are ones that are saying

405
00:16:20,610 --> 00:16:26,519
that they did hit something so if you

406
00:16:22,799 --> 00:16:28,949
look where the code is actually how this

407
00:16:26,519 --> 00:16:31,769
how this path works out we can see is it

408
00:16:28,950 --> 00:16:34,890
saying look if we are looking at a

409
00:16:31,769 --> 00:16:36,360
particular region because we if we don't

410
00:16:34,889 --> 00:16:37,828
want to draw all the debug lines because

411
00:16:36,360 --> 00:16:41,159
every you know this is a pretty big

412
00:16:37,828 --> 00:16:47,419
thing it's what 16 by 16 by 16 or 32 by

413
00:16:41,159 --> 00:16:47,419
32 by 32 is 32 by 32 by 32 and remember

414
00:16:48,409 --> 00:16:55,769
yeah so it's a 32 by 32 by 32 grid now

415
00:16:53,039 --> 00:16:57,149
32 by 32 when you say that it soundings

416
00:16:55,769 --> 00:16:59,129
it sound pretty small but when you

417
00:16:57,149 --> 00:17:00,720
multiply by 32 again it gets pretty big

418
00:16:59,129 --> 00:17:04,410
right so voxels

419
00:17:00,720 --> 00:17:06,150
are cubic not squared so our intuition

420
00:17:04,410 --> 00:17:08,910
about how big they are tends to be sort

421
00:17:06,150 --> 00:17:11,429
of wrong right you think 32 by 32 bitmap

422
00:17:08,910 --> 00:17:14,189
you're like well that's tiny right but

423
00:17:11,429 --> 00:17:16,800
32 by 32 by 32 well that's quite a few

424
00:17:14,189 --> 00:17:19,558
more right so a thousand lines not that

425
00:17:16,799 --> 00:17:21,928
many lines to see 32,000 lines a little

426
00:17:19,558 --> 00:17:23,699
few too many lines to look at right so

427
00:17:21,929 --> 00:17:25,290
what we wanted to do instead of drawing

428
00:17:23,699 --> 00:17:27,058
all the lines which has just been a mess

429
00:17:25,289 --> 00:17:28,470
of lines and it wouldn't even our boot

430
00:17:27,058 --> 00:17:29,668
overflow our debug buffers anyway

431
00:17:28,470 --> 00:17:31,230
because those don't grow on demand

432
00:17:29,669 --> 00:17:34,020
they're just kind of you know fixed size

433
00:17:31,230 --> 00:17:36,539
or whatever what we need to do is just

434
00:17:34,019 --> 00:17:37,740
you know restrict how big of a region

435
00:17:36,539 --> 00:17:39,599
we're actually looking at there and so

436
00:17:37,740 --> 00:17:42,870
we did here you say okay look inside the

437
00:17:39,599 --> 00:17:45,209
hot corners here we're gonna take the

438
00:17:42,869 --> 00:17:47,668
center we're gonna take minus 4 and plus

439
00:17:45,210 --> 00:17:48,210
4 of the dimension so we're just gonna

440
00:17:47,669 --> 00:17:52,020
look

441
00:17:48,210 --> 00:17:56,009
at a total of like like 1/8 wide bugs

442
00:17:52,019 --> 00:17:58,950
that be 9 wide how do I think about that

443
00:17:56,009 --> 00:18:00,778
I guess it'd be 8 wide because we don't

444
00:17:58,950 --> 00:18:04,470
I don't think we include yeah we did so

445
00:18:00,778 --> 00:18:08,460
right there that's a less than so we're

446
00:18:04,470 --> 00:18:12,690
just looking at an 8 by 8 by 8 right so

447
00:18:08,460 --> 00:18:14,700
we're basically looking at that which is

448
00:18:12,690 --> 00:18:16,528
a much more manageable a number of lines

449
00:18:14,700 --> 00:18:18,659
and they'll only draw when they actually

450
00:18:16,528 --> 00:18:21,798
did hit something so in the case where

451
00:18:18,659 --> 00:18:24,090
some debug line actually hits something

452
00:18:21,798 --> 00:18:27,089
we will actually see it show up here

453
00:18:24,089 --> 00:18:31,019
right so what I'd like to do now is

454
00:18:27,089 --> 00:18:33,449
probably turn off the lighting so that

455
00:18:31,019 --> 00:18:36,210
we can not you know so we don't have to

456
00:18:33,450 --> 00:18:39,450
actually look at that and then dig

457
00:18:36,210 --> 00:18:40,890
deeper into these tests to see are we

458
00:18:39,450 --> 00:18:43,440
seeing something that makes sense

459
00:18:40,890 --> 00:18:46,110
is this Ray Kassar just busted what's

460
00:18:43,440 --> 00:18:47,820
going on so inside our open jail I'm

461
00:18:46,109 --> 00:18:50,819
just gonna turn that lighting off for

462
00:18:47,819 --> 00:18:53,579
now and I think we want this on a switch

463
00:18:50,819 --> 00:18:55,798
I've been a bit lazy and have not been

464
00:18:53,579 --> 00:18:57,898
putting it on a switch here I've just

465
00:18:55,798 --> 00:19:01,019
been kind of doing it this way which is

466
00:18:57,898 --> 00:19:04,079
not particularly good but if you take a

467
00:19:01,019 --> 00:19:08,038
look at at at what this produce is if we

468
00:19:04,079 --> 00:19:14,879
turn the lighting off and run we should

469
00:19:08,038 --> 00:19:17,460
get you know oops one more time what we

470
00:19:14,880 --> 00:19:19,830
should get is something which which

471
00:19:17,460 --> 00:19:21,450
doesn't actually show any of that

472
00:19:19,829 --> 00:19:23,788
lighting it just kind of is a bright you

473
00:19:21,450 --> 00:19:26,220
know full bright thing and when we

474
00:19:23,788 --> 00:19:28,710
rotate around here what you can see is

475
00:19:26,220 --> 00:19:31,558
you should see all of the lines that we

476
00:19:28,710 --> 00:19:34,590
drew that that we're casting lines and

477
00:19:31,558 --> 00:19:36,690
what happened to them right now if we

478
00:19:34,589 --> 00:19:38,908
look and I don't know if we really can

479
00:19:36,690 --> 00:19:42,330
but if we look in here I'm hoping what

480
00:19:38,909 --> 00:19:44,940
we will see yeah um so if you look at

481
00:19:42,329 --> 00:19:47,158
what happens here it kind of looks like

482
00:19:44,940 --> 00:19:48,690
these are correct to a certain extent I

483
00:19:47,159 --> 00:19:50,700
mean some of them at least look correct

484
00:19:48,690 --> 00:19:53,370
because if you look at all of these

485
00:19:50,700 --> 00:19:55,440
lines all of these lines were casting up

486
00:19:53,369 --> 00:19:56,729
and they do look like they stop right

487
00:19:55,440 --> 00:19:58,320
where they would have hit something

488
00:19:56,730 --> 00:19:59,548
right like there's right where at that

489
00:19:58,319 --> 00:20:00,960
thing stops you can see it doesn't go

490
00:19:59,548 --> 00:20:02,460
through it at all right

491
00:20:00,960 --> 00:20:06,630
so all of these

492
00:20:02,460 --> 00:20:08,490
autum pieces Rick all of that you know

493
00:20:06,630 --> 00:20:10,470
those all said look we couldn't you know

494
00:20:08,490 --> 00:20:13,289
we weren't able to hit the thing you

495
00:20:10,470 --> 00:20:15,779
know we didn't Minh able to get to the

496
00:20:13,289 --> 00:20:17,339
light source so all of this shadowing

497
00:20:15,779 --> 00:20:19,200
that you would expect to happen kind of

498
00:20:17,339 --> 00:20:20,879
all the way up through here does look

499
00:20:19,200 --> 00:20:22,740
like it is in fact happening and

500
00:20:20,880 --> 00:20:25,800
furthermore if you look outside here

501
00:20:22,740 --> 00:20:27,750
right you can see that the shadowing

502
00:20:25,799 --> 00:20:31,289
there also appears to be working right

503
00:20:27,750 --> 00:20:34,680
those appear to be stopping right about

504
00:20:31,289 --> 00:20:37,619
at the edge right so all of those appear

505
00:20:34,680 --> 00:20:39,269
to be working now there are some things

506
00:20:37,619 --> 00:20:42,209
at least you know from what I'm seeing

507
00:20:39,269 --> 00:20:45,539
here that look like you know they're not

508
00:20:42,210 --> 00:20:47,970
working so for example right I don't

509
00:20:45,539 --> 00:20:50,549
know exactly where this light actually

510
00:20:47,970 --> 00:20:52,140
is but you know if you look at where all

511
00:20:50,549 --> 00:20:53,669
these things are pointed at looks like

512
00:20:52,140 --> 00:20:55,050
it's right there and that comports with

513
00:20:53,670 --> 00:20:58,320
what we set it to we set it to where

514
00:20:55,049 --> 00:21:01,009
that hero was plus a little bit so it's

515
00:20:58,319 --> 00:21:05,909
like just floating over the hero's head

516
00:21:01,009 --> 00:21:09,450
so if I look you know and I I say what's

517
00:21:05,910 --> 00:21:12,509
going on here you look at these rays and

518
00:21:09,450 --> 00:21:15,350
you're like what did they hit you know I

519
00:21:12,509 --> 00:21:18,259
mean I don't see anything

520
00:21:15,349 --> 00:21:22,049
these lines are terminating in midair

521
00:21:18,259 --> 00:21:25,440
and I don't know what they would be

522
00:21:22,049 --> 00:21:29,129
terminating what the termination is

523
00:21:25,440 --> 00:21:31,259
actually resulting from it looks like

524
00:21:29,130 --> 00:21:34,290
there's sort of a phantom thing here

525
00:21:31,259 --> 00:21:36,329
that they're hitting and furthermore

526
00:21:34,289 --> 00:21:39,539
that phantom thing doesn't even really

527
00:21:36,329 --> 00:21:43,079
look particularly obvious what the shape

528
00:21:39,539 --> 00:21:46,799
of it is almost I and similarly if you

529
00:21:43,079 --> 00:21:49,019
look at like you know some of these

530
00:21:46,799 --> 00:21:52,980
other ones here like I don't know what

531
00:21:49,019 --> 00:21:55,769
that is happening they're just very

532
00:21:52,980 --> 00:21:58,860
strange and so you know I mean I could

533
00:21:55,769 --> 00:22:01,740
convince myself if I was you know trying

534
00:21:58,859 --> 00:22:03,539
to make excuses that maybe like the

535
00:22:01,740 --> 00:22:05,789
somehow we put in a collision volume for

536
00:22:03,539 --> 00:22:08,789
like the lamp and it got output as a

537
00:22:05,789 --> 00:22:09,509
blocker or something but and that

538
00:22:08,789 --> 00:22:12,750
doesn't sound right

539
00:22:09,509 --> 00:22:14,759
and as far as I recall only actual

540
00:22:12,750 --> 00:22:15,900
visible cubes we're getting sent down as

541
00:22:14,759 --> 00:22:19,829
blocker is the last

542
00:22:15,900 --> 00:22:23,130
I'm I checked so to me this says our

543
00:22:19,829 --> 00:22:24,869
rate caster is probably busted and what

544
00:22:23,130 --> 00:22:28,140
we should probably do before we go any

545
00:22:24,869 --> 00:22:31,919
further is take a look at what's going

546
00:22:28,140 --> 00:22:35,430
on here and try to figure out why our

547
00:22:31,920 --> 00:22:38,490
rate caster is so messed up now there's

548
00:22:35,430 --> 00:22:40,230
good news and bad news here I think the

549
00:22:38,490 --> 00:22:43,620
good news is if you look at this rate

550
00:22:40,230 --> 00:22:47,130
casting you know maybe let me go in and

551
00:22:43,619 --> 00:22:49,769
do a slight change in fact I can just

552
00:22:47,130 --> 00:22:51,780
leave it running um let me go ahead and

553
00:22:49,769 --> 00:22:55,799
say when we're doing this casting here

554
00:22:51,779 --> 00:22:59,549
let me cast all the lines really quickly

555
00:22:55,799 --> 00:23:02,909
here and just change the color so I'm

556
00:22:59,549 --> 00:23:07,680
gonna do a line color here and I'm gonna

557
00:23:02,910 --> 00:23:13,170
say that the line color is gonna be you

558
00:23:07,680 --> 00:23:15,120
know this or something else okay I

559
00:23:13,170 --> 00:23:16,920
probably can't do that I'm gonna say the

560
00:23:15,119 --> 00:23:19,199
line color is this and then I'm gonna

561
00:23:16,920 --> 00:23:21,710
draw it always right so what I'm going

562
00:23:19,200 --> 00:23:27,059
to do is I'm going to take this this hit

563
00:23:21,710 --> 00:23:28,259
information here and I'm going to change

564
00:23:27,059 --> 00:23:30,269
this so that we're actually just doing

565
00:23:28,259 --> 00:23:32,849
an f1 so we're always gonna draw the

566
00:23:30,269 --> 00:23:34,619
lines and then the line color is gonna

567
00:23:32,849 --> 00:23:36,480
be based on whether or not you hit

568
00:23:34,619 --> 00:23:40,349
instead just so I can see all of the

569
00:23:36,480 --> 00:23:42,329
lines now so here's the line color it's

570
00:23:40,349 --> 00:23:44,969
going to be set to to this and then if

571
00:23:42,329 --> 00:23:46,769
you hit I'm gonna set something else so

572
00:23:44,970 --> 00:23:50,059
I'm just gonna say like in fact maybe

573
00:23:46,769 --> 00:23:50,059
what I'll do is I'll just do it this way

574
00:23:54,200 --> 00:24:01,080
so we will get like a yellow line in the

575
00:23:57,869 --> 00:24:03,179
cases where we hit something and we'll

576
00:24:01,079 --> 00:24:07,139
get a black line in the cases where we

577
00:24:03,180 --> 00:24:10,289
didn't right and so here you can see

578
00:24:07,140 --> 00:24:13,259
perhaps a more interesting version of

579
00:24:10,289 --> 00:24:18,059
the Ray casting result you can see very

580
00:24:13,259 --> 00:24:21,779
clearly where the actual light is now

581
00:24:18,059 --> 00:24:26,119
right and you can see that it's not the

582
00:24:21,779 --> 00:24:28,889
world's worst solution in some ways

583
00:24:26,119 --> 00:24:29,489
because some of them look very accurate

584
00:24:28,890 --> 00:24:31,590
like

585
00:24:29,490 --> 00:24:33,359
that looks like a pretty accurate hit

586
00:24:31,589 --> 00:24:38,789
test name well actually doesn't know I

587
00:24:33,359 --> 00:24:40,500
think about it that does but if you look

588
00:24:38,789 --> 00:24:43,529
like there's a bunch of sort of in

589
00:24:40,500 --> 00:24:45,720
Congress things happening in the ones

590
00:24:43,529 --> 00:24:48,149
that don't hit as well because for

591
00:24:45,720 --> 00:24:52,259
example you know to my eye I'm looking

592
00:24:48,150 --> 00:24:53,759
at that that stuff in there right some

593
00:24:52,259 --> 00:24:56,190
of these things that are protruding and

594
00:24:53,759 --> 00:25:01,049
if I go inside here you can kind of see

595
00:24:56,190 --> 00:25:05,910
like alright that that does look like

596
00:25:01,049 --> 00:25:07,769
it's hitting they're all stopping like

597
00:25:05,910 --> 00:25:09,600
right at the thing which is even weirder

598
00:25:07,769 --> 00:25:12,000
because that's sort of almost me that

599
00:25:09,599 --> 00:25:13,829
almost sounds like this this part right

600
00:25:12,000 --> 00:25:17,759
here is wrong which maybe it is like

601
00:25:13,829 --> 00:25:20,819
this tear a less than light distance I'm

602
00:25:17,759 --> 00:25:23,849
wondering if that's somehow incorrect

603
00:25:20,819 --> 00:25:26,759
meaning the Ray caster is maybe actually

604
00:25:23,849 --> 00:25:28,829
producing somewhat correct results in

605
00:25:26,759 --> 00:25:30,359
certain cases that we are then saying

606
00:25:28,829 --> 00:25:32,449
aren't hitting you know so you see

607
00:25:30,359 --> 00:25:36,509
there's just a lot going wrong there

608
00:25:32,450 --> 00:25:41,069
it's not good so let's start by going

609
00:25:36,509 --> 00:25:42,929
into ray cast and seeing effectively

610
00:25:41,069 --> 00:25:45,029
what's going on here and what we may

611
00:25:42,929 --> 00:25:48,570
want to do is we may want to sort of

612
00:25:45,029 --> 00:25:50,399
extend out our notion of how we're

613
00:25:48,569 --> 00:25:52,379
drawing these debug lines we may want to

614
00:25:50,400 --> 00:25:56,910
draw these debug lines like in the

615
00:25:52,380 --> 00:25:58,890
actual ray caster itself as well just or

616
00:25:56,910 --> 00:26:00,808
you know output some additional debug

617
00:25:58,890 --> 00:26:02,190
information just while we're debugging

618
00:26:00,808 --> 00:26:06,200
this to make sure we sort of have a

619
00:26:02,190 --> 00:26:06,200
rough idea of what's going on in here

620
00:26:08,900 --> 00:26:13,870
all right

621
00:26:11,440 --> 00:26:18,160
so we're looking here how does this ray

622
00:26:13,869 --> 00:26:19,750
caster work well we start by you know

623
00:26:18,160 --> 00:26:21,790
doing some statistics you can see in

624
00:26:19,750 --> 00:26:22,900
here we count some things we don't

625
00:26:21,789 --> 00:26:24,369
really care about that right now because

626
00:26:22,900 --> 00:26:27,580
we're not looking at performance so we

627
00:26:24,369 --> 00:26:29,049
can pretty much ignore that code you can

628
00:26:27,579 --> 00:26:32,079
see that the way the Ray caster works

629
00:26:29,049 --> 00:26:34,389
it's got a stack this stack is four

630
00:26:32,079 --> 00:26:36,549
boxes that we're going to collide

631
00:26:34,390 --> 00:26:38,680
against and the Box stack is basically

632
00:26:36,549 --> 00:26:42,730
because we have what amounts to a

633
00:26:38,680 --> 00:26:46,900
hierarchy sort of a bounding volume

634
00:26:42,730 --> 00:26:50,440
hierarchy right our BBH that is based on

635
00:26:46,900 --> 00:26:52,750
like you know rectangular solids and

636
00:26:50,440 --> 00:26:55,029
what we do is we start by just putting

637
00:26:52,750 --> 00:26:58,630
the root box which contains all our

638
00:26:55,029 --> 00:27:01,119
boxes onto the box stack and then we

639
00:26:58,630 --> 00:27:04,630
just kind of traverse through it ray

640
00:27:01,119 --> 00:27:07,299
casting going down as we as we go so in

641
00:27:04,630 --> 00:27:09,850
order to initiate our ray cast we start

642
00:27:07,299 --> 00:27:14,109
by saying alright the tier a is equal to

643
00:27:09,849 --> 00:27:15,909
the maximum T value you can possibly

644
00:27:14,109 --> 00:27:17,679
have so that's like saying look let's

645
00:27:15,910 --> 00:27:19,690
assume we hit nothing we just travel

646
00:27:17,680 --> 00:27:21,759
infinitely far along the Ray that we're

647
00:27:19,690 --> 00:27:23,620
given this is the direction this is the

648
00:27:21,759 --> 00:27:25,660
starting point so we're starting here

649
00:27:23,619 --> 00:27:27,579
we're going in that direction we start

650
00:27:25,660 --> 00:27:31,269
by assuming we can go infinitely far

651
00:27:27,579 --> 00:27:33,579
just as far as we want we then say all

652
00:27:31,269 --> 00:27:35,319
right let's load some constants we're

653
00:27:33,579 --> 00:27:36,699
gonna need for some testing I don't know

654
00:27:35,319 --> 00:27:38,349
if those are still needed anymore we can

655
00:27:36,700 --> 00:27:39,580
check to see in fact you know what I

656
00:27:38,349 --> 00:27:41,559
could check right now to see if they're

657
00:27:39,579 --> 00:27:43,210
needed because I don't know we changed a

658
00:27:41,559 --> 00:27:44,649
little bit of house routine works so we

659
00:27:43,210 --> 00:27:46,150
may not need the constants anymore I'm

660
00:27:44,650 --> 00:27:54,759
not sure so I may have def the map just

661
00:27:46,150 --> 00:27:56,050
to see which ones were used here so it

662
00:27:54,759 --> 00:27:57,220
looks like we don't use negative one

663
00:27:56,049 --> 00:28:02,980
anymore but it does look like but you

664
00:27:57,220 --> 00:28:07,269
use one so we then go to let me just

665
00:28:02,980 --> 00:28:10,329
make sure that's true to just want to so

666
00:28:07,269 --> 00:28:12,279
T close enough what T close enough was

667
00:28:10,329 --> 00:28:13,809
and I think we sort of turned this off

668
00:28:12,279 --> 00:28:16,779
and we may want to turn it off again

669
00:28:13,809 --> 00:28:20,769
just for checking but there is

670
00:28:16,779 --> 00:28:23,649
effectively a thing that we would do to

671
00:28:20,769 --> 00:28:25,839
Yeah right here where basically what we

672
00:28:23,650 --> 00:28:30,250
do is we if we decided that this thing

673
00:28:25,839 --> 00:28:33,220
was like too far away for us to care so

674
00:28:30,250 --> 00:28:38,309
you know once we cast array more than 10

675
00:28:33,220 --> 00:28:40,809
metres long we don't go down the

676
00:28:38,309 --> 00:28:42,460
bounding volume hierarchy anymore

677
00:28:40,809 --> 00:28:44,970
because we just assumed look this thing

678
00:28:42,460 --> 00:28:47,829
is too far away for us to really care

679
00:28:44,970 --> 00:28:50,789
and so what we'll probably do is set

680
00:28:47,829 --> 00:28:53,919
this value to something that's sort of a

681
00:28:50,789 --> 00:28:55,269
similar to our lighting fall-off rate so

682
00:28:53,920 --> 00:28:58,860
when we do our lighting like whatever

683
00:28:55,269 --> 00:29:01,509
the actual fall-off is for our lining we

684
00:28:58,859 --> 00:29:03,039
will set that so that at some point we

685
00:29:01,509 --> 00:29:04,720
just don't care about the shadows very

686
00:29:03,039 --> 00:29:07,149
much right we don't care about the light

687
00:29:04,720 --> 00:29:08,380
motion around for things that are too

688
00:29:07,150 --> 00:29:10,090
far away because the amount of light

689
00:29:08,380 --> 00:29:13,750
they're able to contribute just isn't

690
00:29:10,089 --> 00:29:16,359
big enough right so then here we're

691
00:29:13,750 --> 00:29:18,069
going to say look we are going to pre

692
00:29:16,359 --> 00:29:19,569
compute what the inverse ray Direction

693
00:29:18,069 --> 00:29:21,309
is that's going to be used for our box

694
00:29:19,569 --> 00:29:25,240
collision detecting and then we're just

695
00:29:21,309 --> 00:29:27,039
gonna go ahead and get started so we

696
00:29:25,240 --> 00:29:29,470
loop over our bounding volume hierarchy

697
00:29:27,039 --> 00:29:31,000
by saying while there are still boxes on

698
00:29:29,470 --> 00:29:34,029
the stack that we are supposed to be

699
00:29:31,000 --> 00:29:39,069
colliding against we will pull the first

700
00:29:34,029 --> 00:29:42,250
box off of the stack right like so we

701
00:29:39,069 --> 00:29:45,789
will loop over all of the children

702
00:29:42,250 --> 00:29:49,690
inside that box right so like these are

703
00:29:45,789 --> 00:29:52,359
the things that that box contains and we

704
00:29:49,690 --> 00:29:55,000
will then do a collision test against

705
00:29:52,359 --> 00:29:57,309
the box in order to do that we load the

706
00:29:55,000 --> 00:30:00,519
boxes position and mind you all of these

707
00:29:57,309 --> 00:30:02,289
are being done four at a time right and

708
00:30:00,519 --> 00:30:07,299
the way they're being done four at a

709
00:30:02,289 --> 00:30:10,480
time is we are testing for different

710
00:30:07,299 --> 00:30:13,149
light rays at the same time right so

711
00:30:10,480 --> 00:30:14,890
when we say we have a ray origin in the

712
00:30:13,150 --> 00:30:17,950
Ray direction what we're actually saying

713
00:30:14,890 --> 00:30:20,130
is oh actually we're casting for arrays

714
00:30:17,950 --> 00:30:26,170
hopefully roughly in the same direction

715
00:30:20,130 --> 00:30:27,760
and we're going from there all right so

716
00:30:26,170 --> 00:30:28,930
when we come in here we then say and by

717
00:30:27,759 --> 00:30:30,879
the way in our test case we're only

718
00:30:28,930 --> 00:30:33,440
casting one because you can see in here

719
00:30:30,880 --> 00:30:35,930
we just load up the exact same thing

720
00:30:33,440 --> 00:30:37,580
for so we're only casting one actual ray

721
00:30:35,930 --> 00:30:39,019
in here but in the normal case we would

722
00:30:37,579 --> 00:30:41,149
cast four at a time then that's for

723
00:30:39,019 --> 00:30:44,869
speed that's to leverage the semi

724
00:30:41,150 --> 00:30:47,269
hardware so we then compute the minimum

725
00:30:44,869 --> 00:30:52,549
and maximum box locations by adding the

726
00:30:47,269 --> 00:30:56,119
radius of the box right to produce the

727
00:30:52,549 --> 00:30:59,509
minimum and maximum corners we then take

728
00:30:56,119 --> 00:31:01,789
the inverse ray D we basically are

729
00:30:59,509 --> 00:31:03,980
computing the minimum box the minimum

730
00:31:01,789 --> 00:31:07,639
time to hit the box and the maximum time

731
00:31:03,980 --> 00:31:09,410
to hit the box or I should say we're

732
00:31:07,640 --> 00:31:11,120
taking the time to hit the maximum

733
00:31:09,410 --> 00:31:12,650
corner of the box and the time to hit

734
00:31:11,119 --> 00:31:14,919
the minimum corner of the box in each

735
00:31:12,650 --> 00:31:17,240
dimension you know in each dimension

736
00:31:14,920 --> 00:31:21,050
we're computing those by using the

737
00:31:17,240 --> 00:31:24,559
inverse of the Ray Direction here right

738
00:31:21,049 --> 00:31:25,490
so one over the Raider and again the

739
00:31:24,559 --> 00:31:28,159
reason for that is we're trying to do a

740
00:31:25,490 --> 00:31:29,960
fast box collision so we're trying to

741
00:31:28,160 --> 00:31:34,400
avoid doing divides here so we pre

742
00:31:29,960 --> 00:31:36,259
divide that Ray direction and we do the

743
00:31:34,400 --> 00:31:38,300
Hadamard so we just do the you know

744
00:31:36,259 --> 00:31:40,759
vector Hadamard product could get what

745
00:31:38,299 --> 00:31:43,789
we think those T's will be we then take

746
00:31:40,759 --> 00:31:46,519
whichever one of those is the best right

747
00:31:43,789 --> 00:31:48,889
so the one that we would hit first

748
00:31:46,519 --> 00:31:51,500
and that's done by a series of minimum

749
00:31:48,890 --> 00:31:53,240
min and Max steps so we say the minimum

750
00:31:51,500 --> 00:31:54,829
is going to go through here so we take

751
00:31:53,240 --> 00:31:57,079
the T box Minh and T box and we take the

752
00:31:54,829 --> 00:31:58,569
minimum of those maybe the maximum by

753
00:31:57,079 --> 00:32:02,359
doing the P box

754
00:31:58,569 --> 00:32:04,189
min and Max maximum and then we take the

755
00:32:02,359 --> 00:32:07,069
T min and the T max which is the

756
00:32:04,190 --> 00:32:08,480
earliest we hit in the latest we hit by

757
00:32:07,069 --> 00:32:13,220
again taking the maximum of the

758
00:32:08,480 --> 00:32:15,230
components of those right and then when

759
00:32:13,220 --> 00:32:19,850
we're done and we look at like what the

760
00:32:15,230 --> 00:32:25,549
maximum side is we just see look when we

761
00:32:19,849 --> 00:32:27,949
egg you know when we were to hit the if

762
00:32:25,549 --> 00:32:31,159
you think about what this is doing it's

763
00:32:27,950 --> 00:32:33,350
saying we have array we have two T

764
00:32:31,160 --> 00:32:35,509
values one where it enters the box and

765
00:32:33,349 --> 00:32:40,309
one where it exits the box in a sense

766
00:32:35,509 --> 00:32:44,269
right if the place where we exited the

767
00:32:40,309 --> 00:32:46,929
box is less than zero that means that

768
00:32:44,269 --> 00:32:49,960
the entire box is behind where

769
00:32:46,930 --> 00:32:51,759
asking from so we would not that's what

770
00:32:49,960 --> 00:32:55,779
this any true is here for we would not

771
00:32:51,759 --> 00:32:58,359
want to consider this box as something

772
00:32:55,779 --> 00:33:00,549
to rip something that can produce a

773
00:32:58,359 --> 00:33:02,679
usable collision because it's behind us

774
00:33:00,549 --> 00:33:05,649
and the reason that we can have that

775
00:33:02,680 --> 00:33:07,600
happen is because math doesn't really

776
00:33:05,650 --> 00:33:10,030
work particularly well on things that

777
00:33:07,599 --> 00:33:15,219
only go in one direction not the band

778
00:33:10,029 --> 00:33:16,869
but actually just in one direction and

779
00:33:15,220 --> 00:33:18,160
to be honest I bet the band One

780
00:33:16,869 --> 00:33:21,939
Direction is not very good at math

781
00:33:18,160 --> 00:33:23,680
either but in this case what we're

782
00:33:21,940 --> 00:33:25,509
saying is look we need to know the T

783
00:33:23,680 --> 00:33:26,620
values along this line and then what

784
00:33:25,509 --> 00:33:28,059
we're doing is saying if they're less

785
00:33:26,619 --> 00:33:29,649
than zero then they're on then they're

786
00:33:28,059 --> 00:33:31,119
behind us because we're talking about

787
00:33:29,650 --> 00:33:31,600
only one direction so that's what's

788
00:33:31,119 --> 00:33:34,389
happening here

789
00:33:31,599 --> 00:33:40,109
so this is the first test that says okay

790
00:33:34,390 --> 00:33:42,550
we don't actually want to know about

791
00:33:40,109 --> 00:33:44,919
collisions that happen that aren't even

792
00:33:42,549 --> 00:33:45,579
the direction we're looking we then say

793
00:33:44,920 --> 00:33:47,740
all right

794
00:33:45,579 --> 00:33:51,069
now what we need to do is say are we

795
00:33:47,740 --> 00:33:54,180
inside this box and what we're trying to

796
00:33:51,069 --> 00:33:57,099
do here is say look if anybody who was

797
00:33:54,180 --> 00:33:59,740
correctly on the correct side now the

798
00:33:57,099 --> 00:34:01,029
you might say what's this for the reason

799
00:33:59,740 --> 00:34:03,190
we have to do these extra checks is cuz

800
00:34:01,029 --> 00:34:06,279
member doing four raised at a time so

801
00:34:03,190 --> 00:34:08,320
max pass may have resulted in true for

802
00:34:06,279 --> 00:34:10,059
only one of those raise and the other

803
00:34:08,320 --> 00:34:11,820
three may have been false so what we

804
00:34:10,059 --> 00:34:14,230
need to do is say now are we inside

805
00:34:11,820 --> 00:34:17,050
anybody and the way we would know if we

806
00:34:14,230 --> 00:34:20,829
were inside is did anybody pass on team

807
00:34:17,050 --> 00:34:24,640
min right we're team in was behind us

808
00:34:20,829 --> 00:34:26,650
but past unmet on T max so T Max is in

809
00:34:24,639 --> 00:34:28,539
front of us that would bracket our

810
00:34:26,650 --> 00:34:31,240
starting location so the origin of the

811
00:34:28,539 --> 00:34:32,230
Ray would be inside the box that's what

812
00:34:31,239 --> 00:34:33,729
this is saying and that's why it's

813
00:34:32,230 --> 00:34:37,900
called T inside right pretty well

814
00:34:33,730 --> 00:34:40,420
labeled good for us we then look at T

815
00:34:37,900 --> 00:34:43,990
valid and what T valid says is all right

816
00:34:40,420 --> 00:34:46,269
if T min is ahead of us and T min is

817
00:34:43,989 --> 00:34:49,929
less than T Max so it means we're not in

818
00:34:46,269 --> 00:34:51,400
some weird like inverted space where you

819
00:34:49,929 --> 00:34:52,629
know we didn't really register a proper

820
00:34:51,400 --> 00:34:54,490
collision or something like this because

821
00:34:52,630 --> 00:34:56,079
you know one side hit something in the

822
00:34:54,489 --> 00:34:56,309
other side never hit the other thing or

823
00:34:56,079 --> 00:34:58,469
who

824
00:34:56,309 --> 00:34:59,880
what so if we're actually in the case

825
00:34:58,469 --> 00:35:01,889
where like the team is less than the

826
00:34:59,880 --> 00:35:06,360
team acts and the team in is is greater

827
00:35:01,889 --> 00:35:08,639
right than zero this is a real hit

828
00:35:06,360 --> 00:35:10,680
this means we looked at a direction we

829
00:35:08,639 --> 00:35:13,799
did hit something and we now have the

830
00:35:10,679 --> 00:35:16,169
p-value in team in of what the hit

831
00:35:13,800 --> 00:35:19,590
actually was so at team in we hit a box

832
00:35:16,170 --> 00:35:21,960
right the mask is just something that's

833
00:35:19,590 --> 00:35:24,660
telling us whether or not this

834
00:35:21,960 --> 00:35:26,460
particular kit that we found if we found

835
00:35:24,659 --> 00:35:29,190
one right that's why we're anding with T

836
00:35:26,460 --> 00:35:31,920
valid the mask is just telling us for

837
00:35:29,190 --> 00:35:34,260
this particular hit are any of them less

838
00:35:31,920 --> 00:35:36,599
than the actual Rea we found so far

839
00:35:34,260 --> 00:35:39,330
because remember we're gonna test tons

840
00:35:36,599 --> 00:35:41,699
of boxes T ray starts out at f3 to max

841
00:35:39,329 --> 00:35:44,250
so the first time we find a valid hit

842
00:35:41,699 --> 00:35:47,159
that will actually you know be one we

843
00:35:44,250 --> 00:35:49,079
take but then every hit after that we

844
00:35:47,159 --> 00:35:50,460
only want to accept a team in that's

845
00:35:49,079 --> 00:35:52,019
less than the hit we already found

846
00:35:50,460 --> 00:35:53,639
because otherwise we'll actually be

847
00:35:52,019 --> 00:35:56,099
moving our hit further away

848
00:35:53,639 --> 00:35:58,679
right but the closest hit is the one

849
00:35:56,099 --> 00:36:01,039
that stops the Ray so this test here is

850
00:35:58,679 --> 00:36:04,230
used to figure out which one actually

851
00:36:01,039 --> 00:36:06,239
which hits are actually new valid hits

852
00:36:04,230 --> 00:36:08,659
and which ones are hits that happen past

853
00:36:06,239 --> 00:36:10,919
the hit closest hit we already have

854
00:36:08,659 --> 00:36:13,920
close enough again is just saying look

855
00:36:10,920 --> 00:36:16,130
if we have a new closest hit that's

856
00:36:13,920 --> 00:36:18,599
closer than a hit we've already had and

857
00:36:16,130 --> 00:36:19,829
it's close enough that we would descend

858
00:36:18,599 --> 00:36:24,179
through the hierarchy then we're gonna

859
00:36:19,829 --> 00:36:27,059
want to descend right and that's what we

860
00:36:24,179 --> 00:36:32,599
do here box child kind of saying okay

861
00:36:27,059 --> 00:36:38,389
look if anyone is inside this box right

862
00:36:32,599 --> 00:36:41,819
so we're a casted from insider right or

863
00:36:38,389 --> 00:36:44,190
any buddy was close enough hit that it's

864
00:36:41,820 --> 00:36:45,539
probably within our best it's probably

865
00:36:44,190 --> 00:36:47,070
in our best interest to descend because

866
00:36:45,539 --> 00:36:48,599
this box is within our threshold for

867
00:36:47,070 --> 00:36:53,610
where we want to start you know where we

868
00:36:48,599 --> 00:36:55,489
want to keep looking right then we go

869
00:36:53,610 --> 00:36:58,500
ahead and continue down the hierarchy

870
00:36:55,489 --> 00:37:01,019
now to be honest I don't think this is a

871
00:36:58,500 --> 00:37:03,059
pretty this is not probably the metric

872
00:37:01,019 --> 00:37:04,800
that we want the reason I don't think

873
00:37:03,059 --> 00:37:06,299
this metric is the metric we want is

874
00:37:04,800 --> 00:37:10,680
because T close enough should probably

875
00:37:06,300 --> 00:37:12,990
be based on how big the box is

876
00:37:10,679 --> 00:37:16,049
so we probably want to go down the

877
00:37:12,989 --> 00:37:20,579
hierarchy based not on just a fixed

878
00:37:16,050 --> 00:37:23,160
value but on how how much how high up

879
00:37:20,579 --> 00:37:52,500
the hierarchy this box was so I would

880
00:37:23,159 --> 00:37:55,619
probably say something like and so what

881
00:37:52,500 --> 00:37:56,579
this is saying is essentially when we do

882
00:37:55,619 --> 00:37:58,889
this raycast

883
00:37:56,579 --> 00:38:00,630
if we're right next to something

884
00:37:58,889 --> 00:38:02,279
obviously we want to traverse into its

885
00:38:00,630 --> 00:38:04,670
children and see what the specific hit

886
00:38:02,280 --> 00:38:08,820
is but if we're far away from it well

887
00:38:04,670 --> 00:38:10,980
how detailed was this box if this is a

888
00:38:08,820 --> 00:38:13,460
fairly detailed box meaning we've gone

889
00:38:10,980 --> 00:38:18,300
down the hierarchy like one or two steps

890
00:38:13,460 --> 00:38:18,720
if we're you know only maybe 10 units

891
00:38:18,300 --> 00:38:20,820
out

892
00:38:18,719 --> 00:38:23,519
we should probably still traverse it if

893
00:38:20,820 --> 00:38:26,100
we're 20 units out maybe we would right

894
00:38:23,519 --> 00:38:28,139
and then as we go down further if we're

895
00:38:26,099 --> 00:38:30,809
like five steps down the hierarchy maybe

896
00:38:28,139 --> 00:38:32,969
now you know even 30 steps out we

897
00:38:30,809 --> 00:38:35,519
wouldn't traverse it right so I think we

898
00:38:32,969 --> 00:38:38,099
want that you know that level of detail

899
00:38:35,519 --> 00:38:41,009
parameter to be based on where we are in

900
00:38:38,099 --> 00:38:43,739
the hierarchy so that we open up boxes

901
00:38:41,010 --> 00:38:46,050
and look at them more or less as we get

902
00:38:43,739 --> 00:38:48,269
further away more continuously and not

903
00:38:46,050 --> 00:38:49,980
just like all right everything within 10

904
00:38:48,269 --> 00:38:51,509
units gets done exactly and everything

905
00:38:49,980 --> 00:38:57,000
outside 10 units doesn't get done at all

906
00:38:51,510 --> 00:38:59,430
it's not a very good sort of it's not a

907
00:38:57,000 --> 00:39:02,039
very good log level of detailed policy

908
00:38:59,429 --> 00:39:06,779
to me so I think we want to look at that

909
00:39:02,039 --> 00:39:08,579
but that is not probably related to our

910
00:39:06,780 --> 00:39:10,170
problem here because unless I'm

911
00:39:08,579 --> 00:39:12,360
misinterpreting the meaning of 10 units

912
00:39:10,170 --> 00:39:13,680
here and there's some kind of scale that

913
00:39:12,360 --> 00:39:16,349
I'm not thinking about that's actually

914
00:39:13,679 --> 00:39:18,329
in play 10 meters is way longer than

915
00:39:16,349 --> 00:39:22,170
those erroneous ones we were already

916
00:39:18,329 --> 00:39:23,929
looking at which means that our bug is

917
00:39:22,170 --> 00:39:25,970
not really related to this

918
00:39:23,929 --> 00:39:27,500
we have some other bug if I'm

919
00:39:25,969 --> 00:39:29,059
interpreting that right if I'm not then

920
00:39:27,500 --> 00:39:32,449
that could very well be implicated in

921
00:39:29,059 --> 00:39:34,159
our bug but so then we look and say if

922
00:39:32,449 --> 00:39:37,789
we're going to traverse you know we do

923
00:39:34,159 --> 00:39:39,889
right but if we're not going to traverse

924
00:39:37,789 --> 00:39:41,480
then what we need to do is see if any of

925
00:39:39,889 --> 00:39:45,650
these rays actually want to be recorded

926
00:39:41,480 --> 00:39:48,590
if any of the Rays actually did hit then

927
00:39:45,650 --> 00:39:53,139
we're in good shape right we we kind of

928
00:39:48,590 --> 00:39:53,140
know that we want to want to keep going

929
00:39:59,920 --> 00:40:05,960
and what we want to do here say all

930
00:40:01,940 --> 00:40:09,019
right we're gonna accept all of the new

931
00:40:05,960 --> 00:40:10,699
team ins that that passed our mask test

932
00:40:09,019 --> 00:40:12,530
so the valid hits that were closer than

933
00:40:10,699 --> 00:40:14,779
hits we already have we are going to

934
00:40:12,530 --> 00:40:17,269
accept them we're also going to record

935
00:40:14,780 --> 00:40:19,970
the center radius color and emission of

936
00:40:17,269 --> 00:40:26,599
the box in that case so that later we

937
00:40:19,969 --> 00:40:27,619
can do our actual work on it now again

938
00:40:26,599 --> 00:40:29,509
one of the problems here is we're not

939
00:40:27,619 --> 00:40:30,949
really recording them the normal and

940
00:40:29,510 --> 00:40:32,750
that was the problem that we had before

941
00:40:30,949 --> 00:40:35,779
I'm not sure how we're gonna deal with

942
00:40:32,750 --> 00:40:37,849
that to be honest in the future we may

943
00:40:35,780 --> 00:40:42,040
just not where it's mine do I not have

944
00:40:37,849 --> 00:40:47,029
tissues here oh tissue fail all right

945
00:40:42,039 --> 00:40:49,369
it's very sad before I forget I'm gonna

946
00:40:47,030 --> 00:40:57,280
make myself a note streaming setup needs

947
00:40:49,369 --> 00:40:57,279
tissues note to self

948
00:40:58,000 --> 00:41:04,010
good thing it's not allergy season err

949
00:41:00,079 --> 00:41:10,759
that would have been a real problem all

950
00:41:04,010 --> 00:41:12,560
right there we go and so what I'm more

951
00:41:10,760 --> 00:41:15,230
or less doing here is just saying look

952
00:41:12,559 --> 00:41:17,750
take the parts take for all our four

953
00:41:15,230 --> 00:41:20,630
arrays that we're casting accept anybody

954
00:41:17,750 --> 00:41:23,059
who is the new closest hit and you can

955
00:41:20,630 --> 00:41:24,170
see us kind of doing that there and what

956
00:41:23,059 --> 00:41:25,389
we're gonna do about the normals in the

957
00:41:24,170 --> 00:41:27,909
future

958
00:41:25,389 --> 00:41:30,129
I don't know we store those Center and

959
00:41:27,909 --> 00:41:32,469
radius so we can recompute them but it's

960
00:41:30,130 --> 00:41:36,220
kind of hard to recompute and you know

961
00:41:32,469 --> 00:41:37,989
we'll see uh previously in the code we

962
00:41:36,219 --> 00:41:39,039
had how to think here and you could see

963
00:41:37,989 --> 00:41:41,559
me putting it to do in there where we

964
00:41:39,039 --> 00:41:44,710
said look if all if everything in the

965
00:41:41,559 --> 00:41:48,400
mask is true right and what that means

966
00:41:44,710 --> 00:41:53,579
is that this particular hit hit all four

967
00:41:48,400 --> 00:41:57,000
all four arrays at the same thing right

968
00:41:53,579 --> 00:41:59,860
then for some reason we would break out

969
00:41:57,000 --> 00:42:04,659
like we just that would be it

970
00:41:59,860 --> 00:42:13,510
I don't understand why I don't

971
00:42:04,659 --> 00:42:16,420
understand what that was for I don't

972
00:42:13,510 --> 00:42:24,250
even know why you would ever care about

973
00:42:16,420 --> 00:42:26,230
that like I can't even really tell

974
00:42:24,250 --> 00:42:28,090
i I have literally no idea why that

975
00:42:26,230 --> 00:42:31,869
would even be a condition we thought we

976
00:42:28,090 --> 00:42:33,610
should be checking because it's

977
00:42:31,869 --> 00:42:36,159
effectively saying look is this

978
00:42:33,610 --> 00:42:48,910
particular set where we hit all these

979
00:42:36,159 --> 00:42:50,469
things we're leaving the loop here I did

980
00:42:48,909 --> 00:42:52,509
I just have no idea why we thought that

981
00:42:50,469 --> 00:42:54,369
was good you know maybe we were trying

982
00:42:52,510 --> 00:42:57,400
to something like saying look at some

983
00:42:54,369 --> 00:42:59,920
point we know that all of the boxes that

984
00:42:57,400 --> 00:43:06,039
come next have to be further away than

985
00:42:59,920 --> 00:43:09,599
we are right so we can leave the routine

986
00:43:06,039 --> 00:43:13,929
at that point and not worry about it I

987
00:43:09,599 --> 00:43:18,849
don't see how this this condition isn't

988
00:43:13,929 --> 00:43:20,679
that it's not even related to that so I

989
00:43:18,849 --> 00:43:23,049
just feel like this had to be a case of

990
00:43:20,679 --> 00:43:25,750
us being dumb I just you know summer on

991
00:43:23,050 --> 00:43:28,450
the track and tell me if there was some

992
00:43:25,750 --> 00:43:31,030
better reason for it but I think that

993
00:43:28,449 --> 00:43:34,629
was just wrong I can't see any reason

994
00:43:31,030 --> 00:43:38,500
why this would ever produce a reasonable

995
00:43:34,630 --> 00:43:38,950
result and what I assumed was happening

996
00:43:38,500 --> 00:43:41,619
here

997
00:43:38,949 --> 00:43:44,019
is I assume this case was effectively

998
00:43:41,619 --> 00:43:47,980
never occurring because when we would

999
00:43:44,019 --> 00:43:50,588
actually cast for raise we had not

1000
00:43:47,980 --> 00:43:53,500
actually put in coherent race election

1001
00:43:50,588 --> 00:43:55,299
at that point so we weren't like sending

1002
00:43:53,500 --> 00:43:59,469
them out in similar directions at all

1003
00:43:55,300 --> 00:44:02,500
either which basically meant that we

1004
00:43:59,469 --> 00:44:04,480
would probably never in one hit test one

1005
00:44:02,500 --> 00:44:06,489
box would probably never stop all four

1006
00:44:04,480 --> 00:44:08,320
race or at least almost never stop so we

1007
00:44:06,489 --> 00:44:10,358
probably weren't seeing bugs related to

1008
00:44:08,320 --> 00:44:13,119
this only because it never actually did

1009
00:44:10,358 --> 00:44:15,159
anything that's my guess so I'm gonna go

1010
00:44:13,119 --> 00:44:17,200
ahead and delete that because I can't

1011
00:44:15,159 --> 00:44:24,250
see any reason why that would actually

1012
00:44:17,199 --> 00:44:26,078
do anything useful but my my feeling on

1013
00:44:24,250 --> 00:44:29,559
it is that there could be something done

1014
00:44:26,079 --> 00:44:33,160
here where we do actually check I mean

1015
00:44:29,559 --> 00:44:36,578
you know for example let's suppose we

1016
00:44:33,159 --> 00:44:40,199
took tier a you know here we could do a

1017
00:44:36,579 --> 00:44:40,200
check in fact I'll put it to do here

1018
00:45:01,050 --> 00:45:08,019
so basically what we could do here is

1019
00:45:04,869 --> 00:45:10,989
say hey we know what the T ray values

1020
00:45:08,019 --> 00:45:15,039
are so far what we could do is say test

1021
00:45:10,989 --> 00:45:17,639
to see whether or not anything in this

1022
00:45:15,039 --> 00:45:20,710
parent box could ever possibly be closer

1023
00:45:17,639 --> 00:45:24,989
than the close than what we've already

1024
00:45:20,710 --> 00:45:28,960
got for our four arrays and and

1025
00:45:24,989 --> 00:45:31,959
basically don't don't process it if it

1026
00:45:28,960 --> 00:45:35,079
isn't right if this whole box is further

1027
00:45:31,960 --> 00:45:37,179
away than where we've already found our

1028
00:45:35,079 --> 00:45:39,369
closest collisions we don't need to look

1029
00:45:37,179 --> 00:45:42,369
at it right because all we could ever

1030
00:45:39,369 --> 00:45:48,299
find is collisions that are too far to

1031
00:45:42,369 --> 00:45:51,299
be accepted by our bye-bye-bye this

1032
00:45:48,300 --> 00:45:51,300
right

1033
00:46:03,050 --> 00:46:11,870
and so I do think that is pretty

1034
00:46:05,570 --> 00:46:13,820
important in fact in fact I think that's

1035
00:46:11,869 --> 00:46:23,059
something we should just do like in

1036
00:46:13,820 --> 00:46:26,300
other words I guess we don't even need

1037
00:46:23,059 --> 00:46:29,320
that it's just masks so correct me if

1038
00:46:26,300 --> 00:46:34,960
I'm wrong I mean just hear me out here

1039
00:46:29,320 --> 00:46:34,960
this really should just be here

1040
00:47:01,530 --> 00:47:13,660
like this meaning obviously any closer

1041
00:47:07,500 --> 00:47:15,610
oh sorry not quite true so if we're

1042
00:47:13,659 --> 00:47:25,239
inside we need to do it if we're inside

1043
00:47:15,610 --> 00:47:29,410
or we are close enough and could be

1044
00:47:25,239 --> 00:47:32,889
closer than the current hit right so if

1045
00:47:29,409 --> 00:47:34,750
there's a child count and we are either

1046
00:47:32,889 --> 00:47:37,119
inside the box in which case we

1047
00:47:34,750 --> 00:47:43,539
definitely do it or we are close enough

1048
00:47:37,119 --> 00:47:48,039
and the the possible closeness of this

1049
00:47:43,539 --> 00:47:51,670
thing could result in an actual hit we

1050
00:47:48,039 --> 00:47:54,550
accept then we would Traverse now so I

1051
00:47:51,670 --> 00:47:56,349
would argue that's almost certainly

1052
00:47:54,550 --> 00:47:57,940
necessary because otherwise we're going

1053
00:47:56,349 --> 00:47:59,829
to waste a bunch of time processing

1054
00:47:57,940 --> 00:48:01,389
boxes that we didn't need to because

1055
00:47:59,829 --> 00:48:04,210
they couldn't possibly produce a hit we

1056
00:48:01,389 --> 00:48:06,400
would ever actually use right so the

1057
00:48:04,210 --> 00:48:09,190
bount when we hit the bounding box of

1058
00:48:06,400 --> 00:48:12,910
the parent the parent bounding box if if

1059
00:48:09,190 --> 00:48:14,590
that hit isn't closer certainly none of

1060
00:48:12,909 --> 00:48:16,989
the things inside it could be closer

1061
00:48:14,590 --> 00:48:18,610
unless we ourselves are inside it and

1062
00:48:16,989 --> 00:48:21,909
that's a test we were already doing

1063
00:48:18,610 --> 00:48:26,349
right so I'm gonna go ahead and say that

1064
00:48:21,909 --> 00:48:28,059
has to happen right then we can go on in

1065
00:48:26,349 --> 00:48:31,029
here and say all right now we're gonna

1066
00:48:28,059 --> 00:48:33,849
do the acceptance test and and you know

1067
00:48:31,030 --> 00:48:36,269
record the fact that we used a leaf here

1068
00:48:33,849 --> 00:48:38,650
and off we go

1069
00:48:36,269 --> 00:48:40,690
so then we come down here and we say all

1070
00:48:38,650 --> 00:48:43,240
right now we actually have to compute

1071
00:48:40,690 --> 00:48:45,700
what the heck happened we take a hit

1072
00:48:43,239 --> 00:48:48,609
position and we compute that by taking

1073
00:48:45,699 --> 00:48:50,429
the Raritan adding the you know the rate

1074
00:48:48,610 --> 00:48:53,620
erection times the the distance we went

1075
00:48:50,429 --> 00:48:55,269
we then do a bunch of work here to try

1076
00:48:53,619 --> 00:48:56,889
and reconstruct the normal you can see

1077
00:48:55,269 --> 00:49:02,329
that being reconstructed here in a

1078
00:48:56,889 --> 00:49:06,609
pretty janky way it's not good

1079
00:49:02,329 --> 00:49:06,610
right I don't really know

1080
00:49:16,750 --> 00:49:24,639
I mean I don't really know I don't

1081
00:49:23,050 --> 00:49:26,740
really know what the best way to do this

1082
00:49:24,639 --> 00:49:29,710
is I really don't so this is probably

1083
00:49:26,739 --> 00:49:31,419
janky but you know this for our current

1084
00:49:29,710 --> 00:49:35,289
purposes we don't have to care about

1085
00:49:31,420 --> 00:49:36,820
this at all because the only thing that

1086
00:49:35,289 --> 00:49:40,989
we need to know is that the hip key and

1087
00:49:36,820 --> 00:49:43,150
the t-ray right those are the only

1088
00:49:40,989 --> 00:49:46,089
things we're really caring about at the

1089
00:49:43,150 --> 00:49:48,460
moment and so if you look at this

1090
00:49:46,090 --> 00:49:49,510
equation here this is the only one we're

1091
00:49:48,460 --> 00:49:51,159
actually using and that's the origin

1092
00:49:49,510 --> 00:49:53,230
plus the distance we thought we went

1093
00:49:51,159 --> 00:49:56,469
times the direction equals the location

1094
00:49:53,230 --> 00:49:57,639
we believed to have hit that's the only

1095
00:49:56,469 --> 00:49:59,109
property care about the rest of this

1096
00:49:57,639 --> 00:50:03,940
stuff is for completing the normal which

1097
00:49:59,110 --> 00:50:05,500
we don't actually know it's correct or

1098
00:50:03,940 --> 00:50:06,789
not at this point and we don't care

1099
00:50:05,500 --> 00:50:09,219
because we're not using it for anything

1100
00:50:06,789 --> 00:50:10,690
so we will care eventually about that

1101
00:50:09,219 --> 00:50:12,789
but otherwise we're fine

1102
00:50:10,690 --> 00:50:15,700
so if you look at what this is doing

1103
00:50:12,789 --> 00:50:17,380
here I guess I would say so far you know

1104
00:50:15,699 --> 00:50:19,599
walking through that routine other than

1105
00:50:17,380 --> 00:50:21,369
the fact that I think there was an

1106
00:50:19,599 --> 00:50:24,130
inefficiency there like we should have

1107
00:50:21,369 --> 00:50:27,549
added this right but that's just for

1108
00:50:24,130 --> 00:50:30,789
efficiency I I didn't see the obvious

1109
00:50:27,550 --> 00:50:35,080
bug right look I didn't see an error in

1110
00:50:30,789 --> 00:50:37,509
there and so I don't really know what

1111
00:50:35,079 --> 00:50:39,250
our issue is and we're gonna have to dig

1112
00:50:37,510 --> 00:50:43,870
into this pretty hard I think to find

1113
00:50:39,250 --> 00:50:46,539
out what's going on all right so if we

1114
00:50:43,869 --> 00:50:48,339
look at what we're seeing here I think

1115
00:50:46,539 --> 00:50:51,869
the first thing I need to do is try to

1116
00:50:48,340 --> 00:50:55,180
isolate myself down to a raycasting case

1117
00:50:51,869 --> 00:50:57,429
that I actually know specifically which

1118
00:50:55,179 --> 00:50:59,349
one it is and so what do they do because

1119
00:50:57,429 --> 00:51:01,210
I you know this is casting you know

1120
00:50:59,349 --> 00:51:03,480
thousands and thousands of rays here

1121
00:51:01,210 --> 00:51:06,340
tens of thousands of rays every frame

1122
00:51:03,480 --> 00:51:07,900
that is not gonna cut it for debugging

1123
00:51:06,340 --> 00:51:09,100
right I have no idea what I was looking

1124
00:51:07,900 --> 00:51:11,950
at we've been stepping through the thing

1125
00:51:09,099 --> 00:51:13,750
forever it wouldn't help so I think what

1126
00:51:11,949 --> 00:51:17,529
we want to do first is isolate a

1127
00:51:13,750 --> 00:51:19,090
particular case just one of these and it

1128
00:51:17,530 --> 00:51:22,120
just so happens I think there's a pretty

1129
00:51:19,090 --> 00:51:25,000
easy way for me to do that I can take a

1130
00:51:22,119 --> 00:51:26,679
false-positive so something that that

1131
00:51:25,000 --> 00:51:29,380
you know was saying it hits something

1132
00:51:26,679 --> 00:51:30,318
and definitely didn't this yellow line

1133
00:51:29,380 --> 00:51:31,969
right here

1134
00:51:30,318 --> 00:51:33,978
that's not that hard to figure out which

1135
00:51:31,969 --> 00:51:36,108
one that is because if you look at where

1136
00:51:33,978 --> 00:51:38,448
it is it's on the outside of two

1137
00:51:36,108 --> 00:51:42,139
dimensions and it's one down from the

1138
00:51:38,449 --> 00:51:44,028
other at the top right so if I was to

1139
00:51:42,139 --> 00:51:46,818
pull up into my voxel code where I'm

1140
00:51:44,028 --> 00:51:49,039
already trimming the debug lines so let

1141
00:51:46,818 --> 00:51:51,498
me go ahead noobs that's not good

1142
00:51:49,039 --> 00:51:53,900
let me go ahead and actually jump to

1143
00:51:51,498 --> 00:51:57,889
that code that's that's outputting a

1144
00:51:53,900 --> 00:52:01,099
debug line and what I want to do here is

1145
00:51:57,889 --> 00:52:02,920
change this from doing a region right so

1146
00:52:01,099 --> 00:52:06,079
I'm gonna I'm gonna keep this code

1147
00:52:02,920 --> 00:52:07,849
around in case I want it later but what

1148
00:52:06,079 --> 00:52:10,849
I'm gonna do instead is I'm going to

1149
00:52:07,849 --> 00:52:15,048
make sort of a special-purpose version

1150
00:52:10,849 --> 00:52:18,380
here where instead of this and I'm Mouse

1151
00:52:15,048 --> 00:52:22,568
I'm also going to put this out into a

1152
00:52:18,380 --> 00:52:27,259
tester here where I do like b32 is test

1153
00:52:22,568 --> 00:52:30,199
cast right and I'm just gonna record a

1154
00:52:27,259 --> 00:52:32,838
very specific one of these so what I

1155
00:52:30,199 --> 00:52:35,659
want to do here is delete you know the

1156
00:52:32,838 --> 00:52:39,380
bottom half of this thing and just look

1157
00:52:35,659 --> 00:52:42,679
for one specific one of these and so

1158
00:52:39,380 --> 00:52:46,548
what I want I think here is I want to

1159
00:52:42,679 --> 00:52:49,759
look at you know the the furthest in

1160
00:52:46,548 --> 00:52:51,768
like X&amp;Y and then like not quite the

1161
00:52:49,759 --> 00:52:54,608
furthest in Z or something like that

1162
00:52:51,768 --> 00:52:56,718
right and then I'm gonna say all right

1163
00:52:54,608 --> 00:53:01,808
and in fact you know what we could do to

1164
00:52:56,719 --> 00:53:01,809
here is I could make this actually be I

1165
00:53:08,409 --> 00:53:17,298
can make this actually just be if is

1166
00:53:14,690 --> 00:53:24,949
test cast and then we'll just capture

1167
00:53:17,298 --> 00:53:27,469
this range query into this right and so

1168
00:53:24,949 --> 00:53:30,588
that way now I have an easy way of

1169
00:53:27,469 --> 00:53:32,719
isolating a particular line and the

1170
00:53:30,588 --> 00:53:34,849
reason I'm doing that is because I want

1171
00:53:32,719 --> 00:53:41,239
to be able to set up you know this sort

1172
00:53:34,849 --> 00:53:43,670
of nice yeah I want to be able to set up

1173
00:53:41,239 --> 00:53:44,389
this sort of nice test case where I know

1174
00:53:43,670 --> 00:53:46,818
exactly

1175
00:53:44,389 --> 00:53:49,190
which line it is that I'm looking at so

1176
00:53:46,818 --> 00:53:51,980
I can step through it right and so if we

1177
00:53:49,190 --> 00:53:55,068
look at the code here and I run this now

1178
00:53:51,980 --> 00:53:58,059
I want to go ahead and see oh it looks

1179
00:53:55,068 --> 00:54:01,159
like I picked the wrong Y so actually no

1180
00:53:58,059 --> 00:54:05,390
it was the it was the furthest back of

1181
00:54:01,159 --> 00:54:08,838
the Y I don't know why I stopped the

1182
00:54:05,389 --> 00:54:10,248
program I always forget that the hot

1183
00:54:08,838 --> 00:54:13,400
code reloading will take care of my nice

1184
00:54:10,248 --> 00:54:16,098
time um and so it looks like we be bingo

1185
00:54:13,400 --> 00:54:18,829
down on that right so there's a single

1186
00:54:16,099 --> 00:54:20,329
test line being drawn and it is wrong as

1187
00:54:18,829 --> 00:54:26,150
far as we can tell right that that does

1188
00:54:20,329 --> 00:54:29,239
not look valid to me right so now what I

1189
00:54:26,150 --> 00:54:31,039
can do is downshift into debug build and

1190
00:54:29,239 --> 00:54:33,889
actually step through and see what the

1191
00:54:31,039 --> 00:54:36,650
hey is going on there right and so in

1192
00:54:33,889 --> 00:54:39,588
this test cast case where we do this

1193
00:54:36,650 --> 00:54:42,470
line here I can now do a breakpoint

1194
00:54:39,588 --> 00:54:45,349
right before I go to cast I can do a

1195
00:54:42,469 --> 00:54:49,808
breakpoint on that test cast and know

1196
00:54:45,349 --> 00:54:49,809
exactly what I'm getting so like this I

1197
00:54:52,389 --> 00:54:58,338
can just put a line of code there that I

1198
00:54:55,639 --> 00:55:00,409
can stop on if I choose and step through

1199
00:54:58,338 --> 00:55:02,449
the actual caster to see what it's

1200
00:55:00,409 --> 00:55:06,230
actually doing you know what I mean

1201
00:55:02,449 --> 00:55:10,149
so as we run and and produce that

1202
00:55:06,230 --> 00:55:13,219
erroneous line in the slower build now

1203
00:55:10,150 --> 00:55:15,499
you can kind of see this happening right

1204
00:55:13,219 --> 00:55:17,389
the rake after is super slow right if

1205
00:55:15,498 --> 00:55:23,509
you don't run it in release mode right

1206
00:55:17,389 --> 00:55:24,739
because it's yeah it's it's doing 32,000

1207
00:55:23,509 --> 00:55:27,170
things so if each one gets a little

1208
00:55:24,739 --> 00:55:28,489
slower it it will slow down quite a bit

1209
00:55:27,170 --> 00:55:30,048
but I don't care because I don't have to

1210
00:55:28,489 --> 00:55:31,130
do anything in this mode I just need to

1211
00:55:30,048 --> 00:55:33,679
know about that raycast

1212
00:55:31,130 --> 00:55:37,769
so if I now open up the lighting code

1213
00:55:33,679 --> 00:55:41,699
here inside the debugger which will be

1214
00:55:37,769 --> 00:55:44,429
you there I can go to that piece of the

1215
00:55:41,699 --> 00:55:52,039
code and set a breakpoint effectively on

1216
00:55:44,429 --> 00:55:54,299
that test which is right here right so

1217
00:55:52,039 --> 00:55:58,800
what I want to do now is go all right

1218
00:55:54,300 --> 00:56:00,900
stop there and this is in theory our

1219
00:55:58,800 --> 00:56:03,510
erroneous test so this is the one that's

1220
00:56:00,900 --> 00:56:05,510
gonna think it hit something but it

1221
00:56:03,510 --> 00:56:08,100
never actually hit anything right and

1222
00:56:05,510 --> 00:56:10,650
the first thing I would like to do is

1223
00:56:08,099 --> 00:56:13,049
I'd like to know a little bit more about

1224
00:56:10,650 --> 00:56:15,090
the the actual case first so before I

1225
00:56:13,050 --> 00:56:16,920
even step into it I just want to look at

1226
00:56:15,090 --> 00:56:20,340
what these are right so we have a hit

1227
00:56:16,920 --> 00:56:23,700
value of 1 which is what we'd expect how

1228
00:56:20,340 --> 00:56:26,210
far away was the light distance right so

1229
00:56:23,699 --> 00:56:29,849
in this case it's 6.5 meters away

1230
00:56:26,210 --> 00:56:32,280
theoretically if you look at the casting

1231
00:56:29,849 --> 00:56:34,380
information and we look at what we're

1232
00:56:32,280 --> 00:56:36,090
getting for T ray you can see that we're

1233
00:56:34,380 --> 00:56:38,849
getting something significantly closer

1234
00:56:36,090 --> 00:56:41,640
than that right it's saying that it only

1235
00:56:38,849 --> 00:56:42,839
took four meters to hit something and in

1236
00:56:41,639 --> 00:56:46,289
order to get to the light you needed to

1237
00:56:42,840 --> 00:56:50,970
travel 6.5 meters right so something's

1238
00:56:46,289 --> 00:56:53,670
fishy they're not good now we don't know

1239
00:56:50,969 --> 00:56:55,349
much more than that because we can't

1240
00:56:53,670 --> 00:57:00,000
really see the diagram what I will say

1241
00:56:55,349 --> 00:57:02,099
is 6 meters mmm you know I guess that

1242
00:57:00,000 --> 00:57:04,159
roughly comports with I mean that I

1243
00:57:02,099 --> 00:57:07,500
think our game skills maybe not quite

1244
00:57:04,159 --> 00:57:08,849
realistic in terms of meters so I

1245
00:57:07,500 --> 00:57:10,949
shouldn't say meters because it's

1246
00:57:08,849 --> 00:57:13,559
probably not really meters at this point

1247
00:57:10,949 --> 00:57:19,710
but you know is that completely

1248
00:57:13,559 --> 00:57:22,829
ridiculous I'm not sure yet but that's

1249
00:57:19,710 --> 00:57:24,929
what we're being told if I rerun the

1250
00:57:22,829 --> 00:57:27,059
loop again so did not get step into the

1251
00:57:24,929 --> 00:57:28,440
Ray Kassar I'm going to look at what

1252
00:57:27,059 --> 00:57:31,349
some of these values are more

1253
00:57:28,440 --> 00:57:32,909
specifically so what we're gonna do is

1254
00:57:31,349 --> 00:57:35,670
we're gonna start off with the root box

1255
00:57:32,909 --> 00:57:38,909
and we would expect to traverse down the

1256
00:57:35,670 --> 00:57:42,000
root box so I'm hoping that we hit this

1257
00:57:38,909 --> 00:57:46,559
case here and we do right so we push

1258
00:57:42,000 --> 00:57:50,940
that box down on the stack and then

1259
00:57:46,559 --> 00:57:51,449
we'll have to see in here we we missed

1260
00:57:50,940 --> 00:57:54,900
this case

1261
00:57:51,449 --> 00:57:58,078
and I'm not sure why let's take a look

1262
00:57:54,900 --> 00:58:03,780
at what this box says so this is a this

1263
00:57:58,079 --> 00:58:09,180
is a bounding volume used for actually

1264
00:58:03,780 --> 00:58:14,309
it is actually containing sub volumes we

1265
00:58:09,179 --> 00:58:16,429
rejected it I'm not sure why exactly but

1266
00:58:14,309 --> 00:58:19,230
in fact you know what I might do here

1267
00:58:16,429 --> 00:58:21,358
before we continue down this route let's

1268
00:58:19,230 --> 00:58:24,869
pull those out into billions we can see

1269
00:58:21,358 --> 00:58:27,568
you know just so we can inspect them

1270
00:58:24,869 --> 00:58:28,798
more easily so if I jump to the right

1271
00:58:27,568 --> 00:58:32,159
caster I don't know why I'm not just

1272
00:58:28,798 --> 00:58:34,969
jumping directly to it if we actually go

1273
00:58:32,159 --> 00:58:55,348
through here and just set up some

1274
00:58:34,969 --> 00:58:58,558
billions here now I can see exactly why

1275
00:58:55,349 --> 00:59:00,119
we went into this so by looking at the

1276
00:58:58,559 --> 00:59:02,040
child camp that any inside the any

1277
00:59:00,119 --> 00:59:04,440
closer than close enough I can see

1278
00:59:02,039 --> 00:59:08,219
specifically which thing caused us to

1279
00:59:04,440 --> 00:59:12,769
Traverse down into it or not right or to

1280
00:59:08,219 --> 00:59:12,769
skip that case so let's try that again

1281
00:59:12,900 --> 00:59:16,068
and now let's go back

1282
00:59:23,010 --> 00:59:31,480
stretch okay so in here i want to break

1283
00:59:28,599 --> 00:59:34,059
only on the test case so let's skip

1284
00:59:31,480 --> 00:59:36,099
those I'm gonna go into the castor

1285
00:59:34,059 --> 00:59:41,650
we're gonna watch ourselves go down the

1286
00:59:36,099 --> 00:59:43,569
route box first so that's there then

1287
00:59:41,650 --> 00:59:46,090
we're going to go and maybe I'll set the

1288
00:59:43,570 --> 00:59:56,590
break point now all right so that one's

1289
00:59:46,090 --> 00:59:57,970
failed on Macs pass so that was weird

1290
00:59:56,590 --> 01:00:01,050
wasn't it I mean that was different than

1291
00:59:57,969 --> 01:00:08,919
the last time oh you know what

1292
01:00:01,050 --> 01:00:10,930
hmm so we do have one issue here that is

1293
01:00:08,920 --> 01:00:12,639
I guess I don't know if while this

1294
01:00:10,929 --> 01:00:15,549
camera moves are we gonna get different

1295
01:00:12,639 --> 01:00:19,199
results because is the voxel moving with

1296
01:00:15,550 --> 01:00:22,560
the camera at all it might be

1297
01:00:19,199 --> 01:00:22,559
[Music]

1298
01:00:27,710 --> 01:00:33,389
so one thing that we might want to do is

1299
01:00:31,289 --> 01:00:36,659
so let me I should probably verify

1300
01:00:33,389 --> 01:00:38,068
whether that's true or not but what I

1301
01:00:36,659 --> 01:00:39,838
was gonna say is we might want to make

1302
01:00:38,068 --> 01:00:41,639
it so that the camera starts off at a

1303
01:00:39,838 --> 01:00:45,108
known good location so that we don't do

1304
01:00:41,639 --> 01:00:45,108
that sort of interpolation

1305
01:00:58,550 --> 01:01:06,289
I just don't want to have a situation

1306
01:01:01,489 --> 01:01:08,149
where we like I feel like we need to

1307
01:01:06,289 --> 01:01:16,130
skip the first frame I guess is what I'm

1308
01:01:08,150 --> 01:01:17,690
saying so let's do that and maybe I'll

1309
01:01:16,130 --> 01:01:18,980
put a piece of code in there that skips

1310
01:01:17,690 --> 01:01:24,800
the first frame so we don't have to do

1311
01:01:18,980 --> 01:01:25,909
it manually all right now let's go in so

1312
01:01:24,800 --> 01:01:26,420
in theory this should be the same as

1313
01:01:25,909 --> 01:01:33,469
before

1314
01:01:26,420 --> 01:01:39,619
Sumi so there's this going down the

1315
01:01:33,469 --> 01:01:41,059
route and there's a skipping max pass on

1316
01:01:39,619 --> 01:01:42,559
the next one so this is the same as it

1317
01:01:41,059 --> 01:01:50,179
was before so I'm not sure what's

1318
01:01:42,559 --> 01:01:53,210
happening there exactly there's all fall

1319
01:01:50,179 --> 01:01:56,000
out of scope I wish you could still

1320
01:01:53,210 --> 01:01:57,530
inspect variables I know George did a

1321
01:01:56,000 --> 01:01:59,000
little bit of work on that and so now

1322
01:01:57,530 --> 01:02:00,650
you can't expect variables on the

1323
01:01:59,000 --> 01:02:08,269
closing brace but only on the closing

1324
01:02:00,650 --> 01:02:12,280
brace all right so we're traversing this

1325
01:02:08,269 --> 01:02:12,280
one let me just put these up in here

1326
01:02:18,469 --> 01:02:27,899
so you can see like all of them I guess

1327
01:02:21,358 --> 01:02:41,429
are close enough let's actually view

1328
01:02:27,900 --> 01:02:43,380
these values too so if we actually look

1329
01:02:41,429 --> 01:02:49,078
at what these values end up being owing

1330
01:02:43,380 --> 01:02:57,059
the mask the easiest way is probably

1331
01:02:49,079 --> 01:02:58,280
just to look at like yeah like one of

1332
01:02:57,059 --> 01:03:01,469
these

1333
01:02:58,280 --> 01:03:08,099
so maybe what I'll do is like Matthew 3

1334
01:03:01,469 --> 01:03:12,569
to 0 like so and I don't actually know

1335
01:03:08,099 --> 01:03:14,640
how to there we go

1336
01:03:12,570 --> 01:03:17,630
I'm like I want that to be in

1337
01:03:14,639 --> 01:03:21,239
hexadecimal so it's easier to see so

1338
01:03:17,630 --> 01:03:23,338
this value should be just ffffff or zero

1339
01:03:21,239 --> 01:03:25,559
right like all these master devalue it

1340
01:03:23,338 --> 01:03:29,460
to all ones or all zeroes in general I

1341
01:03:25,559 --> 01:03:32,639
believe and so if we look at these like

1342
01:03:29,460 --> 01:03:35,190
all of these computations here should

1343
01:03:32,639 --> 01:03:36,719
probably be expressed this way so we can

1344
01:03:35,190 --> 01:03:39,858
kind of see like what we're looking at

1345
01:03:36,719 --> 01:03:42,149
here and then these should correspond

1346
01:03:39,858 --> 01:03:46,818
like with it

1347
01:03:42,150 --> 01:03:46,818
what is it's not T closer so

1348
01:03:49,869 --> 01:03:54,509
so any closer is just a mask actually

1349
01:03:58,338 --> 01:04:03,599
yeah all right

1350
01:04:01,349 --> 01:04:06,269
um so that's really what we're looking

1351
01:04:03,599 --> 01:04:12,499
at here so these should probably be

1352
01:04:06,268 --> 01:04:18,778
reordered so we've got any inside any

1353
01:04:12,498 --> 01:04:21,358
close enough any closer so you can see

1354
01:04:18,778 --> 01:04:23,278
here here's our values and they're doing

1355
01:04:21,358 --> 01:04:25,650
exactly what would expect so extracting

1356
01:04:23,278 --> 01:04:29,150
the mask out here is working properly it

1357
01:04:25,650 --> 01:04:29,150
does exactly what we think it should do

1358
01:04:29,449 --> 01:04:34,798
and so nothing particularly weird there

1359
01:04:32,759 --> 01:04:38,009
we can also look at the box child cap to

1360
01:04:34,798 --> 01:04:41,938
know if this thing is you know basically

1361
01:04:38,009 --> 01:04:43,679
a container node and so as we're doing

1362
01:04:41,938 --> 01:04:46,048
these collisions here we can also take a

1363
01:04:43,679 --> 01:04:48,778
look at the T min value which is the the

1364
01:04:46,048 --> 01:04:51,509
primarily important value here and I can

1365
01:04:48,778 --> 01:04:57,318
just look at the T min I guess I'll just

1366
01:04:51,509 --> 01:04:59,548
do like the dot e zero value there and

1367
01:04:57,318 --> 01:05:03,088
I'm gonna look at the T ray as well

1368
01:04:59,548 --> 01:05:04,949
which is our current best so you can see

1369
01:05:03,088 --> 01:05:06,929
in this case it's like well anything is

1370
01:05:04,949 --> 01:05:08,249
gonna be better because currently we

1371
01:05:06,929 --> 01:05:09,329
haven't recorded to hit yet so

1372
01:05:08,248 --> 01:05:11,759
anything's gonna be better than that

1373
01:05:09,329 --> 01:05:13,589
here's where we believe our hit to be um

1374
01:05:11,759 --> 01:05:15,869
it would be nice if I had some way of

1375
01:05:13,588 --> 01:05:18,208
really figuring out where that was like

1376
01:05:15,869 --> 01:05:23,608
but you know this is one of the problems

1377
01:05:18,208 --> 01:05:24,778
with with this is I don't know there's

1378
01:05:23,608 --> 01:05:27,389
much of a way to do that so I'm gonna

1379
01:05:24,778 --> 01:05:28,858
I'm gonna like step through this sort of

1380
01:05:27,389 --> 01:05:29,788
gaining a little bit of insight here but

1381
01:05:28,858 --> 01:05:31,048
then what I'm probably gonna do is

1382
01:05:29,789 --> 01:05:32,669
augment this with some drawing calls

1383
01:05:31,048 --> 01:05:35,358
because since debuggers today

1384
01:05:32,668 --> 01:05:37,858
still can't do much drawing even remedy

1385
01:05:35,358 --> 01:05:40,159
unfortunately can't draw out things for

1386
01:05:37,858 --> 01:05:43,048
us it'd be pretty hard for us to know

1387
01:05:40,159 --> 01:05:45,539
how reasonable these values actually are

1388
01:05:43,048 --> 01:05:47,188
cuz they don't look obviously wrong but

1389
01:05:45,539 --> 01:05:52,979
they could be subtly wrong you know I'm

1390
01:05:47,188 --> 01:05:56,248
saying to you so here we go again we're

1391
01:05:52,978 --> 01:05:58,018
gonna now we're kidding a node we're not

1392
01:05:56,248 --> 01:05:59,548
going to descend right so there's two

1393
01:05:58,018 --> 01:06:05,578
children and this one and we're not

1394
01:05:59,548 --> 01:06:09,268
going to send into it so we're gonna use

1395
01:06:05,579 --> 01:06:11,970
it as an actual Collider we're gonna see

1396
01:06:09,268 --> 01:06:14,789
here that means that something was close

1397
01:06:11,969 --> 01:06:18,480
sir and we're not inside it and it

1398
01:06:14,789 --> 01:06:20,190
wasn't close enough to descend right so

1399
01:06:18,480 --> 01:06:23,789
if we look at the actual hit it's at

1400
01:06:20,190 --> 01:06:26,309
11:00 and so we don't actually care like

1401
01:06:23,789 --> 01:06:27,869
that that's not the hit we ever end up

1402
01:06:26,309 --> 01:06:29,759
recording we know that that's not the

1403
01:06:27,869 --> 01:06:31,079
hit so we don't really have to worry

1404
01:06:29,760 --> 01:06:33,630
about that one much oh let me put the

1405
01:06:31,079 --> 01:06:35,639
depth up there as well so we're

1406
01:06:33,630 --> 01:06:41,150
currently just at the top we don't have

1407
01:06:35,639 --> 01:06:41,150
a stack right now there's just this one

1408
01:06:43,159 --> 01:06:52,259
so we don't need to traverse that guy

1409
01:06:47,510 --> 01:06:53,310
wait in that case how did we if we were

1410
01:06:52,260 --> 01:06:55,110
already on depth zero

1411
01:06:53,309 --> 01:07:13,769
how did oh because we're still looking

1412
01:06:55,110 --> 01:07:15,120
through children sorry so we're still

1413
01:07:13,769 --> 01:07:17,610
looking through the children of this and

1414
01:07:15,119 --> 01:07:20,130
so this one must actually be what we

1415
01:07:17,610 --> 01:07:24,120
wanted so you can see here we're taking

1416
01:07:20,130 --> 01:07:28,890
a hit on the T valve there we're getting

1417
01:07:24,119 --> 01:07:30,480
sort of a we probably tested two sides

1418
01:07:28,889 --> 01:07:33,779
of a split basically and we're

1419
01:07:30,480 --> 01:07:35,190
traversing the near side of the split so

1420
01:07:33,780 --> 01:07:36,390
we should probably you know we're

1421
01:07:35,190 --> 01:07:39,630
probably gonna do that for a little bit

1422
01:07:36,389 --> 01:07:41,819
you know we're traversing down and

1423
01:07:39,630 --> 01:07:43,619
getting the near sides to sort of get

1424
01:07:41,820 --> 01:07:47,280
down to the place where we actually are

1425
01:07:43,619 --> 01:07:52,159
here and then at some point we should

1426
01:07:47,280 --> 01:07:52,160
actually start hit testing somebody I

1427
01:07:52,760 --> 01:07:59,850
know how far down our bounding box our

1428
01:07:55,199 --> 01:08:03,049
could goes but it's not a very good

1429
01:07:59,849 --> 01:08:03,049
batting bisector by the way

1430
01:08:05,199 --> 01:08:10,939
all right so here we're recording

1431
01:08:07,219 --> 01:08:15,349
another hit you can see in this case the

1432
01:08:10,940 --> 01:08:18,920
the actual hit that we wanted or the

1433
01:08:15,349 --> 01:08:23,048
actual hit that we took right now if we

1434
01:08:18,920 --> 01:08:27,259
look here this is an actual node it's

1435
01:08:23,048 --> 01:08:30,199
not a container so we are recording what

1436
01:08:27,259 --> 01:08:34,850
we believe to be a valid hit of an

1437
01:08:30,199 --> 01:08:38,088
actual box we think that box was close

1438
01:08:34,850 --> 01:08:40,850
enough we are not inside it it is less

1439
01:08:38,088 --> 01:08:42,769
than 10 meters which is true it's closer

1440
01:08:40,850 --> 01:08:45,440
than our current hit which was also true

1441
01:08:42,770 --> 01:08:48,980
of course we just over wrote it and

1442
01:08:45,439 --> 01:08:53,899
we're keeping it right that there is the

1443
01:08:48,979 --> 01:08:55,699
actual you know that the only thing we

1444
01:08:53,899 --> 01:08:57,409
could really say here cuz everything

1445
01:08:55,699 --> 01:09:02,689
looks correct so the only thing we could

1446
01:08:57,409 --> 01:09:06,229
really say there is either we have put

1447
01:09:02,689 --> 01:09:10,939
in a box that is actually here so the

1448
01:09:06,229 --> 01:09:13,459
box is erroneous right either we put in

1449
01:09:10,939 --> 01:09:18,169
an erroneous box and are correctly hit

1450
01:09:13,460 --> 01:09:22,430
testing against it or we did put in the

1451
01:09:18,170 --> 01:09:24,859
correct boxes and this this code is

1452
01:09:22,430 --> 01:09:26,869
erroneous right this part right here the

1453
01:09:24,859 --> 01:09:28,609
computer computes the T because then

1454
01:09:26,869 --> 01:09:32,298
this part looks like it's working

1455
01:09:28,609 --> 01:09:34,520
correctly this T value is the closest T

1456
01:09:32,298 --> 01:09:37,609
value it should have been recorded so

1457
01:09:34,520 --> 01:09:39,950
the only way that we could really have

1458
01:09:37,609 --> 01:09:42,410
gotten this wrong is if these values

1459
01:09:39,949 --> 01:09:44,899
coming in are wrong so this p and radius

1460
01:09:42,409 --> 01:09:45,949
are wrong and you know like I said

1461
01:09:44,899 --> 01:09:47,358
that's why we gonna have to start

1462
01:09:45,949 --> 01:09:51,829
drawing this because if we look at the

1463
01:09:47,359 --> 01:09:54,380
box P and the box radius here we're not

1464
01:09:51,829 --> 01:10:00,738
gonna see anything right I mean okay

1465
01:09:54,380 --> 01:10:03,440
it's a 5.5 by 0.5 by 0.5 box right do we

1466
01:10:00,738 --> 01:10:05,479
have any boxes like that I don't know

1467
01:10:03,439 --> 01:10:10,639
like a one meter by one meter by one

1468
01:10:05,479 --> 01:10:14,000
meter box right has anyone put one of

1469
01:10:10,640 --> 01:10:17,719
those in no idea maybe they have I don't

1470
01:10:14,000 --> 01:10:19,399
know so we don't really know

1471
01:10:17,719 --> 01:10:20,899
but we know that someone put it in there

1472
01:10:19,399 --> 01:10:23,509
is that reasonable or is it not we'll

1473
01:10:20,899 --> 01:10:25,488
have to find out and then this is the

1474
01:10:23,510 --> 01:10:28,010
location of the box again reasonable or

1475
01:10:25,488 --> 01:10:32,269
not no idea so I think what we need to

1476
01:10:28,010 --> 01:10:34,640
do is draw these boxes okay so we can

1477
01:10:32,270 --> 01:10:37,580
see what we actually hit tested against

1478
01:10:34,640 --> 01:10:40,160
so what I'm going to do here is inside

1479
01:10:37,579 --> 01:10:46,850
the raycast er I'm going to basically

1480
01:10:40,159 --> 01:10:50,930
have a toggle run time toggle that's

1481
01:10:46,850 --> 01:10:55,219
like debugging or something right so in

1482
01:10:50,930 --> 01:10:58,430
here I want to have a debugging just for

1483
01:10:55,219 --> 01:11:01,640
our purposes right now I'm going to turn

1484
01:10:58,430 --> 01:11:04,730
that on when we're doing just this one

1485
01:11:01,640 --> 01:11:05,750
pass and what I'm doing that pass then

1486
01:11:04,729 --> 01:11:09,019
what I'm going to do is I'm going to

1487
01:11:05,750 --> 01:11:14,719
push debug lines down to show us where

1488
01:11:09,020 --> 01:11:18,040
the actual box is right so the way I'm

1489
01:11:14,719 --> 01:11:29,090
going to do that is just do if debugging

1490
01:11:18,039 --> 01:11:32,439
I want to draw this box I also probably

1491
01:11:29,090 --> 01:11:35,440
want to say which kind of box it is

1492
01:11:32,439 --> 01:11:35,439
right

1493
01:11:42,550 --> 01:11:51,260
maybe I'll do it this way so I'm gonna

1494
01:11:47,750 --> 01:11:53,659
take a box if it has children it's gonna

1495
01:11:51,260 --> 01:11:55,730
be purple if it's not to me science so

1496
01:11:53,659 --> 01:11:58,189
the cyan boxes are gonna be ones that we

1497
01:11:55,729 --> 01:12:01,789
actually test against um and I want to

1498
01:11:58,189 --> 01:12:02,989
draw these things you know I might even

1499
01:12:01,789 --> 01:12:04,489
want to do this a little bit fancier

1500
01:12:02,989 --> 01:12:08,659
right so I might want to do a thing here

1501
01:12:04,489 --> 01:12:21,409
where we say all right set this box

1502
01:12:08,659 --> 01:12:23,269
color up here black and then maybe I

1503
01:12:21,409 --> 01:12:26,359
want to actually want to do is just set

1504
01:12:23,270 --> 01:12:30,950
the box color inside two different

1505
01:12:26,359 --> 01:12:33,939
things so if we look let's say we're

1506
01:12:30,949 --> 01:12:37,639
gonna traverse down this thing right

1507
01:12:33,939 --> 01:12:43,309
we're gonna set it to a new guess

1508
01:12:37,640 --> 01:12:44,600
another color here or if we actually hit

1509
01:12:43,310 --> 01:12:47,300
this thing we're gonna set a color here

1510
01:12:44,600 --> 01:12:52,760
so if we Traverse down it we're gonna

1511
01:12:47,300 --> 01:12:57,320
set it to purple if we don't if we hit

1512
01:12:52,760 --> 01:13:00,140
it we're gonna set it to yellow and

1513
01:12:57,319 --> 01:13:02,029
maybe we might want even more than that

1514
01:13:00,140 --> 01:13:05,480
later but you know for now we'll just

1515
01:13:02,029 --> 01:13:07,099
leave with that and then what I'm gonna

1516
01:13:05,479 --> 01:13:09,829
do is I'm going to push debug lines down

1517
01:13:07,100 --> 01:13:12,170
to just draw the box right so if we look

1518
01:13:09,829 --> 01:13:13,699
at the push debug line call we just need

1519
01:13:12,170 --> 01:13:15,859
to pass the lighting solution which we

1520
01:13:13,699 --> 01:13:18,109
have and then we're gonna have the from

1521
01:13:15,859 --> 01:13:19,939
p2p and the color so we know what the

1522
01:13:18,109 --> 01:13:20,509
box color is because we already put that

1523
01:13:19,939 --> 01:13:23,089
down

1524
01:13:20,510 --> 01:13:26,270
so you just need the from P and the to P

1525
01:13:23,090 --> 01:13:28,880
right and so to do that we kind of know

1526
01:13:26,270 --> 01:13:30,770
we can draw this by just using the box P

1527
01:13:28,880 --> 01:13:32,989
and the box radius and we computed the

1528
01:13:30,770 --> 01:13:34,370
box min and Max so I'm gonna use the Box

1529
01:13:32,989 --> 01:13:42,170
minimax since that's something we

1530
01:13:34,369 --> 01:13:50,029
actually have right so Fox min X Box min

1531
01:13:42,170 --> 01:13:52,659
Y box min Z like so we're gonna go we're

1532
01:13:50,029 --> 01:13:52,659
going to use this

1533
01:13:52,809 --> 01:13:59,679
like so and we're just gonna draw the

1534
01:13:55,719 --> 01:14:03,399
debug liens that constitute the edges of

1535
01:13:59,679 --> 01:14:05,440
the cube so we're well of the box it's

1536
01:14:03,399 --> 01:14:08,019
not a cute so if you're thinking about

1537
01:14:05,439 --> 01:14:11,189
how to draw the edges of a box right

1538
01:14:08,020 --> 01:14:14,070
well we know that we've got six phases

1539
01:14:11,189 --> 01:14:16,359
we know that we've got eight vertices

1540
01:14:14,069 --> 01:14:19,149
and we know that the edges that connect

1541
01:14:16,359 --> 01:14:21,009
them right we have four edges around one

1542
01:14:19,149 --> 01:14:22,238
side of the box four edges around the

1543
01:14:21,010 --> 01:14:25,150
other side of the box so that's eight

1544
01:14:22,238 --> 01:14:28,479
edges and then we have four more edges

1545
01:14:25,149 --> 01:14:30,939
that connect those two sides right so we

1546
01:14:28,479 --> 01:14:34,928
know we're gonna have twelve lines to

1547
01:14:30,939 --> 01:14:37,779
draw right and those lines go you know

1548
01:14:34,929 --> 01:14:40,118
between the mins and the max is only but

1549
01:14:37,779 --> 01:14:42,158
different combinations of them so for

1550
01:14:40,118 --> 01:14:44,589
example if I just wanted to draw one of

1551
01:14:42,158 --> 01:14:47,558
the Rings I could say well let's draw

1552
01:14:44,590 --> 01:14:49,659
the ring around box mean X then what I

1553
01:14:47,559 --> 01:14:53,770
would do is say well you know okay we go

1554
01:14:49,658 --> 01:15:02,339
from min Y to like max Y from Max Y -

1555
01:14:53,770 --> 01:15:10,989
max Y max Z from Max Y to max why oops

1556
01:15:02,340 --> 01:15:18,219
back to min Y is that right yeah and

1557
01:15:10,988 --> 01:15:19,959
then back to the man right and so now

1558
01:15:18,219 --> 01:15:22,239
what should happen is if I want to turn

1559
01:15:19,960 --> 01:15:24,300
this on and what are you complaining

1560
01:15:22,238 --> 01:15:24,299
about

1561
01:15:24,750 --> 01:15:34,000
none of the over those convert all of

1562
01:15:26,948 --> 01:15:39,939
the types oh right so yeah that's a v3

1563
01:15:34,000 --> 01:15:46,198
so I need to extract just one component

1564
01:15:39,939 --> 01:15:46,198
of this I assume I can do that

1565
01:15:51,640 --> 01:16:08,390
just test to see if that works yeah so I

1566
01:16:02,090 --> 01:16:20,239
should be good now I'm just gonna go get

1567
01:16:08,390 --> 01:16:21,920
out from behind my now smaller head and

1568
01:16:20,239 --> 01:16:26,359
I do need to get the push debug line

1569
01:16:21,920 --> 01:16:33,770
call up one because we're now calling it

1570
01:16:26,359 --> 01:16:36,259
from inside the red caster all right so

1571
01:16:33,770 --> 01:16:39,410
now if I run it what I should see is one

1572
01:16:36,260 --> 01:16:40,039
ring you know four boxes that I'm

1573
01:16:39,409 --> 01:16:47,449
drawing here

1574
01:16:40,039 --> 01:16:48,470
I should see one ring I'm gonna skip

1575
01:16:47,449 --> 01:16:50,119
stepping through here I just want to

1576
01:16:48,470 --> 01:16:53,119
look and see what it draws right I

1577
01:16:50,119 --> 01:16:55,430
should see one ring for each box as I

1578
01:16:53,119 --> 01:16:57,229
process it if I turn on that debug flag

1579
01:16:55,430 --> 01:16:59,300
so right now I'm not seeing anything I'm

1580
01:16:57,229 --> 01:17:00,709
gonna go over here I'm also gonna I

1581
01:16:59,300 --> 01:17:02,270
don't need to be in debug mode for a

1582
01:17:00,710 --> 01:17:05,199
while while I'm looking at these

1583
01:17:02,270 --> 01:17:08,230
diagrams I can just do it directly so

1584
01:17:05,199 --> 01:17:10,849
we're we call this ray cast function now

1585
01:17:08,229 --> 01:17:12,369
not there that's the regular one that

1586
01:17:10,850 --> 01:17:14,829
we're gonna try and get to eventually

1587
01:17:12,369 --> 01:17:19,130
I'm just gonna pass true for debugging

1588
01:17:14,829 --> 01:17:26,119
and so now when we actually build we

1589
01:17:19,130 --> 01:17:28,489
should be able to oh you know what I

1590
01:17:26,119 --> 01:17:30,289
realized that was wrong way too many

1591
01:17:28,489 --> 01:17:31,909
lines what I meant is is test case

1592
01:17:30,289 --> 01:17:33,529
because I only want to draw them on the

1593
01:17:31,909 --> 01:17:35,809
test case sorry about that

1594
01:17:33,529 --> 01:17:37,789
forgot about that I'm just like oh we

1595
01:17:35,810 --> 01:17:38,660
want to draw them only wanted wrote on

1596
01:17:37,789 --> 01:17:41,689
the test case should there be way too

1597
01:17:38,659 --> 01:17:44,059
many um so what you can see here is

1598
01:17:41,689 --> 01:17:46,339
we're drawing the boxes now right but

1599
01:17:44,060 --> 01:17:52,039
we're only drawing like one ring of the

1600
01:17:46,340 --> 01:17:54,739
box right right away you can see there's

1601
01:17:52,039 --> 01:17:56,899
some weirdness going on here right so

1602
01:17:54,739 --> 01:17:58,639
that's not probably good but you know

1603
01:17:56,899 --> 01:17:59,329
let's finish drawing this first and and

1604
01:17:58,640 --> 01:18:02,570
we'll go from there

1605
01:17:59,329 --> 01:18:04,369
so gonna jump back to the raycast

1606
01:18:02,569 --> 01:18:05,899
don't ask me why close the program

1607
01:18:04,369 --> 01:18:09,109
doctor we can't just leave the program

1608
01:18:05,899 --> 01:18:11,539
running and in here I was gonna draw the

1609
01:18:09,109 --> 01:18:14,149
rest of these right so there's our box

1610
01:18:11,539 --> 01:18:21,079
min and Max stuff let's draw one more

1611
01:18:14,149 --> 01:18:26,739
ring oops so this is just the

1612
01:18:21,079 --> 01:18:30,140
corresponding ring so now it should draw

1613
01:18:26,739 --> 01:18:35,119
two rings per box and they can kind of

1614
01:18:30,140 --> 01:18:36,950
see them happening there right and some

1615
01:18:35,119 --> 01:18:38,989
of these make some sense like those look

1616
01:18:36,949 --> 01:18:42,260
like big bounding boxes what which is

1617
01:18:38,989 --> 01:18:44,809
what we would expect right others not so

1618
01:18:42,260 --> 01:18:47,239
much like I'm not sure what that box

1619
01:18:44,810 --> 01:18:49,520
could be and that kind of suggests to me

1620
01:18:47,239 --> 01:18:50,719
that our box positions are bad because

1621
01:18:49,520 --> 01:18:52,280
if you look at what's going on there

1622
01:18:50,720 --> 01:18:54,380
like it looks like it's hitting a box

1623
01:18:52,279 --> 01:18:57,739
that actually does exist so that

1624
01:18:54,380 --> 01:18:59,690
suggests that our box Pease is wrong you

1625
01:18:57,739 --> 01:19:02,599
know what I mean like like we got some

1626
01:18:59,689 --> 01:19:04,939
issues that's fine we'll deal with that

1627
01:19:02,600 --> 01:19:07,700
in a second but you know let's finish

1628
01:19:04,939 --> 01:19:11,299
drawing our boxes first so then it'll

1629
01:19:07,699 --> 01:19:13,369
come through here I'll draw the last set

1630
01:19:11,300 --> 01:19:16,909
and what this is going to be is this is

1631
01:19:13,369 --> 01:19:19,309
just drawing between the min and Max X

1632
01:19:16,909 --> 01:19:22,670
so that means that here we're gonna keep

1633
01:19:19,310 --> 01:19:29,120
the same thing for each of these right

1634
01:19:22,670 --> 01:19:39,369
so we're gonna do min min max min Max

1635
01:19:29,119 --> 01:19:41,779
Max and Max min yeah sorry min max yeah

1636
01:19:39,369 --> 01:19:43,939
and here we're just drawing between the

1637
01:19:41,779 --> 01:19:45,829
X rings cuz we drew one ring around min

1638
01:19:43,939 --> 01:19:47,839
x one ring around max X and now we just

1639
01:19:45,829 --> 01:19:51,289
need to connect those two up and now

1640
01:19:47,840 --> 01:19:53,180
we've got a full box drawn so now when

1641
01:19:51,289 --> 01:19:55,760
the live code reloading reloads the

1642
01:19:53,180 --> 01:19:59,450
changes you can see here now we've got

1643
01:19:55,760 --> 01:20:03,409
like boxes and like I said some of them

1644
01:19:59,449 --> 01:20:06,229
look correct so like if you look at the

1645
01:20:03,409 --> 01:20:13,789
bounds here it does look like we had a

1646
01:20:06,229 --> 01:20:15,399
box that contained well you know I'm not

1647
01:20:13,789 --> 01:20:20,500
sure

1648
01:20:15,399 --> 01:20:28,750
I guess I'm not sure why this region

1649
01:20:20,500 --> 01:20:31,270
doesn't look contained so I will say I'm

1650
01:20:28,750 --> 01:20:33,010
a little weirded out by some of this

1651
01:20:31,270 --> 01:20:34,739
because if you look at what's going on

1652
01:20:33,010 --> 01:20:38,770
like some of it looks pretty good so

1653
01:20:34,738 --> 01:20:40,569
right you've got like boxes here in here

1654
01:20:38,770 --> 01:20:43,090
that appear to perfectly bound the world

1655
01:20:40,569 --> 01:20:45,340
the way I would expect but there's

1656
01:20:43,090 --> 01:20:47,980
nothing containing this part of the

1657
01:20:45,340 --> 01:20:50,409
world over here and if you look at the

1658
01:20:47,979 --> 01:20:52,539
lighting bounds anyway

1659
01:20:50,408 --> 01:20:57,039
the lighting bounds at least do extend

1660
01:20:52,539 --> 01:20:59,380
out to there so I'm not super sure oh

1661
01:20:57,039 --> 01:21:01,779
you know what no it's okay it's just

1662
01:20:59,380 --> 01:21:04,118
faint so there it is you can see there's

1663
01:21:01,779 --> 01:21:08,309
a black bar okay so it is they just

1664
01:21:04,118 --> 01:21:12,069
worked reversed so that's fine all right

1665
01:21:08,310 --> 01:21:13,869
so if you look at the hits here you can

1666
01:21:12,069 --> 01:21:15,969
see we hit this one because it's too far

1667
01:21:13,868 --> 01:21:18,189
away we did a hit against that one we

1668
01:21:15,969 --> 01:21:20,020
then sort of Traverse down you can see

1669
01:21:18,189 --> 01:21:22,178
exactly the pattern here we kept

1670
01:21:20,020 --> 01:21:25,840
traversing down we've got people who are

1671
01:21:22,179 --> 01:21:27,340
enclosing our light cubes and that

1672
01:21:25,840 --> 01:21:29,710
doesn't really make any sense but that's

1673
01:21:27,340 --> 01:21:32,319
what was actually happening there this

1674
01:21:29,710 --> 01:21:34,380
cube I don't know what the heck is going

1675
01:21:32,319 --> 01:21:38,259
on there

1676
01:21:34,380 --> 01:21:40,630
let's try to determine which kind of box

1677
01:21:38,260 --> 01:21:42,310
that is I don't know where that box is

1678
01:21:40,630 --> 01:21:43,929
coming from it doesn't look like a bound

1679
01:21:42,310 --> 01:21:46,389
so it looks like a box

1680
01:21:43,929 --> 01:21:53,170
someone actually stuck into the system

1681
01:21:46,389 --> 01:21:57,730
that's it like just the wrong place yeah

1682
01:21:53,170 --> 01:21:59,889
you got me man so you come in here we're

1683
01:21:57,729 --> 01:22:01,988
taking a look at this box here what I

1684
01:21:59,889 --> 01:22:04,230
want to do is say okay this box color

1685
01:22:01,988 --> 01:22:07,029
it's going to come out as zero zero zero

1686
01:22:04,229 --> 01:22:08,829
and then when we come in here we're

1687
01:22:07,029 --> 01:22:11,500
gonna set it if we're gonna traverse it

1688
01:22:08,829 --> 01:22:14,198
to this or if we hit it to this what I

1689
01:22:11,500 --> 01:22:16,868
don't like is if we hit the box I want

1690
01:22:14,198 --> 01:22:18,759
to know whether or not it was a actual

1691
01:22:16,868 --> 01:22:22,238
aggregate box or not that's the thing I

1692
01:22:18,760 --> 01:22:24,190
wanted to know so basically like in this

1693
01:22:22,238 --> 01:22:25,928
case I want to say if it had a child

1694
01:22:24,189 --> 01:22:27,419
count I want to see one thing and if I

1695
01:22:25,929 --> 01:22:29,310
if it wasn't I want to you know

1696
01:22:27,420 --> 01:22:33,389
so what I'm going to do is I'm going to

1697
01:22:29,310 --> 01:22:37,650
set it to cyan in the case where we like

1698
01:22:33,389 --> 01:22:40,350
if if the box in question is actually a

1699
01:22:37,649 --> 01:22:43,289
container box that we are just testing

1700
01:22:40,350 --> 01:22:45,510
against because of the farness or not

1701
01:22:43,289 --> 01:22:47,399
for this in this over way and then I

1702
01:22:45,510 --> 01:22:48,840
only want to see as yellow so you can

1703
01:22:47,399 --> 01:22:50,219
see that happening here right like that

1704
01:22:48,840 --> 01:22:51,630
was a box that we just said well it's

1705
01:22:50,219 --> 01:22:53,789
too far away so we test against it right

1706
01:22:51,630 --> 01:22:57,210
get the but if it's a box that's close

1707
01:22:53,789 --> 01:22:59,519
enough to be tested all the way down and

1708
01:22:57,210 --> 01:23:01,408
we hit against an actual box in the end

1709
01:22:59,520 --> 01:23:04,080
that's right here you can see that

1710
01:23:01,408 --> 01:23:05,729
happening so something's busted that's

1711
01:23:04,079 --> 01:23:07,850
just wrong

1712
01:23:05,729 --> 01:23:12,000
that's saying that there was an actual

1713
01:23:07,850 --> 01:23:15,300
physical box placed there by the game

1714
01:23:12,000 --> 01:23:18,060
and it is asking us to collide against

1715
01:23:15,300 --> 01:23:22,199
it right furthermore our light probes

1716
01:23:18,060 --> 01:23:24,119
themselves because they are that would

1717
01:23:22,198 --> 01:23:26,779
explain a lot of that pockmarking as

1718
01:23:24,118 --> 01:23:29,519
well our light probes themselves are

1719
01:23:26,779 --> 01:23:32,579
actually considered colliders that's a

1720
01:23:29,520 --> 01:23:35,250
mistake we didn't want that so we should

1721
01:23:32,579 --> 01:23:43,050
probably go ahead and eliminate those as

1722
01:23:35,250 --> 01:23:44,819
well so like that has to happen so yeah

1723
01:23:43,050 --> 01:23:47,219
we got a couple of different things we

1724
01:23:44,819 --> 01:23:50,279
got to do now let's start by removing

1725
01:23:47,219 --> 01:23:52,739
those from the system and see what

1726
01:23:50,279 --> 01:23:55,800
happens I'm not sure and then this will

1727
01:23:52,738 --> 01:24:00,238
probably remain and and then off we go

1728
01:23:55,800 --> 01:24:02,639
so in the push cube Hall you can see in

1729
01:24:00,238 --> 01:24:05,789
the push cube call we're passing this

1730
01:24:02,639 --> 01:24:07,859
down here and we don't really want that

1731
01:24:05,789 --> 01:24:10,979
like we don't want this thing to be an

1732
01:24:07,859 --> 01:24:13,738
actual occluder I don't really know how

1733
01:24:10,979 --> 01:24:15,868
we want to handle that I also don't know

1734
01:24:13,738 --> 01:24:17,638
what the hey the Z bias needs to be

1735
01:24:15,868 --> 01:24:20,368
there for anymore but I guess we were

1736
01:24:17,639 --> 01:24:22,710
doing some stuff with that for rendering

1737
01:24:20,368 --> 01:24:26,039
purposes but I want to look at the

1738
01:24:22,710 --> 01:24:28,469
places we're calling push cube I don't

1739
01:24:26,039 --> 01:24:34,880
think there's that many of them and what

1740
01:24:28,469 --> 01:24:37,469
you can see here is if I go global on it

1741
01:24:34,880 --> 01:24:40,829
the places we're calling it like other

1742
01:24:37,469 --> 01:24:45,960
than the render test code right I

1743
01:24:40,829 --> 01:24:47,460
inside like yeah inside the asset

1744
01:24:45,960 --> 01:24:49,289
rendering and the enemy code you can see

1745
01:24:47,460 --> 01:24:50,970
exact where they called I want to know

1746
01:24:49,289 --> 01:24:53,489
which ones of those actually want

1747
01:24:50,970 --> 01:24:55,890
collision geometry right we don't care

1748
01:24:53,489 --> 01:25:02,639
about that you don't care about this

1749
01:24:55,890 --> 01:25:07,520
stuff and what I think we might want is

1750
01:25:02,640 --> 01:25:07,520
like an actual occluder call here right

1751
01:25:16,159 --> 01:25:31,979
yeah I mean I guess what I would say

1752
01:25:24,420 --> 01:25:34,380
probably I guess what I would say is

1753
01:25:31,979 --> 01:25:36,929
probably what we want here is something

1754
01:25:34,380 --> 01:25:39,300
where only you know we can where we only

1755
01:25:36,930 --> 01:25:41,700
push occluder stuff on when we actually

1756
01:25:39,300 --> 01:25:43,980
wanted to right cuz I can turn that off

1757
01:25:41,699 --> 01:25:48,239
but what I really want is like only

1758
01:25:43,979 --> 01:25:51,000
these things would have occluders on

1759
01:25:48,239 --> 01:25:54,149
them right so when we call push cube

1760
01:25:51,000 --> 01:25:56,069
here we would say like you know a flag

1761
01:25:54,149 --> 01:25:58,379
or something that says that this thing

1762
01:25:56,069 --> 01:26:05,369
is going to be included or you know we

1763
01:25:58,380 --> 01:26:11,909
do like that there right because if you

1764
01:26:05,369 --> 01:26:14,609
look in push cube this is the only code

1765
01:26:11,909 --> 01:26:17,309
that actually cares about it right so I

1766
01:26:14,609 --> 01:26:22,229
kind of feel like that code really wants

1767
01:26:17,310 --> 01:26:24,690
to be its own path so I think I might do

1768
01:26:22,229 --> 01:26:27,689
that so in here we would say like look

1769
01:26:24,689 --> 01:26:30,500
get rid of this right have a thing on

1770
01:26:27,689 --> 01:26:30,500
here and it's like

1771
01:26:35,500 --> 01:26:46,579
like that and this will actually be the

1772
01:26:41,210 --> 01:26:48,739
code we care about so we'll say is the

1773
01:26:46,579 --> 01:26:51,470
lighting enabled letting it enable is

1774
01:26:48,739 --> 01:26:57,769
enabled will you know do what we have to

1775
01:26:51,470 --> 01:27:00,890
do here we need to know some stuff like

1776
01:26:57,770 --> 01:27:04,280
we need to know what the color is so

1777
01:27:00,890 --> 01:27:06,560
that's got to be on there we need to

1778
01:27:04,279 --> 01:27:09,259
know what the P and the radius R so

1779
01:27:06,560 --> 01:27:10,160
let's get those on there but other than

1780
01:27:09,260 --> 01:27:14,360
that I don't think you really need to

1781
01:27:10,159 --> 01:27:16,809
pass much and this way we'll only do it

1782
01:27:14,359 --> 01:27:20,689
when we really actually need to write

1783
01:27:16,810 --> 01:27:24,050
the texture index you don't know if we

1784
01:27:20,689 --> 01:27:25,219
actually want to ever use those I'm

1785
01:27:24,050 --> 01:27:27,350
gonna go ahead and guess that we

1786
01:27:25,220 --> 01:27:28,670
probably don't really I think we can't

1787
01:27:27,350 --> 01:27:30,710
afford to do texture lookups in the

1788
01:27:28,670 --> 01:27:33,619
right caster so I'm gonna get rid of

1789
01:27:30,710 --> 01:27:39,760
that for now and I'm gonna say that we

1790
01:27:33,619 --> 01:27:42,590
we just really have that P radius R FC

1791
01:27:39,760 --> 01:27:44,329
is all we're gonna actually initialize

1792
01:27:42,590 --> 01:27:45,980
right in fact I could leave these in

1793
01:27:44,329 --> 01:27:55,600
here temporarily but I think we're gonna

1794
01:27:45,979 --> 01:27:55,599
want to get rid of these like so

1795
01:27:58,770 --> 01:28:15,699
all right this will literally just push

1796
01:28:09,789 --> 01:28:18,130
exactly the same thing right so I'm just

1797
01:28:15,698 --> 01:28:30,638
gonna I'm gonna put these into variables

1798
01:28:18,130 --> 01:28:32,350
that I can pass to both and then we're

1799
01:28:30,639 --> 01:28:35,859
gonna try and figure out what's going on

1800
01:28:32,350 --> 01:28:36,820
here so yeah what what are you

1801
01:28:35,859 --> 01:28:38,349
complaining about

1802
01:28:36,819 --> 01:28:48,069
what is the missions supposed to be it's

1803
01:28:38,350 --> 01:28:51,820
not just a single value yeah all right

1804
01:28:48,069 --> 01:28:53,590
so render group p value and then it

1805
01:28:51,819 --> 01:29:03,639
needs the color and then we're good to

1806
01:28:53,590 --> 01:29:09,300
go and now we shouldn't have those

1807
01:29:03,639 --> 01:29:09,300
bounce anymore yeah and we don't write

1808
01:29:16,800 --> 01:29:20,489
so I think

1809
01:29:29,679 --> 01:29:34,340
so I mean I guess that's good in a sense

1810
01:29:32,238 --> 01:29:36,768
but I probably need to temper it now

1811
01:29:34,340 --> 01:29:39,050
that I have that which I need working I

1812
01:29:36,769 --> 01:29:41,150
think I kind of temporarily want to

1813
01:29:39,050 --> 01:29:44,538
re-enable it though because I to debug

1814
01:29:41,149 --> 01:29:46,518
that sort of bad case right because that

1815
01:29:44,538 --> 01:29:48,408
case still looked wrong and I just kind

1816
01:29:46,519 --> 01:29:51,139
of need it to still be doing what it's

1817
01:29:48,408 --> 01:29:53,868
doing so that I can figure out what why

1818
01:29:51,139 --> 01:29:57,940
we actually got boxes placed in those

1819
01:29:53,868 --> 01:30:02,748
locations for no apparent reason right

1820
01:29:57,939 --> 01:30:04,669
and and I'm not sure yeah like let me

1821
01:30:02,748 --> 01:30:06,889
turn on lighting briefly so I can also

1822
01:30:04,670 --> 01:30:08,630
just see what our current status is

1823
01:30:06,889 --> 01:30:13,609
because I'm not actually sure what that

1824
01:30:08,630 --> 01:30:19,659
will look like either but if I go ahead

1825
01:30:13,609 --> 01:30:19,658
and and recompile this guy

1826
01:30:29,350 --> 01:30:39,960
that seems nonsensical so now you're

1827
01:30:37,600 --> 01:30:39,960
telling me

1828
01:30:44,658 --> 01:30:56,509
now you're telling me there is no

1829
01:30:46,519 --> 01:31:04,958
waiting what am I missing

1830
01:30:56,510 --> 01:31:04,958
oh why that's not what it's saying uh

1831
01:31:05,139 --> 01:31:10,699
that's just because we threw everything

1832
01:31:07,038 --> 01:31:12,469
out so yeah in this case we're not

1833
01:31:10,698 --> 01:31:13,848
actually doing the test for whether or

1834
01:31:12,469 --> 01:31:17,328
not the thing actually hit so you can

1835
01:31:13,849 --> 01:31:19,599
see here we would still need to do this

1836
01:31:17,328 --> 01:31:19,599
right

1837
01:31:22,059 --> 01:31:27,320
so that makes more sense so I just want

1838
01:31:25,189 --> 01:31:29,269
to see what happens so I can know to

1839
01:31:27,319 --> 01:31:33,018
what extent we're getting erroneous

1840
01:31:29,269 --> 01:31:34,369
recasting now versus not so it looks to

1841
01:31:33,019 --> 01:31:37,909
me like we're still getting those

1842
01:31:34,368 --> 01:31:41,688
erroneous cases they're different now to

1843
01:31:37,908 --> 01:31:44,238
be sure but you know it's still kind of

1844
01:31:41,689 --> 01:31:48,139
a little odd right what we're seeing

1845
01:31:44,238 --> 01:31:50,058
there so I I could I guess what I could

1846
01:31:48,139 --> 01:31:53,179
do is double check now if I can just

1847
01:31:50,059 --> 01:31:55,939
switch back and debug a different rate

1848
01:31:53,179 --> 01:32:00,199
case so let me look really quickly and

1849
01:31:55,939 --> 01:32:00,939
see if I can just do bug a different one

1850
01:32:00,198 --> 01:32:03,918
first

1851
01:32:00,939 --> 01:32:06,168
because if I can then it's good to get

1852
01:32:03,918 --> 01:32:08,059
those extraneous things out of the tree

1853
01:32:06,168 --> 01:32:09,648
so I'm not like constantly wondering

1854
01:32:08,059 --> 01:32:12,168
like why is there this little box there

1855
01:32:09,649 --> 01:32:19,219
or whatever so I would like to see if

1856
01:32:12,168 --> 01:32:21,559
there is a way of is easily now without

1857
01:32:19,219 --> 01:32:24,708
those seeing the same error and then

1858
01:32:21,559 --> 01:32:26,179
picking out a new test case but if there

1859
01:32:24,708 --> 01:32:29,208
isn't then we'll just regress to the

1860
01:32:26,179 --> 01:32:30,859
previous test case right so let me just

1861
01:32:29,208 --> 01:32:40,119
see what's up there

1862
01:32:30,859 --> 01:32:40,119
right so I'm going to look at this case

1863
01:32:51,630 --> 01:33:04,380
and now we should see another one of

1864
01:32:53,640 --> 01:33:08,640
those now we should see another one of

1865
01:33:04,380 --> 01:33:10,199
those sort of exploding balls of lines

1866
01:33:08,640 --> 01:33:13,980
like radiating outwards like a little

1867
01:33:10,199 --> 01:33:17,519
Sun right uh and what you can see here

1868
01:33:13,979 --> 01:33:28,369
is looking at you know what we're

1869
01:33:17,520 --> 01:33:32,550
looking at here is all of these are

1870
01:33:28,369 --> 01:33:36,989
showing up as black which doesn't make a

1871
01:33:32,550 --> 01:33:40,470
lot of sense because they should be

1872
01:33:36,989 --> 01:33:44,939
hitting something and the fact that

1873
01:33:40,470 --> 01:33:49,530
they're not is not a good sign right

1874
01:33:44,939 --> 01:33:51,719
so looking at yeah like you know now we

1875
01:33:49,529 --> 01:33:53,909
kind of have a weird and and I honestly

1876
01:33:51,720 --> 01:33:56,010
I'm not sure why we are even seeing what

1877
01:33:53,909 --> 01:33:58,019
we're seeing here but if you look right

1878
01:33:56,010 --> 01:34:00,050
you're seeing like some of these are

1879
01:33:58,020 --> 01:34:03,189
hitting something

1880
01:34:00,050 --> 01:34:03,189
[Music]

1881
01:34:14,670 --> 01:34:27,130
and that's very peculiar I'm also not

1882
01:34:25,600 --> 01:34:33,039
sure wait are we having some kind of

1883
01:34:27,130 --> 01:34:38,489
compile error here like why is the

1884
01:34:33,039 --> 01:34:46,600
lighting oh right because I'm an idiot

1885
01:34:38,489 --> 01:34:54,760
let's try recompiling that again so if I

1886
01:34:46,600 --> 01:35:00,270
look now and I should see more things

1887
01:34:54,760 --> 01:35:00,270
getting hit you know I really don't

1888
01:35:09,599 --> 01:35:18,150
so yeah I guess looking now I'm having

1889
01:35:13,380 --> 01:35:29,159
trouble now seeing error arrays I want

1890
01:35:18,149 --> 01:35:36,420
to try and find like errors and if you

1891
01:35:29,158 --> 01:35:39,359
look I guess I would say the error now

1892
01:35:36,420 --> 01:35:43,880
mostly appears more to be things that

1893
01:35:39,359 --> 01:35:43,880
are saying they aren't hitting anything

1894
01:35:45,408 --> 01:35:50,309
right I mean a lot of these should

1895
01:35:48,389 --> 01:35:52,260
probably there should be yellow lines

1896
01:35:50,310 --> 01:35:56,030
coming out in this direction like all of

1897
01:35:52,260 --> 01:35:56,030
this stuff should be hitting and isn't

1898
01:35:56,359 --> 01:36:05,250
right so if I restart and just look at

1899
01:36:01,319 --> 01:36:06,658
this startup location I should be able

1900
01:36:05,250 --> 01:36:08,969
to pretty trivially find one that's

1901
01:36:06,658 --> 01:36:10,198
erroneous right like one that this

1902
01:36:08,969 --> 01:36:13,230
thinks it didn't hit anything but

1903
01:36:10,198 --> 01:36:16,109
definitely did right and it's a little

1904
01:36:13,229 --> 01:36:17,578
hard to find because it's you've got to

1905
01:36:16,109 --> 01:36:20,179
kind of look inside we almost need like

1906
01:36:17,578 --> 01:36:23,099
a wireframe mode for looking at these

1907
01:36:20,179 --> 01:36:25,940
because figuring out something that's

1908
01:36:23,099 --> 01:36:25,940
sort of inside

1909
01:36:32,670 --> 01:36:37,649
those look like they're stopping right

1910
01:36:34,829 --> 01:36:41,600
there - like like as if they did hit but

1911
01:36:37,649 --> 01:36:41,599
they're being drawn is not having hit

1912
01:36:48,769 --> 01:36:52,969
very confusing to be honest I have no

1913
01:36:51,498 --> 01:36:56,260
idea what I'm looking at right now this

1914
01:36:52,969 --> 01:36:59,868
makes no sense to me what I'm viewing I

1915
01:36:56,260 --> 01:37:01,489
mean like that all looks correct right I

1916
01:36:59,868 --> 01:37:04,339
mean all of those things correctly

1917
01:37:01,488 --> 01:37:09,288
cannot hit the light source so that's

1918
01:37:04,340 --> 01:37:12,110
not weird but like all of these I guess

1919
01:37:09,288 --> 01:37:15,710
are they just happening to coincide with

1920
01:37:12,109 --> 01:37:17,899
like oh no they can't possibly I mean

1921
01:37:15,710 --> 01:37:19,609
this doesn't even make sense like these

1922
01:37:17,899 --> 01:37:21,888
are supposed to be casting from voxel

1923
01:37:19,609 --> 01:37:24,558
centers how on earth are we getting

1924
01:37:21,889 --> 01:37:27,519
these values like like something sums up

1925
01:37:24,559 --> 01:37:27,519
let's take a look

1926
01:37:28,578 --> 01:37:32,868
so this hit value here where we're

1927
01:37:30,948 --> 01:37:34,158
looking at the T ray value and comparing

1928
01:37:32,868 --> 01:37:35,689
it to the light distance that's the

1929
01:37:34,158 --> 01:37:38,299
thing that's telling us whether we hit

1930
01:37:35,689 --> 01:37:40,788
something or not whether we hit

1931
01:37:38,300 --> 01:37:45,380
something before or after the light

1932
01:37:40,788 --> 01:37:47,899
source and the way we're drawing it is

1933
01:37:45,380 --> 01:37:54,710
we're drawing it from wherever the

1934
01:37:47,899 --> 01:37:57,319
casting start was right and then we're

1935
01:37:54,710 --> 01:38:01,219
drawing it to wherever it the hit was

1936
01:37:57,319 --> 01:38:03,618
reported we shouldn't even be able to be

1937
01:38:01,219 --> 01:38:05,210
producing those lines like the lines

1938
01:38:03,618 --> 01:38:07,759
we're producing don't even seem like

1939
01:38:05,210 --> 01:38:09,230
they don't they should we shouldn't be

1940
01:38:07,760 --> 01:38:12,769
able to be producing those Fox

1941
01:38:09,229 --> 01:38:15,589
centerpiece in the first place so I'm

1942
01:38:12,769 --> 01:38:18,199
super confused right now

1943
01:38:15,590 --> 01:38:20,659
and maybe I'm just misunderstanding

1944
01:38:18,198 --> 01:38:24,969
something about how sparse the voxel is

1945
01:38:20,658 --> 01:38:24,969
but it doesn't make sense like

1946
01:38:29,630 --> 01:38:35,670
let's suppose all we did was just share

1947
01:38:32,550 --> 01:38:38,360
the voxels so we took the Vox Center P

1948
01:38:35,670 --> 01:38:41,550
and we did a push debug line on it and

1949
01:38:38,359 --> 01:38:44,069
like I'm just gonna literally say

1950
01:38:41,550 --> 01:38:47,010
alright forget about where you were

1951
01:38:44,069 --> 01:38:52,049
drawing it to just take the Vox Center

1952
01:38:47,010 --> 01:38:55,829
p-value and add some very small number

1953
01:38:52,050 --> 01:38:57,809
right like very very small number in Z

1954
01:38:55,828 --> 01:39:01,170
and just just so you're basically just

1955
01:38:57,809 --> 01:39:03,119
drawing a tick mark right and that's all

1956
01:39:01,170 --> 01:39:05,989
I'm all I'm asking for so we're not

1957
01:39:03,118 --> 01:39:10,019
actually drawing a recast line anymore

1958
01:39:05,988 --> 01:39:11,698
just draw those tick marks right and so

1959
01:39:10,020 --> 01:39:15,119
if you look at where the tick marks

1960
01:39:11,698 --> 01:39:20,339
actually are right those are the casting

1961
01:39:15,118 --> 01:39:23,698
locations and so just based on that like

1962
01:39:20,340 --> 01:39:27,650
how are we getting those lines we were

1963
01:39:23,698 --> 01:39:27,649
seeing it doesn't make very much sense

1964
01:39:31,520 --> 01:39:48,809
if I leave those on so let's do this

1965
01:39:38,960 --> 01:39:52,050
here's the tick marks now draw the cast

1966
01:39:48,809 --> 01:39:53,550
lines I should only see things coming

1967
01:39:52,050 --> 01:39:55,770
out of tick marks right there should be

1968
01:39:53,550 --> 01:40:04,139
nothing coming out of a place that

1969
01:39:55,770 --> 01:40:08,329
doesn't have a tick mark on it we can

1970
01:40:04,139 --> 01:40:08,328
make this a little bigger like so

1971
01:40:16,680 --> 01:40:21,480
so you can see that the tick mark shows

1972
01:40:20,010 --> 01:40:28,860
me where the thing should have started

1973
01:40:21,479 --> 01:40:32,879
right so first of all like total

1974
01:40:28,859 --> 01:40:35,399
nonsensical results this right here like

1975
01:40:32,880 --> 01:40:38,100
doesn't have any line coming out of it

1976
01:40:35,399 --> 01:40:43,500
at all so that doesn't really make any

1977
01:40:38,100 --> 01:40:50,450
sense furthermore like there's like

1978
01:40:43,500 --> 01:40:55,680
lines that appear to go nowhere like

1979
01:40:50,449 --> 01:41:00,659
like that line literally stops right

1980
01:40:55,680 --> 01:41:08,340
there right and there is no tick mark

1981
01:41:00,659 --> 01:41:10,550
for it period so something is very wrong

1982
01:41:08,340 --> 01:41:10,550
here

1983
01:41:17,100 --> 01:41:24,579
so the next thing I guess I want to do

1984
01:41:19,420 --> 01:41:29,109
is I want to draw a normal so if I go

1985
01:41:24,579 --> 01:41:32,199
ahead and take this case here and what I

1986
01:41:29,109 --> 01:41:33,759
want to do is say alright like here's

1987
01:41:32,199 --> 01:41:37,359
the tick mark that shows where it is

1988
01:41:33,760 --> 01:41:39,460
right and then let me also draw like

1989
01:41:37,359 --> 01:41:43,000
something that tells me what direction

1990
01:41:39,460 --> 01:41:45,550
it was trying to head in so there's this

1991
01:41:43,000 --> 01:41:47,800
light normal end right and so what I

1992
01:41:45,550 --> 01:41:51,730
want to do is draw a small directional

1993
01:41:47,800 --> 01:41:57,699
arrow in the direction of that light end

1994
01:41:51,729 --> 01:42:00,369
right so we've got what amounts to let's

1995
01:41:57,699 --> 01:42:09,939
see a purple one here I'm gonna go ahead

1996
01:42:00,369 --> 01:42:13,599
and put that in like so and I will draw

1997
01:42:09,939 --> 01:42:15,669
a small normal in that direction but

1998
01:42:13,600 --> 01:42:16,900
something's busted now so we need to

1999
01:42:15,670 --> 01:42:18,940
like fix this

2000
01:42:16,899 --> 01:42:21,009
whatever we're seeing here we need to

2001
01:42:18,939 --> 01:42:23,769
make this congruent first or there we're

2002
01:42:21,010 --> 01:42:26,500
not gonna get anywhere so here's our

2003
01:42:23,770 --> 01:42:28,570
debug display and you can now see that

2004
01:42:26,500 --> 01:42:31,300
we've got like you know which direction

2005
01:42:28,569 --> 01:42:35,759
we were casting in and the tick mark and

2006
01:42:31,300 --> 01:42:37,480
so I mean this is just a garbage

2007
01:42:35,760 --> 01:42:41,770
situation that we're getting here

2008
01:42:37,479 --> 01:42:43,389
because we're getting a cast like for

2009
01:42:41,770 --> 01:42:45,010
some how we're drawing stuff that's

2010
01:42:43,390 --> 01:42:48,039
totally doesn't line up with what we

2011
01:42:45,010 --> 01:42:49,570
think it should be right like I mean

2012
01:42:48,039 --> 01:42:51,369
these are the locations were supposed to

2013
01:42:49,569 --> 01:42:55,000
be casting from what the heck is all

2014
01:42:51,369 --> 01:42:59,739
this garbage it doesn't even make any

2015
01:42:55,000 --> 01:43:01,180
sense right you know if I if I look in

2016
01:42:59,739 --> 01:43:03,279
here we're not even getting a line

2017
01:43:01,180 --> 01:43:05,260
that's coming out of there and what's

2018
01:43:03,279 --> 01:43:13,199
even weirder is we know that these lines

2019
01:43:05,260 --> 01:43:17,520
have to start from Vox Center P so I am

2020
01:43:13,199 --> 01:43:17,519
totally confused now

2021
01:43:29,180 --> 01:43:38,670
I'll be honest I do not know I do not

2022
01:43:35,279 --> 01:43:41,399
know how we're seeing that result the

2023
01:43:38,670 --> 01:43:44,369
debug lines all start at Vox Center P

2024
01:43:41,399 --> 01:43:55,948
these two are correctly starting there

2025
01:43:44,369 --> 01:43:59,579
this one somehow is not so let's go

2026
01:43:55,948 --> 01:44:02,129
ahead and isolate one person and find

2027
01:43:59,579 --> 01:44:04,769
out what the heck is happening so if I

2028
01:44:02,130 --> 01:44:07,050
look in here I'm gonna do the same thing

2029
01:44:04,770 --> 01:44:09,570
I did before I'm gonna try and pick

2030
01:44:07,050 --> 01:44:13,350
whoever the easiest person is I can pick

2031
01:44:09,569 --> 01:44:14,698
and I'm gonna try and figure out what

2032
01:44:13,350 --> 01:44:17,310
the heck is happening with them right

2033
01:44:14,698 --> 01:44:19,799
and one thing that's kind of nice is I'm

2034
01:44:17,310 --> 01:44:22,410
looking at this guy right here right and

2035
01:44:19,800 --> 01:44:26,010
there's nothing emanating from him at

2036
01:44:22,409 --> 01:44:27,659
all at all right and what I would expect

2037
01:44:26,010 --> 01:44:30,510
to see is I'd expect to see the line

2038
01:44:27,659 --> 01:44:33,238
like hit this thing or something right I

2039
01:44:30,510 --> 01:44:34,650
don't know but not this so let's pick

2040
01:44:33,238 --> 01:44:39,439
him out because it should be pretty easy

2041
01:44:34,649 --> 01:44:39,439
to pick him out he's on the edge he's

2042
01:44:40,698 --> 01:44:49,710
that be plus three plus two plus one so

2043
01:44:47,279 --> 01:44:53,609
I should be able to pick him out by just

2044
01:44:49,710 --> 01:44:56,250
doing this and changing this to that I

2045
01:44:53,609 --> 01:44:58,579
believe that should isolate this dude

2046
01:44:56,250 --> 01:45:02,810
right here and then we can just see

2047
01:44:58,579 --> 01:45:05,069
what's happening right so here's a dude

2048
01:45:02,810 --> 01:45:09,600
who's trying to cast back in that

2049
01:45:05,069 --> 01:45:14,420
direction and we get nothing there is no

2050
01:45:09,600 --> 01:45:22,410
debug line at all that I can see anyway

2051
01:45:14,420 --> 01:45:24,239
for for this for this cast I mean I see

2052
01:45:22,409 --> 01:45:27,539
nothing I don't know about you folks

2053
01:45:24,238 --> 01:45:30,419
right so there's nothing being drawn at

2054
01:45:27,539 --> 01:45:34,560
all and I have no idea why so what I'd

2055
01:45:30,420 --> 01:45:36,210
like to know is in this test case how is

2056
01:45:34,560 --> 01:45:40,190
it possible that this hit

2057
01:45:36,210 --> 01:45:45,270
I'm not this hit this cast tear a value

2058
01:45:40,189 --> 01:45:47,519
is coming back so bizarre right and what

2059
01:45:45,270 --> 01:45:49,200
I want to do is maybe convert to debug

2060
01:45:47,520 --> 01:45:52,320
mode and actually step through this case

2061
01:45:49,199 --> 01:45:57,389
and find out like how is it producing I

2062
01:45:52,319 --> 01:45:59,519
guess zero for this because the cast B

2063
01:45:57,390 --> 01:46:01,440
value has to be producing basically just

2064
01:45:59,520 --> 01:46:02,489
the center point again that's the only

2065
01:46:01,439 --> 01:46:06,379
way we could see what we're seeing I

2066
01:46:02,488 --> 01:46:09,029
think but let's find out

2067
01:46:06,380 --> 01:46:10,739
all right so here's us running in debug

2068
01:46:09,029 --> 01:46:12,000
mode now we didn't you know we I didn't

2069
01:46:10,738 --> 01:46:14,129
do anything we're still in the same

2070
01:46:12,000 --> 01:46:16,500
position so what I want to do here is

2071
01:46:14,130 --> 01:46:22,109
just say like let's take a look at that

2072
01:46:16,500 --> 01:46:25,409
specific case so if I jump back down

2073
01:46:22,109 --> 01:46:28,079
here I want to know like first of all

2074
01:46:25,409 --> 01:46:31,250
what are those values so if we do this

2075
01:46:28,079 --> 01:46:31,250
[Music]

2076
01:46:37,689 --> 01:46:41,649
but break on there so now what I should

2077
01:46:39,850 --> 01:46:45,250
see is this cast comes back with

2078
01:46:41,649 --> 01:46:51,219
something like a zero or or maybe an

2079
01:46:45,250 --> 01:46:54,539
invalid value I don't know so basically

2080
01:46:51,220 --> 01:46:56,800
this cast is coming back as I didn't see

2081
01:46:54,539 --> 01:46:58,479
anything at all right

2082
01:46:56,800 --> 01:47:00,430
so I guess maybe maybe that's a problem

2083
01:46:58,479 --> 01:47:03,279
is the float max is just overloading us

2084
01:47:00,430 --> 01:47:09,250
that makes some sense so let's change

2085
01:47:03,279 --> 01:47:13,420
that if we didn't hit then let's change

2086
01:47:09,250 --> 01:47:14,319
that cast P to something saying so let's

2087
01:47:13,420 --> 01:47:19,890
do it this way

2088
01:47:14,319 --> 01:47:25,299
v3 cast P equals getcomponent

2089
01:47:19,890 --> 01:47:26,920
let's do it like that if you didn't hit

2090
01:47:25,300 --> 01:47:28,989
anything then we know the cast P's

2091
01:47:26,920 --> 01:47:32,409
invalid so what we're really gonna want

2092
01:47:28,989 --> 01:47:34,149
to do is just do light distance right so

2093
01:47:32,409 --> 01:47:42,130
we're going to want to do light distance

2094
01:47:34,149 --> 01:47:43,449
times like normal so that was probably

2095
01:47:42,130 --> 01:47:44,980
the problem as I was letting those float

2096
01:47:43,449 --> 01:47:46,539
maxes flow through there and once you

2097
01:47:44,979 --> 01:47:47,979
let afloat max look through there you

2098
01:47:46,539 --> 01:47:50,560
know for the debug case you know

2099
01:47:47,979 --> 01:47:53,429
anything goes really all right so now

2100
01:47:50,560 --> 01:47:53,430
let's try drawing it

2101
01:48:18,270 --> 01:48:25,170
and I don't actually see anything so

2102
01:48:22,630 --> 01:48:25,170
still not great

2103
01:48:32,578 --> 01:48:40,578
oh of course we actually have to use it

2104
01:48:47,840 --> 01:48:51,020
all right

2105
01:48:55,639 --> 01:49:04,940
so now we at least see the line and that

2106
01:48:59,389 --> 01:49:08,000
line is what we would expect right you

2107
01:49:04,939 --> 01:49:10,219
can see that it's wrong so if you look

2108
01:49:08,000 --> 01:49:13,189
it's passing through this cube very

2109
01:49:10,219 --> 01:49:16,039
clearly and so we can actually start our

2110
01:49:13,189 --> 01:49:18,379
debugging process right now because now

2111
01:49:16,039 --> 01:49:20,840
we also have a case that is erroneously

2112
01:49:18,380 --> 01:49:24,260
being flagged as unincluded but it

2113
01:49:20,840 --> 01:49:31,429
definitely is occluded so if we pass is

2114
01:49:24,260 --> 01:49:34,699
test case here right we should now see

2115
01:49:31,429 --> 01:49:38,810
like what this thing tested and it

2116
01:49:34,698 --> 01:49:42,738
descended down I guess into the purple

2117
01:49:38,810 --> 01:49:45,710
region but it didn't actually ever

2118
01:49:42,738 --> 01:49:49,368
record any testing against this box at

2119
01:49:45,710 --> 01:49:53,510
all right it didn't traverse this box in

2120
01:49:49,368 --> 01:49:55,908
any way and so something is up here

2121
01:49:53,510 --> 01:50:00,590
because when it traversed into this box

2122
01:49:55,908 --> 01:50:02,868
it should have you would think tested

2123
01:50:00,590 --> 01:50:06,650
the children but it didn't test the

2124
01:50:02,868 --> 01:50:11,420
children and it's I'm not clear why not

2125
01:50:06,649 --> 01:50:15,138
clear who actually caused that to happen

2126
01:50:11,420 --> 01:50:17,440
if I go to the raycast code we're

2127
01:50:15,139 --> 01:50:20,868
drawing the box in all cases correct

2128
01:50:17,439 --> 01:50:24,979
yeah so we're drawing all boxes that we

2129
01:50:20,868 --> 01:50:27,738
consider and at some point we should

2130
01:50:24,979 --> 01:50:31,158
have traversed down a box and didn't

2131
01:50:27,738 --> 01:50:36,049
write like for whatever reason this

2132
01:50:31,158 --> 01:50:38,779
stuff didn't actually occur now if we

2133
01:50:36,050 --> 01:50:43,130
were to force it through this path right

2134
01:50:38,779 --> 01:50:47,539
so if we were to do this and now we will

2135
01:50:43,130 --> 01:50:51,010
see all boxes that can be that are in

2136
01:50:47,539 --> 01:50:54,189
the system I think right or we should

2137
01:50:51,010 --> 01:50:54,190
there you go

2138
01:50:57,050 --> 01:51:02,340
I'm not sure why that's taking so long

2139
01:51:00,649 --> 01:51:07,079
probably just because there's too many

2140
01:51:02,340 --> 01:51:11,880
debug lines I guess I'm not sure why not

2141
01:51:07,079 --> 01:51:13,229
sure why this is so slow right now you

2142
01:51:11,880 --> 01:51:16,079
should probably take a look at the

2143
01:51:13,229 --> 01:51:17,698
profile but like look if that's very

2144
01:51:16,079 --> 01:51:20,130
very slow but I don't actually know why

2145
01:51:17,698 --> 01:51:24,238
I guess because there's too many debug

2146
01:51:20,130 --> 01:51:26,400
lines in the system there but if you

2147
01:51:24,238 --> 01:51:28,769
look at what's happening you can see

2148
01:51:26,399 --> 01:51:31,500
that when we forced it to consider all

2149
01:51:28,770 --> 01:51:34,650
boxes it did correctly intersect with

2150
01:51:31,500 --> 01:51:35,579
this dude so there's something wrong

2151
01:51:34,649 --> 01:51:38,069
with the way we're checking those boxes

2152
01:51:35,579 --> 01:51:43,319
maybe that new test that I added isn't

2153
01:51:38,069 --> 01:51:46,198
actually good right and so let's try to

2154
01:51:43,319 --> 01:51:51,448
figure that out right so if in here I

2155
01:51:46,198 --> 01:51:55,529
said you know restore the test if I got

2156
01:51:51,448 --> 01:51:57,899
rid of this any closer version so that's

2157
01:51:55,529 --> 01:52:04,759
if any of the mass values were true

2158
01:51:57,899 --> 01:52:08,729
there right maybe that was stupid and

2159
01:52:04,760 --> 01:52:11,010
maybe that's not actually true so if we

2160
01:52:08,729 --> 01:52:12,779
actually do get rid of that let's just

2161
01:52:11,010 --> 01:52:17,610
see and then we can debug that tomorrow

2162
01:52:12,779 --> 01:52:19,769
if that turns out to be our problem so

2163
01:52:17,609 --> 01:52:23,279
now if we let the bounding volume

2164
01:52:19,770 --> 01:52:24,780
hierarchy do what it wants to do the

2165
01:52:23,279 --> 01:52:29,429
question is do we hit it and the answer

2166
01:52:24,779 --> 01:52:32,819
is no so we still don't so is it the

2167
01:52:29,429 --> 01:52:35,880
inside clause or is it the close enough

2168
01:52:32,819 --> 01:52:41,569
clause let's find out I'm gonna go ahead

2169
01:52:35,880 --> 01:52:41,569
and nerf this

2170
01:53:04,239 --> 01:53:08,769
and so it looks like it literally like

2171
01:53:07,359 --> 01:53:10,599
because that's still not recording that

2172
01:53:08,770 --> 01:53:15,270
hit it looks like it's literally the

2173
01:53:10,600 --> 01:53:15,270
inside claws that's our problem

2174
01:53:15,369 --> 01:53:33,039
I mean maybe so you can see here that

2175
01:53:26,140 --> 01:53:35,710
this means that the t max value has to

2176
01:53:33,039 --> 01:53:40,439
be in front of us which seems okay and

2177
01:53:35,710 --> 01:53:46,329
if the T min value is also behind this I

2178
01:53:40,439 --> 01:53:50,259
mean that seems like a correct case to

2179
01:53:46,329 --> 01:53:52,350
me I mean I guess I can't say could they

2180
01:53:50,260 --> 01:53:57,550
be inverted I don't think they could be

2181
01:53:52,350 --> 01:54:00,370
right but it does look like that any

2182
01:53:57,550 --> 01:54:03,430
inside is not right and that's basically

2183
01:54:00,369 --> 01:54:09,519
saying look if teaming is less than T

2184
01:54:03,430 --> 01:54:12,460
Max which I don't even know why we're

2185
01:54:09,520 --> 01:54:14,980
testing because it has to be I mean it

2186
01:54:12,460 --> 01:54:21,130
could be equal to but that's the only

2187
01:54:14,979 --> 01:54:22,809
way right so if the team in is greater

2188
01:54:21,130 --> 01:54:24,190
than it's in front of us oh sorry that's

2189
01:54:22,810 --> 01:54:26,080
it shouldn't ever mind it's just team X

2190
01:54:24,189 --> 01:54:30,239
and this so that I don't even know why

2191
01:54:26,079 --> 01:54:30,239
we have this test that's that's weird

2192
01:54:40,239 --> 01:54:50,000
just gonna note that so if we look here

2193
01:54:44,989 --> 01:54:51,949
and I guess I don't know if max pass is

2194
01:54:50,000 --> 01:54:53,960
failing I don't know which one it is but

2195
01:54:51,949 --> 01:54:58,460
I can use the color value to figure that

2196
01:54:53,960 --> 01:55:04,880
out I suppose or you know what I could

2197
01:54:58,460 --> 01:55:06,140
do is just this to see if Max Pass is

2198
01:55:04,880 --> 01:55:07,489
failing or if the other thing is failing

2199
01:55:06,140 --> 01:55:11,110
although I guess like now I wouldn't

2200
01:55:07,489 --> 01:55:13,849
because I it'll fail out on the next one

2201
01:55:11,109 --> 01:55:16,039
so I guess I'm not sure right I don't

2202
01:55:13,850 --> 01:55:17,780
know I don't know whether the team in is

2203
01:55:16,039 --> 01:55:19,430
the problem here or the T Max is the

2204
01:55:17,779 --> 01:55:21,199
problem but somebody is the problem

2205
01:55:19,430 --> 01:55:29,320
because somehow we're not producing a T

2206
01:55:21,199 --> 01:55:29,319
inside value that we should be right

2207
01:55:34,130 --> 01:55:43,130
actually I guess that's not true because

2208
01:55:36,229 --> 01:55:48,379
since this is an end here its we would

2209
01:55:43,130 --> 01:55:50,510
actually need this to be that close

2210
01:55:48,380 --> 01:55:52,489
enough case so that's actually not true

2211
01:55:50,510 --> 01:55:54,560
either it could be that this is okay if

2212
01:55:52,489 --> 01:55:58,960
there's a child count and we're inside

2213
01:55:54,560 --> 01:56:02,529
it or we're close enough to it right

2214
01:55:58,960 --> 01:56:02,529
[Music]

2215
01:56:05,289 --> 01:56:08,680
it's right this way

2216
01:56:20,000 --> 01:56:23,699
hmm so I don't know so it seems like

2217
01:56:22,260 --> 01:56:24,900
there's something busted about the way

2218
01:56:23,699 --> 01:56:28,349
we're traversing there but I'm not sure

2219
01:56:24,899 --> 01:56:31,379
what it is and if we just don't I don't

2220
01:56:28,350 --> 01:56:37,020
know that the T inside value is probably

2221
01:56:31,380 --> 01:56:38,400
what it is because I mean I guess that

2222
01:56:37,020 --> 01:56:41,760
might be though because if you look at

2223
01:56:38,399 --> 01:56:44,939
where this thing is of course it is

2224
01:56:41,760 --> 01:56:48,600
right on the boundary I wonder if it's a

2225
01:56:44,939 --> 01:56:55,409
question of like that tolerance value

2226
01:56:48,600 --> 01:56:59,480
isn't isn't good enough I mean I wonder

2227
01:56:55,409 --> 01:56:59,479
if this is necessary

2228
01:57:10,090 --> 01:57:15,819
apparently it was so the problem there I

2229
01:57:13,569 --> 01:57:24,969
guess is we were right on the boundary

2230
01:57:15,819 --> 01:57:27,509
of the bounding box right let me put

2231
01:57:24,969 --> 01:57:27,510
this in here

2232
01:57:42,500 --> 01:57:51,779
so now looking at that I mean I guess

2233
01:57:50,189 --> 01:57:53,309
that makes some sense why all of these

2234
01:57:51,779 --> 01:57:57,179
were a little bit weird let's go ahead

2235
01:57:53,310 --> 01:57:59,039
and go back to our normal case I think

2236
01:57:57,180 --> 01:58:03,000
we're getting somewhere here we've we've

2237
01:57:59,039 --> 01:58:07,369
gotten a few things out now and we're

2238
01:58:03,000 --> 01:58:11,180
getting closer so what I'd like to do is

2239
01:58:07,369 --> 01:58:15,229
yeah just want to kind of change that

2240
01:58:11,180 --> 01:58:23,670
back to this one hoops this one and

2241
01:58:15,229 --> 01:58:25,679
we'll pass false here and I just want to

2242
01:58:23,670 --> 01:58:30,119
look now to see what is our new pencil

2243
01:58:25,680 --> 01:58:33,570
look like basically does it look any

2244
01:58:30,119 --> 01:58:36,720
more sane so at least now right so

2245
01:58:33,569 --> 01:58:41,789
fixing the flute max bug there at least

2246
01:58:36,720 --> 01:58:44,490
we now see stuff somewhat properly a lot

2247
01:58:41,789 --> 01:58:47,909
of these look like they're hitting where

2248
01:58:44,489 --> 01:58:58,229
they should a lot of these look like it

2249
01:58:47,909 --> 01:58:59,909
as well so I'm going to say maybe we've

2250
01:58:58,229 --> 01:59:04,669
debunked that at least to a certain

2251
01:58:59,909 --> 01:59:04,670
extent now right

2252
01:59:12,979 --> 01:59:18,658
so that looks a little more sane to me

2253
01:59:16,369 --> 01:59:21,119
so I'm gonna go ahead now and say

2254
01:59:18,658 --> 01:59:24,889
alright let's listen like kind of get

2255
01:59:21,119 --> 01:59:28,380
rid of the the test drawing temporarily

2256
01:59:24,890 --> 01:59:45,119
so I'm gonna introduce yet another one

2257
01:59:28,380 --> 01:59:46,949
here where I just turn it off and then

2258
01:59:45,119 --> 01:59:48,329
what I want to do is I want to actually

2259
01:59:46,948 --> 01:59:50,158
just run this thing and see what it

2260
01:59:48,329 --> 01:59:54,390
actually looks like so we'll go to the Z

2261
01:59:50,158 --> 01:59:57,750
bias program and we'll leave the

2262
01:59:54,390 --> 02:00:01,230
lighting on and then I guess we'll call

2263
01:59:57,750 --> 02:00:03,029
it a day and tomorrow we can sort of

2264
02:00:01,229 --> 02:00:13,169
dive a little deeper into that stuff and

2265
02:00:03,029 --> 02:00:14,488
see and see you know if if we've roughly

2266
02:00:13,170 --> 02:00:16,170
got it working and in which case we can

2267
02:00:14,488 --> 02:00:19,109
move to casting from reasonable

2268
02:00:16,170 --> 02:00:22,369
locations which will make things work a

2269
02:00:19,109 --> 02:00:25,109
lot better and then go from there so

2270
02:00:22,369 --> 02:00:27,420
looking at like what's happening here

2271
02:00:25,109 --> 02:00:29,130
right I don't really know there's if

2272
02:00:27,420 --> 02:00:30,779
there's a lot of ways to interpret what

2273
02:00:29,130 --> 02:00:32,219
we're seeing at the moment because again

2274
02:00:30,779 --> 02:00:35,279
since we're casting from really

2275
02:00:32,219 --> 02:00:39,210
erroneous locations I would say this

2276
02:00:35,279 --> 02:00:41,519
could actually be non buggy it's really

2277
02:00:39,210 --> 02:00:43,198
hard to say now right because what

2278
02:00:41,520 --> 02:00:45,810
you're seeing effectively is just like

2279
02:00:43,198 --> 02:00:47,789
well you're casting from places that are

2280
02:00:45,810 --> 02:00:50,520
kind of right along the edges of these

2281
02:00:47,789 --> 02:00:52,710
cubes and various stuff like that which

2282
02:00:50,520 --> 02:00:54,870
could just be wrong so I think the only

2283
02:00:52,710 --> 02:00:57,420
way to really go forward from here is

2284
02:00:54,869 --> 02:01:00,929
now to cast from actual valid locations

2285
02:00:57,420 --> 02:01:02,760
and see what happens there which will be

2286
02:01:00,929 --> 02:01:04,350
sort of the next step and basically we

2287
02:01:02,760 --> 02:01:07,199
want to do it right is we want to cast

2288
02:01:04,350 --> 02:01:10,159
from these light probe points but we've

2289
02:01:07,198 --> 02:01:12,988
definitely fixed a bunch of stuff in the

2290
02:01:10,158 --> 02:01:14,460
casting so we probably will need to do a

2291
02:01:12,988 --> 02:01:16,529
little more fixing we've got a good way

2292
02:01:14,460 --> 02:01:19,399
to debug it now we can just kind of turn

2293
02:01:16,529 --> 02:01:22,590
that on and off and see what's up right

2294
02:01:19,399 --> 02:01:25,198
so that seems good if we're in here I

2295
02:01:22,590 --> 02:01:26,969
wonder can I now do is there any way I

2296
02:01:25,198 --> 02:01:41,268
can do a reasonable test

2297
02:01:26,969 --> 02:01:41,269
caste thing rights do this yeah

2298
02:01:46,170 --> 02:01:50,579
so looking at that of course it has the

2299
02:01:48,720 --> 02:01:52,949
problem where the hot region is over

2300
02:01:50,579 --> 02:01:54,059
here so depending on where the hero is

2301
02:01:52,949 --> 02:01:55,439
you know I kind of have to hop in the

2302
02:01:54,060 --> 02:01:57,210
hot because the hot region is the only

2303
02:01:55,439 --> 02:01:59,669
thing that's actually drawing it's debug

2304
02:01:57,210 --> 02:02:02,699
lines right and so if you look at what

2305
02:01:59,670 --> 02:02:07,020
we're seeing here it looks to me like

2306
02:02:02,699 --> 02:02:08,970
you know again just the fact that

2307
02:02:07,020 --> 02:02:11,490
there's stuff under the floor that's

2308
02:02:08,970 --> 02:02:15,510
setting to zero means you're gonna get

2309
02:02:11,489 --> 02:02:16,710
these patterns here so I think the first

2310
02:02:15,510 --> 02:02:19,350
thing we're gonna have to do is just

2311
02:02:16,710 --> 02:02:20,970
actually we're gonna have to actually

2312
02:02:19,350 --> 02:02:22,289
castrum these before we can really get a

2313
02:02:20,970 --> 02:02:23,909
better read on whether we've still got

2314
02:02:22,289 --> 02:02:26,189
bugs in there I mean we probably do but

2315
02:02:23,909 --> 02:02:28,289
I mean you know it's just it's not

2316
02:02:26,189 --> 02:02:29,639
possible to call from this so I think

2317
02:02:28,289 --> 02:02:31,680
that's the next step and we can do that

2318
02:02:29,640 --> 02:02:32,850
tomorrow and then we'll have some idea

2319
02:02:31,680 --> 02:02:39,030
of where we're at I'm gonna go to a

2320
02:02:32,850 --> 02:02:40,320
brief Q&amp;A now but I think I think we've

2321
02:02:39,029 --> 02:02:42,529
more or less gotten out of the weeds on

2322
02:02:40,319 --> 02:02:42,529
that

2323
02:03:48,170 --> 02:03:58,449
where did you learn programming like

2324
02:03:50,449 --> 02:03:58,449
this lighting stuff previously oh um I

2325
02:03:59,020 --> 02:04:02,330
mean I guess I'm not sure how to answer

2326
02:04:01,130 --> 02:04:04,970
that exactly

2327
02:04:02,329 --> 02:04:06,979
I mean I've I've been programming you

2328
02:04:04,970 --> 02:04:14,810
know what is effectively game engine

2329
02:04:06,979 --> 02:04:16,489
code I mean for I mean I mean the first

2330
02:04:14,810 --> 02:04:18,680
thing I made was a game in basic and

2331
02:04:16,489 --> 02:04:23,840
that was when I was seven so I mean I've

2332
02:04:18,680 --> 02:04:25,190
been programming this stuff for 36 years

2333
02:04:23,840 --> 02:04:31,400
or something like that

2334
02:04:25,189 --> 02:04:34,939
and so you know so many things you pick

2335
02:04:31,399 --> 02:04:36,799
up along the way kind of slowly this

2336
02:04:34,939 --> 02:04:38,419
lighting is just an example of some

2337
02:04:36,800 --> 02:04:39,739
stuff we're trying I mean this isn't a

2338
02:04:38,420 --> 02:04:41,350
known lighting algorithm that we're

2339
02:04:39,739 --> 02:04:43,279
using we're kind of rolling our own

2340
02:04:41,350 --> 02:04:48,200
because that was something that I wanted

2341
02:04:43,279 --> 02:04:49,939
to show how to do on stream you know but

2342
02:04:48,199 --> 02:04:52,189
you know all of the pieces are picked up

2343
02:04:49,939 --> 02:04:53,839
from places you know ray casting is

2344
02:04:52,189 --> 02:04:55,699
something that you learn to do pretty

2345
02:04:53,840 --> 02:04:57,140
much any time you start doing graphs

2346
02:04:55,699 --> 02:04:58,939
turn your gonna counter ray casting

2347
02:04:57,140 --> 02:05:03,050
because it's a fundamental building

2348
02:04:58,939 --> 02:05:06,289
block of anything that's a 3d or even 2d

2349
02:05:03,050 --> 02:05:08,750
oftentimes game you need to be able to

2350
02:05:06,289 --> 02:05:10,579
know can one point see another point or

2351
02:05:08,750 --> 02:05:13,010
you know ultimately stated will a

2352
02:05:10,579 --> 02:05:14,569
projectile like you know going from one

2353
02:05:13,010 --> 02:05:16,880
place to another encounter an obstacle

2354
02:05:14,569 --> 02:05:20,659
you know it's just a fundamental thing

2355
02:05:16,880 --> 02:05:22,159
you do and so you know ray casting

2356
02:05:20,659 --> 02:05:23,720
you're gonna learn to do early on that's

2357
02:05:22,159 --> 02:05:24,800
just something you have to you're gonna

2358
02:05:23,720 --> 02:05:28,100
encounter no matter what you're

2359
02:05:24,800 --> 02:05:29,329
programming in games and then lighting

2360
02:05:28,100 --> 02:05:30,560
is sort of like well if you've worked on

2361
02:05:29,329 --> 02:05:32,539
graphics are gonna encounter that

2362
02:05:30,560 --> 02:05:35,300
because you will have you know lighting

2363
02:05:32,539 --> 02:05:37,220
is a fundamental issue in producing

2364
02:05:35,300 --> 02:05:39,020
imagery even if you're not doing

2365
02:05:37,220 --> 02:05:40,550
realistic lighting you're doing fake you

2366
02:05:39,020 --> 02:05:45,440
know something fake with lighting

2367
02:05:40,550 --> 02:05:47,150
usually and so you know just years and

2368
02:05:45,439 --> 02:05:49,879
years of working with this stuff I pick

2369
02:05:47,149 --> 02:05:51,349
up all kinds of stuff and then when I go

2370
02:05:49,880 --> 02:05:53,720
to implement something I'm like alright

2371
02:05:51,350 --> 02:05:56,329
you know here's my rough approach I

2372
02:05:53,720 --> 02:05:57,949
decided I wanted to try this time I

2373
02:05:56,329 --> 02:05:59,300
wanted something relatively

2374
02:05:57,949 --> 02:06:01,279
straightforward for handmade heroes so

2375
02:05:59,300 --> 02:06:02,538
not too complicated but I want

2376
02:06:01,279 --> 02:06:03,920
something complicated enough that we

2377
02:06:02,538 --> 02:06:05,868
would struggle with it and have to try

2378
02:06:03,920 --> 02:06:07,788
out some things do some experiments make

2379
02:06:05,868 --> 02:06:11,299
some decisions right like I wanted it to

2380
02:06:07,788 --> 02:06:13,599
be real and something that would show up

2381
02:06:11,300 --> 02:06:16,579
in a professional level product right

2382
02:06:13,599 --> 02:06:18,230
and so I'm just kind of like navigating

2383
02:06:16,578 --> 02:06:20,090
it with that in mind like something good

2384
02:06:18,229 --> 02:06:22,009
enough that we like the look of it and

2385
02:06:20,090 --> 02:06:25,190
that it was relatively tricky to

2386
02:06:22,010 --> 02:06:27,949
implement so you get to see me do it but

2387
02:06:25,189 --> 02:06:30,288
not so ridiculous that it takes us you

2388
02:06:27,948 --> 02:06:32,328
know a thousand hours just to do the

2389
02:06:30,288 --> 02:06:33,889
lighting or something and that's just

2390
02:06:32,328 --> 02:06:38,149
because of the limitations of streaming

2391
02:06:33,889 --> 02:06:40,670
everything means that you know you have

2392
02:06:38,149 --> 02:06:42,319
you kind of have a limit on on how much

2393
02:06:40,670 --> 02:06:46,059
experimentation and development and

2394
02:06:42,319 --> 02:06:46,058
analysis you can do right

2395
02:06:52,710 --> 02:06:57,369
which parts of the CRT do you think are

2396
02:06:55,239 --> 02:07:01,300
the most poorly designed or unnecessary

2397
02:06:57,369 --> 02:07:03,489
and what do you feel is missing well I

2398
02:07:01,300 --> 02:07:05,829
mean the CRT depending what do you mean

2399
02:07:03,489 --> 02:07:08,319
by that you just mean the the basic C

2400
02:07:05,829 --> 02:07:17,619
runtime library like not like STD and

2401
02:07:08,319 --> 02:07:19,779
stuff like that I mean I would say the C

2402
02:07:17,619 --> 02:07:23,409
standard library look the basic C Center

2403
02:07:19,779 --> 02:07:26,889
like F printf and sine and cosine and

2404
02:07:23,409 --> 02:07:28,359
stuff I would say you know I'm not gonna

2405
02:07:26,890 --> 02:07:34,090
fault them for being poorly designed

2406
02:07:28,359 --> 02:07:35,949
because they're so old I think none of

2407
02:07:34,090 --> 02:07:40,119
the C library really makes any sense

2408
02:07:35,949 --> 02:07:41,559
in a modern context computers just the

2409
02:07:40,119 --> 02:07:43,510
basic things you're gonna want to do

2410
02:07:41,560 --> 02:07:47,590
have nothing to do with what you see in

2411
02:07:43,510 --> 02:07:50,170
the C runtime library so you know I if I

2412
02:07:47,590 --> 02:07:52,329
was designing to see if I was designing

2413
02:07:50,170 --> 02:07:54,010
a runtime library for today

2414
02:07:52,329 --> 02:07:58,269
none of the C api's would be in there

2415
02:07:54,010 --> 02:08:01,260
they're all wrong first of all they're

2416
02:07:58,270 --> 02:08:04,200
all synchronous by default

2417
02:08:01,260 --> 02:08:05,890
second of all they're all based on

2418
02:08:04,199 --> 02:08:08,380
synchronous single threaded execution

2419
02:08:05,890 --> 02:08:14,079
models third of all they're based on

2420
02:08:08,380 --> 02:08:14,770
text data and you know none of that's

2421
02:08:14,079 --> 02:08:17,229
true

2422
02:08:14,770 --> 02:08:18,460
right I mean how many people have errors

2423
02:08:17,229 --> 02:08:20,079
in their programs because the default

2424
02:08:18,460 --> 02:08:23,649
way to open a file the C runtime

2425
02:08:20,079 --> 02:08:26,800
libraries ASCII with translation of line

2426
02:08:23,649 --> 02:08:29,259
endings right so you know there's just

2427
02:08:26,800 --> 02:08:31,869
there's a lot of stuff that's it's clear

2428
02:08:29,260 --> 02:08:33,610
like UNIX command line utility was kind

2429
02:08:31,869 --> 02:08:35,019
of the mental model of like what people

2430
02:08:33,609 --> 02:08:36,670
would be doing with this mount with this

2431
02:08:35,020 --> 02:08:38,410
library right and that's just not

2432
02:08:36,670 --> 02:08:39,180
realistic like no one's writing that

2433
02:08:38,409 --> 02:08:42,489
anymore

2434
02:08:39,180 --> 02:08:47,530
that's like not an interesting case you

2435
02:08:42,489 --> 02:08:52,149
know we're writing it's heavily threaded

2436
02:08:47,529 --> 02:08:54,099
heavily Cindy heavily asynchronous like

2437
02:08:52,149 --> 02:08:56,500
you know the modern stuff we do just

2438
02:08:54,100 --> 02:08:59,110
that just doesn't map to that so I would

2439
02:08:56,500 --> 02:09:00,489
say like none of the CRT is appropriate

2440
02:08:59,109 --> 02:09:02,710
for today's programming but that's not

2441
02:09:00,489 --> 02:09:04,539
because the authors were stupid that's

2442
02:09:02,710 --> 02:09:05,569
because they were designing a library

2443
02:09:04,539 --> 02:09:08,439
for a different time

2444
02:09:05,569 --> 02:09:08,439
right

2445
02:09:15,109 --> 02:09:18,229
did you learn new things that game

2446
02:09:16,819 --> 02:09:20,779
pregnant while working on handmade hero

2447
02:09:18,229 --> 02:09:21,979
if yes but sure I mean the way we're

2448
02:09:20,779 --> 02:09:24,199
doing a lady interpolation is something

2449
02:09:21,979 --> 02:09:26,419
we made up just recently so you know

2450
02:09:24,199 --> 02:09:27,769
anytime you program if you program

2451
02:09:26,420 --> 02:09:29,989
seriously if you're taking it seriously

2452
02:09:27,770 --> 02:09:30,650
you should learn something if you don't

2453
02:09:29,989 --> 02:09:32,960
learn anything

2454
02:09:30,649 --> 02:09:35,059
even though handmade hero I'm out in how

2455
02:09:32,960 --> 02:09:37,550
many hours it's been maybe like a

2456
02:09:35,060 --> 02:09:39,200
thousand total hours or something I

2457
02:09:37,550 --> 02:09:42,320
don't know how long we spent on handmade

2458
02:09:39,199 --> 02:09:45,010
hero but it's a small number of hours a

2459
02:09:42,319 --> 02:09:49,130
thousand hours is not many hours of

2460
02:09:45,010 --> 02:09:50,600
programming but it's enough and any time

2461
02:09:49,130 --> 02:09:51,560
you spend that many hours programming if

2462
02:09:50,600 --> 02:09:53,720
you're doing it seriously you should

2463
02:09:51,560 --> 02:09:54,980
learn something I mean if I didn't learn

2464
02:09:53,720 --> 02:09:56,510
anything from a thousand hours of

2465
02:09:54,979 --> 02:09:59,269
programming boy that would that would

2466
02:09:56,510 --> 02:10:00,739
have been a real bummer so we've

2467
02:09:59,270 --> 02:10:02,420
definitely learned some things along the

2468
02:10:00,739 --> 02:10:04,130
way have I learned as much as I normally

2469
02:10:02,420 --> 02:10:05,659
would learn in a thousand hours no and

2470
02:10:04,130 --> 02:10:07,609
that's because a lot of things I'm doing

2471
02:10:05,659 --> 02:10:09,260
you're like educational things and so a

2472
02:10:07,609 --> 02:10:10,759
lot of the time I'm spending is not

2473
02:10:09,260 --> 02:10:13,789
necessarily doing things that are new or

2474
02:10:10,760 --> 02:10:15,320
interesting to me it's doing things that

2475
02:10:13,789 --> 02:10:16,670
kind of just have to be done as part of

2476
02:10:15,319 --> 02:10:18,139
a game engine and I'm gonna explain how

2477
02:10:16,670 --> 02:10:19,789
they're done rather than just grabbing

2478
02:10:18,140 --> 02:10:27,530
some code I already have to do that and

2479
02:10:19,789 --> 02:10:30,170
using it right but you know even in an

2480
02:10:27,529 --> 02:10:31,519
educational stream like that a thousand

2481
02:10:30,170 --> 02:10:35,440
hours is plenty of time to come upon

2482
02:10:31,520 --> 02:10:35,440
some new things and we definitely have

2483
02:10:35,680 --> 02:10:39,170
can you imagine any debug tools that

2484
02:10:38,119 --> 02:10:40,550
would make stuff like graphics

2485
02:10:39,170 --> 02:10:42,770
programming and lighting easier to debug

2486
02:10:40,550 --> 02:10:44,930
especially for beginners actually I

2487
02:10:42,770 --> 02:10:49,040
think you don't even really need to

2488
02:10:44,930 --> 02:10:50,780
think about beginners you've watched me

2489
02:10:49,039 --> 02:10:52,489
try to debug the lighting today and what

2490
02:10:50,779 --> 02:10:54,649
was I doing the entire time I was like

2491
02:10:52,489 --> 02:10:58,039
adding debug code to like draw stuff

2492
02:10:54,649 --> 02:11:00,589
right I had to make that debug line

2493
02:10:58,039 --> 02:11:04,840
system and without it we would have had

2494
02:11:00,590 --> 02:11:08,119
no idea what the heck was going on right

2495
02:11:04,840 --> 02:11:10,909
modern debuggers don't give you any

2496
02:11:08,119 --> 02:11:14,779
ability to do any of that stuff if you

2497
02:11:10,909 --> 02:11:19,340
took a debugger and you added the

2498
02:11:14,779 --> 02:11:21,619
ability to insert this kind of code so

2499
02:11:19,340 --> 02:11:26,090
like if I could go in my debugger and

2500
02:11:21,619 --> 02:11:27,960
add this as markup in my code in the

2501
02:11:26,090 --> 02:11:34,500
debugger anytime I wanted

2502
02:11:27,960 --> 02:11:37,050
- right that would be so cool because

2503
02:11:34,500 --> 02:11:38,670
then all of this crap goes away and the

2504
02:11:37,050 --> 02:11:40,110
debugger could have all kinds of tools

2505
02:11:38,670 --> 02:11:41,969
for like spinning around and rotating

2506
02:11:40,109 --> 02:11:44,329
and stepping through and watching the

2507
02:11:41,969 --> 02:11:45,779
lines draw right I mean it would be

2508
02:11:44,329 --> 02:11:50,880
friggin awesome

2509
02:11:45,779 --> 02:11:55,889
right and there's no reason not to do it

2510
02:11:50,880 --> 02:11:58,260
it's just I mean nobody writes the

2511
02:11:55,890 --> 02:11:59,640
buggers anymore and remedy B G which is

2512
02:11:58,260 --> 02:12:00,989
the one I use on stream now was

2513
02:11:59,640 --> 02:12:03,420
something that a person did in their

2514
02:12:00,988 --> 02:12:06,359
spare time just so we wouldn't have to

2515
02:12:03,420 --> 02:12:08,579
suffer with Visual Studio right

2516
02:12:06,359 --> 02:12:10,109
I mean Visual Studio is the thing that

2517
02:12:08,579 --> 02:12:11,880
people use to debug it's one of the only

2518
02:12:10,109 --> 02:12:13,829
debuggers that exists on windows that

2519
02:12:11,880 --> 02:12:16,109
anyone even uses there's windbg and

2520
02:12:13,829 --> 02:12:18,449
Visual Studio and they're terrible they

2521
02:12:16,109 --> 02:12:21,809
don't have any features for actually

2522
02:12:18,449 --> 02:12:25,409
debugging code right all they can do is

2523
02:12:21,810 --> 02:12:28,560
display a watch window poorly you know

2524
02:12:25,409 --> 02:12:30,779
and remedy B G is much better right but

2525
02:12:28,560 --> 02:12:32,310
it hasn't had I mean it's a part-time

2526
02:12:30,779 --> 02:12:34,019
product it hasn't had years of

2527
02:12:32,310 --> 02:12:35,760
development that it would take to put in

2528
02:12:34,020 --> 02:12:37,950
all kinds of really good stuff like

2529
02:12:35,760 --> 02:12:39,840
viewing images and showing transforms on

2530
02:12:37,949 --> 02:12:41,579
them and showing 3d graphics and Rotem

2531
02:12:39,840 --> 02:12:43,680
you around it and mint in your code with

2532
02:12:41,579 --> 02:12:45,539
3d graphics drawing and explaining what

2533
02:12:43,680 --> 02:12:47,430
space things were in and like you know I

2534
02:12:45,539 --> 02:12:49,800
mean that's a ton of work right and

2535
02:12:47,430 --> 02:12:51,300
that's exactly what Microsoft should

2536
02:12:49,800 --> 02:12:54,690
have been doing but you know they're

2537
02:12:51,300 --> 02:12:56,340
just I mean the visual studio team isn't

2538
02:12:54,689 --> 02:12:57,389
good they have different priorities they

2539
02:12:56,340 --> 02:12:58,710
don't know any of this stuff they

2540
02:12:57,390 --> 02:13:01,770
probably don't even know how to draw 3d

2541
02:12:58,710 --> 02:13:05,369
graphics let alone what you would

2542
02:13:01,770 --> 02:13:06,900
actually need and implement it because

2543
02:13:05,369 --> 02:13:08,010
they can't even do basic stuff like I

2544
02:13:06,899 --> 02:13:09,059
have the watch window update in a

2545
02:13:08,010 --> 02:13:10,380
reasonable amount of time right so

2546
02:13:09,060 --> 02:13:12,090
forget it like you're not gonna get any

2547
02:13:10,380 --> 02:13:13,800
of those advanced features and they're

2548
02:13:12,090 --> 02:13:15,719
too busy doing stuff like oh I needed to

2549
02:13:13,800 --> 02:13:17,460
make some kind of weird integration with

2550
02:13:15,719 --> 02:13:18,539
with Trello or something right like

2551
02:13:17,460 --> 02:13:19,920
that's what they spend their time doing

2552
02:13:18,539 --> 02:13:23,250
stuff that's totally useless for

2553
02:13:19,920 --> 02:13:25,980
actually debugging code right now I'm

2554
02:13:23,250 --> 02:13:27,510
hopeful in the future you know remedy B

2555
02:13:25,979 --> 02:13:29,309
G is a great addition to the debug

2556
02:13:27,510 --> 02:13:31,170
arsenal it means now you get visual

2557
02:13:29,310 --> 02:13:33,000
Studios features without having to sell

2558
02:13:31,170 --> 02:13:35,699
video studio and they run quickly and

2559
02:13:33,000 --> 02:13:38,670
cleanly that is a huge improvement

2560
02:13:35,699 --> 02:13:40,829
I know Allan Webster the guy wrote for

2561
02:13:38,670 --> 02:13:41,539
coder and Nick silifke they're out cdbg

2562
02:13:40,829 --> 02:13:43,609
are now

2563
02:13:41,539 --> 02:13:45,079
rad and they're doing a debugger and

2564
02:13:43,609 --> 02:13:49,989
it's supposedly coming around pretty

2565
02:13:45,079 --> 02:13:55,250
well so I think we will get improvements

2566
02:13:49,989 --> 02:13:57,139
but basically it took the program

2567
02:13:55,250 --> 02:13:59,899
community going this is absurd these

2568
02:13:57,140 --> 02:14:04,010
tools are garbage and a few years ago

2569
02:13:59,899 --> 02:14:06,019
right and starting again to get those

2570
02:14:04,010 --> 02:14:08,329
projects going and until they come to

2571
02:14:06,020 --> 02:14:11,240
fruition we're gonna be stuck with with

2572
02:14:08,329 --> 02:14:12,500
none of this right and so it's only

2573
02:14:11,239 --> 02:14:17,029
through the efforts of people like

2574
02:14:12,500 --> 02:14:19,159
George who wrote remedy BG and the guys

2575
02:14:17,029 --> 02:14:20,869
at rad and who knows who else right

2576
02:14:19,159 --> 02:14:21,979
it's only through their efforts that

2577
02:14:20,869 --> 02:14:23,680
were ever turned out of this pit because

2578
02:14:21,979 --> 02:14:28,399
the professional quote unquote

2579
02:14:23,680 --> 02:14:30,860
development tools JetBrains and Visual

2580
02:14:28,399 --> 02:14:32,869
Studio code and Visual Studio of they're

2581
02:14:30,859 --> 02:14:34,189
just garbage they're not made for real

2582
02:14:32,869 --> 02:14:36,289
programming they're made for this kind

2583
02:14:34,189 --> 02:14:37,939
of like modern type programming where

2584
02:14:36,289 --> 02:14:39,319
people just Jam libraries together and

2585
02:14:37,939 --> 02:14:44,029
cross their fingers and everything sucks

2586
02:14:39,319 --> 02:14:45,949
right and so it's gonna take like some

2587
02:14:44,029 --> 02:14:47,929
real effort to make hardcore debugging

2588
02:14:45,949 --> 02:14:50,269
tools again and to get some products

2589
02:14:47,930 --> 02:14:52,310
alive it's hard because the number of

2590
02:14:50,270 --> 02:14:55,220
people who want to buy a fluffy crap

2591
02:14:52,310 --> 02:14:56,420
debugger or just download one for free

2592
02:14:55,220 --> 02:14:58,760
cuz they're used to not paying for

2593
02:14:56,420 --> 02:15:03,020
software like is the case in like web

2594
02:14:58,760 --> 02:15:04,940
development right that doesn't provide

2595
02:15:03,020 --> 02:15:06,890
funding right you needed some way to

2596
02:15:04,939 --> 02:15:10,129
provide funding to good programmers to

2597
02:15:06,890 --> 02:15:12,440
make good debuggers and and really big

2598
02:15:10,130 --> 02:15:14,569
to thumbs up to rad for actually funding

2599
02:15:12,439 --> 02:15:17,509
that project right because without them

2600
02:15:14,569 --> 02:15:19,069
we'd probably never get there and you

2601
02:15:17,510 --> 02:15:21,980
know in an ideal world enough people

2602
02:15:19,069 --> 02:15:23,479
would have bought remedy G remedy BG to

2603
02:15:21,979 --> 02:15:26,929
give George the funding he needs to go

2604
02:15:23,479 --> 02:15:29,389
full-time that hasn't happened and so

2605
02:15:26,930 --> 02:15:35,420
you know I don't know what to say we're

2606
02:15:29,390 --> 02:15:37,970
just we're in a bad situation is it

2607
02:15:35,420 --> 02:15:39,350
possible to get CXC and msbuild without

2608
02:15:37,970 --> 02:15:42,860
installing video studio I don't know

2609
02:15:39,350 --> 02:15:45,800
about msbuild because I'm not familiar

2610
02:15:42,859 --> 02:15:49,099
with that but CL dot exe comes with the

2611
02:15:45,800 --> 02:15:53,170
SDK development tools were used to

2612
02:15:49,100 --> 02:16:07,870
anyway so

2613
02:15:53,170 --> 02:16:09,100
I wouldn't I would say yes you can how

2614
02:16:07,869 --> 02:16:12,010
do you split your time between learning

2615
02:16:09,100 --> 02:16:14,620
theory and practice I don't really know

2616
02:16:12,010 --> 02:16:16,210
how to answer that question they're sort

2617
02:16:14,619 --> 02:16:19,090
of the same thing like when you're

2618
02:16:16,210 --> 02:16:21,159
programming you're usually also having

2619
02:16:19,090 --> 02:16:23,739
to learn theoretical things if it's in

2620
02:16:21,159 --> 02:16:26,319
an area you not sure about and you have

2621
02:16:23,739 --> 02:16:28,210
to kind of read papers periodically and

2622
02:16:26,319 --> 02:16:30,279
continuously to kind of keep up to date

2623
02:16:28,210 --> 02:16:32,079
so I don't really think of my time as

2624
02:16:30,279 --> 02:16:38,049
being split I think of that as just sort

2625
02:16:32,079 --> 02:16:39,940
of integrated in right how many hours

2626
02:16:38,049 --> 02:16:41,709
you expect handmade hero was going to be

2627
02:16:39,940 --> 02:16:47,079
at the start I don't know I said I would

2628
02:16:41,709 --> 02:16:48,428
do 600 episodes and we'll probably take

2629
02:16:47,079 --> 02:16:50,620
more time than that because when we

2630
02:16:48,429 --> 02:16:51,850
finished the lighting we will have what

2631
02:16:50,620 --> 02:16:53,170
I would consider a fairly complete

2632
02:16:51,850 --> 02:16:54,940
engine right

2633
02:16:53,170 --> 02:16:56,710
so you know you could hop around the

2634
02:16:54,940 --> 02:16:59,110
world you can put enemies in it you've

2635
02:16:56,709 --> 02:17:01,089
got full lighting it's got assets and

2636
02:16:59,110 --> 02:17:04,030
texturing and all that good stuff and

2637
02:17:01,090 --> 02:17:06,399
you can reload the textures and you can

2638
02:17:04,030 --> 02:17:07,900
reload things and you can put new assets

2639
02:17:06,399 --> 02:17:10,869
into it and do all the things you would

2640
02:17:07,899 --> 02:17:12,369
normally do with an engine right but

2641
02:17:10,870 --> 02:17:15,219
we're gonna want to build some gameplay

2642
02:17:12,370 --> 02:17:16,600
and then test it out and maybe tweak the

2643
02:17:15,218 --> 02:17:19,839
engine based on what we build for

2644
02:17:16,600 --> 02:17:22,149
gameplay and you know put together a

2645
02:17:19,840 --> 02:17:23,409
real game that you know probably won't

2646
02:17:22,149 --> 02:17:26,319
be the world's greatest game or anything

2647
02:17:23,409 --> 02:17:30,850
cuz I'm not a game designer but you know

2648
02:17:26,319 --> 02:17:32,889
we should do enough to satisfy ourselves

2649
02:17:30,850 --> 02:17:35,649
that it was good quality code right and

2650
02:17:32,889 --> 02:17:36,939
that everything was working well and so

2651
02:17:35,649 --> 02:17:39,129
that'll probably take a while so it

2652
02:17:36,940 --> 02:17:42,760
looks like we'll maybe do 600 episodes

2653
02:17:39,129 --> 02:17:45,670
on making the engine and a at a basic

2654
02:17:42,760 --> 02:17:48,250
game right but then you know however

2655
02:17:45,670 --> 02:17:54,460
many episodes we want to spend beyond

2656
02:17:48,250 --> 02:17:59,020
that to make as much game as I feel like

2657
02:17:54,459 --> 02:18:00,879
making I couldn't tell you and I'm not

2658
02:17:59,020 --> 02:18:03,899
sure I care like I'm not sure I care how

2659
02:18:00,879 --> 02:18:03,899
many episodes it takes

2660
02:18:04,959 --> 02:18:10,549
I'm pretty happy with like I think we

2661
02:18:07,308 --> 02:18:12,138
did a really good job actually building

2662
02:18:10,549 --> 02:18:17,090
an engine on stream it's a very complete

2663
02:18:12,138 --> 02:18:18,319
engine as a lot of stuff it can do and

2664
02:18:17,090 --> 02:18:19,520
it's much better than what I was

2665
02:18:18,319 --> 02:18:21,020
planning to make I was planning to make

2666
02:18:19,520 --> 02:18:23,239
just a simple 2d engine but this is like

2667
02:18:21,020 --> 02:18:26,630
a full 3d engine with fake perspective

2668
02:18:23,239 --> 02:18:28,670
things and real lighting and like you

2669
02:18:26,629 --> 02:18:31,069
know a lot of stuff that was kind of

2670
02:18:28,670 --> 02:18:35,629
better are you playing through another

2671
02:18:31,069 --> 02:18:37,399
series no any plans for physics not

2672
02:18:35,629 --> 02:18:39,049
beyond just the basic special-effects

2673
02:18:37,399 --> 02:18:40,699
stuff like we already kind of have some

2674
02:18:39,049 --> 02:18:44,269
stuff in there for particles which is

2675
02:18:40,700 --> 02:18:47,090
basic physics stuff but we wouldn't

2676
02:18:44,270 --> 02:18:50,450
really be doing anything beyond that

2677
02:18:47,090 --> 02:18:56,750
kind of stuff I don't think all right

2678
02:18:50,450 --> 02:18:58,370
let's go ahead and wrap it up all right

2679
02:18:56,750 --> 02:18:59,479
thank you everyone for joining me for

2680
02:18:58,370 --> 02:19:00,829
the up soto handmade hero it's an

2681
02:18:59,479 --> 02:19:02,420
appendage of coating with you as always

2682
02:19:00,829 --> 02:19:03,979
if you would like to follow the series

2683
02:19:02,420 --> 02:19:06,860
at home you can always peer to the game

2684
02:19:03,979 --> 02:19:08,299
on handmade hero org and it comes with

2685
02:19:06,860 --> 02:19:11,860
source code so you can follow along into

2686
02:19:08,299 --> 02:19:15,739
your own experiments I don't necessarily

2687
02:19:11,860 --> 02:19:17,360
know if doing the light casting for

2688
02:19:15,739 --> 02:19:19,190
light probes is a good exercise for

2689
02:19:17,360 --> 02:19:22,880
folks who want to follow at home might

2690
02:19:19,190 --> 02:19:24,530
be a little bit much to do over the the

2691
02:19:22,879 --> 02:19:26,750
evening but that's what I'll be doing

2692
02:19:24,530 --> 02:19:29,300
tomorrow so tune in for that and we'll

2693
02:19:26,750 --> 02:19:31,250
get that going that will put us in a

2694
02:19:29,299 --> 02:19:34,099
position to actually be computing shadow

2695
02:19:31,250 --> 02:19:36,829
rays from realistic locations in the

2696
02:19:34,099 --> 02:19:38,420
scene and spreading that light data back

2697
02:19:36,829 --> 02:19:43,610
out to the voxel which is what we want

2698
02:19:38,420 --> 02:19:45,530
to do you yeah you probably don't want

2699
02:19:43,610 --> 02:19:48,050
to try that as an exercise so skip that

2700
02:19:45,530 --> 02:19:49,640
but I'll be back to start that and then

2701
02:19:48,049 --> 02:19:53,029
once we get there then we'll be in a

2702
02:19:49,639 --> 02:19:55,039
position to start turning the crank on

2703
02:19:53,030 --> 02:19:57,021
the lighting because that'll be

2704
02:19:55,040 --> 02:19:58,580
basically when we can start to go okay

2705
02:19:57,021 --> 02:20:00,170
let's move to let's first of all debug

2706
02:19:58,579 --> 02:20:02,690
any ray casting bugs that we still have

2707
02:20:00,170 --> 02:20:04,700
in there make sure that works okay then

2708
02:20:02,690 --> 02:20:06,319
move up to like okay now let's actually

2709
02:20:04,700 --> 02:20:08,720
convict the light around so we'll get

2710
02:20:06,319 --> 02:20:11,079
our secondary third turret secondary

2711
02:20:08,719 --> 02:20:14,899
tertiary quaternary bounces you know so

2712
02:20:11,079 --> 02:20:18,389
that more like light motion and that

2713
02:20:14,899 --> 02:20:20,189
will finally give us a way to play with

2714
02:20:18,389 --> 02:20:24,658
lighting and the lighting voxel

2715
02:20:20,189 --> 02:20:26,430
interpolation fully and we can tackle

2716
02:20:24,658 --> 02:20:27,978
kind of what I think is probably the

2717
02:20:26,430 --> 02:20:30,090
last remaining problem we have which is

2718
02:20:27,978 --> 02:20:33,209
when we have a bunch of lighting

2719
02:20:30,090 --> 02:20:35,309
information coming in now how do we map

2720
02:20:33,209 --> 02:20:37,408
that down to a for iterator system or

2721
02:20:35,309 --> 02:20:38,850
you know do we want to change that for

2722
02:20:37,408 --> 02:20:40,529
area system a little bit I don't know so

2723
02:20:38,850 --> 02:20:42,120
I don't know exactly what we want to do

2724
02:20:40,529 --> 02:20:43,529
there and that's gonna be the last kind

2725
02:20:42,120 --> 02:20:44,880
of big unknown for us that we got to

2726
02:20:43,529 --> 02:20:48,930
start playing with how do we do that

2727
02:20:44,879 --> 02:20:50,369
that down project that's it for today

2728
02:20:48,930 --> 02:20:53,639
I'll be back here tomorrow same time

2729
02:20:50,370 --> 02:20:55,949
same channel until then have fun for

2730
02:20:53,639 --> 02:20:56,519
everyone and I'll see you on the

2731
02:20:55,949 --> 02:20:59,060
Internet

2732
02:20:56,520 --> 02:20:59,060
take it easy everybody

