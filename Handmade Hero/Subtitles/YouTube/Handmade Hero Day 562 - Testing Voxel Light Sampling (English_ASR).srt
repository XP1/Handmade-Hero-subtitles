1
00:00:00,000 --> 00:00:03,270
hello everybody and welcome to handmade

2
00:00:01,919 --> 00:00:06,750
here are the short we code a complete

3
00:00:03,270 --> 00:00:10,769
game live on stream we are doing some

4
00:00:06,750 --> 00:00:12,120
lighting today just catch people up to

5
00:00:10,769 --> 00:00:14,099
where we are because obviously lettings

6
00:00:12,119 --> 00:00:16,618
pretty complex topic so we've got a

7
00:00:14,099 --> 00:00:21,800
bunch of things that we need to be

8
00:00:16,618 --> 00:00:25,198
working on and that we need to get right

9
00:00:21,800 --> 00:00:27,028
so just a real quick overview of where

10
00:00:25,199 --> 00:00:30,300
we're at and what we need to do this

11
00:00:27,028 --> 00:00:32,579
weekend if we take a look at where we

12
00:00:30,300 --> 00:00:35,969
just do a quick recompile just so you

13
00:00:32,579 --> 00:00:38,789
can see the fresh build so there's our

14
00:00:35,969 --> 00:00:40,558
compile here's the run you can kind of

15
00:00:38,789 --> 00:00:42,628
see where we left off

16
00:00:40,558 --> 00:00:45,199
this is debug mode by the way so we're

17
00:00:42,628 --> 00:00:47,789
still in the kind of slow version of it

18
00:00:45,200 --> 00:00:49,469
although our debug builds not that slow

19
00:00:47,789 --> 00:00:52,170
right now because since we're not

20
00:00:49,469 --> 00:00:53,670
running the lighting transport so we did

21
00:00:52,170 --> 00:00:56,760
a lighting test and the way that we did

22
00:00:53,670 --> 00:00:59,489
it is we put a purple light at the top

23
00:00:56,759 --> 00:01:01,289
and a yellow light on the bottom not

24
00:00:59,488 --> 00:01:03,269
running light transport so we're just

25
00:01:01,289 --> 00:01:05,489
hard stuffing those values as if that

26
00:01:03,270 --> 00:01:08,490
light was ubiquitous everywhere and then

27
00:01:05,489 --> 00:01:10,228
we tested our reflector function to make

28
00:01:08,489 --> 00:01:12,629
sure that it actually worked and it does

29
00:01:10,228 --> 00:01:14,459
appear to so as you you know move around

30
00:01:12,629 --> 00:01:17,280
you can see you hitting basically the

31
00:01:14,459 --> 00:01:19,679
mirror surface there and that all

32
00:01:17,280 --> 00:01:23,099
appeared to work right so we believe our

33
00:01:19,680 --> 00:01:27,509
pixel sampler is that's our pixel shader

34
00:01:23,099 --> 00:01:28,978
is sampling from the volumes the way

35
00:01:27,509 --> 00:01:32,099
because we also tested a number of other

36
00:01:28,978 --> 00:01:35,340
aspects of the volumes we believe it's

37
00:01:32,099 --> 00:01:41,009
sampling properly what that means is we

38
00:01:35,340 --> 00:01:43,259
can now start moving towards the full

39
00:01:41,009 --> 00:01:44,969
sampling of it and in order to do that

40
00:01:43,259 --> 00:01:47,129
what I'd like to do this weekend

41
00:01:44,969 --> 00:01:49,019
is get us to the point we're still not

42
00:01:47,129 --> 00:01:51,030
doing any lighting transport because we

43
00:01:49,019 --> 00:01:53,310
we have that code so it won't take us

44
00:01:51,030 --> 00:01:55,379
too long to like sort of rehabilitate

45
00:01:53,310 --> 00:01:58,579
that and start to work with it to get

46
00:01:55,379 --> 00:02:00,629
the actual looking transport working

47
00:01:58,578 --> 00:02:01,798
because if you remember we already had

48
00:02:00,629 --> 00:02:04,349
that working in a different version of

49
00:02:01,799 --> 00:02:06,719
the lighting pipeline but in this new

50
00:02:04,349 --> 00:02:07,828
lighting pipeline we have it turned off

51
00:02:06,718 --> 00:02:11,189
because we're just working on the pixel

52
00:02:07,828 --> 00:02:14,389
shading okay so what I'd like to do this

53
00:02:11,189 --> 00:02:17,120
weekend is start stuff

54
00:02:14,389 --> 00:02:20,369
simulated lighting values that actually

55
00:02:17,120 --> 00:02:23,849
sort of relate to things we might

56
00:02:20,370 --> 00:02:26,789
actually find right so when I'm hopping

57
00:02:23,849 --> 00:02:30,329
around in here what I'd like to do is

58
00:02:26,789 --> 00:02:32,909
let's say we take the location of the

59
00:02:30,330 --> 00:02:35,010
player for example and we stuff lighting

60
00:02:32,909 --> 00:02:36,240
values into our light probes you can see

61
00:02:35,009 --> 00:02:37,679
all the light probes are being drawn

62
00:02:36,240 --> 00:02:41,340
there right there those little hovering

63
00:02:37,680 --> 00:02:44,069
cubes suppose we stuff lighting values

64
00:02:41,340 --> 00:02:45,990
into those cubes right that represents

65
00:02:44,069 --> 00:02:48,479
something like a local light source

66
00:02:45,990 --> 00:02:50,879
emanating from the player and then what

67
00:02:48,479 --> 00:02:55,759
I'd like to do is verify that we can get

68
00:02:50,879 --> 00:02:57,870
our pixel shader working well to sort of

69
00:02:55,759 --> 00:03:02,009
sample the lighting that results from

70
00:02:57,870 --> 00:03:03,599
that and the idea behind this is before

71
00:03:02,009 --> 00:03:06,989
we switch over to working on the light

72
00:03:03,599 --> 00:03:09,539
transport I want to verify that if we

73
00:03:06,990 --> 00:03:11,969
stuff predictable lighting values into

74
00:03:09,539 --> 00:03:13,709
our system that sort of relate to the

75
00:03:11,969 --> 00:03:15,539
kinds of lighting values we hope to get

76
00:03:13,710 --> 00:03:19,500
out of our light transport assuming it's

77
00:03:15,539 --> 00:03:22,199
good do we get acceptable results in the

78
00:03:19,500 --> 00:03:23,819
actual game because if we don't we need

79
00:03:22,199 --> 00:03:26,250
to keep working on that pixel shader

80
00:03:23,819 --> 00:03:28,439
because obviously no matter how good our

81
00:03:26,250 --> 00:03:29,939
light transport is if the pixel shader

82
00:03:28,439 --> 00:03:32,609
that samples the result of the light

83
00:03:29,939 --> 00:03:35,129
transport sucks then the lighting sucks

84
00:03:32,610 --> 00:03:37,110
so we have to do we have to make sure

85
00:03:35,129 --> 00:03:39,150
that we get that part correct right and

86
00:03:37,110 --> 00:03:42,570
so what I'd like to do first is yes

87
00:03:39,150 --> 00:03:46,080
stuff those values and then verify that

88
00:03:42,569 --> 00:03:47,729
we get reasonable results out then after

89
00:03:46,080 --> 00:03:49,320
we've got that totally settled which

90
00:03:47,729 --> 00:03:51,840
maybe if we're really lucky we'll be

91
00:03:49,319 --> 00:03:53,400
done by the end of the weekend so we can

92
00:03:51,840 --> 00:03:55,890
just check that off and then we move on

93
00:03:53,400 --> 00:03:58,319
so if we're lucky we get that done by

94
00:03:55,889 --> 00:03:59,849
the end of the weekend and then we just

95
00:03:58,319 --> 00:04:04,590
move on to the final phase of lighting

96
00:03:59,849 --> 00:04:07,620
which is working on getting the light

97
00:04:04,590 --> 00:04:09,719
transport to run fast enough through the

98
00:04:07,620 --> 00:04:12,300
system so that it can be still at 60

99
00:04:09,719 --> 00:04:15,900
frames a second and so on right and

100
00:04:12,300 --> 00:04:18,350
there's lots of things we can do to try

101
00:04:15,900 --> 00:04:22,079
and make that happen

102
00:04:18,350 --> 00:04:24,210
including like subsampling like which

103
00:04:22,079 --> 00:04:26,699
light sources I'm sorry which light

104
00:04:24,209 --> 00:04:27,319
probes get updated each frame and we can

105
00:04:26,699 --> 00:04:29,149
restrict

106
00:04:27,319 --> 00:04:31,550
light probes that were sampling - only

107
00:04:29,149 --> 00:04:33,439
the ones in the view and all sorts of

108
00:04:31,550 --> 00:04:35,060
things that we can play around with

109
00:04:33,439 --> 00:04:38,120
there as well as just straight-up

110
00:04:35,060 --> 00:04:39,230
optimizing that path there's a bunch of

111
00:04:38,120 --> 00:04:40,449
stuff we can probably do to fix that

112
00:04:39,230 --> 00:04:43,910
part as well

113
00:04:40,449 --> 00:04:45,709
so looking at the system as a whole

114
00:04:43,910 --> 00:04:47,600
that's going to be sort of the final

115
00:04:45,709 --> 00:04:48,949
phase of lighting and so what we're

116
00:04:47,600 --> 00:04:54,770
trying to this weekend is set ourselves

117
00:04:48,949 --> 00:04:58,250
up for going into that part of that part

118
00:04:54,769 --> 00:05:00,680
of the process right and so you know

119
00:04:58,250 --> 00:05:03,709
let's let's get started on that it's

120
00:05:00,680 --> 00:05:05,720
pretty clear what we want to do so let's

121
00:05:03,709 --> 00:05:07,819
kind of move forwards on that all right

122
00:05:05,720 --> 00:05:09,380
so the first thing I want to do is just

123
00:05:07,819 --> 00:05:13,189
play around that pixel shader a little

124
00:05:09,379 --> 00:05:14,719
bit because before we try to stuff more

125
00:05:13,189 --> 00:05:16,370
interesting lighting values in there I

126
00:05:14,720 --> 00:05:17,870
want to still play with directional

127
00:05:16,370 --> 00:05:19,579
lighting as we have in there right now

128
00:05:17,870 --> 00:05:23,000
where we're stuffing in like yellow

129
00:05:19,579 --> 00:05:25,969
light and a purple light into it

130
00:05:23,000 --> 00:05:27,649
specifically I want to go ahead and take

131
00:05:25,970 --> 00:05:28,910
a look at that lighting which is right

132
00:05:27,649 --> 00:05:32,269
in here you can see the lighting

133
00:05:28,910 --> 00:05:34,490
equation that we're computing right here

134
00:05:32,269 --> 00:05:36,469
and if you look at what this lighting

135
00:05:34,490 --> 00:05:38,269
equation is doing it's pretty straight

136
00:05:36,470 --> 00:05:41,240
forward right and I can break it out a

137
00:05:38,269 --> 00:05:45,680
little bit more just to kind of give you

138
00:05:41,240 --> 00:05:48,439
a to give you a better idea of what's

139
00:05:45,680 --> 00:05:49,879
actually happening right and there's a

140
00:05:48,439 --> 00:05:53,360
couple different things that we want to

141
00:05:49,879 --> 00:05:55,699
be able to do here but yeah like that

142
00:05:53,360 --> 00:05:56,930
and you know what I think I want to see

143
00:05:55,699 --> 00:05:58,459
there's also a bug in this lighting

144
00:05:56,930 --> 00:06:01,850
equation that we didn't really look at

145
00:05:58,459 --> 00:06:06,739
and I could be wrong about that but I

146
00:06:01,850 --> 00:06:09,320
you know we'll just take it as we go so

147
00:06:06,740 --> 00:06:11,900
a couple of things here and I'll explain

148
00:06:09,319 --> 00:06:14,269
the bug that I think is in here as I

149
00:06:11,899 --> 00:06:16,129
break it out if we take a look at what

150
00:06:14,269 --> 00:06:17,389
the components of our light equation are

151
00:06:16,129 --> 00:06:19,040
right now which is like I said was just

152
00:06:17,389 --> 00:06:21,409
a basic one we threw in there a very

153
00:06:19,040 --> 00:06:23,060
simple reflection which is not that what

154
00:06:21,410 --> 00:06:24,680
we really want so that's why I want to

155
00:06:23,060 --> 00:06:26,480
kind of beef it up a little bit and get

156
00:06:24,680 --> 00:06:28,329
it a little more interesting before we

157
00:06:26,480 --> 00:06:30,500
move on to stuffing other values in

158
00:06:28,329 --> 00:06:32,750
we've got a couple different terms here

159
00:06:30,500 --> 00:06:37,639
so the first thing we have is a term

160
00:06:32,750 --> 00:06:39,949
that's telling us what the incident

161
00:06:37,639 --> 00:06:40,909
light versus the outgoing direction to

162
00:06:39,949 --> 00:06:42,829
the I yeah

163
00:06:40,910 --> 00:06:44,570
right and that's sort of a specular

164
00:06:42,829 --> 00:06:47,000
bounce term so that's like a reflection

165
00:06:44,569 --> 00:06:50,980
coefficient right and you can see that

166
00:06:47,000 --> 00:06:50,980
reflection coefficient it's right here

167
00:06:51,250 --> 00:06:57,170
and so this coefficient here ref see

168
00:06:55,279 --> 00:06:59,509
it's taking the inner product of the

169
00:06:57,170 --> 00:07:02,840
light normal and a sample normal right

170
00:06:59,509 --> 00:07:04,459
so that's the direction that goes to the

171
00:07:02,839 --> 00:07:08,029
light and the direction that goes to the

172
00:07:04,459 --> 00:07:10,669
sample and so if we're sample meaning

173
00:07:08,029 --> 00:07:12,079
like the so the direction that goes to

174
00:07:10,670 --> 00:07:13,490
the light which is the incoming in the

175
00:07:12,079 --> 00:07:15,589
direction that the light's coming into

176
00:07:13,490 --> 00:07:16,939
this surface and then the sample

177
00:07:15,589 --> 00:07:18,139
direction is like the I direction right

178
00:07:16,939 --> 00:07:20,149
so where it's where we're looking at it

179
00:07:18,139 --> 00:07:21,500
from or whoever wants the sample this

180
00:07:20,149 --> 00:07:22,609
doesn't have to be the camera we happen

181
00:07:21,500 --> 00:07:23,720
to be calling the cam right now but you

182
00:07:22,610 --> 00:07:27,740
could sample it letting in any direction

183
00:07:23,720 --> 00:07:29,240
you wanted so those two as they become

184
00:07:27,740 --> 00:07:31,670
coincident so if they're pointing in

185
00:07:29,240 --> 00:07:35,180
exactly the same direction then we get

186
00:07:31,670 --> 00:07:38,390
the maximum contribution from this light

187
00:07:35,180 --> 00:07:40,610
source right and as they separate we get

188
00:07:38,389 --> 00:07:42,199
less does that make sense

189
00:07:40,610 --> 00:07:48,350
and so that's what we kind of want to

190
00:07:42,199 --> 00:07:50,389
see there now it's worth noting that

191
00:07:48,350 --> 00:07:51,590
this part of the equation again like I

192
00:07:50,389 --> 00:07:53,389
said we haven't really worked this

193
00:07:51,589 --> 00:07:55,189
through yet so I think we also have some

194
00:07:53,389 --> 00:07:56,990
kind of buggy parts here or at least

195
00:07:55,189 --> 00:07:59,240
nominally HR problems as well and so we

196
00:07:56,990 --> 00:08:00,829
kind of want to now take the time since

197
00:07:59,240 --> 00:08:02,449
we just did this at the end of the last

198
00:08:00,829 --> 00:08:03,979
dream we want to now take the time to

199
00:08:02,449 --> 00:08:05,300
start a like work this to get all the

200
00:08:03,980 --> 00:08:07,490
bugs out of it make sure we're sampling

201
00:08:05,300 --> 00:08:10,100
it properly and and at least try to

202
00:08:07,490 --> 00:08:11,509
verify it as well as we can so if you

203
00:08:10,100 --> 00:08:13,070
take a look at what happens in the main

204
00:08:11,509 --> 00:08:17,269
part of this machine or you can see a

205
00:08:13,069 --> 00:08:19,189
sampling all of our actual lighting

206
00:08:17,269 --> 00:08:22,009
incoming lighting values and then we

207
00:08:19,189 --> 00:08:24,079
specify what the actual parameters are

208
00:08:22,009 --> 00:08:25,279
from what the actual directions of those

209
00:08:24,079 --> 00:08:26,418
incoming lights are which we happen to

210
00:08:25,279 --> 00:08:28,039
know because they're just the the

211
00:08:26,418 --> 00:08:29,240
cardinal directions right that's how

212
00:08:28,040 --> 00:08:31,340
we're storing our lighting in our light

213
00:08:29,240 --> 00:08:33,229
probes and so when we look at what

214
00:08:31,339 --> 00:08:34,639
happens what we pass in is the direction

215
00:08:33,229 --> 00:08:38,660
to the light and then the reflection

216
00:08:34,639 --> 00:08:41,990
vector right and so really when you look

217
00:08:38,659 --> 00:08:44,539
at this this is not an accurate name for

218
00:08:41,990 --> 00:08:48,470
this thing it's not the sample direction

219
00:08:44,539 --> 00:08:51,049
really what it is is it's the outgoing

220
00:08:48,470 --> 00:08:53,930
direction right it's the it's the bounce

221
00:08:51,049 --> 00:08:54,679
and so what we really want to do is call

222
00:08:53,929 --> 00:08:56,539
this the reflec

223
00:08:54,679 --> 00:09:01,039
to normal because that's really what it

224
00:08:56,539 --> 00:09:02,599
is and if and so I named it like

225
00:09:01,039 --> 00:09:04,610
basically what the I direction would be

226
00:09:02,600 --> 00:09:07,070
but that's not what we're passing and so

227
00:09:04,610 --> 00:09:09,379
the first bug would have been a bug if

228
00:09:07,070 --> 00:09:11,060
it had actually been what we'd named it

229
00:09:09,379 --> 00:09:13,009
that would have been wrong the inner

230
00:09:11,059 --> 00:09:15,559
product between the light direction and

231
00:09:13,009 --> 00:09:17,689
the reflection direction that's correct

232
00:09:15,559 --> 00:09:19,969
meaning this inner product is the thing

233
00:09:17,690 --> 00:09:21,860
we want to commute compute but the inner

234
00:09:19,970 --> 00:09:23,720
product of the light outgoing direction

235
00:09:21,860 --> 00:09:25,519
and the eye direction that's not what we

236
00:09:23,720 --> 00:09:29,000
wanted to know right that would not have

237
00:09:25,519 --> 00:09:30,889
been correct so again not really a bug

238
00:09:29,000 --> 00:09:32,990
in terms of what the code did definitely

239
00:09:30,889 --> 00:09:35,809
a bug in terms of how he named it so we

240
00:09:32,990 --> 00:09:37,580
want to get rid of that okay now we do

241
00:09:35,809 --> 00:09:39,919
clamp this inner product and that's

242
00:09:37,580 --> 00:09:41,480
important right so this clamp is very

243
00:09:39,919 --> 00:09:43,879
important the reason the clamp is very

244
00:09:41,480 --> 00:09:47,269
important is because if we get something

245
00:09:43,879 --> 00:09:50,088
that actually comes out more than 90

246
00:09:47,269 --> 00:09:52,970
degrees away we don't want any

247
00:09:50,089 --> 00:09:55,339
reflection there right and so what we

248
00:09:52,970 --> 00:09:59,300
kind of need to make sure can't ever

249
00:09:55,339 --> 00:10:03,140
happen and I think we currently have the

250
00:09:59,299 --> 00:10:05,120
problem of this happening honestly is

251
00:10:03,139 --> 00:10:07,549
that we don't ever want this to produce

252
00:10:05,120 --> 00:10:09,649
a situation where you can get light

253
00:10:07,549 --> 00:10:11,719
transmitted sort of through a surface

254
00:10:09,649 --> 00:10:14,028
because this is not supposed to simulate

255
00:10:11,720 --> 00:10:16,399
any this lighting equation is not about

256
00:10:14,028 --> 00:10:19,250
subsurface scattering right if this is a

257
00:10:16,399 --> 00:10:20,899
basic reflectance function and we want

258
00:10:19,250 --> 00:10:23,089
to make sure that we're actually doing

259
00:10:20,899 --> 00:10:24,289
that computation if we wanted subsurface

260
00:10:23,089 --> 00:10:26,690
scattering or transmission through

261
00:10:24,289 --> 00:10:27,860
services that's all fine and we can try

262
00:10:26,690 --> 00:10:29,959
to implement some of that but we don't

263
00:10:27,860 --> 00:10:32,149
want to accidentally implement something

264
00:10:29,958 --> 00:10:33,528
like that because if we accidentally

265
00:10:32,149 --> 00:10:35,269
implement it it's not going to be

266
00:10:33,528 --> 00:10:37,009
correct right it's gonna be some kind of

267
00:10:35,269 --> 00:10:39,139
weird lighting function that doesn't

268
00:10:37,009 --> 00:10:40,819
really properly do transmission in the

269
00:10:39,139 --> 00:10:42,379
way it should I last one more time does

270
00:10:40,820 --> 00:10:44,270
anyone know if Milton's been fixed

271
00:10:42,379 --> 00:10:45,559
someone please message me and tell me if

272
00:10:44,269 --> 00:10:48,759
Milton's been fixed cuz I'd really like

273
00:10:45,559 --> 00:10:51,759
to fix our Milton at some point here

274
00:10:48,759 --> 00:10:51,759
anyway

275
00:10:59,059 --> 00:11:05,459
so the part that I want to say we have

276
00:11:01,919 --> 00:11:07,469
is a bug right now or at least it's you

277
00:11:05,460 --> 00:11:09,269
know it's a bad lighting function at the

278
00:11:07,470 --> 00:11:11,639
moment because it doesn't have something

279
00:11:09,269 --> 00:11:13,500
that we want if we take a look at what

280
00:11:11,639 --> 00:11:16,019
this is doing and I'll draw the diagram

281
00:11:13,500 --> 00:11:19,370
again from from last week we have a

282
00:11:16,019 --> 00:11:22,470
surface so this is our surface here and

283
00:11:19,370 --> 00:11:24,149
this is the surface normal we know that

284
00:11:22,470 --> 00:11:26,730
we're looking at this thing from some

285
00:11:24,149 --> 00:11:28,379
direction so our eye is over here this

286
00:11:26,730 --> 00:11:29,670
is the camera so maybe I'll call it the

287
00:11:28,379 --> 00:11:30,929
camera because that's probably a better

288
00:11:29,669 --> 00:11:33,389
name for it's what we call it we don't

289
00:11:30,929 --> 00:11:34,859
call the eye so our cameras over here

290
00:11:33,389 --> 00:11:36,870
we're filming from this direction we're

291
00:11:34,860 --> 00:11:39,330
looking at this particular surface this

292
00:11:36,870 --> 00:11:42,259
is our reflection vector right so this

293
00:11:39,330 --> 00:11:47,000
is our reflection I think we called this

294
00:11:42,259 --> 00:11:51,299
ref n in the shader just then right and

295
00:11:47,000 --> 00:11:52,980
in fact if you look here yeah we don't

296
00:11:51,299 --> 00:11:54,539
actually pass in a surface normal into

297
00:11:52,980 --> 00:11:56,399
this routine yet we will be doing that

298
00:11:54,539 --> 00:11:57,779
but we don't do it yet so we only have

299
00:11:56,399 --> 00:11:59,789
the ref N and then we have the light

300
00:11:57,779 --> 00:12:02,699
normal and we don't know where that life

301
00:11:59,789 --> 00:12:04,860
light normal is right now we just know

302
00:12:02,700 --> 00:12:07,650
like hey the light normal is coming from

303
00:12:04,860 --> 00:12:09,060
some direction right so we've got a

304
00:12:07,649 --> 00:12:11,009
normal that's going out to the light

305
00:12:09,059 --> 00:12:13,769
source here and we want to make sure

306
00:12:11,009 --> 00:12:15,689
that's pointing outward from you know

307
00:12:13,769 --> 00:12:17,610
it's the direction the light - the light

308
00:12:15,690 --> 00:12:20,460
source not the direction that the light

309
00:12:17,610 --> 00:12:21,779
is incoming and so if we take a look at

310
00:12:20,460 --> 00:12:24,600
that we just want to make sure that that

311
00:12:21,779 --> 00:12:26,789
says it light West is negative one

312
00:12:24,600 --> 00:12:28,769
that's pointing in the west direction so

313
00:12:26,789 --> 00:12:32,069
that seems consistent so I think this is

314
00:12:28,769 --> 00:12:34,559
correct right all right so the bug that

315
00:12:32,070 --> 00:12:36,690
I was talking about is if you take a

316
00:12:34,559 --> 00:12:38,159
look at what's happening here we've got

317
00:12:36,690 --> 00:12:40,110
our light normal and are reflected

318
00:12:38,159 --> 00:12:42,299
normal and what we're doing here is

319
00:12:40,110 --> 00:12:44,279
we're saying well as long as these

320
00:12:42,299 --> 00:12:46,500
things are within 90 degrees of each

321
00:12:44,279 --> 00:12:49,379
other right we're going to get some

322
00:12:46,500 --> 00:12:51,659
light now why is that the case well it's

323
00:12:49,379 --> 00:12:54,240
the case because the only thing that's

324
00:12:51,659 --> 00:12:56,759
attenuating the incoming light in that

325
00:12:54,240 --> 00:12:58,889
direction is the inner product between

326
00:12:56,759 --> 00:13:00,600
the reflection vector and the light

327
00:12:58,889 --> 00:13:02,189
vector these are these two vectors right

328
00:13:00,600 --> 00:13:04,409
here right one of them came from the

329
00:13:02,190 --> 00:13:05,850
camera bounce that's our r FN and one of

330
00:13:04,409 --> 00:13:07,889
them is just the ink incident light

331
00:13:05,850 --> 00:13:10,050
wherever the light is coming from right

332
00:13:07,889 --> 00:13:12,179
and that could be anything that we want

333
00:13:10,049 --> 00:13:12,789
it to be for sampling this equation but

334
00:13:12,179 --> 00:13:14,559
it happens to be

335
00:13:12,789 --> 00:13:16,779
the the six cardinal directions because

336
00:13:14,559 --> 00:13:18,669
our light probes are storing you know

337
00:13:16,779 --> 00:13:20,350
their their little cubes or light probes

338
00:13:18,669 --> 00:13:23,049
are and they're storing the incoming

339
00:13:20,350 --> 00:13:26,649
light that that is found by looking in

340
00:13:23,049 --> 00:13:28,269
each of these directions right so we

341
00:13:26,649 --> 00:13:29,799
have no idea the services oriented eclis

342
00:13:28,269 --> 00:13:31,480
orient in any way in space we have an

343
00:13:29,799 --> 00:13:34,299
incoming light direction that incoming

344
00:13:31,480 --> 00:13:36,100
light direction is going to be based on

345
00:13:34,299 --> 00:13:37,120
one of these kernel directions we don't

346
00:13:36,100 --> 00:13:38,440
know how the service is oriented we have

347
00:13:37,120 --> 00:13:40,179
a camera we don't know where the camera

348
00:13:38,440 --> 00:13:41,590
is and we know that it's going to

349
00:13:40,179 --> 00:13:42,879
produce this reflection vector that you

350
00:13:41,590 --> 00:13:44,530
know bounces off the surface goes in

351
00:13:42,879 --> 00:13:46,090
that direction we're taking a dot

352
00:13:44,529 --> 00:13:47,379
product between these two what do we

353
00:13:46,090 --> 00:13:49,480
know about the dot product well we know

354
00:13:47,379 --> 00:13:54,059
what the dot product is if we took that

355
00:13:49,480 --> 00:13:57,550
reflection vector here and we drew a

356
00:13:54,059 --> 00:13:59,469
perpendicular plane right and then we

357
00:13:57,549 --> 00:14:02,979
take whatever we're sampling like light

358
00:13:59,470 --> 00:14:06,279
n right what we know is as long as this

359
00:14:02,980 --> 00:14:09,909
angle is 90 degrees or less so as long

360
00:14:06,279 --> 00:14:12,189
as it doesn't go behind this plane we

361
00:14:09,909 --> 00:14:14,199
will get some contribution as it goes

362
00:14:12,190 --> 00:14:15,760
behind this plane the dot product

363
00:14:14,200 --> 00:14:18,250
becomes negative right and it will

364
00:14:15,759 --> 00:14:20,379
become negative one in fact here so it's

365
00:14:18,250 --> 00:14:23,649
negative something here right and it's

366
00:14:20,379 --> 00:14:25,240
negative one over here becomes negative

367
00:14:23,649 --> 00:14:26,709
as it passes through and ends up at

368
00:14:25,240 --> 00:14:28,120
negative one comes back around to

369
00:14:26,710 --> 00:14:31,290
positive as it passes through that plane

370
00:14:28,120 --> 00:14:34,629
again what that means is that the clamp

371
00:14:31,289 --> 00:14:37,419
will prevent us from viewing anything

372
00:14:34,629 --> 00:14:40,629
any light from back here so if the light

373
00:14:37,419 --> 00:14:42,009
Direction is this way and the reflection

374
00:14:40,629 --> 00:14:45,039
vectors that way we won't see anything

375
00:14:42,009 --> 00:14:46,990
right but if the light vector was this

376
00:14:45,039 --> 00:14:49,089
way in the reflection vector that way we

377
00:14:46,990 --> 00:14:51,250
will see it why is this important well

378
00:14:49,090 --> 00:14:53,500
if this is the surface like we drew

379
00:14:51,250 --> 00:14:55,149
before and this is a very plausible

380
00:14:53,500 --> 00:14:57,580
situation we could have constructed if

381
00:14:55,149 --> 00:15:02,259
the cameras here then that means that

382
00:14:57,580 --> 00:15:04,750
anything remember anything that's on

383
00:15:02,259 --> 00:15:07,809
this side of this side of this plane

384
00:15:04,750 --> 00:15:11,110
will give us light including this entire

385
00:15:07,809 --> 00:15:13,659
region but this region is behind the

386
00:15:11,110 --> 00:15:16,570
surface right we can't even see the

387
00:15:13,659 --> 00:15:18,909
surface from here so if our reflection

388
00:15:16,570 --> 00:15:21,430
vector is pointing this way and our

389
00:15:18,909 --> 00:15:23,529
light vector was pointing that way we

390
00:15:21,429 --> 00:15:26,739
would see the light coming from behind

391
00:15:23,529 --> 00:15:29,409
the surface which is wrong

392
00:15:26,740 --> 00:15:31,120
so unless I'm mistaken and I mean again

393
00:15:29,409 --> 00:15:33,100
you know I do these streams with no

394
00:15:31,120 --> 00:15:34,870
preparations so I'm just working through

395
00:15:33,100 --> 00:15:38,620
the math on the stream exactly as you

396
00:15:34,870 --> 00:15:40,570
see me doing it but unless I'm wrong

397
00:15:38,620 --> 00:15:43,299
about that constructing it with the

398
00:15:40,570 --> 00:15:45,490
diagram thus makes it look like to me

399
00:15:43,299 --> 00:15:47,169
that there is an additional bug here and

400
00:15:45,490 --> 00:15:50,320
the bug here is that we aren't

401
00:15:47,169 --> 00:15:52,419
accounting for the fact that we have a

402
00:15:50,320 --> 00:15:54,250
surface normal and the surface normal

403
00:15:52,419 --> 00:15:56,439
has to be pointing in the same direction

404
00:15:54,250 --> 00:16:00,850
in order to get this light contribution

405
00:15:56,440 --> 00:16:02,830
right in other words if we have a light

406
00:16:00,850 --> 00:16:08,830
that's coming from behind the surface we

407
00:16:02,830 --> 00:16:10,629
shouldn't see anything now arguably we

408
00:16:08,830 --> 00:16:14,470
never see surfaces that are facing away

409
00:16:10,629 --> 00:16:16,809
from us we backface call those away and

410
00:16:14,470 --> 00:16:19,450
so we don't really needed to do any work

411
00:16:16,809 --> 00:16:23,769
to prevent us from having the situation

412
00:16:19,450 --> 00:16:26,590
where the reflection normal itself is

413
00:16:23,769 --> 00:16:27,819
cut is is behind the normal why because

414
00:16:26,590 --> 00:16:29,530
you can't actually construct that I

415
00:16:27,820 --> 00:16:30,850
can't view the surface from behind the

416
00:16:29,529 --> 00:16:32,199
surface normal so I won't have a

417
00:16:30,850 --> 00:16:34,360
reflection vector that's behind it

418
00:16:32,200 --> 00:16:36,879
because the reflection vector and the

419
00:16:34,360 --> 00:16:38,590
and the camera vector are on the same

420
00:16:36,879 --> 00:16:40,059
side of the surface normal by definition

421
00:16:38,590 --> 00:16:40,389
by construction they will always be that

422
00:16:40,059 --> 00:16:42,099
way

423
00:16:40,389 --> 00:16:44,049
so don't need to worry about that but

424
00:16:42,100 --> 00:16:46,090
the light not true the light could come

425
00:16:44,049 --> 00:16:48,459
from anywhere and so what I want to do

426
00:16:46,090 --> 00:16:51,129
is I want to take another coefficient

427
00:16:48,460 --> 00:16:52,930
here and this is like our side in this

428
00:16:51,129 --> 00:16:55,230
coefficient and what I want to do is I

429
00:16:52,929 --> 00:16:58,689
want to say like there's a light

430
00:16:55,230 --> 00:17:00,100
Direction coefficient and what that is

431
00:16:58,690 --> 00:17:01,990
going to be is that's going to be a

432
00:17:00,100 --> 00:17:04,180
clamp zero to one of the inner product

433
00:17:01,990 --> 00:17:06,940
of the light direction and the surface

434
00:17:04,180 --> 00:17:09,490
direction right and so what that means

435
00:17:06,940 --> 00:17:12,279
is I need another normal in here when I

436
00:17:09,490 --> 00:17:14,799
when I pass that when I when I ask for

437
00:17:12,279 --> 00:17:17,139
this get radiance I need to know what

438
00:17:14,799 --> 00:17:18,849
the surface normal itself is and we know

439
00:17:17,140 --> 00:17:20,680
what that is right because we had to use

440
00:17:18,849 --> 00:17:22,899
it for a reflectance function it's just

441
00:17:20,680 --> 00:17:24,430
this right here so I'm going to go ahead

442
00:17:22,900 --> 00:17:27,790
and say this is what the surface normal

443
00:17:24,430 --> 00:17:30,039
is like that but honestly because we

444
00:17:27,789 --> 00:17:32,109
don't sample multiple surfaces what I

445
00:17:30,039 --> 00:17:33,970
can do here is say look we know it's a

446
00:17:32,109 --> 00:17:36,549
global we know it doesn't change it's

447
00:17:33,970 --> 00:17:39,039
just for whatever the surface were on so

448
00:17:36,549 --> 00:17:40,539
we can just put it in like that and call

449
00:17:39,039 --> 00:17:42,759
it a day right

450
00:17:40,539 --> 00:17:44,589
and that keeps our function simpler its

451
00:17:42,759 --> 00:17:46,690
function signature simpler if we were

452
00:17:44,589 --> 00:17:48,639
going to sample multiple surfaces inside

453
00:17:46,690 --> 00:17:49,950
this shader which might happen if you

454
00:17:48,640 --> 00:17:52,930
were doing some kind of weird shader

455
00:17:49,950 --> 00:17:54,130
we're not gonna probably need it but if

456
00:17:52,930 --> 00:17:55,870
you were doing something weird you might

457
00:17:54,130 --> 00:17:56,890
want to make that prayer parametric

458
00:17:55,869 --> 00:17:58,569
because you might want to sample

459
00:17:56,890 --> 00:17:59,710
different kinds for us we're always

460
00:17:58,569 --> 00:18:01,869
sampling the same thing

461
00:17:59,710 --> 00:18:05,110
so why over complicate things it's

462
00:18:01,869 --> 00:18:07,509
always gonna be that world normal okay

463
00:18:05,109 --> 00:18:11,469
so this is a directional coefficient

464
00:18:07,509 --> 00:18:13,720
that basically says all right when the

465
00:18:11,470 --> 00:18:16,360
light bounces off the surface I expect

466
00:18:13,720 --> 00:18:17,920
this to tell me whether or not there's a

467
00:18:16,359 --> 00:18:19,750
self shadowing going on there whether or

468
00:18:17,920 --> 00:18:21,009
not basically the light is coming from

469
00:18:19,750 --> 00:18:24,519
behind the surface and shouldn't be

470
00:18:21,009 --> 00:18:27,430
transmitted now we're gonna need this

471
00:18:24,519 --> 00:18:29,529
for other purposes as well because we

472
00:18:27,430 --> 00:18:31,450
this is only a specular equation right

473
00:18:29,529 --> 00:18:32,859
now and we have an encounter for diffuse

474
00:18:31,450 --> 00:18:34,180
lighting diffuse lighting of course is

475
00:18:32,859 --> 00:18:36,429
letting that hits a surface and goes in

476
00:18:34,180 --> 00:18:37,720
all directions we're just right now only

477
00:18:36,430 --> 00:18:38,890
to make specular lighting that hits a

478
00:18:37,720 --> 00:18:41,589
surface and bounces off in one direction

479
00:18:38,890 --> 00:18:45,730
right and so we need to kind of like

480
00:18:41,589 --> 00:18:48,309
improve that part of it anyway so we're

481
00:18:45,730 --> 00:18:51,430
gonna need that term but we probably

482
00:18:48,309 --> 00:18:54,009
don't want to do the light DC here we

483
00:18:51,430 --> 00:18:56,259
probably don't want this right and the

484
00:18:54,009 --> 00:18:57,910
reason for that is this is not just a 1

485
00:18:56,259 --> 00:19:01,420
or a 0 this is actually a smoothly

486
00:18:57,910 --> 00:19:04,990
varying function that goes from 0 to 1

487
00:19:01,420 --> 00:19:07,900
and what I want to do is I only care if

488
00:19:04,990 --> 00:19:10,660
it is positive at all if it is that I

489
00:19:07,900 --> 00:19:13,240
probably don't want another cosine term

490
00:19:10,660 --> 00:19:15,250
attenuating my inbound light because we

491
00:19:13,240 --> 00:19:17,680
don't have any real reason to do that we

492
00:19:15,250 --> 00:19:19,660
know that there's I think well you know

493
00:19:17,680 --> 00:19:22,420
I could be wrong about this but I'm

494
00:19:19,660 --> 00:19:26,200
fairly certain that we don't want

495
00:19:22,420 --> 00:19:28,360
another cosine attenuation that's based

496
00:19:26,200 --> 00:19:30,819
on the incidence of the light we only

497
00:19:28,359 --> 00:19:33,279
want one cosine attenuation and that's

498
00:19:30,819 --> 00:19:35,679
based on the difference between the two

499
00:19:33,279 --> 00:19:37,569
angles I think now let me just draw that

500
00:19:35,680 --> 00:19:39,610
out for you and it may be that we're

501
00:19:37,569 --> 00:19:42,849
wrong about this this is a physically

502
00:19:39,609 --> 00:19:44,469
based lighting question which honestly

503
00:19:42,849 --> 00:19:47,019
is not something I study that often and

504
00:19:44,470 --> 00:19:49,360
so I could be wrong but let me give you

505
00:19:47,019 --> 00:19:50,710
just the basic breakdown so again what

506
00:19:49,359 --> 00:19:52,269
happens and we've talked about this on

507
00:19:50,710 --> 00:19:53,980
other lighting things before is if you

508
00:19:52,269 --> 00:19:56,220
have the surface normal here

509
00:19:53,980 --> 00:19:58,808
and you're talking about a light

510
00:19:56,220 --> 00:20:00,190
situation like this where you've got

511
00:19:58,808 --> 00:20:02,259
some direction to the light source

512
00:20:00,190 --> 00:20:04,210
there's the light some reflected vector

513
00:20:02,259 --> 00:20:07,839
here and you want to talk about how much

514
00:20:04,210 --> 00:20:09,220
light is going to bounce basically back

515
00:20:07,839 --> 00:20:13,658
at the viewer so we're talking about

516
00:20:09,220 --> 00:20:16,750
this bounce right here so what we try to

517
00:20:13,659 --> 00:20:20,799
simulate is the fact that on the surface

518
00:20:16,750 --> 00:20:23,380
itself you have to imagine a patch of

519
00:20:20,798 --> 00:20:25,778
light and you've got sort of inbound

520
00:20:23,380 --> 00:20:28,090
light rays coming at the surface and

521
00:20:25,778 --> 00:20:29,980
bouncing off of it right if they're

522
00:20:28,089 --> 00:20:32,528
hitting the surface directly this way

523
00:20:29,980 --> 00:20:34,120
then whatever the size of the thing is

524
00:20:32,528 --> 00:20:37,269
like so what we're simulating

525
00:20:34,119 --> 00:20:40,479
essentially like a infinitesimal like

526
00:20:37,269 --> 00:20:42,038
patch right of because you know we're

527
00:20:40,480 --> 00:20:44,200
doing this point by point we're

528
00:20:42,038 --> 00:20:46,000
simulating it at an intentional patch

529
00:20:44,200 --> 00:20:47,500
we're basically saying there's some

530
00:20:46,000 --> 00:20:49,450
shaft of light that's coming down

531
00:20:47,500 --> 00:20:51,190
hitting the surface and the side saying

532
00:20:49,450 --> 00:20:55,600
the surface is some infinitesimal size

533
00:20:51,190 --> 00:20:58,659
right this shaft if we were to rotate it

534
00:20:55,599 --> 00:21:03,250
right we're still talking about how many

535
00:20:58,659 --> 00:21:05,649
light rays fit into that same size patch

536
00:21:03,250 --> 00:21:10,269
that goes in here but what we're looking

537
00:21:05,648 --> 00:21:12,099
for now is this right this is the amount

538
00:21:10,269 --> 00:21:14,649
of light that can hit that patch from

539
00:21:12,099 --> 00:21:19,000
the side right and when we get all the

540
00:21:14,648 --> 00:21:21,278
way to here that is really tiny so as it

541
00:21:19,000 --> 00:21:23,679
starts to fall to the side the the width

542
00:21:21,278 --> 00:21:27,329
even no matter what the size of so even

543
00:21:23,679 --> 00:21:34,659
though this is like in this is

544
00:21:27,329 --> 00:21:37,000
infinitesimal very small even though

545
00:21:34,659 --> 00:21:39,220
this patch is just like if effectively

546
00:21:37,000 --> 00:21:41,500
like an integral sized patch right so

547
00:21:39,220 --> 00:21:44,048
we're just talking about the you know a

548
00:21:41,500 --> 00:21:45,398
generic sized patch that we would

549
00:21:44,048 --> 00:21:46,599
integrate over the entire surface to

550
00:21:45,398 --> 00:21:48,969
calculate the lighting or whatever so

551
00:21:46,599 --> 00:21:52,538
there's no real size to this thing but

552
00:21:48,970 --> 00:21:54,730
it still has a dimension right what we

553
00:21:52,538 --> 00:21:56,500
know is that no matter what the size of

554
00:21:54,730 --> 00:21:57,610
the surface we were asking about whether

555
00:21:56,500 --> 00:21:58,960
it's infinitesimally small for

556
00:21:57,609 --> 00:22:01,000
integration or whether it was actually a

557
00:21:58,960 --> 00:22:03,610
real patch of surface that was you know

558
00:22:01,000 --> 00:22:06,339
a meter wide or something what we know

559
00:22:03,609 --> 00:22:07,059
is as the light comes from a steeper

560
00:22:06,339 --> 00:22:09,730
angle

561
00:22:07,059 --> 00:22:13,869
the amount of light that could hit it

562
00:22:09,730 --> 00:22:16,390
the sort of the the bandwidth the the

563
00:22:13,869 --> 00:22:18,579
the pipe size right the cross section of

564
00:22:16,390 --> 00:22:20,320
the tube of light coming down onto it

565
00:22:18,579 --> 00:22:21,699
just gets smaller and smaller and

566
00:22:20,319 --> 00:22:23,379
smaller until eventually if there's

567
00:22:21,700 --> 00:22:27,340
nothing at you get as you get to like

568
00:22:23,380 --> 00:22:31,180
the perfectly glancing angle right and

569
00:22:27,339 --> 00:22:34,959
so that's where our cosine theta term

570
00:22:31,180 --> 00:22:37,210
comes in right and what I don't

571
00:22:34,960 --> 00:22:39,190
understand because I've never really

572
00:22:37,210 --> 00:22:41,500
gotten the explanation like that part I

573
00:22:39,190 --> 00:22:44,680
understand fairly well what I've never

574
00:22:41,500 --> 00:22:47,019
really quite gotten the full answer on I

575
00:22:44,680 --> 00:22:49,870
don't understand the explanation very

576
00:22:47,019 --> 00:22:51,940
well is how you know whether you need to

577
00:22:49,869 --> 00:22:54,729
do that for the outbound miss right so

578
00:22:51,940 --> 00:22:58,360
if that comes in here that's how much

579
00:22:54,730 --> 00:22:59,860
light this surface has to give off but

580
00:22:58,359 --> 00:23:02,349
then you have an equivalent question

581
00:22:59,859 --> 00:23:04,569
which is like well if I'm viewing the

582
00:23:02,349 --> 00:23:06,519
surface from the side then that limits

583
00:23:04,569 --> 00:23:09,480
the amount of light I could let out in

584
00:23:06,519 --> 00:23:13,750
that direction too doesn't it right and

585
00:23:09,480 --> 00:23:16,329
so what I'm not entirely clear on is why

586
00:23:13,750 --> 00:23:18,819
we seem to mostly talk about a single

587
00:23:16,329 --> 00:23:20,589
cosine incident there and whether or not

588
00:23:18,819 --> 00:23:21,970
it really should be a cosine squared

589
00:23:20,589 --> 00:23:23,139
sort of a situation I mean it's not a

590
00:23:21,970 --> 00:23:25,870
cosine squared because it's two

591
00:23:23,140 --> 00:23:27,400
different angles but it just seems to me

592
00:23:25,869 --> 00:23:30,989
that it's a little bit weird I don't

593
00:23:27,400 --> 00:23:34,150
quite get why we have that sort of

594
00:23:30,990 --> 00:23:37,180
differing dichotic like I don't really

595
00:23:34,150 --> 00:23:38,800
quite grasp the explanation this

596
00:23:37,180 --> 00:23:41,110
physical explanation makes some

597
00:23:38,799 --> 00:23:42,730
intuitive sense to me lightly meaning I

598
00:23:41,109 --> 00:23:46,119
get where they're coming from when they

599
00:23:42,730 --> 00:23:49,779
say well as you imagine it coming from

600
00:23:46,119 --> 00:23:51,939
the side there's less room for the light

601
00:23:49,779 --> 00:23:54,399
to hit in so assuming a uniform field of

602
00:23:51,940 --> 00:23:57,700
light coming in as you get down to an

603
00:23:54,400 --> 00:23:59,200
incident a glancing angle you're going

604
00:23:57,700 --> 00:24:01,779
to get less and less of that light

605
00:23:59,200 --> 00:24:03,970
collected I just am not clear about the

606
00:24:01,779 --> 00:24:06,430
irradiated part of that so when we then

607
00:24:03,970 --> 00:24:08,140
go to radiative outwards shouldn't the

608
00:24:06,430 --> 00:24:11,890
same thing be true meaning I can only

609
00:24:08,140 --> 00:24:14,470
send out a smaller part of light if I'm

610
00:24:11,890 --> 00:24:15,670
looking at on the side right and maybe

611
00:24:14,470 --> 00:24:19,170
you know you know let me just check

612
00:24:15,670 --> 00:24:19,170
let's see if we can find one

613
00:24:19,720 --> 00:24:23,170
because that's basically what you want

614
00:24:21,460 --> 00:24:25,120
to know with lighting right like you

615
00:24:23,170 --> 00:24:27,070
want to know these terms how they do the

616
00:24:25,119 --> 00:24:28,629
fall-off but the point is we need to

617
00:24:27,069 --> 00:24:31,779
know whether we want to account for that

618
00:24:28,630 --> 00:24:33,240
extra cosine in there or not and what we

619
00:24:31,779 --> 00:24:36,190
would do two different equations

620
00:24:33,240 --> 00:24:39,220
depending on the circumstance so if I go

621
00:24:36,190 --> 00:24:42,190
over to it something physically for any

622
00:24:39,220 --> 00:24:47,470
like let's see a specular lighting

623
00:24:42,190 --> 00:24:50,289
equation let me see if we've got

624
00:24:47,470 --> 00:24:52,569
anything that seems reasonable I don't

625
00:24:50,289 --> 00:25:03,279
have any idea which of these things

626
00:24:52,569 --> 00:25:05,439
would be actually useful yeah I really

627
00:25:03,279 --> 00:25:07,240
just don't know but we can try to see

628
00:25:05,440 --> 00:25:14,710
what they end up with in their equation

629
00:25:07,240 --> 00:25:17,109
right okay so this is our exact diagram

630
00:25:14,710 --> 00:25:21,490
which helps right you can see the light

631
00:25:17,109 --> 00:25:26,939
incident here you can see the I guess

632
00:25:21,490 --> 00:25:26,940
the what is the V point in view right

633
00:25:30,269 --> 00:25:38,680
that's the light reflection unit vector

634
00:25:33,430 --> 00:25:40,600
though which okay so this is not quite

635
00:25:38,680 --> 00:25:42,370
exactly our equation there phrasing it

636
00:25:40,599 --> 00:25:46,779
opposite they're doing a light bounce

637
00:25:42,369 --> 00:25:49,209
like that which in weird we did the view

638
00:25:46,779 --> 00:25:57,309
bounce and the reason for that is

639
00:25:49,210 --> 00:25:59,440
because well I guess you know I guess

640
00:25:57,309 --> 00:26:04,919
there's no real penalty for us doing

641
00:25:59,440 --> 00:26:04,920
that if we were to do a view bounce we

642
00:26:05,490 --> 00:26:09,370
so you know I'm just thinking about it

643
00:26:07,720 --> 00:26:11,470
it seems really less efficient right

644
00:26:09,369 --> 00:26:13,209
because we've got six incoming light

645
00:26:11,470 --> 00:26:15,490
sources that we're trying to simulate

646
00:26:13,210 --> 00:26:17,680
here and only one viewer so I think we

647
00:26:15,490 --> 00:26:19,630
did it the more efficient way for us so

648
00:26:17,680 --> 00:26:21,130
we can ignore that though like it's the

649
00:26:19,630 --> 00:26:22,860
same equation either way you can bounce

650
00:26:21,130 --> 00:26:26,770
the light or you can bounce the viewer

651
00:26:22,859 --> 00:26:29,259
and you can you it would wouldn't change

652
00:26:26,769 --> 00:26:31,389
really right so I think we're okay there

653
00:26:29,259 --> 00:26:32,980
but I don't think that's a good decision

654
00:26:31,390 --> 00:26:36,280
for us but we can

655
00:26:32,980 --> 00:26:38,980
we'll use what they suggest so this

656
00:26:36,279 --> 00:26:41,980
right here is the end L so that's the

657
00:26:38,980 --> 00:26:46,390
that lighting is telling us how much

658
00:26:41,980 --> 00:26:47,740
light can hit the surface right and that

659
00:26:46,390 --> 00:26:50,049
was the part I was saying about before

660
00:26:47,740 --> 00:26:52,048
like that tells us how much is there so

661
00:26:50,048 --> 00:26:56,079
we do actually want that amount right

662
00:26:52,048 --> 00:26:58,839
and then we have the reflectivity out

663
00:26:56,079 --> 00:27:07,689
they are doing and they are doing an r

664
00:26:58,839 --> 00:27:11,289
dot V as well so it looks to me know

665
00:27:07,690 --> 00:27:13,720
they use it a some though right so it

666
00:27:11,289 --> 00:27:16,119
looks to me like they just use the

667
00:27:13,720 --> 00:27:18,339
diffuse by itself and the specular by

668
00:27:16,119 --> 00:27:21,519
itself and they don't so there is only

669
00:27:18,339 --> 00:27:31,209
one cosine fall-off there right

670
00:27:21,519 --> 00:27:34,779
I mean that that appears to be that

671
00:27:31,210 --> 00:27:36,429
appears to me what happened again that's

672
00:27:34,779 --> 00:27:39,789
farm lighting which isn't necessarily

673
00:27:36,429 --> 00:27:42,179
physically based though so let me take a

674
00:27:39,789 --> 00:27:42,178
look here

675
00:27:52,130 --> 00:27:55,500
and unfortunately we're probably not

676
00:27:54,269 --> 00:27:57,680
going to get a pretty good we're

677
00:27:55,500 --> 00:28:02,690
probably not going to get a great

678
00:27:57,680 --> 00:28:02,690
explanation there but we can see

679
00:28:26,799 --> 00:28:31,119
I'm just looking for a diagram that

680
00:28:28,480 --> 00:28:34,599
would say I would just discuss that part

681
00:28:31,119 --> 00:28:35,979
because I don't feel like yeah so I

682
00:28:34,599 --> 00:28:38,859
don't know we'll have to take it offline

683
00:28:35,980 --> 00:28:41,259
but that's my only question is like I I

684
00:28:38,859 --> 00:28:43,719
can convince myself a lot of these times

685
00:28:41,259 --> 00:28:45,069
when I read these things I just have to

686
00:28:43,720 --> 00:28:48,339
kind of convince myself that I believe

687
00:28:45,069 --> 00:28:50,919
it because light is a pretty tricky

688
00:28:48,339 --> 00:28:55,779
thing and I don't you know you can't

689
00:28:50,920 --> 00:28:57,789
really see it at the kinds of scales

690
00:28:55,779 --> 00:28:59,710
that we're talking about here so it's

691
00:28:57,789 --> 00:29:02,319
like I'm like yeah all right I believe

692
00:28:59,710 --> 00:29:05,440
this explanation of like if we imagined

693
00:29:02,319 --> 00:29:06,519
a particular size any size and you want

694
00:29:05,440 --> 00:29:09,100
to talk about how much gain if the

695
00:29:06,519 --> 00:29:11,319
service I'd get that but then I don't

696
00:29:09,099 --> 00:29:13,869
understand like why you wouldn't care on

697
00:29:11,319 --> 00:29:15,460
the like outbound side and I don't know

698
00:29:13,869 --> 00:29:18,459
there's a lot of stuff that it just

699
00:29:15,460 --> 00:29:20,620
doesn't make good sense to me sometimes

700
00:29:18,460 --> 00:29:22,390
and it's hard for me to really like wrap

701
00:29:20,619 --> 00:29:23,859
my head around like why it's true in one

702
00:29:22,390 --> 00:29:26,470
case but not true in the other case and

703
00:29:23,859 --> 00:29:27,369
so I would feel better if we double

704
00:29:26,470 --> 00:29:30,190
checked our letting stuff with a

705
00:29:27,369 --> 00:29:32,769
physically by I don't do much lighting

706
00:29:30,190 --> 00:29:34,900
work and so I would feel better if we

707
00:29:32,769 --> 00:29:36,490
had some verification there but we can

708
00:29:34,900 --> 00:29:37,900
do that later because again we just need

709
00:29:36,490 --> 00:29:39,190
this to be roughly correct and we can

710
00:29:37,900 --> 00:29:40,750
finish the rest of our lighting system

711
00:29:39,190 --> 00:29:44,170
and then we could come back to this part

712
00:29:40,750 --> 00:29:47,049
and try to make it more in line with

713
00:29:44,170 --> 00:29:52,150
what we want as we go but anyway so if

714
00:29:47,049 --> 00:29:53,259
we have a reflection the direction we

715
00:29:52,150 --> 00:29:55,480
want to say if we want to see what

716
00:29:53,259 --> 00:29:57,069
lights coming from that direction we've

717
00:29:55,480 --> 00:29:58,779
got this light DC that's going to be

718
00:29:57,069 --> 00:30:01,089
important for our diffuse term like I

719
00:29:58,779 --> 00:30:03,759
said before but we also kind of need it

720
00:30:01,089 --> 00:30:06,669
to make sure that we don't allow mixing

721
00:30:03,759 --> 00:30:09,210
in of this light in the case where this

722
00:30:06,670 --> 00:30:11,759
is zero so what we would like to do is

723
00:30:09,210 --> 00:30:16,539
effectively have a thing where we say if

724
00:30:11,759 --> 00:30:19,839
light DC equals zero then ref C equals

725
00:30:16,539 --> 00:30:21,639
zero right and this is just a quick like

726
00:30:19,839 --> 00:30:24,490
sort of conditional move kind of a thing

727
00:30:21,640 --> 00:30:28,509
we're basically saying look if we can't

728
00:30:24,490 --> 00:30:30,569
see the light from here because the

729
00:30:28,509 --> 00:30:32,650
surface itself would have blocked it

730
00:30:30,569 --> 00:30:36,849
then what we want to do is make sure

731
00:30:32,650 --> 00:30:40,080
that we knock out 100% of the light now

732
00:30:36,849 --> 00:30:43,288
really we can make this be a

733
00:30:40,079 --> 00:30:45,298
or specific like we don't have to be

734
00:30:43,288 --> 00:30:47,220
that cagey because what we know is that

735
00:30:45,298 --> 00:30:49,168
if we can't see the light from here

736
00:30:47,220 --> 00:30:51,089
we shouldn't even have bothered really

737
00:30:49,169 --> 00:30:53,610
computing this in the first place

738
00:30:51,089 --> 00:30:56,849
and so what we might want to do instead

739
00:30:53,609 --> 00:30:59,819
is say well actually why don't we just

740
00:30:56,849 --> 00:31:02,699
say if the light DC is greater than zero

741
00:30:59,819 --> 00:31:05,700
do the equation otherwise don't do any

742
00:31:02,700 --> 00:31:10,798
of it right so what we may want to do is

743
00:31:05,700 --> 00:31:14,610
say like look the result starts out at

744
00:31:10,798 --> 00:31:16,829
zero we will compute this thing in the

745
00:31:14,609 --> 00:31:18,538
case where we actually know we can see

746
00:31:16,829 --> 00:31:21,689
it but otherwise we just won't compute

747
00:31:18,538 --> 00:31:24,538
it at all right and so that I think is

748
00:31:21,690 --> 00:31:27,058
probably what we want because in the

749
00:31:24,538 --> 00:31:29,190
case where we're talking about lights

750
00:31:27,058 --> 00:31:31,440
that can't be seen probably most of the

751
00:31:29,190 --> 00:31:33,269
pixels in the warp will not be able to

752
00:31:31,440 --> 00:31:39,179
see it and will be able to fast track

753
00:31:33,269 --> 00:31:41,519
that part of the computation right and

754
00:31:39,179 --> 00:31:43,740
so what you can see now as well is I

755
00:31:41,519 --> 00:31:44,339
think we're kind of now getting a more

756
00:31:43,740 --> 00:31:46,919
correct

757
00:31:44,339 --> 00:31:49,048
I think lighting I think the reason we

758
00:31:46,919 --> 00:31:51,630
were seeing so much light before that I

759
00:31:49,048 --> 00:31:54,179
think we probably shouldn't have seen is

760
00:31:51,630 --> 00:31:57,450
is because we weren't sort of knocking

761
00:31:54,179 --> 00:31:59,009
those services out however I do think we

762
00:31:57,450 --> 00:32:00,600
still got I don't think that's quite

763
00:31:59,009 --> 00:32:04,169
right because when I'm looking at it

764
00:32:00,599 --> 00:32:06,119
here I expect to see some yellow bounce

765
00:32:04,169 --> 00:32:10,500
there and I'm not seeing it so this may

766
00:32:06,119 --> 00:32:14,219
be incorrect here if the world normal

767
00:32:10,500 --> 00:32:15,839
and the light well no you know what I

768
00:32:14,220 --> 00:32:18,389
guess that's not incorrect now I think

769
00:32:15,839 --> 00:32:20,939
about it that's correct because this

770
00:32:18,388 --> 00:32:23,428
surface that I was looking at there this

771
00:32:20,940 --> 00:32:24,600
surface is directly perpendicular to the

772
00:32:23,429 --> 00:32:27,899
light source the light source is coming

773
00:32:24,599 --> 00:32:32,038
from straight bottom right and so you

774
00:32:27,898 --> 00:32:35,268
can't see it if if you've got a surface

775
00:32:32,038 --> 00:32:39,269
that's that that's that flat to it

776
00:32:35,269 --> 00:32:42,419
that's actually true so the problem that

777
00:32:39,269 --> 00:32:47,190
I think we would have there is it's not

778
00:32:42,419 --> 00:32:49,159
immediately clear to me that that's the

779
00:32:47,190 --> 00:32:51,389
right answer the only reason is because

780
00:32:49,159 --> 00:32:53,420
we're kind of simulating these light

781
00:32:51,388 --> 00:32:55,969
probes as cubes right

782
00:32:53,420 --> 00:32:58,190
and so I don't know that we want to take

783
00:32:55,970 --> 00:33:00,829
out all of the light that's coming from

784
00:32:58,190 --> 00:33:04,220
below us because it's a probe right and

785
00:33:00,829 --> 00:33:06,289
so I feel like we kind of want more of

786
00:33:04,220 --> 00:33:08,960
that light in there and just to talk

787
00:33:06,289 --> 00:33:11,990
about what I'm just to draw out what I'm

788
00:33:08,960 --> 00:33:14,930
talking about they're just a little more

789
00:33:11,990 --> 00:33:15,740
clearly so if you imagine what we're

790
00:33:14,930 --> 00:33:18,380
doing here

791
00:33:15,740 --> 00:33:20,690
I think what we saw there was actually

792
00:33:18,380 --> 00:33:22,910
correcting that we had a wall this is

793
00:33:20,690 --> 00:33:24,440
the normal to the wall we're talking

794
00:33:22,910 --> 00:33:26,570
about a light that's incoming from this

795
00:33:24,440 --> 00:33:30,110
direction right so the outbound lighting

796
00:33:26,569 --> 00:33:32,359
direction we're looking or the direction

797
00:33:30,109 --> 00:33:34,789
to the light source is completely

798
00:33:32,359 --> 00:33:36,949
perpendicular to the wall so based on

799
00:33:34,789 --> 00:33:38,420
cosine fall-off we should not be able to

800
00:33:36,950 --> 00:33:41,240
see it right

801
00:33:38,420 --> 00:33:43,490
it simply shouldn't be possible to see

802
00:33:41,240 --> 00:33:45,019
that light source at all because none of

803
00:33:43,490 --> 00:33:47,870
that light can bounce off a perfectly

804
00:33:45,019 --> 00:33:51,170
vertical surface the problem is this is

805
00:33:47,869 --> 00:33:54,619
a light probe it represents all of the

806
00:33:51,170 --> 00:33:59,180
light coming from an entire cube right

807
00:33:54,619 --> 00:34:01,849
so like this it's gonna represent all of

808
00:33:59,180 --> 00:34:04,580
the light coming from a cube by putting

809
00:34:01,849 --> 00:34:06,469
it down in here and so we kind of end up

810
00:34:04,579 --> 00:34:09,739
in a circumstance where that's not very

811
00:34:06,470 --> 00:34:13,099
useful because it could easily have seen

812
00:34:09,739 --> 00:34:15,199
light from that direction all through

813
00:34:13,099 --> 00:34:18,949
here would have hit that bottom part of

814
00:34:15,199 --> 00:34:20,480
the cube right and so when we look in a

815
00:34:18,949 --> 00:34:23,509
direction and we want to know what's off

816
00:34:20,480 --> 00:34:25,699
in this direction doing that seems bad

817
00:34:23,510 --> 00:34:27,950
and while we want to prevent it from

818
00:34:25,699 --> 00:34:30,529
looking over here we don't really want

819
00:34:27,949 --> 00:34:34,069
to prevent it from looking anywhere in

820
00:34:30,530 --> 00:34:37,820
here right and that is exactly what we

821
00:34:34,070 --> 00:34:40,460
would be doing by taking the dot product

822
00:34:37,820 --> 00:34:42,800
of this normal with this normal you know

823
00:34:40,460 --> 00:34:50,780
what I'm saying to you so I think it's a

824
00:34:42,800 --> 00:34:53,240
little harder then we would like and I

825
00:34:50,780 --> 00:34:55,760
think what we want to do here is talk

826
00:34:53,239 --> 00:35:00,439
about spreads a little bit so meaning

827
00:34:55,760 --> 00:35:02,750
what we'd rather do is say all right the

828
00:35:00,440 --> 00:35:06,019
amount of light you could see from here

829
00:35:02,750 --> 00:35:07,280
is actually you know it's it's sort of

830
00:35:06,019 --> 00:35:09,590
trying to ask

831
00:35:07,280 --> 00:35:11,660
a wider field of view and it's

832
00:35:09,590 --> 00:35:14,480
specifically the direction of the light

833
00:35:11,659 --> 00:35:20,119
source we're sort of talking about a 45

834
00:35:14,480 --> 00:35:23,329
degree angle right that you can see out

835
00:35:20,119 --> 00:35:25,549
of that you know like a it's a it's a 90

836
00:35:23,329 --> 00:35:28,699
degree frustum right 45 in either

837
00:35:25,550 --> 00:35:33,490
direction so we kind of want there to be

838
00:35:28,699 --> 00:35:36,139
an actual ability to see this half right

839
00:35:33,489 --> 00:35:38,750
of that lighting source by going this

840
00:35:36,139 --> 00:35:42,049
way and we might want to account for the

841
00:35:38,750 --> 00:35:43,760
fact that it falls off to half right and

842
00:35:42,050 --> 00:35:45,650
there is such a thing as falling off to

843
00:35:43,760 --> 00:35:49,880
zero if you manage to get all the way

844
00:35:45,650 --> 00:35:52,250
back here on it but we kind of need an

845
00:35:49,880 --> 00:35:54,800
equation that represents that fall off a

846
00:35:52,250 --> 00:35:57,739
little bit better right it needs to be

847
00:35:54,800 --> 00:36:04,190
able to account for a wedge of light

848
00:35:57,739 --> 00:36:07,009
coming in and sort of taking that into

849
00:36:04,190 --> 00:36:08,809
account right and I'm not really sure

850
00:36:07,010 --> 00:36:10,010
the best way to do that but I do think

851
00:36:08,809 --> 00:36:12,110
we want to do it

852
00:36:10,010 --> 00:36:13,580
at least a little bit so when we're

853
00:36:12,110 --> 00:36:15,050
doing this here where we're doing the

854
00:36:13,579 --> 00:36:19,489
light and the world normal and we do a

855
00:36:15,050 --> 00:36:22,690
clamp zero to one I think what we want

856
00:36:19,489 --> 00:36:28,459
to do here is we want to potentially

857
00:36:22,690 --> 00:36:33,530
bias this by some amount you know some

858
00:36:28,460 --> 00:36:36,380
some amount of bias upward so that you

859
00:36:33,530 --> 00:36:37,700
know we can count light that's coming

860
00:36:36,380 --> 00:36:40,760
from a wider cone

861
00:36:37,699 --> 00:36:43,129
I feel like again we're gonna want to

862
00:36:40,760 --> 00:36:45,920
work the equations out more carefully

863
00:36:43,130 --> 00:36:48,320
but I think we want something more like

864
00:36:45,920 --> 00:36:50,539
that where we're allowing light to come

865
00:36:48,320 --> 00:36:55,760
from a wider

866
00:36:50,539 --> 00:36:58,119
I didn't mean hit the escape game let's

867
00:36:55,760 --> 00:36:58,120
try that again

868
00:37:00,088 --> 00:37:05,980
I'd like that our logo is lit so I feel

869
00:37:04,059 --> 00:37:07,990
like we do want something more like this

870
00:37:05,980 --> 00:37:11,440
and so do you see how that's now getting

871
00:37:07,989 --> 00:37:14,828
that contribution in there which i think

872
00:37:11,440 --> 00:37:17,858
is more what we want so I think this is

873
00:37:14,829 --> 00:37:22,059
a better approximation it may be that

874
00:37:17,858 --> 00:37:23,769
that's a little too much right and so

875
00:37:22,059 --> 00:37:27,579
it's hard to say but that that would be

876
00:37:23,769 --> 00:37:33,030
the full 45 because if you look right

877
00:37:27,579 --> 00:37:33,030
and we asked the question well what is

878
00:37:38,159 --> 00:37:45,399
the cosine of 45 degrees

879
00:37:41,588 --> 00:37:48,730
it's 0.7 Oh blah blah blah blah blah

880
00:37:45,400 --> 00:37:51,400
right and so if we wanted to talk about

881
00:37:48,730 --> 00:37:54,900
exactly 45 degrees spread we should

882
00:37:51,400 --> 00:37:57,338
probably be adding like 0.7 ish right

883
00:37:54,900 --> 00:38:00,068
and if we wanted maybe a little bit less

884
00:37:57,338 --> 00:38:03,699
than a 45 degree spread we could drop

885
00:38:00,068 --> 00:38:09,000
that down right but so this value should

886
00:38:03,699 --> 00:38:12,338
probably be more like that honestly

887
00:38:09,000 --> 00:38:16,719
although actually it's the other way

888
00:38:12,338 --> 00:38:20,558
round so it's probably this it's the

889
00:38:16,719 --> 00:38:25,659
inverse right of that it's the it's the

890
00:38:20,559 --> 00:38:29,280
it's the amount you would get if you

891
00:38:25,659 --> 00:38:29,279
were 45 degrees off

892
00:38:35,380 --> 00:38:40,818
trying to see how let me let me draw

893
00:38:38,389 --> 00:38:42,348
this out because I I was about to say

894
00:38:40,818 --> 00:38:44,838
something very hand wavy there and I

895
00:38:42,349 --> 00:38:48,920
want to make sure that it's not totally

896
00:38:44,838 --> 00:38:54,710
bogus so we're talking about a situation

897
00:38:48,920 --> 00:38:56,960
right where we've got here is our

898
00:38:54,710 --> 00:38:59,690
surface normal and we're talking about a

899
00:38:56,960 --> 00:39:02,659
light perhaps that is directly incident

900
00:38:59,690 --> 00:39:05,088
sorry directly parallel to the surface

901
00:39:02,659 --> 00:39:07,279
it looks like that and what we're seeing

902
00:39:05,088 --> 00:39:10,909
is that well you know what we would

903
00:39:07,280 --> 00:39:13,040
really like to do is say that this

904
00:39:10,909 --> 00:39:16,608
surface looked more like this

905
00:39:13,039 --> 00:39:23,000
so actually we want zero to be when you

906
00:39:16,608 --> 00:39:27,078
get all the way to when the dot product

907
00:39:23,000 --> 00:39:30,739
right gets all the way to this 90

908
00:39:27,079 --> 00:39:33,769
degrees plus this 45 degrees right so

909
00:39:30,739 --> 00:39:35,838
it's the 90 degrees plus 45 degrees of

910
00:39:33,769 --> 00:39:39,889
the dot product that's what we actually

911
00:39:35,838 --> 00:39:44,808
want to see there right now we know that

912
00:39:39,889 --> 00:39:46,759
when we do this just bear with me as I

913
00:39:44,809 --> 00:39:48,980
draw the diagram we know that when we do

914
00:39:46,760 --> 00:39:51,230
this the inner product will go to zero

915
00:39:48,980 --> 00:39:53,568
here right because the inner product

916
00:39:51,230 --> 00:39:57,949
gives us the cosine of the angle between

917
00:39:53,568 --> 00:40:06,798
the vectors so if we take 90 degrees

918
00:39:57,949 --> 00:40:10,189
plus 45 degrees it's not this it's this

919
00:40:06,798 --> 00:40:12,409
right and so if we look at what that

920
00:40:10,190 --> 00:40:15,980
cosine is going to be we would say

921
00:40:12,409 --> 00:40:18,769
what's the cosine of 45 plus 90 degrees

922
00:40:15,980 --> 00:40:21,318
right and so when we take the cosine of

923
00:40:18,769 --> 00:40:26,480
45 plus 9 degrees we're expecting that

924
00:40:21,318 --> 00:40:29,869
value here this one here to be negative

925
00:40:26,480 --> 00:40:32,150
seven right so that's when it should go

926
00:40:29,869 --> 00:40:35,480
to zero if we were to make it the full

927
00:40:32,150 --> 00:40:39,980
45 degrees right it should go to sorry

928
00:40:35,480 --> 00:40:41,539
negative point seven right so when it

929
00:40:39,980 --> 00:40:44,210
goes to negative point seven if we

930
00:40:41,539 --> 00:40:46,068
really wanted that to be the end of the

931
00:40:44,210 --> 00:40:49,030
fall off so the end of the fall off goes

932
00:40:46,068 --> 00:40:49,029
goes there

933
00:40:49,849 --> 00:40:56,329
and so we swing completely around here

934
00:40:52,070 --> 00:40:58,190
then yeah when we do our cosine theta we

935
00:40:56,329 --> 00:41:00,799
would expect us to get point seven and

936
00:40:58,190 --> 00:41:02,960
we'd so we would bump the entire thing

937
00:41:00,800 --> 00:41:04,460
up by the point seven so my point three

938
00:41:02,960 --> 00:41:06,440
thing was wrong we would bump the entire

939
00:41:04,460 --> 00:41:10,130
thing up by the point seven and that

940
00:41:06,440 --> 00:41:13,309
would give us you know as if we were

941
00:41:10,130 --> 00:41:17,180
getting the entire range right that's

942
00:41:13,309 --> 00:41:19,909
one thing however what we want to be

943
00:41:17,179 --> 00:41:21,889
doing here is treating this as if we are

944
00:41:19,909 --> 00:41:25,639
still talking about cosine fall-off I

945
00:41:21,889 --> 00:41:29,509
think right so what we really want to do

946
00:41:25,639 --> 00:41:32,150
is map this range more consistently

947
00:41:29,510 --> 00:41:34,760
right so when we take these two vectors

948
00:41:32,150 --> 00:41:37,309
we would really if we could we'd want to

949
00:41:34,760 --> 00:41:40,310
compress this down a little bit more so

950
00:41:37,309 --> 00:41:42,739
rather than talking about simply jacking

951
00:41:40,309 --> 00:41:45,170
it up what we may want to do is talk

952
00:41:42,739 --> 00:41:46,609
about shifting it and scaling it so

953
00:41:45,170 --> 00:41:50,139
scaling it back down because remember

954
00:41:46,610 --> 00:41:53,360
that would make our cosine go now

955
00:41:50,139 --> 00:41:56,150
between the zero clamp which is it can

956
00:41:53,360 --> 00:41:58,190
go all the way to now negative 0.3 we're

957
00:41:56,150 --> 00:42:01,760
clamping that out right so it's going to

958
00:41:58,190 --> 00:42:04,280
go from zero to one point seven so we

959
00:42:01,760 --> 00:42:08,350
may also want to multiply by one over

960
00:42:04,280 --> 00:42:15,050
one point seven right to rescale back

961
00:42:08,349 --> 00:42:19,130
those values so I would guess it would

962
00:42:15,050 --> 00:42:27,700
be something like 1 over one point seven

963
00:42:19,130 --> 00:42:27,700
times the inner product plus 0.7 right

964
00:42:31,920 --> 00:42:37,499
again not really sure this is a valid

965
00:42:35,400 --> 00:42:39,450
way of doing this but it at least gives

966
00:42:37,498 --> 00:42:41,578
us something that approximates and

967
00:42:39,449 --> 00:42:45,989
inbound light for these kind of weird

968
00:42:41,579 --> 00:42:48,269
samples we're doing and I'm gonna call

969
00:42:45,989 --> 00:42:51,269
that good enough for now we can also we

970
00:42:48,268 --> 00:42:53,129
can always kind of work on our letting

971
00:42:51,268 --> 00:42:55,379
equations later once we feel like we've

972
00:42:53,130 --> 00:42:57,358
got the rest of the system under control

973
00:42:55,380 --> 00:42:59,640
right but so now we're sampling from

974
00:42:57,358 --> 00:43:01,980
those light sources I think a little bit

975
00:42:59,639 --> 00:43:04,949
more sanely and off we go

976
00:43:01,980 --> 00:43:07,289
okay so now let's work on the diffuse

977
00:43:04,949 --> 00:43:09,419
lighting component of this because we're

978
00:43:07,289 --> 00:43:11,940
not doing we only have that one

979
00:43:09,420 --> 00:43:13,349
reflection not only that but this is not

980
00:43:11,940 --> 00:43:14,309
really a spectra lighting equation

981
00:43:13,349 --> 00:43:17,400
because normally you'd raise the

982
00:43:14,309 --> 00:43:18,839
specular light to a power as well so we

983
00:43:17,400 --> 00:43:21,329
haven't done that yet but we also

984
00:43:18,838 --> 00:43:22,920
haven't included any diffuse lighting so

985
00:43:21,329 --> 00:43:25,950
to include some diffuse lighting in here

986
00:43:22,920 --> 00:43:29,249
as well what we need to do is actually

987
00:43:25,949 --> 00:43:30,989
use our light DC to figure out how much

988
00:43:29,248 --> 00:43:32,788
light should probably be emanating from

989
00:43:30,989 --> 00:43:35,489
the surface in the first place

990
00:43:32,789 --> 00:43:38,339
and in order to do that what we would

991
00:43:35,489 --> 00:43:40,108
like to do is use this incident dot

992
00:43:38,338 --> 00:43:42,828
product to determine how much light just

993
00:43:40,108 --> 00:43:44,848
goes in an arbitrary direction right so

994
00:43:42,829 --> 00:43:48,170
incoming light and then we bounce it out

995
00:43:44,849 --> 00:43:50,548
at a particular at basically the rate

996
00:43:48,170 --> 00:43:51,869
commensurate with that that inner

997
00:43:50,548 --> 00:43:53,670
product of the surface normal and the

998
00:43:51,869 --> 00:43:55,440
incoming light so in order to do that

999
00:43:53,670 --> 00:43:57,778
what we want to do is in addition to

1000
00:43:55,440 --> 00:44:02,849
this equation right we would like to

1001
00:43:57,778 --> 00:44:04,679
have a sort of a light DC term here

1002
00:44:02,849 --> 00:44:09,079
that's going to multiply this as well

1003
00:44:04,679 --> 00:44:11,460
right the light V RGB we want that part

1004
00:44:09,079 --> 00:44:13,980
as well and that's the diffuse component

1005
00:44:11,460 --> 00:44:16,108
what we can do probably is just add

1006
00:44:13,980 --> 00:44:17,400
these two things together right that's

1007
00:44:16,108 --> 00:44:20,278
how much light would be coming in from

1008
00:44:17,400 --> 00:44:21,660
the direct specular and then how much

1009
00:44:20,278 --> 00:44:24,088
light would be coming in from the light

1010
00:44:21,659 --> 00:44:26,278
DC right I'm gonna break it into two

1011
00:44:24,088 --> 00:44:27,599
parts only because we probably want to

1012
00:44:26,278 --> 00:44:29,309
spec there power if I want to play the

1013
00:44:27,599 --> 00:44:31,829
specular separately so what I'm gonna do

1014
00:44:29,309 --> 00:44:35,339
is I'm going to get in here a basically

1015
00:44:31,829 --> 00:44:39,180
a light like an inbound light so this is

1016
00:44:35,338 --> 00:44:43,259
a inbound like or an irradiance value

1017
00:44:39,179 --> 00:44:44,259
right that's just coming from the lights

1018
00:44:43,259 --> 00:44:47,619
art or or

1019
00:44:44,260 --> 00:44:50,410
maybe I'll call this sure light just

1020
00:44:47,619 --> 00:44:53,050
just the light turn by itself or unpack

1021
00:44:50,409 --> 00:44:54,608
the light basically we're sort of

1022
00:44:53,050 --> 00:45:04,260
reconstructing what the light incoming

1023
00:44:54,608 --> 00:45:06,819
light color is that something like that

1024
00:45:04,260 --> 00:45:08,920
and so then what I want to do is I want

1025
00:45:06,820 --> 00:45:13,599
to have that in both sides right so I

1026
00:45:08,920 --> 00:45:16,858
want the light color times the diffuse

1027
00:45:13,599 --> 00:45:19,660
amount and then I want the light color

1028
00:45:16,858 --> 00:45:21,909
plus they're reflected amount right and

1029
00:45:19,659 --> 00:45:23,409
so we're counting both of these now it

1030
00:45:21,909 --> 00:45:26,319
may not make a lot of sense to count

1031
00:45:23,409 --> 00:45:28,269
both of these because again we want sup

1032
00:45:26,320 --> 00:45:30,338
there's a certain amount this surface

1033
00:45:28,269 --> 00:45:31,690
whatever the service is transmits a

1034
00:45:30,338 --> 00:45:33,489
certain amount of diffuse light and a

1035
00:45:31,690 --> 00:45:36,220
certain amount of secular light or might

1036
00:45:33,489 --> 00:45:38,828
have an actual like lighting equation

1037
00:45:36,219 --> 00:45:40,598
that it uses like a brdf or something to

1038
00:45:38,829 --> 00:45:42,070
determine how much diffuse light how

1039
00:45:40,599 --> 00:45:44,530
much specular light comes out at any

1040
00:45:42,070 --> 00:45:45,789
particular point and so on because you

1041
00:45:44,530 --> 00:45:48,099
know lightning is lighting and it's

1042
00:45:45,789 --> 00:45:51,969
complicated so what we want to do is

1043
00:45:48,099 --> 00:45:54,099
probably mix these using some sort of a

1044
00:45:51,969 --> 00:45:55,929
surface characteristic some surfaces

1045
00:45:54,099 --> 00:45:57,700
will be very specular some will be very

1046
00:45:55,929 --> 00:46:00,009
diffuse things like that and we would

1047
00:45:57,699 --> 00:46:01,629
like some way of talking about that

1048
00:46:00,010 --> 00:46:06,970
particular piece of information what did

1049
00:46:01,630 --> 00:46:09,240
I do wrong here that is what I did wrong

1050
00:46:06,969 --> 00:46:09,239
here

1051
00:46:12,909 --> 00:46:26,420
all right off we go and so this is now

1052
00:46:22,630 --> 00:46:28,250
what we would expect more to see with

1053
00:46:26,420 --> 00:46:29,990
again the diffuse and the reflected

1054
00:46:28,250 --> 00:46:32,900
lighting and what you can see is there's

1055
00:46:29,989 --> 00:46:35,809
a lot less angular dependence so as I

1056
00:46:32,900 --> 00:46:38,869
get like really incident where the light

1057
00:46:35,809 --> 00:46:41,269
sampling is right off the bounce I see

1058
00:46:38,869 --> 00:46:44,179
more of that specular coming in but as I

1059
00:46:41,269 --> 00:46:46,880
come down I don't get as much specular

1060
00:46:44,179 --> 00:46:48,619
right and so that's what we would expect

1061
00:46:46,880 --> 00:46:51,680
to see and that's all fine

1062
00:46:48,619 --> 00:46:53,989
if I now change to just one light so

1063
00:46:51,679 --> 00:46:59,049
let's go back to our lighting where we

1064
00:46:53,989 --> 00:47:01,519
output sort of fake lighting information

1065
00:46:59,050 --> 00:47:03,860
if I go into the fake lighting

1066
00:47:01,519 --> 00:47:05,989
information and I just stuff it with

1067
00:47:03,860 --> 00:47:07,670
something else so instead of what we

1068
00:47:05,989 --> 00:47:09,109
were stuffing it with which is like two

1069
00:47:07,670 --> 00:47:10,760
directional lights one from the top one

1070
00:47:09,110 --> 00:47:13,010
from the bottom you can see that

1071
00:47:10,760 --> 00:47:15,440
happening here if I took out one of the

1072
00:47:13,010 --> 00:47:17,510
lights and now we're just talking purely

1073
00:47:15,440 --> 00:47:20,119
about an inbound light coming from above

1074
00:47:17,510 --> 00:47:25,340
us and I want to look at what that looks

1075
00:47:20,119 --> 00:47:26,839
like what I can do is see how that

1076
00:47:25,340 --> 00:47:29,600
diffuse lighting holds up now right

1077
00:47:26,840 --> 00:47:32,269
because now you can see that like things

1078
00:47:29,599 --> 00:47:35,449
that really don't get much specular

1079
00:47:32,269 --> 00:47:36,980
bounce right still get some light when

1080
00:47:35,449 --> 00:47:38,569
we have something coming from the top

1081
00:47:36,980 --> 00:47:41,570
and that's what we would expect right

1082
00:47:38,570 --> 00:47:43,100
these are really brightly reflecting

1083
00:47:41,570 --> 00:47:45,260
because they happen to point right there

1084
00:47:43,099 --> 00:47:46,460
and they get brighter as we get incident

1085
00:47:45,260 --> 00:47:49,670
on them right because that's because

1086
00:47:46,460 --> 00:47:52,400
that's the specular contribution coming

1087
00:47:49,670 --> 00:47:53,720
in right and similarly like well it's

1088
00:47:52,400 --> 00:47:55,010
hard to kind of see them because it's

1089
00:47:53,719 --> 00:47:58,279
hard because we've got we don't have any

1090
00:47:55,010 --> 00:48:00,080
that extend really that far downward but

1091
00:47:58,280 --> 00:48:01,519
as I get incident on these right they're

1092
00:48:00,079 --> 00:48:05,389
dimmer there they're gonna be brighter

1093
00:48:01,519 --> 00:48:07,699
here but that's just again like the

1094
00:48:05,389 --> 00:48:09,319
diffuse helps keep services from seeming

1095
00:48:07,699 --> 00:48:10,879
like they're kind of doing mirror

1096
00:48:09,320 --> 00:48:14,420
lighting which is you know not what most

1097
00:48:10,880 --> 00:48:18,410
of our services are going to be doing so

1098
00:48:14,420 --> 00:48:21,740
this is what we would expect here and I

1099
00:48:18,409 --> 00:48:25,639
think that makes all good sense if we

1100
00:48:21,739 --> 00:48:26,719
wanted to control the specular versus

1101
00:48:25,639 --> 00:48:29,629
diffuse as almost

1102
00:48:26,719 --> 00:48:32,299
like a slider right then what we would

1103
00:48:29,630 --> 00:48:34,250
need here is some information about the

1104
00:48:32,300 --> 00:48:37,280
material which at the moment we don't

1105
00:48:34,250 --> 00:48:39,590
really have right we don't know anything

1106
00:48:37,280 --> 00:48:41,540
about the material that we're sampling

1107
00:48:39,590 --> 00:48:43,608
here and that's something that we just

1108
00:48:41,539 --> 00:48:45,710
haven't really addressed in handmade

1109
00:48:43,608 --> 00:48:48,829
here oh we don't have any information

1110
00:48:45,710 --> 00:48:51,230
about what materials were sampling we

1111
00:48:48,829 --> 00:48:54,949
don't really know anything about them

1112
00:48:51,230 --> 00:48:59,630
we could have a non per pixel material

1113
00:48:54,949 --> 00:49:02,118
and we could have a an object per pixel

1114
00:48:59,630 --> 00:49:07,130
material specified fairly cheaply that

1115
00:49:02,119 --> 00:49:08,450
would just go into our it would

1116
00:49:07,130 --> 00:49:11,990
basically go into our pipeline where the

1117
00:49:08,449 --> 00:49:14,719
color where this where the color term

1118
00:49:11,989 --> 00:49:17,419
goes in per vertex that'd be a pretty

1119
00:49:14,719 --> 00:49:20,239
few place to put it if we wanted it per

1120
00:49:17,420 --> 00:49:22,730
pixel we're in a bit of a bind the

1121
00:49:20,239 --> 00:49:25,579
reason we can't get away with anything

1122
00:49:22,730 --> 00:49:27,710
free there is because normally what you

1123
00:49:25,579 --> 00:49:30,380
would do for most situations in 3d

1124
00:49:27,710 --> 00:49:31,909
rendering is if you want to have stuff

1125
00:49:30,380 --> 00:49:33,559
like material parameters per pixel you

1126
00:49:31,909 --> 00:49:36,440
can use stuff like the Alpha Channel of

1127
00:49:33,559 --> 00:49:39,650
the texture of a four-wide texture so

1128
00:49:36,440 --> 00:49:43,429
you have RGB and then you're like

1129
00:49:39,650 --> 00:49:44,809
parameter for reflectance we don't

1130
00:49:43,429 --> 00:49:47,509
really have that luxury because we have

1131
00:49:44,809 --> 00:49:50,420
sprites everywhere so we use our alpha

1132
00:49:47,510 --> 00:49:52,970
for saying how transparent is the pixel

1133
00:49:50,420 --> 00:49:56,659
at this point we still could do

1134
00:49:52,969 --> 00:49:59,118
something there we could split our pixel

1135
00:49:56,659 --> 00:50:01,069
definition because it's arguable that we

1136
00:49:59,119 --> 00:50:02,900
don't really need 256 levels of

1137
00:50:01,070 --> 00:50:05,359
transparency transmitted in the textures

1138
00:50:02,900 --> 00:50:07,099
so we could say that our textures could

1139
00:50:05,358 --> 00:50:09,949
have actual information in them about

1140
00:50:07,099 --> 00:50:11,630
reflectance by seeing that maybe we take

1141
00:50:09,949 --> 00:50:14,989
the 8 bits and we split it into 4 bits

1142
00:50:11,630 --> 00:50:19,369
and 4 bits 16 bits of alpha 16 I'm sorry

1143
00:50:14,989 --> 00:50:21,289
60% 16 levels of alpha 16 levels of

1144
00:50:19,369 --> 00:50:23,240
specularity that's not a bad idea

1145
00:50:21,289 --> 00:50:26,659
I like that idea we could totally do

1146
00:50:23,239 --> 00:50:27,889
something like that but at the moment

1147
00:50:26,659 --> 00:50:29,319
we're not really stuff to do it anyway

1148
00:50:27,889 --> 00:50:32,569
because we don't have an input for that

1149
00:50:29,320 --> 00:50:34,490
at some point we could actually have a

1150
00:50:32,570 --> 00:50:36,200
way to paint specular Maps you would

1151
00:50:34,489 --> 00:50:37,399
import those into the games so it's

1152
00:50:36,199 --> 00:50:40,639
something to think about but what I want

1153
00:50:37,400 --> 00:50:43,720
to do is say let's pretend

1154
00:50:40,639 --> 00:50:45,859
that we can get something like that and

1155
00:50:43,719 --> 00:50:47,750
what we'll do now is just make it a

1156
00:50:45,860 --> 00:50:49,910
constant so right now what we'll do is

1157
00:50:47,750 --> 00:50:52,579
we'll say like specularity or something

1158
00:50:49,909 --> 00:50:54,859
right and this is just a random respect

1159
00:50:52,579 --> 00:50:56,929
spec mix right suspect coefficient or

1160
00:50:54,860 --> 00:50:59,090
something like that and what we'll do is

1161
00:50:56,929 --> 00:51:00,349
we'll say that there's a well I guess

1162
00:50:59,090 --> 00:51:02,240
we'll call it Specter Mexican we'll say

1163
00:51:00,349 --> 00:51:04,400
all right let's say that services are

1164
00:51:02,239 --> 00:51:06,109
half and half and then in that case what

1165
00:51:04,400 --> 00:51:09,220
we end up with is our spec coefficient

1166
00:51:06,110 --> 00:51:14,480
is the spec mix and the diffuse

1167
00:51:09,219 --> 00:51:20,329
coefficient is going to be 1 minus the

1168
00:51:14,480 --> 00:51:22,789
spec mix right and so in here what we'd

1169
00:51:20,329 --> 00:51:25,159
say is well this is going to be the

1170
00:51:22,789 --> 00:51:26,690
diffuse amount this is going to be the

1171
00:51:25,159 --> 00:51:30,739
spec amount and off we go

1172
00:51:26,690 --> 00:51:33,019
oops so you see how that goes there

1173
00:51:30,739 --> 00:51:35,059
right and that's just saying so now we

1174
00:51:33,019 --> 00:51:37,699
can make our surface completely specular

1175
00:51:35,059 --> 00:51:39,860
or completely non specular based on an

1176
00:51:37,699 --> 00:51:41,149
input value and in the future maybe we

1177
00:51:39,860 --> 00:51:43,010
try and find a way to get that input

1178
00:51:41,150 --> 00:51:44,660
value from someplace interesting so that

1179
00:51:43,010 --> 00:51:48,560
it will vary as whereas right now it'll

1180
00:51:44,659 --> 00:51:50,029
be constant everywhere and so if we look

1181
00:51:48,559 --> 00:51:51,440
and by the way I guess there's no reason

1182
00:51:50,030 --> 00:51:52,670
for me not to be compiling in release

1183
00:51:51,440 --> 00:51:53,780
notes so that our startup time is a

1184
00:51:52,670 --> 00:51:56,740
little bit better there right I mean we

1185
00:51:53,780 --> 00:51:56,740
could just do that

1186
00:52:03,579 --> 00:52:08,650
and so if we take a look now at what's

1187
00:52:05,798 --> 00:52:10,268
happening so here we've got a 50/50 mix

1188
00:52:08,650 --> 00:52:12,068
which basically should just be what we

1189
00:52:10,268 --> 00:52:14,108
had before which is as we get sort of

1190
00:52:12,068 --> 00:52:16,659
things get brighter as we get sort of

1191
00:52:14,108 --> 00:52:18,940
within them what we can do is say let's

1192
00:52:16,659 --> 00:52:20,528
crank up the specular so this is a

1193
00:52:18,940 --> 00:52:23,559
perfectly specular one so this should be

1194
00:52:20,528 --> 00:52:25,298
back to just pure bouncy lighting no

1195
00:52:23,559 --> 00:52:27,339
diffuse and let's just verify that

1196
00:52:25,298 --> 00:52:29,440
that's what happens right so now I

1197
00:52:27,338 --> 00:52:31,179
should see like everything should be

1198
00:52:29,440 --> 00:52:34,059
angular ly dependent right you can kind

1199
00:52:31,179 --> 00:52:37,690
of see that now this is perfectly

1200
00:52:34,059 --> 00:52:39,789
angular dependent now and you can see

1201
00:52:37,690 --> 00:52:41,679
it's getting brighter these bounces as I

1202
00:52:39,789 --> 00:52:42,640
get close to incident right so that's

1203
00:52:41,679 --> 00:52:46,568
what I would expect

1204
00:52:42,639 --> 00:52:48,940
let's go pure diffuse so I should see no

1205
00:52:46,568 --> 00:52:55,900
change from view angle viewing angle

1206
00:52:48,940 --> 00:52:59,440
produces nothing so now this should be

1207
00:52:55,900 --> 00:53:02,079
just pure diffuse no changes and that

1208
00:52:59,440 --> 00:53:03,849
seems to be right and so then we can

1209
00:53:02,079 --> 00:53:06,369
just pick you know what we're gonna do

1210
00:53:03,849 --> 00:53:08,769
and you know I don't know what we want

1211
00:53:06,369 --> 00:53:10,210
our services to be specular wise but I'm

1212
00:53:08,768 --> 00:53:11,439
just going to leave it at 0.5 as the mix

1213
00:53:10,210 --> 00:53:13,838
for now and we'll just call it a day

1214
00:53:11,440 --> 00:53:15,490
we'll revisit these when we want to

1215
00:53:13,838 --> 00:53:17,048
actually do some any kind of lighting

1216
00:53:15,489 --> 00:53:18,399
effects like services that are supposed

1217
00:53:17,048 --> 00:53:20,858
to be shiny or something like that

1218
00:53:18,400 --> 00:53:22,690
we don't really set up to do specular

1219
00:53:20,858 --> 00:53:24,219
very well because we aren't capturing

1220
00:53:22,690 --> 00:53:26,650
enough information with our light probes

1221
00:53:24,219 --> 00:53:28,959
I don't think like you know we don't

1222
00:53:26,650 --> 00:53:31,119
really have the notion that those light

1223
00:53:28,960 --> 00:53:32,829
probes the light probes don't store an

1224
00:53:31,119 --> 00:53:35,858
actual image off in the direction they

1225
00:53:32,829 --> 00:53:37,329
just store a single color and you know

1226
00:53:35,858 --> 00:53:39,038
if if we were gonna be a little more

1227
00:53:37,329 --> 00:53:41,200
hardcore on our lighting we would store

1228
00:53:39,039 --> 00:53:43,150
car more of an image the problem is that

1229
00:53:41,199 --> 00:53:46,358
just increases your purpose will cost

1230
00:53:43,150 --> 00:53:47,318
just goes up and up and up and I don't

1231
00:53:46,358 --> 00:53:47,889
know that we want to go into that

1232
00:53:47,318 --> 00:53:51,880
territory

1233
00:53:47,889 --> 00:53:54,429
so if here we've got effectively our

1234
00:53:51,880 --> 00:53:56,890
irradiance sampling now working we now

1235
00:53:54,429 --> 00:53:58,719
pretty much have actual lighting working

1236
00:53:56,889 --> 00:54:01,210
with our light probes for the most part

1237
00:53:58,719 --> 00:54:03,848
right and so we should be able to do

1238
00:54:01,210 --> 00:54:05,769
some stuff where we like I don't know

1239
00:54:03,849 --> 00:54:07,690
like actually put some fake lighting

1240
00:54:05,768 --> 00:54:09,598
values in there and then when we look at

1241
00:54:07,690 --> 00:54:13,210
the scene we should see something

1242
00:54:09,599 --> 00:54:14,950
resembling some real lighting in there

1243
00:54:13,210 --> 00:54:16,750
right

1244
00:54:14,949 --> 00:54:19,058
and so if we look at what we're doing

1245
00:54:16,750 --> 00:54:21,099
now and we just change to that half that

1246
00:54:19,059 --> 00:54:23,559
half an F if we just said all right

1247
00:54:21,099 --> 00:54:27,789
there's an upward lighting we're gonna

1248
00:54:23,559 --> 00:54:30,548
make it just be straight up straight up

1249
00:54:27,789 --> 00:54:32,318
white light and coming and we go ahead

1250
00:54:30,548 --> 00:54:33,940
and and look at what that looks like we

1251
00:54:32,318 --> 00:54:36,369
should just see a flat lit scene like

1252
00:54:33,940 --> 00:54:37,838
this but hey it already looks a little

1253
00:54:36,369 --> 00:54:42,099
bit interesting because there's at least

1254
00:54:37,838 --> 00:54:43,358
some notion of directionality so you can

1255
00:54:42,099 --> 00:54:44,710
see that the light is kind of coming

1256
00:54:43,358 --> 00:54:45,880
from the top down a little bit there

1257
00:54:44,710 --> 00:54:47,289
right but we're not getting any bounce

1258
00:54:45,880 --> 00:54:49,809
it's not really very good right there's

1259
00:54:47,289 --> 00:54:51,369
no real lighting happening here and so

1260
00:54:49,809 --> 00:54:52,599
what we want to do now is start moving

1261
00:54:51,369 --> 00:54:54,130
towards the real lighting and that's

1262
00:54:52,599 --> 00:54:56,140
gonna require the lugging transport but

1263
00:54:54,130 --> 00:54:58,390
first let's stuff some money values in

1264
00:54:56,139 --> 00:55:01,000
here that are based on location

1265
00:54:58,389 --> 00:55:03,548
so we can watch and see whether our

1266
00:55:01,000 --> 00:55:05,588
light probes actually are being picked

1267
00:55:03,548 --> 00:55:07,179
up correctly across sources and more

1268
00:55:05,588 --> 00:55:08,199
importantly since I kind of think they

1269
00:55:07,179 --> 00:55:12,789
are because we did some testing with

1270
00:55:08,199 --> 00:55:17,279
that let's see if we can verify that our

1271
00:55:12,789 --> 00:55:17,279
light probes themselves actually are

1272
00:55:20,489 --> 00:55:27,068
what's remaining for oh that our light

1273
00:55:23,710 --> 00:55:28,568
voxel is not producing artifacts so when

1274
00:55:27,068 --> 00:55:32,529
we stuff these light values in that'll

1275
00:55:28,568 --> 00:55:34,509
change over the surface over the voxel

1276
00:55:32,530 --> 00:55:36,099
that we don't see like weird bands or

1277
00:55:34,510 --> 00:55:38,740
something in there that would indicate a

1278
00:55:36,099 --> 00:55:41,470
bug or having thought through the

1279
00:55:38,739 --> 00:55:43,598
problem incorrectly somewhere so if I go

1280
00:55:41,469 --> 00:55:45,578
into our place we're stuffing our

1281
00:55:43,599 --> 00:55:47,170
lighting voxels here I need to do a

1282
00:55:45,579 --> 00:55:50,140
couple things first of all we need to

1283
00:55:47,170 --> 00:55:51,940
turn back on the repeated transmission

1284
00:55:50,139 --> 00:55:53,348
of the lighting voxel which is something

1285
00:55:51,940 --> 00:55:56,710
that we had turned off for testing

1286
00:55:53,349 --> 00:55:58,809
purposes I believe it's off and so if we

1287
00:55:56,710 --> 00:56:00,429
want these things to move around we're

1288
00:55:58,809 --> 00:56:02,769
gonna have to put that in there so this

1289
00:56:00,429 --> 00:56:05,649
only twice nonsense where we're sending

1290
00:56:02,769 --> 00:56:08,079
this down we need to get rid of that now

1291
00:56:05,650 --> 00:56:15,700
what I might do here is actually just if

1292
00:56:08,079 --> 00:56:18,599
zero it out right actually I'm just

1293
00:56:15,699 --> 00:56:18,598
gonna nuke it for now

1294
00:56:20,230 --> 00:56:25,130
um and so what we have here is every

1295
00:56:23,028 --> 00:56:26,838
frame we will retransmit all of our

1296
00:56:25,130 --> 00:56:28,519
lighting voxels so that they can be

1297
00:56:26,838 --> 00:56:30,349
updated and this is a sort of source

1298
00:56:28,519 --> 00:56:32,000
sticking point because we don't really

1299
00:56:30,349 --> 00:56:33,710
know how much that's costing us in terms

1300
00:56:32,000 --> 00:56:35,179
of frame rate but it wasn't good when

1301
00:56:33,710 --> 00:56:37,338
the voxel was big the Vox was pretty

1302
00:56:35,179 --> 00:56:39,889
small now so maybe it's fine

1303
00:56:37,338 --> 00:56:42,710
but either or you know it is what it is

1304
00:56:39,889 --> 00:56:44,179
right and so now let's try stuffing some

1305
00:56:42,710 --> 00:56:46,338
real values down there that move

1306
00:56:44,179 --> 00:56:47,629
according to some kind of a debug piece

1307
00:56:46,338 --> 00:56:50,900
of information all right so the first

1308
00:56:47,630 --> 00:56:52,548
thing I'm gonna do here not gonna be

1309
00:56:50,900 --> 00:56:54,440
very interesting I'm gonna do a light P

1310
00:56:52,548 --> 00:56:55,759
and this is just a light position value

1311
00:56:54,440 --> 00:56:57,650
and all I'm going to do is I'm gonna

1312
00:56:55,760 --> 00:57:01,130
take the distance from the light P based

1313
00:56:57,650 --> 00:57:03,858
on the location of the vaak based on the

1314
00:57:01,130 --> 00:57:05,539
location where the voxel is relative to

1315
00:57:03,858 --> 00:57:08,108
everything else right and so what I need

1316
00:57:05,539 --> 00:57:16,099
to know here and you can kind of see

1317
00:57:08,108 --> 00:57:17,869
when we do or is that here we go so when

1318
00:57:16,099 --> 00:57:19,460
we do our lighting computation we've got

1319
00:57:17,869 --> 00:57:22,579
our render group here and if you look at

1320
00:57:19,460 --> 00:57:24,650
the render group itself I believe inside

1321
00:57:22,579 --> 00:57:28,670
that render group we've got the light

1322
00:57:24,650 --> 00:57:31,338
bounds and I think we also specify in

1323
00:57:28,670 --> 00:57:33,950
the setup function so in this last set

1324
00:57:31,338 --> 00:57:36,949
up that also tells us the voxel

1325
00:57:33,949 --> 00:57:39,230
information so if we look at render

1326
00:57:36,949 --> 00:57:41,750
setup here you can see that there's a

1327
00:57:39,230 --> 00:57:44,329
voxel mid corner and a voxel in total

1328
00:57:41,750 --> 00:57:47,750
dim and those are pieces of information

1329
00:57:44,329 --> 00:57:50,539
that we might want here to produce the

1330
00:57:47,750 --> 00:57:54,108
information about how the box should be

1331
00:57:50,539 --> 00:57:56,660
shaded so if I want to figure out what's

1332
00:57:54,108 --> 00:58:01,548
going on in here we know that these

1333
00:57:56,659 --> 00:58:03,469
values like we want the we've got this

1334
00:58:01,548 --> 00:58:05,298
light index voxel Jim we've got this M

1335
00:58:03,469 --> 00:58:07,939
total dim going on in here which is

1336
00:58:05,298 --> 00:58:11,269
being specified you know why did we have

1337
00:58:07,940 --> 00:58:13,490
this no no no talking about that

1338
00:58:11,269 --> 00:58:15,710
um there's simplifications we should

1339
00:58:13,489 --> 00:58:17,838
probably make here but anyway if we want

1340
00:58:15,710 --> 00:58:25,929
to do our in photo dim right what we can

1341
00:58:17,838 --> 00:58:28,099
do is we can take our voxel and we can

1342
00:58:25,929 --> 00:58:30,139
we can do

1343
00:58:28,099 --> 00:58:32,170
one of two things I'm gonna do it the

1344
00:58:30,139 --> 00:58:35,000
way that makes the most sense based on

1345
00:58:32,170 --> 00:58:36,409
sort of the where voxel setup and the

1346
00:58:35,000 --> 00:58:37,789
way we're transferring your values but

1347
00:58:36,409 --> 00:58:40,369
what we want to do is figure out for

1348
00:58:37,789 --> 00:58:43,090
every point here like where is this

1349
00:58:40,369 --> 00:58:46,159
point in voxel space in theory right

1350
00:58:43,090 --> 00:58:48,590
like where should it be and so if we

1351
00:58:46,159 --> 00:58:50,299
think about where this point is where

1352
00:58:48,590 --> 00:58:53,960
its location is right so this is our

1353
00:58:50,300 --> 00:59:01,010
voxel center P right we know that we've

1354
00:58:53,960 --> 00:59:03,440
got essentially a x y and z value that

1355
00:59:01,010 --> 00:59:06,350
is supposedly where this thing is right

1356
00:59:03,440 --> 00:59:08,059
and those are just values that go from

1357
00:59:06,349 --> 00:59:10,489
zero to Vox dim so they don't represent

1358
00:59:08,059 --> 00:59:14,449
world space so the first thing we want

1359
00:59:10,489 --> 00:59:21,379
to do is say well we can either map this

1360
00:59:14,449 --> 00:59:23,329
out to world space or we can map or we

1361
00:59:21,380 --> 00:59:24,740
can map the light into voxel space and

1362
00:59:23,329 --> 00:59:26,239
I'm gonna map the light into voxel space

1363
00:59:24,739 --> 00:59:27,349
just because that Maps a little bit

1364
00:59:26,239 --> 00:59:29,869
better to what we're doing in the actual

1365
00:59:27,349 --> 00:59:31,699
pixel shader so what I would want to do

1366
00:59:29,869 --> 00:59:42,049
here is say well the voxel centre P is

1367
00:59:31,699 --> 00:59:44,809
roughly something like this right it's

1368
00:59:42,050 --> 00:59:47,420
halfway between the two grid locations

1369
00:59:44,809 --> 00:59:48,829
presumably that's how we're sampling it

1370
00:59:47,420 --> 00:59:51,260
I have to think about whether that's

1371
00:59:48,829 --> 00:59:53,000
actually true with the way that we're

1372
00:59:51,260 --> 00:59:54,500
with the way that opengl is actually

1373
00:59:53,000 --> 00:59:56,539
sampling it but I think that is true

1374
00:59:54,500 --> 00:59:59,300
because open Jill I think uses pics

1375
00:59:56,539 --> 01:00:03,349
looks as Texel centers for sampling not

1376
00:59:59,300 --> 01:00:06,050
Texel corners even if you're sampling a

1377
01:00:03,349 --> 01:00:08,630
voxel so the voxel center should be

1378
01:00:06,050 --> 01:00:10,910
there and we need to change that to a UV

1379
01:00:08,630 --> 01:00:15,860
coordinate so then we've got like the

1380
01:00:10,909 --> 01:00:19,159
Vox UV W and that's going to be the Vox

1381
01:00:15,860 --> 01:00:25,250
in total Jim right so that's the or

1382
01:00:19,159 --> 01:00:28,159
sorry the Vox in Vox Tim times that Vox

1383
01:00:25,250 --> 01:00:29,659
Center P right so that's a Hadamard kind

1384
01:00:28,159 --> 01:00:32,299
of product there that's we're

1385
01:00:29,659 --> 01:00:35,179
multiplying each component and we get

1386
01:00:32,300 --> 01:00:38,150
back a UV W so we need that value as

1387
01:00:35,179 --> 01:00:41,389
well and this is that in Vox dim right

1388
01:00:38,150 --> 01:00:45,059
and that's going to be 1.0

1389
01:00:41,389 --> 01:00:46,980
over Vox Tim ad infinitum because

1390
01:00:45,059 --> 01:00:48,179
actually this voxel is the same in all

1391
01:00:46,980 --> 01:00:49,980
directions we don't know that that's

1392
01:00:48,179 --> 01:00:54,239
gonna be true forever but for right now

1393
01:00:49,980 --> 01:00:57,630
it is so this is what our scaling factor

1394
01:00:54,239 --> 01:00:59,519
would be right our inbox theme is going

1395
01:00:57,630 --> 01:01:03,300
to be that we take the Hadamard product

1396
01:00:59,519 --> 01:01:04,559
that puts us into uvw space and so then

1397
01:01:03,300 --> 01:01:09,000
what we need to do is just say well

1398
01:01:04,559 --> 01:01:12,210
where's the light how far are we from

1399
01:01:09,000 --> 01:01:14,280
the light source so we have a light uvw

1400
01:01:12,210 --> 01:01:18,480
like where is the light in UVW space

1401
01:01:14,280 --> 01:01:23,100
right and you know that's gonna be

1402
01:01:18,480 --> 01:01:24,750
something that would go up here so you

1403
01:01:23,099 --> 01:01:26,759
have to find the light uvw face we'll do

1404
01:01:24,750 --> 01:01:27,690
that later but for right now what we

1405
01:01:26,760 --> 01:01:29,700
need to do is say well what's the

1406
01:01:27,690 --> 01:01:33,329
distance between these two things right

1407
01:01:29,699 --> 01:01:36,659
so let's take the the light distance the

1408
01:01:33,329 --> 01:01:45,989
light distance is going to be the length

1409
01:01:36,659 --> 01:01:49,319
of the Vox uvw the light UV w- luxury

1410
01:01:45,989 --> 01:01:52,619
that's the distance between the light

1411
01:01:49,320 --> 01:01:55,170
source and our position right that's the

1412
01:01:52,619 --> 01:02:00,210
light distance that will be 0 if we're

1413
01:01:55,170 --> 01:02:05,480
right on top of it it will be the you

1414
01:02:00,210 --> 01:02:07,590
know 1 plus 1 plus 1 square rooted

1415
01:02:05,480 --> 01:02:10,260
square root of 3 if we're all the way on

1416
01:02:07,590 --> 01:02:12,000
the corner right so that's the maximum

1417
01:02:10,260 --> 01:02:14,970
distance that we could be away I think

1418
01:02:12,000 --> 01:02:21,150
if if the lights on one corner and we're

1419
01:02:14,969 --> 01:02:23,399
in the other corner so we want to make

1420
01:02:21,150 --> 01:02:25,889
there be some kind of fall off here so

1421
01:02:23,400 --> 01:02:30,050
what I want to do is I want to say our

1422
01:02:25,889 --> 01:02:32,849
light coefficient here is going to be

1423
01:02:30,050 --> 01:02:35,550
getting less bright as it gets further

1424
01:02:32,849 --> 01:02:37,049
away for no particular reason I'm just

1425
01:02:35,550 --> 01:02:40,130
saying we're gonna be less bright as we

1426
01:02:37,050 --> 01:02:42,960
get further away from whatever the light

1427
01:02:40,130 --> 01:02:45,420
location is and so I want to do one

1428
01:02:42,960 --> 01:02:47,730
minus the light distance but the light

1429
01:02:45,420 --> 01:02:49,139
distance here again I want to do a clamp

1430
01:02:47,730 --> 01:02:51,900
zero to one on this because I want it to

1431
01:02:49,139 --> 01:02:53,969
range cleanly between those I want to do

1432
01:02:51,900 --> 01:02:55,220
one minus whatever the distance away

1433
01:02:53,969 --> 01:02:57,469
from the light source is

1434
01:02:55,219 --> 01:02:59,239
and you know maybe that's just fine but

1435
01:02:57,469 --> 01:03:01,098
then we we may also want there to be

1436
01:02:59,239 --> 01:03:04,059
some kind of a coefficient on this for

1437
01:03:01,099 --> 01:03:07,550
the light radius so like there's a light

1438
01:03:04,059 --> 01:03:08,838
you know radius coefficient in here that

1439
01:03:07,550 --> 01:03:11,539
we can play with so that's that's like

1440
01:03:08,838 --> 01:03:13,130
how you know it's basically one over the

1441
01:03:11,539 --> 01:03:15,318
light radius and UV space or something

1442
01:03:13,130 --> 01:03:16,670
right and so this is what we would want

1443
01:03:15,318 --> 01:03:20,599
to compute we would end up with a

1444
01:03:16,670 --> 01:03:23,240
lighting value here and so what I want

1445
01:03:20,599 --> 01:03:25,789
to do then is I want to make this value

1446
01:03:23,239 --> 01:03:29,959
which is the brightness right

1447
01:03:25,789 --> 01:03:31,608
I want like light brightness or a light

1448
01:03:29,960 --> 01:03:34,970
base alpha something like that

1449
01:03:31,608 --> 01:03:37,809
I want this value here to basically be

1450
01:03:34,969 --> 01:03:41,779
computed now so that we can make the

1451
01:03:37,809 --> 01:03:43,309
intensity of the light be what we start

1452
01:03:41,780 --> 01:03:45,170
with and that way when we put a light in

1453
01:03:43,309 --> 01:03:46,730
here it will be based on this actual

1454
01:03:45,170 --> 01:03:50,030
distance from the light source if that

1455
01:03:46,730 --> 01:03:51,920
makes sense right now there's other

1456
01:03:50,030 --> 01:03:53,630
things we're gonna want to do here so

1457
01:03:51,920 --> 01:03:56,329
we're gonna want more information so I'm

1458
01:03:53,630 --> 01:03:59,539
gonna make a light direction as well

1459
01:03:56,329 --> 01:04:02,240
and that's gonna be this value and I'm

1460
01:03:59,539 --> 01:04:04,730
gonna normalize or zero that probably in

1461
01:04:02,239 --> 01:04:06,348
here and again where this routine is

1462
01:04:04,730 --> 01:04:08,480
gonna get really slow so we're gonna end

1463
01:04:06,349 --> 01:04:11,660
up with some issues here but you know

1464
01:04:08,480 --> 01:04:14,019
that's just something have to deal with

1465
01:04:11,659 --> 01:04:18,289
cuz it this is only for debugging anyway

1466
01:04:14,019 --> 01:04:20,059
so anyway as we do this sort of normal

1467
01:04:18,289 --> 01:04:22,849
to the light source there we're gonna

1468
01:04:20,059 --> 01:04:26,170
end up with some more information I'm

1469
01:04:22,849 --> 01:04:26,170
gonna call this light just to be clear

1470
01:04:34,119 --> 01:04:38,539
so as we compute these values here now

1471
01:04:37,460 --> 01:04:40,849
we've got more information for the light

1472
01:04:38,539 --> 01:04:43,190
source and what I want to do is pack

1473
01:04:40,849 --> 01:04:44,599
that into this light base a right so all

1474
01:04:43,190 --> 01:04:46,338
I want to do there is say well it's

1475
01:04:44,599 --> 01:04:50,630
already clamped from 1 to 0 so really

1476
01:04:46,338 --> 01:04:53,150
all we're talking about here it's taking

1477
01:04:50,630 --> 01:04:54,530
that light coefficient value which is

1478
01:04:53,150 --> 01:04:56,930
basically intensity of the light source

1479
01:04:54,530 --> 01:04:59,060
I want to multiply it by 255 which is

1480
01:04:56,929 --> 01:05:00,710
the maximum value that could be and then

1481
01:04:59,059 --> 01:05:01,699
I want to convert that to you 32 and

1482
01:05:00,710 --> 01:05:03,318
then I want to shift it up into the

1483
01:05:01,699 --> 01:05:04,818
Alpha Channel right and that's all I'm

1484
01:05:03,318 --> 01:05:06,050
doing

1485
01:05:04,818 --> 01:05:07,849
so that's how I'm going to create my

1486
01:05:06,050 --> 01:05:10,130
light base a unfortunately in order to

1487
01:05:07,849 --> 01:05:11,300
do that I need to like UVW here which is

1488
01:05:10,130 --> 01:05:14,750
the location of the light source

1489
01:05:11,300 --> 01:05:16,818
relative to the voxel for now let's just

1490
01:05:14,750 --> 01:05:18,889
call that zero so it's it's always gonna

1491
01:05:16,818 --> 01:05:20,389
be the corner of the voxel actually you

1492
01:05:18,889 --> 01:05:24,500
know what I take that back let's make it

1493
01:05:20,389 --> 01:05:26,000
the center of the voxel for now right so

1494
01:05:24,500 --> 01:05:27,440
your distance from the center of the

1495
01:05:26,000 --> 01:05:29,389
voxel is what's going to determine your

1496
01:05:27,440 --> 01:05:37,670
lighting and we'll start with that right

1497
01:05:29,389 --> 01:05:45,710
light RC is I don't know point five as

1498
01:05:37,670 --> 01:05:46,970
well all right all right so we're gonna

1499
01:05:45,710 --> 01:05:48,889
have to make those values of you real

1500
01:05:46,969 --> 01:05:50,149
things but now basically what we want to

1501
01:05:48,889 --> 01:05:52,699
do is see if we can get this stuff

1502
01:05:50,150 --> 01:05:54,050
working now this looks super crappy so

1503
01:05:52,699 --> 01:05:55,309
obviously I screwed something up not

1504
01:05:54,050 --> 01:05:57,609
sure what yet but we'll find out in a

1505
01:05:55,309 --> 01:05:57,608
second

1506
01:06:06,659 --> 01:06:18,460
looking at the Vox UVW there that seems

1507
01:06:09,820 --> 01:06:23,730
like so one thing is true that this

1508
01:06:18,460 --> 01:06:26,829
light this light see maybe yeah I mean I

1509
01:06:23,730 --> 01:06:31,750
feel like maybe we may want this to be

1510
01:06:26,829 --> 01:06:33,279
higher than that and the fall-off is

1511
01:06:31,750 --> 01:06:34,360
probably not gradual enough the

1512
01:06:33,280 --> 01:06:36,580
interesting thing about the light see is

1513
01:06:34,360 --> 01:06:38,410
this is the maximum intensity light so

1514
01:06:36,579 --> 01:06:44,159
we really don't want this light to be

1515
01:06:38,409 --> 01:06:44,159
maximum intensity is the other problem

1516
01:06:46,590 --> 01:06:53,200
if the max light intensity is is 10 and

1517
01:06:51,280 --> 01:06:56,380
we want this lights intensity to

1518
01:06:53,199 --> 01:07:05,339
something else we want that to be kind

1519
01:06:56,380 --> 01:07:05,340
of reflected unattended in here

1520
01:07:05,550 --> 01:07:09,670
so we've won a light intensity value

1521
01:07:07,989 --> 01:07:11,619
that's probably not the full intensity

1522
01:07:09,670 --> 01:07:18,010
so we probably want like max light

1523
01:07:11,619 --> 01:07:20,529
intensity to something like you know

1524
01:07:18,010 --> 01:07:22,420
this is only a tenth of the maximum

1525
01:07:20,530 --> 01:07:26,730
lighting intensity or something it's all

1526
01:07:22,420 --> 01:07:28,480
I'm thinking right so let's see if that

1527
01:07:26,730 --> 01:07:30,219
produces anything a little bit more

1528
01:07:28,480 --> 01:07:31,719
interesting there but probably not yeah

1529
01:07:30,219 --> 01:07:33,099
so we've got some weird bugs here it

1530
01:07:31,719 --> 01:07:35,469
looks like we're stuffing really bright

1531
01:07:33,099 --> 01:07:36,610
values in here always which is a little

1532
01:07:35,469 --> 01:07:38,019
weird so let's try and figure out what I

1533
01:07:36,610 --> 01:07:39,730
screwed up there we've got the vox

1534
01:07:38,019 --> 01:07:41,349
center peak here we're taking the

1535
01:07:39,730 --> 01:07:43,900
Hadamard product to figure out where the

1536
01:07:41,349 --> 01:07:45,369
voxel is and UVW space we take a

1537
01:07:43,900 --> 01:07:48,309
difference between that in the center of

1538
01:07:45,369 --> 01:07:52,089
the voxel basically we look at how long

1539
01:07:48,309 --> 01:07:54,009
it is to get there and we normalize that

1540
01:07:52,090 --> 01:07:55,930
afterwards we don't actually use this we

1541
01:07:54,010 --> 01:07:57,790
look at the light coefficient by saying

1542
01:07:55,929 --> 01:07:59,769
well alright the fall-off should be

1543
01:07:57,789 --> 01:08:03,550
however far away we are for the light as

1544
01:07:59,769 --> 01:08:05,860
that increases we should end up getting

1545
01:08:03,550 --> 01:08:10,090
something where at zero we have a full

1546
01:08:05,860 --> 01:08:13,900
bright and as we get up to like whatever

1547
01:08:10,090 --> 01:08:16,000
light our C is implying we are this

1548
01:08:13,900 --> 01:08:17,679
should probably you know maybe we need

1549
01:08:16,000 --> 01:08:19,689
to make the fall-off be faster

1550
01:08:17,679 --> 01:08:21,458
no I'm just wondering why we don't see

1551
01:08:19,689 --> 01:08:23,739
any fall-off but maybe that's because I

1552
01:08:21,458 --> 01:08:27,670
I was being too generous with it I'm not

1553
01:08:23,738 --> 01:08:30,868
sure but we'll see there we go all right

1554
01:08:27,670 --> 01:08:33,069
so I just had to fall off too far right

1555
01:08:30,868 --> 01:08:35,588
so here's what our lighting would look

1556
01:08:33,069 --> 01:08:39,069
like as we go and you can see the voxel

1557
01:08:35,588 --> 01:08:40,958
itself represented there right

1558
01:08:39,069 --> 01:08:43,289
and since our voxel is not stable right

1559
01:08:40,958 --> 01:08:45,309
now it moves with the actual character

1560
01:08:43,288 --> 01:08:46,420
quite a bit but you can see so the

1561
01:08:45,309 --> 01:08:48,159
character hops up and down that's

1562
01:08:46,420 --> 01:08:49,630
because of our Z range that's something

1563
01:08:48,158 --> 01:08:50,978
we want to fix anyway so I'm not worried

1564
01:08:49,630 --> 01:08:53,439
about that hopping at all because that's

1565
01:08:50,979 --> 01:08:54,999
a separate thing and you can see the

1566
01:08:53,439 --> 01:08:56,979
hard edges of the voxel right now

1567
01:08:54,998 --> 01:09:00,338
because we have interpolation turned off

1568
01:08:56,979 --> 01:09:02,679
so as we sort of look at that lighting

1569
01:09:00,338 --> 01:09:05,078
it actually looks like what we want

1570
01:09:02,679 --> 01:09:06,578
which is just a purely distance based

1571
01:09:05,078 --> 01:09:08,380
light it's what we expect to see so that

1572
01:09:06,578 --> 01:09:10,538
looks nice but we don't want those hard

1573
01:09:08,380 --> 01:09:12,368
edges let's go ahead and turn on the

1574
01:09:10,538 --> 01:09:14,228
interpolation on the voxel just to see

1575
01:09:12,368 --> 01:09:15,908
and make sure that that looks ok because

1576
01:09:14,229 --> 01:09:17,889
now that we've seen the actual like

1577
01:09:15,908 --> 01:09:19,328
voxel size we don't really need to see

1578
01:09:17,889 --> 01:09:22,958
it anymore I mean maybe we want to turn

1579
01:09:19,328 --> 01:09:25,118
that on occasionally just to you know

1580
01:09:22,958 --> 01:09:26,588
debug something but at the moment I

1581
01:09:25,118 --> 01:09:32,759
think we don't we certainly don't need

1582
01:09:26,588 --> 01:09:39,068
that so if we do sir chips for nearest

1583
01:09:32,759 --> 01:09:39,729
we should see that and here here's our

1584
01:09:39,069 --> 01:09:42,400
voxels

1585
01:09:39,729 --> 01:09:44,109
there's the nearest sampling so if I

1586
01:09:42,399 --> 01:09:46,618
tell it no I would like you to do linear

1587
01:09:44,109 --> 01:09:46,619
please

1588
01:09:51,840 --> 01:09:56,650
now when we run we should see something

1589
01:09:54,850 --> 01:10:01,600
that hopefully approximates decent

1590
01:09:56,649 --> 01:10:06,519
lighting and and you know it's not

1591
01:10:01,600 --> 01:10:10,420
perfect I do see kind of at the edges I

1592
01:10:06,520 --> 01:10:11,980
do see a little bit of sort of banding

1593
01:10:10,420 --> 01:10:16,440
I'm not sure what I think of that

1594
01:10:11,979 --> 01:10:20,019
exactly just looking at kind of like

1595
01:10:16,439 --> 01:10:22,509
these parts maybe there's a little kind

1596
01:10:20,020 --> 01:10:28,020
of Fox elite banding like like you see

1597
01:10:22,510 --> 01:10:30,070
that kind of right there

1598
01:10:28,020 --> 01:10:31,990
so I don't know if we're gonna have to

1599
01:10:30,069 --> 01:10:34,420
work on that a little bit you know maybe

1600
01:10:31,989 --> 01:10:38,079
we will maybe we won't because you can

1601
01:10:34,420 --> 01:10:40,449
see now you kind of see that stair step

1602
01:10:38,079 --> 01:10:43,210
pattern there and I'll be honest I don't

1603
01:10:40,449 --> 01:10:45,750
really know exactly where that's coming

1604
01:10:43,210 --> 01:10:45,750
from though

1605
01:11:01,989 --> 01:11:08,559
I'm not sure yeah exactly where that's

1606
01:11:06,729 --> 01:11:10,209
coming from so it's hard for me to say

1607
01:11:08,560 --> 01:11:12,370
whether that's something that gets fixed

1608
01:11:10,210 --> 01:11:14,439
with lighting sampling or whether that's

1609
01:11:12,369 --> 01:11:19,869
a inherent limitation of the way we're

1610
01:11:14,439 --> 01:11:20,799
doing the light box lusatian right but

1611
01:11:19,869 --> 01:11:22,329
you can definitely see some

1612
01:11:20,800 --> 01:11:25,600
objectionable miss to the way that

1613
01:11:22,329 --> 01:11:27,729
that's being sampled and that's I think

1614
01:11:25,600 --> 01:11:33,100
just kind of a property unfortunately of

1615
01:11:27,729 --> 01:11:36,729
the of the trilinear interpolation on

1616
01:11:33,100 --> 01:11:40,329
the on the voxel I'm assuming but I

1617
01:11:36,729 --> 01:11:48,669
guess I don't really know right so if we

1618
01:11:40,329 --> 01:11:50,140
were to make this fall-off the you know

1619
01:11:48,670 --> 01:11:53,819
what I really want to do is make it lock

1620
01:11:50,140 --> 01:11:56,260
to the to the to the player so let's

1621
01:11:53,819 --> 01:11:58,989
let's finish what I was going to do

1622
01:11:56,260 --> 01:12:01,600
which is to actually map a real light

1623
01:11:58,989 --> 01:12:03,279
location in there so that we can talk

1624
01:12:01,600 --> 01:12:04,930
about the location of the viewer and

1625
01:12:03,279 --> 01:12:07,929
like have a debug like kind of a thing

1626
01:12:04,930 --> 01:12:10,690
so when we come through here if we

1627
01:12:07,930 --> 01:12:12,820
mapped the location of the of the light

1628
01:12:10,689 --> 01:12:15,159
source in here what we want to do is say

1629
01:12:12,819 --> 01:12:17,710
if there was a light P so let's say the

1630
01:12:15,159 --> 01:12:20,920
light p value was some thing that we're

1631
01:12:17,710 --> 01:12:23,590
gonna pass in what I want to do is have

1632
01:12:20,920 --> 01:12:26,170
a way of computing the light UV W value

1633
01:12:23,590 --> 01:12:31,390
which I believe all we would need to do

1634
01:12:26,170 --> 01:12:40,810
there is if we take the render group and

1635
01:12:31,390 --> 01:12:43,150
say where's club group if we were to

1636
01:12:40,810 --> 01:12:45,610
look at what we used for the lighting

1637
01:12:43,149 --> 01:12:53,439
setup there what I should be able to do

1638
01:12:45,609 --> 01:12:55,839
is just take that pair of parameters

1639
01:12:53,439 --> 01:12:59,219
that we're using inside to map and say

1640
01:12:55,840 --> 01:13:01,960
well we know that the voxel mid-corner

1641
01:12:59,220 --> 01:13:04,750
is what we need to subtract away from a

1642
01:13:01,960 --> 01:13:09,210
position to base it around the voxel and

1643
01:13:04,750 --> 01:13:09,210
then we know that the in total dim

1644
01:13:10,840 --> 01:13:16,449
is what we use to map something into the

1645
01:13:14,140 --> 01:13:18,340
scale of the voxel that should produce a

1646
01:13:16,449 --> 01:13:21,609
UVW value for where the light source is

1647
01:13:18,340 --> 01:13:23,789
in voxel space assuming that we had one

1648
01:13:21,609 --> 01:13:26,889
right which at the moment unfortunately

1649
01:13:23,789 --> 01:13:29,800
we don't so we do need some way of

1650
01:13:26,890 --> 01:13:42,610
getting that which we'll take a look at

1651
01:13:29,800 --> 01:13:45,070
in a second oops forgot to change that

1652
01:13:42,609 --> 01:13:46,750
to a comma so now as long as we have a

1653
01:13:45,069 --> 01:13:49,509
way of passing in a debug light which

1654
01:13:46,750 --> 01:13:52,750
we'll do in a second here we should be

1655
01:13:49,510 --> 01:13:55,270
able to now actually make this based off

1656
01:13:52,750 --> 01:13:57,489
of the player's position and what you

1657
01:13:55,270 --> 01:13:59,560
can see right now is it's just based off

1658
01:13:57,489 --> 01:14:00,819
of zero zero zero in world space which

1659
01:13:59,560 --> 01:14:03,130
doesn't really give us anything we

1660
01:14:00,819 --> 01:14:06,389
didn't get before but you can really see

1661
01:14:03,130 --> 01:14:09,220
you see those kind of objectionable like

1662
01:14:06,390 --> 01:14:14,020
blending just it just doesn't look very

1663
01:14:09,220 --> 01:14:17,530
good right you get that kind of rippling

1664
01:14:14,020 --> 01:14:19,090
there right and I don't love that like

1665
01:14:17,529 --> 01:14:22,300
so I don't know what we're gonna have to

1666
01:14:19,090 --> 01:14:29,529
do about that but that seems bad right

1667
01:14:22,300 --> 01:14:30,880
so we'll see anyway so moving on uh if I

1668
01:14:29,529 --> 01:14:32,289
want to go ahead and have this be locked

1669
01:14:30,880 --> 01:14:33,789
to the player which I kind of do so we

1670
01:14:32,289 --> 01:14:35,710
can sort of see how that sampling works

1671
01:14:33,789 --> 01:14:36,939
what I want to do is have some way of

1672
01:14:35,710 --> 01:14:40,239
sending down where the player actually

1673
01:14:36,939 --> 01:14:42,069
is and in the world group like I mean

1674
01:14:40,239 --> 01:14:44,679
sorry in the world mode we do know where

1675
01:14:42,069 --> 01:14:48,359
the player is right because what we're

1676
01:14:44,680 --> 01:14:51,730
doing when we actually do stuff like

1677
01:14:48,359 --> 01:14:57,359
tracking the movement for the entities

1678
01:14:51,729 --> 01:14:57,359
where's that code it's right here

1679
01:14:58,939 --> 01:15:05,639
so when we do this you can see we know

1680
01:15:02,100 --> 01:15:07,770
like what the camera entity is and so in

1681
01:15:05,640 --> 01:15:10,140
here where we say world D but light P

1682
01:15:07,770 --> 01:15:11,520
like we know where the debug light is

1683
01:15:10,140 --> 01:15:14,190
supposed to be it's right there

1684
01:15:11,520 --> 01:15:17,490
right so all we really need to do is

1685
01:15:14,189 --> 01:15:19,439
when we do the N Lenny computation what

1686
01:15:17,489 --> 01:15:21,899
we could do is say well you know the

1687
01:15:19,439 --> 01:15:23,869
test lighting debug light equals you

1688
01:15:21,899 --> 01:15:27,210
know the southern T bug light got here

1689
01:15:23,869 --> 01:15:29,189
and so inside the lighting stuff we can

1690
01:15:27,210 --> 01:15:32,039
just for free have this idea that

1691
01:15:29,189 --> 01:15:36,869
there's a debug light kind of smut

1692
01:15:32,039 --> 01:15:38,369
sitting around on us here like that and

1693
01:15:36,869 --> 01:15:40,649
then we should be good to go because we

1694
01:15:38,369 --> 01:15:42,539
already tracked a debug light position

1695
01:15:40,649 --> 01:15:44,639
for you know for fun and profit before

1696
01:15:42,539 --> 01:15:48,979
and so what we can do is have another

1697
01:15:44,640 --> 01:15:48,980
one here so the lighting system itself

1698
01:15:53,329 --> 01:15:58,619
now has its own debug like that you can

1699
01:15:56,729 --> 01:16:00,649
stuff with whatever value you wants and

1700
01:15:58,619 --> 01:16:03,840
when we turn on this debug mode here

1701
01:16:00,649 --> 01:16:06,059
that's what we should get right so now

1702
01:16:03,840 --> 01:16:08,610
as the player moves around right the

1703
01:16:06,060 --> 01:16:11,520
light should move with them and you can

1704
01:16:08,609 --> 01:16:20,219
see that sort of you know that radius

1705
01:16:11,520 --> 01:16:21,810
around them occurring right and so I

1706
01:16:20,220 --> 01:16:23,130
guess the thing yeah like I was sort of

1707
01:16:21,810 --> 01:16:26,240
saying before the thing that I don't

1708
01:16:23,130 --> 01:16:30,150
care for here is I just don't like

1709
01:16:26,239 --> 01:16:31,800
what's happening with I think this is

1710
01:16:30,149 --> 01:16:33,929
this light sampling just isn't good

1711
01:16:31,800 --> 01:16:36,060
enough because I don't like the way

1712
01:16:33,930 --> 01:16:38,610
we're getting those those hardline

1713
01:16:36,060 --> 01:16:41,640
artifacts where the lighting sort of

1714
01:16:38,609 --> 01:16:43,859
falls to zero and that mean you know

1715
01:16:41,640 --> 01:16:47,600
what what that kind of means to me as

1716
01:16:43,859 --> 01:16:50,099
well is it's like it also means that

1717
01:16:47,600 --> 01:16:53,160
that that artifact is sort of present

1718
01:16:50,100 --> 01:16:54,960
everywhere right like you know you're

1719
01:16:53,159 --> 01:16:58,639
getting you're getting that pretty much

1720
01:16:54,960 --> 01:17:04,020
wherever you go so anywhere in the world

1721
01:16:58,640 --> 01:17:06,420
where where you actually see lighting

1722
01:17:04,020 --> 01:17:08,610
happening at all you're gonna be having

1723
01:17:06,420 --> 01:17:10,560
this artifact it's just it's it's just a

1724
01:17:08,609 --> 01:17:11,729
lot harder to perceive when the values

1725
01:17:10,560 --> 01:17:13,489
are close together but

1726
01:17:11,729 --> 01:17:16,709
the values get a little further apart

1727
01:17:13,488 --> 01:17:18,149
you get that stiff banding right now

1728
01:17:16,710 --> 01:17:20,220
maybe the argument is well you should

1729
01:17:18,149 --> 01:17:21,359
never really have values that far apart

1730
01:17:20,220 --> 01:17:23,250
because the lighting is supposed to be

1731
01:17:21,359 --> 01:17:25,229
fairly continuous but I don't know that

1732
01:17:23,250 --> 01:17:27,390
that's a very good reason to have it

1733
01:17:25,229 --> 01:17:30,599
look the way that it does I think we

1734
01:17:27,390 --> 01:17:35,700
want to be able to have it sample the

1735
01:17:30,600 --> 01:17:38,789
lighting well in any case right and so I

1736
01:17:35,699 --> 01:17:44,789
think I want to at least want to try to

1737
01:17:38,789 --> 01:17:50,930
get to get that a little better and what

1738
01:17:44,789 --> 01:17:50,930
I would assume is that like you know the

1739
01:17:59,340 --> 01:18:04,329
the the reason we tried this was because

1740
01:18:02,050 --> 01:18:06,730
it's a lot simpler to blend the light

1741
01:18:04,329 --> 01:18:08,019
probes this way but there were like you

1742
01:18:06,729 --> 01:18:10,718
know there are other ways that we could

1743
01:18:08,020 --> 01:18:12,310
have done the light probes right and

1744
01:18:10,719 --> 01:18:14,949
it's a lot simpler to blend the probes

1745
01:18:12,310 --> 01:18:19,300
this way than it is to blend them the

1746
01:18:14,949 --> 01:18:21,639
other way so I you know rather than then

1747
01:18:19,300 --> 01:18:24,640
using a voxel lookup into a light probe

1748
01:18:21,640 --> 01:18:30,539
array and then blending the light probes

1749
01:18:24,640 --> 01:18:30,539
sort of that way which was much harder

1750
01:18:32,219 --> 01:18:41,199
in this particular case what we decided

1751
01:18:35,649 --> 01:18:43,029
to do was just use the voxel use a 3d

1752
01:18:41,199 --> 01:18:44,619
texture to sort of look up the lighting

1753
01:18:43,029 --> 01:18:46,779
but unfortunately you know it just it

1754
01:18:44,619 --> 01:18:48,909
looks pretty bad there now I guess the

1755
01:18:46,779 --> 01:18:51,069
other thing I don't really know is is

1756
01:18:48,909 --> 01:18:54,369
that an artifact to of kind of maybe

1757
01:18:51,069 --> 01:18:56,229
more how we chose to sample this you

1758
01:18:54,369 --> 01:18:58,689
know like for example suppose you wanted

1759
01:18:56,229 --> 01:19:01,629
a less hard fall-off curve you know I'm

1760
01:18:58,689 --> 01:19:03,039
saying it to you so you know if we you

1761
01:19:01,630 --> 01:19:05,529
know if we take a look at that how do we

1762
01:19:03,039 --> 01:19:08,939
get this thing there's this good site

1763
01:19:05,529 --> 01:19:08,939
Decimus we were using

1764
01:19:14,039 --> 01:19:18,510
there we go so if we wanted to look at

1765
01:19:17,159 --> 01:19:22,409
like what we're getting for fall off

1766
01:19:18,510 --> 01:19:23,970
there right we're getting like within

1767
01:19:22,409 --> 01:19:26,729
one radius we're getting like an

1768
01:19:23,970 --> 01:19:32,880
x-squared plus y-squared fall I don't

1769
01:19:26,729 --> 01:19:35,309
know if this thing can do that but well

1770
01:19:32,880 --> 01:19:38,880
it doesn't really matter that much I

1771
01:19:35,310 --> 01:19:41,010
guess the point is like let's suppose we

1772
01:19:38,880 --> 01:19:44,310
just looked at the fall-off along a

1773
01:19:41,010 --> 01:19:55,170
diagonal and so we said it was basically

1774
01:19:44,310 --> 01:20:00,150
the square root of x squared plus x

1775
01:19:55,170 --> 01:20:02,369
squared right

1776
01:20:00,149 --> 01:20:04,079
and really you know what we want to do

1777
01:20:02,369 --> 01:20:06,539
is look at it like this but this would

1778
01:20:04,079 --> 01:20:13,920
be a 3d and I don't know that this thing

1779
01:20:06,539 --> 01:20:15,090
can do that so I'm just going to go

1780
01:20:13,920 --> 01:20:16,199
ahead and assume that you know we're

1781
01:20:15,090 --> 01:20:19,500
just through x squared plus x squared

1782
01:20:16,199 --> 01:20:22,229
right so the square root of x squared

1783
01:20:19,500 --> 01:20:25,529
plus x squared that's going to be the

1784
01:20:22,229 --> 01:20:33,689
fall-off equation for our particular

1785
01:20:25,529 --> 01:20:36,840
light which right it was one minus and

1786
01:20:33,689 --> 01:20:38,849
so we had some coefficient in here which

1787
01:20:36,840 --> 01:20:40,770
we can use to sort of change the angle

1788
01:20:38,850 --> 01:20:44,010
of this right like if it was that it

1789
01:20:40,770 --> 01:20:46,680
would take longer if it was that then

1790
01:20:44,010 --> 01:20:49,560
it's steeper but basically it's linear

1791
01:20:46,680 --> 01:20:51,990
right and so what we could do if we

1792
01:20:49,560 --> 01:20:56,150
wanted to is if we want to smooth this

1793
01:20:51,989 --> 01:20:59,849
out we can look at this function and

1794
01:20:56,149 --> 01:21:02,129
this interface sucks now is it always

1795
01:20:59,850 --> 01:21:07,320
this bad I just want to put this whole

1796
01:21:02,130 --> 01:21:10,190
thing into the square root so we can see

1797
01:21:07,319 --> 01:21:12,299
there's that would be a steeper fall-off

1798
01:21:10,189 --> 01:21:13,469
all I was trying to do is illustrate the

1799
01:21:12,300 --> 01:21:18,829
difference between these two things and

1800
01:21:13,470 --> 01:21:18,829
this would be a smoother fall-off right

1801
01:21:20,899 --> 01:21:26,009
so I don't know like we could say well

1802
01:21:23,819 --> 01:21:28,409
how bad is it if we assume that the

1803
01:21:26,010 --> 01:21:29,880
lighting isn't as harsh you know it

1804
01:21:28,409 --> 01:21:33,119
doesn't fall off as harshly

1805
01:21:29,880 --> 01:21:37,079
so with this clamp 0 to 1 maybe what I

1806
01:21:33,119 --> 01:21:40,619
do is say well ok like yeah we've got

1807
01:21:37,079 --> 01:21:42,630
light see x equals whatever the light

1808
01:21:40,619 --> 01:21:44,039
intensity actually is but before we do

1809
01:21:42,630 --> 01:21:46,969
that we want to smooth the fall-off

1810
01:21:44,039 --> 01:21:53,069
curve so we just say like well you know

1811
01:21:46,969 --> 01:21:58,500
square that right and so if we square

1812
01:21:53,069 --> 01:22:02,369
that term we just get you know in theory

1813
01:21:58,500 --> 01:22:07,079
a smoother fall-off curve and how bad is

1814
01:22:02,369 --> 01:22:10,649
that right and the answer is you know

1815
01:22:07,079 --> 01:22:14,238
it's true it's not as bad right but it's

1816
01:22:10,649 --> 01:22:17,399
still pretty bad I would say you know

1817
01:22:14,238 --> 01:22:20,959
any you know we can we can sit there ad

1818
01:22:17,399 --> 01:22:24,479
infinitum making this less and less

1819
01:22:20,960 --> 01:22:26,279
harsh I think but I don't think we're

1820
01:22:24,479 --> 01:22:29,698
ever really gonna get away from from

1821
01:22:26,279 --> 01:22:31,399
that artifact right so here's in fact

1822
01:22:29,698 --> 01:22:34,399
that wasn't really looks worse honestly

1823
01:22:31,399 --> 01:22:34,399
right

1824
01:22:40,500 --> 01:22:44,569
because it cursed weaker right

1825
01:22:48,579 --> 01:22:55,670
so I think we've learned what we want to

1826
01:22:51,409 --> 01:22:57,199
learn from this we can also try it March

1827
01:22:55,670 --> 01:23:01,550
or fall off but I'm assuming that it's

1828
01:22:57,199 --> 01:23:02,899
gonna be bad as well wait oh you know

1829
01:23:01,550 --> 01:23:10,820
what we don't call it square it we call

1830
01:23:02,899 --> 01:23:14,779
it square I'm assuming Harsha fall off

1831
01:23:10,819 --> 01:23:17,949
will be just as bad as the as the really

1832
01:23:14,779 --> 01:23:22,840
unhorse fell off right that not work

1833
01:23:17,949 --> 01:23:22,840
sometimes yes I agree

1834
01:23:24,609 --> 01:23:30,979
um so I think yeah I think we want to do

1835
01:23:29,060 --> 01:23:32,360
some more thinking about this right yeah

1836
01:23:30,979 --> 01:23:34,789
you can see like there's looking at how

1837
01:23:32,359 --> 01:23:38,750
hard how much blockiness you get at the

1838
01:23:34,789 --> 01:23:40,189
edges of that one right and we can take

1839
01:23:38,750 --> 01:23:41,420
the light intensity down to see what it

1840
01:23:40,189 --> 01:23:42,979
would look like more reasonably because

1841
01:23:41,420 --> 01:23:46,369
like that I like intensity it's too high

1842
01:23:42,979 --> 01:23:48,529
right now but it's still you know you're

1843
01:23:46,369 --> 01:23:51,439
gonna get that really hard fall off

1844
01:23:48,529 --> 01:23:57,829
there and it happens pretty much in

1845
01:23:51,439 --> 01:23:59,479
either case right so I think there's no

1846
01:23:57,829 --> 01:24:02,149
way around it I think we're gonna have

1847
01:23:59,479 --> 01:24:05,979
to do something better right I think

1848
01:24:02,149 --> 01:24:05,979
this is just not good enough and

1849
01:24:12,289 --> 01:24:19,550
and that's kind of unfortunate to say

1850
01:24:16,819 --> 01:24:29,289
the least but I think that's basically

1851
01:24:19,550 --> 01:24:29,289
where we're at so yeah

1852
01:24:42,920 --> 01:24:51,720
all right so how much time we got here

1853
01:24:45,630 --> 01:24:57,779
we've got about 15 minutes left I guess

1854
01:24:51,720 --> 01:25:02,130
what I would want to try and we're gonna

1855
01:24:57,779 --> 01:25:03,989
have to think about this a bit so the

1856
01:25:02,130 --> 01:25:09,630
next thing that maybe makes sense to

1857
01:25:03,989 --> 01:25:13,469
drive is to say what if we actually just

1858
01:25:09,630 --> 01:25:17,069
compute like just lighting distances so

1859
01:25:13,470 --> 01:25:20,070
we actually think about for the voxel

1860
01:25:17,069 --> 01:25:20,849
UVW we say where are these lighting

1861
01:25:20,069 --> 01:25:22,319
probes

1862
01:25:20,850 --> 01:25:25,020
where are the Centers of these probes

1863
01:25:22,319 --> 01:25:28,849
and let's like actually try to shoot

1864
01:25:25,020 --> 01:25:36,530
light towards them so that we blend

1865
01:25:28,850 --> 01:25:36,530
radially instead of try linearly right

1866
01:25:46,659 --> 01:25:54,529
like that's my first thought my second

1867
01:25:50,630 --> 01:26:01,989
thought is well you know since this

1868
01:25:54,529 --> 01:26:01,989
stuff is being sampled as like more of a

1869
01:26:03,159 --> 01:26:08,680
you know that's what I'm saying actually

1870
01:26:06,409 --> 01:26:08,680
true

1871
01:26:33,210 --> 01:26:38,079
so the thing that I'm thinking about in

1872
01:26:35,289 --> 01:26:40,269
my head is just like well you know we've

1873
01:26:38,079 --> 01:26:43,960
got light sources and those light

1874
01:26:40,270 --> 01:26:45,640
sources are not have there's no direct

1875
01:26:43,960 --> 01:26:47,230
illumination pass and handmade here oh

1876
01:26:45,640 --> 01:26:48,550
right so we only have the indirect

1877
01:26:47,229 --> 01:26:50,679
illumination and that was really all we

1878
01:26:48,550 --> 01:26:52,000
were planning on really doing so we're

1879
01:26:50,680 --> 01:26:53,860
not doing like shadow maps or anything

1880
01:26:52,000 --> 01:26:57,699
like that and projecting lights as

1881
01:26:53,859 --> 01:27:00,130
specific lights we just have like a

1882
01:26:57,699 --> 01:27:04,750
lighting sort of convection phase and

1883
01:27:00,130 --> 01:27:07,600
that's it and so you know I mean one

1884
01:27:04,750 --> 01:27:09,189
thing that I guess you could say is the

1885
01:27:07,600 --> 01:27:10,870
situation specifically that we're

1886
01:27:09,189 --> 01:27:13,359
talking about here where you get like

1887
01:27:10,869 --> 01:27:14,800
fall-off of the light you know based on

1888
01:27:13,359 --> 01:27:18,519
the distance from the light source it's

1889
01:27:14,800 --> 01:27:21,250
not really ever gonna happen so I guess

1890
01:27:18,520 --> 01:27:23,350
it's possible I mean it's it's I don't

1891
01:27:21,250 --> 01:27:25,449
know for sure but I guess it's possible

1892
01:27:23,350 --> 01:27:30,850
that you would never really have

1893
01:27:25,449 --> 01:27:33,069
something like this happen anyway so

1894
01:27:30,850 --> 01:27:36,219
maybe it's the wrong thing to say let's

1895
01:27:33,069 --> 01:27:38,590
get rid of it altogether you know right

1896
01:27:36,219 --> 01:27:41,260
away because you know I don't know maybe

1897
01:27:38,590 --> 01:27:42,600
maybe we don't actually need to get rid

1898
01:27:41,260 --> 01:27:49,630
of it

1899
01:27:42,600 --> 01:27:51,730
maybe it's fine and maybe if you're

1900
01:27:49,630 --> 01:27:54,909
talking about lighting that has it's

1901
01:27:51,729 --> 01:27:56,979
always got you know sort of the the

1902
01:27:54,909 --> 01:27:59,559
first pass with the probe distribution

1903
01:27:56,979 --> 01:28:02,799
already having smooth the light out

1904
01:27:59,560 --> 01:28:05,950
around so that you know things are

1905
01:28:02,800 --> 01:28:09,159
generally lit things next to each other

1906
01:28:05,949 --> 01:28:11,139
are pretty similarly lit you know maybe

1907
01:28:09,159 --> 01:28:13,988
you just don't ever have that particular

1908
01:28:11,140 --> 01:28:17,369
problem and I don't know right so it's

1909
01:28:13,988 --> 01:28:17,369
really hard for me to guess

1910
01:28:21,789 --> 01:28:28,359
it's it's pretty difficult for me to

1911
01:28:24,109 --> 01:28:28,359
make a specific guess about that

1912
01:28:41,729 --> 01:28:46,988
so it's hard to say you know on the one

1913
01:28:44,949 --> 01:28:50,279
hand I'm like should I just go in then

1914
01:28:46,988 --> 01:28:50,279
should I you know

1915
01:28:57,399 --> 01:29:01,000
should we go forward with this light

1916
01:28:59,409 --> 01:29:03,430
sampling and then you know do it after

1917
01:29:01,000 --> 01:29:04,750
the fact I don't know maybe we should

1918
01:29:03,430 --> 01:29:05,829
because maybe it's putting the cart

1919
01:29:04,750 --> 01:29:08,739
before the horse to try to improve the

1920
01:29:05,829 --> 01:29:10,750
light sampling and maybe we should see

1921
01:29:08,739 --> 01:29:12,849
so let's do one more thing before we end

1922
01:29:10,750 --> 01:29:14,590
for the day we've got the light normal

1923
01:29:12,850 --> 01:29:16,960
here let's use the light normal to

1924
01:29:14,590 --> 01:29:19,750
decide who we stuff right so we have our

1925
01:29:16,960 --> 01:29:21,130
you know up down or south east west

1926
01:29:19,750 --> 01:29:22,420
just to put some different lighting

1927
01:29:21,130 --> 01:29:26,020
directions in there and mix it up a

1928
01:29:22,420 --> 01:29:28,000
little bit and so what I'd like to do

1929
01:29:26,020 --> 01:29:30,520
here is say all right let's take a look

1930
01:29:28,000 --> 01:29:33,100
at which one of these components is

1931
01:29:30,520 --> 01:29:36,090
Maxwell or maybe we'll just say we'll

1932
01:29:33,100 --> 01:29:40,660
use the light and itself to determine

1933
01:29:36,090 --> 01:29:44,529
who gets what light where right and so

1934
01:29:40,659 --> 01:29:47,229
we'll say okay there's going to be a a

1935
01:29:44,529 --> 01:29:48,699
light stuff value here I might go ahead

1936
01:29:47,229 --> 01:29:57,669
and make a little utility function for

1937
01:29:48,699 --> 01:30:00,939
this well you know we could use an RGB

1938
01:29:57,670 --> 01:30:04,810
AIPAC 4 by 8 here I guess it's a BGR

1939
01:30:00,939 --> 01:30:07,239
pack technically so I could use this so

1940
01:30:04,810 --> 01:30:11,500
we basically just we call this on each

1941
01:30:07,239 --> 01:30:14,099
one so instead of doing it this way we

1942
01:30:11,500 --> 01:30:14,100
would do this

1943
01:30:25,698 --> 01:30:31,859
and then what we would do is we just all

1944
01:30:28,380 --> 01:30:36,630
we would do is have actual like values

1945
01:30:31,859 --> 01:30:39,719
here so we'd pass in a v4 right and the

1946
01:30:36,630 --> 01:30:42,390
v4 would would have the alpha or the

1947
01:30:39,719 --> 01:30:45,060
intensity for each channel so this is

1948
01:30:42,390 --> 01:30:47,789
the west intensity or the the west alpha

1949
01:30:45,060 --> 01:30:51,330
I guess you would say and then the light

1950
01:30:47,789 --> 01:30:53,698
color right so this would just be you

1951
01:30:51,329 --> 01:30:56,000
know that for now but we could obviously

1952
01:30:53,698 --> 01:31:00,859
change the light color if we wanted to

1953
01:30:56,000 --> 01:31:03,869
so we'll do something like this I think

1954
01:31:00,859 --> 01:31:05,639
and then we just need to actually

1955
01:31:03,869 --> 01:31:07,469
compute those alpha values and we'll

1956
01:31:05,640 --> 01:31:14,810
compute them based on the lighting

1957
01:31:07,469 --> 01:31:23,670
direction there right so here we have

1958
01:31:14,810 --> 01:31:26,610
south north found and and then all we

1959
01:31:23,670 --> 01:31:29,640
need to do is actually produce those

1960
01:31:26,609 --> 01:31:31,738
light values ourselves and you know get

1961
01:31:29,640 --> 01:31:34,590
them in there so we don't need this

1962
01:31:31,738 --> 01:31:37,678
anymore we'll let the PAC work

1963
01:31:34,590 --> 01:31:39,750
generically so looking at what we've got

1964
01:31:37,679 --> 01:31:42,119
here we can see we've got a light this

1965
01:31:39,750 --> 01:31:43,859
is the direction to the light from the

1966
01:31:42,119 --> 01:31:47,939
place in the voxel which is what we want

1967
01:31:43,859 --> 01:31:52,759
to use for packing so what we want here

1968
01:31:47,939 --> 01:31:52,759
is to produce values for each of these

1969
01:31:56,979 --> 01:32:04,368
and this is how much of the light is

1970
01:32:01,639 --> 01:32:07,368
coming in from that direction right and

1971
01:32:04,368 --> 01:32:09,589
so what we'd like to do is we'd like to

1972
01:32:07,368 --> 01:32:11,359
basically you know maybe use the dot

1973
01:32:09,590 --> 01:32:12,860
product here to say like how close are

1974
01:32:11,359 --> 01:32:14,268
we to that this is not exactly right

1975
01:32:12,859 --> 01:32:16,908
because we're trying to conserve the

1976
01:32:14,269 --> 01:32:20,510
amount of light so we want all of this

1977
01:32:16,908 --> 01:32:23,719
to sum to one in a sense and so you know

1978
01:32:20,510 --> 01:32:26,090
it's it's something that we want to kind

1979
01:32:23,719 --> 01:32:27,649
of do a 1-norm on probably after the

1980
01:32:26,090 --> 01:32:32,029
fact to make sure that we don't add

1981
01:32:27,649 --> 01:32:33,288
light to the system so it's more we

1982
01:32:32,029 --> 01:32:34,518
gotta be a little bit flexible here so

1983
01:32:33,288 --> 01:32:38,420
we'll try to further that in a second

1984
01:32:34,519 --> 01:32:42,440
but anyway so if we take these values

1985
01:32:38,420 --> 01:32:48,230
here and first compute them as plant

1986
01:32:42,439 --> 01:32:50,960
zero to one you know light and and we

1987
01:32:48,229 --> 01:32:52,518
don't actually have to do because we

1988
01:32:50,960 --> 01:32:54,590
know that these are all cardinal

1989
01:32:52,519 --> 01:32:57,079
directions what we can do is just take

1990
01:32:54,590 --> 01:32:58,940
the dot product manually we know that

1991
01:32:57,078 --> 01:33:00,920
the westward facing one is going to be

1992
01:32:58,939 --> 01:33:02,178
whatever the X parameter is negated

1993
01:33:00,920 --> 01:33:05,149
because you're multiplying it by

1994
01:33:02,179 --> 01:33:08,210
negative one right same thing here this

1995
01:33:05,149 --> 01:33:10,279
is just you know each one of these we

1996
01:33:08,210 --> 01:33:12,649
can just pre evaluate the dot product

1997
01:33:10,279 --> 01:33:16,429
right so we know each of these is going

1998
01:33:12,649 --> 01:33:22,058
to be the light the normalized light

1999
01:33:16,429 --> 01:33:24,980
value basically like with with these

2000
01:33:22,059 --> 01:33:26,269
with these pre dot products computed and

2001
01:33:24,979 --> 01:33:27,799
then what we need to do is say well

2002
01:33:26,269 --> 01:33:29,449
that's how much does contribute each one

2003
01:33:27,800 --> 01:33:31,730
but this is not going to sum to one

2004
01:33:29,448 --> 01:33:33,439
right and so we then need to do is make

2005
01:33:31,729 --> 01:33:36,348
sure we don't distribute too much light

2006
01:33:33,439 --> 01:33:39,189
into the system so at that point we

2007
01:33:36,349 --> 01:33:39,190
would just sum them all

2008
01:33:45,579 --> 01:33:50,289
and then we just need to do the inverse

2009
01:33:47,350 --> 01:33:53,170
of that right to like fill it in so we

2010
01:33:50,289 --> 01:33:58,470
would need to say West a you know divide

2011
01:33:53,170 --> 01:34:05,140
equals total a write each of these piece

2012
01:33:58,470 --> 01:34:07,329
south north down and then we know that

2013
01:34:05,140 --> 01:34:09,070
we're not like making too much light

2014
01:34:07,329 --> 01:34:12,159
because we won normalized it right and

2015
01:34:09,069 --> 01:34:15,789
I'm not gonna guard for 0 there although

2016
01:34:12,159 --> 01:34:18,789
it probably should I guess I should cuz

2017
01:34:15,789 --> 01:34:28,869
this can and technically be 0 so maybe

2018
01:34:18,789 --> 01:34:35,920
I'll do this right and then this is just

2019
01:34:28,869 --> 01:34:38,199
a multiply and that's just if you happen

2020
01:34:35,920 --> 01:34:39,489
to be standing like right on the light

2021
01:34:38,199 --> 01:34:44,409
source you don't know which direction

2022
01:34:39,489 --> 01:34:47,050
it's coming from right well and actually

2023
01:34:44,409 --> 01:34:48,369
so that's a safe ratio of 1 technically

2024
01:34:47,050 --> 01:34:50,590
right because if you're standing right

2025
01:34:48,369 --> 01:34:52,599
on the light source you should get it

2026
01:34:50,590 --> 01:34:54,579
equally from all directions not not get

2027
01:34:52,600 --> 01:35:00,190
it at all so I think that's actually it

2028
01:34:54,579 --> 01:35:08,050
should be that um ok wow that went

2029
01:35:00,189 --> 01:35:13,659
poorly so what a nice grip there anyone

2030
01:35:08,050 --> 01:35:17,529
know we're competing the light normal we

2031
01:35:13,659 --> 01:35:19,329
assign it to each of those say for sure

2032
01:35:17,529 --> 01:35:25,529
why don't we multiplied by the inverse

2033
01:35:19,329 --> 01:35:25,529
to 1 normalize we then do beat your pack

2034
01:35:31,250 --> 01:35:41,279
that looks good doesn't it

2035
01:35:34,460 --> 01:35:43,850
is this just rusted I wonder if my pack

2036
01:35:41,279 --> 01:35:43,849
is broken

2037
01:35:50,738 --> 01:35:57,468
yeah it is apparently all right so my

2038
01:35:54,140 --> 01:36:01,010
BGR I packed 4x8 is there something

2039
01:35:57,469 --> 01:36:03,679
we're oh yeah gets me every time

2040
01:36:01,010 --> 01:36:04,920
so these are two fives so this is

2041
01:36:03,679 --> 01:36:08,029
actually this

2042
01:36:04,920 --> 01:36:08,029
[Music]

2043
01:36:17,569 --> 01:36:21,929
there we go

2044
01:36:19,020 --> 01:36:25,410
all right so taking away the Fulbright

2045
01:36:21,930 --> 01:36:28,380
up a nonsense there the other thing we

2046
01:36:25,409 --> 01:36:30,090
need here is this is not respecting this

2047
01:36:28,380 --> 01:36:31,980
in total a is a little bit wrong because

2048
01:36:30,090 --> 01:36:33,360
we have a light intensity value so we

2049
01:36:31,979 --> 01:36:38,129
want it to sum to the total light

2050
01:36:33,359 --> 01:36:39,869
intensity right or rather the total

2051
01:36:38,130 --> 01:36:41,579
light seek contribution level right I

2052
01:36:39,869 --> 01:36:43,260
should say so what we want to do is say

2053
01:36:41,579 --> 01:36:45,510
this is the total light contribution

2054
01:36:43,260 --> 01:36:47,789
we're going to spread it out this way so

2055
01:36:45,510 --> 01:36:50,070
we want to say don't normalize to 1

2056
01:36:47,789 --> 01:36:51,840
normalize to whatever the total amount

2057
01:36:50,069 --> 01:36:54,239
of incoming light should have been at

2058
01:36:51,840 --> 01:36:57,449
that point and we'll do it like that

2059
01:36:54,239 --> 01:37:01,229
right and that's just a radial fall-off

2060
01:36:57,449 --> 01:37:03,479
curve right so here is our you know

2061
01:37:01,229 --> 01:37:05,429
directional version of this so now we

2062
01:37:03,479 --> 01:37:07,979
actually have the light coming from

2063
01:37:05,430 --> 01:37:10,380
different directions and you can see

2064
01:37:07,979 --> 01:37:12,869
that it actually is as well because if

2065
01:37:10,380 --> 01:37:15,930
you look at what happens say on the wall

2066
01:37:12,869 --> 01:37:19,079
here right you can see that you get like

2067
01:37:15,930 --> 01:37:23,070
curvature coming in so the surfaces

2068
01:37:19,079 --> 01:37:26,010
themselves are not uniformly lit they it

2069
01:37:23,069 --> 01:37:29,519
depends on what direction you're facing

2070
01:37:26,010 --> 01:37:31,170
right so that does seem to be working

2071
01:37:29,520 --> 01:37:33,090
and we see exactly what we would expect

2072
01:37:31,170 --> 01:37:36,750
to see there like darkening in that

2073
01:37:33,090 --> 01:37:37,680
corner right because again it can't when

2074
01:37:36,750 --> 01:37:39,810
it's pointing in the different

2075
01:37:37,680 --> 01:37:43,440
directions there it's it's gonna fade

2076
01:37:39,810 --> 01:37:44,910
out that earlier right so we do see that

2077
01:37:43,439 --> 01:37:45,269
I think that's what that should look

2078
01:37:44,909 --> 01:37:52,289
like

2079
01:37:45,270 --> 01:37:56,970
it just looks fairly right to me so that

2080
01:37:52,289 --> 01:37:59,909
all seems pretty good let's take a look

2081
01:37:56,970 --> 01:38:01,079
at what happens when we just go into

2082
01:37:59,909 --> 01:38:03,829
something that's a little bit more

2083
01:38:01,079 --> 01:38:03,829
vertically stacked

2084
01:38:05,800 --> 01:38:07,860
you

2085
01:38:22,750 --> 01:38:26,770
so here you can kind of see and I don't

2086
01:38:25,010 --> 01:38:30,140
know if those normals are correct or not

2087
01:38:26,770 --> 01:38:32,480
on the sprites in fact I kind of wish

2088
01:38:30,140 --> 01:38:33,890
we'd turn those off because I should

2089
01:38:32,479 --> 01:38:36,229
probably go severa phi that the normals

2090
01:38:33,890 --> 01:38:48,800
are correct is what I should do that's

2091
01:38:36,229 --> 01:38:50,419
sort of a separate issue but it's hard

2092
01:38:48,800 --> 01:38:52,750
to really gauge whether that's working

2093
01:38:50,420 --> 01:38:52,750
properly

2094
01:39:12,279 --> 01:39:15,909
but it sure seems like it is and the

2095
01:39:14,260 --> 01:39:18,039
only thing that I think isn't quite

2096
01:39:15,909 --> 01:39:22,750
working properly it's I don't think

2097
01:39:18,039 --> 01:39:24,789
these sort of the I don't think the

2098
01:39:22,750 --> 01:39:27,430
sprites themselves have their normal set

2099
01:39:24,789 --> 01:39:30,390
the way that they should be so I do

2100
01:39:27,430 --> 01:39:32,710
think we want to take a look at that and

2101
01:39:30,390 --> 01:39:36,670
if I remember correctly there's some

2102
01:39:32,710 --> 01:39:38,109
kind of nonsense happening I there with

2103
01:39:36,670 --> 01:39:39,130
normals that I don't really remember

2104
01:39:38,109 --> 01:39:43,059
what it is

2105
01:39:39,130 --> 01:39:45,550
but like if you go look at the entity

2106
01:39:43,060 --> 01:39:48,640
output stuff it's I feel like there are

2107
01:39:45,550 --> 01:39:52,960
some nonsense going on in here so if we

2108
01:39:48,640 --> 01:39:55,289
look at the way that we're spamming

2109
01:39:52,960 --> 01:39:58,408
these values down

2110
01:39:55,289 --> 01:39:58,408
[Music]

2111
01:40:04,710 --> 01:40:14,189
there's a cover end value here and like

2112
01:40:08,470 --> 01:40:20,350
looking at this it's kind of nonsense

2113
01:40:14,189 --> 01:40:23,259
right I'm not sure exactly what we want

2114
01:40:20,350 --> 01:40:27,120
that value to be but it's probably not

2115
01:40:23,260 --> 01:40:27,119
that right

2116
01:40:32,729 --> 01:40:39,789
we'd have to think about if it's

2117
01:40:34,840 --> 01:40:43,090
probably something more like this you

2118
01:40:39,789 --> 01:40:44,859
know I'm saying say so we'll have to

2119
01:40:43,090 --> 01:40:52,270
think about that and whether or not that

2120
01:40:44,859 --> 01:40:53,859
normals coming through correctly and we

2121
01:40:52,270 --> 01:40:57,070
probably want that normal to vary as

2122
01:40:53,859 --> 01:41:00,839
well so we probably want that normal to

2123
01:40:57,069 --> 01:41:00,840
actually be like something that

2124
01:41:02,220 --> 01:41:07,630
something that changes over the surface

2125
01:41:04,359 --> 01:41:18,069
of the sprite as well so let me just

2126
01:41:07,630 --> 01:41:19,989
take a quick look though and you know

2127
01:41:18,069 --> 01:41:21,909
for ground cover it almost seems like it

2128
01:41:19,989 --> 01:41:24,670
wants to be lit more with the actual

2129
01:41:21,909 --> 01:41:26,199
ground that's on so I wonder too if

2130
01:41:24,670 --> 01:41:29,619
maybe that's not the right thing for

2131
01:41:26,199 --> 01:41:32,349
cover sprites cover only actual up

2132
01:41:29,619 --> 01:41:34,750
rights rights that are you know not just

2133
01:41:32,350 --> 01:41:37,390
ground cover maybe don't want that

2134
01:41:34,750 --> 01:41:39,250
because then you would get the lighting

2135
01:41:37,390 --> 01:41:40,780
that you get for the ground which seems

2136
01:41:39,250 --> 01:41:42,880
like that what you want so that though

2137
01:41:40,779 --> 01:41:45,009
the ground cover appears to be lit the

2138
01:41:42,880 --> 01:41:48,100
same way that the surface underneath it

2139
01:41:45,010 --> 01:41:52,890
is right and then you should see them

2140
01:41:48,100 --> 01:41:55,570
getting sort of more uniformly lit right

2141
01:41:52,890 --> 01:41:58,780
and maybe that's what we want

2142
01:41:55,569 --> 01:42:02,229
I don't really know kind of hard to say

2143
01:41:58,779 --> 01:42:06,250
I also do wonder what happens with like

2144
01:42:02,229 --> 01:42:09,339
a sprite like that looks like that gets

2145
01:42:06,250 --> 01:42:11,859
lit pretty correctly there but as we get

2146
01:42:09,340 --> 01:42:13,420
behind that guy it should they should be

2147
01:42:11,859 --> 01:42:15,279
darker yeah which is exactly what we

2148
01:42:13,420 --> 01:42:16,420
want so yeah I mean it looks like our

2149
01:42:15,279 --> 01:42:18,819
lighting sampling is working pretty good

2150
01:42:16,420 --> 01:42:20,859
I just don't love those those edge

2151
01:42:18,819 --> 01:42:26,769
artifacts let's go ahead and go to the

2152
01:42:20,859 --> 01:42:30,279
QA you know we're not horrible

2153
01:42:26,770 --> 01:42:32,410
I could see shipping this because you

2154
01:42:30,279 --> 01:42:34,889
know people have shipped a lot worse but

2155
01:42:32,409 --> 01:42:38,019
I do think spending a little bit of time

2156
01:42:34,890 --> 01:42:39,760
maybe not now maybe we should just leave

2157
01:42:38,020 --> 01:42:44,200
it this way and go do our light

2158
01:42:39,760 --> 01:42:45,110
transport and then come back to it but I

2159
01:42:44,199 --> 01:42:47,359
do think

2160
01:42:45,109 --> 01:43:02,569
there's better things we could be doing

2161
01:42:47,359 --> 01:43:09,948
there and so I don't know right but yeah

2162
01:43:02,569 --> 01:43:12,319
so I think we'll you know will I think

2163
01:43:09,948 --> 01:43:14,689
my good inclination if I had to fight to

2164
01:43:12,319 --> 01:43:17,679
say is I think we should do is this is

2165
01:43:14,689 --> 01:43:19,939
good enough for now

2166
01:43:17,679 --> 01:43:22,210
we should ping pong over to the light

2167
01:43:19,939 --> 01:43:25,428
transport the light transport working

2168
01:43:22,210 --> 01:43:29,149
ping pong back to the sampling and then

2169
01:43:25,429 --> 01:43:32,658
improve the sampling based on what we

2170
01:43:29,149 --> 01:43:37,908
see as a result of the light transport

2171
01:43:32,658 --> 01:43:40,689
stuff right I think that might be more

2172
01:43:37,908 --> 01:43:40,689
what we want to do

2173
01:44:02,060 --> 01:44:19,739
so do we have any questions we don't

2174
01:44:05,609 --> 01:44:21,329
have any questions apparently could you

2175
01:44:19,738 --> 01:44:26,519
give a sort of brief handle excavation

2176
01:44:21,329 --> 01:44:28,829
how the lighting works and/or someone -

2177
01:44:26,520 --> 01:44:30,119
people ask questions on that could you

2178
01:44:28,829 --> 01:44:32,840
draw a quick diagram giving it overview

2179
01:44:30,118 --> 01:44:35,399
of the stages and lighting solution sure

2180
01:44:32,840 --> 01:44:40,980
we don't really have any questions so

2181
01:44:35,399 --> 01:44:42,809
that seems pretty easy let me actually

2182
01:44:40,979 --> 01:44:44,218
let me feel that these in opposite order

2183
01:44:42,810 --> 01:44:45,690
though because so much of my name I'm so

2184
01:44:44,219 --> 01:44:47,399
asked are the cube artifacts result of

2185
01:44:45,689 --> 01:44:51,629
the view vector reflection instead of

2186
01:44:47,399 --> 01:44:53,339
the light vector reflections so it is

2187
01:44:51,630 --> 01:44:56,670
worth noting that we don't really know

2188
01:44:53,340 --> 01:44:58,500
what those artifacts are exactly I think

2189
01:44:56,670 --> 01:45:00,989
they're just would happen any time

2190
01:44:58,500 --> 01:45:03,689
you're doing that trilinear though but

2191
01:45:00,988 --> 01:45:07,349
let's double check right so if we do

2192
01:45:03,689 --> 01:45:08,789
compile Z biased program in here and we

2193
01:45:07,350 --> 01:45:12,210
look at how the lighting is working

2194
01:45:08,789 --> 01:45:13,829
right what we could do is say well you

2195
01:45:12,210 --> 01:45:15,840
know what just get rid of the specular

2196
01:45:13,829 --> 01:45:18,090
so that way all we're doing is pure

2197
01:45:15,840 --> 01:45:21,600
diffuse so you know goodbye specular

2198
01:45:18,090 --> 01:45:23,159
it's gone and now like what does our

2199
01:45:21,600 --> 01:45:28,320
light sample look like when it's only

2200
01:45:23,158 --> 01:45:29,698
sampling diffuse lighting right so if

2201
01:45:28,319 --> 01:45:32,729
we're only sampling diffuse lighting

2202
01:45:29,698 --> 01:45:35,488
this is what we get and to me that looks

2203
01:45:32,729 --> 01:45:38,158
the same right so I don't see any that

2204
01:45:35,488 --> 01:45:39,329
the artifacts look like they look to me

2205
01:45:38,158 --> 01:45:43,979
right they looked like they looked

2206
01:45:39,329 --> 01:45:45,658
before so I'm assuming that our specular

2207
01:45:43,979 --> 01:45:46,919
reflection equation doesn't really have

2208
01:45:45,658 --> 01:45:48,868
anything new with the artifacts it's

2209
01:45:46,920 --> 01:45:52,139
just the trilinear interpolation in the

2210
01:45:48,868 --> 01:45:54,210
voxel that sucks right and I can

2211
01:45:52,139 --> 01:46:00,480
understand why that would be because

2212
01:45:54,210 --> 01:46:03,000
what effectively is happening is we

2213
01:46:00,479 --> 01:46:06,000
don't blend the light probes and then

2214
01:46:03,000 --> 01:46:08,189
take some aggregate light and sample the

2215
01:46:06,000 --> 01:46:11,340
aggregate lighting what we do is we

2216
01:46:08,189 --> 01:46:13,169
blend directly what we think the

2217
01:46:11,340 --> 01:46:15,039
incoming light from that direction is on

2218
01:46:13,170 --> 01:46:16,859
the voxel so I have to play

2219
01:46:15,039 --> 01:46:19,329
where it goes from something to zero

2220
01:46:16,859 --> 01:46:21,880
there is just a hard trilinear edge

2221
01:46:19,329 --> 01:46:26,729
there right so it's not gonna give you

2222
01:46:21,880 --> 01:46:26,730
radial fall off like you would expect

2223
01:46:27,119 --> 01:46:33,819
for the diffuse lighting and the only

2224
01:46:31,899 --> 01:46:37,439
way I think to really get that radial

2225
01:46:33,819 --> 01:46:41,319
fall-off is to be using the distance to

2226
01:46:37,439 --> 01:46:44,619
the voxel as part of it right now maybe

2227
01:46:41,319 --> 01:46:47,559
the answer is we should be doing that so

2228
01:46:44,619 --> 01:46:53,619
that it's a radial fall-off but in order

2229
01:46:47,560 --> 01:46:57,000
to do the radial fall-off um you can't

2230
01:46:53,619 --> 01:46:57,000
use the trilinear anymore right

2231
01:47:15,130 --> 01:47:20,350
I mean another answer is like an another

2232
01:47:19,210 --> 01:47:21,579
question the first thing that came to

2233
01:47:20,350 --> 01:47:25,090
mind was sort of like what if we just

2234
01:47:21,579 --> 01:47:39,399
sampled the light from all of these

2235
01:47:25,090 --> 01:47:43,350
cubed maps based on normal I don't know

2236
01:47:39,399 --> 01:47:43,349
so I really don't know

2237
01:47:51,960 --> 01:47:56,529
but let me go in let me go draw the

2238
01:47:54,130 --> 01:47:58,750
diagram anyway because that was the the

2239
01:47:56,529 --> 01:48:00,009
question that was asked so the lighting

2240
01:47:58,750 --> 01:48:03,039
stages are pretty straightforward

2241
01:48:00,010 --> 01:48:06,159
actually there's not that much stuff to

2242
01:48:03,039 --> 01:48:09,369
it it's just that because there's like

2243
01:48:06,159 --> 01:48:11,170
the need to persist over frames and you

2244
01:48:09,369 --> 01:48:13,510
know optimization concerns and all this

2245
01:48:11,170 --> 01:48:14,739
it gets over complicated which is why

2246
01:48:13,510 --> 01:48:17,020
lighting Yowies is bad

2247
01:48:14,739 --> 01:48:18,519
I mean lighting should take like five

2248
01:48:17,020 --> 01:48:20,410
seconds to implement it's just a ray

2249
01:48:18,520 --> 01:48:21,010
tracer right and then the lighting is

2250
01:48:20,409 --> 01:48:24,039
perfect

2251
01:48:21,010 --> 01:48:26,320
the problem is that's way too slow right

2252
01:48:24,039 --> 01:48:27,850
and so everything is about all these

2253
01:48:26,319 --> 01:48:31,269
like hacky approximations that we're

2254
01:48:27,850 --> 01:48:35,560
doing to try and and not have to do that

2255
01:48:31,270 --> 01:48:39,030
right so anyway the stages are pretty

2256
01:48:35,560 --> 01:48:39,030
basic so

2257
01:48:49,270 --> 01:48:58,270
so basically this is it startup and this

2258
01:48:53,859 --> 01:48:59,469
is it runtime so during startup the

2259
01:48:58,270 --> 01:49:01,360
first thing you do is lie probe

2260
01:48:59,470 --> 01:49:03,310
distribution and what that effectively

2261
01:49:01,359 --> 01:49:05,799
does is it says well you know we

2262
01:49:03,310 --> 01:49:08,020
generated some stuff like I don't know

2263
01:49:05,800 --> 01:49:10,360
here's a room and there's a doorway and

2264
01:49:08,020 --> 01:49:13,990
then there's another room over here or

2265
01:49:10,359 --> 01:49:15,909
something right and so whatever the heck

2266
01:49:13,989 --> 01:49:18,519
we generated we need to distribute light

2267
01:49:15,909 --> 01:49:20,289
probes so we put them in the environment

2268
01:49:18,520 --> 01:49:24,070
wherever we think we might want them

2269
01:49:20,289 --> 01:49:26,140
right and it's just a hacky random thing

2270
01:49:24,069 --> 01:49:28,599
we can spew them out wherever we want it

2271
01:49:26,140 --> 01:49:30,310
doesn't really matter so we have light

2272
01:49:28,600 --> 01:49:34,170
probe distribution and that distributes

2273
01:49:30,310 --> 01:49:36,610
light probes through the system right

2274
01:49:34,170 --> 01:49:38,859
those light probes are actual entities

2275
01:49:36,609 --> 01:49:40,899
so they go into the entity system and

2276
01:49:38,859 --> 01:49:42,939
the reason for that is because we're

2277
01:49:40,899 --> 01:49:46,119
just using the fact that we have a nice

2278
01:49:42,939 --> 01:49:47,319
robust enemy system with caching and all

2279
01:49:46,119 --> 01:49:49,090
kinds of stuff that allows us to have

2280
01:49:47,319 --> 01:49:52,779
like billions of entities if we want to

2281
01:49:49,090 --> 01:49:54,369
so it's nice and free to just throw the

2282
01:49:52,779 --> 01:49:58,840
light probes in there and in there go

2283
01:49:54,369 --> 01:50:01,090
right then at runtime what we have is

2284
01:49:58,840 --> 01:50:07,960
the thing that's basically like a light

2285
01:50:01,090 --> 01:50:11,860
table so light probe table of a certain

2286
01:50:07,960 --> 01:50:16,329
fixed size right and so this is like n

2287
01:50:11,859 --> 01:50:19,719
long whereas this is like arbitrary

2288
01:50:16,329 --> 01:50:22,539
right so the number of light probes the

2289
01:50:19,720 --> 01:50:25,539
number of probes is like you know

2290
01:50:22,539 --> 01:50:28,869
basically infinite it doesn't make with

2291
01:50:25,539 --> 01:50:31,269
in machine storage we don't care how

2292
01:50:28,869 --> 01:50:34,269
many light probes the world generator

2293
01:50:31,270 --> 01:50:37,690
generated it doesn't matter at actual

2294
01:50:34,270 --> 01:50:40,990
runtime some number of these light

2295
01:50:37,689 --> 01:50:44,619
probes right we have a light probe table

2296
01:50:40,989 --> 01:50:46,059
so step two in the process and the first

2297
01:50:44,619 --> 01:50:47,199
step that happens at runtime because

2298
01:50:46,060 --> 01:50:50,289
this one happened when we created the

2299
01:50:47,199 --> 01:50:53,949
world is like probe index assignment

2300
01:50:50,289 --> 01:50:56,229
right can somebody please tell me if

2301
01:50:53,949 --> 01:50:59,399
Milton's been fixed by the way it's so

2302
01:50:56,229 --> 01:51:01,659
bad to draw on now it like totally broke

2303
01:50:59,399 --> 01:51:03,269
and I don't know why it broke because it

2304
01:51:01,659 --> 01:51:05,489
was good before I'm not sure

2305
01:51:03,270 --> 01:51:08,450
they broke it but somebody broke it and

2306
01:51:05,489 --> 01:51:13,800
I'm not sure what the deal is with that

2307
01:51:08,449 --> 01:51:16,949
anyway so probe index assignment just

2308
01:51:13,800 --> 01:51:18,690
basically says look some subset of the

2309
01:51:16,949 --> 01:51:21,059
million probes or whatever that we put

2310
01:51:18,689 --> 01:51:23,189
in the world some subset are actually

2311
01:51:21,060 --> 01:51:26,220
useful right now and what we're doing is

2312
01:51:23,189 --> 01:51:29,250
as we move around the world we're sort

2313
01:51:26,220 --> 01:51:33,990
of taking some subset so maybe we say

2314
01:51:29,250 --> 01:51:36,989
like you know these probes right here we

2315
01:51:33,989 --> 01:51:41,489
don't need anymore right so this is like

2316
01:51:36,989 --> 01:51:43,109
you know removal and then some new

2317
01:51:41,489 --> 01:51:45,779
probes came in so then there's like

2318
01:51:43,109 --> 01:51:47,789
insertion and we like use those spots

2319
01:51:45,779 --> 01:51:49,859
that we pulled stuff out of and we stick

2320
01:51:47,789 --> 01:51:52,199
new light probes in there so we have a

2321
01:51:49,859 --> 01:51:56,309
light probe table that is basically just

2322
01:51:52,199 --> 01:51:59,279
a way of maintaining a small number of

2323
01:51:56,310 --> 01:52:01,500
light probes that'll actually go into

2324
01:51:59,279 --> 01:52:04,170
the lighting system and that can be

2325
01:52:01,500 --> 01:52:08,039
indexed by the hardware as necessary

2326
01:52:04,170 --> 01:52:12,380
right and what we're doing with this is

2327
01:52:08,039 --> 01:52:20,369
we're storing the light so we can have

2328
01:52:12,380 --> 01:52:27,600
what's called hysteresis I'm not gonna

2329
01:52:20,369 --> 01:52:29,869
try to draw that with the new Milton you

2330
01:52:27,600 --> 01:52:29,870
spell that

2331
01:52:30,189 --> 01:52:35,649
hysteresis there we go um so we're

2332
01:52:33,939 --> 01:52:38,619
trying to get some hysteresis in there

2333
01:52:35,649 --> 01:52:40,989
which is basically to say that look our

2334
01:52:38,619 --> 01:52:42,220
lighting is gonna be very noisy we know

2335
01:52:40,989 --> 01:52:44,649
it's gonna be noisy because we can't

2336
01:52:42,220 --> 01:52:46,720
afford to really do like computation we

2337
01:52:44,649 --> 01:52:49,089
are not on like an RT X 2080 or

2338
01:52:46,720 --> 01:52:50,770
something here and even if we were most

2339
01:52:49,090 --> 01:52:53,800
people who do that still use hysteresis

2340
01:52:50,770 --> 01:52:56,140
so we kind of need to smooth these

2341
01:52:53,800 --> 01:52:57,789
values over time so what we're gonna do

2342
01:52:56,140 --> 01:53:00,100
is we're going to take this grid this

2343
01:52:57,789 --> 01:53:07,529
array of light probe table and we're

2344
01:53:00,100 --> 01:53:07,530
keeping it so this is like persistent

2345
01:53:08,279 --> 01:53:17,289
frame-to-frame right so we want this to

2346
01:53:16,300 --> 01:53:20,680
persist frame-to-frame

2347
01:53:17,289 --> 01:53:22,720
and so what we do is you'll see that we

2348
01:53:20,680 --> 01:53:24,579
get up here we're keeping this so it has

2349
01:53:22,720 --> 01:53:26,770
a value from the previous frame and

2350
01:53:24,579 --> 01:53:31,449
that's what the lighting was at each

2351
01:53:26,770 --> 01:53:33,100
probe on on last frame right so then

2352
01:53:31,449 --> 01:53:35,769
what we do is we say okay we assign

2353
01:53:33,100 --> 01:53:37,450
probe indices so people who need a mixes

2354
01:53:35,770 --> 01:53:38,740
get them people who are old and have

2355
01:53:37,449 --> 01:53:41,260
fallen out of the view frustum or

2356
01:53:38,739 --> 01:53:44,920
whatever get their indices removed then

2357
01:53:41,260 --> 01:53:50,230
we do step three right

2358
01:53:44,920 --> 01:53:53,529
which is like light injection and all

2359
01:53:50,229 --> 01:54:00,250
this is is if we have actual light

2360
01:53:53,529 --> 01:54:03,789
sources actual light sources those get

2361
01:54:00,250 --> 01:54:06,760
you know rendered directly in so we need

2362
01:54:03,789 --> 01:54:08,529
and we haven't done this yet for the new

2363
01:54:06,760 --> 01:54:11,050
system we did it for the old system

2364
01:54:08,529 --> 01:54:16,840
haven't done it for the new system so

2365
01:54:11,050 --> 01:54:22,750
actual light sources get specified by

2366
01:54:16,840 --> 01:54:24,730
entity output right so somewhere we're

2367
01:54:22,750 --> 01:54:26,470
gonna have to like you know we've got

2368
01:54:24,729 --> 01:54:29,079
the the thing that could say push light

2369
01:54:26,470 --> 01:54:30,909
that push light records the fact that

2370
01:54:29,079 --> 01:54:33,550
someone's actually emitting light in an

2371
01:54:30,909 --> 01:54:37,809
area not just bouncing it around right

2372
01:54:33,550 --> 01:54:39,039
we don't do this yet so we were doing it

2373
01:54:37,810 --> 01:54:41,050
with the old system and the new system

2374
01:54:39,039 --> 01:54:42,880
we haven't done it yet and we'll get to

2375
01:54:41,050 --> 01:54:43,279
that at some point once everything else

2376
01:54:42,880 --> 01:54:47,270
is we're

2377
01:54:43,279 --> 01:54:53,649
with debug lights and so on okay then

2378
01:54:47,270 --> 01:54:53,650
step four is you know light transmission

2379
01:54:54,130 --> 01:54:59,750
and so what happens here is we say all

2380
01:54:58,130 --> 01:55:01,670
right let's take all the light probes

2381
01:54:59,750 --> 01:55:03,889
that are actually in the view so we've

2382
01:55:01,670 --> 01:55:06,920
got you know some light probes here

2383
01:55:03,889 --> 01:55:09,170
let's just see you know cast rays out

2384
01:55:06,920 --> 01:55:12,349
from these light probes and see what

2385
01:55:09,170 --> 01:55:15,940
they hit some those values up to produce

2386
01:55:12,349 --> 01:55:22,969
what's basically like a you know new

2387
01:55:15,939 --> 01:55:26,558
light probe set right and then we smooth

2388
01:55:22,969 --> 01:55:31,520
it right so here we say you know

2389
01:55:26,559 --> 01:55:36,380
smoothing this is the like word I can't

2390
01:55:31,520 --> 01:55:38,960
spell hysteresis right so what we do is

2391
01:55:36,380 --> 01:55:41,840
we take the new light that we have and

2392
01:55:38,960 --> 01:55:45,319
we multiply that right times some small

2393
01:55:41,840 --> 01:55:49,279
coefficient like 0.05 or something right

2394
01:55:45,319 --> 01:55:51,979
and we add it to almost entirely the old

2395
01:55:49,279 --> 01:55:56,090
one so this is the old one that we had

2396
01:55:51,979 --> 01:55:58,968
way back here right and what that does

2397
01:55:56,090 --> 01:56:03,380
is that allows us to average over you

2398
01:55:58,969 --> 01:56:05,270
know 100 frames or something let's say

2399
01:56:03,380 --> 01:56:07,880
we made it like 60 frames but it's any

2400
01:56:05,270 --> 01:56:09,860
number we choose so one second worth of

2401
01:56:07,880 --> 01:56:11,170
gameplay and basically what we're doing

2402
01:56:09,859 --> 01:56:14,988
there is we're trading off

2403
01:56:11,170 --> 01:56:17,389
responsiveness so lights will lag in

2404
01:56:14,988 --> 01:56:20,328
their effect on the world by about half

2405
01:56:17,389 --> 01:56:22,520
a second on average because half of it

2406
01:56:20,328 --> 01:56:24,649
will take a full second to respond

2407
01:56:22,520 --> 01:56:26,480
completely to the light so the time the

2408
01:56:24,649 --> 01:56:27,948
user actually sees like a prominent

2409
01:56:26,479 --> 01:56:30,319
effect from the light would be like half

2410
01:56:27,948 --> 01:56:33,198
a second or something in so you're

2411
01:56:30,319 --> 01:56:36,198
trading that for noise because if we

2412
01:56:33,198 --> 01:56:37,729
just drew the light directly whatever we

2413
01:56:36,198 --> 01:56:38,448
calculate on that frame it would be very

2414
01:56:37,729 --> 01:56:41,388
flickering

2415
01:56:38,448 --> 01:56:44,149
because we're not casting enough rays to

2416
01:56:41,389 --> 01:56:46,609
actually capture the complete lighting

2417
01:56:44,149 --> 01:56:48,288
environment so what we do is we take the

2418
01:56:46,609 --> 01:56:51,019
average over several frames so that we

2419
01:56:48,288 --> 01:56:52,759
actually have way more light rays that

2420
01:56:51,020 --> 01:56:53,989
we're actually using on any given frame

2421
01:56:52,760 --> 01:56:55,020
because we're using the ones from last

2422
01:56:53,988 --> 01:56:56,399
frame and the frame before that

2423
01:56:55,020 --> 01:56:58,920
the frame for that a frame from that and

2424
01:56:56,399 --> 01:57:03,059
frame from that right and that's the

2425
01:56:58,920 --> 01:57:05,340
entire light pipeline really after this

2426
01:57:03,060 --> 01:57:08,880
all happens we do have the part that

2427
01:57:05,340 --> 01:57:11,489
happens on the GPU right and what we're

2428
01:57:08,880 --> 01:57:15,980
doing there is the part you just saw we

2429
01:57:11,489 --> 01:57:15,979
have some voxels oops

2430
01:57:16,069 --> 01:57:24,630
and what we're imagining and don't do

2431
01:57:20,310 --> 01:57:33,690
yet is right here there is a voxel

2432
01:57:24,630 --> 01:57:34,980
ization step of the light probes and the

2433
01:57:33,689 --> 01:57:36,599
reason that we don't really know exactly

2434
01:57:34,979 --> 01:57:38,039
what this looks like is because right

2435
01:57:36,600 --> 01:57:40,320
now we're not sure if it's the right way

2436
01:57:38,039 --> 01:57:41,729
to sample this is why I was saying well

2437
01:57:40,319 --> 01:57:43,889
I'm not sure if this looks good enough

2438
01:57:41,729 --> 01:57:45,750
right but what we would say is well we

2439
01:57:43,890 --> 01:57:48,630
have this array of light probes we will

2440
01:57:45,750 --> 01:57:51,600
voxel I as the light probes we will send

2441
01:57:48,630 --> 01:57:59,510
the voxels down to the GPU and then the

2442
01:57:51,600 --> 01:57:59,510
pixel shader right we'll sample them

2443
01:57:59,930 --> 01:58:07,440
right so we sample the voxels and it's

2444
01:58:04,489 --> 01:58:09,960
it's up to us how we choose to encode

2445
01:58:07,439 --> 01:58:12,239
them right now that wheat we tried doing

2446
01:58:09,960 --> 01:58:14,699
is six times the voxels where we put

2447
01:58:12,239 --> 01:58:16,889
each direction of each probe into a

2448
01:58:14,699 --> 01:58:19,619
separate voxel so we basically would say

2449
01:58:16,890 --> 01:58:21,600
like okay we voxel eyes the directions

2450
01:58:19,619 --> 01:58:24,300
of of lighting in the probe into one

2451
01:58:21,600 --> 01:58:27,420
voxel per direction so X have six voxels

2452
01:58:24,300 --> 01:58:29,579
we try linearly sample each voxel to get

2453
01:58:27,420 --> 01:58:33,800
the average incoming light from that

2454
01:58:29,579 --> 01:58:33,800
direction right and that's what we use

2455
01:59:00,069 --> 01:59:04,130
so-called a view says responding to why

2456
01:59:02,539 --> 01:59:05,300
there's not two cosine terms two things

2457
01:59:04,130 --> 01:59:06,859
the beardy f is defined to the

2458
01:59:05,300 --> 01:59:08,180
derivative of the outgoing radians

2459
01:59:06,859 --> 01:59:10,039
respect to the Iranians so whatever

2460
01:59:08,180 --> 01:59:11,630
extra terms you think you need are

2461
01:59:10,039 --> 01:59:14,569
already folded into the brdf okay so

2462
01:59:11,630 --> 01:59:16,579
basically if we were to use an actual

2463
01:59:14,569 --> 01:59:18,529
lighting brdf it's already got that

2464
01:59:16,579 --> 01:59:20,989
accounted so that's fine and that makes

2465
01:59:18,529 --> 01:59:22,880
sense also remember that the next bounce

2466
01:59:20,989 --> 01:59:25,219
of light will have another cosine so the

2467
01:59:22,880 --> 01:59:28,430
other cosine is accounted for does that

2468
01:59:25,220 --> 01:59:31,010
clear it up or am i misunderstanding so

2469
01:59:28,430 --> 01:59:33,770
it doesn't clear up for the eye because

2470
01:59:31,010 --> 01:59:38,630
the eye doesn't have that cosine term in

2471
01:59:33,770 --> 01:59:42,680
there so I guess I'm not sure about that

2472
01:59:38,630 --> 01:59:44,659
last part but yeah if the brdf already

2473
01:59:42,680 --> 01:59:45,980
has whatever a random transmission is

2474
01:59:44,659 --> 01:59:47,180
going to happen baked in then sure

2475
01:59:45,979 --> 01:59:48,649
that's fine but we're not actually doing

2476
01:59:47,180 --> 01:59:50,720
that here so I'm not sure whether that

2477
01:59:48,649 --> 01:59:55,489
accounts for when you're not using a

2478
01:59:50,720 --> 01:59:56,990
brdf right hard to say and zero L PBM

2479
01:59:55,489 --> 01:59:58,099
says regarding Milton aren't using an

2480
01:59:56,989 --> 01:59:59,869
unofficial version that as the grid

2481
01:59:58,100 --> 02:00:02,360
chilla patched in if so made me switch

2482
01:59:59,869 --> 02:00:03,890
back to the visual version yes I am

2483
02:00:02,359 --> 02:00:05,689
using the unofficial version but

2484
02:00:03,890 --> 02:00:07,850
according to the person who made this

2485
02:00:05,689 --> 02:00:10,069
unofficial version the official version

2486
02:00:07,850 --> 02:00:10,430
also has it the reason we didn't have it

2487
02:00:10,069 --> 02:00:12,500
before

2488
02:00:10,430 --> 02:00:14,480
was cuz I was using an old official

2489
02:00:12,500 --> 02:00:16,729
version so apparently what happened is

2490
02:00:14,479 --> 02:00:18,529
somewhere along the line between the old

2491
02:00:16,729 --> 02:00:21,609
version we were using and the newest

2492
02:00:18,529 --> 02:00:24,469
official version they broke it

2493
02:00:21,609 --> 02:00:27,079
supposedly so I was hoping someone would

2494
02:00:24,470 --> 02:00:28,490
fix the official version to not be

2495
02:00:27,079 --> 02:00:30,769
broken anymore and then we could have

2496
02:00:28,489 --> 02:00:33,819
the grid tool and reasonable sampling if

2497
02:00:30,770 --> 02:00:36,050
not I can try to roll back to whenever

2498
02:00:33,819 --> 02:00:38,529
the Milton is that doesn't have this

2499
02:00:36,050 --> 02:00:38,529
problem

2500
02:01:23,878 --> 02:01:29,279
all right looks like we're all done I'm

2501
02:01:26,439 --> 02:01:29,280
gonna go ahead and wrap it up

2502
02:01:54,199 --> 02:01:58,529
okay thank you in for joining me for

2503
02:01:57,149 --> 02:02:00,149
this soda handmade hero spit pleasure

2504
02:01:58,529 --> 02:02:01,199
coating with you as always if you would

2505
02:02:00,149 --> 02:02:02,399
like to follow along the series at home

2506
02:02:01,199 --> 02:02:04,470
you can raise peer to the game at

2507
02:02:02,399 --> 02:02:05,609
handmade hero org and it comes with a

2508
02:02:04,470 --> 02:02:07,500
source code so if you'd like to play

2509
02:02:05,609 --> 02:02:11,670
around with it you can do your own

2510
02:02:07,500 --> 02:02:13,439
experimentation at home also now might

2511
02:02:11,670 --> 02:02:15,569
be a good time to do said playing around

2512
02:02:13,439 --> 02:02:17,250
because you have all day today and

2513
02:02:15,569 --> 02:02:19,139
possibly quite some time if I choose to

2514
02:02:17,250 --> 02:02:22,020
work on the light distribution function

2515
02:02:19,140 --> 02:02:23,880
stuff tomorrow to figure out what might

2516
02:02:22,020 --> 02:02:26,280
be some better ways of doing light

2517
02:02:23,880 --> 02:02:28,619
probes sampling that don't have the

2518
02:02:26,279 --> 02:02:31,170
artifacts that we were seeing with our

2519
02:02:28,619 --> 02:02:32,430
trilinear filtering there that would be

2520
02:02:31,170 --> 02:02:34,649
a fun thing to play around it's a very

2521
02:02:32,430 --> 02:02:35,789
well constrained problem you can think

2522
02:02:34,649 --> 02:02:36,989
about it you can play around with how

2523
02:02:35,789 --> 02:02:38,880
we're doing hammer here and see if you

2524
02:02:36,989 --> 02:02:41,130
can find a better way to do it there's

2525
02:02:38,880 --> 02:02:42,810
also lots of research in this topic you

2526
02:02:41,130 --> 02:02:44,310
can go look up papers on light probes

2527
02:02:42,810 --> 02:02:47,670
and how they work and how people use

2528
02:02:44,310 --> 02:02:50,250
them and so maybe get some ideas of how

2529
02:02:47,670 --> 02:02:52,140
to implement something closer to a full

2530
02:02:50,250 --> 02:02:53,340
fledged thing I don't know but point

2531
02:02:52,140 --> 02:02:54,810
being is a lot of work you could do

2532
02:02:53,340 --> 02:02:55,770
there so it might be a good time play

2533
02:02:54,810 --> 02:02:57,810
around with that if you're looking for

2534
02:02:55,770 --> 02:02:59,160
something to do for practice that's

2535
02:02:57,810 --> 02:03:01,710
about it for today I'll be back to her

2536
02:02:59,159 --> 02:03:03,210
tomorrow same time same place for some

2537
02:03:01,710 --> 02:03:05,250
more work on the lighting it's looking

2538
02:03:03,210 --> 02:03:06,989
like we're getting there I like where

2539
02:03:05,250 --> 02:03:08,520
we're going with it but you know there's

2540
02:03:06,989 --> 02:03:09,779
still a lot of work left to do so we're

2541
02:03:08,520 --> 02:03:12,990
going to be doing that work until we get

2542
02:03:09,779 --> 02:03:14,159
it just right that's it for today hope

2543
02:03:12,989 --> 02:03:16,170
see you back here tomorrow till then

2544
02:03:14,159 --> 02:03:17,849
have fun programming everyone and I will

2545
02:03:16,170 --> 02:03:19,940
see you on the Internet take it easy

2546
02:03:17,850 --> 02:03:19,940
everybody

