1
00:00:00,140 --> 00:00:05,068
okay hello everyone and welcome to

2
00:00:03,448 --> 00:00:08,250
handmade Hero show recode complete-game

3
00:00:05,068 --> 00:00:12,359
live on twitch new libraries no engines

4
00:00:08,250 --> 00:00:14,969
just us and good old-fashioned C code

5
00:00:12,359 --> 00:00:19,528
and a little bit of C++ code now and

6
00:00:14,968 --> 00:00:23,789
again as well as the need arises we are

7
00:00:19,528 --> 00:00:27,868
here on day one one one for those of you

8
00:00:23,789 --> 00:00:30,330
who are you know adept at binary you

9
00:00:27,868 --> 00:00:34,109
will note that is seven right or

10
00:00:30,329 --> 00:00:36,030
whatever it is I hope you enjoy that

11
00:00:34,109 --> 00:00:38,729
that little translation but we are not

12
00:00:36,030 --> 00:00:41,850
in binary here this is actually day 111

13
00:00:38,729 --> 00:00:44,640
and so if you wanted to follow along at

14
00:00:41,850 --> 00:00:47,460
home and you pre-ordered the game on

15
00:00:44,640 --> 00:00:50,250
handmade hero org you should unpack day

16
00:00:47,460 --> 00:00:52,590
110 because that is the source code that

17
00:00:50,250 --> 00:00:55,619
I am starting with now before we

18
00:00:52,590 --> 00:00:57,180
actually do anything today we had thing

19
00:00:55,619 --> 00:00:59,939
in the freestream where me blow was was

20
00:00:57,179 --> 00:01:01,909
asking us to fix something in the code

21
00:00:59,939 --> 00:01:04,739
for so he could use it in one of his

22
00:01:01,909 --> 00:01:05,640
ports and so we will go ahead and do

23
00:01:04,739 --> 00:01:08,368
that right now

24
00:01:05,640 --> 00:01:10,439
essentially what happened was when we

25
00:01:08,368 --> 00:01:13,438
introduced these here I didn't give

26
00:01:10,438 --> 00:01:17,459
unique names to these values like

27
00:01:13,438 --> 00:01:19,019
ignored zero here they're not used but

28
00:01:17,459 --> 00:01:20,819
we need to give them unique names so

29
00:01:19,019 --> 00:01:23,158
that they don't conflict with the other

30
00:01:20,819 --> 00:01:25,019
ones up here and if we do that I think

31
00:01:23,159 --> 00:01:27,240
it'll allow it to go through his

32
00:01:25,019 --> 00:01:29,280
compiler properly I'm not a hundred

33
00:01:27,239 --> 00:01:31,109
percent certain why our compiler didn't

34
00:01:29,280 --> 00:01:32,849
complain about it because technically

35
00:01:31,109 --> 00:01:34,530
although these two would have shadowed

36
00:01:32,849 --> 00:01:36,419
each other the this one should have

37
00:01:34,530 --> 00:01:38,219
complained because when you used ignored

38
00:01:36,420 --> 00:01:39,930
zero I guess it wouldn't know which one

39
00:01:38,219 --> 00:01:42,030
it was but I guess the Microsoft

40
00:01:39,930 --> 00:01:45,030
compiler may be only complains if you

41
00:01:42,030 --> 00:01:47,430
actually use them that it doesn't know

42
00:01:45,030 --> 00:01:49,649
which one you're referring to and I

43
00:01:47,430 --> 00:01:53,600
guess that doesn't happen on like maybe

44
00:01:49,649 --> 00:01:53,599
LLVM or something goes wait a minute I

45
00:01:54,228 --> 00:01:57,629
don't know what's going on here so again

46
00:01:56,250 --> 00:02:00,899
that doesn't really affect anything for

47
00:01:57,629 --> 00:02:02,399
us but it's just something to do to make

48
00:02:00,899 --> 00:02:03,840
it a little bit easier for anyone who's

49
00:02:02,399 --> 00:02:05,280
porting who's running on Linux or

50
00:02:03,840 --> 00:02:07,680
something like that just trying to keep

51
00:02:05,280 --> 00:02:10,560
it easier for them to maintain the same

52
00:02:07,680 --> 00:02:13,260
codebase so there you go me bloat should

53
00:02:10,560 --> 00:02:16,259
be all good now let's go ahead

54
00:02:13,259 --> 00:02:20,009
and and see what about what we're doing

55
00:02:16,259 --> 00:02:24,649
I believe what I said that we were going

56
00:02:20,009 --> 00:02:27,810
to do today was to take a look at our

57
00:02:24,650 --> 00:02:31,349
ground chunk stuff I also wanted to

58
00:02:27,810 --> 00:02:33,180
before we start I wanted to go ahead and

59
00:02:31,348 --> 00:02:35,399
make this debug camera even be a little

60
00:02:33,180 --> 00:02:37,409
further out because I'd like to be able

61
00:02:35,400 --> 00:02:40,289
to see the entirety of the pink region

62
00:02:37,408 --> 00:02:42,389
as well there so let me go ahead and and

63
00:02:40,289 --> 00:02:44,188
go into render group if you remember

64
00:02:42,389 --> 00:02:46,500
yesterday we introduced the concept that

65
00:02:44,188 --> 00:02:48,030
we could have it you know one camera

66
00:02:46,500 --> 00:02:49,530
that's what the game thinks the camera

67
00:02:48,030 --> 00:02:51,359
is and then another camera that's what

68
00:02:49,530 --> 00:02:53,789
we actually render from so that if we

69
00:02:51,359 --> 00:02:56,849
want to we can see sort of a bird's eye

70
00:02:53,789 --> 00:02:59,400
view of what the game is doing with all

71
00:02:56,848 --> 00:03:01,199
of like you know with with everything

72
00:02:59,400 --> 00:03:03,239
that that implies right

73
00:03:01,199 --> 00:03:05,399
and so if you you know if you take a

74
00:03:03,239 --> 00:03:07,650
look at at this scene right the actual

75
00:03:05,400 --> 00:03:10,230
screen is the yellow area that's what

76
00:03:07,650 --> 00:03:12,810
would actually have been rendered if we

77
00:03:10,229 --> 00:03:14,848
were using the regular camera but then

78
00:03:12,810 --> 00:03:15,989
you can kind of see that there's you

79
00:03:14,848 --> 00:03:18,268
know you can kind of see what else is

80
00:03:15,989 --> 00:03:21,750
going on like this stuff just got paged

81
00:03:18,269 --> 00:03:24,209
in because it came within the purple

82
00:03:21,750 --> 00:03:26,459
region and so on so what I want to do

83
00:03:24,209 --> 00:03:28,079
here is I want to just kind of take a

84
00:03:26,459 --> 00:03:31,229
quick look and I wanted to see about

85
00:03:28,079 --> 00:03:32,699
that whole paging situation to see if

86
00:03:31,229 --> 00:03:34,138
things are actually paging in and out

87
00:03:32,699 --> 00:03:39,239
roughly where we we think they should be

88
00:03:34,139 --> 00:03:41,939
and to be honest it looks ok you know I

89
00:03:39,239 --> 00:03:43,829
guess we can when we when we go in to do

90
00:03:41,939 --> 00:03:45,539
some finally work on some of that stuff

91
00:03:43,829 --> 00:03:47,400
we can double check to make sure that it

92
00:03:45,539 --> 00:03:49,469
is actually correct but it actually

93
00:03:47,400 --> 00:03:51,629
looks pretty good it looks like our sim

94
00:03:49,469 --> 00:03:53,939
region is actually paging things in

95
00:03:51,628 --> 00:03:56,219
where it needs to be and stuff like that

96
00:03:53,939 --> 00:03:57,598
and so I'd say that's that's you know it

97
00:03:56,219 --> 00:03:59,430
doesn't really were an immediate

98
00:03:57,598 --> 00:04:00,929
attention but I do want to kind of check

99
00:03:59,430 --> 00:04:06,480
some of that stuff out perhaps a little

100
00:04:00,930 --> 00:04:07,799
bit later so anyway yeah it's kind of

101
00:04:06,479 --> 00:04:09,810
nice to be able to see all that stuff

102
00:04:07,799 --> 00:04:12,479
working properly and you know what we

103
00:04:09,810 --> 00:04:14,598
could also probably up our tree count we

104
00:04:12,479 --> 00:04:19,919
reduce the number of trees in the world

105
00:04:14,598 --> 00:04:21,358
just to make it so that it was gonna be

106
00:04:19,918 --> 00:04:23,098
less stress on the renderer but since

107
00:04:21,358 --> 00:04:24,239
we're getting pretty close to where

108
00:04:23,098 --> 00:04:26,310
we're gonna optimize that we can

109
00:04:24,240 --> 00:04:28,829
probably reintroduce it to make it

110
00:04:26,310 --> 00:04:30,509
not that big of a not that big of a

111
00:04:28,829 --> 00:04:33,539
problem so let me go ahead and change

112
00:04:30,509 --> 00:04:35,670
that that tree part there because we

113
00:04:33,540 --> 00:04:39,410
want to start making the game very slow

114
00:04:35,670 --> 00:04:41,699
so that we feel the so that we kind of

115
00:04:39,410 --> 00:04:43,290
feel good about ourselves when we go to

116
00:04:41,699 --> 00:04:46,129
optimize that we're like look at what a

117
00:04:43,290 --> 00:04:48,510
good job we did so that's you know

118
00:04:46,129 --> 00:04:50,490
that's always fun anyway

119
00:04:48,509 --> 00:04:52,620
let's go ahead and take a look at the

120
00:04:50,490 --> 00:04:53,910
place where we had had dropped out some

121
00:04:52,620 --> 00:04:58,410
of the trees you can see we kind of did

122
00:04:53,910 --> 00:05:02,670
a weird sort of thing here so let's just

123
00:04:58,410 --> 00:05:03,660
get rid of that see ABB's tiles e oops

124
00:05:02,670 --> 00:05:10,140
that's the stairwell

125
00:05:03,660 --> 00:05:13,710
I bet it's this one why if it should be

126
00:05:10,139 --> 00:05:19,229
door it should be door why does it do if

127
00:05:13,709 --> 00:05:21,299
should be door and then do tile mod X

128
00:05:19,230 --> 00:05:27,030
mod - I know shouldn't it be should be

129
00:05:21,300 --> 00:05:31,230
wall that's that's confusing I don't

130
00:05:27,029 --> 00:05:33,929
understand I understand that very odd

131
00:05:31,230 --> 00:05:35,939
but anyway I think this is just nonsense

132
00:05:33,930 --> 00:05:40,709
in our world creation code which you

133
00:05:35,939 --> 00:05:44,009
know is just there to kind of be be

134
00:05:40,709 --> 00:05:46,228
weird all right so anyway there's all

135
00:05:44,009 --> 00:05:48,000
the there's all the trees in a ring like

136
00:05:46,228 --> 00:05:51,120
they should be again and if we go up now

137
00:05:48,000 --> 00:05:52,470
we can kind of see it now what I'd like

138
00:05:51,120 --> 00:05:54,319
to do today like I said it's kind of

139
00:05:52,470 --> 00:05:56,910
take a look at those ground chunks

140
00:05:54,319 --> 00:05:58,589
because well we got a couple things we

141
00:05:56,910 --> 00:06:00,570
might want to do one is to look at the

142
00:05:58,589 --> 00:06:03,060
ground chunks what another is to look at

143
00:06:00,569 --> 00:06:06,300
the the collision stuff but basically

144
00:06:03,060 --> 00:06:10,019
we've got a Z situation that we still

145
00:06:06,300 --> 00:06:13,500
haven't resolved which is that we we

146
00:06:10,019 --> 00:06:15,959
both we said we wanted to move to Z

147
00:06:13,500 --> 00:06:17,550
layers and we sort of did a little bit

148
00:06:15,959 --> 00:06:20,099
of work of moving to Z layers like we do

149
00:06:17,550 --> 00:06:21,960
fading in and fading out based on the Z

150
00:06:20,100 --> 00:06:24,000
distance and and other things like this

151
00:06:21,959 --> 00:06:25,829
but at the moment we don't really

152
00:06:24,000 --> 00:06:29,069
properly handle I guess maybe I should

153
00:06:25,829 --> 00:06:32,310
zoom us back in here let's go ahead and

154
00:06:29,069 --> 00:06:36,968
let's go ahead and use the regular size

155
00:06:32,310 --> 00:06:40,629
of things so if I go ahead and and

156
00:06:36,968 --> 00:06:43,238
actually walk up here right oops here we

157
00:06:40,629 --> 00:06:44,468
go you can kind of see that we've got a

158
00:06:43,238 --> 00:06:47,588
bunch of things that we're not really

159
00:06:44,468 --> 00:06:49,449
handling yet for starters we've got a

160
00:06:47,588 --> 00:06:51,519
problem where we don't have any ground

161
00:06:49,449 --> 00:06:53,978
right we did our we did that ground

162
00:06:51,519 --> 00:06:55,629
chunk work so we actually have a system

163
00:06:53,978 --> 00:06:58,508
that can compose ground chunks for us

164
00:06:55,629 --> 00:07:00,639
but we don't actually have any way of

165
00:06:58,509 --> 00:07:02,439
using them right now because when we

166
00:07:00,639 --> 00:07:04,259
actually did the ground chunk the system

167
00:07:02,439 --> 00:07:07,778
that actually calls the ground chunk

168
00:07:04,259 --> 00:07:10,269
Composer it only ever actually worked on

169
00:07:07,778 --> 00:07:13,149
one single plane and so if we have

170
00:07:10,269 --> 00:07:14,889
multiple depth flames like this we need

171
00:07:13,149 --> 00:07:17,110
to actually start thinking about that

172
00:07:14,889 --> 00:07:19,449
and introducing something that will

173
00:07:17,110 --> 00:07:20,949
actually work when used in that

174
00:07:19,449 --> 00:07:23,829
environment that's if we set ourselves

175
00:07:20,949 --> 00:07:25,718
up to do that basically it was it's not

176
00:07:23,829 --> 00:07:28,059
like we didn't plan for it but we never

177
00:07:25,718 --> 00:07:29,738
actually implemented it and so we want

178
00:07:28,059 --> 00:07:30,909
to do is we want to go do that and I

179
00:07:29,738 --> 00:07:32,709
think that's probably the first thing

180
00:07:30,908 --> 00:07:34,808
that we'll tackle today the other thing

181
00:07:32,709 --> 00:07:37,749
that we want faculty day is we don't

182
00:07:34,809 --> 00:07:38,559
really process the ground properly I'm

183
00:07:37,749 --> 00:07:39,819
sorry I shouldn't say the other thing

184
00:07:38,559 --> 00:07:41,469
around tackle today the other thing we

185
00:07:39,819 --> 00:07:43,569
want to tackle if we have time but you

186
00:07:41,468 --> 00:07:45,879
know maybe we won't so it'll actually go

187
00:07:43,569 --> 00:07:47,769
to next week the other thing is we need

188
00:07:45,879 --> 00:07:50,229
to start actually thinking of these Z

189
00:07:47,769 --> 00:07:52,598
layers as actual layers because right

190
00:07:50,228 --> 00:07:53,918
now we're it's still very ad-hoc we sort

191
00:07:52,598 --> 00:07:56,139
of said we were gonna have this concept

192
00:07:53,918 --> 00:07:57,968
of layers and we now need the renderer

193
00:07:56,139 --> 00:07:59,228
to kind of understand those layers as

194
00:07:57,968 --> 00:08:00,488
well because it's doing things like

195
00:07:59,228 --> 00:08:04,718
fading in them in and out and stuff like

196
00:08:00,488 --> 00:08:06,698
that but we never actually and oh and

197
00:08:04,718 --> 00:08:08,199
we've got our light mapping system and

198
00:08:06,699 --> 00:08:10,329
so on which also wants to think of

199
00:08:08,199 --> 00:08:12,369
things in terms of layers but we really

200
00:08:10,329 --> 00:08:15,129
just don't have any conception of those

201
00:08:12,369 --> 00:08:17,799
layers in the actual code itself outside

202
00:08:15,129 --> 00:08:19,179
of the rendering system and so we need

203
00:08:17,798 --> 00:08:22,649
to do is start actually thinking about

204
00:08:19,178 --> 00:08:24,938
that more specifically so that we can

205
00:08:22,649 --> 00:08:26,709
have you know have data in the right

206
00:08:24,939 --> 00:08:28,329
place and understand it the correct way

207
00:08:26,709 --> 00:08:29,860
in the code so that when we need to

208
00:08:28,329 --> 00:08:32,408
start talking about things like you know

209
00:08:29,860 --> 00:08:34,418
this is this layer that's that layer we

210
00:08:32,408 --> 00:08:37,328
actually have some idea of what entities

211
00:08:34,418 --> 00:08:38,828
that actually entails this is kind of

212
00:08:37,328 --> 00:08:39,968
fun I like walking around this world

213
00:08:38,828 --> 00:08:43,778
already and going up and down the

214
00:08:39,969 --> 00:08:46,629
stairwells alright anyway that's

215
00:08:43,778 --> 00:08:49,000
basically what we're doing as soon as I

216
00:08:46,629 --> 00:08:49,860
stop as soon as I can stop myself from

217
00:08:49,000 --> 00:08:55,470
walking your hand

218
00:08:49,860 --> 00:08:56,850
uh yeah it's it's one of those things

219
00:08:55,470 --> 00:08:58,500
what can you do when you're a programmer

220
00:08:56,850 --> 00:08:59,879
if you like programming you end up

221
00:08:58,500 --> 00:09:01,769
liking when things are sort of working

222
00:08:59,879 --> 00:09:02,789
when things start working all right but

223
00:09:01,769 --> 00:09:04,169
I really want to see some ground in

224
00:09:02,789 --> 00:09:06,569
there so that's my motivation to stop

225
00:09:04,169 --> 00:09:09,479
walking around here and actually go fix

226
00:09:06,570 --> 00:09:12,120
that so let's talk about ground for a

227
00:09:09,480 --> 00:09:14,759
second alright so we already did a bunch

228
00:09:12,120 --> 00:09:16,470
of stuff with the ground we've got you

229
00:09:14,759 --> 00:09:18,450
know a system here that does the ground

230
00:09:16,470 --> 00:09:22,230
compositing right we've got fill ground

231
00:09:18,450 --> 00:09:25,379
chunk that's here but the problem with

232
00:09:22,230 --> 00:09:27,659
that is we have not actually done any

233
00:09:25,379 --> 00:09:29,159
thinking about how to like fill those

234
00:09:27,659 --> 00:09:31,708
and when to fill those in that sort of

235
00:09:29,159 --> 00:09:34,110
thing right we saw a system that would

236
00:09:31,708 --> 00:09:36,569
work just for one plane but we didn't go

237
00:09:34,110 --> 00:09:39,389
any further than that so we've got a you

238
00:09:36,570 --> 00:09:42,570
know we've got our ground chunks here

239
00:09:39,389 --> 00:09:45,028
ground buffers right like so and those

240
00:09:42,570 --> 00:09:48,180
ground buffers they know where they are

241
00:09:45,028 --> 00:09:50,189
in the world right so you can see that

242
00:09:48,179 --> 00:09:53,958
it actually you know each ground buffer

243
00:09:50,190 --> 00:09:57,029
knows where it is the only thing that

244
00:09:53,958 --> 00:09:58,528
that's preventing us from being able to

245
00:09:57,028 --> 00:10:00,899
use ground buffers at multiple Heights

246
00:09:58,528 --> 00:10:02,490
is our thing that actually goes and and

247
00:10:00,899 --> 00:10:04,350
says when we need to fill these ground

248
00:10:02,490 --> 00:10:06,959
buffers needs to start thinking about

249
00:10:04,350 --> 00:10:08,370
the heights properly right it needs to

250
00:10:06,958 --> 00:10:11,159
think about what the height should

251
00:10:08,370 --> 00:10:12,328
actually be and if I remember a text

252
00:10:11,159 --> 00:10:15,028
blog tell you the truth I don't actually

253
00:10:12,328 --> 00:10:18,689
remember but I don't actually think we

254
00:10:15,028 --> 00:10:21,778
really did much with those those Z

255
00:10:18,690 --> 00:10:22,589
chunks I guess well you know what no I

256
00:10:21,778 --> 00:10:26,610
take it back

257
00:10:22,589 --> 00:10:28,350
it looks like we actually did even do

258
00:10:26,610 --> 00:10:30,600
that part properly like we are actually

259
00:10:28,350 --> 00:10:34,579
technically looping over the Z chunks

260
00:10:30,600 --> 00:10:34,579
and then doing

261
00:10:35,179 --> 00:10:42,759
mmm Ground creation here looks like it

262
00:10:43,269 --> 00:10:49,519
well I stand corrected it looks like we

263
00:10:46,549 --> 00:10:51,699
are actually filling Z chunks there or

264
00:10:49,519 --> 00:10:54,500
at least we have we are set up to do so

265
00:10:51,700 --> 00:10:57,110
so the camera bounds in meters it looks

266
00:10:54,500 --> 00:11:01,399
like really the only thing we would have

267
00:10:57,110 --> 00:11:04,009
to do there is when we actually render

268
00:11:01,399 --> 00:11:06,049
them I suppose when we actually were

269
00:11:04,009 --> 00:11:09,559
rendering them I don't know that we I

270
00:11:06,049 --> 00:11:11,029
don't know that we actually yeah so I

271
00:11:09,559 --> 00:11:13,939
don't know that we actually did anything

272
00:11:11,029 --> 00:11:16,669
when we actually rendered them so let's

273
00:11:13,940 --> 00:11:19,810
take a look here with ground buffer to

274
00:11:16,669 --> 00:11:23,120
practice camera P bitmap with height

275
00:11:19,809 --> 00:11:24,739
gosh I don't know I'm gonna go ahead and

276
00:11:23,120 --> 00:11:27,169
re-enable this we've got some stuff that

277
00:11:24,740 --> 00:11:29,509
we're gonna have to fix but it's kind of

278
00:11:27,169 --> 00:11:31,549
weird like it looks like we did a lot

279
00:11:29,509 --> 00:11:34,929
more work than I thought we did almost

280
00:11:31,549 --> 00:11:37,490
everything here looks like it's actually

281
00:11:34,929 --> 00:11:39,469
somewhat correct actually I mean there's

282
00:11:37,490 --> 00:11:41,269
some maybe some things to fix that but

283
00:11:39,470 --> 00:11:42,710
that's very surprising all right well

284
00:11:41,269 --> 00:11:46,069
what are you gonna do it's correct it's

285
00:11:42,710 --> 00:11:48,830
correct all right so we had to do an

286
00:11:46,070 --> 00:11:51,200
alignment thing here where we were we

287
00:11:48,830 --> 00:11:52,430
now use alignment percentage not aligned

288
00:11:51,200 --> 00:11:53,960
right for the bitmaps and that's

289
00:11:52,429 --> 00:11:56,779
actually nice because that means we can

290
00:11:53,960 --> 00:11:58,820
actually fix this stuff to just be we

291
00:11:56,779 --> 00:12:00,289
know we always want to be halfway in

292
00:11:58,820 --> 00:12:02,180
both directions right that's just what

293
00:12:00,289 --> 00:12:03,740
we want we want to be centered so now we

294
00:12:02,179 --> 00:12:05,029
know that the align percentage is always

295
00:12:03,740 --> 00:12:07,159
the same thing we don't really have to

296
00:12:05,029 --> 00:12:08,449
compute it based on the bitmap distance

297
00:12:07,159 --> 00:12:10,789
or anything like that so that's pretty

298
00:12:08,450 --> 00:12:12,259
good we no longer have the Z offset

299
00:12:10,789 --> 00:12:16,699
thing in here that we were testing with

300
00:12:12,259 --> 00:12:19,789
the camera so that's all good and so

301
00:12:16,700 --> 00:12:21,530
yeah I don't know if there's anything

302
00:12:19,789 --> 00:12:24,049
else we need to do there we'll find out

303
00:12:21,529 --> 00:12:25,939
in a second push bitmap does not take

304
00:12:24,049 --> 00:12:28,789
three arguments that's probably true

305
00:12:25,940 --> 00:12:30,650
what we probably have to do here is now

306
00:12:28,789 --> 00:12:33,439
think about we've got that whole meters

307
00:12:30,649 --> 00:12:35,659
to pixel situation that we wanted to fix

308
00:12:33,440 --> 00:12:37,370
with these ground chunks again and so

309
00:12:35,659 --> 00:12:40,399
what we have to do is decide on a scale

310
00:12:37,370 --> 00:12:42,980
right I believe if I'm not mistaken just

311
00:12:40,399 --> 00:12:44,689
guiding on a scale like yeah so we have

312
00:12:42,980 --> 00:12:46,670
to have an actual scale for our ground

313
00:12:44,690 --> 00:12:49,130
chunks because right now we don't

314
00:12:46,669 --> 00:12:52,879
actually have one right

315
00:12:49,129 --> 00:12:55,070
what is that why is what's happening

316
00:12:52,879 --> 00:12:58,909
there oh wow

317
00:12:55,070 --> 00:13:03,550
okay so one other thing that we did not

318
00:12:58,909 --> 00:13:07,039
think about here is that our basis our

319
00:13:03,549 --> 00:13:09,589
basis for drawing the the sim bounds

320
00:13:07,039 --> 00:13:10,789
here was never cleared and this is

321
00:13:09,590 --> 00:13:13,820
something that we're gonna have to start

322
00:13:10,789 --> 00:13:15,259
looking at in the renderer so I want to

323
00:13:13,820 --> 00:13:15,620
show you what I saw a bit made me think

324
00:13:15,259 --> 00:13:17,509
of this

325
00:13:15,620 --> 00:13:20,870
so you notice now that as I move around

326
00:13:17,509 --> 00:13:23,330
I'm basically getting that's the screen

327
00:13:20,870 --> 00:13:25,129
rectangle right which is that the screen

328
00:13:23,330 --> 00:13:28,160
rect on which is that yellow thing is is

329
00:13:25,129 --> 00:13:29,870
switching where it is right and what I

330
00:13:28,159 --> 00:13:31,189
realized is that we have a system in

331
00:13:29,870 --> 00:13:32,750
here where we basically say what the

332
00:13:31,190 --> 00:13:35,510
basis is for all of them are rendering

333
00:13:32,750 --> 00:13:38,419
once it gets set in here it's sticky

334
00:13:35,509 --> 00:13:39,830
right so once we set the basis here that

335
00:13:38,419 --> 00:13:41,959
means that when we do stuff later on

336
00:13:39,830 --> 00:13:45,530
it's gonna that basis is going to

337
00:13:41,960 --> 00:13:47,540
actually be kept right and so what we

338
00:13:45,529 --> 00:13:49,159
need to do is we need to when we go to

339
00:13:47,539 --> 00:13:51,949
start doing our push rect outlines here

340
00:13:49,159 --> 00:13:55,189
we need to change the basis back to be

341
00:13:51,950 --> 00:13:58,190
whatever the default whatever the

342
00:13:55,190 --> 00:14:05,060
default actually is right which I assume

343
00:13:58,190 --> 00:14:09,320
is just all zeros right oops it's not

344
00:14:05,059 --> 00:14:13,299
what I wanted at all so basis I think we

345
00:14:09,320 --> 00:14:15,260
just got this here if I want no offset

346
00:14:13,299 --> 00:14:17,179
and that's something we want to clean up

347
00:14:15,259 --> 00:14:19,490
that's not a good API at the moment

348
00:14:17,179 --> 00:14:20,629
right that's just we're kind of again

349
00:14:19,490 --> 00:14:21,980
working through the render kind of

350
00:14:20,629 --> 00:14:23,840
slowly so but I just wanted something

351
00:14:21,980 --> 00:14:25,759
that would work so there we go now we've

352
00:14:23,840 --> 00:14:28,040
got that back in there but obviously my

353
00:14:25,759 --> 00:14:29,600
grand junction not showing up and we

354
00:14:28,039 --> 00:14:32,709
have a bunch of things that we didn't do

355
00:14:29,600 --> 00:14:36,230
yet with ground chunks as well which is

356
00:14:32,710 --> 00:14:38,629
first of all we have that the fill

357
00:14:36,230 --> 00:14:41,120
ground chunk routine we did not update

358
00:14:38,629 --> 00:14:45,080
this when we did a bunch of work on the

359
00:14:41,120 --> 00:14:47,029
on the rendering right we we didn't

360
00:14:45,080 --> 00:14:48,920
really do anything in here so I don't

361
00:14:47,029 --> 00:14:51,589
know what we need to fix we may have to

362
00:14:48,919 --> 00:14:55,519
fix some stuff in here to see what act

363
00:14:51,590 --> 00:14:59,210
has to get improved to work with the new

364
00:14:55,519 --> 00:15:01,039
bitmap rendering stuff and we're also

365
00:14:59,210 --> 00:15:02,150
gonna have to make sure that the way we

366
00:15:01,039 --> 00:15:03,469
actually draw the ground buffers

367
00:15:02,149 --> 00:15:06,139
still right and like I said the scale is

368
00:15:03,470 --> 00:15:08,450
wrong at the moment as well so I'm gonna

369
00:15:06,139 --> 00:15:11,240
start with something really simple I'm

370
00:15:08,450 --> 00:15:13,520
basically going to get rid of everything

371
00:15:11,240 --> 00:15:17,659
that's in here because I just want to

372
00:15:13,519 --> 00:15:20,059
get this back to a reasonable working

373
00:15:17,659 --> 00:15:22,029
order so all I'm gonna do first is I'm

374
00:15:20,059 --> 00:15:27,109
just gonna do that clear to purple right

375
00:15:22,029 --> 00:15:29,779
I want to do that clear to purple and

376
00:15:27,110 --> 00:15:31,220
that way I can see as soon as we

377
00:15:29,779 --> 00:15:34,689
actually have these guys rendering it

378
00:15:31,220 --> 00:15:38,360
all we'll see some obvious purple right

379
00:15:34,690 --> 00:15:41,090
and then I want to go ahead and what is

380
00:15:38,360 --> 00:15:42,800
this request background buffers this is

381
00:15:41,090 --> 00:15:47,389
just some old vestigial code that we

382
00:15:42,799 --> 00:15:49,039
never used so what I'd like to do here

383
00:15:47,389 --> 00:15:50,779
is just go ahead and figure out you know

384
00:15:49,039 --> 00:15:52,969
I'm gonna enable this temporarily as

385
00:15:50,779 --> 00:15:54,589
well which is I want to be able to see

386
00:15:52,970 --> 00:15:57,649
where those ground where those

387
00:15:54,590 --> 00:16:00,320
grandmother's are so what I want to do

388
00:15:57,649 --> 00:16:03,279
now is go ahead and try and get this

389
00:16:00,320 --> 00:16:06,530
stuff back into good working order right

390
00:16:03,279 --> 00:16:09,169
with the new rendering stuff so here we

391
00:16:06,529 --> 00:16:11,179
go over our ground buffers and for each

392
00:16:09,169 --> 00:16:13,929
brown buffer assuming that it's valid we

393
00:16:11,179 --> 00:16:17,000
will go ahead and try to render it right

394
00:16:13,929 --> 00:16:21,429
I don't actually know why we were

395
00:16:17,000 --> 00:16:29,409
pushing rect outlines in here that's

396
00:16:21,429 --> 00:16:32,059
kind of make a whole lesson to me yeah

397
00:16:29,409 --> 00:16:34,879
I'm gonna actually move this up here I

398
00:16:32,059 --> 00:16:37,129
think so what I'd like to do instead is

399
00:16:34,879 --> 00:16:38,929
when we do this push bitmap call I'd

400
00:16:37,129 --> 00:16:41,860
like to push a rect outline optionally

401
00:16:38,929 --> 00:16:46,279
on top of that push bitmap call right

402
00:16:41,860 --> 00:16:48,710
and what I want to do is I want to make

403
00:16:46,279 --> 00:16:52,939
it basically outline whatever the bitmap

404
00:16:48,710 --> 00:16:54,590
outlined right and so I believe there's

405
00:16:52,940 --> 00:16:57,920
not much that I would have to do for

406
00:16:54,590 --> 00:17:00,740
that right I'm pretty sure I can just do

407
00:16:57,919 --> 00:17:03,379
a pretty straightforward rectangle

408
00:17:00,740 --> 00:17:04,670
outline here and I don't actually know

409
00:17:03,379 --> 00:17:07,490
what the dimensions gonna be this thing

410
00:17:04,670 --> 00:17:10,039
yet but I want to actually see there we

411
00:17:07,490 --> 00:17:12,950
go I want to actually see all of the

412
00:17:10,039 --> 00:17:16,599
places where we are currently rendering

413
00:17:12,950 --> 00:17:18,949
stuff so there is

414
00:17:16,599 --> 00:17:23,269
there's all the places where we're

415
00:17:18,949 --> 00:17:25,400
currently supposedly rendering ground

416
00:17:23,269 --> 00:17:27,588
chunks now what's interesting is as I

417
00:17:25,400 --> 00:17:29,690
move away from here you can see that

418
00:17:27,588 --> 00:17:34,369
it's never actually updating where those

419
00:17:29,690 --> 00:17:37,130
ground chunks are which seems really bad

420
00:17:34,369 --> 00:17:39,589
so that's obviously the first thing that

421
00:17:37,130 --> 00:17:41,120
we probably want to fix so let's figure

422
00:17:39,589 --> 00:17:42,500
out why that's happening so again this

423
00:17:41,119 --> 00:17:44,959
is the renderer and this is the ground

424
00:17:42,500 --> 00:17:50,599
chunk rendering right this is ground

425
00:17:44,960 --> 00:17:56,690
chunk rendering and this is constant

426
00:17:50,599 --> 00:18:00,048
updating right so when we do the ground

427
00:17:56,690 --> 00:18:01,669
jump chunk updating I'm not sure it

428
00:18:00,048 --> 00:18:04,279
looks like we don't actually use the

429
00:18:01,669 --> 00:18:06,290
chunk stuff much we're doing this here

430
00:18:04,279 --> 00:18:07,759
we have our super inefficient thing that

431
00:18:06,289 --> 00:18:09,529
goes through for every chunk that we

432
00:18:07,759 --> 00:18:13,339
look at we go through all of the ground

433
00:18:09,529 --> 00:18:18,639
buffers right we take a look to see if

434
00:18:13,339 --> 00:18:20,509
we have a furthest buffer it looks like

435
00:18:18,640 --> 00:18:22,910
what is this actually doing if they're

436
00:18:20,509 --> 00:18:24,079
in the same chunk so if it's already got

437
00:18:22,910 --> 00:18:25,460
one I guess is what it's doing this

438
00:18:24,079 --> 00:18:27,609
thing it's already got a ground buffer

439
00:18:25,460 --> 00:18:31,610
for this place then we do nothing

440
00:18:27,609 --> 00:18:33,859
otherwise if it's valid we see how far

441
00:18:31,609 --> 00:18:36,199
away it is and then possibly get the the

442
00:18:33,859 --> 00:18:38,240
furthest buffer there and then we'll do

443
00:18:36,200 --> 00:18:41,808
that fill ground trunk ah so I probably

444
00:18:38,240 --> 00:18:43,579
accidentally nerfed the one thing that

445
00:18:41,808 --> 00:18:45,410
we actually needed I put that if zero a

446
00:18:43,579 --> 00:18:47,079
little bit too far down you can see that

447
00:18:45,410 --> 00:18:49,490
that ground buffer key that's the update

448
00:18:47,079 --> 00:18:52,668
so hopefully that will go ahead and fix

449
00:18:49,490 --> 00:18:55,250
that update and it does so you can

450
00:18:52,669 --> 00:18:57,650
actually see now those ground chunks

451
00:18:55,250 --> 00:19:02,089
getting kind of updated as we as we move

452
00:18:57,650 --> 00:19:03,860
around and they look like they're

453
00:19:02,089 --> 00:19:05,539
actually working pretty well right you

454
00:19:03,859 --> 00:19:08,029
can kind of see it I'm thinking about

455
00:19:05,539 --> 00:19:12,048
all those ground chunks as we move

456
00:19:08,029 --> 00:19:13,519
around now again a lot of this stuff is

457
00:19:12,048 --> 00:19:14,509
kind of janky at the moment cuz we

458
00:19:13,519 --> 00:19:17,329
haven't done much with it but at least

459
00:19:14,509 --> 00:19:19,940
it looks like it's picking the locations

460
00:19:17,329 --> 00:19:24,409
that I would expect it to pick and so

461
00:19:19,940 --> 00:19:27,000
that all seems pretty pretty reasonable

462
00:19:24,410 --> 00:19:29,669
to me nothing particularly weird

463
00:19:27,000 --> 00:19:32,579
right so what I want to do now is go

464
00:19:29,669 --> 00:19:35,490
ahead and see why we're not actually

465
00:19:32,579 --> 00:19:37,500
getting any if we actually turn on the

466
00:19:35,490 --> 00:19:40,859
compositing why we're not getting

467
00:19:37,500 --> 00:19:43,558
anything in the actual bitmap so let's

468
00:19:40,859 --> 00:19:48,000
take a look at that code now right just

469
00:19:43,558 --> 00:19:50,038
to make sure and some of this stuff so I

470
00:19:48,000 --> 00:19:51,720
guess when we have these stamps and

471
00:19:50,038 --> 00:19:53,940
stuff I don't know if they've got any

472
00:19:51,720 --> 00:20:01,200
kind of alignment stuff working with

473
00:19:53,940 --> 00:20:02,880
them this stuff maybe this looks also I

474
00:20:01,200 --> 00:20:05,159
mean just looking at this I think I can

475
00:20:02,880 --> 00:20:06,780
see what the problem is all of this

476
00:20:05,159 --> 00:20:10,350
stuff was still being done in pixel

477
00:20:06,779 --> 00:20:11,849
space right which may be you know I

478
00:20:10,349 --> 00:20:14,369
don't know we might want to support that

479
00:20:11,849 --> 00:20:16,619
still we wouldn't want to support having

480
00:20:14,369 --> 00:20:19,439
the renderer be you know in a mode that

481
00:20:16,619 --> 00:20:21,298
can support pixel space but I suspect

482
00:20:19,440 --> 00:20:24,390
that we might as well do the same thing

483
00:20:21,298 --> 00:20:25,710
for the ground chunks as we're doing for

484
00:20:24,390 --> 00:20:28,470
everything else which is to make it

485
00:20:25,710 --> 00:20:29,759
resolution independent right because at

486
00:20:28,470 --> 00:20:31,558
the end of the day we're just slotting a

487
00:20:29,759 --> 00:20:33,419
bunch of stuff in there anyway so it

488
00:20:31,558 --> 00:20:34,710
seems to me like we would want to go

489
00:20:33,419 --> 00:20:36,570
ahead and make it work

490
00:20:34,710 --> 00:20:38,400
resolution independent so what that

491
00:20:36,569 --> 00:20:41,308
would mean is instead of looking at

492
00:20:38,400 --> 00:20:42,990
things like the width and the height now

493
00:20:41,308 --> 00:20:45,480
we can just sort of consider these

494
00:20:42,990 --> 00:20:52,409
ground chunks to have some kind of a

495
00:20:45,480 --> 00:20:54,390
uniform size however big we want that

496
00:20:52,409 --> 00:20:55,380
size to be and then we just flat stuff

497
00:20:54,390 --> 00:20:58,788
into it right it's pretty

498
00:20:55,380 --> 00:21:01,470
straightforward so what I'd like to do

499
00:20:58,788 --> 00:21:03,419
is just go ahead and say all right for

500
00:21:01,470 --> 00:21:05,339
ground buffers we're just gonna say that

501
00:21:03,419 --> 00:21:10,950
there's a particular size in meters of

502
00:21:05,339 --> 00:21:12,389
those grande buffers we do here and I

503
00:21:10,950 --> 00:21:14,100
guess you know what we could even do is

504
00:21:12,390 --> 00:21:14,970
let's make them line up with the chunks

505
00:21:14,099 --> 00:21:16,740
since they're supposed to line up with

506
00:21:14,970 --> 00:21:19,200
the chunks we know how big a chunk is

507
00:21:16,740 --> 00:21:22,109
right if we go ahead and look at

508
00:21:19,200 --> 00:21:24,360
handmade worlds we know in Hanalei well

509
00:21:22,109 --> 00:21:26,009
we've got that chunk dim in meters so

510
00:21:24,359 --> 00:21:28,589
what I'd like to do is say that whatever

511
00:21:26,009 --> 00:21:30,720
that that world state is there that's

512
00:21:28,589 --> 00:21:33,359
that's what we're going to use right so

513
00:21:30,720 --> 00:21:35,279
the size and meters of a ground chunk is

514
00:21:33,359 --> 00:21:38,699
just going to be whatever that chunk dim

515
00:21:35,279 --> 00:21:40,079
meters is so the first thing I do for

516
00:21:38,700 --> 00:21:40,710
that is I want to go ahead and get those

517
00:21:40,079 --> 00:21:43,379
outline

518
00:21:40,710 --> 00:21:47,579
drawing in the right place so when we go

519
00:21:43,380 --> 00:21:50,278
ahead and we do this work here for the

520
00:21:47,579 --> 00:21:55,139
ground trunks I'm gonna say that we want

521
00:21:50,278 --> 00:21:58,230
them to be based on that that that chunk

522
00:21:55,140 --> 00:22:01,049
size right and so you know we could also

523
00:21:58,230 --> 00:22:04,980
make the alignment of these VIP masts be

524
00:22:01,048 --> 00:22:06,538
based off of their corner I guess no the

525
00:22:04,980 --> 00:22:08,250
center is correct because chunks are

526
00:22:06,538 --> 00:22:09,808
based around their center so we want to

527
00:22:08,250 --> 00:22:11,130
keep the same thing right we want to

528
00:22:09,808 --> 00:22:12,898
base these two bases line up with our

529
00:22:11,130 --> 00:22:14,549
world rep for now that's what I was

530
00:22:12,898 --> 00:22:16,469
thinking we should do and and that's

531
00:22:14,548 --> 00:22:18,179
what I'm going to stick with so whatever

532
00:22:16,470 --> 00:22:19,710
we want that chunk Tim to be it would

533
00:22:18,179 --> 00:22:22,919
have to go in here right whatever the

534
00:22:19,710 --> 00:22:24,919
scale is and so that that chunk diamond

535
00:22:22,919 --> 00:22:28,559
meters right is just going to be world

536
00:22:24,919 --> 00:22:29,880
chunked in meters X the x and y scale

537
00:22:28,558 --> 00:22:32,519
should be the same because this is a

538
00:22:29,880 --> 00:22:34,679
square because that should be fine and

539
00:22:32,519 --> 00:22:38,908
I'm gonna go ahead and maybe say that

540
00:22:34,679 --> 00:22:40,890
this is the the ground side and meters

541
00:22:38,909 --> 00:22:43,940
or something like that right and we'll

542
00:22:40,890 --> 00:22:46,220
just grab that right out of there okay

543
00:22:43,940 --> 00:22:50,308
so there's that ground side and meters

544
00:22:46,220 --> 00:22:57,028
and here is that ground side and meters

545
00:22:50,308 --> 00:22:58,639
again and now I'm hoping anyway that

546
00:22:57,028 --> 00:23:01,140
everything yeah and it looks like it is

547
00:22:58,640 --> 00:23:04,399
everything actually forms a coherent

548
00:23:01,140 --> 00:23:07,500
grid so you know it's it's essentially

549
00:23:04,398 --> 00:23:11,129
covering a complete coverage of all of

550
00:23:07,500 --> 00:23:18,210
the area that might have some ground in

551
00:23:11,130 --> 00:23:22,080
it now I would say really that looks

552
00:23:18,210 --> 00:23:25,079
about right to me nothing funny going on

553
00:23:22,079 --> 00:23:28,439
there as far as I can tell

554
00:23:25,079 --> 00:23:32,099
so yeah I would I would basically say

555
00:23:28,440 --> 00:23:33,659
that that looks totally what I would

556
00:23:32,099 --> 00:23:35,639
exactly yeah that looks exactly what I

557
00:23:33,659 --> 00:23:37,110
would want it to look like so I don't

558
00:23:35,640 --> 00:23:39,179
think we've got any problems there I

559
00:23:37,109 --> 00:23:41,250
think that's all good next step is just

560
00:23:39,179 --> 00:23:42,899
to fill those in with something and

561
00:23:41,250 --> 00:23:43,950
again like I said I think the reason

562
00:23:42,898 --> 00:23:46,139
that we're having a problem here is

563
00:23:43,950 --> 00:23:49,350
because this is still Owen pixels which

564
00:23:46,140 --> 00:23:53,250
is not what we want now we've got a

565
00:23:49,349 --> 00:23:53,949
problem here which is that in terms of

566
00:23:53,250 --> 00:23:56,919
when we

567
00:23:53,950 --> 00:24:00,429
get our render group in terms of what

568
00:23:56,919 --> 00:24:01,840
we're actually sending down in term for

569
00:24:00,429 --> 00:24:03,940
the the sort of width and the height of

570
00:24:01,839 --> 00:24:06,009
the thing that we're rendering to the

571
00:24:03,940 --> 00:24:10,538
reason that that's a little bit wonky is

572
00:24:06,009 --> 00:24:13,419
because you know that's basically just

573
00:24:10,538 --> 00:24:17,609
something that's that's computing our

574
00:24:13,419 --> 00:24:17,610
perspective that's all those are doing

575
00:24:19,710 --> 00:24:26,019
and we don't really want to change what

576
00:24:25,359 --> 00:24:28,658
that is

577
00:24:26,019 --> 00:24:32,230
pretty much ever right we don't want our

578
00:24:28,659 --> 00:24:33,760
ground chunks to differ depending on a

579
00:24:32,230 --> 00:24:36,839
resolution or anything like that right

580
00:24:33,759 --> 00:24:40,808
so I'm not really sure what we want that

581
00:24:36,839 --> 00:24:42,908
to be but I think what we'd probably

582
00:24:40,808 --> 00:24:46,658
want to do is I think we'd actually want

583
00:24:42,909 --> 00:24:49,179
to use whatever the the actual buffer is

584
00:24:46,659 --> 00:24:51,190
there we'll have to think of this

585
00:24:49,179 --> 00:24:53,380
through I'm gonna I want to get these

586
00:24:51,190 --> 00:24:55,778
working but then we may have to think

587
00:24:53,380 --> 00:24:57,010
about this a little harder because again

588
00:24:55,778 --> 00:24:59,048
we're still kind of working with that

589
00:24:57,009 --> 00:25:00,579
render group and it may imply that we've

590
00:24:59,048 --> 00:25:11,079
got some other work that we are going to

591
00:25:00,579 --> 00:25:13,778
need to do there right yeah I mean I

592
00:25:11,079 --> 00:25:15,519
guess the way to think about this is we

593
00:25:13,778 --> 00:25:17,950
really want to put this render group

594
00:25:15,519 --> 00:25:20,079
into an orthogonal projection mode is

595
00:25:17,950 --> 00:25:22,389
what we want to do because we really

596
00:25:20,079 --> 00:25:24,490
don't want a perspective projection here

597
00:25:22,388 --> 00:25:25,869
at all and so that might be the way to

598
00:25:24,490 --> 00:25:28,778
think of it what we want to do is just

599
00:25:25,869 --> 00:25:31,089
pass standard and normalized coordinates

600
00:25:28,778 --> 00:25:35,200
into the thing and we want those to it

601
00:25:31,089 --> 00:25:38,079
to work and so yeah I feel like we may

602
00:25:35,200 --> 00:25:39,460
have to extent extender sorry expand our

603
00:25:38,079 --> 00:25:40,928
render group a little bit we don't have

604
00:25:39,460 --> 00:25:42,069
to do it right away we can kind of hack

605
00:25:40,929 --> 00:25:44,919
this into working but I think that's

606
00:25:42,069 --> 00:25:47,349
actually what needs to happen and so

607
00:25:44,919 --> 00:25:47,769
we'll do that and we'll put that on the

608
00:25:47,349 --> 00:25:49,959
list

609
00:25:47,769 --> 00:25:51,579
we'll put that on the list so what we

610
00:25:49,960 --> 00:25:56,169
want to do here is something more like

611
00:25:51,579 --> 00:26:00,099
this to do KC need to be able to set an

612
00:25:56,169 --> 00:26:03,880
orthographic orthographic display mode

613
00:26:00,099 --> 00:26:06,459
here and that's what we'll do

614
00:26:03,880 --> 00:26:08,530
so what we want to do for our ground

615
00:26:06,460 --> 00:26:10,929
chunks in terms of width and height now

616
00:26:08,529 --> 00:26:15,788
is we want to again use that game state

617
00:26:10,929 --> 00:26:17,410
we want to use the world we want to use

618
00:26:15,788 --> 00:26:20,679
whatever that chunk gamin meters is

619
00:26:17,410 --> 00:26:22,750
right so we've got our chunked in meters

620
00:26:20,679 --> 00:26:24,370
we want to just use that for what the

621
00:26:22,750 --> 00:26:26,308
width and the height are of this thing

622
00:26:24,369 --> 00:26:29,259
because they should be and essentially

623
00:26:26,308 --> 00:26:30,428
you know relative coordinates and

624
00:26:29,259 --> 00:26:32,288
they're going to be relative to the

625
00:26:30,429 --> 00:26:35,830
center so we really want to do something

626
00:26:32,288 --> 00:26:37,750
like half height and half width probably

627
00:26:35,829 --> 00:26:41,730
because that's what we'd use for

628
00:26:37,750 --> 00:26:45,759
everything and so then when we do this

629
00:26:41,730 --> 00:26:47,440
let's see here V to Center it goes trunk

630
00:26:45,759 --> 00:26:49,869
offset ah

631
00:26:47,440 --> 00:26:52,120
well okay I take it back you do actually

632
00:26:49,869 --> 00:26:55,619
want this we don't want to pre-compute

633
00:26:52,119 --> 00:26:57,489
it that way we'll do it like that and

634
00:26:55,619 --> 00:27:00,009
that looks about right so we're

635
00:26:57,490 --> 00:27:02,048
producing the center there for the

636
00:27:00,009 --> 00:27:04,509
bitmap Center I feel like the bitmap

637
00:27:02,048 --> 00:27:06,190
Center we shouldn't have to deal with

638
00:27:04,509 --> 00:27:08,529
anymore because our alignment code

639
00:27:06,190 --> 00:27:13,330
should take care of that so what we want

640
00:27:08,529 --> 00:27:15,849
to do here is in our alignment code when

641
00:27:13,329 --> 00:27:19,980
we actually go in here what did we set

642
00:27:15,849 --> 00:27:24,819
it to you by default right top down line

643
00:27:19,980 --> 00:27:27,400
x and y so and we do debug load BMP so

644
00:27:24,819 --> 00:27:30,548
we do these debug load B and peas here

645
00:27:27,400 --> 00:27:32,230
right I think what I want to do is make

646
00:27:30,548 --> 00:27:34,720
it so that by default when we load

647
00:27:32,230 --> 00:27:40,900
something instead of the default being

648
00:27:34,720 --> 00:27:43,600
that it's I want the default to actually

649
00:27:40,900 --> 00:27:46,030
produce even alignment right so I think

650
00:27:43,599 --> 00:27:47,980
what I want to do is suggest this right

651
00:27:46,029 --> 00:27:50,168
I want to make it so that if you call

652
00:27:47,980 --> 00:27:52,450
debug load with an align X another line

653
00:27:50,169 --> 00:27:55,000
Y then it will actually do that but I

654
00:27:52,450 --> 00:27:57,250
also want to have some way for you to

655
00:27:55,000 --> 00:28:01,000
actually just say I want the default

656
00:27:57,250 --> 00:28:02,529
alignment right I want I want it to

657
00:28:01,000 --> 00:28:02,950
align to like the center or something

658
00:28:02,529 --> 00:28:04,690
like that

659
00:28:02,950 --> 00:28:06,069
I'm not sure what the best way to do

660
00:28:04,690 --> 00:28:07,419
that is I guess one way I could do it

661
00:28:06,069 --> 00:28:09,129
although we might want negative

662
00:28:07,419 --> 00:28:11,620
alignment so I don't know I'm trying to

663
00:28:09,130 --> 00:28:14,450
think what I want to do here is

664
00:28:11,619 --> 00:28:17,378
something like you know

665
00:28:14,450 --> 00:28:19,669
I don't know I want really to functions

666
00:28:17,378 --> 00:28:21,469
so what I want to do here is I want to

667
00:28:19,669 --> 00:28:23,059
break these out right I want to do

668
00:28:21,470 --> 00:28:25,788
something where I've got it's another

669
00:28:23,058 --> 00:28:28,128
one here which when you just do this

670
00:28:25,788 --> 00:28:29,269
it basically over - oh well I guess

671
00:28:28,128 --> 00:28:30,048
that's pretty easy you know what I'll

672
00:28:29,269 --> 00:28:32,499
just do that

673
00:28:30,048 --> 00:28:34,308
here we go I don't know why I'm

674
00:28:32,499 --> 00:28:35,778
different so long that that's been a

675
00:28:34,308 --> 00:28:37,730
long day all right

676
00:28:35,778 --> 00:28:39,499
so if we do this here where we actually

677
00:28:37,730 --> 00:28:42,858
load we just have like a thunk call

678
00:28:39,499 --> 00:28:45,889
basically which does the the load by

679
00:28:42,858 --> 00:28:48,230
calling the existing function right like

680
00:28:45,888 --> 00:28:52,368
so and then just takes the result and

681
00:28:48,230 --> 00:28:56,480
sets that result a line percentage to be

682
00:28:52,368 --> 00:28:58,459
equal to that you know 0.5 point 5 then

683
00:28:56,480 --> 00:29:01,038
it looks like that's just you know

684
00:28:58,460 --> 00:29:03,379
that's just all we would really need

685
00:29:01,038 --> 00:29:09,499
right so we now have another way to

686
00:29:03,378 --> 00:29:10,730
debug load bitmap and oops we just

687
00:29:09,499 --> 00:29:13,669
passed zeroes for that because we don't

688
00:29:10,730 --> 00:29:16,569
care what it is right so I believe that

689
00:29:13,669 --> 00:29:22,369
would actually give us what we wanted

690
00:29:16,569 --> 00:29:25,460
which is of course not know what's going

691
00:29:22,368 --> 00:29:27,558
on right now there we go okay

692
00:29:25,460 --> 00:29:33,079
I believe that's what we wanted so

693
00:29:27,558 --> 00:29:35,480
everything will load properly and yeah I

694
00:29:33,079 --> 00:29:37,278
think everything looks I don't see any

695
00:29:35,480 --> 00:29:39,919
bugs from switching to that load bitmap

696
00:29:37,278 --> 00:29:43,128
all right and so now let's go ahead and

697
00:29:39,919 --> 00:29:44,269
finish what I was saying so that gets us

698
00:29:43,128 --> 00:29:45,528
out of the business of having to deal

699
00:29:44,269 --> 00:29:46,999
with these bitmap centers right the

700
00:29:45,528 --> 00:29:49,278
bitmap centers go away and so that's

701
00:29:46,999 --> 00:29:51,230
good no more bitmap centers which is

702
00:29:49,278 --> 00:29:53,749
which is another good thing so you don't

703
00:29:51,230 --> 00:29:55,429
have to think about anymore so we do

704
00:29:53,749 --> 00:29:58,399
these random choices really all we need

705
00:29:55,429 --> 00:30:02,509
now is a random bilateral that we can

706
00:29:58,398 --> 00:30:06,018
use to to you know basically position

707
00:30:02,509 --> 00:30:07,730
this thing inside the chunk and so I

708
00:30:06,019 --> 00:30:09,259
think what I'm gonna do is say that

709
00:30:07,730 --> 00:30:11,210
we've got like this is this will be the

710
00:30:09,259 --> 00:30:14,649
half dim and I'll just do it like this

711
00:30:11,210 --> 00:30:17,179
right I'll produce that half dim here

712
00:30:14,648 --> 00:30:19,638
and so really all we have to do is say

713
00:30:17,179 --> 00:30:22,788
oK we've got a random bilateral in this

714
00:30:19,638 --> 00:30:26,449
case now random bilateral random

715
00:30:22,788 --> 00:30:27,740
bilateral and I'm just gonna do that's

716
00:30:26,450 --> 00:30:30,370
just going to be

717
00:30:27,740 --> 00:30:37,880
always made with the Hadamard product

718
00:30:30,369 --> 00:30:41,779
Hadamard product of the half dim and a

719
00:30:37,880 --> 00:30:43,760
random vector right and so what that's

720
00:30:41,779 --> 00:30:45,500
gonna do is give us some random thing

721
00:30:43,759 --> 00:30:49,490
from from the center out to the edge

722
00:30:45,500 --> 00:30:52,819
right and then we just go ahead and use

723
00:30:49,490 --> 00:30:54,470
that Center plus offset in fact we don't

724
00:30:52,819 --> 00:31:00,109
really need to we could make this a lot

725
00:30:54,470 --> 00:31:03,740
simpler in fact and just do this so and

726
00:31:00,109 --> 00:31:06,439
that would be that right so I think

727
00:31:03,740 --> 00:31:08,900
that's really all we need there same

728
00:31:06,440 --> 00:31:10,640
thing would be true over here right in

729
00:31:08,900 --> 00:31:13,429
fact I think it's exactly the same thing

730
00:31:10,640 --> 00:31:18,380
there's really nothing else that was all

731
00:31:13,429 --> 00:31:22,100
exactly the same yeah so let's go ahead

732
00:31:18,380 --> 00:31:25,130
and try that out now and let's see if

733
00:31:22,099 --> 00:31:27,619
that produces anything more usable for

734
00:31:25,130 --> 00:31:30,500
us in terms of ground chunks

735
00:31:27,619 --> 00:31:32,419
still nothing that's disappointing I was

736
00:31:30,500 --> 00:31:35,390
thinking we would see something there

737
00:31:32,420 --> 00:31:37,130
but that's okay we'll go ahead and we'll

738
00:31:35,390 --> 00:31:39,200
take a look at what we're actually

739
00:31:37,130 --> 00:31:41,030
seeing now the fact that the frame rates

740
00:31:39,200 --> 00:31:43,160
going so slowly implies to me that we

741
00:31:41,029 --> 00:31:44,569
are properly drawing those ground chunks

742
00:31:43,160 --> 00:31:51,200
now it's just they're not filled with

743
00:31:44,569 --> 00:31:53,629
anything right so what is going on what

744
00:31:51,200 --> 00:31:56,539
did I mess up and you know now that I

745
00:31:53,630 --> 00:31:58,190
think about it we did it clear so even

746
00:31:56,539 --> 00:32:00,019
if we weren't bleeding anything we

747
00:31:58,190 --> 00:32:02,750
should have seen it so I'm still i'm

748
00:32:00,019 --> 00:32:04,339
making some fundamental error here when

749
00:32:02,750 --> 00:32:06,319
we're actually drawing these things and

750
00:32:04,339 --> 00:32:08,119
so off to go see why that is because

751
00:32:06,319 --> 00:32:10,909
technically I forgot my thing that I

752
00:32:08,119 --> 00:32:16,099
wanted to do technically once we do this

753
00:32:10,910 --> 00:32:19,550
right if we just do that clear we should

754
00:32:16,099 --> 00:32:23,149
at that point we should see the pink we

755
00:32:19,549 --> 00:32:28,369
should see that debug that that hideous

756
00:32:23,150 --> 00:32:32,030
pink right so I'm wondering why we're

757
00:32:28,369 --> 00:32:34,129
not seeing that and let's take a look so

758
00:32:32,029 --> 00:32:37,428
we're not seeing it we do a push bitmap

759
00:32:34,130 --> 00:32:40,610
here right we're doing it with ground

760
00:32:37,429 --> 00:32:42,110
side and meters zero zero the bitmap

761
00:32:40,609 --> 00:32:45,490
itself

762
00:32:42,109 --> 00:32:52,339
we are getting from ground buffer bitmap

763
00:32:45,490 --> 00:32:54,589
see what's happening there yeah I mean

764
00:32:52,339 --> 00:32:56,869
right it doesn't it seems like we should

765
00:32:54,589 --> 00:33:02,689
be seeing something there and I'm not

766
00:32:56,869 --> 00:33:04,879
sure why we aren't and that is kind of

767
00:33:02,690 --> 00:33:07,370
troubling so something is weird there

768
00:33:04,880 --> 00:33:10,670
because the same exact drawing command

769
00:33:07,369 --> 00:33:13,279
that follows right after it does show up

770
00:33:10,670 --> 00:33:15,800
and so the bitmap I'm gonna go ahead and

771
00:33:13,279 --> 00:33:17,149
just verify something just to make sure

772
00:33:15,799 --> 00:33:19,369
that we know that the bitmap is what's

773
00:33:17,150 --> 00:33:21,670
wrong right I'm gonna go ahead and say

774
00:33:19,369 --> 00:33:24,169
that the game state there's a tree right

775
00:33:21,670 --> 00:33:27,410
let's push that instead of the bitmap

776
00:33:24,170 --> 00:33:31,039
and so now we should see you like trees

777
00:33:27,410 --> 00:33:33,890
everywhere right and as you can see we

778
00:33:31,039 --> 00:33:36,230
do see trees everywhere and they are

779
00:33:33,890 --> 00:33:38,060
scaled what looks like appropriately

780
00:33:36,230 --> 00:33:41,450
even so so we're drawing in the correct

781
00:33:38,059 --> 00:33:43,250
place but for some reason our bitmap is

782
00:33:41,450 --> 00:33:45,350
not even filled with the debug purple

783
00:33:43,250 --> 00:33:48,230
and I have no idea why that would be

784
00:33:45,349 --> 00:33:50,119
right so fill ground chunk I'm gonna go

785
00:33:48,230 --> 00:33:53,240
ahead and step into that and see what's

786
00:33:50,119 --> 00:33:56,779
happening in there just go ahead and say

787
00:33:53,240 --> 00:34:03,650
fill ground chunk when I walk around

788
00:33:56,779 --> 00:34:09,199
here oh my what what just happened why

789
00:34:03,650 --> 00:34:13,909
did it why didn't ever call fill ground

790
00:34:09,199 --> 00:34:20,689
chuck okay are we never calling fill

791
00:34:13,909 --> 00:34:24,260
ground chunk I mean I did set a

792
00:34:20,690 --> 00:34:25,490
breakpoint did I not fill ground chunk I

793
00:34:24,260 --> 00:34:26,169
don't know what these guys are doing

794
00:34:25,489 --> 00:34:28,668
here

795
00:34:26,168 --> 00:34:29,898
so we never call photograph chunk all

796
00:34:28,668 --> 00:34:34,429
right well that would explain why

797
00:34:29,898 --> 00:34:36,049
there's nothing in the bitmap at the

798
00:34:34,429 --> 00:34:39,530
risk of stating the overwhelmingly

799
00:34:36,050 --> 00:34:41,090
obvious right so all right I guess let's

800
00:34:39,530 --> 00:34:45,050
take a look at why we're not ever

801
00:34:41,090 --> 00:34:46,519
filling any ground chunks ever which

802
00:34:45,050 --> 00:34:48,440
doesn't even make any sense to me

803
00:34:46,519 --> 00:34:51,469
because if we're not filling them how is

804
00:34:48,440 --> 00:34:54,940
it drawing them up here it's just that's

805
00:34:51,469 --> 00:35:03,219
nonsensical I don't understand

806
00:34:54,940 --> 00:35:08,289
all right oh I know what's wrong we're

807
00:35:03,219 --> 00:35:11,739
still building in the Oh to build ladies

808
00:35:08,289 --> 00:35:14,619
and gentlemen mm-hmm the visual studio

809
00:35:11,739 --> 00:35:16,868
debugger apparently is too dumb to set a

810
00:35:14,619 --> 00:35:21,369
breakpoint at the inlined point of a

811
00:35:16,869 --> 00:35:25,000
function oh well all right

812
00:35:21,369 --> 00:35:28,869
let's try that again here we go so we

813
00:35:25,000 --> 00:35:31,889
come in here and what's what buffer are

814
00:35:28,869 --> 00:35:37,088
we filling here let's take a quick look

815
00:35:31,889 --> 00:35:40,539
so all looks pretty reasonable that

816
00:35:37,088 --> 00:35:43,210
looks like a buffer 256 by 256 buffer

817
00:35:40,539 --> 00:35:45,759
and there's some memory we've got a line

818
00:35:43,210 --> 00:35:48,970
percentage is not set to anything at the

819
00:35:45,760 --> 00:35:52,930
moment so here we go we're going to

820
00:35:48,969 --> 00:35:54,608
clear that right which pushes one of

821
00:35:52,929 --> 00:35:56,649
these guys on there puts the entry color

822
00:35:54,608 --> 00:35:58,568
on there now we're going to go render

823
00:35:56,650 --> 00:36:01,450
the group output we're going to loop

824
00:35:58,568 --> 00:36:04,239
through here we're gonna encounter that

825
00:36:01,449 --> 00:36:08,649
clear and then we're going to do a

826
00:36:04,239 --> 00:36:10,358
rectangle draw call into into the buffer

827
00:36:08,650 --> 00:36:15,160
in theory so let's take a look at the

828
00:36:10,358 --> 00:36:16,719
output target target the output target

829
00:36:15,159 --> 00:36:25,559
is the buffer that we thought it should

830
00:36:16,719 --> 00:36:28,598
be width over height that is our problem

831
00:36:25,559 --> 00:36:32,130
we did not initialize our bitmap with

832
00:36:28,599 --> 00:36:36,220
over height to anything did you see that

833
00:36:32,130 --> 00:36:38,170
that is that is our problem so when we

834
00:36:36,219 --> 00:36:39,879
do fill ground chunk

835
00:36:38,170 --> 00:36:42,240
we should probably I don't know who

836
00:36:39,880 --> 00:36:46,119
wants to be responsible for this stuff

837
00:36:42,239 --> 00:36:50,348
I'm not sure let's take a look here but

838
00:36:46,119 --> 00:36:53,019
that so that a line percentage when we

839
00:36:50,349 --> 00:36:55,390
do that we probably want to in here

840
00:36:53,019 --> 00:36:57,429
basically say all right the buffer is a

841
00:36:55,389 --> 00:36:59,679
line percentage of that and the width

842
00:36:57,429 --> 00:37:02,230
over height make sure that they're even

843
00:36:59,679 --> 00:37:03,578
so that way it's set properly so I

844
00:37:02,230 --> 00:37:04,659
suspect that that was the problem so

845
00:37:03,579 --> 00:37:08,269
we're just always thinking that the

846
00:37:04,659 --> 00:37:10,409
bitmap had no dimension at all right

847
00:37:08,269 --> 00:37:14,579
at least I'm assuming that's what was

848
00:37:10,409 --> 00:37:19,469
happening not actually sure that all

849
00:37:14,579 --> 00:37:22,469
right that's a little bit better so hold

850
00:37:19,469 --> 00:37:26,099
on a second and now we have to actually

851
00:37:22,469 --> 00:37:27,389
do some work in here right and I guess

852
00:37:26,099 --> 00:37:29,039
sorry pink I don't know why I was

853
00:37:27,389 --> 00:37:31,889
thinking pink this is actually yellow

854
00:37:29,039 --> 00:37:32,279
right that we're clearing it too but

855
00:37:31,889 --> 00:37:36,179
yeah

856
00:37:32,280 --> 00:37:40,800
beside point so off we go and let me go

857
00:37:36,179 --> 00:37:43,409
ahead and set our - OH - back here so we

858
00:37:40,800 --> 00:37:44,730
run a little faster all right so now

859
00:37:43,409 --> 00:37:46,710
we're going to be incredibly slow

860
00:37:44,730 --> 00:37:49,920
because at the moment our ground chunk

861
00:37:46,710 --> 00:37:51,780
actual building is super super slow but

862
00:37:49,920 --> 00:37:54,200
alright so now we're at least back into

863
00:37:51,780 --> 00:37:57,300
some semblance of reasonableness here

864
00:37:54,199 --> 00:38:02,219
and of course all of that bleeding is

865
00:37:57,300 --> 00:38:09,690
just super expensive for our yeah for

866
00:38:02,219 --> 00:38:11,579
our renderer so we're probably not gonna

867
00:38:09,690 --> 00:38:13,050
be able to use this hardly at all right

868
00:38:11,579 --> 00:38:15,329
I mean you can see look at that frame

869
00:38:13,050 --> 00:38:16,920
rate because it's over drawing all of

870
00:38:15,329 --> 00:38:20,250
that stuff look at how painful that is

871
00:38:16,920 --> 00:38:21,930
it can't hardly do it now remember we're

872
00:38:20,250 --> 00:38:24,360
not sorting anything here so we've kind

873
00:38:21,929 --> 00:38:25,469
of got this situation where different

874
00:38:24,360 --> 00:38:28,650
ground chunks at different heights are

875
00:38:25,469 --> 00:38:30,719
just doing arbitrary stuff but at least

876
00:38:28,650 --> 00:38:34,050
now we can see okay we are filling them

877
00:38:30,719 --> 00:38:34,769
in properly everything seems to be

878
00:38:34,050 --> 00:38:37,980
kosher

879
00:38:34,769 --> 00:38:39,690
now we need to adjust that scale because

880
00:38:37,980 --> 00:38:41,219
at the moment we're you know we're still

881
00:38:39,690 --> 00:38:42,360
using that perspective transform in

882
00:38:41,219 --> 00:38:43,889
there which means that when we actually

883
00:38:42,360 --> 00:38:45,329
go to fill the ground chunk everything

884
00:38:43,889 --> 00:38:48,089
is kind of tiny and far away that we

885
00:38:45,329 --> 00:38:50,039
splat in there so if we wanted to we

886
00:38:48,090 --> 00:38:52,680
could fix that by just making the stamps

887
00:38:50,039 --> 00:38:54,029
much bigger right but that's not

888
00:38:52,679 --> 00:38:55,169
probably how we want to handle that

889
00:38:54,030 --> 00:38:57,300
eventually I'm just gonna go ahead and

890
00:38:55,170 --> 00:39:03,750
do that so you can kind of see what I

891
00:38:57,300 --> 00:39:06,180
mean like so that's all yeah that's all

892
00:39:03,750 --> 00:39:07,289
I'm talking about with that so let's let

893
00:39:06,179 --> 00:39:08,699
that go ahead and do it's a little

894
00:39:07,289 --> 00:39:11,659
splatting again it's gonna be

895
00:39:08,699 --> 00:39:11,659
excruciatingly ly slow

896
00:39:15,389 --> 00:39:26,379
and Jimmy alright dude to do again what

897
00:39:25,389 --> 00:39:28,750
we're waiting for here is the

898
00:39:26,380 --> 00:39:30,818
excruciating ly slow process of doing

899
00:39:28,750 --> 00:39:33,608
like tons and tons and tons and tons and

900
00:39:30,818 --> 00:39:36,699
tons and tons of splats into those

901
00:39:33,608 --> 00:39:38,170
bitmaps right and it's producing 60

902
00:39:36,699 --> 00:39:40,028
foreground chunks each of them has a

903
00:39:38,170 --> 00:39:42,389
thousand twenty fourth blocks I don't

904
00:39:40,028 --> 00:39:46,510
even know how my splats that hasn't it

905
00:39:42,389 --> 00:39:55,929
little grand chunk let's see fill ground

906
00:39:46,510 --> 00:39:59,140
chunk where's it a hundred and fifty so

907
00:39:55,929 --> 00:40:00,879
swing 150 times a 64 it just takes

908
00:39:59,139 --> 00:40:02,500
forever to fill all those guys in or

909
00:40:00,880 --> 00:40:04,318
wait it's not even I don't even remember

910
00:40:02,500 --> 00:40:07,989
how many how many actually were there

911
00:40:04,318 --> 00:40:16,650
for those ground just grab buffers

912
00:40:07,989 --> 00:40:20,368
around buffer count oops sixty-four yeah

913
00:40:16,650 --> 00:40:24,700
alright excuse me

914
00:40:20,369 --> 00:40:28,798
now if we can ever get back there so

915
00:40:24,699 --> 00:40:28,798
there now what's kind of interesting

916
00:40:29,460 --> 00:40:35,079
that looks like I made it much too large

917
00:40:32,880 --> 00:40:40,740
all right let's try that one more time

918
00:40:35,079 --> 00:40:47,410
I guess 5.0 was much too large see here

919
00:40:40,739 --> 00:40:50,259
fill ground chunk and let's take that

920
00:40:47,409 --> 00:40:51,639
down to two or something like this and

921
00:40:50,260 --> 00:40:54,930
then of course I guess the other thing

922
00:40:51,639 --> 00:41:01,088
we need to do is this thing right here

923
00:40:54,929 --> 00:41:03,730
is not actually this is I'm gonna put

924
00:41:01,088 --> 00:41:08,009
the to do in here basically to do once

925
00:41:03,730 --> 00:41:11,260
we switch to orthographic stop

926
00:41:08,010 --> 00:41:14,650
multiplying this basically we're not

927
00:41:11,260 --> 00:41:16,778
covering a wide enough region right so

928
00:41:14,650 --> 00:41:18,670
we need to do something like this to

929
00:41:16,778 --> 00:41:20,349
make sure that we actually do cover it

930
00:41:18,670 --> 00:41:23,950
because again we're actually doing

931
00:41:20,349 --> 00:41:25,609
perspective transform into our actual

932
00:41:23,949 --> 00:41:27,949
ground buffers which

933
00:41:25,608 --> 00:41:29,119
makes no sense whatsoever but that's

934
00:41:27,949 --> 00:41:31,098
just the way the render is set up at the

935
00:41:29,119 --> 00:41:32,298
moment and so what we have to do is make

936
00:41:31,099 --> 00:41:34,130
sure that we're actually covering the

937
00:41:32,298 --> 00:41:38,150
whole thing in order for to get them big

938
00:41:34,130 --> 00:41:40,220
enough so we'll see if that's actually

939
00:41:38,150 --> 00:41:44,660
it's not quite there yet it needs to be

940
00:41:40,219 --> 00:41:46,338
a little further out and also this you

941
00:41:44,659 --> 00:41:48,348
know what I think I did it backwards I

942
00:41:46,338 --> 00:41:53,838
think if they actually were too big

943
00:41:48,349 --> 00:41:55,519
originally these guys are like way too

944
00:41:53,838 --> 00:41:57,288
big I guess because they should be like

945
00:41:55,518 --> 00:41:58,879
a half a meter and then these things

946
00:41:57,289 --> 00:42:01,130
should be like 2 meters that you splat

947
00:41:58,880 --> 00:42:04,720
on the backing plates I guess something

948
00:42:01,130 --> 00:42:04,720
like that and that's kind of confusing

949
00:42:04,809 --> 00:42:11,390
but yeah all right so we're getting

950
00:42:07,730 --> 00:42:15,099
there slowly but surely and I guess

951
00:42:11,389 --> 00:42:15,098
there really isn't that much to do here

952
00:42:16,748 --> 00:42:35,118
do you think yeah I think what would

953
00:42:31,219 --> 00:42:38,538
help I love to say it because I don't

954
00:42:35,119 --> 00:42:40,099
actually want to have to do this but I

955
00:42:38,539 --> 00:42:42,680
think what would help here is if the

956
00:42:40,099 --> 00:42:45,140
they were actually if they were actually

957
00:42:42,679 --> 00:42:48,139
layered properly right because I can't

958
00:42:45,139 --> 00:42:49,940
tell which layer I'm looking at and it

959
00:42:48,139 --> 00:42:52,879
makes it hard for me to tell what the

960
00:42:49,940 --> 00:42:56,720
right sizes are for things right I also

961
00:42:52,880 --> 00:42:59,420
don't understand why we're getting so

962
00:42:56,719 --> 00:43:01,759
much yellow throat showing through I

963
00:42:59,420 --> 00:43:03,528
guess it's because the backing parts are

964
00:43:01,759 --> 00:43:06,619
still not quite big enough they should

965
00:43:03,528 --> 00:43:10,518
be more like 3 metres wide I guess or

966
00:43:06,619 --> 00:43:13,818
something like this but yeah and so

967
00:43:10,518 --> 00:43:15,949
let's go ahead and sit here so I think

968
00:43:13,818 --> 00:43:18,710
we may actually have to do one level of

969
00:43:15,949 --> 00:43:20,389
sorting like I said didn't really want

970
00:43:18,710 --> 00:43:23,989
to have to deal with that at this point

971
00:43:20,389 --> 00:43:26,118
but yeah whatever is the next logical

972
00:43:23,989 --> 00:43:29,088
thing to do is the next logical thing to

973
00:43:26,119 --> 00:43:32,599
do yeah so let's make those a little

974
00:43:29,088 --> 00:43:35,710
bigger here and these were a little too

975
00:43:32,599 --> 00:43:35,710
tiny as well I feel like

976
00:43:36,880 --> 00:43:45,550
so that's good I think producing those

977
00:43:41,769 --> 00:43:48,280
ground chunks seems okay and if I'm

978
00:43:45,550 --> 00:43:50,740
gonna sort these so here's one thing I

979
00:43:48,280 --> 00:43:52,690
could do at the moment when I when I

980
00:43:50,739 --> 00:43:55,119
render them right

981
00:43:52,690 --> 00:43:59,800
I could only I could just only render

982
00:43:55,119 --> 00:44:02,319
ones you know and gram buffer peasy you

983
00:43:59,800 --> 00:44:04,570
know is within some region of zero right

984
00:44:02,320 --> 00:44:07,440
it's like greater than or equal to 1.0 F

985
00:44:04,570 --> 00:44:11,920
right and oops

986
00:44:07,440 --> 00:44:21,990
negative one point away and grab buffer

987
00:44:11,920 --> 00:44:24,610
P is less than one point here oops I

988
00:44:21,989 --> 00:44:32,259
wanted that in world space so I actually

989
00:44:24,610 --> 00:44:34,150
want the Delta if Delta Z and Delta Z so

990
00:44:32,260 --> 00:44:38,260
if it's not if it's far from the camera

991
00:44:34,150 --> 00:44:40,470
I'm not gonna draw it right and so I

992
00:44:38,260 --> 00:44:45,190
just wanted to see if I could make that

993
00:44:40,469 --> 00:44:47,429
do something reasonable right let's take

994
00:44:45,190 --> 00:44:47,429
a look

995
00:44:49,699 --> 00:45:08,779
oh how long it takes we really need to

996
00:45:03,650 --> 00:45:11,360
optimize the renderer I'm not one for

997
00:45:08,780 --> 00:45:15,140
slow turnaround times they always drive

998
00:45:11,360 --> 00:45:17,660
me they drive me batty all right so

999
00:45:15,139 --> 00:45:19,369
there's one layer if I'm not sure why

1000
00:45:17,659 --> 00:45:20,929
we're still we're not filling in over

1001
00:45:19,369 --> 00:45:22,909
here I wonder thoughts cuz we are we've

1002
00:45:20,929 --> 00:45:25,699
overflowed the number that we have to

1003
00:45:22,909 --> 00:45:29,559
use that couldn't either because now

1004
00:45:25,699 --> 00:45:29,559
we're doing so many depth layers there

1005
00:45:29,860 --> 00:45:45,950
but yeah so let's see if I come into the

1006
00:45:36,650 --> 00:45:50,930
game eventually hello it doesn't seem to

1007
00:45:45,949 --> 00:45:55,579
want me to do yeah it's crazy how slow

1008
00:45:50,929 --> 00:45:58,819
that is now it's gonna feel really good

1009
00:45:55,579 --> 00:46:03,250
to optimize this so I guess I mean

1010
00:45:58,820 --> 00:46:09,680
here's what I would say about this so I

1011
00:46:03,250 --> 00:46:12,230
feel like it wouldn't be it really

1012
00:46:09,679 --> 00:46:13,909
wouldn't be that onerous for us to

1013
00:46:12,230 --> 00:46:17,420
optimize some of this stuff it wouldn't

1014
00:46:13,909 --> 00:46:21,170
be inappropriate for us to optimize some

1015
00:46:17,420 --> 00:46:22,849
of this stuff right now because although

1016
00:46:21,170 --> 00:46:25,369
we haven't had a chance to finish what

1017
00:46:22,849 --> 00:46:26,960
we want to do for lighting the stuff

1018
00:46:25,369 --> 00:46:28,849
like the ground buffer compositing

1019
00:46:26,960 --> 00:46:30,679
ground buffer compositing we could

1020
00:46:28,849 --> 00:46:33,019
easily go ahead and do the optimization

1021
00:46:30,679 --> 00:46:34,849
for right because that's going to use a

1022
00:46:33,019 --> 00:46:37,190
bitmap lit that doesn't actually have

1023
00:46:34,849 --> 00:46:41,000
any lighting on it to produce those

1024
00:46:37,190 --> 00:46:44,360
tiles so I feel like because that's

1025
00:46:41,000 --> 00:46:47,210
causing such a problem we could optimize

1026
00:46:44,360 --> 00:46:51,320
the ground buffer build and then we

1027
00:46:47,210 --> 00:46:52,760
could call that that version the blip

1028
00:46:51,320 --> 00:46:54,470
that doesn't actually do anything that

1029
00:46:52,760 --> 00:46:55,610
doesn't actually do any lighting we

1030
00:46:54,469 --> 00:46:56,839
could call the blip that us do any

1031
00:46:55,610 --> 00:46:59,150
lighting for drawing the ground buffers

1032
00:46:56,840 --> 00:47:01,220
as well until we get the lighting

1033
00:46:59,150 --> 00:47:03,650
finalized and then we write the

1034
00:47:01,219 --> 00:47:05,059
optimized version of that

1035
00:47:03,650 --> 00:47:06,470
because there's nothing we're really

1036
00:47:05,059 --> 00:47:10,299
gonna be able to do when it's going too

1037
00:47:06,469 --> 00:47:13,009
slowly and we know we can speed this up

1038
00:47:10,300 --> 00:47:15,289
dramatically right from where it is so I

1039
00:47:13,010 --> 00:47:17,840
think that might just be the thing we do

1040
00:47:15,289 --> 00:47:19,759
next I don't know because hey we've got

1041
00:47:17,840 --> 00:47:22,579
a thing that's totally not usable right

1042
00:47:19,760 --> 00:47:24,290
now at speed so it would feel really

1043
00:47:22,579 --> 00:47:26,360
good to optimize it and usually that

1044
00:47:24,289 --> 00:47:27,590
seems to me to be the best time to do it

1045
00:47:26,360 --> 00:47:28,990
right because we're gonna be excited

1046
00:47:27,590 --> 00:47:31,280
about it and it's gonna be cool

1047
00:47:28,989 --> 00:47:33,949
so I would say maybe that's what we're

1048
00:47:31,280 --> 00:47:35,540
leave it I would say maybe that's what

1049
00:47:33,949 --> 00:47:39,829
we do next week next week we'll be like

1050
00:47:35,539 --> 00:47:41,929
our optimize the renderer pass and we'll

1051
00:47:39,829 --> 00:47:44,239
go ahead and do one optimized pixel fill

1052
00:47:41,929 --> 00:47:47,869
routine it'll be the unlit pixel fill

1053
00:47:44,239 --> 00:47:50,599
flit routine and we'll just do one there

1054
00:47:47,869 --> 00:47:52,699
because we can even do one to throw away

1055
00:47:50,599 --> 00:47:54,889
right we can do one that just you know

1056
00:47:52,699 --> 00:47:56,750
that we use temporarily because we'll

1057
00:47:54,889 --> 00:47:58,699
learn some stuff from optimizing that

1058
00:47:56,750 --> 00:48:00,769
that will guide us in our optimizations

1059
00:47:58,699 --> 00:48:03,109
for other stuff so that seems to be a

1060
00:48:00,769 --> 00:48:05,900
good idea to me that's what I think

1061
00:48:03,110 --> 00:48:08,480
we'll probably want to do that seems

1062
00:48:05,900 --> 00:48:10,309
that seems good alright so I'll leave it

1063
00:48:08,480 --> 00:48:11,449
there for now I think that's really all

1064
00:48:10,309 --> 00:48:14,469
I want to do it looks like those

1065
00:48:11,449 --> 00:48:16,669
actually layer in properly as well so

1066
00:48:14,469 --> 00:48:17,119
yeah we're pretty good we're in pretty

1067
00:48:16,670 --> 00:48:18,980
good shape

1068
00:48:17,119 --> 00:48:20,569
really what we're gonna have to do is

1069
00:48:18,980 --> 00:48:23,079
just go ahead and do one optimization

1070
00:48:20,570 --> 00:48:25,309
pass just so we can have a good renderer

1071
00:48:23,079 --> 00:48:29,230
feel so that things run fast enough

1072
00:48:25,309 --> 00:48:31,909
right but yeah I think that's about it

1073
00:48:29,230 --> 00:48:32,809
all right I'm pretty happy with that and

1074
00:48:31,909 --> 00:48:34,279
I've been wanting to do the optimization

1075
00:48:32,809 --> 00:48:35,989
stuff in the renderer for a while so it

1076
00:48:34,280 --> 00:48:37,100
gives me a good excuse it's like well we

1077
00:48:35,989 --> 00:48:39,500
can't really do anything if it's gonna

1078
00:48:37,099 --> 00:48:41,269
run that slowly you know other than just

1079
00:48:39,500 --> 00:48:42,650
turning stuff off and so I feel like

1080
00:48:41,269 --> 00:48:44,150
maybe now's a good time just go ahead

1081
00:48:42,650 --> 00:48:48,170
and do that and so what we could do you

1082
00:48:44,150 --> 00:48:49,910
know in there is essentially we've got

1083
00:48:48,170 --> 00:48:53,619
our draw rectangle slowly we can

1084
00:48:49,909 --> 00:48:56,149
basically make a draw a rectangle slowly

1085
00:48:53,619 --> 00:48:58,069
version that doesn't do lighting right

1086
00:48:56,150 --> 00:49:00,110
because since we don't really know how

1087
00:48:58,070 --> 00:49:01,460
we want to do the lighting yet you do a

1088
00:49:00,110 --> 00:49:04,820
draw a rectangle slowly that doesn't do

1089
00:49:01,460 --> 00:49:06,349
the lighting and that's optimized so

1090
00:49:04,820 --> 00:49:07,610
it'll actually do it'll just do this

1091
00:49:06,349 --> 00:49:10,639
exact same thing here but it'll be

1092
00:49:07,610 --> 00:49:13,670
optimized you know it'll be Cindy

1093
00:49:10,639 --> 00:49:15,389
optimized so we can go through and and

1094
00:49:13,670 --> 00:49:19,490
have all that work

1095
00:49:15,389 --> 00:49:20,818
that seems that seems reasonable to me

1096
00:49:19,489 --> 00:49:22,439
all right

1097
00:49:20,818 --> 00:49:25,969
so that's what we'll do we'll go to the

1098
00:49:22,440 --> 00:49:25,970
QA let's see here

1099
00:49:36,460 --> 00:49:48,889
so if you have a question go put Q colon

1100
00:49:39,559 --> 00:49:50,420
in front of it sorry seven there are 15

1101
00:49:48,889 --> 00:49:53,420
minutes left of the stream since you

1102
00:49:50,420 --> 00:49:55,269
went over in the pre stream there are

1103
00:49:53,420 --> 00:50:00,588
but do we really want a starch

1104
00:49:55,269 --> 00:50:03,980
optimization right now I don't know

1105
00:50:00,588 --> 00:50:07,960
that's a good question right I'm not

1106
00:50:03,980 --> 00:50:10,460
sure if that's a good idea or not I

1107
00:50:07,960 --> 00:50:12,349
don't think I want to I think I want to

1108
00:50:10,460 --> 00:50:14,809
stop it and then on Monday will you know

1109
00:50:12,349 --> 00:50:17,059
will do the beginning of the

1110
00:50:14,809 --> 00:50:19,338
optimization stuff and what we could do

1111
00:50:17,059 --> 00:50:22,549
is maybe take an extra 50 minutes that

1112
00:50:19,338 --> 00:50:24,259
day or something like that right no

1113
00:50:22,550 --> 00:50:27,769
stream tomorrow right that is correct no

1114
00:50:24,260 --> 00:50:29,150
stream tomorrow grumpy giant 56 how are

1115
00:50:27,769 --> 00:50:30,739
you going to handle the ground chunks on

1116
00:50:29,150 --> 00:50:32,660
the further layers would disappear while

1117
00:50:30,739 --> 00:50:34,039
still on screen well you need to expand

1118
00:50:32,659 --> 00:50:37,159
the visibility range based on layer

1119
00:50:34,039 --> 00:50:43,369
distance so I'm not sure what we want to

1120
00:50:37,159 --> 00:50:44,868
do about that but I think my my gut says

1121
00:50:43,369 --> 00:50:47,240
that what we'll want to do is

1122
00:50:44,869 --> 00:50:50,230
essentially have what amounts to like a

1123
00:50:47,239 --> 00:50:53,449
fog concept like a fog of war basically

1124
00:50:50,230 --> 00:50:56,420
because we that would apply not just to

1125
00:50:53,449 --> 00:50:58,789
ground chunks but to everything so if we

1126
00:50:56,420 --> 00:51:00,318
do the perspective foreshortening which

1127
00:50:58,789 --> 00:51:02,750
looks kind of cool so I feel like we

1128
00:51:00,318 --> 00:51:04,338
want to keep it if we do the perspective

1129
00:51:02,750 --> 00:51:06,349
foreshortening I feel like we just want

1130
00:51:04,338 --> 00:51:08,509
to introduce some art like an artistic

1131
00:51:06,349 --> 00:51:11,359
conceit to the style of the game

1132
00:51:08,510 --> 00:51:14,599
basically which is that you know only a

1133
00:51:11,358 --> 00:51:17,000
certain range is visible and it fogs out

1134
00:51:14,599 --> 00:51:18,769
to black or something there because

1135
00:51:17,000 --> 00:51:22,699
otherwise you could see just really far

1136
00:51:18,769 --> 00:51:24,559
and I mean maybe that's fine I mean

1137
00:51:22,699 --> 00:51:25,399
performance wise we may be fine we may

1138
00:51:24,559 --> 00:51:28,699
be able to handle it just fine

1139
00:51:25,400 --> 00:51:29,900
especially on the GPU path right but I

1140
00:51:28,699 --> 00:51:33,858
don't know if it has negative

1141
00:51:29,900 --> 00:51:35,568
implications for gameplay where like you

1142
00:51:33,858 --> 00:51:37,759
shouldn't be able to see all this stuff

1143
00:51:35,568 --> 00:51:41,838
that's you know that's around there

1144
00:51:37,760 --> 00:51:43,369
right so I don't know I think that's

1145
00:51:41,838 --> 00:51:45,588
going to have to be a gameplay call at

1146
00:51:43,369 --> 00:51:47,630
the end of the day and for now what

1147
00:51:45,588 --> 00:51:48,980
we'll do is we'll just let it be

1148
00:51:47,630 --> 00:51:50,420
but if we

1149
00:51:48,980 --> 00:51:53,539
turns out the gameplay it's fine well

1150
00:51:50,420 --> 00:51:56,180
then we will just expand we will just

1151
00:51:53,539 --> 00:52:00,559
expand the query region to be basically

1152
00:51:56,179 --> 00:52:03,980
like a you know like a pyramid or a

1153
00:52:00,559 --> 00:52:07,779
frustum as they might call it but if not

1154
00:52:03,980 --> 00:52:07,780
then we'll leave it as a rectangle

1155
00:52:16,579 --> 00:52:24,139
some elements in the ground are being

1156
00:52:19,739 --> 00:52:24,139
repeated now for some reason

1157
00:52:25,519 --> 00:52:32,400
what does repeated now meme in this case

1158
00:52:29,809 --> 00:52:43,409
some elements in the ground are being

1159
00:52:32,400 --> 00:52:44,670
repeated now yes all right can you be

1160
00:52:43,409 --> 00:52:45,960
more specific about what that means I'm

1161
00:52:44,670 --> 00:52:48,170
not sure what that means so I can't

1162
00:52:45,960 --> 00:52:48,170
really

1163
00:52:54,719 --> 00:52:58,629
corpse Lulu I'm afraid of using sorting

1164
00:52:57,400 --> 00:53:00,670
and stuff when making games because I'm

1165
00:52:58,630 --> 00:53:03,430
afraid that if I get too many items it

1166
00:53:00,670 --> 00:53:06,639
will slow down or shall I not worry

1167
00:53:03,429 --> 00:53:08,980
about that well you should worry about

1168
00:53:06,639 --> 00:53:10,449
it obviously but you should worry about

1169
00:53:08,980 --> 00:53:11,949
to the extent where you figure out how

1170
00:53:10,449 --> 00:53:12,939
many items you're likely to have and

1171
00:53:11,949 --> 00:53:16,058
then you figure out whether or not you

1172
00:53:12,940 --> 00:53:17,499
can sort that many right if you're

1173
00:53:16,059 --> 00:53:18,819
talking about having a thousand items

1174
00:53:17,498 --> 00:53:20,828
then you can definitely sort that many

1175
00:53:18,818 --> 00:53:22,599
if you're talking about having a hundred

1176
00:53:20,829 --> 00:53:26,440
million items then no you probably can't

1177
00:53:22,599 --> 00:53:28,180
right and so the question is not whether

1178
00:53:26,440 --> 00:53:29,889
you can sort stuff in a game the

1179
00:53:28,179 --> 00:53:32,588
question is how much stuff you can sort

1180
00:53:29,889 --> 00:53:34,719
in a game and you need to have some idea

1181
00:53:32,588 --> 00:53:36,038
of what the maximum bound is of the

1182
00:53:34,719 --> 00:53:44,368
number of items that you might be

1183
00:53:36,039 --> 00:53:46,329
working with right and so that's really

1184
00:53:44,369 --> 00:53:48,460
but that's true of everything right

1185
00:53:46,329 --> 00:53:52,028
that's true of any algorithm that isn't

1186
00:53:48,460 --> 00:53:53,470
Oh n you need to have some conception of

1187
00:53:52,028 --> 00:53:55,059
how it's going to scale up I mean even

1188
00:53:53,469 --> 00:53:57,338
onu have to have some idea of how it's

1189
00:53:55,059 --> 00:53:58,900
going to scale right to ha you could

1190
00:53:57,338 --> 00:54:00,369
always pick a number of items that will

1191
00:53:58,900 --> 00:54:02,769
break whatever the algorithm is that

1192
00:54:00,369 --> 00:54:05,369
you're using if it if it has to iterate

1193
00:54:02,768 --> 00:54:05,368
over things

1194
00:54:09,599 --> 00:54:13,799
I think it'd be really cool to see far

1195
00:54:11,969 --> 00:54:15,929
down for example floors made of ice or

1196
00:54:13,800 --> 00:54:17,490
glass yeah I agree with that

1197
00:54:15,929 --> 00:54:19,199
that would be kind of cool if you're in

1198
00:54:17,489 --> 00:54:21,569
a nice area in fact I'm gonna add that

1199
00:54:19,199 --> 00:54:23,389
to the thing since we've got it that

1200
00:54:21,570 --> 00:54:28,309
does sound like it would be pretty cool

1201
00:54:23,389 --> 00:54:28,309
so let me open up the reminders file

1202
00:54:42,059 --> 00:54:50,690
okay um

1203
00:54:45,239 --> 00:54:50,689
yeah I like that I like that a lot

1204
00:55:05,110 --> 00:55:09,110
well the memory footprint keep getting

1205
00:55:07,340 --> 00:55:11,300
bigger there's so much for a pixelated

1206
00:55:09,110 --> 00:55:11,960
being stored right now is this a concern

1207
00:55:11,300 --> 00:55:13,850
at all

1208
00:55:11,960 --> 00:55:15,619
will we be compressing data to save RAM

1209
00:55:13,849 --> 00:55:17,179
I imagine not but it still feels like

1210
00:55:15,619 --> 00:55:19,579
we're using too much memory for just a

1211
00:55:17,179 --> 00:55:22,519
2-d game correct me if I correct me if

1212
00:55:19,579 --> 00:55:27,559
and because I'm wrong so here's the

1213
00:55:22,519 --> 00:55:32,719
thing in terms of memory footprint this

1214
00:55:27,559 --> 00:55:34,820
is the way I look at it right the thing

1215
00:55:32,719 --> 00:55:36,889
you don't want to do is use memory for

1216
00:55:34,820 --> 00:55:38,570
no benefit right so like let's say

1217
00:55:36,889 --> 00:55:40,429
you're you know the Facebook front-end

1218
00:55:38,570 --> 00:55:41,720
for iPhone right and you just eat all of

1219
00:55:40,429 --> 00:55:44,029
the memory but you're not actually doing

1220
00:55:41,719 --> 00:55:47,389
anything it's just a stupid picture you

1221
00:55:44,030 --> 00:55:48,800
need to scroll or whatever that makes me

1222
00:55:47,389 --> 00:55:50,089
super grumpy because I'm like okay

1223
00:55:48,800 --> 00:55:51,590
you're making the performance of this

1224
00:55:50,090 --> 00:55:53,570
thing chuggy and it's weird and the

1225
00:55:51,590 --> 00:55:54,620
paging slow and it's crashing because

1226
00:55:53,570 --> 00:55:56,210
it's using too much memory and all this

1227
00:55:54,619 --> 00:55:58,130
other stuff and you didn't actually do

1228
00:55:56,210 --> 00:56:00,860
anything right you just you displayed

1229
00:55:58,130 --> 00:56:06,530
something really trivial and that makes

1230
00:56:00,860 --> 00:56:08,780
me very angry right but I am not angry

1231
00:56:06,530 --> 00:56:10,970
at all and in fact I am glad if a

1232
00:56:08,780 --> 00:56:13,970
program uses all of the memory in the

1233
00:56:10,969 --> 00:56:17,599
machine to do something cool right and

1234
00:56:13,969 --> 00:56:20,000
so what I would say is when this when

1235
00:56:17,599 --> 00:56:22,639
we're done with this game what we would

1236
00:56:20,000 --> 00:56:24,139
like to have happen is we would like to

1237
00:56:22,639 --> 00:56:27,589
take however much memories in the

1238
00:56:24,139 --> 00:56:30,289
machine and use all of it for something

1239
00:56:27,590 --> 00:56:32,210
cool right we would like to have a

1240
00:56:30,289 --> 00:56:34,519
plausible argument why every single

1241
00:56:32,210 --> 00:56:37,909
thing is you is being used for a cool

1242
00:56:34,519 --> 00:56:40,550
reason right and so if a you know if a

1243
00:56:37,909 --> 00:56:43,940
gamer bought a 16 megabyte obsessively

1244
00:56:40,550 --> 00:56:45,650
gigabyte of RAM machine right what we

1245
00:56:43,940 --> 00:56:49,610
want to do is use that 16 gigabytes of

1246
00:56:45,650 --> 00:56:51,530
RAM to give them game right and so it

1247
00:56:49,610 --> 00:56:53,450
doesn't matter that the games 2d I still

1248
00:56:51,530 --> 00:56:56,120
want to find as many things as I can use

1249
00:56:53,449 --> 00:56:58,849
the end users computer to give them

1250
00:56:56,119 --> 00:57:01,609
something cool if we're just wasting the

1251
00:56:58,849 --> 00:57:02,750
memory that's not so good but if we're

1252
00:57:01,610 --> 00:57:03,530
actually doing something interesting

1253
00:57:02,750 --> 00:57:06,230
then that's good

1254
00:57:03,530 --> 00:57:07,700
and so to me stuff like generating the

1255
00:57:06,230 --> 00:57:09,800
ground chunks is a great use of memory

1256
00:57:07,699 --> 00:57:11,719
because it means that now the user has

1257
00:57:09,800 --> 00:57:13,760
unique textures everywhere for their

1258
00:57:11,719 --> 00:57:16,909
whole world and that was a good use of

1259
00:57:13,760 --> 00:57:18,370
their system resources and so if a 2-d

1260
00:57:16,909 --> 00:57:20,489
game normally can't use

1261
00:57:18,369 --> 00:57:22,869
a 4 gigabyte graphics card or something

1262
00:57:20,489 --> 00:57:24,759
well here's a way we can start to try

1263
00:57:22,869 --> 00:57:28,029
and use some of that and it produces a

1264
00:57:24,760 --> 00:57:30,030
good effect right so the goal is never

1265
00:57:28,030 --> 00:57:31,930
to use the least amount of memory

1266
00:57:30,030 --> 00:57:33,190
there's really no benefit to that

1267
00:57:31,929 --> 00:57:34,839
because the memory in the machine is the

1268
00:57:33,190 --> 00:57:37,840
memory in the machine what you want to

1269
00:57:34,840 --> 00:57:39,789
do is use all of the memory but you want

1270
00:57:37,840 --> 00:57:41,650
to use it for something good you just

1271
00:57:39,789 --> 00:57:43,690
don't want to waste it you want to have

1272
00:57:41,650 --> 00:57:46,530
a reason why each part of its being used

1273
00:57:43,690 --> 00:57:51,190
and an argument of why using that extra

1274
00:57:46,530 --> 00:57:52,810
200 6 Meg's or whatever in here or in

1275
00:57:51,190 --> 00:57:56,369
another 50 Meg's there or whatever is

1276
00:57:52,809 --> 00:57:56,369
actually giving the user something good

1277
00:58:01,199 --> 00:58:05,559
or the ground chunks stored in some data

1278
00:58:03,610 --> 00:58:08,590
structure or are they recalculating each

1279
00:58:05,559 --> 00:58:09,820
frame at the moment they are not really

1280
00:58:08,590 --> 00:58:11,289
stored in a data structure but they're

1281
00:58:09,820 --> 00:58:14,380
not rejected every frame they're just in

1282
00:58:11,289 --> 00:58:15,789
an array and so what I wanted to do and

1283
00:58:14,380 --> 00:58:17,200
we talked about this briefly but we

1284
00:58:15,789 --> 00:58:19,059
haven't gotten there yet is they'll

1285
00:58:17,199 --> 00:58:22,529
probably end up being stored in the

1286
00:58:19,059 --> 00:58:24,849
world structure that's what I suspect

1287
00:58:22,530 --> 00:58:26,830
we're kind of going that direction you

1288
00:58:24,849 --> 00:58:32,860
can see that we almost already did that

1289
00:58:26,829 --> 00:58:34,210
it's right here right so eventually I

1290
00:58:32,860 --> 00:58:40,150
think that's what we'll probably do we

1291
00:58:34,210 --> 00:58:43,210
haven't quite gotten there yet there was

1292
00:58:40,150 --> 00:58:46,769
a horizontal repetition of some splats

1293
00:58:43,210 --> 00:58:46,769
but not all of them

1294
00:58:49,699 --> 00:58:59,349
a horizontal repetition of some splats

1295
00:58:54,670 --> 00:58:59,349
but not all of them

1296
00:59:04,150 --> 00:59:08,490
I'm so I'm sorry I still don't really

1297
00:59:05,858 --> 00:59:08,489
know what that means

1298
00:59:16,250 --> 00:59:20,369
do you think you are roughly 1/5 of the

1299
00:59:18,750 --> 00:59:21,059
way through completing the game at this

1300
00:59:20,369 --> 00:59:24,289
point

1301
00:59:21,059 --> 00:59:24,289
yes I do

1302
00:59:24,679 --> 00:59:28,829
well we're not quite one fifth wheel of

1303
00:59:27,480 --> 00:59:31,889
a little bit more to go

1304
00:59:28,829 --> 00:59:35,159
timewise to one fifth but yeah I think

1305
00:59:31,889 --> 00:59:37,259
we're about one fifth we'll see when we

1306
00:59:35,159 --> 00:59:38,879
get to day 200 that's where I was

1307
00:59:37,260 --> 00:59:39,770
expecting to kind of stop working on

1308
00:59:38,880 --> 00:59:42,660
engine stuff

1309
00:59:39,769 --> 00:59:46,889
so are we halfway through the engine

1310
00:59:42,659 --> 00:59:47,480
right now yet probably that that sounds

1311
00:59:46,889 --> 00:59:51,900
about right

1312
00:59:47,480 --> 00:59:56,599
so seems correct to me

1313
00:59:51,900 --> 01:00:06,750
all right so repetition of horizontal

1314
00:59:56,599 --> 01:00:12,740
flats see if we can zoom this in a

1315
01:00:06,750 --> 01:00:12,739
little repetition of horizontal splats

1316
01:00:16,809 --> 01:00:20,990
so I don't I mean what you might be

1317
01:00:19,338 --> 01:00:22,400
seeing is just the fact that we don't

1318
01:00:20,989 --> 01:00:23,689
have very many flats in there and we're

1319
01:00:22,400 --> 01:00:25,490
not doing anything intelligent with them

1320
01:00:23,690 --> 01:00:27,769
so there's they tend to form similar

1321
01:00:25,489 --> 01:00:32,419
shape sometimes because of the low

1322
01:00:27,768 --> 01:00:33,979
number like that and that but they're

1323
01:00:32,420 --> 01:00:36,200
actually different right like you can

1324
01:00:33,980 --> 01:00:44,420
see that these things are actually not

1325
01:00:36,199 --> 01:00:49,489
the same but I don't know if that's what

1326
01:00:44,420 --> 01:00:51,230
you're thinking but yeah they're not

1327
01:00:49,489 --> 01:00:54,399
exactly they're they're actually

1328
01:00:51,230 --> 01:00:54,400
different right

1329
01:01:04,329 --> 01:01:09,200
when all Ram even on the GPU is used

1330
01:01:07,400 --> 01:01:10,460
when the game is put into the background

1331
01:01:09,199 --> 01:01:11,868
switching a short time to their

1332
01:01:10,460 --> 01:01:14,269
application all the memory has to be

1333
01:01:11,869 --> 01:01:15,858
swapped in and out right even to the GPU

1334
01:01:14,269 --> 01:01:17,539
or what strategy is used to prevent

1335
01:01:15,858 --> 01:01:20,568
swapping in and out of big memory chunks

1336
01:01:17,539 --> 01:01:23,900
so not all of it gets wok just however

1337
01:01:20,568 --> 01:01:25,699
much the application needs but yet it

1338
01:01:23,900 --> 01:01:27,019
gets swapped in and out and the answer

1339
01:01:25,699 --> 01:01:29,838
is you don't do anything to prevent that

1340
01:01:27,019 --> 01:01:30,949
right that's if the user wants to switch

1341
01:01:29,838 --> 01:01:32,539
to an application in the middle of

1342
01:01:30,949 --> 01:01:35,509
playing game then they get whatever they

1343
01:01:32,539 --> 01:01:36,710
get right as far as I'm concerned that

1344
01:01:35,510 --> 01:01:39,050
means they didn't care about how the

1345
01:01:36,710 --> 01:01:40,639
game experience was if you're in the

1346
01:01:39,050 --> 01:01:44,630
middle of switching to you know

1347
01:01:40,639 --> 01:01:46,068
Microsoft Excel or something then I

1348
01:01:44,630 --> 01:01:48,170
don't care about your performance right

1349
01:01:46,068 --> 01:01:49,789
like performance is only for someone

1350
01:01:48,170 --> 01:01:52,400
who's willing to run the game dedicated

1351
01:01:49,789 --> 01:01:55,429
and give it all the resources in their

1352
01:01:52,400 --> 01:01:58,250
machine and if they choose to give it

1353
01:01:55,429 --> 01:02:00,289
less resources than that then they're

1354
01:01:58,250 --> 01:02:03,318
gonna have a worse experience right and

1355
01:02:00,289 --> 01:02:08,809
that's fine and that's our decision and

1356
01:02:03,318 --> 01:02:12,170
that's also you know why I tend to think

1357
01:02:08,809 --> 01:02:14,449
like I like this sort of I would prefer

1358
01:02:12,170 --> 01:02:15,950
it if there was a more rigid boundary

1359
01:02:14,449 --> 01:02:17,809
there like I don't really like the fact

1360
01:02:15,949 --> 01:02:19,338
that Windows does multitasking on games

1361
01:02:17,809 --> 01:02:21,318
and stuff I would prefer that you

1362
01:02:19,338 --> 01:02:23,539
basically said okay we're gonna run this

1363
01:02:21,318 --> 01:02:24,829
game now and it gets all the resources

1364
01:02:23,539 --> 01:02:27,170
and if you want to switch out to

1365
01:02:24,829 --> 01:02:31,420
something else then it will essentially

1366
01:02:27,170 --> 01:02:34,338
pause the game and do sort of a very

1367
01:02:31,420 --> 01:02:36,108
significant swap out event where you

1368
01:02:34,338 --> 01:02:37,338
don't expect it to sort of half keep

1369
01:02:36,108 --> 01:02:38,630
running in the background and stuff like

1370
01:02:37,338 --> 01:02:44,049
that I would rather it be a little more

1371
01:02:38,630 --> 01:02:44,050
console like in that way but yeah

1372
01:02:45,250 --> 01:02:49,010
are we rotating and scaling the slaps on

1373
01:02:47,780 --> 01:02:52,880
the ground chunks to get the maximum

1374
01:02:49,010 --> 01:02:56,839
variability not yet we will do it

1375
01:02:52,880 --> 01:03:00,349
scaling rotation on the other hand we

1376
01:02:56,838 --> 01:03:01,880
can't quite do I don't think because the

1377
01:03:00,349 --> 01:03:03,230
the things kind of have a perspective

1378
01:03:01,880 --> 01:03:05,030
baked into them so I don't know how much

1379
01:03:03,230 --> 01:03:09,039
rotation we can do but we can scale them

1380
01:03:05,030 --> 01:03:09,040
in the future when we do the thing I

1381
01:03:09,670 --> 01:03:13,579
noticed the hero's head would clip

1382
01:03:11,659 --> 01:03:15,199
through the trees on occasion and then

1383
01:03:13,579 --> 01:03:16,339
it would fix itself what's causing that

1384
01:03:15,199 --> 01:03:17,389
that is actually

1385
01:03:16,338 --> 01:03:19,338
the same things I've talked about with

1386
01:03:17,389 --> 01:03:20,690
the sorting with the ground layers we

1387
01:03:19,338 --> 01:03:22,068
don't sort anything right now we're just

1388
01:03:20,690 --> 01:03:25,249
drawing everything to the screen in the

1389
01:03:22,068 --> 01:03:26,449
order in which we process it and so what

1390
01:03:25,248 --> 01:03:27,889
you were seeing there is just whatever

1391
01:03:26,449 --> 01:03:29,689
happened to be drawn first it's actually

1392
01:03:27,889 --> 01:03:31,670
the same reason why like say this tree

1393
01:03:29,690 --> 01:03:33,889
appears behind this one even though

1394
01:03:31,670 --> 01:03:36,380
logically it should be in front so what

1395
01:03:33,889 --> 01:03:38,748
we need to do to change that is we will

1396
01:03:36,380 --> 01:03:41,539
actually end up sorting stuff as it

1397
01:03:38,748 --> 01:03:44,389
comes out and will render it in the

1398
01:03:41,539 --> 01:03:47,380
correct order and that will fix the that

1399
01:03:44,389 --> 01:03:47,379
will fix both of those problems

1400
01:03:55,400 --> 01:04:13,200
alright looks like that's about it go

1401
01:04:00,750 --> 01:04:14,909
ahead and close this down here yeah okay

1402
01:04:13,199 --> 01:04:16,230
thanks everyone for joining me for

1403
01:04:14,909 --> 01:04:17,489
another episode of hand made here oh

1404
01:04:16,230 --> 01:04:19,048
it's been a pleasure coding with you as

1405
01:04:17,489 --> 01:04:20,759
always I think we have gotten to the

1406
01:04:19,048 --> 01:04:22,170
point where it's time for us to do some

1407
01:04:20,760 --> 01:04:24,089
render optimizations so I think that's

1408
01:04:22,170 --> 01:04:25,680
what we're gonna do next week we are off

1409
01:04:24,088 --> 01:04:27,949
tomorrow there is no stream tomorrow on

1410
01:04:25,679 --> 01:04:29,969
Friday well spend a bit of a short week

1411
01:04:27,949 --> 01:04:33,298
but we should be back for a full week

1412
01:04:29,969 --> 01:04:34,769
next week Monday through Friday so I

1413
01:04:33,298 --> 01:04:35,849
hope you will join us for that it'll

1414
01:04:34,769 --> 01:04:37,949
should be fun when we start talking

1415
01:04:35,849 --> 01:04:39,119
about optimization topics so I'll try to

1416
01:04:37,949 --> 01:04:41,730
do a little bit of an introduction to

1417
01:04:39,119 --> 01:04:44,338
how to time code and then we'll talk a

1418
01:04:41,730 --> 01:04:45,568
little bit about how to do Sindhi

1419
01:04:44,338 --> 01:04:47,219
optimizations and that sort of stuff so

1420
01:04:45,568 --> 01:04:49,798
we'll start covering that stuff next

1421
01:04:47,219 --> 01:04:52,048
week and we'll get into some of the how

1422
01:04:49,798 --> 01:04:54,119
to you know basically figure out what's

1423
01:04:52,048 --> 01:04:56,639
actually taking the time and make a plan

1424
01:04:54,119 --> 01:04:57,599
about how we're going to solve it so I

1425
01:04:56,639 --> 01:04:59,190
think that should be a lot of fun I hope

1426
01:04:57,599 --> 01:05:00,088
you join me for that in the meantime if

1427
01:04:59,190 --> 01:05:02,220
you would like to play around with the

1428
01:05:00,088 --> 01:05:03,900
source code you can always get a copy of

1429
01:05:02,219 --> 01:05:05,368
it by going to hand-made here at Oregon

1430
01:05:03,900 --> 01:05:07,710
pre-ordering the game it comes with a

1431
01:05:05,369 --> 01:05:09,450
source code and you can play around with

1432
01:05:07,710 --> 01:05:11,490
that and and have fun learning from it

1433
01:05:09,449 --> 01:05:12,598
and all that sort of stuff if you want

1434
01:05:11,489 --> 01:05:14,368
to support the video series we do have a

1435
01:05:12,599 --> 01:05:16,140
patreon page you can pledge to we very

1436
01:05:14,369 --> 01:05:17,579
much appreciate that we also have a

1437
01:05:16,139 --> 01:05:19,318
forum site we can go to check out the

1438
01:05:17,579 --> 01:05:20,760
anti episode guide you can post

1439
01:05:19,318 --> 01:05:21,960
questions on the forums there and you

1440
01:05:20,760 --> 01:05:24,299
can also get ports to Mac and Linux

1441
01:05:21,960 --> 01:05:25,949
stuff like that and then there's also a

1442
01:05:24,298 --> 01:05:26,909
Twitter feed which tweets the schedule

1443
01:05:25,949 --> 01:05:28,348
at you so if you want to catch the

1444
01:05:26,909 --> 01:05:30,659
stream live that's the easiest way to

1445
01:05:28,349 --> 01:05:32,818
stay up to date on that so definitely

1446
01:05:30,659 --> 01:05:34,348
check that out if you've got to get a

1447
01:05:32,818 --> 01:05:35,940
chance so again there's no stream

1448
01:05:34,349 --> 01:05:38,640
tomorrow so I will see you guys on

1449
01:05:35,940 --> 01:05:40,858
Monday 5 p.m. Pacific Standard Time back

1450
01:05:38,639 --> 01:05:42,960
here on Twitch until then I hope

1451
01:05:40,858 --> 01:05:45,529
everyone has a wonderful weekend and I

1452
01:05:42,960 --> 01:05:45,530
will see you later

