1
00:00:00,000 --> 00:00:02,730
hello everyone and welcome to handmade

2
00:00:01,469 --> 00:00:06,569
heroes chair we code a complete game

3
00:00:02,730 --> 00:00:07,589
live on stream we are kind of at a point

4
00:00:06,569 --> 00:00:08,759
where we've got a lot of different

5
00:00:07,589 --> 00:00:12,509
things we can't be working on right now

6
00:00:08,759 --> 00:00:14,669
that's a good thing and I think today I

7
00:00:12,509 --> 00:00:16,649
could bounce over to start cleaning up

8
00:00:14,669 --> 00:00:19,649
the lighting or the camera system camera

9
00:00:16,649 --> 00:00:20,640
systems big on my list so I feel like

10
00:00:19,649 --> 00:00:22,349
there's some stuff we want to do there

11
00:00:20,640 --> 00:00:24,539
what I may do is leave that till next

12
00:00:22,350 --> 00:00:26,849
weekend and maybe spend all weekend do

13
00:00:24,539 --> 00:00:29,820
and clean up on that whole like region

14
00:00:26,849 --> 00:00:31,710
base stuff because right now at Mac I'll

15
00:00:29,820 --> 00:00:33,299
show you what I'm talking about I just

16
00:00:31,710 --> 00:00:38,969
you understand what what I'm thinking

17
00:00:33,299 --> 00:00:41,369
about here if you remember when I said

18
00:00:38,969 --> 00:00:42,660
we were kind of gonna go over to the

19
00:00:41,369 --> 00:00:43,709
world gem stuff because I wanted to

20
00:00:42,659 --> 00:00:46,619
start making things I could actually

21
00:00:43,710 --> 00:00:49,620
look at so you can see kind of here we

22
00:00:46,619 --> 00:00:51,419
don't have a stable understanding in the

23
00:00:49,619 --> 00:00:52,829
camera system or anywhere really it we

24
00:00:51,420 --> 00:00:55,500
just don't have it worked out right now

25
00:00:52,829 --> 00:00:57,989
to properly get what are we looking at

26
00:00:55,500 --> 00:01:00,719
what needs to be lit and so on so for

27
00:00:57,988 --> 00:01:02,099
example right here is the camera view we

28
00:01:00,719 --> 00:01:03,750
need something that's going to compute

29
00:01:02,100 --> 00:01:05,129
the area that you're looking at so the

30
00:01:03,750 --> 00:01:06,329
lighting bounds can be correct you see

31
00:01:05,129 --> 00:01:07,650
the lighting bounds are here if that's

32
00:01:06,329 --> 00:01:09,899
too small right the letting bounce

33
00:01:07,650 --> 00:01:12,030
should be outside the screen boundary

34
00:01:09,900 --> 00:01:14,189
and then when you move from room to room

35
00:01:12,030 --> 00:01:17,159
you can see that sometimes the camera

36
00:01:14,188 --> 00:01:17,519
works okay in terms of picking up the

37
00:01:17,159 --> 00:01:19,859
room

38
00:01:17,519 --> 00:01:23,819
but it right now doesn't really have any

39
00:01:19,859 --> 00:01:25,049
ability to look at the size of the room

40
00:01:23,819 --> 00:01:26,459
and focus on the size of the room and

41
00:01:25,049 --> 00:01:28,110
stuff like that so we need some of those

42
00:01:26,459 --> 00:01:30,118
camera routines now because like for

43
00:01:28,109 --> 00:01:33,688
example I hop into this room and it's

44
00:01:30,118 --> 00:01:35,578
just almost getting it right I happen to

45
00:01:33,688 --> 00:01:39,599
this room and now it's totally not

46
00:01:35,578 --> 00:01:42,508
getting it right like it's like the the

47
00:01:39,599 --> 00:01:45,298
lighting is not the right size I can't

48
00:01:42,509 --> 00:01:48,269
see really what's on the other side of

49
00:01:45,299 --> 00:01:50,549
things and so on so it just needs it

50
00:01:48,269 --> 00:01:52,048
just needs us to go in and really kind

51
00:01:50,549 --> 00:01:55,470
of finish up that code into something

52
00:01:52,049 --> 00:01:59,189
usable right and so all of that stuff is

53
00:01:55,469 --> 00:02:03,228
stuff that we want to do and you know

54
00:01:59,188 --> 00:02:07,889
that's all well and good but we need to

55
00:02:03,228 --> 00:02:10,050
we before plugging back to that and

56
00:02:07,890 --> 00:02:11,310
getting started on cleaning that up what

57
00:02:10,050 --> 00:02:13,040
I'd like to do is just do a little bit

58
00:02:11,310 --> 00:02:15,680
more of the generation code because we

59
00:02:13,039 --> 00:02:17,688
just kind of got it the basic stuff

60
00:02:15,680 --> 00:02:19,640
working and I'd like to play around a

61
00:02:17,688 --> 00:02:22,400
little more and also get us to a point

62
00:02:19,639 --> 00:02:24,919
where we can clearly see the limitations

63
00:02:22,400 --> 00:02:27,560
of the system so we know when we come

64
00:02:24,919 --> 00:02:29,059
back to it to start doing the final pass

65
00:02:27,560 --> 00:02:31,579
on generation where we're actually can

66
00:02:29,060 --> 00:02:33,530
generate stuff that we're gonna let me

67
00:02:31,579 --> 00:02:36,590
plan to use permanently where we kind of

68
00:02:33,530 --> 00:02:39,530
know what stuff needs to happen so what

69
00:02:36,590 --> 00:02:42,950
I'd like to do here is I'd like to do

70
00:02:39,530 --> 00:02:45,709
two things one is I'd like to get this

71
00:02:42,949 --> 00:02:48,259
stuff working better so you can kind of

72
00:02:45,709 --> 00:02:49,878
see here we end up with a far clip

73
00:02:48,259 --> 00:02:51,199
playing that you know if I turn on the

74
00:02:49,878 --> 00:02:54,168
debug camera or I can just move around

75
00:02:51,199 --> 00:02:55,518
the far clip playing pretty much Thor

76
00:02:54,169 --> 00:02:57,829
it's us right and there's not much we

77
00:02:55,519 --> 00:03:01,489
can really do there so the far clip

78
00:02:57,829 --> 00:03:02,659
playing it would be nice one thing we

79
00:03:01,489 --> 00:03:06,469
probably should do is have an infinite

80
00:03:02,658 --> 00:03:10,628
for our clip playing projection mode for

81
00:03:06,469 --> 00:03:14,120
example so that's one thing we should do

82
00:03:10,628 --> 00:03:16,280
but short of that I also think we need a

83
00:03:14,120 --> 00:03:19,280
way to view this map a little bit more

84
00:03:16,280 --> 00:03:23,870
sanely as well so some kind of a map

85
00:03:19,280 --> 00:03:26,658
view we can use that shows us if if not

86
00:03:23,870 --> 00:03:28,519
for in game then at least just for

87
00:03:26,658 --> 00:03:31,149
debugging so we can see because one of

88
00:03:28,519 --> 00:03:33,769
the problems that we're gonna have

89
00:03:31,150 --> 00:03:35,870
really soon here even that we sort of

90
00:03:33,769 --> 00:03:38,269
have right now is when we run the

91
00:03:35,870 --> 00:03:40,430
generator we have no idea what we

92
00:03:38,269 --> 00:03:42,289
generated so as soon as we get something

93
00:03:40,430 --> 00:03:44,180
bigger than this little tiny patch here

94
00:03:42,289 --> 00:03:47,590
like we would normally be viewing in the

95
00:03:44,180 --> 00:03:48,949
actual game we can't see what we made

96
00:03:47,590 --> 00:03:50,780
all right

97
00:03:48,949 --> 00:03:52,729
so what I think I wanna do today is do

98
00:03:50,780 --> 00:03:55,878
two things one I want to go ahead and

99
00:03:52,729 --> 00:03:58,939
add some light additional generation

100
00:03:55,878 --> 00:04:02,899
instructions to the generator to try and

101
00:03:58,938 --> 00:04:04,658
have it build out an actual world that's

102
00:04:02,900 --> 00:04:07,280
just placeholder but that's out there

103
00:04:04,658 --> 00:04:08,989
that we can up around and it's got you

104
00:04:07,280 --> 00:04:11,870
know some dungeons or whatever in it

105
00:04:08,989 --> 00:04:13,609
just as a basic sketch of like okay

106
00:04:11,870 --> 00:04:16,370
here's sort of an idea of what's what's

107
00:04:13,609 --> 00:04:20,000
going on out there I'd like to do that

108
00:04:16,370 --> 00:04:23,028
and then I'd also like to make a thing

109
00:04:20,000 --> 00:04:25,370
that let me see what I generated because

110
00:04:23,028 --> 00:04:27,709
what we're gonna find at that point

111
00:04:25,370 --> 00:04:29,569
even just like I said right now is I

112
00:04:27,709 --> 00:04:32,168
can't see anything right this debug

113
00:04:29,569 --> 00:04:35,029
camera was was just here to allow us to

114
00:04:32,168 --> 00:04:37,219
double-check our 3d code and this is

115
00:04:35,029 --> 00:04:39,529
really all it's made for we need to

116
00:04:37,220 --> 00:04:43,660
expand that concept so we need something

117
00:04:39,529 --> 00:04:43,659
that can that can actually let us view

118
00:04:43,990 --> 00:04:49,040
more of the world and in a more

119
00:04:46,639 --> 00:04:51,079
convenient way that's pretty important

120
00:04:49,040 --> 00:04:53,030
so we got to get that something in there

121
00:04:51,079 --> 00:04:53,990
for that can be a hack it's just a debug

122
00:04:53,029 --> 00:04:56,388
camera it doesn't have to be anything

123
00:04:53,990 --> 00:04:58,310
good but we need it to be functional so

124
00:04:56,389 --> 00:05:00,379
that's the the main thing that I'm gonna

125
00:04:58,310 --> 00:05:01,899
be working on today is just getting rid

126
00:05:00,379 --> 00:05:04,779
of a place where okay the world

127
00:05:01,899 --> 00:05:07,099
generation code can now serve as a real

128
00:05:04,779 --> 00:05:08,689
placeholder for something that is you

129
00:05:07,100 --> 00:05:10,310
know it's actually kind of running the

130
00:05:08,689 --> 00:05:12,469
way that we might expect building

131
00:05:10,310 --> 00:05:13,970
something out and we never gonna come

132
00:05:12,470 --> 00:05:16,400
back to it and add a lot of features and

133
00:05:13,970 --> 00:05:17,780
goodness to it but we just now we at

134
00:05:16,399 --> 00:05:19,638
least have something that's like okay

135
00:05:17,779 --> 00:05:21,109
here's a world and then we can bounce

136
00:05:19,639 --> 00:05:24,050
back and get like the lighting camera

137
00:05:21,110 --> 00:05:25,639
stuff working out so that we can hop

138
00:05:24,050 --> 00:05:27,169
around that world in a satisfying way

139
00:05:25,639 --> 00:05:33,410
and see what we're supposed to see and

140
00:05:27,168 --> 00:05:37,639
and it'll look clean right so if I hop

141
00:05:33,410 --> 00:05:38,870
over to the world gencode you put it in

142
00:05:37,639 --> 00:05:41,269
the one that doesn't have my head over

143
00:05:38,870 --> 00:05:43,329
it if I have over to the world gencode

144
00:05:41,269 --> 00:05:45,949
remember what I started saying yesterday

145
00:05:43,329 --> 00:05:48,859
we've got this Nisshin of create

146
00:05:45,949 --> 00:05:51,469
orphanage and this is exactly how I want

147
00:05:48,860 --> 00:05:54,319
my code to look right there is a

148
00:05:51,470 --> 00:05:56,210
function you can call anytime you want

149
00:05:54,319 --> 00:05:59,509
to make an orphanage and it makes the

150
00:05:56,209 --> 00:06:01,848
orphanage right now this is really

151
00:05:59,509 --> 00:06:03,889
important because this gives us a

152
00:06:01,848 --> 00:06:07,098
functional building block we can use to

153
00:06:03,889 --> 00:06:08,389
create pieces of the world anytime we

154
00:06:07,098 --> 00:06:09,889
want an orphanage now there's only gonna

155
00:06:08,389 --> 00:06:11,210
be one in this particular game but

156
00:06:09,889 --> 00:06:13,819
anytime we wanted one we could just call

157
00:06:11,209 --> 00:06:15,709
this to make another one right that is

158
00:06:13,819 --> 00:06:17,839
exactly how we want to go forward with

159
00:06:15,709 --> 00:06:19,339
all the things that will be in the world

160
00:06:17,839 --> 00:06:21,198
right and it'll become much more

161
00:06:19,339 --> 00:06:22,759
important for all of those things that

162
00:06:21,199 --> 00:06:25,400
we'd be able to call them as functions

163
00:06:22,759 --> 00:06:27,379
anytime we want to produce new pieces of

164
00:06:25,399 --> 00:06:31,370
the world that tie up with existing

165
00:06:27,379 --> 00:06:35,139
pieces all right sue maybe I want to

166
00:06:31,370 --> 00:06:38,149
make something that's like a dungeon

167
00:06:35,139 --> 00:06:42,649
call and

168
00:06:38,149 --> 00:06:44,539
don't ask me why % : there I want to be

169
00:06:42,649 --> 00:06:46,909
able to create that to to make a

170
00:06:44,540 --> 00:06:48,740
free-standing dungeon and connect that

171
00:06:46,910 --> 00:06:51,050
dungeon up to some other part of the

172
00:06:48,740 --> 00:06:52,790
world and again you'll note how I did

173
00:06:51,050 --> 00:06:55,310
this I did this very specifically this

174
00:06:52,790 --> 00:06:58,389
way because I kind of in my head had a

175
00:06:55,310 --> 00:07:02,329
notion of how I want to work a priority

176
00:06:58,389 --> 00:07:04,970
these functional elements that create a

177
00:07:02,329 --> 00:07:06,289
standing structure they are sort of

178
00:07:04,970 --> 00:07:07,460
functional right and they're not

179
00:07:06,290 --> 00:07:09,560
functional of functional programming

180
00:07:07,459 --> 00:07:11,409
sense but they are functional in a sense

181
00:07:09,560 --> 00:07:15,379
that they don't really have side effects

182
00:07:11,410 --> 00:07:17,990
beyond their little element they create

183
00:07:15,379 --> 00:07:20,300
so they create a little interconnected

184
00:07:17,990 --> 00:07:23,090
system and then they just return back to

185
00:07:20,300 --> 00:07:25,639
you the notional connection points on

186
00:07:23,089 --> 00:07:28,159
that system for you to connect up and

187
00:07:25,639 --> 00:07:31,038
that's the really crucial part so that's

188
00:07:28,160 --> 00:07:34,310
what's gonna allow me to create lots of

189
00:07:31,038 --> 00:07:38,120
pieces out of generative components and

190
00:07:34,310 --> 00:07:41,149
have an overarching game structure sense

191
00:07:38,120 --> 00:07:42,800
that put those into in regional places

192
00:07:41,149 --> 00:07:44,779
and randomizes their layout and does

193
00:07:42,800 --> 00:07:50,900
stuff like that so it basically allows

194
00:07:44,779 --> 00:07:55,879
us to approach a problem on a sort of a

195
00:07:50,899 --> 00:07:57,589
multi scale way so we can say here is

196
00:07:55,879 --> 00:07:59,478
the overall structure of the world

197
00:07:57,589 --> 00:08:01,339
there should be dungeon here some forest

198
00:07:59,478 --> 00:08:04,728
here or lice world here blah blah blah

199
00:08:01,339 --> 00:08:06,288
right we connect those up that's one

200
00:08:04,728 --> 00:08:09,288
piece of code that sits at the high

201
00:08:06,288 --> 00:08:10,459
level and then inside each of those are

202
00:08:09,288 --> 00:08:11,810
the functions that creating each of

203
00:08:10,459 --> 00:08:13,519
those things so here's what creates a

204
00:08:11,810 --> 00:08:14,720
cemetery here's what creates the forest

205
00:08:13,519 --> 00:08:16,699
area here's which creates a dungeon

206
00:08:14,720 --> 00:08:18,560
right and then each of those can have

207
00:08:16,699 --> 00:08:20,149
things inside them as well here's what

208
00:08:18,560 --> 00:08:22,038
creates you know this little torture

209
00:08:20,149 --> 00:08:24,049
chamber here here's what what creates

210
00:08:22,038 --> 00:08:27,529
this you know dragon lair or whatever

211
00:08:24,050 --> 00:08:31,310
right and so building it out of those

212
00:08:27,529 --> 00:08:33,439
multi-resolution pieces allows us to mix

213
00:08:31,310 --> 00:08:35,479
and match these things very freely and

214
00:08:33,440 --> 00:08:37,880
the thing that ties it all together is

215
00:08:35,479 --> 00:08:40,070
this idea that it is somewhat functional

216
00:08:37,879 --> 00:08:42,408
when you call this thing it just

217
00:08:40,070 --> 00:08:44,810
produces the information that it needs

218
00:08:42,408 --> 00:08:48,409
to encapsulate what it made into like a

219
00:08:44,809 --> 00:08:51,528
little bundle and then you can take that

220
00:08:48,409 --> 00:08:53,539
and throw it in to some other

221
00:08:51,528 --> 00:08:56,149
it's some other part of the of the world

222
00:08:53,539 --> 00:08:57,649
and this the layout system is what's

223
00:08:56,149 --> 00:09:00,049
responsible for then harmonizing all

224
00:08:57,649 --> 00:09:01,938
that at the end right and that was a

225
00:09:00,049 --> 00:09:03,799
really crucial part that I wanted to get

226
00:09:01,938 --> 00:09:06,799
in there so that way all the pieces can

227
00:09:03,799 --> 00:09:09,198
be functional in that way and then at

228
00:09:06,799 --> 00:09:10,219
the end the procedural part the part

229
00:09:09,198 --> 00:09:12,828
that has to have knowledge across

230
00:09:10,220 --> 00:09:15,350
everything he's a one uniform system

231
00:09:12,828 --> 00:09:17,568
that we can then continue to improve to

232
00:09:15,350 --> 00:09:19,129
create better and better layouts out of

233
00:09:17,568 --> 00:09:22,058
the information that we're given but I

234
00:09:19,129 --> 00:09:23,990
really wanted that sort of a feel to it

235
00:09:22,058 --> 00:09:26,328
because I think that's what I'll allow

236
00:09:23,990 --> 00:09:28,698
us to make nice convenient generative

237
00:09:26,328 --> 00:09:31,008
code that still ends up producing good

238
00:09:28,698 --> 00:09:33,169
high quality stuff one of the things

239
00:09:31,009 --> 00:09:35,749
that you risk when you create a

240
00:09:33,169 --> 00:09:38,748
generative world is if you are not very

241
00:09:35,749 --> 00:09:41,629
good at structuring the code and making

242
00:09:38,749 --> 00:09:43,970
smart generative code then it feels like

243
00:09:41,629 --> 00:09:46,039
a generative game right it feels like a

244
00:09:43,970 --> 00:09:47,480
game that did not have thought put into

245
00:09:46,039 --> 00:09:49,458
it and that's not fun

246
00:09:47,480 --> 00:09:51,409
so the most important thing to remember

247
00:09:49,458 --> 00:09:53,659
when you're going through all of this is

248
00:09:51,409 --> 00:09:57,259
you need to have the code be very

249
00:09:53,659 --> 00:09:58,549
flexible and able to express the kinds

250
00:09:57,259 --> 00:10:00,438
of things that a game designer might

251
00:09:58,549 --> 00:10:02,208
want to express because if those things

252
00:10:00,438 --> 00:10:04,549
cannot be expressed in your game just

253
00:10:02,208 --> 00:10:05,628
feels random right and there's a big

254
00:10:04,549 --> 00:10:09,169
difference between a game that feels

255
00:10:05,629 --> 00:10:13,159
random and a game that feels randomly

256
00:10:09,169 --> 00:10:16,250
generated right like random is not good

257
00:10:13,159 --> 00:10:18,429
right just pure random is not good it

258
00:10:16,250 --> 00:10:21,620
feels sloppy and unthought through

259
00:10:18,429 --> 00:10:24,558
randomly generated a good high-quality

260
00:10:21,620 --> 00:10:28,789
game could be randomly generated but it

261
00:10:24,558 --> 00:10:30,799
shouldn't feel random right it should

262
00:10:28,789 --> 00:10:33,078
feel like thought was put into it and

263
00:10:30,799 --> 00:10:35,719
our job when we're inner is to encode

264
00:10:33,078 --> 00:10:38,088
that thought and the system needs the

265
00:10:35,720 --> 00:10:41,509
ability to incorporate those thoughts

266
00:10:38,089 --> 00:10:44,269
right and that's what we're we're trying

267
00:10:41,509 --> 00:10:46,550
to accomplish here um so let's suppose

268
00:10:44,269 --> 00:10:49,068
that we have something here that's gonna

269
00:10:46,549 --> 00:10:51,528
do create dungeon and something else

270
00:10:49,068 --> 00:10:56,558
here that's gonna do you know create

271
00:10:51,528 --> 00:10:56,558
forest right

272
00:10:57,750 --> 00:11:06,909
now I don't really know much about how I

273
00:11:03,278 --> 00:11:08,439
want to do this so I'm just going to go

274
00:11:06,909 --> 00:11:10,929
ahead and start creating some things

275
00:11:08,440 --> 00:11:13,540
here and what we'll see I think really

276
00:11:10,929 --> 00:11:16,028
quickly is we'll see the limitations of

277
00:11:13,539 --> 00:11:18,069
the current layout system and that's

278
00:11:16,028 --> 00:11:20,470
exactly what I want so you know we only

279
00:11:18,070 --> 00:11:22,420
just barely spent a few hours on this

280
00:11:20,470 --> 00:11:25,509
generation system so it's not going to

281
00:11:22,419 --> 00:11:27,819
be what we need we're going to need to

282
00:11:25,509 --> 00:11:29,370
make a lot of upgrades to it but what

283
00:11:27,820 --> 00:11:31,720
we're gonna see here as I sort of start

284
00:11:29,370 --> 00:11:35,440
working on this stuff is we'll hopefully

285
00:11:31,720 --> 00:11:37,389
start to see those issues coming into

286
00:11:35,440 --> 00:11:39,520
play so we can have a better idea we

287
00:11:37,389 --> 00:11:41,649
come back to it what sorts of stuff we

288
00:11:39,519 --> 00:11:45,429
want to do right how we want to kind of

289
00:11:41,649 --> 00:11:47,919
work with that so let's go ahead and do

290
00:11:45,429 --> 00:11:49,778
something that creates a dungeon so for

291
00:11:47,919 --> 00:11:51,939
creating a dungeon I'm just gonna go

292
00:11:49,778 --> 00:11:54,549
ahead and make something that it takes

293
00:11:51,940 --> 00:11:57,700
sort of a fairly standard look to a

294
00:11:54,549 --> 00:11:59,319
dungeon I'm thinking like a dungeon

295
00:11:57,700 --> 00:12:03,278
should be like an easily understandable

296
00:11:59,320 --> 00:12:05,770
sort of room based thing where we just

297
00:12:03,278 --> 00:12:08,830
kind of have a few maybe six or seven

298
00:12:05,769 --> 00:12:12,129
rooms or something and then a passage

299
00:12:08,830 --> 00:12:17,440
down to the next floor so it's basically

300
00:12:12,129 --> 00:12:22,450
like you know one floor say roll down

301
00:12:17,440 --> 00:12:25,750
new floor stairwell down new floor I I

302
00:12:22,450 --> 00:12:27,820
think probably this is the kind of game

303
00:12:25,750 --> 00:12:30,100
that wants to not let you go up and down

304
00:12:27,820 --> 00:12:32,140
between floors so we don't really have

305
00:12:30,100 --> 00:12:34,750
exactly what we need for that just yet I

306
00:12:32,139 --> 00:12:37,230
don't have the concept of a like thing

307
00:12:34,750 --> 00:12:40,000
you can go down but you can't go back up

308
00:12:37,230 --> 00:12:42,190
right now so at some point we'll add

309
00:12:40,000 --> 00:12:43,659
something like that but I think I would

310
00:12:42,190 --> 00:12:45,310
like the dungeons to be more like

311
00:12:43,659 --> 00:12:47,259
Binding of Isaac and less like Zelda in

312
00:12:45,309 --> 00:12:49,629
that sense that like dungeons are things

313
00:12:47,259 --> 00:12:52,000
you work your way down you don't go back

314
00:12:49,629 --> 00:12:53,679
up so when you commit to a dungeon you

315
00:12:52,000 --> 00:12:56,440
must finish the dungeon in order to come

316
00:12:53,679 --> 00:12:58,509
back out I think that's more or less

317
00:12:56,440 --> 00:13:00,520
what I'm looking for there for now I'm

318
00:12:58,509 --> 00:13:01,990
just gonna put in stairwells or or maybe

319
00:13:00,519 --> 00:13:03,819
we can't go down the dungeons yet

320
00:13:01,990 --> 00:13:05,139
because I'll just put a square that it's

321
00:13:03,820 --> 00:13:06,640
like hey look this is supposed to let

322
00:13:05,139 --> 00:13:10,259
you go down you can't go down right now

323
00:13:06,639 --> 00:13:11,879
what we know what it was supposed to be

324
00:13:10,259 --> 00:13:18,090
so what I'm gonna do here is say alright

325
00:13:11,879 --> 00:13:22,019
let's go ahead and create some

326
00:13:18,090 --> 00:13:24,629
interconnected rooms and just make some

327
00:13:22,019 --> 00:13:26,159
basic sort of assumptions about those so

328
00:13:24,629 --> 00:13:29,070
we're gonna do things the same way we

329
00:13:26,159 --> 00:13:31,439
did before and for our gem dungeon we

330
00:13:29,070 --> 00:13:34,320
know because dungeon is kind of a simple

331
00:13:31,440 --> 00:13:36,590
concept actually we more or less know

332
00:13:34,320 --> 00:13:40,350
what it is that's gonna happen here

333
00:13:36,590 --> 00:13:42,930
there's an entrance room and that

334
00:13:40,350 --> 00:13:45,300
entrance room is going to be sort of the

335
00:13:42,929 --> 00:13:49,469
piece that's up above that there's the

336
00:13:45,299 --> 00:13:52,529
one you know sort of place that you

337
00:13:49,470 --> 00:13:54,330
would go down into or walk into and I

338
00:13:52,529 --> 00:13:58,019
don't know exactly how we want that to

339
00:13:54,330 --> 00:14:00,270
be placed it's kind of a difficult thing

340
00:13:58,019 --> 00:14:03,210
to say because I don't really know how

341
00:14:00,269 --> 00:14:04,980
we want that to appear to the player but

342
00:14:03,210 --> 00:14:07,350
I'm assuming that we want it to be

343
00:14:04,980 --> 00:14:09,480
something where probably there's an

344
00:14:07,350 --> 00:14:11,250
entrance to a dungeon that's part of the

345
00:14:09,480 --> 00:14:13,920
other thing in the world so it's

346
00:14:11,250 --> 00:14:15,570
probably the first the entrance room is

347
00:14:13,919 --> 00:14:18,120
probably the first room on the floor

348
00:14:15,570 --> 00:14:21,720
that is all underground I'm guessing

349
00:14:18,120 --> 00:14:24,570
right so we probably have an entrance

350
00:14:21,720 --> 00:14:26,370
room and that's probably all we have for

351
00:14:24,570 --> 00:14:28,379
a dungeon at least at the moment because

352
00:14:26,370 --> 00:14:29,610
like I said you'll fight your way down

353
00:14:28,379 --> 00:14:32,610
the dungeon and then you'll probably

354
00:14:29,610 --> 00:14:35,340
just teleport back out right and that'll

355
00:14:32,610 --> 00:14:38,360
probably be it so there would be

356
00:14:35,340 --> 00:14:43,740
something here eventually you know

357
00:14:38,360 --> 00:14:44,909
probably something like that where

358
00:14:43,740 --> 00:14:48,450
there'd be a room that you can then get

359
00:14:44,909 --> 00:14:52,439
out from but that's it and so when we

360
00:14:48,450 --> 00:14:54,240
create one of these things we're then

361
00:14:52,440 --> 00:14:55,950
gonna make all of our rooms and then

362
00:14:54,240 --> 00:14:59,639
we're going to and you know for now I'll

363
00:14:55,950 --> 00:15:01,670
just say alright there's a dungeon spec

364
00:14:59,639 --> 00:15:05,009
and everything we'll get that for now

365
00:15:01,669 --> 00:15:06,299
and I'm just gonna make rooms that are

366
00:15:05,009 --> 00:15:09,509
connected to each other and this is

367
00:15:06,299 --> 00:15:10,919
gonna be a floor based thing right so

368
00:15:09,509 --> 00:15:12,870
probably what's gonna happen when we

369
00:15:10,919 --> 00:15:14,849
create here we're gonna pass for

370
00:15:12,870 --> 00:15:16,169
hemorrhage these routines create

371
00:15:14,850 --> 00:15:17,370
orphanage we'll even have some we'll see

372
00:15:16,169 --> 00:15:19,769
in a second I'll probably do a little

373
00:15:17,370 --> 00:15:22,889
bit that today potentially but create

374
00:15:19,769 --> 00:15:23,949
dungeon is going to be something that's

375
00:15:22,889 --> 00:15:26,649
going to at the very least

376
00:15:23,950 --> 00:15:28,629
take how many floors we want in that in

377
00:15:26,649 --> 00:15:30,610
the dungeon so we're gonna have a floor

378
00:15:28,629 --> 00:15:32,439
account here not a flower count we're

379
00:15:30,610 --> 00:15:34,779
gonna have a floor account here and the

380
00:15:32,440 --> 00:15:37,000
floor accounts gonna say here's how many

381
00:15:34,779 --> 00:15:38,409
levels the dungeon should have and we're

382
00:15:37,000 --> 00:15:40,389
going to start at the top and work our

383
00:15:38,409 --> 00:15:42,730
way down right as a as a good dungeon

384
00:15:40,389 --> 00:15:45,549
should so we start at floor index zero

385
00:15:42,730 --> 00:15:48,190
we're less than floor count and we just

386
00:15:45,549 --> 00:15:51,639
kind of proceed from there so each time

387
00:15:48,190 --> 00:15:53,980
when we generate a room I at the start

388
00:15:51,639 --> 00:15:56,379
of our dungeon we need to be connected

389
00:15:53,980 --> 00:16:03,550
to the floor above it right it needs to

390
00:15:56,379 --> 00:16:09,929
be connected okay so here we're gonna

391
00:16:03,549 --> 00:16:13,479
have or I don't what would call this

392
00:16:09,929 --> 00:16:17,289
room above maybe so when we first start

393
00:16:13,480 --> 00:16:26,470
out we're gonna take floor entrance room

394
00:16:17,289 --> 00:16:27,669
and we're gonna generate a room and this

395
00:16:26,470 --> 00:16:31,180
is going to be the floor entrance room

396
00:16:27,669 --> 00:16:32,620
and this room is going to either right

397
00:16:31,179 --> 00:16:35,439
depending on whether there is a room

398
00:16:32,620 --> 00:16:38,110
above it's either going to connect to

399
00:16:35,440 --> 00:16:41,710
the room above it using a downward

400
00:16:38,110 --> 00:16:44,379
connection or in the case where this was

401
00:16:41,710 --> 00:16:46,240
the first room it will become the result

402
00:16:44,379 --> 00:16:47,740
entrance room so if there is a room

403
00:16:46,240 --> 00:16:50,080
above it then we need to connect these

404
00:16:47,740 --> 00:16:52,210
two rooms right so we say all right

405
00:16:50,080 --> 00:16:53,800
we've got a floor entrance room the

406
00:16:52,210 --> 00:16:56,500
floor entrance room is going to connect

407
00:16:53,799 --> 00:17:05,649
remember we've got did I not load my

408
00:16:56,500 --> 00:17:07,180
project there we go so if we go here and

409
00:17:05,650 --> 00:17:08,949
we look at what direction we go you know

410
00:17:07,180 --> 00:17:10,750
here are directions we know that the

411
00:17:08,949 --> 00:17:14,259
floor entrance room if you go down from

412
00:17:10,750 --> 00:17:17,949
there you should get up sorry if you go

413
00:17:14,259 --> 00:17:19,240
down from the the room above this one

414
00:17:17,949 --> 00:17:21,120
you should get to the floor entrance

415
00:17:19,240 --> 00:17:25,359
room so just gonna connect those two up

416
00:17:21,119 --> 00:17:26,948
and then what I want to do is I want to

417
00:17:25,359 --> 00:17:28,839
say well in the case where there was no

418
00:17:26,949 --> 00:17:30,580
room above it then rather than make a

419
00:17:28,839 --> 00:17:32,379
connection we know that the person is

420
00:17:30,579 --> 00:17:34,210
good to the connecting is the person out

421
00:17:32,380 --> 00:17:35,710
outside of this routine so when we

422
00:17:34,210 --> 00:17:37,500
return the dungeon

423
00:17:35,710 --> 00:17:39,329
sort of construction back to

424
00:17:37,500 --> 00:17:41,039
and say look here's the dungeons built

425
00:17:39,329 --> 00:17:44,369
we don't know where it goes

426
00:17:41,039 --> 00:17:45,930
that person will take this floor

427
00:17:44,369 --> 00:17:47,879
entrance route which is the first floor

428
00:17:45,930 --> 00:17:50,850
entrance room on the top floor of the

429
00:17:47,880 --> 00:17:53,880
dungeon they'll connect it up right so

430
00:17:50,849 --> 00:17:55,889
if we take this floor entrance room and

431
00:17:53,880 --> 00:18:01,980
we assign it to the thing we were going

432
00:17:55,890 --> 00:18:03,870
to return here so remember this right so

433
00:18:01,980 --> 00:18:06,120
now we pass that back and it can get

434
00:18:03,869 --> 00:18:07,859
connected up outside as we put dungeons

435
00:18:06,119 --> 00:18:10,019
around the world in various places

436
00:18:07,859 --> 00:18:12,599
they'll can sort of connect up right in

437
00:18:10,019 --> 00:18:14,339
that way so then what we want to do is

438
00:18:12,599 --> 00:18:16,079
say all right now we've got these

439
00:18:14,339 --> 00:18:19,559
dungeons connected up what we want to do

440
00:18:16,079 --> 00:18:20,699
is start to create more than just one

441
00:18:19,559 --> 00:18:23,700
floor because this would just create a

442
00:18:20,700 --> 00:18:25,920
stack of rooms that kind of just connect

443
00:18:23,700 --> 00:18:28,289
that's the minimal possible dungeon

444
00:18:25,920 --> 00:18:30,779
right and could be a dungeon that we

445
00:18:28,289 --> 00:18:32,730
might want for some unknown reason like

446
00:18:30,779 --> 00:18:34,170
a sort of a gauntlet thing where you

447
00:18:32,730 --> 00:18:35,700
maybe you fight harder enemies on each

448
00:18:34,170 --> 00:18:38,160
floor as you go down or something so

449
00:18:35,700 --> 00:18:39,600
it's not necessarily bad but most the

450
00:18:38,160 --> 00:18:41,460
time we probably want to done just to

451
00:18:39,599 --> 00:18:43,049
have a little bit more to them than that

452
00:18:41,460 --> 00:18:46,440
so once we create the floor entrance

453
00:18:43,049 --> 00:18:48,419
room we also want to create some other

454
00:18:46,440 --> 00:18:50,070
rooms connected to them you know

455
00:18:48,420 --> 00:18:51,420
whatever right we don't really know what

456
00:18:50,069 --> 00:18:54,299
that is but we want to do something like

457
00:18:51,420 --> 00:18:56,009
that so from there what we're gonna do

458
00:18:54,299 --> 00:18:59,460
is say okay let's go ahead and create

459
00:18:56,009 --> 00:19:02,400
some other sort of branching factor

460
00:18:59,460 --> 00:19:05,100
rooms or whatever here so you know maybe

461
00:19:02,400 --> 00:19:10,490
there's a thing where we generate some

462
00:19:05,099 --> 00:19:10,490
things that this thing has and maybe I

463
00:19:12,109 --> 00:19:16,439
guess the part that I'm not sure about

464
00:19:14,220 --> 00:19:18,930
is how we would necessarily want to go

465
00:19:16,440 --> 00:19:22,950
about figuring out what exists in each

466
00:19:18,930 --> 00:19:25,320
one of these floors because you know if

467
00:19:22,950 --> 00:19:26,789
you follow the standard model you've got

468
00:19:25,319 --> 00:19:28,349
different things that could appear on

469
00:19:26,789 --> 00:19:30,329
any floor but not all of them do a

470
00:19:28,349 --> 00:19:31,679
parent a floor and then oftentimes there

471
00:19:30,329 --> 00:19:34,230
are things that maybe always appear on

472
00:19:31,680 --> 00:19:36,539
the floor so if you took the example of

473
00:19:34,230 --> 00:19:40,819
binding of issac for example you know

474
00:19:36,539 --> 00:19:40,819
that there's almost always a store

475
00:19:41,130 --> 00:19:50,280
there's always an item room there's

476
00:19:45,569 --> 00:19:51,029
always a one of those whatever you call

477
00:19:50,279 --> 00:19:53,399
it the the

478
00:19:51,029 --> 00:19:56,519
with the little Fang doors the sacrifice

479
00:19:53,400 --> 00:19:59,280
room you know so there's a lot of

480
00:19:56,519 --> 00:20:02,819
different things that you can expect to

481
00:19:59,279 --> 00:20:05,940
see on any given floor so I'm gonna go

482
00:20:02,819 --> 00:20:07,950
ahead and say but but I should finish

483
00:20:05,940 --> 00:20:09,600
that thought but there's also things

484
00:20:07,950 --> 00:20:12,569
that don't necessarily occur on every

485
00:20:09,599 --> 00:20:15,269
floor right so there's things like

486
00:20:12,569 --> 00:20:17,789
certain room types only occur on some

487
00:20:15,269 --> 00:20:19,529
floors not others there's other things

488
00:20:17,789 --> 00:20:23,819
that only occurs when you get certain

489
00:20:19,529 --> 00:20:26,639
distance down you know all sorts tough

490
00:20:23,819 --> 00:20:30,450
like that so what I would like to do is

491
00:20:26,640 --> 00:20:32,520
I would like to try to mirror that kind

492
00:20:30,450 --> 00:20:34,319
of a like structure as we go to do the

493
00:20:32,519 --> 00:20:39,509
generation now what I should mention

494
00:20:34,319 --> 00:20:42,960
before we get into that is here we've

495
00:20:39,509 --> 00:20:45,150
got sort of this result our loop is X up

496
00:20:42,960 --> 00:20:47,880
quite nicely in that this room above

497
00:20:45,150 --> 00:20:51,050
that gets set as we go because I get me

498
00:20:47,880 --> 00:20:51,050
knowing I should actually put that here

499
00:20:53,480 --> 00:20:58,410
so on the exit we get that when we are

500
00:20:56,640 --> 00:21:02,190
falling out of the loop after create all

501
00:20:58,410 --> 00:21:04,620
the floors the exit room is gonna be

502
00:21:02,190 --> 00:21:06,630
something that we could either just have

503
00:21:04,619 --> 00:21:09,059
be that final entrance room if we know

504
00:21:06,630 --> 00:21:11,670
that's one of that works or we would

505
00:21:09,059 --> 00:21:14,250
want to set up another room that's

506
00:21:11,670 --> 00:21:15,810
carried over here like for example well

507
00:21:14,250 --> 00:21:17,250
actually know that that is always what

508
00:21:15,809 --> 00:21:19,829
we want because whatever the room is

509
00:21:17,250 --> 00:21:21,960
that you would go to to exit now think

510
00:21:19,829 --> 00:21:23,849
about it it's not this one it's some

511
00:21:21,960 --> 00:21:26,220
other thing here it's the it's the exit

512
00:21:23,849 --> 00:21:28,829
room for this floor right because you

513
00:21:26,220 --> 00:21:30,900
don't go down to the next floor from the

514
00:21:28,829 --> 00:21:32,759
entrance room it's from whatever the

515
00:21:30,900 --> 00:21:36,450
like boss room is on that that floor or

516
00:21:32,759 --> 00:21:38,609
whatever right so yeah so this loop

517
00:21:36,450 --> 00:21:40,140
flows kind of nicely each time we create

518
00:21:38,609 --> 00:21:42,000
an entrance room we create a bunch of

519
00:21:40,140 --> 00:21:43,430
rooms in it in a second here and one of

520
00:21:42,000 --> 00:21:47,400
them is like the final room you go to

521
00:21:43,430 --> 00:21:49,289
and then off you go right so what I

522
00:21:47,400 --> 00:21:51,360
would like to do is is figure out kind

523
00:21:49,289 --> 00:21:53,759
of how we want to place this I don't

524
00:21:51,359 --> 00:21:55,679
really know the best way to do this

525
00:21:53,759 --> 00:21:58,549
because I haven't really thought much

526
00:21:55,680 --> 00:21:58,549
about this kind of code

527
00:22:02,220 --> 00:22:08,170
certainly at the head end so at the part

528
00:22:06,640 --> 00:22:14,070
where we start thinking about the floor

529
00:22:08,170 --> 00:22:16,750
I think we want to do some analysis and

530
00:22:14,069 --> 00:22:20,289
we want to we would want to put some

531
00:22:16,750 --> 00:22:24,279
code here that creates sort of the

532
00:22:20,289 --> 00:22:25,720
boolean x' for the system right whether

533
00:22:24,279 --> 00:22:26,950
this will have a store whether this will

534
00:22:25,720 --> 00:22:32,380
have of this whether the slab of that

535
00:22:26,950 --> 00:22:35,410
right uh so what I sort of expect we

536
00:22:32,380 --> 00:22:43,420
would want to have is probably something

537
00:22:35,410 --> 00:22:45,700
like all right maybe there's some kind

538
00:22:43,420 --> 00:22:51,539
of a thing that says like we're gonna

539
00:22:45,700 --> 00:22:51,539
build a little batch of rooms

540
00:23:02,148 --> 00:23:07,619
where maybe I just like say here's their

541
00:23:05,730 --> 00:23:11,639
rooms that are gonna have to be in the

542
00:23:07,619 --> 00:23:14,158
dungeon and then later as I'm kind of

543
00:23:11,638 --> 00:23:17,250
spidering out to make a dungeon I'm

544
00:23:14,159 --> 00:23:22,320
gonna place them somewhere yeah I don't

545
00:23:17,250 --> 00:23:23,669
know you know is that logical you know I

546
00:23:22,319 --> 00:23:27,569
don't know one of the problems is

547
00:23:23,669 --> 00:23:30,179
dungeon floors tend not to be so big you

548
00:23:27,569 --> 00:23:32,720
know a typical dungeon floor is what

549
00:23:30,179 --> 00:23:34,980
twelve rooms maybe something like that

550
00:23:32,720 --> 00:23:38,190
there's just not a lot of rooms in a

551
00:23:34,980 --> 00:23:41,339
dungeon floor so some kind of typing

552
00:23:38,190 --> 00:23:43,558
that out I'm like well it might have to

553
00:23:41,339 --> 00:23:46,829
be more specific than that right it

554
00:23:43,558 --> 00:23:47,849
might have to be more careful about how

555
00:23:46,829 --> 00:23:50,099
it's thinking things through

556
00:23:47,849 --> 00:23:53,490
so generating a list of things to place

557
00:23:50,099 --> 00:23:55,230
may not be so useful after all just

558
00:23:53,490 --> 00:23:56,819
because of the low number of rooms you

559
00:23:55,230 --> 00:23:59,190
know it's not it doesn't produce a big

560
00:23:56,819 --> 00:24:01,048
sprawling thing with you know 100 rooms

561
00:23:59,190 --> 00:24:03,870
it's supposed to be like fairly

562
00:24:01,048 --> 00:24:06,480
understandable and self-contained so I

563
00:24:03,869 --> 00:24:09,138
guess maybe that's not the faintest

564
00:24:06,480 --> 00:24:09,139
thing to do

565
00:24:18,460 --> 00:24:31,430
so maybe I'll do something a little bit

566
00:24:20,869 --> 00:24:34,519
different maybe I'll say that as we

567
00:24:31,430 --> 00:24:38,420
design this game there's probably gonna

568
00:24:34,519 --> 00:24:40,700
be some idea of how dungeons should be

569
00:24:38,420 --> 00:24:43,100
laid out that we sort of get to but

570
00:24:40,700 --> 00:24:44,720
generally speaking you're trying to work

571
00:24:43,099 --> 00:24:47,599
your way from the entrance to the exit

572
00:24:44,720 --> 00:24:51,410
right so let's make a path from the

573
00:24:47,599 --> 00:25:04,429
entrance to the exit first and go from

574
00:24:51,410 --> 00:25:06,130
there maybe we say something and we've

575
00:25:04,430 --> 00:25:09,279
got a in our generator we've got a

576
00:25:06,130 --> 00:25:18,980
random number generator yeah

577
00:25:09,279 --> 00:25:22,309
do we horrors we don't have fun oh we do

578
00:25:18,980 --> 00:25:24,470
the world has one actually I remember

579
00:25:22,309 --> 00:25:30,529
this we said that random numbers come

580
00:25:24,470 --> 00:25:32,620
from the world they're right here all

581
00:25:30,529 --> 00:25:32,619
right

582
00:25:35,359 --> 00:25:42,289
so this right here it would be nice to

583
00:25:40,970 --> 00:25:43,279
be able to get random numbers a little

584
00:25:42,289 --> 00:25:46,009
easier so I think I would probably

585
00:25:43,279 --> 00:25:49,789
introduce an easy way to pick random

586
00:25:46,009 --> 00:25:51,619
numbers as we go that just come off the

587
00:25:49,789 --> 00:25:53,869
world generator and it'll grab it out of

588
00:25:51,619 --> 00:25:56,059
here as necessary but yeah that's that's

589
00:25:53,869 --> 00:25:57,679
sort of a separate a separate issue well

590
00:25:56,059 --> 00:26:04,339
what I could do to is say look this

591
00:25:57,680 --> 00:26:07,460
points to the this world generator

592
00:26:04,339 --> 00:26:11,899
points to the the world that it gets so

593
00:26:07,460 --> 00:26:19,670
when you create the generator in here

594
00:26:11,900 --> 00:26:22,280
you just set the pointer like that and

595
00:26:19,670 --> 00:26:24,950
so for now I can say some you know

596
00:26:22,279 --> 00:26:29,589
things like this uh so let's let me go

597
00:26:24,950 --> 00:26:29,590
over to our random code right here and

598
00:26:30,160 --> 00:26:40,130
this is what I'll do for now I'll say

599
00:26:36,890 --> 00:26:43,130
that maybe the path gets a little longer

600
00:26:40,130 --> 00:26:45,980
each time so maybe the floor index

601
00:26:43,130 --> 00:26:49,520
divided by two or something so you know

602
00:26:45,980 --> 00:26:52,190
let's say a dungeon had eight levels to

603
00:26:49,519 --> 00:26:53,690
it so the first two floors would have a

604
00:26:52,190 --> 00:26:55,370
certain number the next two floors would

605
00:26:53,690 --> 00:26:57,620
have one more room the next two floors I

606
00:26:55,369 --> 00:27:00,199
have one more room on the path between

607
00:26:57,619 --> 00:27:03,589
the entrance and the exit something like

608
00:27:00,200 --> 00:27:07,309
that right and so what I would say is I

609
00:27:03,589 --> 00:27:10,939
you know the randomization would be

610
00:27:07,309 --> 00:27:13,129
floor index over two so something from

611
00:27:10,940 --> 00:27:14,630
the minimum I don't know what the

612
00:27:13,130 --> 00:27:17,510
minimum be maybe the minimum number of

613
00:27:14,630 --> 00:27:19,550
rooms along the path is like four or

614
00:27:17,509 --> 00:27:23,299
something like that and the maximum

615
00:27:19,549 --> 00:27:26,629
number of rooms along the path is going

616
00:27:23,299 --> 00:27:28,940
to be six at the start and then those

617
00:27:26,630 --> 00:27:30,200
will just go up as you go and maybe I

618
00:27:28,940 --> 00:27:32,690
could do this a little bit differently

619
00:27:30,200 --> 00:27:34,759
so maybe like the maximum number of

620
00:27:32,690 --> 00:27:36,470
rooms could get really egregious

621
00:27:34,759 --> 00:27:39,200
eventually like maybe you just get

622
00:27:36,470 --> 00:27:42,350
really unlucky and you pull a really bad

623
00:27:39,200 --> 00:27:44,990
random and and then you you end up with

624
00:27:42,349 --> 00:27:46,219
some super huge dependency change you

625
00:27:44,990 --> 00:27:48,319
kind of go through I don't know

626
00:27:46,220 --> 00:27:50,169
robee lakes aren't known for being kind

627
00:27:48,319 --> 00:27:55,548
to the player

628
00:27:50,169 --> 00:27:57,410
right but anyway I'm not a game designer

629
00:27:55,548 --> 00:28:00,379
so I'm not responsible for this kind of

630
00:27:57,410 --> 00:28:02,600
stuff that's someone else's fault if

631
00:28:00,380 --> 00:28:03,380
it's wrong don't blame me this is not my

632
00:28:02,599 --> 00:28:05,959
job

633
00:28:03,380 --> 00:28:11,770
anyway some stuff will come in here that

634
00:28:05,960 --> 00:28:14,120
allows us to do a and we will actually

635
00:28:11,769 --> 00:28:18,379
although I say you know I'm not soft

636
00:28:14,119 --> 00:28:22,489
stuff we will do better code for doing

637
00:28:18,380 --> 00:28:26,540
game design based picking than this for

638
00:28:22,490 --> 00:28:28,880
sure I just am NOT promising all ever to

639
00:28:26,539 --> 00:28:30,440
knit correctly because I that's a game

640
00:28:28,880 --> 00:28:31,910
designers job right the game designer is

641
00:28:30,440 --> 00:28:32,929
the one who to tunes and picks those

642
00:28:31,910 --> 00:28:35,750
things

643
00:28:32,929 --> 00:28:38,450
not the engine programmer so that's not

644
00:28:35,750 --> 00:28:40,250
my responsibility but it will be my

645
00:28:38,450 --> 00:28:42,980
responsibility to produce better tools

646
00:28:40,250 --> 00:28:44,900
than this because in the future you can

647
00:28:42,980 --> 00:28:48,079
imagine us wanting to say some very sort

648
00:28:44,900 --> 00:28:50,150
of things such as ok sometimes there can

649
00:28:48,079 --> 00:28:51,740
be a really hard floor but maybe there

650
00:28:50,150 --> 00:28:55,280
should only be one of those per dungeon

651
00:28:51,740 --> 00:28:58,548
right so we want some nice tools some

652
00:28:55,279 --> 00:29:02,298
some code tools we can use to say stuff

653
00:28:58,548 --> 00:29:04,519
like that and not have it be strictly

654
00:29:02,298 --> 00:29:09,529
left to random and again that's why I

655
00:29:04,519 --> 00:29:12,829
say you want games to feel randomly

656
00:29:09,529 --> 00:29:15,109
generated not random random feels crappy

657
00:29:12,829 --> 00:29:17,539
so throwing in random numbers like this

658
00:29:15,109 --> 00:29:19,039
this is not good look we will not be

659
00:29:17,539 --> 00:29:21,918
leaving this in the final version of the

660
00:29:19,039 --> 00:29:23,509
game you want something that takes a

661
00:29:21,919 --> 00:29:25,130
more thoughtful approach to it and we'll

662
00:29:23,509 --> 00:29:26,629
see how to build those as we go that's

663
00:29:25,130 --> 00:29:29,510
not the focus right now but I feel it's

664
00:29:26,630 --> 00:29:30,980
important to mention so I'm just

665
00:29:29,509 --> 00:29:33,740
throwing in some stuff at the moment but

666
00:29:30,980 --> 00:29:36,710
that will not be how it is left as we go

667
00:29:33,740 --> 00:29:40,190
right so this will pick some number of

668
00:29:36,710 --> 00:29:43,900
rooms for the path along the way and

669
00:29:40,190 --> 00:29:43,900
what those will do is they'll just say

670
00:29:46,179 --> 00:29:50,059
ok for each one of these things actually

671
00:29:48,440 --> 00:29:54,669
we know what the preview is is the floor

672
00:29:50,058 --> 00:29:54,668
entrance room right

673
00:29:56,630 --> 00:30:12,120
that's fine too so what we want to do

674
00:30:10,410 --> 00:30:18,090
here is we want to say from this

675
00:30:12,119 --> 00:30:20,339
particular room we want to create a new

676
00:30:18,089 --> 00:30:22,740
room we want to like create another room

677
00:30:20,339 --> 00:30:24,659
that goes somewhere from the existing

678
00:30:22,740 --> 00:30:26,160
room that we picked so we start off at

679
00:30:24,660 --> 00:30:28,800
the floor entrance room and we want to

680
00:30:26,160 --> 00:30:31,170
go somewhere from there so we know that

681
00:30:28,799 --> 00:30:33,059
we can't go down because down has a

682
00:30:31,170 --> 00:30:34,650
special meaning in the dungeon and we

683
00:30:33,059 --> 00:30:36,240
know that we can't go up because up

684
00:30:34,650 --> 00:30:38,759
would also have a special meaning in the

685
00:30:36,240 --> 00:30:43,250
dungeon so what we want to do is pick

686
00:30:38,759 --> 00:30:45,720
from the these four options here right

687
00:30:43,250 --> 00:30:48,150
so what we want to do is pick our

688
00:30:45,720 --> 00:30:50,940
connection direction from one of these

689
00:30:48,150 --> 00:30:53,160
four options and we want to connect we

690
00:30:50,940 --> 00:30:55,380
want to pick from the four options that

691
00:30:53,160 --> 00:30:58,170
do not include the option that we picked

692
00:30:55,380 --> 00:31:02,790
last time right so we want to knock that

693
00:30:58,170 --> 00:31:06,810
one out of the running when we when we

694
00:31:02,789 --> 00:31:11,519
pick now we're going to run into

695
00:31:06,809 --> 00:31:14,940
something here that I think is is going

696
00:31:11,519 --> 00:31:17,009
to be kind of interesting so when we are

697
00:31:14,940 --> 00:31:20,430
placing these rooms we want to be able

698
00:31:17,009 --> 00:31:22,859
to place these rooms probably in a

699
00:31:20,430 --> 00:31:27,990
similar fashion to how we were placing

700
00:31:22,859 --> 00:31:29,579
them before right in that we want to be

701
00:31:27,990 --> 00:31:31,440
able to test to see if there's a room in

702
00:31:29,579 --> 00:31:34,289
this particular area and we want to like

703
00:31:31,440 --> 00:31:38,900
not place the room if that's the case so

704
00:31:34,289 --> 00:31:38,899
what I want to do here is say well

705
00:31:45,529 --> 00:31:51,690
rather than create some special case

706
00:31:49,109 --> 00:31:54,929
code to just help me lay out the dungeon

707
00:31:51,690 --> 00:31:58,289
I'd rather just lean on the code we know

708
00:31:54,930 --> 00:32:00,930
we will be raided writing to handle room

709
00:31:58,289 --> 00:32:01,740
intersection and overlap to do the work

710
00:32:00,930 --> 00:32:05,549
for me

711
00:32:01,740 --> 00:32:08,370
right so what I'd rather do is set the

712
00:32:05,549 --> 00:32:11,819
generation index stuff up now to allow

713
00:32:08,369 --> 00:32:15,809
me to do sub generation placement that

714
00:32:11,819 --> 00:32:17,849
then gets overwritten right now what do

715
00:32:15,809 --> 00:32:22,339
I mean by this well it's important to

716
00:32:17,849 --> 00:32:25,109
remember that when you place rooms down

717
00:32:22,339 --> 00:32:28,169
there under no obligation to stay there

718
00:32:25,109 --> 00:32:30,959
so what we can do is create the dungeon

719
00:32:28,170 --> 00:32:34,259
and place rooms in two particular

720
00:32:30,960 --> 00:32:39,180
locations and then we can see whether or

721
00:32:34,259 --> 00:32:41,039
not we would have hit the any existing

722
00:32:39,180 --> 00:32:46,019
room using the same stuff we were

723
00:32:41,039 --> 00:32:50,670
currently using to check right so we can

724
00:32:46,019 --> 00:32:52,470
actually do stuff here that would would

725
00:32:50,670 --> 00:32:55,860
essentially allow us to do checking on

726
00:32:52,470 --> 00:32:58,769
that layout in the middle of doing sort

727
00:32:55,859 --> 00:33:01,919
of a sub basically a sub layout so that

728
00:32:58,769 --> 00:33:03,509
we know we if we curl around and hit

729
00:33:01,920 --> 00:33:07,550
ourselves we wouldn't put more rooms

730
00:33:03,509 --> 00:33:07,549
there or whatever else right

731
00:33:19,920 --> 00:33:24,440
so I'm having a thought as I say that

732
00:33:40,549 --> 00:33:47,960
hmm so here's what I'm thinking

733
00:33:52,909 --> 00:34:03,460
it occurs to me that that almost wants

734
00:33:56,269 --> 00:34:11,480
to be the kind of thing that is sort of

735
00:34:03,460 --> 00:34:14,240
encoded into the layout itself because

736
00:34:11,480 --> 00:34:16,159
you might want that to be able to run in

737
00:34:14,239 --> 00:34:19,608
the face of other things that get

738
00:34:16,159 --> 00:34:23,088
connected up to here I wonder if there's

739
00:34:19,608 --> 00:34:26,389
a possibility for basically encoding the

740
00:34:23,088 --> 00:34:28,878
fact that a connection is just something

741
00:34:26,389 --> 00:34:31,510
that has to be connected to a family of

742
00:34:28,878 --> 00:34:31,509
rooms

743
00:34:39,219 --> 00:34:41,279
you

744
00:34:44,159 --> 00:34:56,710
that's actually very interesting so so

745
00:34:55,030 --> 00:35:00,640
it does seem like this is the kind of

746
00:34:56,710 --> 00:35:09,570
thing where maybe we can just let the

747
00:35:00,639 --> 00:35:09,569
layout code do this later

748
00:35:30,739 --> 00:35:45,679
I'm gonna go with that so I'm just gonna

749
00:35:40,730 --> 00:36:00,920
say look all we know is there's a cereal

750
00:35:45,679 --> 00:36:05,750
chain here and we know oh wait we

751
00:36:00,920 --> 00:36:08,119
already have this that it's flat so it

752
00:36:05,750 --> 00:36:09,530
can't go up or down and I'm just gonna

753
00:36:08,119 --> 00:36:11,480
say look that's gonna be the generators

754
00:36:09,530 --> 00:36:14,119
job so we know there's a cereal chain

755
00:36:11,480 --> 00:36:16,539
from the entrance to the exit and this

756
00:36:14,119 --> 00:36:16,539
is what it is

757
00:36:16,599 --> 00:36:20,599
right

758
00:36:18,460 --> 00:36:22,119
generation code is gonna have to deal

759
00:36:20,599 --> 00:36:26,150
with it from there on out

760
00:36:22,119 --> 00:36:27,140
okay so we'll upgrade the generator code

761
00:36:26,150 --> 00:36:28,700
to deal with that I think that's just

762
00:36:27,139 --> 00:36:31,969
that's where that should go so that's

763
00:36:28,699 --> 00:36:34,669
what we have to do from there we also

764
00:36:31,969 --> 00:36:36,980
know that the cereal chain will have

765
00:36:34,670 --> 00:36:39,289
rooms hanging off of it occasionally

766
00:36:36,980 --> 00:36:43,840
there are rooms that we want to have in

767
00:36:39,289 --> 00:36:43,840
the dungeon right and

768
00:36:48,739 --> 00:37:01,229
those connections are a little harder to

769
00:36:51,510 --> 00:37:03,560
understand at some level but I think I

770
00:37:01,230 --> 00:37:05,880
want to just push through with it and

771
00:37:03,559 --> 00:37:08,360
see how we go so what I'm going to say

772
00:37:05,880 --> 00:37:08,360
here is

773
00:37:17,130 --> 00:37:21,900
I'm gonna keep track of these and I'm

774
00:37:20,610 --> 00:37:28,730
gonna find out how many of these we've

775
00:37:21,900 --> 00:37:28,730
got right and I'm gonna say that

776
00:37:38,349 --> 00:37:44,239
I'm going to say that however many of

777
00:37:41,750 --> 00:37:49,280
these we end up picking for the path

778
00:37:44,239 --> 00:38:06,469
count I've got my temporary memory

779
00:37:49,280 --> 00:38:22,010
somewhere here yeah so I'm just going to

780
00:38:06,469 --> 00:38:23,569
go ahead and say look actually remember

781
00:38:22,010 --> 00:38:26,960
how this works but let's say it works

782
00:38:23,570 --> 00:38:37,700
like that I'm gonna say we're gonna keep

783
00:38:26,960 --> 00:38:49,159
an array of every room that is in the

784
00:38:37,699 --> 00:38:51,519
path so we start out every time you make

785
00:38:49,159 --> 00:38:51,519
one of these

786
00:38:56,789 --> 00:39:03,179
we record which one it is

787
00:38:59,440 --> 00:39:09,579
and the exit room and the entrance room

788
00:39:03,179 --> 00:39:13,629
are probably special I don't know if we

789
00:39:09,579 --> 00:39:18,279
want to put this into the path probably

790
00:39:13,630 --> 00:39:21,460
not so I would say maybe the exit room

791
00:39:18,280 --> 00:39:39,460
is special as well so maybe floor exit

792
00:39:21,460 --> 00:39:42,670
room is its own Jenna as well so when we

793
00:39:39,460 --> 00:39:44,590
create one of these paths it'll sort of

794
00:39:42,670 --> 00:39:48,579
push a temporary on there that says have

795
00:39:44,590 --> 00:39:52,360
what all the paths are and then at the

796
00:39:48,579 --> 00:40:01,029
end we'll get one of these guys the

797
00:39:52,360 --> 00:40:03,940
connects to the floor exit room there

798
00:40:01,030 --> 00:40:05,740
and then the you know on when we

799
00:40:03,940 --> 00:40:09,639
actually exit we'll keep that one for

800
00:40:05,739 --> 00:40:11,739
the for the final room that all seems

801
00:40:09,639 --> 00:40:14,799
pretty reasonable to me and then when I

802
00:40:11,739 --> 00:40:17,409
have this array here that has all of the

803
00:40:14,800 --> 00:40:21,100
rooms in it what I can do at the end is

804
00:40:17,409 --> 00:40:24,460
then now I can just sort of randomly

805
00:40:21,099 --> 00:40:28,299
place where the other things are going

806
00:40:24,460 --> 00:40:30,070
to be right so I can say all right I

807
00:40:28,300 --> 00:40:32,710
don't know what other things are going

808
00:40:30,070 --> 00:40:35,670
to be in this but let's say we've got a

809
00:40:32,710 --> 00:40:35,670
couple other things

810
00:41:02,179 --> 00:41:07,289
since I don't really care to go down the

811
00:41:05,820 --> 00:41:08,730
rathole of thinking about all the things

812
00:41:07,289 --> 00:41:12,000
that might be in a dungeon right now

813
00:41:08,730 --> 00:41:17,210
that will suffice so what I want to do

814
00:41:12,000 --> 00:41:22,019
is say let's randomly put those off of

815
00:41:17,210 --> 00:41:24,510
something in the chain right so what I'd

816
00:41:22,019 --> 00:41:47,610
like to do is say okay pick a random

817
00:41:24,510 --> 00:41:52,220
number so we'll just say connect one of

818
00:41:47,610 --> 00:41:52,220
the rooms in the path with the shop room

819
00:41:57,789 --> 00:42:11,000
same with the item room now there's a

820
00:42:09,050 --> 00:42:14,210
problem with this style of writing the

821
00:42:11,000 --> 00:42:17,389
code as you can see almost immediately

822
00:42:14,210 --> 00:42:19,250
right and the problem is that if you

823
00:42:17,389 --> 00:42:20,809
wanted to have more than two you would

824
00:42:19,250 --> 00:42:23,090
quickly get to a place where if you

825
00:42:20,809 --> 00:42:25,219
randomly picked the same room every time

826
00:42:23,090 --> 00:42:29,360
to connect them to you'd run out of

827
00:42:25,219 --> 00:42:31,129
walls to connect them too right so what

828
00:42:29,360 --> 00:42:33,890
we want to do here is we want to make

829
00:42:31,130 --> 00:42:36,200
this we probably want to make a utility

830
00:42:33,889 --> 00:42:39,019
for doing exactly this that every time

831
00:42:36,199 --> 00:42:41,389
we connect a room to something it will

832
00:42:39,019 --> 00:42:45,130
remove that room as a choice for future

833
00:42:41,389 --> 00:42:45,129
connections here what I mean

834
00:43:05,070 --> 00:43:11,280
but otherwise and for right now since we

835
00:43:07,719 --> 00:43:11,279
only have two of them there it's fine

836
00:43:16,199 --> 00:43:22,960
now it could still fail in a snake

837
00:43:19,210 --> 00:43:25,659
configuration possibly well not probably

838
00:43:22,960 --> 00:43:28,780
not but it might

839
00:43:25,659 --> 00:43:32,559
it could right so this may still cause

840
00:43:28,780 --> 00:43:33,880
us some problems at the moment depending

841
00:43:32,559 --> 00:43:37,690
on how the dungeon ends up being laid

842
00:43:33,880 --> 00:43:40,930
out but yeah so if we take a look at

843
00:43:37,690 --> 00:43:44,769
this now we've kind of got a sketch of

844
00:43:40,929 --> 00:43:46,659
it this is basically the generation code

845
00:43:44,769 --> 00:43:48,340
for a dungeon right I mean there's not a

846
00:43:46,659 --> 00:43:50,440
lot more to it than that this would

847
00:43:48,340 --> 00:43:52,240
basically produce a typical binding of

848
00:43:50,440 --> 00:43:53,920
issac level the only thing it doesn't do

849
00:43:52,239 --> 00:43:56,829
is allow the dungeon to connect back up

850
00:43:53,920 --> 00:43:58,150
to itself which we might want to do for

851
00:43:56,829 --> 00:44:03,039
the moment I don't really want to do

852
00:43:58,150 --> 00:44:04,450
that because we're gonna want to do more

853
00:44:03,039 --> 00:44:07,840
stuff with dungeons later on and so on

854
00:44:04,449 --> 00:44:11,649
but still so what I'd like to do here

855
00:44:07,840 --> 00:44:14,220
what's this complaining about how is

856
00:44:11,650 --> 00:44:14,220
this ambiguous

857
00:44:22,119 --> 00:44:26,099
ah because they're you thirty twos

858
00:44:38,130 --> 00:44:47,778
all right I assume moving on I gotta

859
00:44:42,659 --> 00:44:47,778
actually put this in the temp memory

860
00:44:51,018 --> 00:45:05,239
this path count come first guess it does

861
00:45:00,170 --> 00:45:05,240
and for the forest code

862
00:45:14,568 --> 00:45:20,429
we're just probably going to have four

863
00:45:16,559 --> 00:45:22,849
exits one for each of the directions and

864
00:45:20,429 --> 00:45:27,298
I think this should probably line up

865
00:45:22,849 --> 00:45:31,980
with these right here right so we

866
00:45:27,298 --> 00:45:34,199
probably want to just have four four X's

867
00:45:31,980 --> 00:45:43,889
of correspond to west east north and

868
00:45:34,199 --> 00:45:46,739
south okay so that's it

869
00:45:43,889 --> 00:45:48,480
and now if I actually wanted to generate

870
00:45:46,739 --> 00:45:50,489
one of these one of the nice things is

871
00:45:48,480 --> 00:45:53,699
we can just not call the orphanage

872
00:45:50,489 --> 00:45:55,288
generator and call only the dungeon

873
00:45:53,699 --> 00:45:56,909
generator temporarily so that it won't

874
00:45:55,289 --> 00:46:00,089
make an orphanage so we don't have to

875
00:45:56,909 --> 00:46:01,469
like hop out of the orphanage to find

876
00:46:00,088 --> 00:46:04,469
the dungeon or something like that right

877
00:46:01,469 --> 00:46:06,358
we can just make a dungeon and place the

878
00:46:04,469 --> 00:46:08,098
character right in the dungeon now one

879
00:46:06,358 --> 00:46:12,058
thing I haven't done yet is I want to

880
00:46:08,099 --> 00:46:15,480
create size of these rooms one of the

881
00:46:12,059 --> 00:46:18,569
things that I did earlier on is there

882
00:46:15,480 --> 00:46:22,588
was a thing I placed in here

883
00:46:18,568 --> 00:46:25,949
that's the required dimensions right I'd

884
00:46:22,588 --> 00:46:27,989
like to first move that into the room

885
00:46:25,949 --> 00:46:30,358
spec because that's really where that

886
00:46:27,989 --> 00:46:31,949
probably belongs right room

887
00:46:30,358 --> 00:46:33,598
specifications should probably be the

888
00:46:31,949 --> 00:46:36,629
thing that says what the dimensions of

889
00:46:33,599 --> 00:46:39,539
the room have to be or can be so I think

890
00:46:36,630 --> 00:46:43,619
I want to do this and then everywhere

891
00:46:39,539 --> 00:46:46,049
that was doing required dimensions

892
00:46:43,619 --> 00:46:49,278
should really be something that's called

893
00:46:46,048 --> 00:46:49,278
on a room spec

894
00:46:56,309 --> 00:47:01,619
that's my story and I'm sticking to it

895
00:46:59,429 --> 00:47:05,219
so when we go to grab one of these

896
00:47:01,619 --> 00:47:11,099
things I'm gonna do Jen room spec spec

897
00:47:05,219 --> 00:47:13,709
equals room spec and then everything

898
00:47:11,099 --> 00:47:18,650
that was room required dim is now gonna

899
00:47:13,710 --> 00:47:18,650
be room spec right

900
00:47:27,380 --> 00:47:34,140
oops no it's not

901
00:47:29,639 --> 00:47:37,289
sorry what I meant to say was anything

902
00:47:34,139 --> 00:47:45,049
that was room require dim is going to be

903
00:47:37,289 --> 00:47:45,050
spec required dim can't see that

904
00:47:53,909 --> 00:47:59,949
don't want to touch those right yet and

905
00:47:58,230 --> 00:48:04,599
here we go for this

906
00:47:59,949 --> 00:48:06,669
so in here what I want to do is for

907
00:48:04,599 --> 00:48:08,769
these and you can see why I want to do

908
00:48:06,670 --> 00:48:09,340
this because that's really what we're

909
00:48:08,769 --> 00:48:11,769
saying

910
00:48:09,340 --> 00:48:13,809
so the bedroom spec is the thing that

911
00:48:11,769 --> 00:48:17,519
determines the size of all of the

912
00:48:13,809 --> 00:48:21,009
bedrooms right and we want those to be

913
00:48:17,519 --> 00:48:25,360
specified uniformly same thing with the

914
00:48:21,010 --> 00:48:27,010
hero save slot probably so actually

915
00:48:25,360 --> 00:48:28,720
these these bedrooms here should not be

916
00:48:27,010 --> 00:48:31,240
bedroom specs they should be save slots

917
00:48:28,719 --> 00:48:32,619
they're a little bit different so this

918
00:48:31,239 --> 00:48:37,750
is just going to say looks up the

919
00:48:32,619 --> 00:48:44,279
bedroom specs size let's see here here a

920
00:48:37,750 --> 00:48:44,280
save slot that's the save slots back

921
00:48:44,409 --> 00:48:47,969
this is the garden spec

922
00:48:49,338 --> 00:48:57,548
a sick law respect

923
00:48:58,179 --> 00:49:01,289
[Music]

924
00:49:03,349 --> 00:49:14,839
this is the hallway spec I guess and the

925
00:49:11,690 --> 00:49:18,200
hallway spec is a little bit different

926
00:49:14,840 --> 00:49:19,730
because you know we're kind of an

927
00:49:18,199 --> 00:49:21,500
in-between point here and normally when

928
00:49:19,730 --> 00:49:23,420
we specify the hallway we wouldn't say

929
00:49:21,500 --> 00:49:25,010
what direction the hallway goes it would

930
00:49:23,420 --> 00:49:27,039
allow the system to probably place the

931
00:49:25,010 --> 00:49:29,690
hallway in either in either orientation

932
00:49:27,039 --> 00:49:31,639
right now we will have to create two

933
00:49:29,690 --> 00:49:37,570
because our system doesn't really handle

934
00:49:31,639 --> 00:49:41,329
that so that's a vertical and horizontal

935
00:49:37,570 --> 00:49:43,850
if you will and so like the front hall

936
00:49:41,329 --> 00:49:46,429
is a vertical hallway and the back hall

937
00:49:43,849 --> 00:49:46,849
is a horizontal hallway if that makes

938
00:49:46,429 --> 00:49:50,779
sense

939
00:49:46,849 --> 00:49:52,730
but eventually I don't think we'll

940
00:49:50,780 --> 00:49:56,780
differentiate we'll just have hallways

941
00:49:52,730 --> 00:50:01,280
and the spec will specify that it can do

942
00:49:56,780 --> 00:50:05,920
that rotation as necessary so here's a

943
00:50:01,280 --> 00:50:13,040
kitchen spec taylor spec main room spec

944
00:50:05,920 --> 00:50:15,950
we go so then here we can just sort of

945
00:50:13,039 --> 00:50:17,269
make this code behave like this although

946
00:50:15,949 --> 00:50:22,909
you know eventually I think we probably

947
00:50:17,269 --> 00:50:24,440
want to make this a little bit more we

948
00:50:22,909 --> 00:50:25,549
want to clean that code up as well at

949
00:50:24,440 --> 00:50:27,970
some point here because this is gonna

950
00:50:25,550 --> 00:50:31,760
have to be a little bit more thoughtful

951
00:50:27,969 --> 00:50:34,359
so if I run this what I should get is

952
00:50:31,760 --> 00:50:36,890
the exact same orphanage and I do write

953
00:50:34,360 --> 00:50:38,570
anyway so the point now is when we're up

954
00:50:36,889 --> 00:50:40,190
in the dungeon code you know the

955
00:50:38,570 --> 00:50:43,190
dungeons are supposed to have a bunch of

956
00:50:40,190 --> 00:50:44,900
rooms that are sized uniformly so we

957
00:50:43,190 --> 00:50:53,780
should only really have to set the size

958
00:50:44,900 --> 00:50:56,119
once here and say the dungeon the

959
00:50:53,780 --> 00:50:58,730
dungeons all use this same one here so

960
00:50:56,119 --> 00:51:01,219
they're all gonna say look the dimension

961
00:50:58,730 --> 00:51:04,670
is always whatever the standard Zelda

962
00:51:01,219 --> 00:51:06,199
size room is or whatever it is I don't

963
00:51:04,670 --> 00:51:08,659
know if that's 17 by 9 something like

964
00:51:06,199 --> 00:51:10,489
that so where it's always gonna look

965
00:51:08,659 --> 00:51:13,909
like this like that's just what a

966
00:51:10,489 --> 00:51:16,569
dungeon looks like and that's the end of

967
00:51:13,909 --> 00:51:16,569
the story right

968
00:51:16,690 --> 00:51:21,099
so if I go ahead and compile that now we

969
00:51:19,300 --> 00:51:22,570
should this should now be functional

970
00:51:21,099 --> 00:51:25,719
because everyone uses unjust facts so

971
00:51:22,570 --> 00:51:27,130
all of these should be reasonable and if

972
00:51:25,719 --> 00:51:30,129
we ask you to create a dungeon we're

973
00:51:27,130 --> 00:51:31,420
almost on our way but we are now getting

974
00:51:30,130 --> 00:51:32,380
into the part of the generation where we

975
00:51:31,420 --> 00:51:34,000
got to upgrade the system a little

976
00:51:32,380 --> 00:51:39,130
because we don't handle arbitrary

977
00:51:34,000 --> 00:51:43,059
connections yet right so when you have a

978
00:51:39,130 --> 00:51:45,930
set of connections that are specified

979
00:51:43,059 --> 00:51:49,210
like that right now we don't handle

980
00:51:45,929 --> 00:51:52,329
selecting one from a set yeah that's not

981
00:51:49,210 --> 00:51:55,539
something that we actually allow so

982
00:51:52,329 --> 00:51:59,340
let's go ahead and start that though so

983
00:51:55,539 --> 00:51:59,340
if I made an if 0 here

984
00:52:11,699 --> 00:52:22,799
and I'm gonna have to do basically both

985
00:52:15,989 --> 00:52:34,139
of these right well I can still create

986
00:52:22,800 --> 00:52:38,060
the orphanage so this will create that

987
00:52:34,139 --> 00:52:38,059
dungeon this will lay out the dungeon

988
00:52:39,380 --> 00:52:59,099
but I probably want to do here is to

989
00:52:41,489 --> 00:53:02,009
have a thing that's like so this would

990
00:52:59,099 --> 00:53:03,119
normally be that right but we're not

991
00:53:02,010 --> 00:53:06,150
gonna do that we're gonna do this

992
00:53:03,119 --> 00:53:09,240
instead temporarily in fact we could

993
00:53:06,150 --> 00:53:13,769
just do it like this where we overwrite

994
00:53:09,239 --> 00:53:24,989
it and then here you know again we've

995
00:53:13,769 --> 00:53:28,980
got sort of this situation going that

996
00:53:24,989 --> 00:53:32,779
would create the dungeon and place us in

997
00:53:28,980 --> 00:53:32,780
the starting room of the dungeon

998
00:53:33,980 --> 00:53:38,909
everyone knows dungeons have seven

999
00:53:35,940 --> 00:53:41,130
floors so there you go

1000
00:53:38,909 --> 00:53:44,068
and now if we run this we will probably

1001
00:53:41,130 --> 00:53:47,369
get something very bad and the reason is

1002
00:53:44,068 --> 00:53:49,949
because we don't have and you can see we

1003
00:53:47,369 --> 00:53:51,410
asserted here that we can't place this

1004
00:53:49,949 --> 00:53:54,568
because we don't know what to do

1005
00:53:51,409 --> 00:53:57,659
remember all our code does now is it

1006
00:53:54,568 --> 00:54:01,230
assumes that the direction that you want

1007
00:53:57,659 --> 00:54:03,598
to go from a room can only have one

1008
00:54:01,230 --> 00:54:06,420
members right so it can only have one

1009
00:54:03,599 --> 00:54:09,690
bit set east north south west whatever

1010
00:54:06,420 --> 00:54:12,960
right but what you can't do is say any

1011
00:54:09,690 --> 00:54:14,639
of the above so the simplest

1012
00:54:12,960 --> 00:54:18,210
modification to this that we could make

1013
00:54:14,639 --> 00:54:21,299
right is something that tries to place

1014
00:54:18,210 --> 00:54:24,530
rooms along the edge in the case where

1015
00:54:21,300 --> 00:54:24,530
it just if it has

1016
00:54:24,650 --> 00:54:29,700
large set of possibilities it will just

1017
00:54:28,108 --> 00:54:32,068
go ahead and pick randomly from them

1018
00:54:29,699 --> 00:54:37,288
until it can succeed so if I go to a

1019
00:54:32,068 --> 00:54:38,730
place rooms along edge where is placed

1020
00:54:37,289 --> 00:54:40,650
rivers along and shears fixtures along

1021
00:54:38,730 --> 00:54:42,269
edge so if you take a look at place

1022
00:54:40,650 --> 00:54:45,660
rooms along edge it's just gonna place

1023
00:54:42,268 --> 00:54:47,338
these rooms and what we could do is we

1024
00:54:45,659 --> 00:54:48,899
can look at this generation index here

1025
00:54:47,338 --> 00:54:53,159
as being something that maybe should

1026
00:54:48,900 --> 00:54:56,519
only be set speculatively right so what

1027
00:54:53,159 --> 00:55:03,469
we can do is we could say all right if

1028
00:54:56,518 --> 00:55:07,909
we find that the rooms that were placing

1029
00:55:03,469 --> 00:55:14,429
can't all be placed we will back up and

1030
00:55:07,909 --> 00:55:16,318
undo those placements as necessary right

1031
00:55:14,429 --> 00:55:17,639
so we so now we can start to make

1032
00:55:16,318 --> 00:55:21,358
something that might actually work

1033
00:55:17,639 --> 00:55:22,889
so we can do something like that but

1034
00:55:21,358 --> 00:55:25,078
let's just think through how this is

1035
00:55:22,889 --> 00:55:28,469
going to work so normally what happens

1036
00:55:25,079 --> 00:55:33,749
we come through here we say okay we

1037
00:55:28,469 --> 00:55:36,538
found a room and this room needs to be

1038
00:55:33,748 --> 00:55:41,009
placed and the room that its antecedent

1039
00:55:36,539 --> 00:55:45,119
room has been placed right now when we

1040
00:55:41,009 --> 00:55:47,068
get this direction here what we need

1041
00:55:45,119 --> 00:55:50,150
expand is to is supporting more than one

1042
00:55:47,068 --> 00:55:58,018
direction and to do something about that

1043
00:55:50,150 --> 00:56:00,900
so if we were to randomly if we were to

1044
00:55:58,018 --> 00:56:02,338
randomly try places up for the room we

1045
00:56:00,900 --> 00:56:04,259
could do this with a single room pretty

1046
00:56:02,338 --> 00:56:07,858
easily and not even have to back up if

1047
00:56:04,259 --> 00:56:09,298
we never got into a failure State so let

1048
00:56:07,858 --> 00:56:12,838
me just articulate a little bit how that

1049
00:56:09,298 --> 00:56:14,608
would go so first of all in fact you

1050
00:56:12,838 --> 00:56:16,259
know what let me actually back up one

1051
00:56:14,608 --> 00:56:18,808
step further because I just realized we

1052
00:56:16,259 --> 00:56:22,619
have a more powerful routine now than we

1053
00:56:18,809 --> 00:56:24,989
had before and we can simplify so let's

1054
00:56:22,619 --> 00:56:27,650
suppose that we nerf the dungeon bit for

1055
00:56:24,989 --> 00:56:27,650
a second here

1056
00:56:32,719 --> 00:56:38,009
so here's the orphanage

1057
00:56:34,769 --> 00:56:40,019
now remember we're placing rooms using

1058
00:56:38,010 --> 00:56:41,990
this place rooms long edge we don't have

1059
00:56:40,019 --> 00:56:45,119
to do that anymore why because we have

1060
00:56:41,989 --> 00:56:47,219
testing so instead of place rooms along

1061
00:56:45,119 --> 00:56:51,329
edge this can actually be just called

1062
00:56:47,219 --> 00:56:54,509
place room along edge and it can say

1063
00:56:51,329 --> 00:57:06,750
which room it wants to place right this

1064
00:56:54,510 --> 00:57:11,910
can go away now and we can just pass the

1065
00:57:06,750 --> 00:57:16,588
connection in right so we can say place

1066
00:57:11,909 --> 00:57:23,960
room along edge and say Jen connection

1067
00:57:16,588 --> 00:57:29,029
connection and then in here when we go

1068
00:57:23,960 --> 00:57:31,650
when we continue down through here this

1069
00:57:29,030 --> 00:57:33,780
is not really a dura mask it's actually

1070
00:57:31,650 --> 00:57:36,420
just a direction we could pass this

1071
00:57:33,780 --> 00:57:41,849
directly if we want to and that would do

1072
00:57:36,420 --> 00:57:44,220
it right so if I replace the call to

1073
00:57:41,849 --> 00:57:47,490
this place rooms place rooms along edge

1074
00:57:44,219 --> 00:57:50,219
with place room along edge right then

1075
00:57:47,489 --> 00:57:54,389
what we can do is say oh well the other

1076
00:57:50,219 --> 00:57:57,750
room here and this connection that we're

1077
00:57:54,389 --> 00:58:00,659
on that's what we're trying to that's

1078
00:57:57,750 --> 00:58:02,099
what we're trying to place okay we know

1079
00:58:00,659 --> 00:58:04,858
the direction in the generation index

1080
00:58:02,099 --> 00:58:06,780
still here

1081
00:58:04,858 --> 00:58:08,969
this I believe will now lay out the

1082
00:58:06,780 --> 00:58:10,680
orphanage the same way so we don't need

1083
00:58:08,969 --> 00:58:12,299
to place rooms along an edge one after

1084
00:58:10,679 --> 00:58:14,578
the other because now we just test to

1085
00:58:12,300 --> 00:58:18,269
see where they can fit in so we can just

1086
00:58:14,579 --> 00:58:20,400
call it per room so once we can call it

1087
00:58:18,269 --> 00:58:23,338
per room that also means now when we get

1088
00:58:20,400 --> 00:58:26,460
this direction we can try multiple times

1089
00:58:23,338 --> 00:58:29,159
right if we aren't able to place this

1090
00:58:26,460 --> 00:58:30,869
room so if this call fails to be able to

1091
00:58:29,159 --> 00:58:34,649
place the room the room does not get

1092
00:58:30,869 --> 00:58:37,530
placed right so when we come through

1093
00:58:34,650 --> 00:58:42,980
here rather than asserting this place we

1094
00:58:37,530 --> 00:58:46,140
can just say if placed like so

1095
00:58:42,980 --> 00:58:52,829
what we can then do is move placed out

1096
00:58:46,139 --> 00:58:57,900
as a more primary element here and like

1097
00:58:52,829 --> 00:58:59,309
so and then just return that now we

1098
00:58:57,900 --> 00:59:02,670
could check the generation index and

1099
00:58:59,309 --> 00:59:04,250
know this actually but also it's pretty

1100
00:59:02,670 --> 00:59:07,260
convenient to just have it be returned

1101
00:59:04,250 --> 00:59:10,440
so then when we can do is say well let's

1102
00:59:07,260 --> 00:59:15,839
keep trying all of the directions that

1103
00:59:10,440 --> 00:59:18,480
we could potentially go and as we try

1104
00:59:15,838 --> 00:59:19,828
those directions we can also probably

1105
00:59:18,480 --> 00:59:21,269
just say we don't need to test this

1106
00:59:19,829 --> 00:59:25,528
anymore because presumably the outside

1107
00:59:21,269 --> 00:59:29,190
code did test that so that might be more

1108
00:59:25,528 --> 00:59:32,880
of an assertion really now if that makes

1109
00:59:29,190 --> 00:59:35,599
sense so I think we probably want to do

1110
00:59:32,880 --> 00:59:35,599
something more like this

1111
00:59:45,750 --> 00:59:49,840
right because if somebody called us to

1112
00:59:48,489 --> 00:59:51,459
place a room that's already been placed

1113
00:59:49,840 --> 00:59:52,960
that's probably a bug in the outside

1114
00:59:51,460 --> 00:59:55,599
code and we'd rather know about it

1115
00:59:52,960 --> 00:59:59,170
sooner than later because somebody's got

1116
00:59:55,599 --> 01:00:00,369
to fix something right so now what I

1117
00:59:59,170 --> 01:00:02,980
want to do say all right

1118
01:00:00,369 --> 01:00:05,559
well if this place room along edge call

1119
01:00:02,980 --> 01:00:08,108
is gonna be a thing that that takes this

1120
01:00:05,559 --> 01:00:09,519
connection in and assigns it what I

1121
01:00:08,108 --> 01:00:12,299
should be able to do is now say all

1122
01:00:09,519 --> 01:00:18,039
right let's move this surface index here

1123
01:00:12,300 --> 01:00:19,390
let's move that up right and so to show

1124
01:00:18,039 --> 01:00:21,670
you what I mean by that

1125
01:00:19,389 --> 01:00:26,769
where's our mask used it's is it only

1126
01:00:21,670 --> 01:00:29,740
there yes so what I want to do here is

1127
01:00:26,769 --> 01:00:34,750
is elevate that up one so what I want do

1128
01:00:29,739 --> 01:00:42,699
is say give me the surface mask right or

1129
01:00:34,750 --> 01:00:46,059
yeah give me the surface mask for this

1130
01:00:42,699 --> 01:00:51,219
surface index like so so there's no dur

1131
01:00:46,059 --> 01:00:55,380
mask anymore like this and then move

1132
01:00:51,219 --> 01:00:55,379
this up as the thing that gets passed in

1133
01:00:56,369 --> 01:01:03,010
right so now on the outside here what I

1134
01:01:00,760 --> 01:01:07,839
want to do is say oops that's the wrong

1135
01:01:03,010 --> 01:01:09,580
loop so now what I want to do here is

1136
01:01:07,838 --> 01:01:15,009
say okay when we're gonna place this

1137
01:01:09,579 --> 01:01:17,348
room into the system here when we

1138
01:01:15,010 --> 01:01:20,200
actually take this direction that we do

1139
01:01:17,349 --> 01:01:24,910
get dirt mass from room I can also say

1140
01:01:20,199 --> 01:01:27,219
get box box surface index direction and

1141
01:01:24,909 --> 01:01:30,269
make this adder mask and you can see how

1142
01:01:27,219 --> 01:01:33,789
we're collapsing this code further up

1143
01:01:30,269 --> 01:01:36,690
into this into the calling code in

1144
01:01:33,789 --> 01:01:39,550
preparation for looping over it so now

1145
01:01:36,690 --> 01:01:42,190
again run exact same code path but we've

1146
01:01:39,550 --> 01:01:44,609
elevated that choice of the direction up

1147
01:01:42,190 --> 01:01:47,500
to the calling code which means that now

1148
01:01:44,608 --> 01:01:50,588
we are no longer obligated to do it this

1149
01:01:47,500 --> 01:01:53,769
way right so now what we could do is try

1150
01:01:50,588 --> 01:01:56,299
if the dur mask supports multiple things

1151
01:01:53,769 --> 01:02:03,289
we can randomly pull those

1152
01:01:56,300 --> 01:02:07,630
out of the we can randomly pick ones to

1153
01:02:03,289 --> 01:02:10,550
try from there as we fail so we can try

1154
01:02:07,630 --> 01:02:12,860
if adder mask has multiple things set in

1155
01:02:10,550 --> 01:02:17,390
it then what we can do is randomly try

1156
01:02:12,860 --> 01:02:19,160
things in the der mask as we go right so

1157
01:02:17,389 --> 01:02:21,230
what I'm going to do here is I'm gonna

1158
01:02:19,159 --> 01:02:23,329
introduce a call that allows me to pick

1159
01:02:21,230 --> 01:02:26,210
a random direction from the direction

1160
01:02:23,329 --> 01:02:28,519
mask and so we're gonna we're going to

1161
01:02:26,210 --> 01:02:32,900
first pull out the direction mask then

1162
01:02:28,519 --> 01:02:34,820
I'm going to loop on trying to place

1163
01:02:32,900 --> 01:02:36,680
this room we're gonna leave the

1164
01:02:34,820 --> 01:02:38,960
assertion in place because right now if

1165
01:02:36,679 --> 01:02:40,969
we can't place the room we don't have an

1166
01:02:38,960 --> 01:02:42,170
alternate strategy in the future we will

1167
01:02:40,969 --> 01:02:44,539
have to have alternate strategies

1168
01:02:42,170 --> 01:02:46,550
rip-rip up and replace strategies to

1169
01:02:44,539 --> 01:02:47,449
help place rooms when we backed

1170
01:02:46,550 --> 01:02:48,920
ourselves into corner

1171
01:02:47,449 --> 01:02:51,139
what what do I mean by backed ourselves

1172
01:02:48,920 --> 01:02:53,300
into a corner well let's suppose I just

1173
01:02:51,139 --> 01:02:55,129
said that I've got a certain number of

1174
01:02:53,300 --> 01:02:56,660
rooms connected to each other and I

1175
01:02:55,130 --> 01:02:58,280
don't say how they're connected so I've

1176
01:02:56,659 --> 01:03:00,799
got eight rooms and they're just

1177
01:02:58,280 --> 01:03:02,180
connected in a line right perfectly

1178
01:03:00,800 --> 01:03:04,280
valid thing to say so the random

1179
01:03:02,179 --> 01:03:15,969
generator starts and it just happens to

1180
01:03:04,280 --> 01:03:21,109
pick this right I said eight

1181
01:03:15,969 --> 01:03:23,029
well if now this room happened to have

1182
01:03:21,108 --> 01:03:26,569
some other room that needs to get placed

1183
01:03:23,030 --> 01:03:30,040
as well it can't go anywhere right all

1184
01:03:26,570 --> 01:03:32,930
of its places are their stuff there so

1185
01:03:30,039 --> 01:03:34,820
what would need to happen here is either

1186
01:03:32,929 --> 01:03:36,769
it would need to know that it can move

1187
01:03:34,820 --> 01:03:39,230
this over here or something if there's

1188
01:03:36,769 --> 01:03:40,969
like information that allows if if it's

1189
01:03:39,230 --> 01:03:43,309
not essential that this be connected

1190
01:03:40,969 --> 01:03:47,209
here if it has other options for a

1191
01:03:43,309 --> 01:03:49,159
connection then that's fine but short of

1192
01:03:47,210 --> 01:03:51,170
that what it would have to do is back up

1193
01:03:49,159 --> 01:03:54,409
and try a different strategy

1194
01:03:51,170 --> 01:03:56,108
so try placing this room first let's say

1195
01:03:54,409 --> 01:03:58,670
and then hey this would just work

1196
01:03:56,108 --> 01:04:02,569
because it wouldn't pick there to put

1197
01:03:58,670 --> 01:04:06,108
that thing so we will have to introduce

1198
01:04:02,570 --> 01:04:08,510
other strategies for placement and so

1199
01:04:06,108 --> 01:04:11,980
we're going to have more than just what

1200
01:04:08,510 --> 01:04:14,570
you see at the moment but at the moment

1201
01:04:11,980 --> 01:04:16,820
we're not doing anything fancy so this

1202
01:04:14,570 --> 01:04:20,240
assertion should stand because it's not

1203
01:04:16,820 --> 01:04:22,160
gonna there's no recovery right so the

1204
01:04:20,239 --> 01:04:24,139
assertion lets us know we've outstripped

1205
01:04:22,159 --> 01:04:26,899
the capabilities of our current very

1206
01:04:24,139 --> 01:04:29,269
limited placement routines so once we

1207
01:04:26,900 --> 01:04:34,160
get adder mask what I'd like to do now

1208
01:04:29,269 --> 01:04:38,000
is I'd like to loop through I and I'd

1209
01:04:34,159 --> 01:04:40,429
like to I'd like to have a way of

1210
01:04:38,000 --> 01:04:42,440
picking a random direction for the dur

1211
01:04:40,429 --> 01:04:44,919
mask so I'd like to do something like

1212
01:04:42,440 --> 01:04:44,920
this

1213
01:04:50,880 --> 01:04:57,550
so if I pass a germ a skin and I pass in

1214
01:04:55,119 --> 01:05:00,309
a random series so you like the random

1215
01:04:57,550 --> 01:05:02,680
generator right and I see look give me a

1216
01:05:00,309 --> 01:05:06,190
random Direction out I'm gonna try that

1217
01:05:02,679 --> 01:05:07,960
direction and then when I'm done I'm

1218
01:05:06,190 --> 01:05:10,690
gonna see whether or not I could

1219
01:05:07,960 --> 01:05:12,550
actually go that direction right so when

1220
01:05:10,690 --> 01:05:15,670
this thing comes out I'm gonna say

1221
01:05:12,550 --> 01:05:17,580
alright if I could place the room along

1222
01:05:15,670 --> 01:05:22,960
that thing then I'm done

1223
01:05:17,579 --> 01:05:25,929
otherwise I'm I'm not right otherwise I

1224
01:05:22,960 --> 01:05:28,210
keep going and in that case I suppose we

1225
01:05:25,929 --> 01:05:32,259
can also say what we do we want to do

1226
01:05:28,210 --> 01:05:34,980
get surface mask from the index right I

1227
01:05:32,260 --> 01:05:39,550
believe that is this thing right here

1228
01:05:34,980 --> 01:05:43,088
this surface mask I want to take the

1229
01:05:39,550 --> 01:05:47,849
direction and I want to knock out that

1230
01:05:43,088 --> 01:05:47,849
direction from it so oops sorry

1231
01:05:50,639 --> 01:05:55,809
so I want to take whatever direction I

1232
01:05:53,920 --> 01:05:56,460
tried and I don't want to ever try it

1233
01:05:55,809 --> 01:05:59,019
again

1234
01:05:56,460 --> 01:06:01,000
so as I'm picking random directions I'm

1235
01:05:59,019 --> 01:06:05,320
gonna pick that many so what I want to

1236
01:06:01,000 --> 01:06:07,599
do here is I want to yeah I just want to

1237
01:06:05,320 --> 01:06:10,359
do this this attempts so we've got two

1238
01:06:07,599 --> 01:06:12,609
things we might do so if we can place

1239
01:06:10,358 --> 01:06:15,489
them along the edge the other one is if

1240
01:06:12,608 --> 01:06:17,920
this direction comes back invalid right

1241
01:06:15,489 --> 01:06:24,759
or if there's nothing to do so the way

1242
01:06:17,920 --> 01:06:27,369
that would work is saying look hey only

1243
01:06:24,760 --> 01:06:30,160
try this while there's something in the

1244
01:06:27,369 --> 01:06:32,079
der mask to try once we've tried all the

1245
01:06:30,159 --> 01:06:34,449
directions we're done and we've

1246
01:06:32,079 --> 01:06:36,098
obviously failed so at that point it's

1247
01:06:34,449 --> 01:06:37,569
time to raise the assertion and say I

1248
01:06:36,099 --> 01:06:41,140
can't figure out where to place this

1249
01:06:37,570 --> 01:06:43,180
room and that's you know a problem for a

1250
01:06:41,139 --> 01:06:45,969
later day for for a better generator

1251
01:06:43,179 --> 01:06:49,659
right to solve not a bear generate a

1252
01:06:45,969 --> 01:06:51,489
better layout code specifically so all

1253
01:06:49,659 --> 01:06:54,039
we need I think to get this working

1254
01:06:51,489 --> 01:06:56,259
properly is that one piece of code this

1255
01:06:54,039 --> 01:06:59,079
right here that I'm sitting on that will

1256
01:06:56,260 --> 01:07:03,070
take a mask of directions and produce a

1257
01:06:59,079 --> 01:07:06,139
random direction there from right and so

1258
01:07:03,070 --> 01:07:10,700
I'm gonna do this in a really dumb way

1259
01:07:06,139 --> 01:07:11,868
right just a real stupid way and we can

1260
01:07:10,699 --> 01:07:15,079
think about this is where those things

1261
01:07:11,869 --> 01:07:32,090
where it might be fun to do the bit

1262
01:07:15,079 --> 01:07:33,889
twiddle even of it eventually so this is

1263
01:07:32,090 --> 01:07:36,320
gonna be a piece of code that honestly

1264
01:07:33,889 --> 01:07:38,179
we do not have to optimize I don't think

1265
01:07:36,320 --> 01:07:41,869
it will ever be called enough to really

1266
01:07:38,179 --> 01:07:43,519
make any difference to anybody but I'm

1267
01:07:41,869 --> 01:07:45,980
gonna do it a stupid super stupid way

1268
01:07:43,519 --> 01:07:47,539
and I bet just because when you

1269
01:07:45,980 --> 01:07:50,570
typically have something like a mass

1270
01:07:47,539 --> 01:07:52,429
like this when you have a bit tweedily

1271
01:07:50,570 --> 01:07:54,680
kind of situation there's probably a

1272
01:07:52,429 --> 01:07:57,199
clever way if we sit down to think about

1273
01:07:54,679 --> 01:08:02,269
it there's probably a clever way to do

1274
01:07:57,199 --> 01:08:06,618
the thing that produces a random one of

1275
01:08:02,269 --> 01:08:08,780
those bits right so I'm gonna do the

1276
01:08:06,619 --> 01:08:10,730
stupid version but there's gonna be a

1277
01:08:08,780 --> 01:08:13,609
smart version probably and maybe someday

1278
01:08:10,730 --> 01:08:18,470
we'll want to find that I don't actually

1279
01:08:13,608 --> 01:08:21,079
know that that's true but I'm just just

1280
01:08:18,470 --> 01:08:28,329
hypothesizing so we know there are six

1281
01:08:21,079 --> 01:08:28,329
directions so all I'm going to do

1282
01:08:30,109 --> 01:08:36,230
is I'm just going to go through them and

1283
01:08:34,368 --> 01:08:44,960
I'm gonna do the laziest stupidest

1284
01:08:36,229 --> 01:08:50,198
possible thing so I'm going to say if

1285
01:08:44,960 --> 01:08:50,198
the directional mask that were given

1286
01:08:55,000 --> 01:09:05,420
that was awesome I don't know what it

1287
01:08:58,429 --> 01:09:08,588
was but it's awesome I am going to I'm

1288
01:09:05,420 --> 01:09:13,368
going to basically test each of them and

1289
01:09:08,588 --> 01:09:14,689
when I find whichever one ones are set

1290
01:09:13,368 --> 01:09:18,380
I'm going to add them to the array and

1291
01:09:14,689 --> 01:09:28,338
then I'm just gonna return that that's

1292
01:09:18,380 --> 01:09:32,779
it I am gonna say at least at the moment

1293
01:09:28,338 --> 01:09:34,969
that this routine is required to have at

1294
01:09:32,779 --> 01:09:38,239
least one valid direction when you pass

1295
01:09:34,969 --> 01:09:41,088
it because I don't know if I want to

1296
01:09:38,238 --> 01:09:43,189
since since box surface index doesn't

1297
01:09:41,088 --> 01:09:45,380
have a null value I don't want anyone

1298
01:09:43,189 --> 01:09:47,750
asking for one if they can't get a real

1299
01:09:45,380 --> 01:09:49,940
one back so I'm just gonna say you have

1300
01:09:47,750 --> 01:09:51,439
to test der masks on the way in since

1301
01:09:49,939 --> 01:09:54,079
that does have a null value which is

1302
01:09:51,439 --> 01:09:55,789
zero so that's your responsibility so

1303
01:09:54,079 --> 01:09:58,010
anyone Pat calls us the der mask of zero

1304
01:09:55,789 --> 01:09:59,118
there any an assertion right off the bat

1305
01:09:58,010 --> 01:10:01,489
that's just how that's going to help

1306
01:09:59,118 --> 01:10:05,948
roll for now we'll revisit that later if

1307
01:10:01,488 --> 01:10:05,948
I decide I don't like it anyway

1308
01:10:10,109 --> 01:10:24,539
I this will produce for us a random

1309
01:10:16,020 --> 01:10:34,889
Direction out of the directions and that

1310
01:10:24,539 --> 01:10:37,590
should be it I yeah forgot I actually

1311
01:10:34,889 --> 01:10:39,719
need to call that code

1312
01:10:37,590 --> 01:10:42,420
it's what's well okay but that was good

1313
01:10:39,719 --> 01:10:43,829
you know so okay we ran it and we still

1314
01:10:42,420 --> 01:10:46,170
are producing the correct orphan step

1315
01:10:43,829 --> 01:10:48,000
that's good that means that this code at

1316
01:10:46,170 --> 01:10:50,969
least doesn't have an obvious bug in it

1317
01:10:48,000 --> 01:10:52,350
so when you give it a set of explicit

1318
01:10:50,969 --> 01:10:54,630
directional connections that must be

1319
01:10:52,350 --> 01:10:56,520
followed it will follow them so that's

1320
01:10:54,630 --> 01:10:57,960
good we wanted to make we want that to

1321
01:10:56,520 --> 01:11:00,510
work right and so it is good that I

1322
01:10:57,960 --> 01:11:01,739
tested that I didn't mean the test that

1323
01:11:00,510 --> 01:11:03,090
I was planning to call the dungeon area

1324
01:11:01,738 --> 01:11:04,529
but we should have tested it to make

1325
01:11:03,090 --> 01:11:08,550
sure that it's actually that the obvious

1326
01:11:04,529 --> 01:11:10,829
case is working so now let's try the

1327
01:11:08,550 --> 01:11:20,010
dungeon version just to see to what

1328
01:11:10,829 --> 01:11:26,809
extent that will work and it looks like

1329
01:11:20,010 --> 01:11:26,810
oh well so that assertion

1330
01:11:32,389 --> 01:11:44,300
huh so that's suggesting this room was

1331
01:11:36,679 --> 01:11:47,599
called uh uh yes

1332
01:11:44,300 --> 01:11:48,829
so that's incorrect we do have a we do

1333
01:11:47,599 --> 01:11:51,918
have one thing we have to modify in that

1334
01:11:48,828 --> 01:11:53,840
code this code that places the room it

1335
01:11:51,918 --> 01:11:55,279
always sets the generation that ice it

1336
01:11:53,840 --> 01:11:57,380
should not do that

1337
01:11:55,279 --> 01:11:59,359
it should only set the generation index

1338
01:11:57,380 --> 01:12:03,649
in the case where the room actually gets

1339
01:11:59,359 --> 01:12:06,768
placed so that that is that is correct

1340
01:12:03,649 --> 01:12:11,300
if the room cannot be placed in fact I

1341
01:12:06,769 --> 01:12:13,909
could put it here if the room cannot be

1342
01:12:11,300 --> 01:12:17,119
placed yeah then that's that's erroneous

1343
01:12:13,908 --> 01:12:19,009
maybe what I should do is actually make

1344
01:12:17,118 --> 01:12:20,958
that be something that gets computed

1345
01:12:19,010 --> 01:12:23,929
after the fact that way they both depend

1346
01:12:20,958 --> 01:12:26,029
on the same thing so bases say like you

1347
01:12:23,929 --> 01:12:28,880
know the results here is based on

1348
01:12:26,029 --> 01:12:30,259
whether the room generation index ends

1349
01:12:28,880 --> 01:12:32,689
up being equal to our generation index

1350
01:12:30,260 --> 01:12:36,349
which means it gets placed maybe that's

1351
01:12:32,689 --> 01:12:38,329
a more appropriate way to signal that so

1352
01:12:36,349 --> 01:12:40,189
that way there's it's not set twice in

1353
01:12:38,328 --> 01:12:44,898
the code and you can't have that problem

1354
01:12:40,189 --> 01:12:46,880
right all right so I think based on what

1355
01:12:44,899 --> 01:12:50,719
I'm seeing here I think that's this is

1356
01:12:46,880 --> 01:12:54,469
good because this means we don't have we

1357
01:12:50,719 --> 01:12:56,239
have hit one of any bug yet so what we

1358
01:12:54,469 --> 01:13:00,800
need to do here for a place room along

1359
01:12:56,238 --> 01:13:03,049
edge we don't currently support up/down

1360
01:13:00,800 --> 01:13:04,550
now I guess I should I kind of want to

1361
01:13:03,050 --> 01:13:06,409
test the other code first so maybe what

1362
01:13:04,550 --> 01:13:08,929
I'll do is I won't put in the up/down

1363
01:13:06,408 --> 01:13:10,038
connections yet so when we do floor

1364
01:13:08,929 --> 01:13:11,389
count here

1365
01:13:10,038 --> 01:13:13,759
maybe I'll nerf the floor account

1366
01:13:11,389 --> 01:13:15,498
temporarily so there isn't an up/down

1367
01:13:13,760 --> 01:13:17,840
there so that there will be no up-down

1368
01:13:15,498 --> 01:13:20,179
connections created so instead of that

1369
01:13:17,840 --> 01:13:23,649
what we'll do here is say alright you

1370
01:13:20,179 --> 01:13:25,699
know floor account always equals one

1371
01:13:23,649 --> 01:13:27,320
just so I can see if the other codes

1372
01:13:25,698 --> 01:13:30,469
working into bug that and then what I'll

1373
01:13:27,319 --> 01:13:32,299
do is add the up/down code right so

1374
01:13:30,469 --> 01:13:33,559
here's our dungeon layout and you can

1375
01:13:32,300 --> 01:13:36,769
see it

1376
01:13:33,559 --> 01:13:40,189
amusingly created exactly the layout

1377
01:13:36,769 --> 01:13:43,550
that I was talking about it did the

1378
01:13:40,189 --> 01:13:46,369
whined around don't ask me why but it

1379
01:13:43,550 --> 01:13:49,989
did so now I can hop around

1380
01:13:46,369 --> 01:13:53,510
the dungeon this is presumably the store

1381
01:13:49,989 --> 01:13:55,069
here or the or the item room right and

1382
01:13:53,510 --> 01:13:59,150
then I can hop out of here

1383
01:13:55,069 --> 01:14:01,729
and and I can ya can just keep on going

1384
01:13:59,149 --> 01:14:08,649
through through our dungeon and off we

1385
01:14:01,729 --> 01:14:12,409
go right so that's all fine whatever

1386
01:14:08,649 --> 01:14:14,569
great so that code is now working at

1387
01:14:12,409 --> 01:14:15,920
least moderately well and then what I

1388
01:14:14,569 --> 01:14:18,259
want to do is so I'll put the floor code

1389
01:14:15,920 --> 01:14:22,640
back in and then what we should see is

1390
01:14:18,260 --> 01:14:25,820
when I run this we get the assertion

1391
01:14:22,640 --> 01:14:27,980
that you're trying to connect things in

1392
01:14:25,819 --> 01:14:38,539
a way that this routine doesn't support

1393
01:14:27,979 --> 01:14:41,209
right so I think the tricky thing about

1394
01:14:38,539 --> 01:14:44,329
this is I don't really know how I want

1395
01:14:41,210 --> 01:14:53,779
this stuff to work just semantically

1396
01:14:44,329 --> 01:14:57,380
even I most of the time in video games

1397
01:14:53,779 --> 01:14:59,840
that I see there is no such thing as two

1398
01:14:57,380 --> 01:15:02,750
downward connections from a single room

1399
01:14:59,840 --> 01:15:07,090
that connect to two separate rooms not

1400
01:15:02,750 --> 01:15:07,090
in a game like Zelda anyway

1401
01:15:15,288 --> 01:15:18,840
but I suppose once you get up to the

1402
01:15:17,729 --> 01:15:20,459
versions of Zelda that had long

1403
01:15:18,840 --> 01:15:22,559
scrolling rooms then that was true so

1404
01:15:20,460 --> 01:15:24,840
like linked to the Past for example you

1405
01:15:22,559 --> 01:15:26,309
could probably go down over here and you

1406
01:15:24,840 --> 01:15:27,328
walk a long way through a scrolling room

1407
01:15:26,309 --> 01:15:29,940
and then there'd be a down over here in

1408
01:15:27,328 --> 01:15:33,558
those connect two separate rooms so so

1409
01:15:29,939 --> 01:15:37,069
you know that's that's not that's fine

1410
01:15:33,559 --> 01:15:37,070
right that's not

1411
01:15:42,038 --> 01:15:48,130
yeah that yeah that's that's that's not

1412
01:15:44,260 --> 01:15:51,039
a problem so I guess I will I will

1413
01:15:48,130 --> 01:15:53,380
endeavor at least at the outset here

1414
01:15:51,038 --> 01:15:55,868
because I don't have a better idea I

1415
01:15:53,380 --> 01:15:57,788
will endeavor to just make it so that

1416
01:15:55,868 --> 01:16:00,609
there really isn't a big difference

1417
01:15:57,788 --> 01:16:04,288
between downward connections and upward

1418
01:16:00,609 --> 01:16:04,288
connections I guess

1419
01:16:05,319 --> 01:16:09,939
so what I might go ahead and do is just

1420
01:16:07,448 --> 01:16:11,439
say well you know if you want to create

1421
01:16:09,939 --> 01:16:12,908
a downward connection it'll try to do

1422
01:16:11,439 --> 01:16:15,638
the exact same thing it does for upward

1423
01:16:12,908 --> 01:16:17,679
connections in that you know it'll try

1424
01:16:15,639 --> 01:16:20,170
to place the rooms and if it can't place

1425
01:16:17,679 --> 01:16:24,429
the rooms it'll try to push them in a

1426
01:16:20,170 --> 01:16:29,368
particular direction I you know sliding

1427
01:16:24,429 --> 01:16:32,050
along the room or whatever I could

1428
01:16:29,368 --> 01:16:37,509
alternatively have two different

1429
01:16:32,050 --> 01:16:39,699
routines that are like where one is

1430
01:16:37,510 --> 01:16:41,679
special case first doing stacking just

1431
01:16:39,698 --> 01:16:45,339
because Z is different you know it's

1432
01:16:41,679 --> 01:16:47,618
it's different than the rules we think

1433
01:16:45,340 --> 01:16:50,078
of I just kind of feel like they're

1434
01:16:47,618 --> 01:16:53,259
different for downward connections and

1435
01:16:50,078 --> 01:16:54,969
upward connections than they are for you

1436
01:16:53,260 --> 01:16:59,019
know your your run-of-the-mill wall

1437
01:16:54,969 --> 01:17:00,429
based doors I mean certainly in the real

1438
01:16:59,019 --> 01:17:01,239
world they're just completely different

1439
01:17:00,429 --> 01:17:03,489
right

1440
01:17:01,238 --> 01:17:05,638
north-south east-west directional things

1441
01:17:03,488 --> 01:17:08,379
are doors they're you know they're

1442
01:17:05,639 --> 01:17:09,819
anywhere in the wall you open it up you

1443
01:17:08,380 --> 01:17:13,150
walk through it whatever that's very

1444
01:17:09,819 --> 01:17:15,429
normal I up down connections are very

1445
01:17:13,149 --> 01:17:19,738
special they usually require a stairwell

1446
01:17:15,429 --> 01:17:22,690
or a ladder they typically are you know

1447
01:17:19,738 --> 01:17:24,578
placed anywhere in the 2d plane so they

1448
01:17:22,689 --> 01:17:28,509
don't they don't have they don't

1449
01:17:24,578 --> 01:17:31,479
constrain to two edges at once you know

1450
01:17:28,510 --> 01:17:34,090
a door can't be anywhere on a wall a

1451
01:17:31,479 --> 01:17:39,009
door is always connected to the floor

1452
01:17:34,090 --> 01:17:41,980
right but opening to above you or below

1453
01:17:39,010 --> 01:17:45,579
you can occur anywhere in the plane so I

1454
01:17:41,979 --> 01:17:47,439
feel like fundamentally the the logic of

1455
01:17:45,578 --> 01:17:48,788
it is a bit different the the degrees of

1456
01:17:47,439 --> 01:17:51,279
there's two degrees of freedom and

1457
01:17:48,788 --> 01:17:53,319
placement of an up-down connection and

1458
01:17:51,279 --> 01:17:55,689
there's only one degree of freedom in

1459
01:17:53,319 --> 01:17:59,799
the placement

1460
01:17:55,689 --> 01:18:10,329
of a north-south east-west connection so

1461
01:17:59,800 --> 01:18:14,230
that's that's kind of suggesting to me

1462
01:18:10,329 --> 01:18:21,430
you know that that's that it's a

1463
01:18:14,229 --> 01:18:25,109
different thing so you know I may do

1464
01:18:21,430 --> 01:18:25,110
something like where we just say

1465
01:18:46,599 --> 01:18:49,900
something like this

1466
01:19:30,079 --> 01:19:33,079
yeah

1467
01:19:51,359 --> 01:19:59,069
so yeah just not really sure about this

1468
01:20:11,639 --> 01:20:21,599
I just I feel like I'm gonna need two

1469
01:20:19,498 --> 01:20:24,389
pieces of code for this I feel I mean

1470
01:20:21,599 --> 01:20:26,399
maybe I find when I get a little further

1471
01:20:24,389 --> 01:20:29,849
into it if they can collapse down in

1472
01:20:26,399 --> 01:20:32,760
some kind of clever way that involves

1473
01:20:29,849 --> 01:20:36,989
something where you just set one of the

1474
01:20:32,760 --> 01:20:38,760
access ranges to one thing but I don't

1475
01:20:36,988 --> 01:20:40,768
know I'm not gonna go that route at

1476
01:20:38,760 --> 01:20:42,958
first if they turns out that they

1477
01:20:40,769 --> 01:20:45,630
collapsed later then that's fine

1478
01:20:42,958 --> 01:20:47,279
but even looking at this code the door

1479
01:20:45,630 --> 01:20:49,139
code is gonna be a little bit different

1480
01:20:47,279 --> 01:20:52,559
it'll probably start out with an

1481
01:20:49,139 --> 01:20:57,949
intersection yes but then it'll probably

1482
01:20:52,559 --> 01:21:02,809
do it'll probably do something where it

1483
01:20:57,948 --> 01:21:02,808
collapses both axes down to an aperture

1484
01:21:07,158 --> 01:21:13,259
so I'm pretty sure that this just is

1485
01:21:10,498 --> 01:21:16,578
gonna be it's gonna be special sauce

1486
01:21:13,260 --> 01:21:16,579
right like

1487
01:21:23,569 --> 01:21:28,168
yeah so what I'm gonna do now is gonna

1488
01:21:26,760 --> 01:21:31,320
say like look if it's an is up/down

1489
01:21:28,168 --> 01:21:33,628
connection I'm not even gonna look for

1490
01:21:31,319 --> 01:21:36,179
stuff we're just gonna do one test and

1491
01:21:33,628 --> 01:21:40,849
it's just like that's it right that's

1492
01:21:36,179 --> 01:21:45,328
all we're gonna do so we're gonna say

1493
01:21:40,849 --> 01:21:50,309
that we create a test volume here the

1494
01:21:45,328 --> 01:21:52,679
test volume is I guess actually you know

1495
01:21:50,309 --> 01:21:55,708
what no I could just search the whole 2d

1496
01:21:52,679 --> 01:22:01,800
region so we'll search and we'll do like

1497
01:21:55,708 --> 01:22:04,349
a yeah well do like a we'll do like a

1498
01:22:01,800 --> 01:22:07,489
stampings based search I guess we'll

1499
01:22:04,349 --> 01:22:07,489
just we'll just do it

1500
01:22:14,670 --> 01:22:19,210
and now that I said after I said all of

1501
01:22:17,439 --> 01:22:22,239
that I'm starting to see like oh yeah

1502
01:22:19,210 --> 01:22:23,920
hey this probably for me this probably

1503
01:22:22,239 --> 01:22:25,750
will end up being something that you can

1504
01:22:23,920 --> 01:22:28,140
generalize by just squashing one of the

1505
01:22:25,750 --> 01:22:34,750
axes to zero

1506
01:22:28,140 --> 01:22:36,520
oops anyway so if it's an is up-down

1507
01:22:34,750 --> 01:22:46,229
connection then I'm going to search

1508
01:22:36,520 --> 01:22:46,230
along two sets of axes

1509
01:22:56,279 --> 01:23:01,309
I don't know what I want to call these

1510
01:23:06,500 --> 01:23:11,609
they're like relative X&amp;Y

1511
01:23:09,470 --> 01:23:15,090
so I sort of want to do a thing that's

1512
01:23:11,609 --> 01:23:24,509
like well real X is less than max real X

1513
01:23:15,090 --> 01:23:28,440
or something like that so in here you

1514
01:23:24,510 --> 01:23:31,190
know I do my search I got to produce my

1515
01:23:28,439 --> 01:23:31,189
test volume

1516
01:23:56,119 --> 01:24:04,469
yeah and I guess you know just looking

1517
01:24:02,100 --> 01:24:06,510
at it it looks like if you just wrote

1518
01:24:04,469 --> 01:24:09,119
one of these you could then just smush

1519
01:24:06,510 --> 01:24:11,100
one axis down to zero the outer axis and

1520
01:24:09,119 --> 01:24:13,500
then it would be the same so I guess I

1521
01:24:11,100 --> 01:24:16,260
take it back we probably can just make

1522
01:24:13,500 --> 01:24:18,238
one of these and it just forces on the

1523
01:24:16,260 --> 01:24:20,670
other AXI like on the north south east

1524
01:24:18,238 --> 01:24:22,738
west it just forces the search so that

1525
01:24:20,670 --> 01:24:26,909
there's only one of the other axis that

1526
01:24:22,738 --> 01:24:28,769
gets searched and I guess that just

1527
01:24:26,909 --> 01:24:30,119
works so I should probably take back

1528
01:24:28,770 --> 01:24:31,350
everything I said about wanting two of

1529
01:24:30,119 --> 01:24:37,729
these maybe I don't really want two of

1530
01:24:31,350 --> 01:24:42,329
these we'll see so anyway moving along

1531
01:24:37,729 --> 01:24:46,409
so let's suppose I take a look at these

1532
01:24:42,329 --> 01:24:52,619
here if I do is up down then I'm gonna

1533
01:24:46,409 --> 01:24:58,698
search a long you know rel x-axis I got

1534
01:24:52,619 --> 01:25:01,500
to find the min/max there and oops and I

1535
01:24:58,698 --> 01:25:04,589
have got to have my rail y-axis as well

1536
01:25:01,500 --> 01:25:07,198
and those are not the X and y-axis there

1537
01:25:04,590 --> 01:25:09,449
some other axes whatever they are right

1538
01:25:07,198 --> 01:25:12,029
in the case of an actual up/down

1539
01:25:09,448 --> 01:25:13,649
connection they are the X and y-axis but

1540
01:25:12,029 --> 01:25:15,539
if we generalize this code out then they

1541
01:25:13,649 --> 01:25:17,729
will actually be potentially X and Z or

1542
01:25:15,539 --> 01:25:20,399
Y &amp; Z depending on which direction that

1543
01:25:17,729 --> 01:25:23,039
we're going right so we're gonna search

1544
01:25:20,399 --> 01:25:25,079
along one of those at a time and then

1545
01:25:23,039 --> 01:25:26,310
search along the other one as well so

1546
01:25:25,079 --> 01:25:29,640
then what we can do is say like well

1547
01:25:26,310 --> 01:25:30,960
okay when we go to search along this we

1548
01:25:29,640 --> 01:25:35,929
start at mineral-y

1549
01:25:30,960 --> 01:25:35,929
we go to max rel y and we stop there

1550
01:25:36,319 --> 01:25:44,389
again this is not really as inclusive as

1551
01:25:38,909 --> 01:25:44,389
we want to be because these ranges right

1552
01:25:50,130 --> 01:25:56,739
we probably actually want to start in

1553
01:25:53,198 --> 01:26:02,309
the middle and then move to whichever

1554
01:25:56,738 --> 01:26:02,309
side looks like it's gonna work and

1555
01:26:02,729 --> 01:26:07,678
we'll see how that goes a little bit

1556
01:26:05,349 --> 01:26:11,949
later for now we're not going to do that

1557
01:26:07,679 --> 01:26:15,730
so anyway we'll just deal with that a

1558
01:26:11,948 --> 01:26:20,379
little bit later but this is mostly what

1559
01:26:15,729 --> 01:26:25,238
we want here then when we take a look at

1560
01:26:20,380 --> 01:26:28,599
how this is being laid out here we want

1561
01:26:25,238 --> 01:26:32,348
to do two of these so when we actually

1562
01:26:28,599 --> 01:26:37,360
go to create our test volume we want to

1563
01:26:32,349 --> 01:26:40,690
be able to set the rel x-axis

1564
01:26:37,359 --> 01:26:43,389
to be equal to whatever our rail X is so

1565
01:26:40,689 --> 01:26:46,509
as we look along it and then the rail x

1566
01:26:43,389 --> 01:26:52,960
axis the max wants to be whatever that

1567
01:26:46,510 --> 01:27:00,699
thing was right plus whatever the spec

1568
01:26:52,960 --> 01:27:12,670
requires of us along that axis now one

1569
01:27:00,698 --> 01:27:17,348
weird thing here yes so anyway so we can

1570
01:27:12,670 --> 01:27:20,469
amortize this set so we might as well so

1571
01:27:17,349 --> 01:27:25,110
we set the Y at the outset right and

1572
01:27:20,469 --> 01:27:28,539
then we set the X every time through and

1573
01:27:25,109 --> 01:27:30,789
then we also need some way of setting

1574
01:27:28,539 --> 01:27:36,578
whatever the other axis is and you could

1575
01:27:30,789 --> 01:27:40,118
see how that was being set here this is

1576
01:27:36,578 --> 01:27:42,429
to abut the edges properly on the axis

1577
01:27:40,118 --> 01:27:45,309
that's actually being like the one

1578
01:27:42,429 --> 01:27:47,828
you're actually going along right so

1579
01:27:45,310 --> 01:27:51,280
this is the this is the actual movement

1580
01:27:47,828 --> 01:27:54,939
axis not the edge sort of the

1581
01:27:51,279 --> 01:27:58,618
perpendicular if you will so the

1582
01:27:54,939 --> 01:27:58,618
perpendicular gets set like this

1583
01:27:59,510 --> 01:28:07,489
I don't think it ever changes right so

1584
01:28:05,420 --> 01:28:13,429
I'm pretty sure you can just set that

1585
01:28:07,488 --> 01:28:18,558
here and never care about it again right

1586
01:28:13,429 --> 01:28:26,269
so we've got basically the r LZ axis

1587
01:28:18,559 --> 01:28:28,099
right and the rel z axis and we need

1588
01:28:26,269 --> 01:28:41,719
that sort of which one which direction

1589
01:28:28,099 --> 01:28:54,190
we're going but I'm pretty sure this

1590
01:28:41,719 --> 01:28:54,189
just sort of works right

1591
01:28:54,329 --> 01:28:59,399
so we set up the relative z-axis and say

1592
01:28:57,119 --> 01:29:01,890
look that one has to a butt and I

1593
01:28:59,399 --> 01:29:04,109
believe this never depends on anything

1594
01:29:01,890 --> 01:29:07,710
else so it can actually be lofted all

1595
01:29:04,109 --> 01:29:10,139
the way out to the initial portion of

1596
01:29:07,710 --> 01:29:13,020
the loop because we know like it's just

1597
01:29:10,140 --> 01:29:18,150
it's gotta be a buddy

1598
01:29:13,020 --> 01:29:26,730
that's just where it is right so that's

1599
01:29:18,149 --> 01:29:32,519
just known you know period and then

1600
01:29:26,729 --> 01:29:35,389
these have to be tested right so once we

1601
01:29:32,520 --> 01:29:41,370
do test these we know rel Y can get

1602
01:29:35,390 --> 01:29:44,250
added to here and what we want to do is

1603
01:29:41,369 --> 01:29:47,309
is sort of take this code again and

1604
01:29:44,250 --> 01:29:49,560
bring this code up in and I guess I will

1605
01:29:47,310 --> 01:29:52,650
just nerf this loop and just use one

1606
01:29:49,560 --> 01:29:56,670
loop I'll do exactly what I said

1607
01:29:52,649 --> 01:29:58,879
we couldn't do as always when you start

1608
01:29:56,670 --> 01:30:01,649
writing the code it becomes very clear

1609
01:29:58,880 --> 01:30:07,640
that actually this the shared parts just

1610
01:30:01,649 --> 01:30:07,639
jump out at you so you know off we go

1611
01:30:16,189 --> 01:30:27,019
uh yeah so I think this this will just

1612
01:30:24,229 --> 01:30:29,238
work and we're gonna have to verify that

1613
01:30:27,020 --> 01:30:31,310
it actually does and tune all these

1614
01:30:29,238 --> 01:30:34,459
constants properly but I think we can

1615
01:30:31,310 --> 01:30:36,500
get this down to something fine so what

1616
01:30:34,460 --> 01:30:40,010
we need to now do is say well okay when

1617
01:30:36,500 --> 01:30:42,859
we do the placement here the placement

1618
01:30:40,010 --> 01:30:46,280
that we're talking about is is the real

1619
01:30:42,859 --> 01:30:48,259
x-axis placement when the real x axis

1620
01:30:46,279 --> 01:30:50,420
placement doesn't work then we need to

1621
01:30:48,260 --> 01:31:02,860
move the real x by the Delta that we get

1622
01:30:50,420 --> 01:31:05,359
back if we can place it then we're done

1623
01:31:02,859 --> 01:31:08,539
so we want to break out of here we need

1624
01:31:05,359 --> 01:31:12,679
this to be a while loop based on the

1625
01:31:08,539 --> 01:31:15,710
placement function here as well so we

1626
01:31:12,680 --> 01:31:22,850
really want to say while the room hasn't

1627
01:31:15,710 --> 01:31:25,489
been placed and and the relative Y is

1628
01:31:22,850 --> 01:31:29,270
still something we want to test then do

1629
01:31:25,488 --> 01:31:31,159
the rest of the loop right so once we

1630
01:31:29,270 --> 01:31:32,810
get in here and we look and we say okay

1631
01:31:31,159 --> 01:31:34,899
let's try to place the stream we replace

1632
01:31:32,810 --> 01:31:37,969
what we do the intersection we find out

1633
01:31:34,899 --> 01:31:42,399
along this is going to be the edge

1634
01:31:37,969 --> 01:31:42,399
access that we're testing right here

1635
01:31:50,099 --> 01:32:03,750
so the edge access in this case is going

1636
01:31:52,679 --> 01:32:07,578
to be real X right so that's the thing

1637
01:32:03,750 --> 01:32:15,389
that we're probing along I and that rel

1638
01:32:07,578 --> 01:32:21,479
x-axis when we when we set the door to

1639
01:32:15,389 --> 01:32:24,328
have that if that was actually yeah I

1640
01:32:21,479 --> 01:32:28,319
mean that that we then need to do that

1641
01:32:24,328 --> 01:32:30,779
for both cases so the y-axis that we're

1642
01:32:28,319 --> 01:32:34,439
testing along also has to be shrunk down

1643
01:32:30,779 --> 01:32:38,009
to its middle for wherever the

1644
01:32:34,439 --> 01:32:44,189
connection was and then the min door and

1645
01:32:38,010 --> 01:32:47,000
Max door part of things that's just the

1646
01:32:44,189 --> 01:32:47,000
rel z-axis

1647
01:32:52,429 --> 01:32:55,328
I believe

1648
01:33:01,819 --> 01:33:15,059
so I think that is sufficient that's

1649
01:33:10,140 --> 01:33:18,619
what I think that may prove to be very

1650
01:33:15,060 --> 01:33:21,390
wrong that's just what I think

1651
01:33:18,619 --> 01:33:47,039
sooo coming in here we're gonna have

1652
01:33:21,390 --> 01:33:48,930
real x-axis I believe it's the real

1653
01:33:47,039 --> 01:33:50,609
z-axis that needs to know whether it's

1654
01:33:48,930 --> 01:33:55,090
mint or nuts

1655
01:33:50,609 --> 01:33:57,619
[Music]

1656
01:33:55,090 --> 01:34:00,860
the ZX is the direction of the

1657
01:33:57,619 --> 01:34:03,680
connection so I and that's the one needs

1658
01:34:00,859 --> 01:34:09,969
to know whether it's MIT or not so I

1659
01:34:03,680 --> 01:34:09,970
think that's fine so r LZ axis oops

1660
01:34:17,050 --> 01:34:26,119
this is like the abutments

1661
01:34:20,359 --> 01:34:28,819
so the real x-axis real y-axis here so

1662
01:34:26,119 --> 01:34:33,819
the x-axis is the edge axis that's going

1663
01:34:28,819 --> 01:34:39,529
to be this and so the y-axis is is Z and

1664
01:34:33,819 --> 01:34:44,389
doesn't actually matter in the testing

1665
01:34:39,529 --> 01:34:47,090
right so the when we go to do this and

1666
01:34:44,390 --> 01:34:51,770
we do the min/max here we should only

1667
01:34:47,090 --> 01:34:54,619
get we should get like no actual testing

1668
01:34:51,770 --> 01:34:56,270
there and we can override some of this a

1669
01:34:54,619 --> 01:35:00,559
little bit like like what we could do

1670
01:34:56,270 --> 01:35:02,990
for example is make sure our min R L min

1671
01:35:00,560 --> 01:35:05,500
and Max r ly are set like up here so

1672
01:35:02,989 --> 01:35:09,079
that when rooms end up stacked higher

1673
01:35:05,500 --> 01:35:11,060
they won't put doors where you couldn't

1674
01:35:09,079 --> 01:35:12,649
get to them we'll have to look at that a

1675
01:35:11,060 --> 01:35:16,550
little bit later for right now this will

1676
01:35:12,649 --> 01:35:19,969
be fine so in this case it's the same

1677
01:35:16,550 --> 01:35:28,100
thing but but the directionality is

1678
01:35:19,970 --> 01:35:31,220
different right so that's all fine in

1679
01:35:28,100 --> 01:35:34,910
this case we now flip the two so it's

1680
01:35:31,220 --> 01:35:38,360
actually like that the y axis is now the

1681
01:35:34,909 --> 01:35:40,099
direction of the connection but

1682
01:35:38,359 --> 01:35:42,889
otherwise everything's fine and then

1683
01:35:40,100 --> 01:35:47,180
similarly here same exact thing that

1684
01:35:42,890 --> 01:35:49,970
this becomes a false so now what we can

1685
01:35:47,180 --> 01:35:52,130
do is actually just treat our

1686
01:35:49,970 --> 01:35:55,010
up-and-downs exactly the way that we

1687
01:35:52,130 --> 01:35:58,480
were treating everything else and we can

1688
01:35:55,010 --> 01:36:01,039
just actually use literally this exact

1689
01:35:58,479 --> 01:36:02,389
layout of axes that actually exist in

1690
01:36:01,039 --> 01:36:03,920
the world and then it will just work

1691
01:36:02,390 --> 01:36:05,750
right it'll search along the X and y

1692
01:36:03,920 --> 01:36:11,210
axes and can

1693
01:36:05,750 --> 01:36:13,430
on the z-axis now if we're going up this

1694
01:36:11,210 --> 01:36:17,480
is actually backwards so I feel like

1695
01:36:13,430 --> 01:36:21,110
these should have been set like that and

1696
01:36:17,479 --> 01:36:23,750
that's kind of a mess up so if I come in

1697
01:36:21,109 --> 01:36:26,599
here and look you see how we've got like

1698
01:36:23,750 --> 01:36:28,460
down and up our set this way I don't

1699
01:36:26,600 --> 01:36:30,560
know why they ended up being the other

1700
01:36:28,460 --> 01:36:32,689
way here because down is the min version

1701
01:36:30,560 --> 01:36:35,440
and should have been that way so

1702
01:36:32,689 --> 01:36:37,879
thankfully we did it right in in here

1703
01:36:35,439 --> 01:36:41,239
but we did it wrong over here so now

1704
01:36:37,880 --> 01:36:43,789
we've got that fixed and that's good so

1705
01:36:41,239 --> 01:36:45,170
I think that's the sketch of the routine

1706
01:36:43,789 --> 01:36:47,989
I think we've probably got a lot of

1707
01:36:45,170 --> 01:36:56,270
typos in there so we're gonna have to

1708
01:36:47,989 --> 01:37:00,109
fix that but once we do then I think

1709
01:36:56,270 --> 01:37:08,150
we're good to go I think I'm a little

1710
01:37:00,109 --> 01:37:14,479
surprised at that know why that was real

1711
01:37:08,149 --> 01:37:15,979
x-axis this is just this just adds why

1712
01:37:14,479 --> 01:37:19,549
did we have I don't know why we had that

1713
01:37:15,979 --> 01:37:25,929
I mean isn't this just this why did we

1714
01:37:19,550 --> 01:37:25,930
not do it that way before I'm not sure

1715
01:37:27,198 --> 01:37:30,198
anyway

1716
01:37:36,429 --> 01:37:43,840
so I think that should do it now I'm

1717
01:37:39,670 --> 01:37:46,380
gonna go ahead and switch back to the

1718
01:37:43,840 --> 01:37:50,289
floor account version we had before

1719
01:37:46,380 --> 01:37:53,590
where I did create dungeon with only one

1720
01:37:50,289 --> 01:37:55,869
I'm gonna go ahead and get rid of the

1721
01:37:53,590 --> 01:37:57,069
floor account again because I don't want

1722
01:37:55,869 --> 01:37:58,599
to deal with those up and downs yet

1723
01:37:57,069 --> 01:38:00,908
before I actually determine whether that

1724
01:37:58,600 --> 01:38:03,789
coat is working at all so I wanted a

1725
01:38:00,908 --> 01:38:10,269
debug I'm gonna first try to debug the

1726
01:38:03,789 --> 01:38:12,399
version of this where the I wanted to

1727
01:38:10,270 --> 01:38:18,520
bug the version of this hopefully where

1728
01:38:12,399 --> 01:38:21,309
the we actually need some rooms

1729
01:38:18,520 --> 01:38:24,010
obviously where the connections are

1730
01:38:21,310 --> 01:38:28,030
still planar and get that code working

1731
01:38:24,010 --> 01:38:32,079
first and then go ahead and do the other

1732
01:38:28,029 --> 01:38:33,908
version so I want to that like like I

1733
01:38:32,079 --> 01:38:35,679
want to make sure that that part is

1734
01:38:33,908 --> 01:38:38,439
properly working and you know what I

1735
01:38:35,679 --> 01:38:39,908
instead of doing this I might use the

1736
01:38:38,439 --> 01:38:41,500
orphanage since I know that those

1737
01:38:39,908 --> 01:38:43,658
connections are hard-coded and I know

1738
01:38:41,500 --> 01:38:46,060
which direction they should go that'll

1739
01:38:43,658 --> 01:38:48,129
help me as I step through it to make

1740
01:38:46,060 --> 01:38:51,989
sure that those are doing what I wanted

1741
01:38:48,130 --> 01:38:51,989
them to do and not screwing around again

1742
01:38:53,399 --> 01:39:05,019
so here's the orphanage version and

1743
01:38:59,550 --> 01:39:14,219
let's go ahead and step into the debug

1744
01:39:05,020 --> 01:39:20,610
version of this code so I could test it

1745
01:39:14,219 --> 01:39:25,060
so I want to look at the first time it's

1746
01:39:20,609 --> 01:39:26,380
we place a room so coming through here I

1747
01:39:25,060 --> 01:39:29,350
want to see what we get this is a

1748
01:39:26,380 --> 01:39:33,609
northward connection so it says the

1749
01:39:29,350 --> 01:39:37,329
x-axis is 0 the y axis is Z so we're

1750
01:39:33,609 --> 01:39:39,519
searching a long x that's correct for a

1751
01:39:37,329 --> 01:39:40,988
northward connection and the z axis

1752
01:39:39,520 --> 01:39:44,140
which is the direction of the of the

1753
01:39:40,988 --> 01:39:46,959
connection is going to be the y axis

1754
01:39:44,140 --> 01:39:48,489
that's correct and it's on the Mac side

1755
01:39:46,960 --> 01:39:50,199
which is correct for north because North

1756
01:39:48,488 --> 01:39:51,639
is going up so it's it's

1757
01:39:50,199 --> 01:39:55,929
it's connected to the max of the

1758
01:39:51,640 --> 01:39:58,240
connecting room so we start

1759
01:39:55,930 --> 01:40:01,570
is it the min no it's not so we start by

1760
01:39:58,239 --> 01:40:06,239
setting up the base rooms information

1761
01:40:01,569 --> 01:40:06,239
here so we're gonna take our test volume

1762
01:40:06,329 --> 01:40:13,949
just go ahead and rid of this here we're

1763
01:40:10,630 --> 01:40:15,850
gonna look at the base rooms volume

1764
01:40:13,949 --> 01:40:18,760
there it is

1765
01:40:15,850 --> 01:40:22,480
and we're going to look at the test

1766
01:40:18,760 --> 01:40:24,039
volume so here we can kind of see when

1767
01:40:22,479 --> 01:40:26,289
we create these volumes what we're

1768
01:40:24,039 --> 01:40:29,050
actually looking at so we're starting

1769
01:40:26,289 --> 01:40:31,659
with the base room it goes from zero to

1770
01:40:29,050 --> 01:40:36,789
four or five right that's just how that

1771
01:40:31,659 --> 01:40:38,619
works and it's already placed so now we

1772
01:40:36,789 --> 01:40:41,500
need to do is figure out okay what

1773
01:40:38,619 --> 01:40:44,260
should the how should the z-axis be set

1774
01:40:41,500 --> 01:40:47,409
now it has to a but so what we should

1775
01:40:44,260 --> 01:40:48,909
see is we should see this create a for

1776
01:40:47,409 --> 01:40:52,000
the z-axis which is the edge axis which

1777
01:40:48,909 --> 01:40:55,180
is the y-axis we should see the Y be set

1778
01:40:52,000 --> 01:40:57,130
to an abutting connection right and so

1779
01:40:55,180 --> 01:40:58,539
what we should see is if the max Y here

1780
01:40:57,130 --> 01:41:02,020
is five right we should see six and we

1781
01:40:58,539 --> 01:41:05,140
do and off so so that worked that was

1782
01:41:02,020 --> 01:41:07,660
correct so now we're gonna go ahead and

1783
01:41:05,140 --> 01:41:09,789
figure out what the other testing areas

1784
01:41:07,659 --> 01:41:11,680
are here oh and I can already see a

1785
01:41:09,789 --> 01:41:14,350
problem that we're gonna have this is

1786
01:41:11,680 --> 01:41:16,810
probably bug number one so you can see

1787
01:41:14,350 --> 01:41:21,070
our X goes from zero to four

1788
01:41:16,810 --> 01:41:23,350
this is our problem this min rel here is

1789
01:41:21,069 --> 01:41:25,750
gonna have to go it's gonna have to be a

1790
01:41:23,350 --> 01:41:29,500
less than or equal to test because it

1791
01:41:25,750 --> 01:41:32,409
may actually be the z-axis where there's

1792
01:41:29,500 --> 01:41:33,970
only one high the other one we

1793
01:41:32,409 --> 01:41:35,739
intentionally left it out because we're

1794
01:41:33,970 --> 01:41:37,659
sliding it across and we knew we

1795
01:41:35,739 --> 01:41:40,329
couldn't slide it that far with its low

1796
01:41:37,659 --> 01:41:42,789
overlapping this is kind of a it gets at

1797
01:41:40,329 --> 01:41:44,500
the thing where I this this is the part

1798
01:41:42,789 --> 01:41:46,300
right here that I'm actually talking

1799
01:41:44,500 --> 01:41:48,010
about very specifically I'm gonna go

1800
01:41:46,300 --> 01:41:50,050
ahead and do this for now that's not

1801
01:41:48,010 --> 01:41:53,590
really correct there's more we want to

1802
01:41:50,050 --> 01:41:58,570
do there to obey that to do so let's try

1803
01:41:53,590 --> 01:42:00,760
that one more time so now we come

1804
01:41:58,569 --> 01:42:02,920
through here and you can see are these

1805
01:42:00,760 --> 01:42:03,789
values are set correctly however so

1806
01:42:02,920 --> 01:42:05,380
that's good and

1807
01:42:03,789 --> 01:42:06,939
now we should enter the loop before we

1808
01:42:05,380 --> 01:42:09,819
would have skipped out of the loop and

1809
01:42:06,939 --> 01:42:13,269
so that was bug number one so now we set

1810
01:42:09,819 --> 01:42:15,369
the test volume up as a the first place

1811
01:42:13,270 --> 01:42:17,200
to test and you can see here what we're

1812
01:42:15,369 --> 01:42:19,599
testing that we're setting that z-axis

1813
01:42:17,199 --> 01:42:21,519
we should set this next exact same thing

1814
01:42:19,600 --> 01:42:23,500
this is set to and we do and that's

1815
01:42:21,520 --> 01:42:24,550
great right that's what we want now

1816
01:42:23,500 --> 01:42:28,060
we're going to proceed to test the

1817
01:42:24,550 --> 01:42:31,720
x-axis so we set up an x-axis test that

1818
01:42:28,060 --> 01:42:34,450
x-axis is 0 to 12 right we see if we can

1819
01:42:31,720 --> 01:42:35,949
place it there and we can right then we

1820
01:42:34,449 --> 01:42:37,689
put the door in place I'm gonna ignore

1821
01:42:35,949 --> 01:42:39,639
doors for now that's another part of

1822
01:42:37,689 --> 01:42:41,379
this routine we break out because we've

1823
01:42:39,640 --> 01:42:45,280
set the generation index now so we're

1824
01:42:41,380 --> 01:42:48,100
good and off we go so let's take a look

1825
01:42:45,279 --> 01:42:50,829
at whether that place of these rooms

1826
01:42:48,100 --> 01:42:52,450
properly I think it probably did I'll

1827
01:42:50,829 --> 01:42:54,340
switch back to an optimized build for

1828
01:42:52,449 --> 01:42:56,619
now because at some point we should just

1829
01:42:54,340 --> 01:42:57,880
have the lighting turn off in debug mode

1830
01:42:56,619 --> 01:42:58,989
because then we could just run debug

1831
01:42:57,880 --> 01:43:02,920
mode all we want the lighting is our

1832
01:42:58,989 --> 01:43:04,779
only slow code right now so that place

1833
01:43:02,920 --> 01:43:08,079
to your fridge just fine so now I'm

1834
01:43:04,779 --> 01:43:10,029
gonna kick over to the dungeon again and

1835
01:43:08,079 --> 01:43:12,130
see if we can get that Z code working

1836
01:43:10,029 --> 01:43:13,359
we're almost out of time but hey that's

1837
01:43:12,130 --> 01:43:15,909
the only other thing that I wanted to do

1838
01:43:13,359 --> 01:43:18,219
anyway in this set of code that I was

1839
01:43:15,909 --> 01:43:22,510
working on right now so if I go ahead

1840
01:43:18,220 --> 01:43:26,400
and do the create dungeon call and set

1841
01:43:22,510 --> 01:43:26,400
those as the starting rooms then we can

1842
01:43:28,439 --> 01:43:32,079
see what happens all right so we're

1843
01:43:30,520 --> 01:43:34,600
still getting we're getting a placement

1844
01:43:32,079 --> 01:43:36,609
problem here we don't really know what

1845
01:43:34,600 --> 01:43:39,280
that placement problem is so I'm gonna

1846
01:43:36,609 --> 01:43:40,960
start by creating it the easiest thing

1847
01:43:39,279 --> 01:43:43,929
from YouTube ugh I messed up the floor

1848
01:43:40,960 --> 01:43:49,090
count equal to 1 see whether we get any

1849
01:43:43,930 --> 01:43:51,659
problems on floor 0 we do not so it's

1850
01:43:49,090 --> 01:43:54,190
still able to create this simple ring

1851
01:43:51,659 --> 01:43:59,800
correctly I'm then going to set it up to

1852
01:43:54,189 --> 01:44:00,759
floor 2 and see if we is it the the

1853
01:43:59,800 --> 01:44:03,520
downward connection that caused a

1854
01:44:00,760 --> 01:44:06,039
problem so it's not and you can see now

1855
01:44:03,520 --> 01:44:09,460
we've created a two floor dungeon so I

1856
01:44:06,039 --> 01:44:11,500
suspect what we're getting now is just

1857
01:44:09,460 --> 01:44:13,810
at some point we create a dungeon that

1858
01:44:11,500 --> 01:44:15,640
loops back on itself and cannot be

1859
01:44:13,810 --> 01:44:16,390
placed so it looks like our up/down

1860
01:44:15,640 --> 01:44:21,300
connection

1861
01:44:16,390 --> 01:44:32,260
just work just fine right and so that's

1862
01:44:21,300 --> 01:44:33,970
yeah yeah so that's actually probably

1863
01:44:32,260 --> 01:44:36,310
okay because that's just something we

1864
01:44:33,970 --> 01:44:38,260
have to do later anyway so at some point

1865
01:44:36,310 --> 01:44:40,930
we get to a dungeon floor that can't be

1866
01:44:38,260 --> 01:44:43,270
laid out using the direct stream with no

1867
01:44:40,930 --> 01:44:45,520
rip up it just picks a bad set of things

1868
01:44:43,270 --> 01:44:47,710
but you can see our dungeon continued to

1869
01:44:45,520 --> 01:44:50,080
grow here so at some point we get to a

1870
01:44:47,710 --> 01:44:52,090
floor count that's high enough that one

1871
01:44:50,079 --> 01:44:54,460
of the way the snake generates itself

1872
01:44:52,090 --> 01:44:56,710
can't get itself out of a jam here you

1873
01:44:54,460 --> 01:44:58,079
go right so maybe it's floor for that

1874
01:44:56,710 --> 01:45:02,470
does it

1875
01:44:58,079 --> 01:45:03,970
who knows yeah so it's floor for that

1876
01:45:02,470 --> 01:45:06,610
does it stop before getting to floor

1877
01:45:03,970 --> 01:45:09,240
floor floor is zero through three are

1878
01:45:06,609 --> 01:45:13,139
all just fine and off we go

1879
01:45:09,239 --> 01:45:17,380
so when we are in our debug camera mode

1880
01:45:13,140 --> 01:45:20,200
here I would like to do something in

1881
01:45:17,380 --> 01:45:21,489
terms of for our clip plane like I say

1882
01:45:20,199 --> 01:45:24,220
before I want to be able to have a way

1883
01:45:21,489 --> 01:45:31,000
to see this stuff a little bit better so

1884
01:45:24,220 --> 01:45:32,800
we fly take a look in the in the code

1885
01:45:31,000 --> 01:45:35,140
for the far clip plane but you can see

1886
01:45:32,800 --> 01:45:36,820
here that we set it depending on debug

1887
01:45:35,140 --> 01:45:40,510
camera what I want to do here is change

1888
01:45:36,819 --> 01:45:43,389
this so I want to I want this to be

1889
01:45:40,510 --> 01:45:44,890
specific as well so I want us at the far

1890
01:45:43,390 --> 01:45:47,079
clip plane to something when we're using

1891
01:45:44,890 --> 01:45:50,110
debug camera it's gonna be something

1892
01:45:47,079 --> 01:45:51,760
other than what it was before so what I

1893
01:45:50,109 --> 01:45:54,039
want to do is I want to set this to

1894
01:45:51,760 --> 01:45:56,829
something that's proportional to the

1895
01:45:54,039 --> 01:45:59,399
target distance so basically as you zoom

1896
01:45:56,829 --> 01:46:02,890
out you get more fart clip plane right

1897
01:45:59,399 --> 01:46:07,239
so I want to take like when we when we

1898
01:46:02,890 --> 01:46:09,730
have that when we dolly right which is

1899
01:46:07,239 --> 01:46:12,399
this bit right here I want to be able to

1900
01:46:09,729 --> 01:46:15,939
take that dolly distance and I want to

1901
01:46:12,399 --> 01:46:17,799
put that into the mix right so I don't

1902
01:46:15,939 --> 01:46:19,839
know what it should be but like as we

1903
01:46:17,800 --> 01:46:22,750
dolly out more we will be able to see

1904
01:46:19,840 --> 01:46:25,300
more or something like that so I'm just

1905
01:46:22,750 --> 01:46:27,189
gonna set this for our clip plane up to

1906
01:46:25,300 --> 01:46:29,840
sort of allow us to zoom out better

1907
01:46:27,189 --> 01:46:32,269
so as we zoom out

1908
01:46:29,840 --> 01:46:34,279
we don't get any clipping basically

1909
01:46:32,270 --> 01:46:40,309
right so you can kind of see now we can

1910
01:46:34,279 --> 01:46:41,960
view the whole thing right and so that's

1911
01:46:40,309 --> 01:46:44,779
good so there's our dungeon being

1912
01:46:41,960 --> 01:46:47,658
created now and that's all well and good

1913
01:46:44,779 --> 01:46:49,670
I would like now to combine these two

1914
01:46:47,658 --> 01:46:51,348
things just so we can verify that the

1915
01:46:49,670 --> 01:46:52,969
world generator stuff is working at the

1916
01:46:51,349 --> 01:46:55,520
base level that I want to be working at

1917
01:46:52,969 --> 01:46:56,480
again without rip up and replace but

1918
01:46:55,520 --> 01:46:57,770
that's okay because that's a more

1919
01:46:56,479 --> 01:46:59,928
complicated thing that will be sort of

1920
01:46:57,770 --> 01:47:02,659
putting in a little bit later on but

1921
01:46:59,929 --> 01:47:04,340
then the way to do that here right if I

1922
01:47:02,658 --> 01:47:05,929
create the reference create the dungeon

1923
01:47:04,340 --> 01:47:08,300
I need the dungeon to be connected to

1924
01:47:05,929 --> 01:47:11,090
something I might as well make it the

1925
01:47:08,300 --> 01:47:12,469
forest path there because that's where

1926
01:47:11,090 --> 01:47:13,788
we exit the orphanage now eventually

1927
01:47:12,469 --> 01:47:17,029
I'll want to put the forest in between

1928
01:47:13,788 --> 01:47:18,259
those two things but at the moment since

1929
01:47:17,029 --> 01:47:20,658
we're pretty much out of time I'm just

1930
01:47:18,260 --> 01:47:22,460
gonna connect them up and leave it at

1931
01:47:20,658 --> 01:47:24,589
that so if we take a look at the forest

1932
01:47:22,460 --> 01:47:26,750
code here I'm sorry at the forest code

1933
01:47:24,590 --> 01:47:28,639
the orphanage on the dungeon code I have

1934
01:47:26,750 --> 01:47:34,099
the forest entrance I'm gonna go ahead

1935
01:47:28,639 --> 01:47:41,569
and take the forest entrance I'm gonna

1936
01:47:34,099 --> 01:47:48,710
connect these up so that if I'm going to

1937
01:47:41,569 --> 01:47:54,399
say if you go down word box index down

1938
01:47:48,710 --> 01:47:54,399
yeah so if we if you can't go downward

1939
01:47:56,948 --> 01:48:01,098
from the orphanage forest entrance you

1940
01:47:59,719 --> 01:48:02,090
will go directly into the dungeon now

1941
01:48:01,099 --> 01:48:04,639
normally you'd go through the forest

1942
01:48:02,090 --> 01:48:06,770
love it first but who cares right and so

1943
01:48:04,639 --> 01:48:09,859
this will create an orphanage and a

1944
01:48:06,770 --> 01:48:11,480
dungeon hopefully together right and

1945
01:48:09,859 --> 01:48:13,250
again we sort of have some problems

1946
01:48:11,479 --> 01:48:15,558
where like I said the dungeon connection

1947
01:48:13,250 --> 01:48:19,969
stuff doesn't quite work right but

1948
01:48:15,559 --> 01:48:21,170
hopefully that's all fine so I want to

1949
01:48:19,969 --> 01:48:22,880
be able to see out further than that

1950
01:48:21,170 --> 01:48:24,649
like I said so I'm gonna go in here and

1951
01:48:22,880 --> 01:48:26,719
change that far clip plane now that I

1952
01:48:24,649 --> 01:48:28,969
have some special code to change the far

1953
01:48:26,719 --> 01:48:32,809
clip plane out so what I'm gonna do here

1954
01:48:28,969 --> 01:48:35,328
is I'm maybe gonna say take that camera

1955
01:48:32,809 --> 01:48:37,429
dolly distance and just put it up a bit

1956
01:48:35,328 --> 01:48:38,868
I'm also gonna start out maybe with a

1957
01:48:37,429 --> 01:48:41,210
little bit of a further four clip

1958
01:48:38,868 --> 01:48:43,518
playing in debug mode and we'll just

1959
01:48:41,210 --> 01:48:45,889
call it a day

1960
01:48:43,519 --> 01:48:49,099
so now you can see the world as its

1961
01:48:45,889 --> 01:48:51,828
generated with that dungeon so if we

1962
01:48:49,099 --> 01:48:58,489
were to come out through here walk out

1963
01:48:51,828 --> 01:49:00,558
of the orphanage right like so now we

1964
01:48:58,488 --> 01:49:04,098
get into the forest and when we get to

1965
01:49:00,559 --> 01:49:05,748
the forest now you can see that we end

1966
01:49:04,099 --> 01:49:07,130
up with a room that stacked on top of

1967
01:49:05,748 --> 01:49:09,139
each other as it should be

1968
01:49:07,130 --> 01:49:11,118
here's the connection between those two

1969
01:49:09,139 --> 01:49:13,190
rooms so that's the connection down our

1970
01:49:11,118 --> 01:49:14,779
room generation code does not have any

1971
01:49:13,189 --> 01:49:16,158
stairway generating code in it so that's

1972
01:49:14,779 --> 01:49:18,078
why there's no stairway there but you

1973
01:49:16,158 --> 01:49:19,488
can see that it correctly picked up the

1974
01:49:18,078 --> 01:49:21,618
fact that that is where you would go

1975
01:49:19,488 --> 01:49:24,198
down and then you would get into the

1976
01:49:21,618 --> 01:49:26,089
dungeon which correctly stacks exactly

1977
01:49:24,198 --> 01:49:27,589
where it should and you can see you know

1978
01:49:26,090 --> 01:49:28,880
you would call through there you'd come

1979
01:49:27,590 --> 01:49:31,460
down here you'd go out through the

1980
01:49:28,880 --> 01:49:34,010
dungeon and everything's fine right so

1981
01:49:31,460 --> 01:49:36,139
the world is now sort of starts slowly

1982
01:49:34,010 --> 01:49:39,829
becoming an actual world with some stuff

1983
01:49:36,139 --> 01:49:42,828
in it and that's probably enough for now

1984
01:49:39,828 --> 01:49:46,130
right so I think now that gives us

1985
01:49:42,828 --> 01:49:48,139
enough I mainly lair the forest in there

1986
01:49:46,130 --> 01:49:52,690
at some point perhaps one thing that

1987
01:49:48,139 --> 01:49:52,690
would be nice I don't know what we I

1988
01:49:55,238 --> 01:50:08,589
don't really remember what we have in

1989
01:49:58,880 --> 01:50:08,590
our renderer for Strings

1990
01:50:10,488 --> 01:50:45,769
oh boy been a long time uh so here's our

1991
01:50:34,939 --> 01:50:49,699
string printing code so we don't really

1992
01:50:45,770 --> 01:50:56,600
have any way to print anything in a non

1993
01:50:49,699 --> 01:50:59,079
debug way but I would like to be able to

1994
01:50:56,600 --> 01:50:59,079
do that

1995
01:51:21,868 --> 01:51:27,368
I'm not gonna tackle this now but soon

1996
01:51:26,170 --> 01:51:29,618
when I think I would like to do as well

1997
01:51:27,368 --> 01:51:31,658
as have a way to attach our room name so

1998
01:51:29,618 --> 01:51:34,328
we look we can look at this thing we can

1999
01:51:31,658 --> 01:51:37,689
see what the generator thought it was

2000
01:51:34,328 --> 01:51:38,859
making right because right now it's been

2001
01:51:37,689 --> 01:51:41,888
pretty straightforward and everything

2002
01:51:38,859 --> 01:51:43,118
seems fine well in the future we're

2003
01:51:41,889 --> 01:51:45,699
probably gonna situation we're looking

2004
01:51:43,118 --> 01:51:47,439
for like what was that like why did that

2005
01:51:45,698 --> 01:51:48,308
get put there and what is it and it

2006
01:51:47,439 --> 01:51:50,319
would be nice to have a little thing

2007
01:51:48,309 --> 01:51:51,788
that says oh that was it was thinking

2008
01:51:50,319 --> 01:51:52,808
that the throne-room went there and

2009
01:51:51,788 --> 01:51:54,158
you're like why was it putting the

2010
01:51:52,809 --> 01:51:55,869
throne-room there so right like for

2011
01:51:54,158 --> 01:52:01,058
debugging purposes I feel like we're

2012
01:51:55,868 --> 01:52:03,009
gonna need that sort of a thing so yeah

2013
01:52:01,059 --> 01:52:11,170
I think that'll be something we'll want

2014
01:52:03,010 --> 01:52:13,030
to do a little bit later on for now I

2015
01:52:11,170 --> 01:52:14,769
think that's fine for today I'm gonna go

2016
01:52:13,029 --> 01:52:16,300
ahead and go to the QA and we'll pick up

2017
01:52:14,769 --> 01:52:18,159
next week when I think it's time to now

2018
01:52:16,300 --> 01:52:19,360
start picking up the lighting in the

2019
01:52:18,158 --> 01:52:21,009
camera code and start cleaning that

2020
01:52:19,359 --> 01:52:24,098
stuff up and then we probably want to

2021
01:52:21,010 --> 01:52:25,360
put in art because we're gonna need to

2022
01:52:24,099 --> 01:52:27,779
decorate these rooms so that they look

2023
01:52:25,359 --> 01:52:27,779
different

2024
01:53:14,720 --> 01:53:16,780
you

2025
01:53:18,140 --> 01:53:22,760
should you those air how do you decide

2026
01:53:21,229 --> 01:53:28,719
whether to include a library in your

2027
01:53:22,760 --> 01:53:32,000
project or not not that is the decision

2028
01:53:28,720 --> 01:53:38,740
tt BJM who builds a dungeon under an

2029
01:53:32,000 --> 01:53:38,739
orphanage Charles Dickens

2030
01:54:00,810 --> 01:54:04,670
what am i listening to nothing

2031
01:54:21,810 --> 01:54:27,930
what's the invalid default finger

2032
01:54:23,649 --> 01:54:31,779
shaming so I find that a lot of times

2033
01:54:27,930 --> 01:54:34,750
when I have a switch statement I want to

2034
01:54:31,779 --> 01:54:37,689
know I want it to handle certain cases

2035
01:54:34,750 --> 01:54:41,739
and I only want it to be called with

2036
01:54:37,689 --> 01:54:43,299
those cases so typically I put invalid

2037
01:54:41,739 --> 01:54:46,149
default case at the bottom which just

2038
01:54:43,300 --> 01:54:51,970
says anything else would be invalid so

2039
01:54:46,149 --> 01:54:53,529
that's just defined to this so these are

2040
01:54:51,970 --> 01:54:55,900
basically just two notes I put in my

2041
01:54:53,529 --> 01:54:57,519
code invalid code path means if we get

2042
01:54:55,899 --> 01:54:59,589
here something horrible has happened

2043
01:54:57,520 --> 01:55:01,080
like it should the values should never

2044
01:54:59,590 --> 01:55:04,210
be able to equal what they're equal

2045
01:55:01,079 --> 01:55:06,850
we're totally screwed right so that's an

2046
01:55:04,210 --> 01:55:08,590
assertion invalid default case is the

2047
01:55:06,850 --> 01:55:10,630
same thing but for switch statements it

2048
01:55:08,590 --> 01:55:13,480
just says look anything other than the

2049
01:55:10,630 --> 01:55:14,710
switches that are handled here or that

2050
01:55:13,479 --> 01:55:17,679
should say the cases that are handled

2051
01:55:14,710 --> 01:55:19,119
here is invalid so I put that at the

2052
01:55:17,680 --> 01:55:22,210
bottom of every switch statement that

2053
01:55:19,119 --> 01:55:24,309
doesn't have a default unless I unless I

2054
01:55:22,210 --> 01:55:26,350
intentionally don't want to handle the

2055
01:55:24,310 --> 01:55:28,240
cases right which maybe sometimes I want

2056
01:55:26,350 --> 01:55:30,039
to do are you wearing headphones because

2057
01:55:28,239 --> 01:55:33,039
you want to hear the visual studio error

2058
01:55:30,039 --> 01:55:34,119
sounds no I'm wearing them because we're

2059
01:55:33,039 --> 01:55:36,869
for two reasons one

2060
01:55:34,119 --> 01:55:39,849
it's the headset I use as my microphone

2061
01:55:36,869 --> 01:55:44,519
but the other reason is because when we

2062
01:55:39,850 --> 01:55:44,520
debug game sound I need to hear it right

2063
01:55:47,159 --> 01:55:50,889
mr. love pickle how do you keep up the

2064
01:55:49,539 --> 01:55:55,060
motivation to continue working on

2065
01:55:50,890 --> 01:55:58,000
handmade here oh well you know handmade

2066
01:55:55,060 --> 01:56:02,140
hero is is not a very time consuming

2067
01:55:58,000 --> 01:56:06,359
thing like I've spent seven or eight

2068
01:56:02,140 --> 01:56:10,750
hundred hours on it I think and that's

2069
01:56:06,359 --> 01:56:12,099
20 weeks of development now and 20 weeks

2070
01:56:10,750 --> 01:56:15,850
of development for a game engine

2071
01:56:12,100 --> 01:56:22,120
programmer is nothing I mean 20 weeks

2072
01:56:15,850 --> 01:56:25,000
it's not even a year right so I'm used

2073
01:56:22,119 --> 01:56:27,510
to projects to take three four five

2074
01:56:25,000 --> 01:56:30,279
years of development time to make

2075
01:56:27,510 --> 01:56:33,809
because engine code is very complicated

2076
01:56:30,279 --> 01:56:36,988
and there's a lot of it so

2077
01:56:33,809 --> 01:56:42,630
handmade hero is small potatoes right

2078
01:56:36,988 --> 01:56:45,198
it's it's hardly anything I mean that

2079
01:56:42,630 --> 01:56:47,340
yet seven eight hundred hours is is

2080
01:56:45,198 --> 01:56:49,439
child's play for an engine programmer

2081
01:56:47,340 --> 01:56:52,498
right it's it's just it's it's a blink

2082
01:56:49,439 --> 01:56:54,828
of an eye because normally you're

2083
01:56:52,498 --> 01:56:59,630
working 40 hours a week or something on

2084
01:56:54,828 --> 01:57:02,939
an engine for years potentially right I

2085
01:56:59,630 --> 01:57:04,618
like for when I worked at rad right I

2086
01:57:02,939 --> 01:57:07,888
was working on the character animation

2087
01:57:04,618 --> 01:57:11,728
system I mean I worked on that from 1999

2088
01:57:07,889 --> 01:57:17,389
to 2004 and that's just the animation

2089
01:57:11,729 --> 01:57:17,389
system all day every day right

2090
01:57:17,969 --> 01:57:27,149
and so handmade hero is I mean I I don't

2091
01:57:22,828 --> 01:57:28,768
love the fact that I'm have to think

2092
01:57:27,149 --> 01:57:31,288
about more than one project in my head

2093
01:57:28,769 --> 01:57:33,090
at a time you know I have to keep

2094
01:57:31,288 --> 01:57:34,889
handmade hero kinda in the back of my

2095
01:57:33,090 --> 01:57:38,819
head like how it works you know a little

2096
01:57:34,889 --> 01:57:40,139
bit and I prefer to only really

2097
01:57:38,819 --> 01:57:41,488
necessary be thinking about one thing at

2098
01:57:40,139 --> 01:57:44,489
a time usually so that's a little

2099
01:57:41,488 --> 01:57:46,259
annoying but the motivation is pretty

2100
01:57:44,488 --> 01:57:47,609
easy because again it's just it'd be

2101
01:57:46,260 --> 01:57:50,969
impossible to get burned out on

2102
01:57:47,609 --> 01:57:52,319
something that you've only spent 800

2103
01:57:50,969 --> 01:57:55,319
hours on if you're a game engine

2104
01:57:52,319 --> 01:57:58,170
programmer that's like right it's like

2105
01:57:55,319 --> 01:58:03,599
it's it's like you've took a nap and it

2106
01:57:58,170 --> 01:58:05,038
went by right long billions so I'm

2107
01:58:03,599 --> 01:58:06,719
guessing the layout system still will

2108
01:58:05,038 --> 01:58:08,849
not handle cyclical connections nicely

2109
01:58:06,719 --> 01:58:10,979
or do you think it could now no it

2110
01:58:08,849 --> 01:58:12,529
definitely doesn't write like cyclical

2111
01:58:10,979 --> 01:58:14,909
connections that would just we have not

2112
01:58:12,529 --> 01:58:17,368
cyclical connections require rip up and

2113
01:58:14,908 --> 01:58:17,879
replace for sure and we don't have that

2114
01:58:17,368 --> 01:58:20,399
yet

2115
01:58:17,880 --> 01:58:26,489
and also probably some more strategic

2116
01:58:20,399 --> 01:58:27,899
thinking pith no could you do a brief

2117
01:58:26,488 --> 01:58:29,578
overview of all the parts that are

2118
01:58:27,899 --> 01:58:32,848
involved in generating the world I lost

2119
01:58:29,578 --> 01:58:37,380
the thread sure it's pretty simple right

2120
01:58:32,849 --> 01:58:41,038
now actually at least by our standards

2121
01:58:37,380 --> 01:58:45,179
on handmade hero it's pretty simple so

2122
01:58:41,038 --> 01:58:47,099
what we do is we first do a pass where

2123
01:58:45,179 --> 01:58:51,420
we create a series of Jen

2124
01:58:47,100 --> 01:58:54,350
and Jen connections that specify how

2125
01:58:51,420 --> 01:58:57,569
those rooms are connected so each room

2126
01:58:54,350 --> 01:58:59,789
that we want in the final game will have

2127
01:58:57,569 --> 01:59:02,009
a gender in created for it and then each

2128
01:58:59,789 --> 01:59:04,890
time that two rooms connect to each

2129
01:59:02,010 --> 01:59:07,890
other with a door or up up down or

2130
01:59:04,890 --> 01:59:11,280
sideways we create a connection that has

2131
01:59:07,890 --> 01:59:13,789
the two rooms on either side and a mass

2132
01:59:11,279 --> 01:59:16,649
that says how they could be connected

2133
01:59:13,789 --> 01:59:20,579
sometimes that's specific like it has to

2134
01:59:16,649 --> 01:59:22,920
be in east-west connection right other

2135
01:59:20,579 --> 01:59:25,350
times it's nonspecific like well it can

2136
01:59:22,920 --> 01:59:27,119
be any connection or any planar

2137
01:59:25,350 --> 01:59:30,390
connection so it can't be up-down but it

2138
01:59:27,119 --> 01:59:34,170
could be anything else right so that's

2139
01:59:30,390 --> 01:59:37,770
the first pass and that pass looks like

2140
01:59:34,170 --> 01:59:39,210
this so in the world gencode you know

2141
01:59:37,770 --> 01:59:40,680
you've got some of creates an orphanage

2142
01:59:39,210 --> 01:59:42,720
it says here's all the rooms in the

2143
01:59:40,680 --> 01:59:45,329
orphanage here's all the ways they're

2144
01:59:42,720 --> 01:59:50,119
connected to each other right and here's

2145
01:59:45,329 --> 01:59:52,859
the size as I want them to be go right

2146
01:59:50,119 --> 01:59:54,390
so we have passes that do that they just

2147
01:59:52,859 --> 01:59:55,949
create those and you can see us calling

2148
01:59:54,390 --> 01:59:58,500
them both here this creates a 7 level

2149
01:59:55,949 --> 01:59:59,760
dungeon this creates an orphanage and

2150
01:59:58,500 --> 02:00:01,680
then we just connect the two together

2151
01:59:59,760 --> 02:00:04,590
and we're good to go we then have a

2152
02:00:01,680 --> 02:00:06,240
layout call the layout call is kind of

2153
02:00:04,590 --> 02:00:08,489
the code that's slowly starting to take

2154
02:00:06,239 --> 02:00:10,439
shape now it's very primitive but it's

2155
02:00:08,489 --> 02:00:12,899
getting a little bit better and what

2156
02:00:10,439 --> 02:00:13,979
that does at the moment we don't really

2157
02:00:12,899 --> 02:00:16,109
need this code anymore

2158
02:00:13,979 --> 02:00:20,609
we're not gonna go back to that specific

2159
02:00:16,109 --> 02:00:23,489
code at the moment what that code does

2160
02:00:20,609 --> 02:00:25,019
is it places the first room sort of

2161
02:00:23,489 --> 02:00:26,340
arbitrarily just puts it in the centre

2162
02:00:25,020 --> 02:00:26,850
because it's like who cares where it is

2163
02:00:26,340 --> 02:00:28,949
right

2164
02:00:26,850 --> 02:00:31,620
today's the first room and then it

2165
02:00:28,949 --> 02:00:34,679
crawls outward from that room trying to

2166
02:00:31,619 --> 02:00:36,750
place rooms connected to it by looking

2167
02:00:34,680 --> 02:00:38,579
at what directions those rooms could be

2168
02:00:36,750 --> 02:00:40,229
connected based on the direction mask

2169
02:00:38,579 --> 02:00:42,029
set in the connection like what's

2170
02:00:40,229 --> 02:00:44,099
allowed for this connection and just

2171
02:00:42,029 --> 02:00:46,139
trying to place the room if it can place

2172
02:00:44,100 --> 02:00:48,240
the room it places a room and then it

2173
02:00:46,140 --> 02:00:50,700
continues and it just spiders out from

2174
02:00:48,239 --> 02:00:52,409
there placing all the rooms so the

2175
02:00:50,699 --> 02:00:55,920
reason I say that it's still pretty

2176
02:00:52,409 --> 02:00:59,789
primitive is because it only will work

2177
02:00:55,920 --> 02:01:00,960
if that process happens to successfully

2178
02:00:59,789 --> 02:01:04,470
complete

2179
02:01:00,960 --> 02:01:06,329
in one pass so if it gets to a point

2180
02:01:04,470 --> 02:01:08,070
where it has paid itself into a corner

2181
02:01:06,329 --> 02:01:10,319
like I talked about before so it wrapped

2182
02:01:08,069 --> 02:01:12,779
around itself and now cannot place rooms

2183
02:01:10,319 --> 02:01:15,659
it is too dumb to do anything about it

2184
02:01:12,779 --> 02:01:19,920
you cannot go back to the start and try

2185
02:01:15,659 --> 02:01:22,769
again with a different attempt right and

2186
02:01:19,920 --> 02:01:24,659
it also while it is expanding never

2187
02:01:22,770 --> 02:01:27,450
looks at anything else that might help

2188
02:01:24,659 --> 02:01:29,159
it to expand properly so if it knows for

2189
02:01:27,449 --> 02:01:32,099
example that it needs to place two rooms

2190
02:01:29,159 --> 02:01:34,199
on this one thing it doesn't even do

2191
02:01:32,100 --> 02:01:36,750
anything to attempt to not enclose that

2192
02:01:34,199 --> 02:01:39,029
room by looping other rooms around there

2193
02:01:36,750 --> 02:01:43,260
anything like that right so it both

2194
02:01:39,029 --> 02:01:45,899
cannot restart and cannot try to do

2195
02:01:43,260 --> 02:01:49,320
something sensible so when we put enough

2196
02:01:45,899 --> 02:01:50,729
stuff in there it will fail right when

2197
02:01:49,319 --> 02:01:53,789
we give it something that doesn't just

2198
02:01:50,729 --> 02:01:55,799
happen to work so what we have to do is

2199
02:01:53,789 --> 02:01:58,680
we have to continue to make this code

2200
02:01:55,800 --> 02:02:00,090
more intelligent so that we can lay out

2201
02:01:58,680 --> 02:02:01,980
the kind of structures we want which

2202
02:02:00,090 --> 02:02:03,840
isn't too much more intelligent probably

2203
02:02:01,979 --> 02:02:05,009
because we don't have things there's

2204
02:02:03,840 --> 02:02:06,630
nothing in this game that's going to be

2205
02:02:05,010 --> 02:02:08,369
more complicated than sort of roughly

2206
02:02:06,630 --> 02:02:11,369
the dungeon and orphanage stuff we just

2207
02:02:08,369 --> 02:02:14,460
put in there but we do need it to get a

2208
02:02:11,369 --> 02:02:18,449
little smarter we probably want some

2209
02:02:14,460 --> 02:02:20,250
cycles in there and we also I think need

2210
02:02:18,449 --> 02:02:21,809
it to be able to handle the dungeon code

2211
02:02:20,250 --> 02:02:24,029
where it has to restart and try a

2212
02:02:21,810 --> 02:02:27,289
different path to lay things out right

2213
02:02:24,029 --> 02:02:27,289
so we need to get that stuff in there

2214
02:02:27,710 --> 02:02:32,189
are you working on other stuff parallel

2215
02:02:30,119 --> 02:02:35,670
to him here yeah I I programmed full

2216
02:02:32,189 --> 02:02:39,029
time like I actually make game

2217
02:02:35,670 --> 02:02:46,739
technology for a living so this is only

2218
02:02:39,029 --> 02:02:47,880
done in my spare time scallywag just

2219
02:02:46,739 --> 02:02:49,260
caught up and watched a stream for the

2220
02:02:47,880 --> 02:02:51,090
first time live today wanted to say

2221
02:02:49,260 --> 02:02:52,350
thanks for the amazing learning resource

2222
02:02:51,090 --> 02:02:54,119
you've made me a better programmer than

2223
02:02:52,350 --> 02:02:56,940
college or university ever could well

2224
02:02:54,119 --> 02:02:59,699
that's great thanks so much for saying

2225
02:02:56,939 --> 02:03:05,609
so I hope that you continue to find it

2226
02:02:59,699 --> 02:03:07,109
useful neat sir have you decided how

2227
02:03:05,609 --> 02:03:09,359
many levels the world will have in the

2228
02:03:07,109 --> 02:03:11,429
end well there's no such thing as levels

2229
02:03:09,359 --> 02:03:13,679
in this where it's all continuous so

2230
02:03:11,430 --> 02:03:16,170
it's just a giant forest with dungeons

2231
02:03:13,680 --> 02:03:18,170
right so we'll probably try to tune it

2232
02:03:16,170 --> 02:03:20,130
so that the biggest it would get is

2233
02:03:18,170 --> 02:03:21,119
something that can be finished in a few

2234
02:03:20,130 --> 02:03:28,560
hours

2235
02:03:21,119 --> 02:03:30,390
like who knows I don't know what we'll

2236
02:03:28,560 --> 02:03:31,650
do you know maybe we'll have two modes

2237
02:03:30,390 --> 02:03:33,329
you can pick from like maybe you can

2238
02:03:31,649 --> 02:03:37,409
pick one that says generate me a 40-hour

2239
02:03:33,329 --> 02:03:38,939
we're done 40-hour crawl and it will you

2240
02:03:37,409 --> 02:03:40,349
know I mean I don't know I'm a game

2241
02:03:38,939 --> 02:03:45,809
designer I don't care

2242
02:03:40,350 --> 02:03:47,789
really about that part of it so you know

2243
02:03:45,810 --> 02:03:49,440
since the engine will probably be able

2244
02:03:47,789 --> 02:03:53,519
to generate you a 40-hour thing maybe if

2245
02:03:49,439 --> 02:03:55,919
you want to you could do that but

2246
02:03:53,520 --> 02:03:58,260
regardless of any of that it will always

2247
02:03:55,920 --> 02:04:00,390
just be one continuous world so there

2248
02:03:58,260 --> 02:04:02,789
will not be like levels where there

2249
02:04:00,390 --> 02:04:06,270
where you like load a new one it's just

2250
02:04:02,789 --> 02:04:09,359
one big world you walk around in and you

2251
02:04:06,270 --> 02:04:11,040
know how big it is is what you input to

2252
02:04:09,359 --> 02:04:13,079
the generator so when you call the

2253
02:04:11,039 --> 02:04:15,239
generator you'll say here's how many

2254
02:04:13,079 --> 02:04:18,840
hours this dungeons supposed to be and

2255
02:04:15,239 --> 02:04:19,859
we'll probably pass like 0.5 hours for

2256
02:04:18,840 --> 02:04:21,810
the first one so it's supposed to be

2257
02:04:19,859 --> 02:04:24,420
like a 30 minute thing and then as you

2258
02:04:21,810 --> 02:04:25,890
unlock more we'll say like ok now it's 1

2259
02:04:24,420 --> 02:04:28,409
hour now it's an hour and a half now

2260
02:04:25,890 --> 02:04:30,119
it's 2 hours 3 hours and that maybe

2261
02:04:28,409 --> 02:04:31,500
would be as big as we typically do it

2262
02:04:30,119 --> 02:04:33,930
right when you unlock everything it's 3

2263
02:04:31,500 --> 02:04:36,119
hours but maybe we'll want to just have

2264
02:04:33,930 --> 02:04:37,260
a silly mode you if you get to the 3

2265
02:04:36,119 --> 02:04:39,930
hour mode where you can also say

2266
02:04:37,260 --> 02:04:41,550
generate me an N our dungeon and you can

2267
02:04:39,930 --> 02:04:42,900
just set it to whatever you want so it's

2268
02:04:41,550 --> 02:04:46,470
like if you want to say generate me a

2269
02:04:42,899 --> 02:04:49,170
200 hour like dungeon crawl it will why

2270
02:04:46,470 --> 02:04:52,230
you would want to I don't know but you

2271
02:04:49,170 --> 02:04:53,880
know we could do it this is a game

2272
02:04:52,229 --> 02:04:56,669
that's meant to teach people how to

2273
02:04:53,880 --> 02:05:00,630
program so it's not really about making

2274
02:04:56,670 --> 02:05:04,260
design decisions it's about programming

2275
02:05:00,630 --> 02:05:06,270
and if our code supports you asking for

2276
02:05:04,260 --> 02:05:08,400
a 200 done our dungeon and getting one

2277
02:05:06,270 --> 02:05:10,610
back then maybe we should just let that

2278
02:05:08,399 --> 02:05:10,609
happen

2279
02:05:36,969 --> 02:05:41,779
see voucher the current system doesn't

2280
02:05:39,439 --> 02:05:47,719
handle adding a rotated or mirrored

2281
02:05:41,779 --> 02:05:51,340
orphanage right well you know it doesn't

2282
02:05:47,719 --> 02:05:54,260
but it would be really simple to do so

2283
02:05:51,340 --> 02:05:57,310
so if we wanted to make a rotated or a

2284
02:05:54,260 --> 02:06:01,520
mirrored orphanage we certainly could uh

2285
02:05:57,310 --> 02:06:05,960
I don't really want to do that because I

2286
02:06:01,520 --> 02:06:08,840
don't want you to when you learn a type

2287
02:06:05,960 --> 02:06:11,539
of room I want you to be able to

2288
02:06:08,840 --> 02:06:18,078
recognize that room and I want it to be

2289
02:06:11,539 --> 02:06:22,760
the same orientation right so I don't

2290
02:06:18,078 --> 02:06:24,889
want you to come into rooms that you

2291
02:06:22,760 --> 02:06:27,190
would have expected this way and have

2292
02:06:24,889 --> 02:06:29,929
them be that way if that makes sense

2293
02:06:27,189 --> 02:06:31,819
because I want them to be recognizable

2294
02:06:29,929 --> 02:06:34,190
to the player like oh I'm going into the

2295
02:06:31,819 --> 02:06:37,578
fountain room now and oh now I'm in a

2296
02:06:34,189 --> 02:06:41,388
hall a mirror hallway or whatever so I

2297
02:06:37,578 --> 02:06:45,948
kind of want those to be understandable

2298
02:06:41,389 --> 02:06:49,099
as themselves so I don't want the system

2299
02:06:45,948 --> 02:06:50,750
to randomly - I don't want the system to

2300
02:06:49,099 --> 02:06:53,119
ever take something that I specified

2301
02:06:50,750 --> 02:06:54,819
this way and be like oh well I'll just

2302
02:06:53,118 --> 02:06:57,469
place it rotated over here or something

2303
02:06:54,819 --> 02:06:59,689
that's not something I want to have

2304
02:06:57,469 --> 02:07:01,368
happen but if you wanted to do it it

2305
02:06:59,689 --> 02:07:04,009
wouldn't be very hard right all you'd

2306
02:07:01,368 --> 02:07:06,380
have to do is specify the rotation you

2307
02:07:04,010 --> 02:07:08,179
wanted and then you would rotate the

2308
02:07:06,380 --> 02:07:10,760
derp mask which would just be like a

2309
02:07:08,179 --> 02:07:11,989
barrel shift of the bits pretty much

2310
02:07:10,760 --> 02:07:15,650
well it's not quite that but it's

2311
02:07:11,988 --> 02:07:22,448
similar and then you would swap the the

2312
02:07:15,649 --> 02:07:22,448
dimension X&amp;Y right that's it

2313
02:07:27,248 --> 02:07:33,438
at the moment that Jen rooms are all

2314
02:07:29,599 --> 02:07:36,498
created by hand no they're not so for

2315
02:07:33,439 --> 02:07:38,119
example the dungeon is not created by

2316
02:07:36,498 --> 02:07:41,118
hand right the dungeon is a for loop

2317
02:07:38,118 --> 02:07:46,009
with some random choices baked into it

2318
02:07:41,118 --> 02:07:54,768
so you can already see how this plays

2319
02:07:46,010 --> 02:07:55,909
out right so even now when we haven't

2320
02:07:54,769 --> 02:07:58,449
really even though we haven't really

2321
02:07:55,908 --> 02:08:01,219
done much you can see this is completely

2322
02:07:58,448 --> 02:08:04,069
procedural right there's no hand off the

2323
02:08:01,219 --> 02:08:05,868
ring here at all really it randomly

2324
02:08:04,069 --> 02:08:08,090
picks how many there are in a chain from

2325
02:08:05,868 --> 02:08:09,708
beginning to end it randomly picks where

2326
02:08:08,090 --> 02:08:12,139
it might place the shop in the item room

2327
02:08:09,708 --> 02:08:14,418
you can imagine saying putting an if

2328
02:08:12,139 --> 02:08:17,840
around these if you don't always want

2329
02:08:14,418 --> 02:08:19,729
there to be a shop right so no like

2330
02:08:17,840 --> 02:08:22,389
we're already past the point of the hand

2331
02:08:19,729 --> 02:08:26,139
authoring like we're already into random

2332
02:08:22,389 --> 02:08:26,139
generation and we've only just started

2333
02:08:26,288 --> 02:08:29,590
does that make sense

2334
02:08:32,139 --> 02:08:38,149
if you're talking about what goes in the

2335
02:08:35,208 --> 02:08:44,748
rooms yes that we haven't done anything

2336
02:08:38,149 --> 02:08:47,030
with right the rooms right now don't

2337
02:08:44,748 --> 02:08:50,078
don't pop inside you're just empty so

2338
02:08:47,029 --> 02:08:52,880
that obviously we haven't anything with

2339
02:08:50,078 --> 02:08:54,018
but have you worked on procedurally

2340
02:08:52,880 --> 02:08:56,510
generated worlds similar to this before

2341
02:08:54,019 --> 02:08:58,760
no I have not

2342
02:08:56,510 --> 02:09:01,429
I've never really done a tile map be

2343
02:08:58,760 --> 02:09:06,530
kind of a game this isn't really a tile

2344
02:09:01,429 --> 02:09:07,668
map but you know what I mean like the

2345
02:09:06,529 --> 02:09:10,728
only things I've ever worked on before

2346
02:09:07,668 --> 02:09:12,828
our continuous 3d really I

2347
02:09:10,729 --> 02:09:16,369
I've never really worked on things that

2348
02:09:12,828 --> 02:09:19,908
have like a sort of tile based feel to

2349
02:09:16,368 --> 02:09:23,898
them like this so it's a little bit new

2350
02:09:19,908 --> 02:09:25,458
for me certainly and also most of the

2351
02:09:23,899 --> 02:09:26,749
things I've ever had experience with in

2352
02:09:25,458 --> 02:09:32,448
the past were not procedurally their

2353
02:09:26,748 --> 02:09:34,908
hand authored usually obviously like my

2354
02:09:32,448 --> 02:09:38,418
the last preparatory lon the witness is

2355
02:09:34,908 --> 02:09:42,248
very hand authored right every last bit

2356
02:09:38,418 --> 02:09:42,248
is like fine-tuned by hand

2357
02:09:42,329 --> 02:09:48,130
so there's a couple pretty jewel pieces

2358
02:09:45,640 --> 02:09:49,900
in there like the grass you know grasses

2359
02:09:48,130 --> 02:09:52,949
and foliage just kind of stuff but

2360
02:09:49,899 --> 02:09:52,948
that's that's really it

2361
02:10:06,149 --> 02:10:09,509
all right

2362
02:10:18,340 --> 02:10:21,350
thank you everyone for joining me for

2363
02:10:20,149 --> 02:10:23,149
the episode of hand made here up so I

2364
02:10:21,350 --> 02:10:26,270
pepper coating with you as always if you

2365
02:10:23,149 --> 02:10:28,460
would like to follow along with the

2366
02:10:26,270 --> 02:10:30,140
series at home you can always peer out

2367
02:10:28,460 --> 02:10:31,489
of the game on hand made here at org and

2368
02:10:30,140 --> 02:10:33,770
it comes with a source code so you can

2369
02:10:31,489 --> 02:10:35,269
play around with it yourself which would

2370
02:10:33,770 --> 02:10:39,020
be a good thing to do this week if you

2371
02:10:35,270 --> 02:10:42,470
wanted to try your hand at fixing the

2372
02:10:39,020 --> 02:10:45,020
generation code that currently doesn't

2373
02:10:42,470 --> 02:10:46,820
know what to do if it can't place rooms

2374
02:10:45,020 --> 02:10:48,980
right so we talked about how that needs

2375
02:10:46,819 --> 02:10:51,349
to get improved you could try improving

2376
02:10:48,979 --> 02:10:54,349
it that'd be a great thing to try over

2377
02:10:51,350 --> 02:10:56,240
the week if you are so inclined I'll be

2378
02:10:54,350 --> 02:10:58,910
back next week when I think we will not

2379
02:10:56,239 --> 02:10:59,719
be addressing that problem directly I am

2380
02:10:58,909 --> 02:11:01,760
going to go

2381
02:10:59,720 --> 02:11:04,100
I think clean up the camera and lighting

2382
02:11:01,760 --> 02:11:06,409
stuff so that it properly frames the

2383
02:11:04,100 --> 02:11:07,820
rooms that you're in and does a couple

2384
02:11:06,409 --> 02:11:09,349
of things like that that are just some

2385
02:11:07,819 --> 02:11:11,809
quality of life things so that we can

2386
02:11:09,350 --> 02:11:13,400
hop around our world as it becomes a

2387
02:11:11,810 --> 02:11:15,170
little bit more of a real world I don't

2388
02:11:13,399 --> 02:11:16,489
really want all the rough edges in there

2389
02:11:15,170 --> 02:11:18,680
I want to see what it looks like for

2390
02:11:16,489 --> 02:11:20,029
real so that's a relatively

2391
02:11:18,680 --> 02:11:21,560
straightforward cleanup stuff we need to

2392
02:11:20,029 --> 02:11:24,079
do and we should just do it so that we

2393
02:11:21,560 --> 02:11:25,940
can be happy with that so we'll be doing

2394
02:11:24,079 --> 02:11:27,559
probably that next weekend

2395
02:11:25,939 --> 02:11:29,779
before coming back to the generator

2396
02:11:27,560 --> 02:11:32,840
we're gonna do a little bit of a twerk

2397
02:11:29,779 --> 02:11:34,849
for sure so that's about it for today

2398
02:11:32,840 --> 02:11:36,380
see hope to see you back here next week

2399
02:11:34,850 --> 02:11:37,670
until then have fun programming and I'll

2400
02:11:36,380 --> 02:11:39,909
see everyone on the Internet take it

2401
02:11:37,670 --> 02:11:39,909
easy everybody

