1
00:00:01,340 --> 00:00:05,548
hello everyone and welcome to hand made

2
00:00:04,169 --> 00:00:09,689
here oh sure we could a complete game

3
00:00:05,549 --> 00:00:14,280
live on stream we have some debugging to

4
00:00:09,689 --> 00:00:16,829
do today in fact because if I remember

5
00:00:14,279 --> 00:00:20,189
correctly last weekend at the end of

6
00:00:16,829 --> 00:00:23,939
Sunday stream we finished up at a point

7
00:00:20,189 --> 00:00:27,420
where we had done the plumbing necessary

8
00:00:23,939 --> 00:00:32,189
to take light probes and push them out

9
00:00:27,420 --> 00:00:33,870
into a voxel and then we could compute

10
00:00:32,189 --> 00:00:38,039
on that voxel if we wanted to it's in

11
00:00:33,869 --> 00:00:40,530
CPU memory it's on the CPU side and then

12
00:00:38,039 --> 00:00:43,229
at the end of every lighting computation

13
00:00:40,530 --> 00:00:46,890
we push the voxel down to the graphics

14
00:00:43,229 --> 00:00:49,259
card and sample from it and where we

15
00:00:46,890 --> 00:00:51,539
were at we finished that sort of you

16
00:00:49,259 --> 00:00:54,718
know it's running but it doesn't quite

17
00:00:51,539 --> 00:00:56,550
work the way we would expect it to at

18
00:00:54,719 --> 00:00:59,399
the end of last stream because we put

19
00:00:56,549 --> 00:01:00,808
some sample information into the light

20
00:00:59,399 --> 00:01:01,859
probes and want to see if it will come

21
00:01:00,808 --> 00:01:05,518
out the other end and it didn't quite

22
00:01:01,859 --> 00:01:07,170
and so what we want to do today is start

23
00:01:05,519 --> 00:01:08,969
to bugging that process so what we'd

24
00:01:07,170 --> 00:01:12,930
like to do best-case scenario end of the

25
00:01:08,969 --> 00:01:17,640
day what we'd like to get to is a clear

26
00:01:12,930 --> 00:01:19,860
sort of structured art situation where

27
00:01:17,640 --> 00:01:22,618
at the start of the lighting computation

28
00:01:19,859 --> 00:01:25,709
we initialize light probes with some

29
00:01:22,618 --> 00:01:28,009
specific data so we verify that we can

30
00:01:25,709 --> 00:01:31,469
put specific data into our light probes

31
00:01:28,009 --> 00:01:32,849
we then don't really run a lighting

32
00:01:31,469 --> 00:01:34,739
computation because again we want to

33
00:01:32,849 --> 00:01:36,239
leave a specific set of stuff in the

34
00:01:34,739 --> 00:01:38,429
light probes so we skip the actual

35
00:01:36,239 --> 00:01:41,519
letting computation we then output the

36
00:01:38,430 --> 00:01:43,890
light probes into the voxel and we

37
00:01:41,519 --> 00:01:45,450
verify that the voxel shows that same

38
00:01:43,890 --> 00:01:47,879
structured light that we put in at the

39
00:01:45,450 --> 00:01:52,100
head end and so that just tells us that

40
00:01:47,879 --> 00:01:54,420
we've debunked like any of the sort of

41
00:01:52,099 --> 00:01:57,599
pieces that could have failed there and

42
00:01:54,420 --> 00:01:59,490
so that's what I really want to get to

43
00:01:57,599 --> 00:02:01,679
at the end of the day and that sets us

44
00:01:59,489 --> 00:02:04,859
up for the next step which is actually

45
00:02:01,680 --> 00:02:07,500
simulating the lighting which is kind of

46
00:02:04,859 --> 00:02:09,330
the final stage in producing a new

47
00:02:07,500 --> 00:02:10,679
working model of lighting that works on

48
00:02:09,330 --> 00:02:12,390
the light probes and then from there

49
00:02:10,679 --> 00:02:14,469
we're kind of off into optimization

50
00:02:12,389 --> 00:02:16,399
territory

51
00:02:14,469 --> 00:02:18,919
like seeing if we can make sure

52
00:02:16,400 --> 00:02:21,140
everything runs fast enough first by

53
00:02:18,919 --> 00:02:23,089
limiting our region right now I think we

54
00:02:21,139 --> 00:02:24,109
consider way too many light probes I

55
00:02:23,090 --> 00:02:27,050
think we're just considering all the

56
00:02:24,110 --> 00:02:31,940
light probes who to be it's way too

57
00:02:27,050 --> 00:02:32,300
early for me to be up and then we go

58
00:02:31,939 --> 00:02:34,719
from there

59
00:02:32,300 --> 00:02:34,719
right

60
00:02:56,908 --> 00:03:01,810
so let's start off just by taking a look

61
00:02:59,199 --> 00:03:04,268
at what I was saying was broken about it

62
00:03:01,810 --> 00:03:06,969
this is in debug mode so it's a little

63
00:03:04,269 --> 00:03:10,000
bit slow but even in debug mode it's

64
00:03:06,969 --> 00:03:12,579
fast enough to run and what you can kind

65
00:03:10,000 --> 00:03:14,620
of see is actually there is something

66
00:03:12,579 --> 00:03:16,810
going on right you can sort of see there

67
00:03:14,620 --> 00:03:18,969
is some lighting showing up it appears

68
00:03:16,810 --> 00:03:20,799
to be very high like above the hero or

69
00:03:18,969 --> 00:03:22,509
something and we're just kind of popping

70
00:03:20,799 --> 00:03:25,409
up into the bottom of that lighting

71
00:03:22,509 --> 00:03:28,568
perhaps again it's pretty hard to see

72
00:03:25,408 --> 00:03:30,280
most of the world is unlit right you can

73
00:03:28,568 --> 00:03:32,888
kind of see that that really we're not

74
00:03:30,280 --> 00:03:37,389
getting much in the way of lighting

75
00:03:32,889 --> 00:03:39,670
there anyway but there is something

76
00:03:37,389 --> 00:03:41,920
happening so it's a little bit confusing

77
00:03:39,669 --> 00:03:43,298
because you know if we had just a

78
00:03:41,919 --> 00:03:45,578
straight up like nothing's getting

79
00:03:43,299 --> 00:03:47,438
transmitted kind of a bug then we

80
00:03:45,579 --> 00:03:49,389
wouldn't see that lighting popping up at

81
00:03:47,438 --> 00:03:51,128
the same time we're getting almost no

82
00:03:49,389 --> 00:03:52,599
lighting popping up so it is a little

83
00:03:51,128 --> 00:03:55,628
bit weird

84
00:03:52,598 --> 00:03:57,638
and it's kind of difficult to guess

85
00:03:55,628 --> 00:03:59,620
what's going on I'm curious if I hop

86
00:03:57,639 --> 00:04:02,620
over to an area where there's a stack of

87
00:03:59,620 --> 00:04:04,780
things here and I hop downstairs what do

88
00:04:02,620 --> 00:04:06,759
we see and one of the things that I

89
00:04:04,780 --> 00:04:08,739
notice is I'm still not seeing like

90
00:04:06,759 --> 00:04:11,948
there isn't light up on the top level

91
00:04:08,739 --> 00:04:13,569
here so if I had to guess and I don't

92
00:04:11,949 --> 00:04:15,699
really know but if I had to guess what

93
00:04:13,568 --> 00:04:17,918
it looks like is happening to me is that

94
00:04:15,699 --> 00:04:20,079
our scale is wrong so it looks like

95
00:04:17,918 --> 00:04:22,029
because I can see some lighting when I

96
00:04:20,079 --> 00:04:24,699
hop up into it I'm thinking that that

97
00:04:22,029 --> 00:04:27,279
our scale is wrong and the size of the

98
00:04:24,699 --> 00:04:30,430
light is just very small for some reason

99
00:04:27,279 --> 00:04:31,750
right so maybe when we put it into the

100
00:04:30,430 --> 00:04:35,199
box ler when we take it out of the box

101
00:04:31,750 --> 00:04:39,220
solar who knows what we're getting is

102
00:04:35,199 --> 00:04:42,310
that lighting information is just really

103
00:04:39,220 --> 00:04:45,760
really tiny so because remember what we

104
00:04:42,310 --> 00:04:47,889
stuffed in like test data the assumption

105
00:04:45,759 --> 00:04:49,329
there obsessional close that the

106
00:04:47,889 --> 00:04:52,060
assumption there was that we stuffed in

107
00:04:49,329 --> 00:04:54,009
the test the test data correctly at the

108
00:04:52,060 --> 00:04:55,509
same size as like a big sphere that we

109
00:04:54,009 --> 00:04:59,110
could see of a big sphere of lighting

110
00:04:55,509 --> 00:05:01,538
and my first question is just did we

111
00:04:59,110 --> 00:05:03,908
actually do that so curious the light

112
00:05:01,538 --> 00:05:04,180
probe index right and we're looping over

113
00:05:03,908 --> 00:05:06,069
it

114
00:05:04,180 --> 00:05:07,778
you can see us doing our add probe to

115
00:05:06,069 --> 00:05:09,909
spatial index thing here where we add

116
00:05:07,778 --> 00:05:13,329
light probes into the spatial index

117
00:05:09,910 --> 00:05:16,300
we're and then we come through here

118
00:05:13,329 --> 00:05:19,629
and we tried to run the same code this

119
00:05:16,300 --> 00:05:20,860
is exactly the same code we tried to run

120
00:05:19,629 --> 00:05:23,319
the same code we were running before

121
00:05:20,860 --> 00:05:25,750
where we said look let's try to put the

122
00:05:23,319 --> 00:05:27,519
light in here that we were using for

123
00:05:25,750 --> 00:05:28,810
putting it into the lock so directly

124
00:05:27,519 --> 00:05:30,609
let's use it to put in the light probes

125
00:05:28,810 --> 00:05:32,170
now one of the things that might be bust

126
00:05:30,610 --> 00:05:34,240
about that is we've got this light are

127
00:05:32,170 --> 00:05:36,730
see here that's a value that multiplies

128
00:05:34,240 --> 00:05:38,889
the light distance itself this could be

129
00:05:36,730 --> 00:05:41,560
very wrong as well because again this is

130
00:05:38,889 --> 00:05:44,589
in world space and so you know this was

131
00:05:41,560 --> 00:05:47,290
previously I guess in UV space actually

132
00:05:44,589 --> 00:05:48,879
and so it may just be a question of the

133
00:05:47,290 --> 00:05:50,379
you know might be the only bug we have

134
00:05:48,879 --> 00:05:52,389
is really we forgot to update this

135
00:05:50,379 --> 00:05:56,069
parameter and so just looking at it

136
00:05:52,389 --> 00:06:00,129
offhand that is obviously incorrect

137
00:05:56,069 --> 00:06:03,269
because this is a an equation that does

138
00:06:00,129 --> 00:06:08,079
the fall-off 1.0 is the is no fall-off

139
00:06:03,269 --> 00:06:09,699
so as this you know 1.0 would be no

140
00:06:08,079 --> 00:06:13,029
fall-off zero would be complete fall off

141
00:06:09,699 --> 00:06:15,969
right and so this value has to range

142
00:06:13,029 --> 00:06:18,669
from zero to one over however large the

143
00:06:15,970 --> 00:06:21,310
light source needs to be if this RC

144
00:06:18,670 --> 00:06:24,069
value here is three that means that our

145
00:06:21,310 --> 00:06:26,168
distance fall-off is 3x times the actual

146
00:06:24,069 --> 00:06:29,019
world space distance that means it would

147
00:06:26,168 --> 00:06:30,789
fall off at one third of a meter that's

148
00:06:29,019 --> 00:06:32,740
a very tiny light source and hey that

149
00:06:30,790 --> 00:06:34,480
happens to be what we're seeing so what

150
00:06:32,740 --> 00:06:36,490
we probably want to do here is actually

151
00:06:34,480 --> 00:06:39,280
change this into something that is the

152
00:06:36,490 --> 00:06:42,850
correct meters fall-off so for example

153
00:06:39,279 --> 00:06:45,909
we could say one over however many

154
00:06:42,850 --> 00:06:47,860
meters we want here and the light the

155
00:06:45,910 --> 00:06:49,510
you know let's say we want a 10 meter

156
00:06:47,860 --> 00:06:53,050
fall-off of our light source I don't

157
00:06:49,509 --> 00:06:55,810
know what we actually want it to be but

158
00:06:53,050 --> 00:06:57,310
let's say we did that would we now get a

159
00:06:55,810 --> 00:07:01,149
sphere that we could actually see

160
00:06:57,310 --> 00:07:03,310
properly you know what I mean that would

161
00:07:01,149 --> 00:07:05,979
be my first question and so running hand

162
00:07:03,310 --> 00:07:08,918
made hero now here here is the actual

163
00:07:05,980 --> 00:07:12,520
game running and there we have well so

164
00:07:08,918 --> 00:07:14,918
you know now we actually do get some

165
00:07:12,519 --> 00:07:16,000
visible lighting there but one of the

166
00:07:14,918 --> 00:07:19,299
things that's really interesting about

167
00:07:16,000 --> 00:07:23,220
that is it's apparently not really quite

168
00:07:19,300 --> 00:07:23,220
a sphere the way I would expect

169
00:07:23,559 --> 00:07:28,749
Wow that's a really interesting lighting

170
00:07:25,928 --> 00:07:30,128
artifact as well uh so it is kind of

171
00:07:28,749 --> 00:07:33,039
spherical lighting you can see it

172
00:07:30,129 --> 00:07:35,979
falling off as the sphere goes what's

173
00:07:33,038 --> 00:07:38,378
really interesting is it seems like and

174
00:07:35,978 --> 00:07:43,449
correct me if I'm wrong but it seems

175
00:07:38,379 --> 00:07:46,929
like the the answer that the light probe

176
00:07:43,449 --> 00:07:50,288
system is getting at the point where the

177
00:07:46,928 --> 00:07:53,338
voxel falls off to zero so where there

178
00:07:50,288 --> 00:07:55,899
is where there are no light probes right

179
00:07:53,338 --> 00:07:59,139
where there's no light probe in a

180
00:07:55,899 --> 00:08:03,629
particular voxel entry it actually goes

181
00:07:59,139 --> 00:08:07,209
to fulbright there you see them saying

182
00:08:03,629 --> 00:08:10,509
somehow it's really weird but it creates

183
00:08:07,209 --> 00:08:12,218
an incredibly interesting effect I'm not

184
00:08:10,509 --> 00:08:13,869
sure it's a super useful effect because

185
00:08:12,218 --> 00:08:15,399
it's gonna have a lot of artifacts the

186
00:08:13,869 --> 00:08:17,349
way that it works so I don't necessarily

187
00:08:15,399 --> 00:08:20,228
think we can harness that effect for

188
00:08:17,348 --> 00:08:21,759
anything particularly cool but boy that

189
00:08:20,228 --> 00:08:25,389
was interesting you know it looks like a

190
00:08:21,759 --> 00:08:26,859
pac-man level inside the voxels where

191
00:08:25,389 --> 00:08:29,319
they fall off that's that's a pretty

192
00:08:26,858 --> 00:08:34,240
interesting thing so it does look a

193
00:08:29,319 --> 00:08:35,438
little bit there like you know it does

194
00:08:34,240 --> 00:08:39,250
look a little bit to me like we're

195
00:08:35,438 --> 00:08:41,429
getting the correct size fall-off now a

196
00:08:39,250 --> 00:08:43,870
little bit it seems like the light

197
00:08:41,429 --> 00:08:47,078
intensity is a little wrong though -

198
00:08:43,870 --> 00:08:49,360
it's not that bright at the center which

199
00:08:47,078 --> 00:08:51,599
is a little bit weird and I'm not sure I

200
00:08:49,360 --> 00:08:58,089
don't quite remember what we were doing

201
00:08:51,600 --> 00:09:01,870
I don't remember if we change the

202
00:08:58,089 --> 00:09:03,809
brightness there I don't think we did I

203
00:09:01,870 --> 00:09:14,169
think the light intensity is the same

204
00:09:03,808 --> 00:09:16,629
light intensity it was right you know I

205
00:09:14,169 --> 00:09:18,250
I guess I just can't remember and so I

206
00:09:16,629 --> 00:09:20,889
don't know if we're seeing something

207
00:09:18,250 --> 00:09:21,759
weird happening there with that light

208
00:09:20,889 --> 00:09:24,249
intensity

209
00:09:21,759 --> 00:09:26,829
I guess not because if you think about

210
00:09:24,249 --> 00:09:28,839
it the light intensity is at 10 and so

211
00:09:26,828 --> 00:09:31,359
this is a quarter of light intensity

212
00:09:28,839 --> 00:09:34,089
that would give us maximum light

213
00:09:31,360 --> 00:09:35,769
intensity and so if we wanted it to be

214
00:09:34,089 --> 00:09:37,690
more bright in the center

215
00:09:35,769 --> 00:09:39,519
that is what I would expect so I'm not

216
00:09:37,690 --> 00:09:41,980
sure what we did there I don't quite

217
00:09:39,519 --> 00:09:42,399
remember I'm sorry if we change that or

218
00:09:41,980 --> 00:09:45,399
not

219
00:09:42,399 --> 00:09:47,139
I'm very tired today I'm super sleepy so

220
00:09:45,399 --> 00:09:49,299
looking at that it does look a little

221
00:09:47,139 --> 00:09:51,850
bit more correct like you're getting

222
00:09:49,299 --> 00:09:53,409
full lighting there in the center region

223
00:09:51,850 --> 00:09:57,850
I guess

224
00:09:53,409 --> 00:09:59,709
so that's not too concerning and it does

225
00:09:57,850 --> 00:10:02,230
look spherical so I think we're getting

226
00:09:59,710 --> 00:10:04,360
closer but it seems like we still have

227
00:10:02,230 --> 00:10:06,789
some bugs where I'm not sure what's

228
00:10:04,360 --> 00:10:09,669
happening in the voxels at the location

229
00:10:06,789 --> 00:10:11,949
where there is nothing in the voxel and

230
00:10:09,669 --> 00:10:13,899
I think we need to look at basically how

231
00:10:11,950 --> 00:10:16,390
we're handling our zero or null like our

232
00:10:13,899 --> 00:10:19,329
not present value I think that's

233
00:10:16,389 --> 00:10:23,379
probably getting handled incorrectly at

234
00:10:19,330 --> 00:10:26,320
least that's my assumption right and

235
00:10:23,379 --> 00:10:28,899
probably what we're doing there is you

236
00:10:26,320 --> 00:10:31,930
know providing some lighting that's

237
00:10:28,899 --> 00:10:34,029
getting thought about the wrong way I

238
00:10:31,929 --> 00:10:36,009
think I kind of have a mental model even

239
00:10:34,029 --> 00:10:40,059
of why that's probably wrong

240
00:10:36,009 --> 00:10:41,379
so we'll see as we go all right so if we

241
00:10:40,059 --> 00:10:43,959
take a look at what's going on with

242
00:10:41,379 --> 00:10:47,289
these voxels now and you take a look

243
00:10:43,960 --> 00:10:50,350
here at the adprep spatial index what

244
00:10:47,289 --> 00:10:53,679
we're doing is every voxel we fill with

245
00:10:50,350 --> 00:10:55,960
light probe information by putting the

246
00:10:53,679 --> 00:10:58,959
closest light probe into the voxel at

247
00:10:55,960 --> 00:11:02,170
that location when we fill the light

248
00:10:58,960 --> 00:11:03,930
probe with information we're filling it

249
00:11:02,169 --> 00:11:09,419
with information about the light probe

250
00:11:03,929 --> 00:11:12,699
which is at a particular position right

251
00:11:09,419 --> 00:11:15,250
and so the light probe itself isn't

252
00:11:12,700 --> 00:11:18,100
centered in the voxel and that creates a

253
00:11:15,250 --> 00:11:19,779
little bit of a problem too right and so

254
00:11:18,100 --> 00:11:21,850
I feel like we can maybe start to

255
00:11:19,779 --> 00:11:24,549
address some of our problems here also

256
00:11:21,850 --> 00:11:26,200
with the way we're sampling things by

257
00:11:24,549 --> 00:11:30,639
thinking about how this information is

258
00:11:26,200 --> 00:11:33,940
getting pushed down if I go look here at

259
00:11:30,639 --> 00:11:35,980
how our voxel is is was being set up

260
00:11:33,940 --> 00:11:39,780
here you can see that computing light

261
00:11:35,980 --> 00:11:41,769
directly in the voxel sort of has some

262
00:11:39,779 --> 00:11:43,990
benefits because when you actually then

263
00:11:41,769 --> 00:11:46,569
go to sample it you've getting gotten an

264
00:11:43,990 --> 00:11:48,090
exact an exact answer at the center of

265
00:11:46,570 --> 00:11:49,180
your voxel whereas now what we're doing

266
00:11:48,090 --> 00:11:50,710
when

267
00:11:49,179 --> 00:11:53,469
go through these voxels right is we're

268
00:11:50,710 --> 00:11:55,540
pushing we're taking out what is

269
00:11:53,470 --> 00:12:01,480
actually in the voxel at that location

270
00:11:55,539 --> 00:12:03,459
and I think our zero voxel in theory

271
00:12:01,480 --> 00:12:05,560
when we go through our light probes here

272
00:12:03,460 --> 00:12:08,379
right one of the things you'll notice is

273
00:12:05,559 --> 00:12:10,119
we actually do have a zero probe and

274
00:12:08,379 --> 00:12:15,759
that's kind of wrong right look we don't

275
00:12:10,120 --> 00:12:17,320
want our probe to have a position just

276
00:12:15,759 --> 00:12:19,870
looking at where our light probes are

277
00:12:17,320 --> 00:12:23,560
our zero probe we don't really want to

278
00:12:19,870 --> 00:12:25,899
be anywhere I don't think and so we kind

279
00:12:23,559 --> 00:12:27,759
of want the zero probe not to be in the

280
00:12:25,899 --> 00:12:30,759
spatial index and not to have any light

281
00:12:27,759 --> 00:12:33,819
in it at all right I think so that kind

282
00:12:30,759 --> 00:12:35,679
of has to look like that and then when

283
00:12:33,820 --> 00:12:39,790
we get the zero probe out in theory the

284
00:12:35,679 --> 00:12:42,279
zero probe it's should should be just

285
00:12:39,789 --> 00:12:45,240
skipped so when it comes out here

286
00:12:42,279 --> 00:12:48,370
we just need to do this basically right

287
00:12:45,240 --> 00:12:51,730
and say look if there's nothing in the

288
00:12:48,370 --> 00:12:53,710
Pro if there's nothing there in that

289
00:12:51,730 --> 00:12:55,690
particular voxel then we don't put light

290
00:12:53,710 --> 00:12:58,690
into that box at all right there's this

291
00:12:55,690 --> 00:13:02,200
just it's just blink assuming that we do

292
00:12:58,690 --> 00:13:05,050
something like that that's at least a

293
00:13:02,200 --> 00:13:07,840
little more correct now on what should

294
00:13:05,049 --> 00:13:14,349
be occurring in around the voxel okay

295
00:13:07,840 --> 00:13:19,930
that was surprising probably because I

296
00:13:14,350 --> 00:13:21,490
think not equal zero oh wait no boy

297
00:13:19,929 --> 00:13:22,750
absolute month that was correct so the

298
00:13:21,490 --> 00:13:26,169
probe beam that comes out if it's

299
00:13:22,750 --> 00:13:30,070
correct we use it this was the problem

300
00:13:26,169 --> 00:13:31,899
right here we need to move forward every

301
00:13:30,070 --> 00:13:37,920
time otherwise we'll always be stuck on

302
00:13:31,899 --> 00:13:37,919
the first one right furthermore in here

303
00:13:38,460 --> 00:13:46,629
yeah just looking at this I think now

304
00:13:44,500 --> 00:13:48,669
that should be iterating over all of the

305
00:13:46,629 --> 00:13:52,899
parts of the voxel I'm Way too sleepy

306
00:13:48,669 --> 00:13:54,559
today I had to get up early my brain is

307
00:13:52,899 --> 00:13:56,990
not ready to do programming

308
00:13:54,559 --> 00:13:58,698
um so you can see now we're not getting

309
00:13:56,990 --> 00:14:02,810
that fought that weird sort of fall off

310
00:13:58,698 --> 00:14:04,099
artifact and so we're able to do the

311
00:14:02,809 --> 00:14:05,419
lighting a little bit more appropriately

312
00:14:04,100 --> 00:14:07,879
now and it is sort of doing the

313
00:14:05,419 --> 00:14:12,110
spherical fall-off what you can see

314
00:14:07,879 --> 00:14:14,629
however is now because it's based on

315
00:14:12,110 --> 00:14:16,339
where the lighting probes are you know

316
00:14:14,629 --> 00:14:18,949
each light probe right now has a

317
00:14:16,339 --> 00:14:20,089
particular value and because it's based

318
00:14:18,948 --> 00:14:21,679
on where the lighting probes are you can

319
00:14:20,089 --> 00:14:24,259
really see the problem with the way

320
00:14:21,679 --> 00:14:25,938
we're doing the sampling and so I think

321
00:14:24,259 --> 00:14:31,188
like right off the bat what we're gonna

322
00:14:25,938 --> 00:14:34,129
see here and you know we we can

323
00:14:31,188 --> 00:14:35,659
certainly play with it from here we aim

324
00:14:34,129 --> 00:14:37,670
and we may have some bugs in there and

325
00:14:35,659 --> 00:14:39,528
whatnot but what you can see I think

326
00:14:37,669 --> 00:14:41,659
right off the bat is just it doesn't

327
00:14:39,528 --> 00:14:44,808
really work to do the lighting sampling

328
00:14:41,659 --> 00:14:46,399
the way that we're doing it there for

329
00:14:44,808 --> 00:14:49,219
like a number of reasons right like

330
00:14:46,399 --> 00:14:51,409
because we're just putting light answers

331
00:14:49,220 --> 00:14:53,870
directly into the voxels and trial in

332
00:14:51,409 --> 00:14:56,028
healing them we lose the light probe

333
00:14:53,870 --> 00:14:58,938
location information that we kind of

334
00:14:56,028 --> 00:15:01,159
needed right because we compute unless

335
00:14:58,938 --> 00:15:03,708
we wanted to change and we actually just

336
00:15:01,159 --> 00:15:07,399
compute light at the voxels themselves

337
00:15:03,708 --> 00:15:11,989
then the light lookup really needs to

338
00:15:07,399 --> 00:15:14,179
work here and it doesn't work right and

339
00:15:11,990 --> 00:15:16,549
so just looking at how this is working I

340
00:15:14,179 --> 00:15:19,489
really don't think we're gonna get

341
00:15:16,549 --> 00:15:21,438
anywhere with this particular model just

342
00:15:19,490 --> 00:15:23,509
looking at how bad that trilinear

343
00:15:21,438 --> 00:15:25,159
sampling looks and yeah there could be

344
00:15:23,509 --> 00:15:27,589
some bugs in there maybe it's looking

345
00:15:25,159 --> 00:15:29,028
worse than it should look but I just

346
00:15:27,589 --> 00:15:31,730
don't think we're gonna be able to get

347
00:15:29,028 --> 00:15:35,149
all the way there with trilinear I just

348
00:15:31,730 --> 00:15:36,860
I just don't I don't buy it and so I do

349
00:15:35,149 --> 00:15:39,799
think the you know the first thing we

350
00:15:36,860 --> 00:15:41,600
may have to do because it looks like we

351
00:15:39,799 --> 00:15:43,909
are are sort of pushing down the light

352
00:15:41,600 --> 00:15:47,750
probes properly now I think the first

353
00:15:43,909 --> 00:15:50,169
thing we may have to do is is start

354
00:15:47,750 --> 00:15:54,078
actually doing our own light probe

355
00:15:50,169 --> 00:15:56,748
blends in the sampler itself right in

356
00:15:54,078 --> 00:15:58,938
the in the fragment shader so as painful

357
00:15:56,749 --> 00:16:00,319
as it may be I do think like we may have

358
00:15:58,938 --> 00:16:04,370
to do something where we are actually

359
00:16:00,318 --> 00:16:06,860
pulling some kind of lookup information

360
00:16:04,370 --> 00:16:07,899
out of the voxel assuming we still use

361
00:16:06,860 --> 00:16:10,330
one smooth

362
00:16:07,899 --> 00:16:11,799
axl because we could use other spatial

363
00:16:10,330 --> 00:16:13,090
partitions right there's nothing that

364
00:16:11,799 --> 00:16:17,859
says that our fragment shader can't

365
00:16:13,090 --> 00:16:20,259
itself do the lookup but basically

366
00:16:17,860 --> 00:16:21,730
something that tells us how we're gonna

367
00:16:20,259 --> 00:16:24,039
blend these things together I think

368
00:16:21,730 --> 00:16:27,220
might might have to happen right I think

369
00:16:24,039 --> 00:16:28,809
pulling directly out of the voxel the

370
00:16:27,220 --> 00:16:31,029
light information it's not gonna work

371
00:16:28,809 --> 00:16:33,489
and so what we may have to do is

372
00:16:31,029 --> 00:16:35,289
something more like okay we actually

373
00:16:33,490 --> 00:16:38,710
pull out the light probe positions and

374
00:16:35,289 --> 00:16:41,740
then we do our light sampling on that

375
00:16:38,710 --> 00:16:43,180
information and we used you know we use

376
00:16:41,740 --> 00:16:45,430
the actual position of the light probe

377
00:16:43,179 --> 00:16:49,149
to to figure out where the light is

378
00:16:45,429 --> 00:16:54,729
coming from relative to us which is not

379
00:16:49,149 --> 00:16:56,740
the same thing right it's it's that's

380
00:16:54,730 --> 00:16:57,970
quite different than the way that it's

381
00:16:56,740 --> 00:16:59,259
working at the moment where we just

382
00:16:57,970 --> 00:17:00,940
assume that it's coming from the center

383
00:16:59,259 --> 00:17:04,000
of the voxel which is this case it may

384
00:17:00,940 --> 00:17:06,070
well not be right so I think that's

385
00:17:04,000 --> 00:17:10,359
probably what we want to do I would like

386
00:17:06,069 --> 00:17:12,519
to do a quick check to see if where each

387
00:17:10,359 --> 00:17:15,729
of these things falls in the voxel

388
00:17:12,519 --> 00:17:18,359
itself so one of the things that's a

389
00:17:15,730 --> 00:17:21,069
little bit hard to see right now is

390
00:17:18,359 --> 00:17:25,059
where does each light probe fall in

391
00:17:21,069 --> 00:17:27,939
which lane of the voxels does each light

392
00:17:25,059 --> 00:17:29,349
probe fall so if I were to go into the

393
00:17:27,940 --> 00:17:31,930
thing that outputs the light probes

394
00:17:29,349 --> 00:17:37,719
themselves and in here we just said look

395
00:17:31,930 --> 00:17:40,360
I've got a need in inside the code that

396
00:17:37,720 --> 00:17:42,309
pushes the cubes down instead of doing

397
00:17:40,359 --> 00:17:44,969
this debug color if I was to just set

398
00:17:42,309 --> 00:17:48,269
each light probe to just be pure white

399
00:17:44,970 --> 00:17:50,559
so when I run it all of those like color

400
00:17:48,269 --> 00:17:52,480
the cubes that are colored sort of

401
00:17:50,559 --> 00:17:54,879
randomly that are the light probe

402
00:17:52,480 --> 00:17:57,190
locations if instead of that we just

403
00:17:54,880 --> 00:17:59,530
push down a full white right so you can

404
00:17:57,190 --> 00:18:02,019
see they're just just white now if I

405
00:17:59,529 --> 00:18:04,029
then go and change our voxel to be

406
00:18:02,019 --> 00:18:07,839
stuffed with something that shows like

407
00:18:04,029 --> 00:18:11,200
if the checkerboard pattern so like for

408
00:18:07,839 --> 00:18:13,449
example in here if I were to change the

409
00:18:11,200 --> 00:18:15,700
light east light West that sort of thing

410
00:18:13,450 --> 00:18:19,269
if I were to change and so instead of

411
00:18:15,700 --> 00:18:21,009
doing any kind of of light packing like

412
00:18:19,269 --> 00:18:21,529
in here where we're actually taking the

413
00:18:21,009 --> 00:18:24,799
probe

414
00:18:21,529 --> 00:18:28,039
here right if I was to change those up

415
00:18:24,799 --> 00:18:30,230
and said let's actually give ourselves a

416
00:18:28,039 --> 00:18:36,950
checkerboard again so something like

417
00:18:30,230 --> 00:18:41,059
like this right and then I set

418
00:18:36,950 --> 00:18:47,690
everything to just be a neutral amount

419
00:18:41,059 --> 00:18:53,089
of light in the neutral intensity like

420
00:18:47,690 --> 00:18:55,759
so so in this case we just initialize

421
00:18:53,089 --> 00:19:01,730
everything to a neutral intensity for

422
00:18:55,759 --> 00:19:04,930
our inbound lights like this so we have

423
00:19:01,730 --> 00:19:08,029
west east south north up and down here

424
00:19:04,930 --> 00:19:10,220
so we initialize the neutral intensity

425
00:19:08,029 --> 00:19:12,710
and then on our checker boards we turn

426
00:19:10,220 --> 00:19:16,160
like every two squares on each we turn

427
00:19:12,710 --> 00:19:18,289
on red green or blue so we have red red

428
00:19:16,160 --> 00:19:20,269
checkerboard along X green checkerboard

429
00:19:18,289 --> 00:19:23,329
along Y and blue checkerboard of a long

430
00:19:20,269 --> 00:19:25,849
C I just am interested in to say like

431
00:19:23,329 --> 00:19:27,829
okay so if we look back if the game you

432
00:19:25,849 --> 00:19:30,199
know and and maybe you know the other

433
00:19:27,829 --> 00:19:34,699
thing that I might do there is let's

434
00:19:30,200 --> 00:19:37,340
restart with without the bilinear on so

435
00:19:34,700 --> 00:19:40,980
if we go over to the OpenGL renderer

436
00:19:37,339 --> 00:19:42,609
side of things and we look at the linear

437
00:19:40,980 --> 00:19:45,470
[Music]

438
00:19:42,609 --> 00:19:47,209
call so we care we up that's their

439
00:19:45,470 --> 00:19:50,600
special textures so in here we have our

440
00:19:47,210 --> 00:19:58,039
voxel if we want to just have nearest

441
00:19:50,599 --> 00:20:00,139
here assuming that we want to do

442
00:19:58,039 --> 00:20:04,779
something like that and we go ahead and

443
00:20:00,140 --> 00:20:08,630
and run the game without any filtering

444
00:20:04,779 --> 00:20:11,960
my question is just what will that show

445
00:20:08,630 --> 00:20:15,620
us in terms of who is like for each

446
00:20:11,960 --> 00:20:19,370
lighting probe which ones are in which

447
00:20:15,619 --> 00:20:21,859
places right and so if you take a look

448
00:20:19,369 --> 00:20:26,229
at the way the lighting probes

449
00:20:21,859 --> 00:20:26,229
are aligned here you can kind of see

450
00:20:28,859 --> 00:20:38,459
I mean I guess one of the problems is

451
00:20:34,259 --> 00:20:41,788
since they're actually using the

452
00:20:38,460 --> 00:20:43,679
reflection equation here I do wonder if

453
00:20:41,788 --> 00:20:48,839
maybe what we want to do is something a

454
00:20:43,679 --> 00:20:50,429
little bit more drastic there so I think

455
00:20:48,839 --> 00:20:57,898
maybe I want to do something more like

456
00:20:50,429 --> 00:21:02,130
this so let's suppose we have a light

457
00:20:57,898 --> 00:21:03,808
override value this is the light color

458
00:21:02,130 --> 00:21:07,559
we're going to override everything with

459
00:21:03,808 --> 00:21:10,379
and maybe what I want to do is make the

460
00:21:07,558 --> 00:21:17,579
checkerboard pattern just override all

461
00:21:10,380 --> 00:21:20,220
of the lights so here instead what we're

462
00:21:17,579 --> 00:21:22,710
going to do is just like no matter what

463
00:21:20,220 --> 00:21:24,630
light direction you're looking you're

464
00:21:22,710 --> 00:21:26,370
gonna get the same light value you know

465
00:21:24,630 --> 00:21:30,929
everywhere I guess I didn't need to

466
00:21:26,369 --> 00:21:33,209
close the game but did and now I just

467
00:21:30,929 --> 00:21:34,980
want to kind of see if we can can pick

468
00:21:33,210 --> 00:21:36,538
out like individual light probes and are

469
00:21:34,980 --> 00:21:38,940
they actually falling into different

470
00:21:36,538 --> 00:21:44,240
locations in the voxel or not and so on

471
00:21:38,940 --> 00:21:51,389
right and so if I hop out to like a

472
00:21:44,240 --> 00:21:53,089
level here so here it's like a

473
00:21:51,388 --> 00:21:56,759
particularly high zoom level

474
00:21:53,089 --> 00:21:58,558
particularly like far out zoom level and

475
00:21:56,759 --> 00:22:00,119
we just look at like how are these

476
00:21:58,558 --> 00:22:02,548
things falling in the voxel it does

477
00:22:00,119 --> 00:22:06,629
appear that like we generally get pretty

478
00:22:02,548 --> 00:22:08,250
good separation right so you can kind of

479
00:22:06,630 --> 00:22:11,370
see that there's plenty of voxel

480
00:22:08,250 --> 00:22:14,909
resolution for lookup through all of

481
00:22:11,369 --> 00:22:19,949
these including the up/down right

482
00:22:14,909 --> 00:22:24,809
and so we do I think fill our voxels

483
00:22:19,950 --> 00:22:26,850
pretty reasonably and I guess you know

484
00:22:24,808 --> 00:22:30,000
we have to make sure that each voxel is

485
00:22:26,849 --> 00:22:32,038
is filled with something I suppose and

486
00:22:30,000 --> 00:22:34,679
so that's kind of a separate question so

487
00:22:32,038 --> 00:22:37,769
I guess what we could do is say look if

488
00:22:34,679 --> 00:22:41,059
we turn off the sampling here so so I'm

489
00:22:37,769 --> 00:22:41,058
gonna nuke the override

490
00:22:41,980 --> 00:22:50,620
right and so I keep closing it sorry I

491
00:22:47,509 --> 00:22:50,619
keep closing the game for no reason

492
00:22:56,480 --> 00:23:02,269
so if we go ahead and run the game and

493
00:22:59,410 --> 00:23:05,150
I'm gonna go ahead and and hop out to

494
00:23:02,269 --> 00:23:06,859
that same location with the override off

495
00:23:05,150 --> 00:23:09,890
I'm curious what will happen if we then

496
00:23:06,859 --> 00:23:13,129
test to see like I think part of the

497
00:23:09,890 --> 00:23:14,960
artifacts are seeing here is when we are

498
00:23:13,130 --> 00:23:17,570
sampling from these lights we're also

499
00:23:14,960 --> 00:23:19,429
perhaps seeing some places that don't

500
00:23:17,569 --> 00:23:21,649
have any samples at all which is also

501
00:23:19,429 --> 00:23:23,809
probably happening but if you look at

502
00:23:21,650 --> 00:23:25,820
the non trilinear version so if you just

503
00:23:23,808 --> 00:23:28,369
look at the raw like sampling that we're

504
00:23:25,819 --> 00:23:31,939
getting you can see that it does still

505
00:23:28,369 --> 00:23:35,329
more or less look correct right so again

506
00:23:31,940 --> 00:23:38,090
I think we're mostly there in terms of

507
00:23:35,329 --> 00:23:40,789
like sampling things in using the kind

508
00:23:38,089 --> 00:23:42,980
of sampling that we are doing here but

509
00:23:40,789 --> 00:23:46,069
what you can see pretty obviously from

510
00:23:42,980 --> 00:23:48,110
that is we're just not getting it just

511
00:23:46,069 --> 00:23:51,470
doesn't work to look up like probes that

512
00:23:48,109 --> 00:23:55,909
way blending as efficient as trilinear

513
00:23:51,470 --> 00:23:59,500
through the voxel maybe in terms of the

514
00:23:55,910 --> 00:23:59,500
small number of lookups Jeff Jeff said -

515
00:23:59,740 --> 00:24:05,509
it's just really not producing a

516
00:24:03,369 --> 00:24:08,000
particularly compelling result and so

517
00:24:05,509 --> 00:24:11,929
what I think we may have to do is say

518
00:24:08,000 --> 00:24:16,130
look let's take each of the light values

519
00:24:11,929 --> 00:24:18,440
that we got and we'll you know say that

520
00:24:16,130 --> 00:24:20,510
each probe you know we know let's look

521
00:24:18,440 --> 00:24:22,700
up into let's do some kind of indirect

522
00:24:20,509 --> 00:24:24,650
lookup so we can actually find out you

523
00:24:22,700 --> 00:24:26,569
know where each probe was and let's

524
00:24:24,650 --> 00:24:30,290
account for the positioning of the probe

525
00:24:26,569 --> 00:24:33,889
when we sum the lighting there you know

526
00:24:30,289 --> 00:24:35,808
or something more like that so that we

527
00:24:33,890 --> 00:24:38,600
can actually have some reasonable

528
00:24:35,808 --> 00:24:41,149
understanding of of the incoming light

529
00:24:38,599 --> 00:24:44,178
and furthermore you know one thing we

530
00:24:41,150 --> 00:24:47,570
may want to do is drop the resolution of

531
00:24:44,179 --> 00:24:49,130
the probe distribution as well because

532
00:24:47,569 --> 00:24:50,859
it may be that we're putting too many

533
00:24:49,130 --> 00:24:53,900
probes in and that you know it's

534
00:24:50,859 --> 00:24:55,169
sampling the lighting that densely may

535
00:24:53,900 --> 00:24:56,820
not really work particular

536
00:24:55,170 --> 00:24:58,500
well for indirect lighting because it

537
00:24:56,819 --> 00:25:00,869
may be that that's just too dense of a

538
00:24:58,500 --> 00:25:02,190
sampling and reconstructing from too

539
00:25:00,869 --> 00:25:03,750
dense of a sampling will just have too

540
00:25:02,190 --> 00:25:05,279
many artifacts because you're just

541
00:25:03,750 --> 00:25:06,990
trying to fundamentally get more

542
00:25:05,279 --> 00:25:11,129
resolution out of the scheme than you

543
00:25:06,990 --> 00:25:13,410
can because remember the lighting that

544
00:25:11,130 --> 00:25:17,310
we're sampling here is getting smacked

545
00:25:13,410 --> 00:25:19,140
down very aggressively into just six

546
00:25:17,309 --> 00:25:22,559
directions of incoming light which is

547
00:25:19,140 --> 00:25:30,020
not a particularly good representation

548
00:25:22,559 --> 00:25:30,019
of it right so it's pretty hard to say I

549
00:25:30,829 --> 00:25:38,250
mean and other things that we could

550
00:25:33,859 --> 00:25:40,769
point out here is we may also want to

551
00:25:38,250 --> 00:25:42,990
try changing the way that we're doing

552
00:25:40,769 --> 00:25:45,180
the light sampling right like with the

553
00:25:42,990 --> 00:25:46,710
light storage you know going to some

554
00:25:45,180 --> 00:25:49,470
kind of a different basis that's not

555
00:25:46,710 --> 00:25:52,579
cube directional might be another

556
00:25:49,470 --> 00:25:54,779
example of something we wanted to try

557
00:25:52,579 --> 00:25:57,089
you know this is why people use things

558
00:25:54,779 --> 00:26:00,509
like spherical harmonics and stuff to

559
00:25:57,089 --> 00:26:03,599
just have better ways of will be there

560
00:26:00,509 --> 00:26:05,129
you bell-like you know so that maybe

561
00:26:03,599 --> 00:26:06,299
that part of it is the cube sampling

562
00:26:05,130 --> 00:26:07,710
isn't gonna work either so we've got a

563
00:26:06,299 --> 00:26:09,329
lot of things to consider but you know

564
00:26:07,710 --> 00:26:10,529
we're basically where we need to be we

565
00:26:09,329 --> 00:26:14,490
just need to now start playing around

566
00:26:10,529 --> 00:26:16,559
and figuring out what's gonna work so

567
00:26:14,490 --> 00:26:19,740
let's take a look back at that Z by a

568
00:26:16,559 --> 00:26:21,990
shader again and just see like what what

569
00:26:19,740 --> 00:26:24,650
exactly is happening here that we that

570
00:26:21,990 --> 00:26:28,890
we might you know what do we want to do

571
00:26:24,650 --> 00:26:30,750
in terms of the shader here that that

572
00:26:28,890 --> 00:26:34,110
would still have some chance of running

573
00:26:30,750 --> 00:26:36,029
reasonably per pixel but that you know

574
00:26:34,109 --> 00:26:37,769
at the same time well let us do

575
00:26:36,029 --> 00:26:39,089
something better with the lighting so

576
00:26:37,769 --> 00:26:47,460
you can see here what we're effectively

577
00:26:39,089 --> 00:26:50,369
doing is we're just relying on this this

578
00:26:47,460 --> 00:26:55,440
sampling of the the light information

579
00:26:50,369 --> 00:26:56,939
here and you know I again don't really

580
00:26:55,440 --> 00:26:59,120
know there might be something we can do

581
00:26:56,940 --> 00:27:02,279
here but there might not be I'm not sure

582
00:26:59,119 --> 00:27:04,919
one example is for if we added another

583
00:27:02,279 --> 00:27:06,450
voxel that just told us a position you

584
00:27:04,920 --> 00:27:08,679
know maybe that would be sufficient so

585
00:27:06,450 --> 00:27:09,850
we don't have to look up into

586
00:27:08,679 --> 00:27:12,490
we don't have to do the in directed

587
00:27:09,849 --> 00:27:14,109
lookup right so one thing we could

588
00:27:12,490 --> 00:27:16,868
imagine here is let's suppose we added

589
00:27:14,109 --> 00:27:18,699
one more voxel because we know that

590
00:27:16,868 --> 00:27:21,099
seems to be fast enough is having about

591
00:27:18,700 --> 00:27:23,528
having the voxel lookup so you know

592
00:27:21,099 --> 00:27:26,128
suppose we took one of these here and

593
00:27:23,528 --> 00:27:29,859
said alright let's let's take a position

594
00:27:26,128 --> 00:27:31,990
so we'll say like light P and we'll

595
00:27:29,859 --> 00:27:35,740
actually ask you know can you give us a

596
00:27:31,990 --> 00:27:39,009
light position value out of this thing

597
00:27:35,740 --> 00:27:41,440
and and maybe we you know it's going to

598
00:27:39,009 --> 00:27:43,749
be a three-wide maybe we can pick an

599
00:27:41,440 --> 00:27:46,778
encoding that lets us get some

600
00:27:43,749 --> 00:27:50,288
reasonable resolution there right uh and

601
00:27:46,778 --> 00:27:51,909
so and you know another thing about we

602
00:27:50,288 --> 00:27:54,519
probably don't even need that really so

603
00:27:51,909 --> 00:27:57,639
we probably can just just sample it in a

604
00:27:54,519 --> 00:28:03,460
pretty basic way but anyway so imagine

605
00:27:57,638 --> 00:28:06,368
we get a sample here we pull out a

606
00:28:03,460 --> 00:28:08,528
position of a light and we could use

607
00:28:06,368 --> 00:28:10,628
that to just say look why don't you tell

608
00:28:08,528 --> 00:28:14,859
us where the light is relative to this

609
00:28:10,628 --> 00:28:18,248
voxel right so maybe what we do is we

610
00:28:14,859 --> 00:28:22,418
say okay we know where the voxel

611
00:28:18,249 --> 00:28:25,169
location is right this is the look this

612
00:28:22,419 --> 00:28:27,850
is like the center

613
00:28:25,169 --> 00:28:30,460
sorry not centers lock so this is like

614
00:28:27,849 --> 00:28:33,428
the location of the position of the

615
00:28:30,460 --> 00:28:36,340
person inside the voxel space right and

616
00:28:33,429 --> 00:28:38,798
then maybe you know here we can say well

617
00:28:36,339 --> 00:28:42,398
where was the light where was this light

618
00:28:38,798 --> 00:28:45,599
probe in that voxel space right like

619
00:28:42,398 --> 00:28:49,298
we're in this voxel is the actual light

620
00:28:45,599 --> 00:28:50,618
probe similarly right like maybe we get

621
00:28:49,298 --> 00:28:52,898
that information out of it or something

622
00:28:50,618 --> 00:28:55,990
like that so that we have an idea of

623
00:28:52,898 --> 00:28:58,089
where it's coming from relative to where

624
00:28:55,990 --> 00:29:00,058
we you know actually looked up in the

625
00:28:58,089 --> 00:29:02,829
voxel

626
00:29:00,058 --> 00:29:06,038
so doing something like that would allow

627
00:29:02,829 --> 00:29:07,928
us to reconstruct a world position

628
00:29:06,038 --> 00:29:10,929
unfortunately here we never really

629
00:29:07,929 --> 00:29:13,960
construct a world position of the actual

630
00:29:10,929 --> 00:29:16,499
voxel location itself so we would kind

631
00:29:13,960 --> 00:29:19,179
of need to compute the voxel center P

632
00:29:16,499 --> 00:29:21,740
before we could apply a displacement to

633
00:29:19,179 --> 00:29:23,750
it but again

634
00:29:21,740 --> 00:29:25,579
we could sort of cross that bridge we

635
00:29:23,750 --> 00:29:29,720
come to it we could even pretend that

636
00:29:25,579 --> 00:29:32,089
we're sending down a full floating-point

637
00:29:29,720 --> 00:29:34,970
you know three float texture here or

638
00:29:32,089 --> 00:29:37,639
something like that for the moment and

639
00:29:34,970 --> 00:29:39,319
you know avoid the encoding problem and

640
00:29:37,640 --> 00:29:41,630
then do the encoding problem off of the

641
00:29:39,319 --> 00:29:43,490
box was a separate step but if we assume

642
00:29:41,630 --> 00:29:57,290
some how we're gonna get a light P out

643
00:29:43,490 --> 00:29:59,779
of this right I maybe I'll call this so

644
00:29:57,289 --> 00:30:02,808
we get a light piano this somehow once

645
00:29:59,779 --> 00:30:06,259
we have the light probe position then

646
00:30:02,808 --> 00:30:10,009
when we actually get the light data here

647
00:30:06,259 --> 00:30:12,440
we have a average amount of light that

648
00:30:10,009 --> 00:30:15,079
we compute and a position that that

649
00:30:12,440 --> 00:30:20,210
light is coming from right as part of

650
00:30:15,079 --> 00:30:22,939
the fetch and so if we did that then in

651
00:30:20,210 --> 00:30:26,929
theory we could adjust how that light is

652
00:30:22,940 --> 00:30:29,539
falling on us based on our positional

653
00:30:26,929 --> 00:30:31,610
offset now I'm trying to think does that

654
00:30:29,539 --> 00:30:33,619
really help us you know it might not it

655
00:30:31,609 --> 00:30:34,939
might require in order to do this

656
00:30:33,619 --> 00:30:39,049
properly we might have to do these

657
00:30:34,940 --> 00:30:40,670
fetches without the blending right so

658
00:30:39,049 --> 00:30:43,730
that we then compute the lighting on

659
00:30:40,670 --> 00:30:45,259
each of the probes separately and then

660
00:30:43,730 --> 00:30:47,630
blend the result of the lighting

661
00:30:45,259 --> 00:30:49,220
computation together and I don't really

662
00:30:47,630 --> 00:30:52,700
know like just thinking it through it's

663
00:30:49,220 --> 00:30:55,339
hard for me to really tell what I think

664
00:30:52,700 --> 00:30:57,019
would really be happening there and when

665
00:30:55,339 --> 00:30:58,849
we look at what the fall-off of the

666
00:30:57,019 --> 00:31:00,529
lighting is going to be in terms of it

667
00:30:58,849 --> 00:31:03,558
falling on the surface here you know we

668
00:31:00,529 --> 00:31:05,420
kind of can add in the fall-off based on

669
00:31:03,558 --> 00:31:09,710
how far we are from the probe

670
00:31:05,420 --> 00:31:11,750
potentially but again that that's very

671
00:31:09,710 --> 00:31:14,179
difficult for us to really imagine

672
00:31:11,750 --> 00:31:16,339
because we don't you know the light

673
00:31:14,179 --> 00:31:17,390
itself contributions falling off so I

674
00:31:16,339 --> 00:31:18,740
mean just looking at this I'm just

675
00:31:17,390 --> 00:31:19,670
thinking like what am I really what

676
00:31:18,740 --> 00:31:22,460
would I really do with that and I don't

677
00:31:19,670 --> 00:31:25,240
know so again I think just looking at

678
00:31:22,460 --> 00:31:29,360
this I can't really tell what I would do

679
00:31:25,240 --> 00:31:31,400
without turning off the sort of the

680
00:31:29,359 --> 00:31:33,289
interpolation on the voxel and actually

681
00:31:31,400 --> 00:31:35,430
just getting literal values out of it

682
00:31:33,289 --> 00:31:37,849
right and doing the

683
00:31:35,430 --> 00:31:37,850
myself

684
00:31:50,920 --> 00:31:55,190
yeah I mean I just unfortunately can't

685
00:31:53,900 --> 00:32:00,170
really I just can't really think of

686
00:31:55,190 --> 00:32:01,190
anything else to do there and again you

687
00:32:00,170 --> 00:32:02,660
can see why I don't want to do it

688
00:32:01,190 --> 00:32:04,850
because the number of texter fetches

689
00:32:02,660 --> 00:32:07,160
just goes up so incredibly much each one

690
00:32:04,849 --> 00:32:09,669
of these is like an 8 way texture

691
00:32:07,160 --> 00:32:09,670
catcher right

692
00:32:29,200 --> 00:32:32,950
yeah I don't know

693
00:32:36,710 --> 00:32:40,850
I'm trying to think in my head if

694
00:32:39,138 --> 00:32:42,528
there's anything that I'm like missing

695
00:32:40,849 --> 00:32:44,808
that would make this process smoother

696
00:32:42,528 --> 00:32:46,548
but I just don't see it because again

697
00:32:44,808 --> 00:32:49,368
like what we what we're trying to do

698
00:32:46,548 --> 00:32:51,499
fundamentally speaking is use the

699
00:32:49,368 --> 00:32:53,569
position of the pixel of the fragment

700
00:32:51,499 --> 00:32:56,600
the world space position of the fragment

701
00:32:53,569 --> 00:32:59,418
that's being lit to compute a lighting

702
00:32:56,599 --> 00:33:02,269
equation that actually properly responds

703
00:32:59,419 --> 00:33:04,669
to its position relative to the wherever

704
00:33:02,269 --> 00:33:08,058
the light was sampled and the problem is

705
00:33:04,669 --> 00:33:12,288
that when we if we just do a trilinear

706
00:33:08,058 --> 00:33:15,499
filter on what we know these values are

707
00:33:12,288 --> 00:33:17,298
I just it doesn't seem to really I I

708
00:33:15,499 --> 00:33:19,970
don't think that's going to interpolate

709
00:33:17,298 --> 00:33:21,859
as well as we need it to interpolate and

710
00:33:19,970 --> 00:33:24,589
that's why we're seeing so many weird

711
00:33:21,859 --> 00:33:27,349
like artifacts there we need a cleaner

712
00:33:24,589 --> 00:33:30,859
way of interpreting this lighting right

713
00:33:27,349 --> 00:33:33,259
we need some and it probably wants to be

714
00:33:30,859 --> 00:33:35,240
more radial because lighting in general

715
00:33:33,259 --> 00:33:38,538
tends to create radial patterns and

716
00:33:35,240 --> 00:33:42,109
things not you know not square patterns

717
00:33:38,538 --> 00:33:44,470
you know and so it just I don't really

718
00:33:42,109 --> 00:33:44,469
know

719
00:33:53,759 --> 00:33:58,589
I don't really know how we're gonna

720
00:33:55,710 --> 00:34:00,179
solve that without again like I know the

721
00:33:58,589 --> 00:34:02,240
way to write the really large version of

722
00:34:00,179 --> 00:34:06,169
it I just don't know if that's tractable

723
00:34:02,240 --> 00:34:09,570
we could do something where we compute

724
00:34:06,169 --> 00:34:15,780
things that do interpolate properly in

725
00:34:09,570 --> 00:34:19,109
linear like maybe like we use I mean the

726
00:34:15,780 --> 00:34:21,599
nice thing about the the light key thing

727
00:34:19,108 --> 00:34:24,319
is it's sort of a distance value in a

728
00:34:21,599 --> 00:34:26,820
sense right and so the distance value

729
00:34:24,320 --> 00:34:29,159
would give us a way to interpolate these

730
00:34:26,820 --> 00:34:33,200
things that maybe makes a little bit

731
00:34:29,159 --> 00:34:33,200
more sense so

732
00:35:00,230 --> 00:35:06,329
the thought press I'm going through in

733
00:35:02,579 --> 00:35:09,389
my head is that when we interpolate

734
00:35:06,329 --> 00:35:11,429
things in a bilinear fashion right the

735
00:35:09,389 --> 00:35:13,920
thing if we actually interpolate the

736
00:35:11,429 --> 00:35:19,099
output value so like the color of the

737
00:35:13,920 --> 00:35:19,099
light or whatever or the intensity of it

738
00:35:19,190 --> 00:35:25,170
interpolating the output value we will

739
00:35:22,440 --> 00:35:30,269
get the obviously like obvious trilinear

740
00:35:25,170 --> 00:35:32,880
artifacts right so all of the way in

741
00:35:30,269 --> 00:35:37,230
which you will see the edges will look

742
00:35:32,880 --> 00:35:39,240
like a sort of you know it will look

743
00:35:37,230 --> 00:35:42,990
like a bilinear filter it will have the

744
00:35:39,239 --> 00:35:46,289
rectangular pattern of a bilinear filter

745
00:35:42,989 --> 00:35:47,969
like you saw and it's you know trilinear

746
00:35:46,289 --> 00:35:49,800
is just doing that in 3d so you'll get

747
00:35:47,969 --> 00:35:51,689
that vertically as well as you would get

748
00:35:49,800 --> 00:35:54,780
it in the plane right but you see those

749
00:35:51,690 --> 00:35:56,880
sort of color washes that end up having

750
00:35:54,780 --> 00:35:58,620
coronary artifacts to them like lines

751
00:35:56,880 --> 00:36:00,780
going through them or coroner's going

752
00:35:58,619 --> 00:36:02,369
through them and you saw that when we

753
00:36:00,780 --> 00:36:07,290
were hopping through you can see it very

754
00:36:02,369 --> 00:36:11,670
obviously and so the question is if we

755
00:36:07,289 --> 00:36:13,679
were to interpolate something that

756
00:36:11,670 --> 00:36:15,619
actually didn't have that property like

757
00:36:13,679 --> 00:36:19,139
this is kind of where I'm going my head

758
00:36:15,619 --> 00:36:21,389
if instead of falling down to zero and

759
00:36:19,139 --> 00:36:23,609
actually producing the output value if

760
00:36:21,389 --> 00:36:25,109
instead we were truck we did something

761
00:36:23,610 --> 00:36:26,880
that looked more like a signed distance

762
00:36:25,110 --> 00:36:33,380
field so something that was more saying

763
00:36:26,880 --> 00:36:38,280
how far away am i from this thing that

764
00:36:33,380 --> 00:36:43,460
maybe would allow us to create an

765
00:36:38,280 --> 00:36:43,460
interpolation that works better

766
00:36:48,449 --> 00:36:54,069
and so I you know I don't really know if

767
00:36:52,570 --> 00:36:57,240
that's something we can construct for

768
00:36:54,070 --> 00:36:57,240
lighting but it might be

769
00:37:09,099 --> 00:37:14,179
you know it might be it might be that

770
00:37:12,320 --> 00:37:16,130
that is something that we could use let

771
00:37:14,179 --> 00:37:19,549
me run this one more time sorry I want

772
00:37:16,130 --> 00:37:23,110
to see so given exactly what we have

773
00:37:19,550 --> 00:37:23,110
right now I'm just curious

774
00:37:23,679 --> 00:37:29,869
we have my turbo C I downloaded turbo

775
00:37:28,219 --> 00:37:34,179
see the old turbo C by the way of the

776
00:37:29,869 --> 00:37:34,179
weekend I wanted to take a look at it um

777
00:37:36,309 --> 00:37:48,049
so as I'm like kind of hopping through

778
00:37:39,170 --> 00:37:49,130
here right if I am to turn back on that

779
00:37:48,050 --> 00:37:52,960
trailer I want to look at these

780
00:37:49,130 --> 00:37:52,960
artifacts a little bit more closely I

781
00:37:54,460 --> 00:38:00,519
also want to go make sure filling our

782
00:37:56,809 --> 00:38:00,519
voxel up in as much to be should be bit

783
00:38:09,159 --> 00:38:13,269
in my head and I can't see it

784
00:38:29,590 --> 00:38:34,210
so if we take a look here at the

785
00:38:31,780 --> 00:38:37,269
artifacts you know and you can see

786
00:38:34,210 --> 00:38:39,550
hopefully what I'm talking about how you

787
00:38:37,269 --> 00:38:44,650
know even inside an area that's

788
00:38:39,550 --> 00:38:47,289
relatively subtle you can see the sort

789
00:38:44,650 --> 00:38:48,519
of stair-stepping patterns that you get

790
00:38:47,289 --> 00:38:50,320
there

791
00:38:48,519 --> 00:38:55,119
and when you move over to someplace

792
00:38:50,320 --> 00:39:00,430
that's that's gonna be sort of more dark

793
00:38:55,119 --> 00:39:05,950
like here or like there right you can

794
00:39:00,429 --> 00:39:09,730
really see the way it creates a box-like

795
00:39:05,949 --> 00:39:11,230
version of this thing right so you know

796
00:39:09,730 --> 00:39:13,960
when you look at a region that doesn't

797
00:39:11,230 --> 00:39:20,170
have lighting you get like this sort of

798
00:39:13,960 --> 00:39:24,570
boxy version of the voxel and it just

799
00:39:20,170 --> 00:39:27,329
isn't you know it just isn't the the

800
00:39:24,570 --> 00:39:32,140
sort of fall-off pattern that we want

801
00:39:27,329 --> 00:39:32,559
however that is because it goes down to

802
00:39:32,139 --> 00:39:34,809
zero

803
00:39:32,559 --> 00:39:37,299
I think in those areas and it can't

804
00:39:34,809 --> 00:39:43,469
really produce it's not something that

805
00:39:37,300 --> 00:39:46,660
can produce a rounded sort of fall-off

806
00:39:43,469 --> 00:39:49,209
in the area that we're talking about so

807
00:39:46,659 --> 00:39:53,319
what I'm wondering is could we use an

808
00:39:49,210 --> 00:39:55,990
interpolation in that what some value we

809
00:39:53,320 --> 00:39:57,519
interpolate that is in linear space but

810
00:39:55,989 --> 00:40:01,209
that when you interpolate it with a

811
00:39:57,519 --> 00:40:11,170
trilinear filter produces a more rounded

812
00:40:01,210 --> 00:40:12,550
fall-off right and so thinking about

813
00:40:11,170 --> 00:40:13,990
that like I just want to draw this out

814
00:40:12,550 --> 00:40:16,480
and see if there's some way we can tweak

815
00:40:13,989 --> 00:40:18,189
it to basically not have to do anything

816
00:40:16,480 --> 00:40:23,800
too much more complicated than what we

817
00:40:18,190 --> 00:40:27,119
are doing and so what I'm thinking here

818
00:40:23,800 --> 00:40:27,119
is like

819
00:40:41,440 --> 00:40:54,970
what I'm thinking here it's like if you

820
00:40:43,480 --> 00:40:59,320
imagine a typical bilinear filter what

821
00:40:54,969 --> 00:41:02,789
we would get at a corner is if we have a

822
00:40:59,320 --> 00:41:05,789
one value here and zero values

823
00:41:02,789 --> 00:41:11,159
throughout then if you ask yourself

824
00:41:05,789 --> 00:41:15,509
where is the point five value in here

825
00:41:11,159 --> 00:41:17,969
then you know like looking through here

826
00:41:15,510 --> 00:41:23,230
that's gonna be the point five value

827
00:41:17,969 --> 00:41:26,739
right through here that's gonna be the

828
00:41:23,230 --> 00:41:28,719
point five value through here that's

829
00:41:26,739 --> 00:41:33,669
gonna be the point five value right and

830
00:41:28,719 --> 00:41:35,409
so as you look at how each of these oops

831
00:41:33,670 --> 00:41:36,960
no that's nuts wrong sorry that's gonna

832
00:41:35,409 --> 00:41:40,659
be zero

833
00:41:36,960 --> 00:41:45,280
that's gonna be 0.5 right and that's

834
00:41:40,659 --> 00:41:47,349
gonna be 0.25 right because looking at

835
00:41:45,280 --> 00:41:49,540
how this bilinear would work right

836
00:41:47,349 --> 00:41:51,639
between zero and one I'd get a point

837
00:41:49,539 --> 00:41:55,329
five here between zero and 1 I get a

838
00:41:51,639 --> 00:41:57,429
point five here this here will produce a

839
00:41:55,329 --> 00:41:59,920
zero so when we do but a linear linear

840
00:41:57,429 --> 00:42:01,299
between the point five and the zero or

841
00:41:59,920 --> 00:42:02,590
alternatively if you did the bilinear

842
00:42:01,300 --> 00:42:03,970
blend the other way it doesn't matter

843
00:42:02,590 --> 00:42:09,309
which way you go because this is a zero

844
00:42:03,969 --> 00:42:11,500
here as well this is an 0.25 and then if

845
00:42:09,309 --> 00:42:16,210
we further if we kept going on this

846
00:42:11,500 --> 00:42:16,900
right so if we looked back you know one

847
00:42:16,210 --> 00:42:20,730
more step

848
00:42:16,900 --> 00:42:26,789
that's an 0.75 right

849
00:42:20,730 --> 00:42:30,429
that's an point seven five there and

850
00:42:26,789 --> 00:42:32,500
this is a zero here so if we were to

851
00:42:30,429 --> 00:42:34,809
look at what we would get if we drop

852
00:42:32,500 --> 00:42:36,519
this down a zero halfway between zero

853
00:42:34,809 --> 00:42:38,679
it's like a point six two five right

854
00:42:36,519 --> 00:42:42,130
I'll do it on calc to make sure I'm not

855
00:42:38,679 --> 00:42:45,849
doing it wrong sorry in speed calc sweet

856
00:42:42,130 --> 00:42:50,190
crunch so if we are talking about a

857
00:42:45,849 --> 00:43:06,329
bilinear blend right between zero and

858
00:42:50,190 --> 00:43:06,329
0.75 that would be what 0.375 oops right

859
00:43:06,449 --> 00:43:16,509
so if we look at like the kind of the

860
00:43:08,739 --> 00:43:18,849
pattern of values here that's an O point

861
00:43:16,510 --> 00:43:22,380
one two five right

862
00:43:18,849 --> 00:43:29,319
I think halfway in between those two and

863
00:43:22,380 --> 00:43:31,030
this would be a 0.375 here so if you

864
00:43:29,320 --> 00:43:35,350
look at these values you can see that

865
00:43:31,030 --> 00:43:39,180
you basically get I think what amounts

866
00:43:35,349 --> 00:43:39,179
to a pattern that looks like this right

867
00:43:42,239 --> 00:43:51,119
coming through here I and so that's why

868
00:43:46,389 --> 00:43:55,210
you get I believe those those values of

869
00:43:51,119 --> 00:44:00,909
the you know just looking at what the

870
00:43:55,210 --> 00:44:05,199
values are that you pick up if you

871
00:44:00,909 --> 00:44:09,519
interpolate the light intensity directly

872
00:44:05,199 --> 00:44:20,699
and output it I think you just get these

873
00:44:09,519 --> 00:44:22,989
sort of corner looks like like that

874
00:44:20,699 --> 00:44:24,989
specifically because you know what ends

875
00:44:22,989 --> 00:44:27,489
up happening is the the voxel

876
00:44:24,989 --> 00:44:29,649
interpolation is just always going in

877
00:44:27,489 --> 00:44:32,649
these sort of linear waves and it's

878
00:44:29,650 --> 00:44:36,099
either it's directional in this way you

879
00:44:32,650 --> 00:44:38,380
know or in this way and so the question

880
00:44:36,099 --> 00:44:41,409
is you know could we somehow encode this

881
00:44:38,380 --> 00:44:42,840
such that when we interpolate it in this

882
00:44:41,409 --> 00:44:47,529
fashion

883
00:44:42,840 --> 00:44:50,230
that's not what we get right and so one

884
00:44:47,530 --> 00:44:51,550
way to look at it is if you took a look

885
00:44:50,230 --> 00:44:52,900
at what would happen in this bilinear

886
00:44:51,550 --> 00:44:55,840
filter if we had filled it with

887
00:44:52,900 --> 00:44:59,470
something else so let's suppose that we

888
00:44:55,840 --> 00:44:59,829
took the you know the values that we put

889
00:44:59,469 --> 00:45:02,859
in here

890
00:44:59,829 --> 00:45:04,329
and you know we wanted a sort of a

891
00:45:02,860 --> 00:45:07,370
distance based fall off or something

892
00:45:04,329 --> 00:45:09,469
like that here so we had a one

893
00:45:07,369 --> 00:45:11,449
in the light source here and we're

894
00:45:09,469 --> 00:45:15,349
saying it fell off to zero here so maybe

895
00:45:11,449 --> 00:45:18,259
that's exactly the same but here right

896
00:45:15,349 --> 00:45:21,289
we just we say no it we're gonna

897
00:45:18,260 --> 00:45:24,290
continue the distance fall-off so so

898
00:45:21,289 --> 00:45:28,119
instead of clamping it to zero we're

899
00:45:24,289 --> 00:45:31,489
actually gonna let it go negative right

900
00:45:28,119 --> 00:45:34,549
so if the thing was that the light

901
00:45:31,489 --> 00:45:37,639
fall-off was one along this then this is

902
00:45:34,550 --> 00:45:39,769
like the diagonal right so if it fell

903
00:45:37,639 --> 00:45:44,480
off one here we would expect it to also

904
00:45:39,769 --> 00:45:47,239
fall off one here right if this is if

905
00:45:44,480 --> 00:45:49,250
this is that distance you know so how

906
00:45:47,239 --> 00:45:51,679
far should it fall off going in that

907
00:45:49,250 --> 00:45:53,449
direction right and you know we don't

908
00:45:51,679 --> 00:45:54,710
know because we don't know where the

909
00:45:53,449 --> 00:45:56,149
light is necessarily coming from but if

910
00:45:54,710 --> 00:45:57,500
it's a one here then we assume it's kind

911
00:45:56,150 --> 00:46:01,460
of coming from maybe that direction or

912
00:45:57,500 --> 00:46:04,250
something like that right so this should

913
00:46:01,460 --> 00:46:06,349
actually be set to a negative value if

914
00:46:04,250 --> 00:46:09,320
we use Pythagorean theorem we say h

915
00:46:06,349 --> 00:46:14,539
squared equals you know a squared plus B

916
00:46:09,320 --> 00:46:17,600
squared here right if we assume that the

917
00:46:14,539 --> 00:46:18,949
light fall-off is 1 along here then

918
00:46:17,599 --> 00:46:21,139
effectively what we be saying is H

919
00:46:18,949 --> 00:46:29,389
squared equals you know 1 plus 1 I'm

920
00:46:21,139 --> 00:46:30,769
sorry - right so H equals root 2 so we

921
00:46:29,389 --> 00:46:34,039
would expect from here to here this

922
00:46:30,769 --> 00:46:40,119
should be like negative root 2 right I

923
00:46:34,039 --> 00:46:40,119
mean so it should be oops that

924
00:46:45,730 --> 00:46:49,780
and so if we allowed the lights to fall

925
00:46:47,889 --> 00:46:52,019
off in that fashion then what we would

926
00:46:49,780 --> 00:46:54,430
get is something quite different right

927
00:46:52,019 --> 00:46:59,170
depending on where you were in here you

928
00:46:54,429 --> 00:47:00,969
would actually drive this this would now

929
00:46:59,170 --> 00:47:02,559
could be contributing it before it

930
00:47:00,969 --> 00:47:04,209
wasn't it was just clamping it's

931
00:47:02,559 --> 00:47:05,679
actually essentially this would now be

932
00:47:04,210 --> 00:47:08,619
contributing to the shape of this

933
00:47:05,679 --> 00:47:12,969
function and it would create in theory

934
00:47:08,619 --> 00:47:15,130
anyway I think some actual pull right

935
00:47:12,969 --> 00:47:18,399
because you would actually be getting

936
00:47:15,130 --> 00:47:23,289
some real information from it about how

937
00:47:18,400 --> 00:47:24,789
far away you were right so the only

938
00:47:23,289 --> 00:47:26,619
thing I'm thinking here is yeah do we

939
00:47:24,789 --> 00:47:31,029
need to do something where we actually

940
00:47:26,619 --> 00:47:32,409
push those values in as more like a

941
00:47:31,030 --> 00:47:35,050
signed distance field like that we're

942
00:47:32,409 --> 00:47:37,750
basically counting how much light should

943
00:47:35,050 --> 00:47:41,280
be in there based on some kind of a V of

944
00:47:37,750 --> 00:47:45,190
a location of the voxel sort of a thing

945
00:47:41,280 --> 00:47:47,019
and again I just don't know I'm not sure

946
00:47:45,190 --> 00:47:49,809
how to do that quite properly but it's

947
00:47:47,019 --> 00:47:53,139
something to think about and so if we

948
00:47:49,809 --> 00:47:56,250
were to do something like that I guess

949
00:47:53,139 --> 00:47:58,509
the question is how would we do it right

950
00:47:56,250 --> 00:48:02,289
let me let me try and play with that a

951
00:47:58,510 --> 00:48:04,270
little bit and see what we get so first

952
00:48:02,289 --> 00:48:07,029
of all in our sampler when we have get

953
00:48:04,269 --> 00:48:09,670
irradiance or even when we're just

954
00:48:07,030 --> 00:48:11,380
looking these things up to begin with we

955
00:48:09,670 --> 00:48:13,269
kind of need those to be clamped now

956
00:48:11,380 --> 00:48:17,079
because they could be like information

957
00:48:13,269 --> 00:48:20,110
that would be negative like right so

958
00:48:17,079 --> 00:48:22,179
when we are in the actual fragment code

959
00:48:20,110 --> 00:48:26,559
here forget your radiance and we take a

960
00:48:22,179 --> 00:48:30,219
look at the light delight value that

961
00:48:26,559 --> 00:48:32,739
comes in we compute that light value

962
00:48:30,219 --> 00:48:35,409
here by taking the intensity right and

963
00:48:32,739 --> 00:48:37,869
we we use the light RGB and we compute

964
00:48:35,409 --> 00:48:40,269
the color that way if we were to

965
00:48:37,869 --> 00:48:42,699
actually take that intensity instead and

966
00:48:40,269 --> 00:48:44,800
clamp it so you can't have a negative

967
00:48:42,699 --> 00:48:47,789
intensity I think that would do what we

968
00:48:44,800 --> 00:48:47,789
needed to do

969
00:48:51,090 --> 00:48:58,930
probably it's worth noting here that we

970
00:48:56,139 --> 00:49:00,309
have additional problems now that I look

971
00:48:58,929 --> 00:49:03,309
at this because if you look at what

972
00:49:00,309 --> 00:49:07,590
we're doing here too we have what is

973
00:49:03,309 --> 00:49:12,820
effectively non premultiplied alpha

974
00:49:07,590 --> 00:49:17,559
right which again does not distribute

975
00:49:12,820 --> 00:49:19,750
properly across box filtering just the

976
00:49:17,559 --> 00:49:21,400
same way like with our sprites and so

977
00:49:19,750 --> 00:49:23,710
one problem that we have there is that

978
00:49:21,400 --> 00:49:26,410
if we do want to encode you know for

979
00:49:23,710 --> 00:49:28,599
trying to have a better encoding of the

980
00:49:26,409 --> 00:49:32,139
light intensity by using that sort of an

981
00:49:28,599 --> 00:49:36,400
HDR format that in and of itself is also

982
00:49:32,139 --> 00:49:40,179
bad right so we kind of have a nasty

983
00:49:36,400 --> 00:49:44,200
problem there this just keeps getting

984
00:49:40,179 --> 00:49:46,029
worse right because multiplying the

985
00:49:44,199 --> 00:49:48,159
alpha which is affected the light

986
00:49:46,030 --> 00:49:50,230
intensity right multiplying that after

987
00:49:48,159 --> 00:49:52,509
the fact that doesn't actually work the

988
00:49:50,230 --> 00:49:58,690
trilinear that that's an artifact as

989
00:49:52,510 --> 00:50:01,360
well so there's just a lot of really

990
00:49:58,690 --> 00:50:04,750
nasty stuff going on here

991
00:50:01,360 --> 00:50:05,019
and I'm not really sure what to do about

992
00:50:04,750 --> 00:50:07,230
it

993
00:50:05,019 --> 00:50:07,230
right

994
00:50:30,500 --> 00:50:38,190
yeah I'm not really sure so if we were

995
00:50:35,489 --> 00:50:39,838
to take let's just try a couple things

996
00:50:38,190 --> 00:50:41,369
though I just I want to play around with

997
00:50:39,838 --> 00:50:44,219
it because I'm I'm really feeling like

998
00:50:41,369 --> 00:50:46,530
you know this is incredibly tricky and

999
00:50:44,219 --> 00:50:48,269
I'm just not sure I can think it through

1000
00:50:46,530 --> 00:50:49,798
in my head and have any really good idea

1001
00:50:48,269 --> 00:50:53,369
about it so let's try playing with a

1002
00:50:49,798 --> 00:50:56,068
couple things here so let's suppose the

1003
00:50:53,369 --> 00:50:59,280
light intensity could be negative right

1004
00:50:56,068 --> 00:51:01,369
so in here what I want to do is take the

1005
00:50:59,280 --> 00:51:05,609
light value a and I want to clamp that

1006
00:51:01,369 --> 00:51:09,869
right so I want to say look this could

1007
00:51:05,608 --> 00:51:11,630
come in negative so what I'm going to do

1008
00:51:09,869 --> 00:51:15,780
is I'm going to clamp that alpha value

1009
00:51:11,630 --> 00:51:18,329
right when it comes in and so when we're

1010
00:51:15,780 --> 00:51:20,250
doing that sampling I want to take and

1011
00:51:18,329 --> 00:51:22,769
have a way for this alpha value this

1012
00:51:20,250 --> 00:51:25,108
light VA there I want that to be

1013
00:51:22,769 --> 00:51:26,849
possibly negative when we actually

1014
00:51:25,108 --> 00:51:28,440
sample it like when we're doing this

1015
00:51:26,849 --> 00:51:31,260
sampling here you know it can't really

1016
00:51:28,440 --> 00:51:35,789
be negative because we're encoding it

1017
00:51:31,260 --> 00:51:37,619
somehow right that doesn't allow for

1018
00:51:35,789 --> 00:51:41,910
negatives and so what I would rather do

1019
00:51:37,619 --> 00:51:44,400
there is say well okay when we look at

1020
00:51:41,909 --> 00:51:49,230
the light a VI guess what we really want

1021
00:51:44,400 --> 00:51:51,930
to do is bias it first so we want some

1022
00:51:49,230 --> 00:51:53,849
way of saying that this is actually a

1023
00:51:51,929 --> 00:51:57,239
range of light values that can include

1024
00:51:53,849 --> 00:51:58,588
negatives you know I'm saying so we're

1025
00:51:57,239 --> 00:52:00,419
essentially saying look this number

1026
00:51:58,588 --> 00:52:04,038
comes in between 0 &amp; 1 but what we

1027
00:52:00,420 --> 00:52:07,769
really want right is we want this to be

1028
00:52:04,039 --> 00:52:09,390
something that can range between like

1029
00:52:07,769 --> 00:52:11,699
negative 1 &amp; 1 right it's like a bi

1030
00:52:09,389 --> 00:52:16,409
normal number so we're like doing the

1031
00:52:11,699 --> 00:52:20,759
bias of multiply the alpha by 2 now goes

1032
00:52:16,409 --> 00:52:23,399
from 0 to 2 and then subtract 1 so if we

1033
00:52:20,760 --> 00:52:25,410
imagine we encode the Alpha that way now

1034
00:52:23,400 --> 00:52:28,740
we can encode negative values into our

1035
00:52:25,409 --> 00:52:30,808
light intensities and then furthermore

1036
00:52:28,739 --> 00:52:34,229
when we're actually encoding these here

1037
00:52:30,809 --> 00:52:36,660
on on the head end I believe we've got a

1038
00:52:34,230 --> 00:52:37,289
thing that does the encoding somewhere

1039
00:52:36,659 --> 00:52:41,819
know

1040
00:52:37,289 --> 00:52:43,860
being here I mean here we call like this

1041
00:52:41,820 --> 00:52:46,170
irradiance packed value so the

1042
00:52:43,860 --> 00:52:50,220
irradiance packed value wherever that

1043
00:52:46,170 --> 00:52:52,769
happens it has to respect the way that

1044
00:52:50,219 --> 00:52:56,730
the light intensity gets folded in here

1045
00:52:52,769 --> 00:52:59,239
the luck what I just said right so what

1046
00:52:56,730 --> 00:53:01,980
has to happen there is when the light

1047
00:52:59,239 --> 00:53:05,369
gets packed in here we take a look at

1048
00:53:01,980 --> 00:53:07,920
the maximum value of all of these and we

1049
00:53:05,369 --> 00:53:09,900
then have to say that we are going to

1050
00:53:07,920 --> 00:53:14,280
normalize by whatever that max value is

1051
00:53:09,900 --> 00:53:15,660
and again now I want this to be able to

1052
00:53:14,280 --> 00:53:17,280
be negative right

1053
00:53:15,659 --> 00:53:19,799
which is kind of annoying but that's

1054
00:53:17,280 --> 00:53:21,570
what I want so this can't be the case

1055
00:53:19,800 --> 00:53:23,730
anymore we basically have to just say

1056
00:53:21,570 --> 00:53:25,309
look if it's not actually zero we're

1057
00:53:23,730 --> 00:53:28,740
going to normalize even if it's negative

1058
00:53:25,309 --> 00:53:30,329
and go from there and so what we need to

1059
00:53:28,739 --> 00:53:41,189
do here is say let's take the maximum

1060
00:53:30,329 --> 00:53:46,579
absolute value we're going to normalize

1061
00:53:41,190 --> 00:53:49,409
by that and then push that back in right

1062
00:53:46,579 --> 00:53:51,750
so whatever the maximum value is even if

1063
00:53:49,409 --> 00:53:54,839
the maximum value was negative then

1064
00:53:51,750 --> 00:53:57,719
we're going to to push that in there

1065
00:53:54,840 --> 00:54:00,260
right and so the problem with this again

1066
00:53:57,719 --> 00:54:03,659
is that the negative values of the light

1067
00:54:00,260 --> 00:54:05,640
source like we kind of can't really

1068
00:54:03,659 --> 00:54:08,219
allow one to be positive and one to be

1069
00:54:05,639 --> 00:54:09,809
negative right that wouldn't work so

1070
00:54:08,219 --> 00:54:18,809
this is actually in fact I guess you

1071
00:54:09,809 --> 00:54:20,909
could do it this way so we're going to

1072
00:54:18,809 --> 00:54:24,509
normalize the one and if the light

1073
00:54:20,909 --> 00:54:25,859
happens to be negative I guess in one

1074
00:54:24,510 --> 00:54:28,740
direction and positive in the other we

1075
00:54:25,860 --> 00:54:31,980
just get problems there so maybe don't

1076
00:54:28,739 --> 00:54:33,359
do that right but if we try to do

1077
00:54:31,980 --> 00:54:35,099
something like this we would grab out

1078
00:54:33,360 --> 00:54:36,960
the absolute value we would invert it

1079
00:54:35,099 --> 00:54:38,039
based on that and if I guess now I can

1080
00:54:36,960 --> 00:54:42,480
leave this this way it doesn't really

1081
00:54:38,039 --> 00:54:44,460
matter we can do our scaling and then

1082
00:54:42,480 --> 00:54:46,940
these light values have to be sort of

1083
00:54:44,460 --> 00:54:49,440
absolute values right at that point and

1084
00:54:46,940 --> 00:54:51,119
what we would want to do

1085
00:54:49,440 --> 00:54:54,358
in fact I guess another way to look at

1086
00:54:51,119 --> 00:54:56,579
this would be what we want to do now is

1087
00:54:54,358 --> 00:54:58,978
figure out was this light generally

1088
00:54:56,579 --> 00:55:00,979
negative or generally positive and so I

1089
00:54:58,978 --> 00:55:04,739
guess another way to look at it would be

1090
00:55:00,978 --> 00:55:08,399
we need to take the maximum value but we

1091
00:55:04,739 --> 00:55:10,619
need to know what the sign was this is

1092
00:55:08,400 --> 00:55:11,009
awful I hate everything about what we're

1093
00:55:10,619 --> 00:55:14,039
doing

1094
00:55:11,009 --> 00:55:16,380
I just hate lighting in general this is

1095
00:55:14,039 --> 00:55:19,039
why I like rate racers they don't have

1096
00:55:16,380 --> 00:55:19,039
all this nonsense

1097
00:55:43,260 --> 00:55:47,070
yeah I'm really not sure how to how to

1098
00:55:45,570 --> 00:55:48,830
look at that cleanly because all we have

1099
00:55:47,070 --> 00:55:51,180
coming in here are lighting values and

1100
00:55:48,829 --> 00:55:54,329
what we want to do an irradiance pack

1101
00:55:51,179 --> 00:55:55,858
right we would need to have more

1102
00:55:54,329 --> 00:55:57,659
information to figure out how we would

1103
00:55:55,858 --> 00:55:59,279
ever make these lights actually come in

1104
00:55:57,659 --> 00:56:00,750
this way so we can't we would have to

1105
00:55:59,280 --> 00:56:02,850
change the way we're computing and maybe

1106
00:56:00,750 --> 00:56:05,369
this is still a good idea like I don't

1107
00:56:02,849 --> 00:56:07,650
know it could be but the problem is I

1108
00:56:05,369 --> 00:56:09,090
don't even know how to test it without

1109
00:56:07,650 --> 00:56:10,260
actually writing the entire thing

1110
00:56:09,090 --> 00:56:11,910
assuming that that's what we were

1111
00:56:10,260 --> 00:56:14,060
actually doing we could have to base an

1112
00:56:11,909 --> 00:56:16,469
entire algorithm around that concept

1113
00:56:14,059 --> 00:56:18,119
because in order to even figure out what

1114
00:56:16,469 --> 00:56:20,909
you stuff in there you would need some

1115
00:56:18,119 --> 00:56:23,369
way of doing that and I don't know how

1116
00:56:20,909 --> 00:56:25,739
we would do that so that's like really

1117
00:56:23,369 --> 00:56:28,769
hard even to experiment with we could

1118
00:56:25,739 --> 00:56:36,179
construct a fake case and maybe that's

1119
00:56:28,769 --> 00:56:37,380
the right thing to do to test it just

1120
00:56:36,179 --> 00:56:40,349
wanna make sure this still runs the old

1121
00:56:37,380 --> 00:56:42,780
way yeah um so you know maybe I could do

1122
00:56:40,349 --> 00:56:44,549
that maybe I could test it in a fake

1123
00:56:42,780 --> 00:56:47,760
case first see what it looks like with

1124
00:56:44,550 --> 00:56:50,250
that fall-off and go from there I don't

1125
00:56:47,760 --> 00:56:52,230
know probably worth trying I guess so if

1126
00:56:50,250 --> 00:56:58,409
we were to pretend that we wanted to do

1127
00:56:52,230 --> 00:57:08,820
that right and we so we ran things this

1128
00:56:58,409 --> 00:57:10,858
way so let's suppose we did this this

1129
00:57:08,820 --> 00:57:19,490
stuff things into the voxel directly

1130
00:57:10,858 --> 00:57:23,179
I believe I bracketed that properly

1131
00:57:19,489 --> 00:57:23,179
oops no I haven't

1132
00:57:24,099 --> 00:57:38,269
because the problem is this has to

1133
00:57:26,059 --> 00:57:40,339
happen in the other case as well so let

1134
00:57:38,268 --> 00:57:42,678
me see if I can get this back to just

1135
00:57:40,338 --> 00:57:44,619
using stuffed voxels so now we're not

1136
00:57:42,679 --> 00:57:46,999
like looking at the light probes at all

1137
00:57:44,619 --> 00:57:49,640
and we should just be sticking the light

1138
00:57:46,998 --> 00:57:52,009
prayer values in here directly of course

1139
00:57:49,639 --> 00:57:54,949
the problem is now the light distance

1140
00:57:52,009 --> 00:58:00,019
fall-off is wrong as well so that's a

1141
00:57:54,949 --> 00:58:03,139
little bit of an issue but we go in here

1142
00:58:00,018 --> 00:58:05,568
and take what lighter see so if I just

1143
00:58:03,139 --> 00:58:07,818
stuff this one directly so let's say

1144
00:58:05,568 --> 00:58:09,798
this is 3.0 F now which is what it was

1145
00:58:07,818 --> 00:58:13,548
before because this is being done inside

1146
00:58:09,798 --> 00:58:18,079
the UVW space of the voxel again don't

1147
00:58:13,548 --> 00:58:20,630
really know why we're getting oh I do

1148
00:58:18,079 --> 00:58:22,369
because the irradiance pack we don't

1149
00:58:20,630 --> 00:58:26,289
call a radiance pack here so the the

1150
00:58:22,369 --> 00:58:29,959
actual value of the light is not

1151
00:58:26,289 --> 00:58:31,609
accounted for there so I suppose here

1152
00:58:29,958 --> 00:58:37,938
where we do the light see this should

1153
00:58:31,608 --> 00:58:41,119
actually be whatever the light intensity

1154
00:58:37,938 --> 00:58:43,358
is divided by that max I mean it's that

1155
00:58:41,119 --> 00:58:43,358
true

1156
00:58:51,059 --> 00:58:58,420
so that's 0.1 times the max light

1157
00:58:54,639 --> 00:59:00,009
intensity and so you can see the problem

1158
00:58:58,420 --> 00:59:02,139
here is we have to divide by the max

1159
00:59:00,009 --> 00:59:04,659
light intensity here because we don't

1160
00:59:02,139 --> 00:59:06,909
call the radiance pack we just directly

1161
00:59:04,659 --> 00:59:09,009
stuff the value now what I probably

1162
00:59:06,909 --> 00:59:12,399
should do is get rid of this and call

1163
00:59:09,009 --> 00:59:13,719
irradiance pack right but I'm gonna play

1164
00:59:12,400 --> 00:59:17,019
around with this first so I don't really

1165
00:59:13,719 --> 00:59:19,210
want to do that with that tune a 32 so

1166
00:59:17,018 --> 00:59:22,209
it's a bit ugly but we'll go ahead and

1167
00:59:19,210 --> 00:59:24,818
run it here and so here is us stuffing

1168
00:59:22,210 --> 00:59:30,989
the voxel directly and hopefully that

1169
00:59:24,818 --> 00:59:33,969
produces a similar a little like yeah

1170
00:59:30,989 --> 00:59:36,818
you can see our little like light sphere

1171
00:59:33,969 --> 00:59:39,068
that we're moving around now right and

1172
00:59:36,818 --> 00:59:41,528
so my question is if I was to stuff the

1173
00:59:39,068 --> 00:59:45,179
values directly and use a bias value in

1174
00:59:41,528 --> 00:59:49,900
here so if I go into Z bias program

1175
00:59:45,179 --> 00:59:51,848
inside renderer and we actually like I

1176
00:59:49,900 --> 00:59:54,999
just put back in this code that I have

1177
00:59:51,849 --> 00:59:58,479
here where we clamp but we actually bias

1178
00:59:54,998 --> 01:00:02,288
the number so now that number can be

1179
00:59:58,478 --> 01:00:03,728
negative and we'll get it first now is

1180
01:00:02,289 --> 01:00:06,069
nonsense because we're not actually

1181
01:00:03,728 --> 01:00:08,169
encoding the values that's in that way

1182
01:00:06,068 --> 01:00:09,849
we're unpacking them as if we did but

1183
01:00:08,170 --> 01:00:10,659
we're not actually encoding them that

1184
01:00:09,849 --> 01:00:14,039
way

1185
01:00:10,659 --> 01:00:17,078
then we'll get garbage there right but

1186
01:00:14,039 --> 01:00:19,239
if I now go over here and actually try

1187
01:00:17,079 --> 01:00:23,019
to encode the values that way so we have

1188
01:00:19,239 --> 01:00:25,478
sort of a like light fall-off here and

1189
01:00:23,018 --> 01:00:28,778
what I want to do is rather than

1190
01:00:25,478 --> 01:00:32,710
clamping this light value I want to just

1191
01:00:28,778 --> 01:00:36,998
let it go right so now we allow the

1192
01:00:32,710 --> 01:00:41,199
light values to become negative and what

1193
01:00:36,998 --> 01:00:43,838
I want to do is clamp between like zero

1194
01:00:41,199 --> 01:00:45,848
and one sorry negative 1 in 1 instead of

1195
01:00:43,838 --> 01:00:49,268
0 and 1 so we don't have that hard fall

1196
01:00:45,849 --> 01:00:51,640
off and we can actually get negative

1197
01:00:49,268 --> 01:00:52,988
values in there as well and then we can

1198
01:00:51,639 --> 01:00:54,568
sort of play with it as a slot that's

1199
01:00:52,989 --> 01:00:56,949
see if we can create an interesting

1200
01:00:54,568 --> 01:00:59,909
version of a signed distance field there

1201
01:00:56,949 --> 01:01:04,028
in some way right

1202
01:00:59,909 --> 01:01:08,739
okay so we want to know the distance

1203
01:01:04,028 --> 01:01:10,750
from a thing that we actually are and so

1204
01:01:08,739 --> 01:01:15,399
if you look at this this is an inverse

1205
01:01:10,750 --> 01:01:18,219
distance of a thing so that is pretty

1206
01:01:15,400 --> 01:01:23,019
much correct it's multiplied by a value

1207
01:01:18,219 --> 01:01:31,028
but otherwise it's the same right and if

1208
01:01:23,018 --> 01:01:32,858
we go through and look yeah like we've

1209
01:01:31,028 --> 01:01:34,599
got the total here we're just summing so

1210
01:01:32,858 --> 01:01:41,108
I you know in theory I think this should

1211
01:01:34,599 --> 01:01:42,849
be okay and so what I think all we

1212
01:01:41,108 --> 01:01:45,730
really need to do there is actually

1213
01:01:42,849 --> 01:01:47,890
encode the value right so we're taking

1214
01:01:45,730 --> 01:01:54,909
the inverse total here to renormalize

1215
01:01:47,889 --> 01:01:58,719
this thing and I guess we maybe don't

1216
01:01:54,909 --> 01:02:00,608
really want to do that but when we do

1217
01:01:58,719 --> 01:02:03,909
that once we have it normalized we

1218
01:02:00,608 --> 01:02:05,880
should be able to map it from 0 2 from

1219
01:02:03,909 --> 01:02:08,170
negative 1 to 1

1220
01:02:05,880 --> 01:02:23,230
pretty straight forward from there

1221
01:02:08,170 --> 01:02:29,139
so I think all we need to do is like is

1222
01:02:23,230 --> 01:02:32,818
this so basically we just clamp this

1223
01:02:29,139 --> 01:02:37,500
these alpha values into range there and

1224
01:02:32,818 --> 01:02:37,500
I think that's all we really need

1225
01:02:40,869 --> 01:02:45,759
we don't even really need to clamp them

1226
01:02:43,469 --> 01:02:49,149
because looking at it we just kind of

1227
01:02:45,760 --> 01:02:53,250
divide them anyway so I think all we

1228
01:02:49,150 --> 01:02:56,440
really need to do is just do the bias

1229
01:02:53,250 --> 01:02:58,900
right so all we really need to do is say

1230
01:02:56,440 --> 01:03:02,409
alright we're basically just going to do

1231
01:02:58,900 --> 01:03:08,460
this negative one plus two kind of thing

1232
01:03:02,409 --> 01:03:08,460
so if we just say all right we've got a

1233
01:03:10,739 --> 01:03:19,119
we've got a value that'll range from

1234
01:03:12,940 --> 01:03:27,130
negative one to one now and we just want

1235
01:03:19,119 --> 01:03:35,159
to shrink that down right and move it up

1236
01:03:27,130 --> 01:03:35,160
oops I think that's it

1237
01:03:37,949 --> 01:03:45,059
and now it'll be encoded so there are

1238
01:03:41,500 --> 01:03:45,059
negative values right

1239
01:03:48,108 --> 01:03:58,980
don't quote me on that all right so now

1240
01:03:56,639 --> 01:04:00,629
there are negative values and the

1241
01:03:58,980 --> 01:04:03,420
question is what did that do to our

1242
01:04:00,630 --> 01:04:05,570
interpolation right and so you can see

1243
01:04:03,420 --> 01:04:07,950
that it did it did round it slightly

1244
01:04:05,570 --> 01:04:10,800
actually interestingly enough you can

1245
01:04:07,949 --> 01:04:14,279
see it is a rounder interpolation right

1246
01:04:10,800 --> 01:04:18,150
than we were getting before exactly as I

1247
01:04:14,280 --> 01:04:22,530
predicted so we are like you do get a

1248
01:04:18,150 --> 01:04:26,340
more round version by not forcing the

1249
01:04:22,530 --> 01:04:31,410
values to clamp we do start getting an

1250
01:04:26,340 --> 01:04:34,530
improvement and you can see like how the

1251
01:04:31,409 --> 01:04:36,539
actual artifacts now are not so

1252
01:04:34,530 --> 01:04:38,820
stair-steppy as they were before they're

1253
01:04:36,539 --> 01:04:40,559
still not what we want right you can

1254
01:04:38,820 --> 01:04:42,809
still see they do kind of have a

1255
01:04:40,559 --> 01:04:45,119
stair-step you like pattern to them but

1256
01:04:42,809 --> 01:04:49,489
they're definitely getting closer right

1257
01:04:45,119 --> 01:04:49,490
they're getting closer to a radial feel

1258
01:04:49,670 --> 01:04:57,480
and so keeping the sign in there doesn't

1259
01:04:54,389 --> 01:04:58,739
seem like a totally stupid thing but

1260
01:04:57,480 --> 01:05:01,530
we're still not at the point yet where

1261
01:04:58,739 --> 01:05:05,000
this would be considered good right

1262
01:05:01,530 --> 01:05:07,950
like that's not I mean maybe it's okay

1263
01:05:05,000 --> 01:05:10,260
but as it as a light source moves

1264
01:05:07,949 --> 01:05:12,989
assuming that you would see that kind of

1265
01:05:10,260 --> 01:05:14,880
a look to it right I'm gonna turn this

1266
01:05:12,989 --> 01:05:16,439
to release note so I get a little bit

1267
01:05:14,880 --> 01:05:19,579
higher framerate so I can watch it at a

1268
01:05:16,440 --> 01:05:23,820
higher frame rate interpolation wise too

1269
01:05:19,579 --> 01:05:26,969
but you can see like you know the

1270
01:05:23,820 --> 01:05:29,760
interpolation that we do there even with

1271
01:05:26,969 --> 01:05:32,189
just the using trilinear it does make a

1272
01:05:29,760 --> 01:05:33,050
difference right it does make a

1273
01:05:32,190 --> 01:05:36,740
difference

1274
01:05:33,050 --> 01:05:40,380
so length let's not write it off yet

1275
01:05:36,739 --> 01:05:45,899
okay let's see what else we can do there

1276
01:05:40,380 --> 01:05:49,559
in terms of maybe what you know what

1277
01:05:45,900 --> 01:05:52,019
else might make that work differently so

1278
01:05:49,559 --> 01:05:54,659
here one thing we're doing is is we're

1279
01:05:52,019 --> 01:05:56,309
doing a normalization right of the

1280
01:05:54,659 --> 01:05:58,019
incoming light because we're kind of

1281
01:05:56,309 --> 01:06:01,139
doing some some ridiculousness with

1282
01:05:58,019 --> 01:06:01,949
directional stuff let's maybe say like

1283
01:06:01,139 --> 01:06:05,349
don't do

1284
01:06:01,949 --> 01:06:07,059
you know what I'm saying let's let's

1285
01:06:05,349 --> 01:06:09,000
maybe actually just clamp it and take

1286
01:06:07,059 --> 01:06:12,849
that out of the equation for now and

1287
01:06:09,000 --> 01:06:16,239
maybe we want to do kind of a like like

1288
01:06:12,849 --> 01:06:19,059
let's just stop looking at the the

1289
01:06:16,239 --> 01:06:21,489
different directions of the voxel and in

1290
01:06:19,059 --> 01:06:24,670
trying to like just reduce the problem

1291
01:06:21,489 --> 01:06:26,259
space here down to something a little

1292
01:06:24,670 --> 01:06:29,950
more manageable so that we're not just

1293
01:06:26,260 --> 01:06:32,350
like flailing around so instead of this

1294
01:06:29,949 --> 01:06:34,629
stuff what I'd rather do is say alright

1295
01:06:32,349 --> 01:06:38,589
let's let's take this out of the

1296
01:06:34,630 --> 01:06:40,390
equation temporarily and let's

1297
01:06:38,590 --> 01:06:50,400
initialize everybody to effectively

1298
01:06:40,389 --> 01:06:53,650
nothing and let's just look at one

1299
01:06:50,400 --> 01:06:57,849
person right so if we were to just say

1300
01:06:53,650 --> 01:07:02,980
one person is going to directly end up

1301
01:06:57,849 --> 01:07:06,670
having their sort of light value coming

1302
01:07:02,980 --> 01:07:09,250
here so we'll just have light see and

1303
01:07:06,670 --> 01:07:14,650
then at the end of this right this part

1304
01:07:09,250 --> 01:07:16,599
we're gonna get rid of so here we'll say

1305
01:07:14,650 --> 01:07:20,800
alright we've got a light value that's

1306
01:07:16,599 --> 01:07:23,699
coming in here and all we really want to

1307
01:07:20,800 --> 01:07:26,500
do now in fact I don't care about this

1308
01:07:23,699 --> 01:07:29,409
all we really want to do now is clamp

1309
01:07:26,500 --> 01:07:35,199
that out right so I want to clamp this

1310
01:07:29,409 --> 01:07:36,789
value between negative one and one so

1311
01:07:35,199 --> 01:07:39,250
that it can't be out of range for our

1312
01:07:36,789 --> 01:07:40,960
encoding but other than that I'm not

1313
01:07:39,250 --> 01:07:43,599
gonna do anything to it so we're just

1314
01:07:40,960 --> 01:07:46,300
gonna stuff down one value that is the

1315
01:07:43,599 --> 01:07:48,369
distance from the light source for one

1316
01:07:46,300 --> 01:07:49,930
person right

1317
01:07:48,369 --> 01:07:52,779
and the problem now is since we're only

1318
01:07:49,929 --> 01:07:54,549
doing one it's a little too dim for us

1319
01:07:52,780 --> 01:07:57,190
to really see the edge artifacts

1320
01:07:54,550 --> 01:07:59,230
correctly so I'm gonna go ahead and amp

1321
01:07:57,190 --> 01:08:01,630
it up a little bit there just so we can

1322
01:07:59,230 --> 01:08:05,010
see right so let's go ahead and give it

1323
01:08:01,630 --> 01:08:09,400
the full power of all six directions

1324
01:08:05,010 --> 01:08:11,730
that's the wrong place to put that let's

1325
01:08:09,400 --> 01:08:11,730
do that

1326
01:08:17,979 --> 01:08:24,588
okay um and so now if we hop along in

1327
01:08:22,189 --> 01:08:26,479
there what I hope you can see is that by

1328
01:08:24,588 --> 01:08:29,929
getting rid of the way we were filling

1329
01:08:26,479 --> 01:08:32,869
the voxel we now have what would be

1330
01:08:29,929 --> 01:08:34,940
considered an almost almost correct

1331
01:08:32,869 --> 01:08:36,229
fall-off even though we're still

1332
01:08:34,939 --> 01:08:38,349
sampling at the exact same way in the

1333
01:08:36,229 --> 01:08:40,519
pixel shader right do you see that

1334
01:08:38,350 --> 01:08:47,779
hopefully everyone can see that there do

1335
01:08:40,520 --> 01:08:49,639
you see the quality of that now and even

1336
01:08:47,779 --> 01:08:50,870
though this isn't what I was planning on

1337
01:08:49,639 --> 01:08:52,400
talking about today

1338
01:08:50,869 --> 01:08:56,380
what do you could sort of see there was

1339
01:08:52,399 --> 01:09:00,198
just like a real-life example of why

1340
01:08:56,380 --> 01:09:01,489
reconstruction filters matter right not

1341
01:09:00,198 --> 01:09:05,000
including the negatives

1342
01:09:01,488 --> 01:09:07,879
you know clamping to a value creates

1343
01:09:05,000 --> 01:09:10,219
artifacts at the border normalizing

1344
01:09:07,880 --> 01:09:13,190
inside creates artifacts in the sampling

1345
01:09:10,219 --> 01:09:14,869
and what we got was you know a really

1346
01:09:13,189 --> 01:09:16,519
ugly effect out of something that if we

1347
01:09:14,869 --> 01:09:19,608
did it correctly produces actually quite

1348
01:09:16,520 --> 01:09:24,049
clean effect right hopefully you can see

1349
01:09:19,609 --> 01:09:26,150
that there and so as I'm looking at that

1350
01:09:24,048 --> 01:09:31,569
now that reconstruction looks quite good

1351
01:09:26,149 --> 01:09:31,568
all of a sudden you know I'm saying

1352
01:09:37,970 --> 01:09:44,500
and so what I think we might need to do

1353
01:09:40,069 --> 01:09:47,869
here is okay let's let's see how we can

1354
01:09:44,500 --> 01:09:53,630
let's see what we can do if we actually

1355
01:09:47,869 --> 01:09:56,420
have these sort of light informations in

1356
01:09:53,630 --> 01:10:04,520
here with the light normal right what

1357
01:09:56,420 --> 01:10:06,800
I'm concerned about is what we know is

1358
01:10:04,520 --> 01:10:08,570
that if we plug a sign distance field

1359
01:10:06,800 --> 01:10:10,100
into our traveling interpolation we get

1360
01:10:08,569 --> 01:10:12,710
the correct fall-off right and the

1361
01:10:10,100 --> 01:10:14,510
reason for that is because we can try

1362
01:10:12,710 --> 01:10:18,159
linearly interpolate just a signed

1363
01:10:14,510 --> 01:10:22,699
distance field that actually works

1364
01:10:18,159 --> 01:10:25,010
however if we want directionality in

1365
01:10:22,699 --> 01:10:28,849
there right so you can see that kind of

1366
01:10:25,010 --> 01:10:31,220
coming in that is not assigned distance

1367
01:10:28,850 --> 01:10:34,660
field anymore and so my assumption is

1368
01:10:31,220 --> 01:10:38,000
just inserting even just the

1369
01:10:34,659 --> 01:10:39,979
directionality into it my assumption is

1370
01:10:38,000 --> 01:10:42,590
that we will introduce the artifacts

1371
01:10:39,979 --> 01:10:46,909
literally just by that so if we now take

1372
01:10:42,590 --> 01:10:50,720
out the light C value the the multiplier

1373
01:10:46,909 --> 01:10:54,439
if I was to just literally that have

1374
01:10:50,720 --> 01:10:58,119
this so instead of clamp zero to one if

1375
01:10:54,439 --> 01:11:07,309
I literally just take this stuff and

1376
01:10:58,119 --> 01:11:10,010
clamp that negative one to one I am

1377
01:11:07,310 --> 01:11:12,680
assuming that that alone will introduce

1378
01:11:10,010 --> 01:11:14,659
artifacts if it doesn't how happy am I

1379
01:11:12,680 --> 01:11:19,369
because then I think we might be almost

1380
01:11:14,659 --> 01:11:21,409
done and we can just call it a day but

1381
01:11:19,369 --> 01:11:23,869
if it does then we have to figure out

1382
01:11:21,409 --> 01:11:25,939
what can we do that would prevent that

1383
01:11:23,869 --> 01:11:28,489
eventualities from occurring right what

1384
01:11:25,939 --> 01:11:33,469
can we do that would allow us to encode

1385
01:11:28,489 --> 01:11:36,069
some direction out okay what's the

1386
01:11:33,470 --> 01:11:36,070
problem here

1387
01:11:36,880 --> 01:11:42,579
oh right that's just a light normals we

1388
01:11:40,449 --> 01:11:49,829
need to take the light C into account

1389
01:11:42,579 --> 01:11:49,829
here so that actually needs to be there

1390
01:11:55,439 --> 01:12:00,309
so I'm assuming this won't help us right

1391
01:11:58,479 --> 01:12:04,750
I'm assuming that this this is not going

1392
01:12:00,310 --> 01:12:10,420
to be useful but I don't know so here's

1393
01:12:04,750 --> 01:12:17,399
that and I'm not sure why we're getting

1394
01:12:10,420 --> 01:12:17,399
sort of light beyond the boundary there

1395
01:12:24,929 --> 01:12:31,380
ah actually I do know why we're getting

1396
01:12:28,800 --> 01:12:34,710
light beyond the boundary there so the

1397
01:12:31,380 --> 01:12:37,949
problem there is that if you have two

1398
01:12:34,710 --> 01:12:39,569
negatives so if this was negative then

1399
01:12:37,948 --> 01:12:45,149
these negatives will turn this one into

1400
01:12:39,569 --> 01:12:52,259
a positive so we need to make sure we

1401
01:12:45,149 --> 01:12:55,349
actually maintain that sign through the

1402
01:12:52,260 --> 01:12:58,079
computation properly just quickly though

1403
01:12:55,350 --> 01:13:02,579
before we go down that route looking at

1404
01:12:58,079 --> 01:13:05,670
the way that this works I still feel

1405
01:13:02,579 --> 01:13:08,640
like we have the artifacts already you

1406
01:13:05,670 --> 01:13:12,390
can see them right it's not that nice

1407
01:13:08,640 --> 01:13:16,590
and we fall off anymore so I kind of

1408
01:13:12,390 --> 01:13:18,329
feel like just in general we already

1409
01:13:16,590 --> 01:13:21,350
know the answer to our question we don't

1410
01:13:18,329 --> 01:13:21,350
really have to go any further

1411
01:13:29,829 --> 01:13:35,109
so I think we kind of now need to think

1412
01:13:33,140 --> 01:13:38,110
about this a little bit more broadly

1413
01:13:35,109 --> 01:13:38,109
right

1414
01:13:53,420 --> 01:14:03,989
so what we know is that using just the

1415
01:14:01,409 --> 01:14:06,750
trilinear reconstruction from the voxel

1416
01:14:03,988 --> 01:14:08,849
we can reconstruct a signed distance

1417
01:14:06,750 --> 01:14:13,170
field which meant that if the only kind

1418
01:14:08,850 --> 01:14:15,810
of lighting we wanted in the game was

1419
01:14:13,170 --> 01:14:20,579
just a radial fall-off light well no

1420
01:14:15,810 --> 01:14:21,750
problem right everything's fine but in

1421
01:14:20,579 --> 01:14:23,909
order to have a more interesting

1422
01:14:21,750 --> 01:14:31,619
lighting environment we don't just want

1423
01:14:23,909 --> 01:14:34,889
one radial fall-off right so I guess

1424
01:14:31,619 --> 01:14:36,689
what I think is creating the signed

1425
01:14:34,890 --> 01:14:39,450
distance field and knowing that we can

1426
01:14:36,689 --> 01:14:43,919
try linear try linearly reconstruct it

1427
01:14:39,449 --> 01:14:46,109
tells us one thing we can do there but

1428
01:14:43,920 --> 01:14:48,510
it doesn't really give us much insight

1429
01:14:46,109 --> 01:14:51,449
into how we would actually be able to

1430
01:14:48,510 --> 01:14:54,270
reconstruct a lighting direction because

1431
01:14:51,449 --> 01:14:57,869
the direction function doesn't have any

1432
01:14:54,270 --> 01:14:59,280
sort of analog to that right especially

1433
01:14:57,869 --> 01:15:02,699
not when you're talking about sampled

1434
01:14:59,279 --> 01:15:05,009
light so reconstruction with a tri

1435
01:15:02,699 --> 01:15:06,689
linear filter if we know that it has to

1436
01:15:05,010 --> 01:15:08,010
be based on signed distance fields I'm

1437
01:15:06,689 --> 01:15:09,509
trying to think if there's any other

1438
01:15:08,010 --> 01:15:11,369
thing we could do there but I don't

1439
01:15:09,510 --> 01:15:12,930
think there is if we know that sign

1440
01:15:11,369 --> 01:15:14,849
distance fields are probably the only

1441
01:15:12,930 --> 01:15:16,920
thing we can actually reconstruct I

1442
01:15:14,850 --> 01:15:20,760
guess we're down to the question of is

1443
01:15:16,920 --> 01:15:23,609
there a way to take sample lighting that

1444
01:15:20,760 --> 01:15:30,239
we have right the actual sampling that

1445
01:15:23,609 --> 01:15:32,519
we want in the world and take take that

1446
01:15:30,238 --> 01:15:36,988
and put it into effectively assigned

1447
01:15:32,520 --> 01:15:39,680
distance field construction at voxel

1448
01:15:36,988 --> 01:15:39,679
ization time

1449
01:15:41,469 --> 01:15:44,430
right

1450
01:15:47,710 --> 01:15:55,939
and the reason that I'm not particularly

1451
01:15:51,289 --> 01:15:58,159
optimistic about that is because it if

1452
01:15:55,939 --> 01:16:00,079
we want to we need to know stuff like

1453
01:15:58,159 --> 01:16:05,079
what direction the lighting is coming

1454
01:16:00,079 --> 01:16:09,229
from right we kind of need to know that

1455
01:16:05,079 --> 01:16:10,340
and to be fair there are some

1456
01:16:09,229 --> 01:16:13,069
interesting things we could think about

1457
01:16:10,340 --> 01:16:16,960
doing there if all we had was signed

1458
01:16:13,069 --> 01:16:19,130
distance fields for the amount of light

1459
01:16:16,960 --> 01:16:22,039
you know one interesting thing to think

1460
01:16:19,130 --> 01:16:23,779
about is you could imagine saying that

1461
01:16:22,039 --> 01:16:25,760
the direction the light is coming from

1462
01:16:23,779 --> 01:16:27,079
is just the gradient of that signed

1463
01:16:25,760 --> 01:16:28,579
distance field right because the

1464
01:16:27,079 --> 01:16:30,949
scientist this field has a well-defined

1465
01:16:28,579 --> 01:16:32,239
gradient on it and if we said well the

1466
01:16:30,949 --> 01:16:34,489
direction that the light is coming from

1467
01:16:32,239 --> 01:16:36,590
it has to be the direction of the sign

1468
01:16:34,489 --> 01:16:40,159
this is field and we're not going to

1469
01:16:36,590 --> 01:16:42,470
encode things like east west north south

1470
01:16:40,159 --> 01:16:44,449
and down or anything that or we still

1471
01:16:42,470 --> 01:16:46,100
are but we're gonna consider each of

1472
01:16:44,449 --> 01:16:48,229
those things to be a scientist ins field

1473
01:16:46,100 --> 01:16:49,550
where the light direction is based on

1474
01:16:48,229 --> 01:16:51,619
the gradients of the scientist ins field

1475
01:16:49,550 --> 01:16:53,480
then we know that would be smoothly

1476
01:16:51,619 --> 01:17:02,390
interpolated from the trilinear filter

1477
01:16:53,479 --> 01:17:04,069
right in theory and so I really do think

1478
01:17:02,390 --> 01:17:06,410
we need to think pretty carefully about

1479
01:17:04,069 --> 01:17:10,849
this because again mathematically

1480
01:17:06,409 --> 01:17:12,409
speaking I don't know anything else we

1481
01:17:10,850 --> 01:17:14,600
can do other than a signed distance

1482
01:17:12,409 --> 01:17:21,229
field that would interpolate properly on

1483
01:17:14,600 --> 01:17:22,520
the trilinear filter right and maybe

1484
01:17:21,229 --> 01:17:23,779
that's just me not having thought about

1485
01:17:22,520 --> 01:17:24,890
try learning your filters enough maybe

1486
01:17:23,779 --> 01:17:26,269
there are other things we could do

1487
01:17:24,890 --> 01:17:29,210
mathematically that would add add

1488
01:17:26,270 --> 01:17:31,640
correctly in there but I feel like the

1489
01:17:29,210 --> 01:17:33,170
trial and error filter the only thing I

1490
01:17:31,640 --> 01:17:34,789
recall ever being mathematically

1491
01:17:33,170 --> 01:17:36,829
reconstruct a ball from the try linear

1492
01:17:34,789 --> 01:17:38,359
filter is a sine distance field I don't

1493
01:17:36,829 --> 01:17:40,930
know what else we could really do

1494
01:17:38,359 --> 01:17:43,699
maybe there's something I'm forgetting

1495
01:17:40,930 --> 01:17:46,579
but it seems like it breaks down to a

1496
01:17:43,699 --> 01:17:48,199
fairly mathematical process of what can

1497
01:17:46,579 --> 01:17:49,309
we represent in signed distance fields

1498
01:17:48,199 --> 01:17:53,229
because those are the things that will

1499
01:17:49,310 --> 01:17:53,230
be constructed without artifacts

1500
01:18:09,618 --> 01:18:14,848
how do you feel about that I guess I

1501
01:18:13,020 --> 01:18:16,469
don't know how people on chat feel about

1502
01:18:14,849 --> 01:18:18,090
that but that's life sorry I guess sort

1503
01:18:16,469 --> 01:18:19,260
of what I'm thinking and so if you take

1504
01:18:18,090 --> 01:18:22,770
a look at the equations that are on the

1505
01:18:19,260 --> 01:18:23,760
screen right now right you can see what

1506
01:18:22,770 --> 01:18:25,650
we were sort of doing there is we were

1507
01:18:23,760 --> 01:18:28,349
saying like look what direction is the

1508
01:18:25,649 --> 01:18:29,609
light coming from and that tells us you

1509
01:18:28,349 --> 01:18:30,750
know our normal to the light source

1510
01:18:29,609 --> 01:18:32,969
right you can see us computing that

1511
01:18:30,750 --> 01:18:34,289
there and we normalize that so we have

1512
01:18:32,969 --> 01:18:36,090
like a general direction and we're

1513
01:18:34,289 --> 01:18:37,948
saying this is where the light is coming

1514
01:18:36,090 --> 01:18:43,770
from it's coming from over here

1515
01:18:37,948 --> 01:18:45,269
you know we then encode that we were

1516
01:18:43,770 --> 01:18:46,590
trying to encode sort of light

1517
01:18:45,270 --> 01:18:48,960
information by saying all right

1518
01:18:46,590 --> 01:18:51,989
let's distribute that light to the six

1519
01:18:48,960 --> 01:18:53,550
faces of the cube by saying whatever the

1520
01:18:51,988 --> 01:18:55,138
lighting normal is that's going to tell

1521
01:18:53,550 --> 01:18:59,849
us how much contribution should go into

1522
01:18:55,139 --> 01:19:03,510
that face of the cube right and that

1523
01:18:59,849 --> 01:19:05,849
because so what you can see I mean I

1524
01:19:03,510 --> 01:19:09,000
again just want to sort of highlight the

1525
01:19:05,849 --> 01:19:11,940
map here what you can see is this part

1526
01:19:09,000 --> 01:19:16,289
of that equation right here right this

1527
01:19:11,939 --> 01:19:17,549
is the normalizer zero apart I'm gonna

1528
01:19:16,289 --> 01:19:19,769
go out on a limb here and say that's the

1529
01:19:17,550 --> 01:19:21,210
prop that was where the artifacts were

1530
01:19:19,770 --> 01:19:25,560
coming from there and the reason that

1531
01:19:21,210 --> 01:19:27,149
you know I suspect that is because if

1532
01:19:25,560 --> 01:19:30,090
you look at all of the equations that we

1533
01:19:27,149 --> 01:19:34,618
have on the screen right now that's the

1534
01:19:30,090 --> 01:19:37,409
only one that really has a nonlinear

1535
01:19:34,618 --> 01:19:39,750
function in it right and so what we're

1536
01:19:37,408 --> 01:19:42,420
doing so a trial of your filter right is

1537
01:19:39,750 --> 01:19:47,039
effectively reconstructing something

1538
01:19:42,420 --> 01:19:50,550
linear underneath it and so it's we can

1539
01:19:47,039 --> 01:19:53,010
expect to be able to do a linear sine

1540
01:19:50,550 --> 01:19:57,179
distance field should be reconstructive

1541
01:19:53,010 --> 01:19:59,550
all right generally generally speaking

1542
01:19:57,179 --> 01:20:03,179
it should be reconstructive all if we

1543
01:19:59,550 --> 01:20:05,940
have only one thing that is being used

1544
01:20:03,179 --> 01:20:07,679
in a normalization normalized fashion

1545
01:20:05,939 --> 01:20:09,719
which would be this length function

1546
01:20:07,679 --> 01:20:11,550
right here so one thing that's you know

1547
01:20:09,719 --> 01:20:13,679
a distance from a point we should expect

1548
01:20:11,550 --> 01:20:16,469
to be able to reconstruct it and we did

1549
01:20:13,679 --> 01:20:20,670
but here we've got a second thing that's

1550
01:20:16,469 --> 01:20:21,760
being normalized which is this light

1551
01:20:20,670 --> 01:20:30,210
normal vector

1552
01:20:21,760 --> 01:20:32,560
right so thinking that through I guess I

1553
01:20:30,210 --> 01:20:33,909
I'm gonna I wonder if we're gonna have

1554
01:20:32,560 --> 01:20:37,570
to actually work out the math and figure

1555
01:20:33,909 --> 01:20:40,029
out is is it should we expect to be able

1556
01:20:37,569 --> 01:20:44,559
to add to signed distance fields

1557
01:20:40,029 --> 01:20:45,699
together in that way because that's sort

1558
01:20:44,560 --> 01:20:46,900
of affected what this is doing oh this

1559
01:20:45,699 --> 01:20:52,210
is not really a sign distance field

1560
01:20:46,899 --> 01:20:55,629
either so so bear with me for a moment

1561
01:20:52,210 --> 01:20:58,869
let's suppose here we were to take out

1562
01:20:55,630 --> 01:21:00,789
this normalization entirely right so

1563
01:20:58,869 --> 01:21:02,529
instead what we had is we have the

1564
01:21:00,789 --> 01:21:07,289
direction to the light source and we

1565
01:21:02,529 --> 01:21:09,929
looked at that as a separate parameter

1566
01:21:07,289 --> 01:21:12,149
that was going to be coming down

1567
01:21:09,930 --> 01:21:17,170
separate from the actual light

1568
01:21:12,149 --> 01:21:18,579
information somehow right and so rather

1569
01:21:17,170 --> 01:21:21,460
than doing this the way that we were

1570
01:21:18,579 --> 01:21:22,869
doing it instead of putting this this

1571
01:21:21,460 --> 01:21:25,600
piece of information that light

1572
01:21:22,869 --> 01:21:27,159
direction in there well in fact you know

1573
01:21:25,600 --> 01:21:30,039
what let's think about it in even

1574
01:21:27,159 --> 01:21:34,029
another way let's suppose me were to

1575
01:21:30,039 --> 01:21:37,000
encode only the light sort of intensity

1576
01:21:34,029 --> 01:21:39,579
here and then we actually in here where

1577
01:21:37,000 --> 01:21:43,359
we packed the color we use the normal

1578
01:21:39,579 --> 01:21:46,988
for that right let's say I'm just just

1579
01:21:43,359 --> 01:21:49,449
throwing that out as one sort of one

1580
01:21:46,988 --> 01:21:52,959
thing we could try here just to see what

1581
01:21:49,449 --> 01:21:55,389
happens if we if we try to get that out

1582
01:21:52,960 --> 01:21:56,859
so we only have in the Alpha channel we

1583
01:21:55,390 --> 01:21:58,150
only have one thing that's a sign

1584
01:21:56,859 --> 01:22:00,609
doesn't feel being reconstructed and

1585
01:21:58,149 --> 01:22:02,979
then the RGB we put the other stuff is

1586
01:22:00,609 --> 01:22:05,679
there any way we could sort of make that

1587
01:22:02,979 --> 01:22:10,209
work again probably not unless we

1588
01:22:05,680 --> 01:22:12,670
actually in allowed this to be signed as

1589
01:22:10,210 --> 01:22:14,050
well so I suppose I'm as I'm kind of

1590
01:22:12,670 --> 01:22:15,520
saying that out loud I'm thinking you

1591
01:22:14,050 --> 01:22:20,050
know that's that's not actually correct

1592
01:22:15,520 --> 01:22:21,670
because the colouring value of it you

1593
01:22:20,050 --> 01:22:24,310
know wouldn't actually work there I

1594
01:22:21,670 --> 01:22:27,100
suppose so as I say that maybe that's

1595
01:22:24,310 --> 01:22:28,930
not not the best idea but again yeah

1596
01:22:27,100 --> 01:22:31,960
just thinking about this through so you

1597
01:22:28,930 --> 01:22:34,390
know what if what if we were to have the

1598
01:22:31,960 --> 01:22:35,710
direction be something that could be

1599
01:22:34,390 --> 01:22:38,199
reconstructed

1600
01:22:35,710 --> 01:22:39,340
correctly as well that's the only thing

1601
01:22:38,198 --> 01:22:41,169
I'm thinking because that you can see

1602
01:22:39,340 --> 01:22:43,929
adding that directionality in there

1603
01:22:41,170 --> 01:22:47,649
right we immediately got the sub

1604
01:22:43,929 --> 01:22:49,449
artifacting back and you know just

1605
01:22:47,649 --> 01:22:50,979
looking at the difference look look in

1606
01:22:49,448 --> 01:22:52,750
the inter you can see all the ringing

1607
01:22:50,979 --> 01:22:55,509
and stuff that happens in there and when

1608
01:22:52,750 --> 01:22:58,569
we turn that off right so when we don't

1609
01:22:55,510 --> 01:23:06,090
have the the light information in there

1610
01:22:58,569 --> 01:23:06,090
so if we literally just have light see

1611
01:23:19,389 --> 01:23:24,460
when we literally just have lights II uh

1612
01:23:21,550 --> 01:23:25,810
well actually know that one now I'm

1613
01:23:24,460 --> 01:23:27,520
getting that our fighting back okay that

1614
01:23:25,810 --> 01:23:31,179
was pretty instructive so what happened

1615
01:23:27,520 --> 01:23:33,340
there that was the problem I thought

1616
01:23:31,179 --> 01:23:34,779
that we had that reconstructing properly

1617
01:23:33,340 --> 01:23:46,600
but now that I look at it it's wrong

1618
01:23:34,779 --> 01:23:49,599
again is that just because it's too

1619
01:23:46,600 --> 01:23:51,010
bright so is it did I just fool myself

1620
01:23:49,600 --> 01:23:53,860
into thinking we had reconstructed that

1621
01:23:51,010 --> 01:23:56,380
properly which maybe I did maybe I spoke

1622
01:23:53,859 --> 01:24:02,139
too soon but I would have thought yeah

1623
01:23:56,380 --> 01:24:05,590
see so let's suppose we turned the light

1624
01:24:02,139 --> 01:24:07,989
intensity down a little bit there or I

1625
01:24:05,590 --> 01:24:09,850
guess what we did do is we only had one

1626
01:24:07,988 --> 01:24:12,059
of them I guess is one thing what we did

1627
01:24:09,850 --> 01:24:12,060
there

1628
01:24:19,198 --> 01:24:26,250
so let's say we take light C and divide

1629
01:24:23,579 --> 01:24:28,319
it by six just want to see what what's

1630
01:24:26,250 --> 01:24:30,270
up there if that's the case - it may

1631
01:24:28,319 --> 01:24:32,880
just be that again we don't have the

1632
01:24:30,270 --> 01:24:35,160
range for it which is entirely possible

1633
01:24:32,880 --> 01:24:36,329
as well you know and the artifact is

1634
01:24:35,159 --> 01:24:38,849
actually coming from the quantization

1635
01:24:36,329 --> 01:24:45,119
but no like that's totally busted

1636
01:24:38,850 --> 01:24:50,810
right so I guess let's take a look here

1637
01:24:45,119 --> 01:25:02,488
if I get rid of this and we nuke the

1638
01:24:50,810 --> 01:25:05,400
North out of here is it just the fact

1639
01:25:02,488 --> 01:25:06,839
that we have multiple directions coming

1640
01:25:05,399 --> 01:25:13,079
together that's producing those

1641
01:25:06,840 --> 01:25:16,039
artifacts so going ahead and increasing

1642
01:25:13,079 --> 01:25:16,039
the light intensity here

1643
01:25:33,698 --> 01:25:42,049
so okay so it looks like actually I was

1644
01:25:37,519 --> 01:25:43,489
wrong about that I'm now starting to

1645
01:25:42,050 --> 01:25:46,519
wonder is there something weird in our

1646
01:25:43,488 --> 01:25:48,799
shader maybe like I clearly didn't think

1647
01:25:46,519 --> 01:25:52,280
about this problem correctly because you

1648
01:25:48,800 --> 01:25:54,679
can see there is that actually as long

1649
01:25:52,279 --> 01:25:56,630
as it's only one of the channels it's

1650
01:25:54,679 --> 01:25:57,498
fine and if you stuff all the channels

1651
01:25:56,630 --> 01:25:59,328
with things that should have worked

1652
01:25:57,498 --> 01:26:03,380
properly you don't actually get that and

1653
01:25:59,328 --> 01:26:08,359
so the reflection function in here seems

1654
01:26:03,380 --> 01:26:15,609
to be causing more damage than I

1655
01:26:08,359 --> 01:26:17,630
anticipated so inside the Z bias program

1656
01:26:15,609 --> 01:26:23,089
just taking a look at how we're doing

1657
01:26:17,630 --> 01:26:25,760
that I'm curious here what's going on so

1658
01:26:23,090 --> 01:26:30,949
in here you know when we take a look at

1659
01:26:25,760 --> 01:26:32,659
how we're computing the you know here's

1660
01:26:30,948 --> 01:26:34,009
the interpolated value this appears to

1661
01:26:32,658 --> 01:26:36,529
come through correctly if there's only

1662
01:26:34,010 --> 01:26:38,748
one of them when we actually go ahead

1663
01:26:36,529 --> 01:26:43,569
and compute the rest of it here so we've

1664
01:26:38,748 --> 01:26:47,899
got like for example you know doing the

1665
01:26:43,569 --> 01:26:51,009
the reflection normal the interpreter

1666
01:26:47,899 --> 01:26:51,009
you know the inner product and so on

1667
01:26:52,118 --> 01:26:59,420
that alone seems to be enough to create

1668
01:26:55,998 --> 01:27:01,248
our artifacts so for example if we were

1669
01:26:59,420 --> 01:27:05,989
to drop the light down one I'm just

1670
01:27:01,248 --> 01:27:10,399
curious again so and allow both say well

1671
01:27:05,988 --> 01:27:14,468
let's let's try for example let's try

1672
01:27:10,399 --> 01:27:14,469
both west and south

1673
01:27:23,170 --> 01:27:31,220
and that still looks fine to me I don't

1674
01:27:28,340 --> 01:27:34,460
see artifacting in that reconstruction

1675
01:27:31,220 --> 01:27:36,740
let's try so what I'm doing here is i'm

1676
01:27:34,460 --> 01:27:38,750
just trying the positive versions of it

1677
01:27:36,739 --> 01:27:43,670
right so none of the negative facing

1678
01:27:38,750 --> 01:27:46,220
versions so let's suppose now we do the

1679
01:27:43,670 --> 01:27:49,750
west side the negative facing versus the

1680
01:27:46,220 --> 01:27:49,750
west the south and the down

1681
01:28:14,520 --> 01:28:19,800
and I guess to be honest I do start to

1682
01:28:17,640 --> 01:28:22,560
see the artifact and kind of coming back

1683
01:28:19,800 --> 01:28:26,730
there and so I guess what I'm wondering

1684
01:28:22,560 --> 01:28:28,200
is maybe I'm just wrong my intuition was

1685
01:28:26,729 --> 01:28:30,119
wrong about that which is you know

1686
01:28:28,199 --> 01:28:32,279
pretty easy to have happen when you're

1687
01:28:30,119 --> 01:28:34,349
doing something like lighting I guess

1688
01:28:32,279 --> 01:28:37,889
what I would say is it looks to me it

1689
01:28:34,350 --> 01:28:41,130
like it's really our box sampling that

1690
01:28:37,890 --> 01:28:42,720
is the problem there right because if we

1691
01:28:41,130 --> 01:28:45,000
do allow signed distance field

1692
01:28:42,720 --> 01:28:50,190
interpolation on our light values there

1693
01:28:45,000 --> 01:28:52,439
we are okay it really looks like the

1694
01:28:50,189 --> 01:28:56,849
only problem that I'm seeing is is

1695
01:28:52,439 --> 01:28:58,949
because of the box based lighting again

1696
01:28:56,850 --> 01:29:00,840
good to know right this is exactly why

1697
01:28:58,949 --> 01:29:02,159
we need to do this to make sure we know

1698
01:29:00,840 --> 01:29:07,230
what we're doing here because it's not

1699
01:29:02,159 --> 01:29:10,380
obvious so let's suppose I switched back

1700
01:29:07,229 --> 01:29:12,599
here I'm I want to know now if I clamped

1701
01:29:10,380 --> 01:29:15,659
my light values so that they actually

1702
01:29:12,600 --> 01:29:16,050
fall off they don't have the negative

1703
01:29:15,659 --> 01:29:17,550
values

1704
01:29:16,050 --> 01:29:19,739
is it possible that we didn't even

1705
01:29:17,550 --> 01:29:20,789
really need that that changing it to a

1706
01:29:19,739 --> 01:29:26,539
sign does this field was in fact

1707
01:29:20,789 --> 01:29:26,539
unnecessary right and I'm not sure

1708
01:29:40,078 --> 01:29:46,679
so again looks pretty nice and smooth

1709
01:29:42,238 --> 01:29:52,558
there if I now go and clamp these values

1710
01:29:46,679 --> 01:29:55,529
to 0 so the fall-off becomes you know

1711
01:29:52,559 --> 01:30:08,550
truncated I just want to see do we get

1712
01:29:55,529 --> 01:30:13,859
the banding or don't we okay so actually

1713
01:30:08,550 --> 01:30:18,179
I didn't really even need that I mean it

1714
01:30:13,859 --> 01:30:20,789
is true that it looks better and you get

1715
01:30:18,179 --> 01:30:22,770
well you know and now I guess I would

1716
01:30:20,789 --> 01:30:24,300
say it's pretty bad so the signed

1717
01:30:22,770 --> 01:30:26,940
distance field I was gonna say it's not

1718
01:30:24,300 --> 01:30:28,529
that bad without it but it is it is kind

1719
01:30:26,939 --> 01:30:30,719
of actually the more I move around it's

1720
01:30:28,529 --> 01:30:32,698
it's not so good so I do think the

1721
01:30:30,719 --> 01:30:34,739
signed distance field part probably is

1722
01:30:32,698 --> 01:30:36,598
important we probably need something

1723
01:30:34,738 --> 01:30:38,658
that it can that can be reconstructed if

1724
01:30:36,599 --> 01:30:41,699
we stay with the trilinear filter

1725
01:30:38,658 --> 01:30:47,039
reconstruction it does look like you

1726
01:30:41,698 --> 01:30:52,039
really do want this but it looks like

1727
01:30:47,039 --> 01:30:56,639
and maybe I'm wrong but it looks like

1728
01:30:52,039 --> 01:31:02,578
interpolating box directional ain't

1729
01:30:56,639 --> 01:31:04,500
ain't gonna cut it and again now maybe I

1730
01:31:02,578 --> 01:31:06,389
did something wrong

1731
01:31:04,500 --> 01:31:09,599
so maybe I've got a bug in some other

1732
01:31:06,389 --> 01:31:11,099
part of the map there very possible but

1733
01:31:09,599 --> 01:31:12,929
just looking at the quality of this

1734
01:31:11,099 --> 01:31:15,929
versus the quality of the box based

1735
01:31:12,929 --> 01:31:17,368
interpolation it's just I mean to use a

1736
01:31:15,929 --> 01:31:19,469
bad lighting plan it's just night and

1737
01:31:17,368 --> 01:31:21,868
day right I mean that looks perfect to

1738
01:31:19,469 --> 01:31:25,020
me basically I couldn't ask for a better

1739
01:31:21,868 --> 01:31:30,389
radial fall-off than that in practice

1740
01:31:25,020 --> 01:31:31,679
looks great everything looks perfect but

1741
01:31:30,389 --> 01:31:33,090
once we started putting in those box

1742
01:31:31,679 --> 01:31:35,520
directions when those gets summed

1743
01:31:33,090 --> 01:31:36,800
together it was not good at all even

1744
01:31:35,520 --> 01:31:43,889
though each one was being some

1745
01:31:36,800 --> 01:31:45,869
independently those directional values

1746
01:31:43,889 --> 01:31:49,949
just did not compose properly it didn't

1747
01:31:45,868 --> 01:31:52,380
look like right and so I think what we

1748
01:31:49,948 --> 01:31:53,639
need to do is take a step back and we

1749
01:31:52,380 --> 01:31:58,859
need to figure out how are we

1750
01:31:53,640 --> 01:32:01,350
going to interpolate light

1751
01:31:58,859 --> 01:32:03,509
directionality better than that

1752
01:32:01,350 --> 01:32:07,789
cuz that ain't that that's not

1753
01:32:03,510 --> 01:32:07,789
sufficient it's what it looks like to me

1754
01:32:08,000 --> 01:32:12,989
and unfortunately I don't know like I

1755
01:32:10,590 --> 01:32:18,720
don't have a magical way we could really

1756
01:32:12,989 --> 01:32:23,309
do that so we're gonna have to think

1757
01:32:18,720 --> 01:32:36,810
about that and it may require changing

1758
01:32:23,310 --> 01:32:39,360
to a different basis right it may

1759
01:32:36,810 --> 01:32:44,970
require using some maybe a spherical

1760
01:32:39,359 --> 01:32:52,710
harmonic basis I it maybe requires us to

1761
01:32:44,970 --> 01:32:55,140
do you know bent normals would be

1762
01:32:52,710 --> 01:32:58,890
another option I don't know I'm not sure

1763
01:32:55,140 --> 01:33:03,079
but just looking at that I just I don't

1764
01:32:58,890 --> 01:33:03,079
think the reconstruction is very good

1765
01:33:03,859 --> 01:33:07,369
with boxes

1766
01:33:11,460 --> 01:33:15,270
and we're gonna need something that

1767
01:33:13,800 --> 01:33:16,440
could if we're gonna use trailing you're

1768
01:33:15,270 --> 01:33:18,860
filtering we need something that a

1769
01:33:16,439 --> 01:33:25,739
trilinear filtering actually reconstruct

1770
01:33:18,859 --> 01:33:28,769
right now one thing we could do is say

1771
01:33:25,739 --> 01:33:36,599
maybe we just have to light directions

1772
01:33:28,770 --> 01:33:38,490
or something or you know what amounts to

1773
01:33:36,600 --> 01:33:40,500
basically like via normal because we can

1774
01:33:38,489 --> 01:33:43,139
interpolate that I wish I had a better

1775
01:33:40,500 --> 01:33:45,539
intuition I don't actually know what

1776
01:33:43,140 --> 01:33:47,400
happens to spherical harmonics under a

1777
01:33:45,539 --> 01:33:50,369
trilinear filter that is something we

1778
01:33:47,399 --> 01:33:51,269
probably have to investigate by we have

1779
01:33:50,369 --> 01:33:52,710
to actually write out what's gonna

1780
01:33:51,270 --> 01:33:57,240
happen if you do that reconstruction

1781
01:33:52,710 --> 01:33:59,189
because I don't really know I do wonder

1782
01:33:57,239 --> 01:34:02,670
kind of offhand what would happen if we

1783
01:33:59,189 --> 01:34:04,439
just reconstructed than normal right so

1784
01:34:02,670 --> 01:34:05,970
if we actually said like what we're

1785
01:34:04,439 --> 01:34:10,649
actually gonna push through here is just

1786
01:34:05,970 --> 01:34:13,740
the normal to the light source and we

1787
01:34:10,649 --> 01:34:15,479
store an average normal right and maybe

1788
01:34:13,739 --> 01:34:22,079
we sort you know we could start to to

1789
01:34:15,479 --> 01:34:23,939
normals so you know we've got some kind

1790
01:34:22,079 --> 01:34:28,909
of lighting information that stores you

1791
01:34:23,939 --> 01:34:33,239
know just various values in our RGB a

1792
01:34:28,909 --> 01:34:36,029
and you can imagine storing so like two

1793
01:34:33,239 --> 01:34:39,359
normal directions so to the like primary

1794
01:34:36,029 --> 01:34:42,889
and secondary lighting directions or

1795
01:34:39,359 --> 01:34:45,989
even just maybe one normal direction and

1796
01:34:42,890 --> 01:34:48,420
one color or sorry one aural direction

1797
01:34:45,989 --> 01:34:51,179
in two colors so basically like what's

1798
01:34:48,420 --> 01:34:52,890
the primary light and then what's the

1799
01:34:51,180 --> 01:34:55,770
secondary light so what's coming from

1800
01:34:52,890 --> 01:34:58,230
behind that you could also imagine doing

1801
01:34:55,770 --> 01:34:59,850
something like that I and spherical

1802
01:34:58,229 --> 01:35:03,629
harmonics are sort of like that but

1803
01:34:59,850 --> 01:35:06,150
they're non direct they encode the

1804
01:35:03,630 --> 01:35:08,159
direction into the coefficients directly

1805
01:35:06,149 --> 01:35:12,299
as opposed to having a secondary piece

1806
01:35:08,159 --> 01:35:14,639
of information that tells you what I'm

1807
01:35:12,300 --> 01:35:15,840
most tempted to do right now in the

1808
01:35:14,640 --> 01:35:19,020
amount of time we have left which I

1809
01:35:15,840 --> 01:35:24,930
don't think as much it's like 20 minutes

1810
01:35:19,020 --> 01:35:28,650
or so would be maybe like I

1811
01:35:24,930 --> 01:35:34,079
like to go in and see what would happen

1812
01:35:28,649 --> 01:35:35,729
to just interpolated normals can we

1813
01:35:34,079 --> 01:35:38,729
reconstruct those with the trilinear

1814
01:35:35,729 --> 01:35:41,609
filter properly because we know we can't

1815
01:35:38,729 --> 01:35:43,919
reconstruct them exactly but what we do

1816
01:35:41,609 --> 01:35:47,389
know is we can linearly interpolate them

1817
01:35:43,920 --> 01:35:50,130
and then renormalize them and

1818
01:35:47,390 --> 01:35:52,380
furthermore we also know that we could

1819
01:35:50,130 --> 01:35:54,449
encode them if we wanted to we can

1820
01:35:52,380 --> 01:35:56,760
encode directions as quaternions if we

1821
01:35:54,449 --> 01:36:00,119
want to and then the reconstruction is

1822
01:35:56,760 --> 01:36:02,820
even better right because the

1823
01:36:00,119 --> 01:36:04,590
reconstruction would be based on half

1824
01:36:02,819 --> 01:36:09,659
angles a set of angles and we get even

1825
01:36:04,590 --> 01:36:13,260
less distortion from the from the

1826
01:36:09,659 --> 01:36:15,300
blending of the two right so we have a

1827
01:36:13,260 --> 01:36:18,060
lot of options there and I guess what I

1828
01:36:15,300 --> 01:36:20,239
would say is I am interested you know to

1829
01:36:18,060 --> 01:36:20,240
know

1830
01:36:28,460 --> 01:36:39,840
I'm interested to know I'm also a little

1831
01:36:36,659 --> 01:36:42,930
bit wondering why with our light

1832
01:36:39,840 --> 01:36:50,219
fall-off here we never seem to get down

1833
01:36:42,930 --> 01:36:55,310
to black what's going on there is there

1834
01:36:50,219 --> 01:36:59,210
some kind of a what's happening there

1835
01:36:55,310 --> 01:36:59,210
did I miss something up there

1836
01:37:09,158 --> 01:37:17,469
because we should be getting no lighting

1837
01:37:14,198 --> 01:37:20,539
what are we stuffing in here so we got

1838
01:37:17,469 --> 01:37:23,239
east south north down up those are all

1839
01:37:20,539 --> 01:37:25,309
zero right so if we said West a equals

1840
01:37:23,238 --> 01:37:33,289
zero we should get nothing right this

1841
01:37:25,309 --> 01:37:36,800
should just be black entirely black and

1842
01:37:33,289 --> 01:37:38,539
we're actually getting some light so

1843
01:37:36,800 --> 01:37:50,929
I've got some kind of an encoding bug

1844
01:37:38,539 --> 01:37:53,539
here and I'm not sure what it is right

1845
01:37:50,929 --> 01:37:58,460
because here we're stuffing all values

1846
01:37:53,539 --> 01:37:58,939
to zero so that zero is not actually a

1847
01:37:58,460 --> 01:38:01,309
zero

1848
01:37:58,939 --> 01:38:05,658
I assume that's because of the way we're

1849
01:38:01,309 --> 01:38:07,610
doing the encoding here actually

1850
01:38:05,658 --> 01:38:10,939
producing a value slightly above zero

1851
01:38:07,609 --> 01:38:13,539
right I mean if you think about what's

1852
01:38:10,939 --> 01:38:13,539
happening there

1853
01:38:15,819 --> 01:38:24,698
so if this were to be actually somewhat

1854
01:38:19,609 --> 01:38:28,219
negative something's weird about that

1855
01:38:24,698 --> 01:38:32,269
because we have a clamp zero to 1 here 2

1856
01:38:28,219 --> 01:38:36,099
times the light value alpha minus 1

1857
01:38:32,270 --> 01:38:40,369
right and so what we should be getting

1858
01:38:36,099 --> 01:38:43,429
if this thing was 0 is we should be

1859
01:38:40,368 --> 01:38:45,558
getting full negative 1 right now we're

1860
01:38:43,429 --> 01:38:50,569
biasing it here so we can't get full

1861
01:38:45,559 --> 01:38:53,110
zero but you know let's suppose I

1862
01:38:50,569 --> 01:38:57,759
actually sent on negative 1 everywhere

1863
01:38:53,109 --> 01:38:57,759
now we should definitely clamp to 0

1864
01:39:00,698 --> 01:39:08,079
ah okay and how about point five all of

1865
01:39:05,829 --> 01:39:13,269
these should be black we should see

1866
01:39:08,079 --> 01:39:15,340
nothing on the screen all right so

1867
01:39:13,270 --> 01:39:18,130
that's just because our zero handling is

1868
01:39:15,340 --> 01:39:20,770
not correct right when we're actually at

1869
01:39:18,130 --> 01:39:24,369
zero we're actually producing a value

1870
01:39:20,770 --> 01:39:25,290
that doesn't decode directly right so

1871
01:39:24,369 --> 01:39:29,050
it's actually oops

1872
01:39:25,289 --> 01:39:30,698
didn't mean to launch the profiler so

1873
01:39:29,050 --> 01:39:33,039
when we encode that we need to encode

1874
01:39:30,698 --> 01:39:36,099
something actually that will map to zero

1875
01:39:33,039 --> 01:39:39,569
properly and when we're encoding it this

1876
01:39:36,100 --> 01:39:45,940
way what we end up with here right is

1877
01:39:39,569 --> 01:39:56,559
0.5 times 255 so like just to show you

1878
01:39:45,939 --> 01:39:59,889
what's happening there so we're ending

1879
01:39:56,560 --> 01:40:01,150
up with 120 7.5 which of course has to

1880
01:39:59,890 --> 01:40:05,140
kind of be rounded one way or the other

1881
01:40:01,149 --> 01:40:08,500
right and so I assume that the the zero

1882
01:40:05,140 --> 01:40:11,020
value is actually 128 when the graphics

1883
01:40:08,500 --> 01:40:13,479
card unpacks it and so I would assume

1884
01:40:11,020 --> 01:40:15,310
what we're getting well or it's 127 I

1885
01:40:13,479 --> 01:40:17,649
guess I guess I don't know I'll have to

1886
01:40:15,310 --> 01:40:23,410
go look at how the graphics card would

1887
01:40:17,649 --> 01:40:25,029
unpack that value let's think about this

1888
01:40:23,409 --> 01:40:28,750
for a second I'm assuming that the

1889
01:40:25,029 --> 01:40:30,250
graphics card impacts the value as when

1890
01:40:28,750 --> 01:40:32,948
the light value comes in

1891
01:40:30,250 --> 01:40:35,140
it's gonna take you know something it

1892
01:40:32,948 --> 01:40:37,539
gets like if the 1.7.5

1893
01:40:35,140 --> 01:40:39,820
if we round that and we get 128 and

1894
01:40:37,539 --> 01:40:43,179
that's what we store I'm assuming it's

1895
01:40:39,819 --> 01:40:47,590
going to divide that by 255 and get out

1896
01:40:43,179 --> 01:40:50,500
some value like that's 0.501 right so

1897
01:40:47,590 --> 01:40:53,890
when we take that value that value we're

1898
01:40:50,500 --> 01:40:57,729
gonna unbias it right so we're gonna do

1899
01:40:53,890 --> 01:41:01,690
two times the answer minus 0.5 that's

1900
01:40:57,729 --> 01:41:03,089
going to give us oops that's not what I

1901
01:41:01,689 --> 01:41:08,729
wanted

1902
01:41:03,090 --> 01:41:11,340
two times answer -1 that's what I wanted

1903
01:41:08,729 --> 01:41:13,589
I and then we're going to multiply that

1904
01:41:11,340 --> 01:41:15,750
by the max light intensity which we said

1905
01:41:13,590 --> 01:41:18,029
was 10 and what you can see there is we

1906
01:41:15,750 --> 01:41:21,270
actually get a fair bit of light out of

1907
01:41:18,029 --> 01:41:23,099
that now one thing that you may notice

1908
01:41:21,270 --> 01:41:25,350
about that is maybe that means this

1909
01:41:23,100 --> 01:41:27,630
encoding in general is not precise

1910
01:41:25,350 --> 01:41:33,230
enough and the max light intensity can't

1911
01:41:27,630 --> 01:41:36,239
be 10 right not with an encoding that

1912
01:41:33,229 --> 01:41:38,549
small and that could be part of it too

1913
01:41:36,239 --> 01:41:40,439
right like that could be the fact that

1914
01:41:38,550 --> 01:41:43,020
that encoding is it's not good enough

1915
01:41:40,439 --> 01:41:47,189
could be another way that we're seeing

1916
01:41:43,020 --> 01:41:52,020
the that that lighting reconstruction be

1917
01:41:47,189 --> 01:41:54,359
bad but but you know we can reduce that

1918
01:41:52,020 --> 01:41:55,920
and we can also try to handle our zeros

1919
01:41:54,359 --> 01:41:58,500
better so what we could try to do there

1920
01:41:55,920 --> 01:42:04,109
say no we want this to map to exactly

1921
01:41:58,500 --> 01:42:05,789
zero and so maybe we need to include the

1922
01:42:04,109 --> 01:42:08,359
biasing in there so let's take a look at

1923
01:42:05,789 --> 01:42:11,069
how what the GPU actually is going to do

1924
01:42:08,359 --> 01:42:13,949
look what the exact unpack equation is

1925
01:42:11,069 --> 01:42:16,500
whether there's a 0.5 Pius in there or

1926
01:42:13,949 --> 01:42:18,899
whether there isn't I'm not sure like

1927
01:42:16,500 --> 01:42:21,229
whether it's doing this exactly or what

1928
01:42:18,899 --> 01:42:24,449
not I assume it is doing that exactly

1929
01:42:21,229 --> 01:42:27,739
and so what that means is we would

1930
01:42:24,449 --> 01:42:30,179
actually want to subtract that value

1931
01:42:27,739 --> 01:42:32,880
from it right we would want we would

1932
01:42:30,180 --> 01:42:34,320
want to when we do the answer minus one

1933
01:42:32,880 --> 01:42:39,239
we would watch they want to do the

1934
01:42:34,319 --> 01:42:46,019
answer - 1.03 bla bla bla right like we

1935
01:42:39,239 --> 01:42:48,329
would want this right that makes some

1936
01:42:46,020 --> 01:42:50,460
sense because we care a lot about that

1937
01:42:48,329 --> 01:42:52,350
zero value and we want to make sure that

1938
01:42:50,460 --> 01:42:54,840
it actually falls off to an actual zero

1939
01:42:52,350 --> 01:42:56,190
value and there's a number of ways you

1940
01:42:54,840 --> 01:42:57,930
could do that but that's like one of

1941
01:42:56,189 --> 01:43:01,219
them right oops

1942
01:42:57,930 --> 01:43:01,220
not you there

1943
01:43:05,710 --> 01:43:10,369
so we can just adjust for that bias and

1944
01:43:08,930 --> 01:43:12,469
that's not a huge deal but we definitely

1945
01:43:10,369 --> 01:43:16,309
want zero to be 0 and then the question

1946
01:43:12,469 --> 01:43:20,510
is are we - you know how how rigid is

1947
01:43:16,310 --> 01:43:24,020
our where's our stair step there but it

1948
01:43:20,510 --> 01:43:26,600
looks again it looks pretty darn good

1949
01:43:24,020 --> 01:43:30,320
right in terms of reconstructing a

1950
01:43:26,600 --> 01:43:32,450
radial fall-off you know I'm pretty darn

1951
01:43:30,319 --> 01:43:34,159
happy with that I'm not sure what you

1952
01:43:32,449 --> 01:43:37,069
would really want if that wasn't good

1953
01:43:34,159 --> 01:43:46,719
enough for you right that looks pretty

1954
01:43:37,069 --> 01:43:46,719
nice to me doesn't it I think it does

1955
01:43:47,590 --> 01:43:53,680
yeah um so I think that's pretty good I

1956
01:43:51,729 --> 01:43:55,419
have no complaints about that and just

1957
01:43:53,680 --> 01:43:57,490
looking at the edges they all look

1958
01:43:55,420 --> 01:43:59,140
pretty nice they look like they fall off

1959
01:43:57,489 --> 01:44:01,869
along the geometry the way that they

1960
01:43:59,140 --> 01:44:04,450
should and I I would be totally you know

1961
01:44:01,869 --> 01:44:07,329
I would be totally fine with that

1962
01:44:04,449 --> 01:44:09,279
so then from there right now we just got

1963
01:44:07,329 --> 01:44:11,380
to figure out like okay so what about

1964
01:44:09,279 --> 01:44:14,469
doing something like encoding the normal

1965
01:44:11,380 --> 01:44:16,449
direction right because one thing you

1966
01:44:14,470 --> 01:44:18,430
can see here right is that the normals

1967
01:44:16,449 --> 01:44:20,559
just hard set to west and so what you

1968
01:44:18,430 --> 01:44:22,270
see is as I walk over to these you see

1969
01:44:20,560 --> 01:44:24,070
no lighting on those faces because hey

1970
01:44:22,270 --> 01:44:26,560
the lighting is directly opposite them

1971
01:44:24,069 --> 01:44:28,539
you come over here you see lighting on

1972
01:44:26,560 --> 01:44:29,920
these faces because the lighting is

1973
01:44:28,539 --> 01:44:31,119
coming directly from the correct

1974
01:44:29,920 --> 01:44:33,220
direction so these are the brightest

1975
01:44:31,119 --> 01:44:34,840
that can possibly be and then you got

1976
01:44:33,220 --> 01:44:36,430
like some limited brightness in the

1977
01:44:34,840 --> 01:44:39,730
areas of things that are sort of facing

1978
01:44:36,430 --> 01:44:41,500
more orthogonal to those right but the

1979
01:44:39,729 --> 01:44:43,119
question is what if we want this light

1980
01:44:41,500 --> 01:44:44,680
to actually have some directionality to

1981
01:44:43,119 --> 01:44:47,229
it and you can see as I move it around

1982
01:44:44,680 --> 01:44:49,090
what I would like to say is this should

1983
01:44:47,229 --> 01:44:49,869
be in the direction of light and this

1984
01:44:49,090 --> 01:44:51,400
should be in the direction of light

1985
01:44:49,869 --> 01:44:52,779
they're both pointing towards the light

1986
01:44:51,399 --> 01:44:54,939
the thing that's pointing away from the

1987
01:44:52,779 --> 01:44:56,920
light would be like these faces over

1988
01:44:54,939 --> 01:44:57,819
here like those are pointing away from

1989
01:44:56,920 --> 01:44:59,800
the light

1990
01:44:57,819 --> 01:45:01,769
right and so they should have anything

1991
01:44:59,800 --> 01:45:04,180
but these faces here definitely should

1992
01:45:01,770 --> 01:45:05,350
and so if we want to start encoding the

1993
01:45:04,180 --> 01:45:07,150
direction of that light in there what I

1994
01:45:05,350 --> 01:45:10,660
was wondering is what if we encoded that

1995
01:45:07,149 --> 01:45:13,210
just the direction and try to

1996
01:45:10,659 --> 01:45:15,729
interpolate try to reconstruct that with

1997
01:45:13,210 --> 01:45:17,890
the trilinear filter by taking the light

1998
01:45:15,729 --> 01:45:21,309
Direction doing a trilinear filtering it

1999
01:45:17,890 --> 01:45:23,890
and then normalizing it right so we are

2000
01:45:21,310 --> 01:45:27,520
trying to reintroduce the non-linearity

2001
01:45:23,890 --> 01:45:30,039
of the interpolation it won't be speed

2002
01:45:27,520 --> 01:45:31,240
correct because it will be doing a

2003
01:45:30,039 --> 01:45:32,949
linear interpolation that then we

2004
01:45:31,239 --> 01:45:35,559
normalizes so what you'll get is that

2005
01:45:32,949 --> 01:45:40,659
standard sort of lerp versus slurp

2006
01:45:35,560 --> 01:45:42,190
difference there but it you know it's

2007
01:45:40,659 --> 01:45:43,989
it's the worst possible case because

2008
01:45:42,189 --> 01:45:48,339
unlike slurp which is typically

2009
01:45:43,989 --> 01:45:53,399
quaternion you know we're talking about

2010
01:45:48,340 --> 01:45:53,400
the slurp of a vector which would be

2011
01:45:54,060 --> 01:45:59,550
quite a bit different than just a

2012
01:45:56,109 --> 01:45:59,549
normalized lerp of a vector

2013
01:46:00,439 --> 01:46:04,500
so I'm not sure if that would produce

2014
01:46:02,579 --> 01:46:06,000
artifacts that we don't like either but

2015
01:46:04,500 --> 01:46:07,948
what I would like to do is I'd like to

2016
01:46:06,000 --> 01:46:10,590
see it right I'd like to see that for

2017
01:46:07,948 --> 01:46:12,539
myself so let's suppose we were going to

2018
01:46:10,590 --> 01:46:15,150
shove some crap down there what would

2019
01:46:12,539 --> 01:46:17,130
that look like what I'd like to do is

2020
01:46:15,149 --> 01:46:18,750
let's take advantage of the fact that we

2021
01:46:17,130 --> 01:46:20,670
have some samplers here and what I'm

2022
01:46:18,750 --> 01:46:24,569
going to do is just try to jam it down

2023
01:46:20,670 --> 01:46:26,310
the samplers we currently have right so

2024
01:46:24,569 --> 01:46:28,198
instead of this stuff we're not gonna

2025
01:46:26,310 --> 01:46:30,120
we're not gonna code these light fires

2026
01:46:28,198 --> 01:46:33,839
anymore we're going to code that West

2027
01:46:30,119 --> 01:46:37,319
value which we did and then the light

2028
01:46:33,840 --> 01:46:39,180
end value we're gonna do all this a

2029
01:46:37,319 --> 01:46:41,488
little bit differently so I'm gonna

2030
01:46:39,180 --> 01:46:46,760
comment these lines out these lines go

2031
01:46:41,488 --> 01:46:49,619
away so actually let me do it this way

2032
01:46:46,760 --> 01:46:52,860
so these lines will go away we'll only

2033
01:46:49,619 --> 01:46:55,590
sampling the western direction now of

2034
01:46:52,859 --> 01:46:58,649
our lighting and that should produce no

2035
01:46:55,590 --> 01:47:01,199
change now right because the other ones

2036
01:46:58,649 --> 01:47:03,210
weren't providing anything and so all I

2037
01:47:01,198 --> 01:47:06,869
really want to do now is change the way

2038
01:47:03,210 --> 01:47:09,689
that I am like reconstructing the light

2039
01:47:06,869 --> 01:47:11,039
West normal so the light west normal

2040
01:47:09,689 --> 01:47:12,329
instead of being what it was before

2041
01:47:11,039 --> 01:47:13,948
where we just know that it's coming from

2042
01:47:12,329 --> 01:47:16,800
in western direction what I want to do

2043
01:47:13,948 --> 01:47:19,229
here is actually grab the light west

2044
01:47:16,800 --> 01:47:21,989
direction out of a texture so we'll say

2045
01:47:19,229 --> 01:47:26,669
that what we did is inside light sampler

2046
01:47:21,988 --> 01:47:29,609
East I'm going to actually have the

2047
01:47:26,670 --> 01:47:31,920
light Direction encoding and so we're

2048
01:47:29,609 --> 01:47:37,409
just gonna grab that out and use that

2049
01:47:31,920 --> 01:47:40,699
but I would like to I need it to be able

2050
01:47:37,409 --> 01:47:44,340
to be positive and negative right now

2051
01:47:40,698 --> 01:47:46,500
what I'm gonna do to give myself a

2052
01:47:44,340 --> 01:47:49,110
little bit more resolution here because

2053
01:47:46,500 --> 01:47:52,439
I think we can cheat a little bit in

2054
01:47:49,109 --> 01:47:56,009
this point is I'm going to take two of

2055
01:47:52,439 --> 01:47:59,750
these and subtract them I'm going to

2056
01:47:56,010 --> 01:48:07,050
take in fact let's do north and south

2057
01:47:59,750 --> 01:48:11,520
sorry so snore - south so we can encode

2058
01:48:07,050 --> 01:48:13,920
zero to one in our North and negative

2059
01:48:11,520 --> 01:48:16,380
one to zero in our side

2060
01:48:13,920 --> 01:48:18,809
flipped so this will allow me to do full

2061
01:48:16,380 --> 01:48:21,569
negative one to one without sacrificing

2062
01:48:18,809 --> 01:48:23,340
any precision of the 0-255 and coding of

2063
01:48:21,569 --> 01:48:24,448
the normal which is already not that

2064
01:48:23,340 --> 01:48:27,420
great of including of a floating-point

2065
01:48:24,448 --> 01:48:28,738
number but it's pretty good for only

2066
01:48:27,420 --> 01:48:31,679
numbers from zero to one

2067
01:48:28,738 --> 01:48:33,808
it's some resolution there so let's go

2068
01:48:31,679 --> 01:48:37,590
ahead and encode that we know this is

2069
01:48:33,809 --> 01:48:39,510
the light normal oh and by the way after

2070
01:48:37,590 --> 01:48:42,840
we do that I would like to normalize it

2071
01:48:39,510 --> 01:48:45,449
so light west end equals Naz like west

2072
01:48:42,840 --> 01:48:46,770
end right so I'm going to normalize it

2073
01:48:45,448 --> 01:48:50,368
we can try it with and without that

2074
01:48:46,770 --> 01:48:53,219
normalization so now what I like to do

2075
01:48:50,368 --> 01:48:54,960
is encode that correctly so in here we

2076
01:48:53,219 --> 01:48:57,328
do all this garbage and whatever I'm

2077
01:48:54,960 --> 01:48:59,880
actually going to add some some

2078
01:48:57,328 --> 01:49:03,299
modification in here so what I want to

2079
01:48:59,880 --> 01:49:07,739
do is say that the light normal which we

2080
01:49:03,300 --> 01:49:12,329
have I'm going to take and encode using

2081
01:49:07,738 --> 01:49:20,759
the BG RI pack function here in fact let

2082
01:49:12,328 --> 01:49:22,618
me just do this so usually the BG re

2083
01:49:20,760 --> 01:49:24,750
pack what I want to do now is say well

2084
01:49:22,618 --> 01:49:26,519
you know what the alpha value is going

2085
01:49:24,750 --> 01:49:28,469
to be nothing because we don't have any

2086
01:49:26,520 --> 01:49:33,270
alpha value that we need to come in here

2087
01:49:28,469 --> 01:49:35,849
at all and then the north and south is

2088
01:49:33,270 --> 01:49:38,250
going to pack in the information about

2089
01:49:35,849 --> 01:49:40,110
the direction of the light source so

2090
01:49:38,250 --> 01:49:42,868
what I'm going to do is I'm going to

2091
01:49:40,109 --> 01:49:50,339
take and I'm going to do a clamp zero to

2092
01:49:42,868 --> 01:49:55,399
one of the light normals X the light

2093
01:49:50,340 --> 01:49:55,400
normals Y and the light normalcy

2094
01:49:58,578 --> 01:50:03,439
like so and so what we're doing here is

2095
01:50:02,118 --> 01:50:08,029
we're just saying look let's go ahead

2096
01:50:03,439 --> 01:50:09,198
and give us the the positive version and

2097
01:50:08,029 --> 01:50:11,090
then what I'm going to do is it may be

2098
01:50:09,198 --> 01:50:14,689
the same exact thing for the south but

2099
01:50:11,090 --> 01:50:17,170
for the negatives right so what I want

2100
01:50:14,689 --> 01:50:21,109
to do here is clamp the negative version

2101
01:50:17,170 --> 01:50:24,020
so again I'm just saying look take the

2102
01:50:21,109 --> 01:50:25,698
positive component of the normal stuff

2103
01:50:24,020 --> 01:50:27,199
it into the north take the negative

2104
01:50:25,698 --> 01:50:29,178
component of normal stuff it in the

2105
01:50:27,198 --> 01:50:31,939
south and then we'll reconstruct it by

2106
01:50:29,179 --> 01:50:33,440
just adding those two together but you

2107
01:50:31,939 --> 01:50:35,629
know we're subtracting the south because

2108
01:50:33,439 --> 01:50:37,578
it was negated to begin with right

2109
01:50:35,630 --> 01:50:42,469
so that should allow me to reconstruct

2110
01:50:37,578 --> 01:50:44,259
the direction of the light somehow of

2111
01:50:42,469 --> 01:50:45,770
course we have a shader error here

2112
01:50:44,260 --> 01:50:49,280
syntax error

2113
01:50:45,770 --> 01:50:52,420
I'll expect identifier light West and

2114
01:50:49,279 --> 01:50:52,420
comma or semicolon

2115
01:50:58,469 --> 01:51:07,480
right you are sorry about that mr.

2116
01:51:04,659 --> 01:51:08,649
shader compiler um and so let's just

2117
01:51:07,479 --> 01:51:12,000
take a look at what happens if we

2118
01:51:08,649 --> 01:51:14,949
interpolate that normal direction now

2119
01:51:12,000 --> 01:51:17,439
and I'm again all I want to do now is

2120
01:51:14,949 --> 01:51:20,170
just see what I get for artifacts right

2121
01:51:17,439 --> 01:51:23,488
so I'm trying to see what kind of

2122
01:51:20,170 --> 01:51:26,350
artifacts I get when I do that

2123
01:51:23,488 --> 01:51:27,789
interpolation and now what you can see

2124
01:51:26,350 --> 01:51:30,100
hopefully is like let's say I stand

2125
01:51:27,789 --> 01:51:32,170
there what we should see is that the

2126
01:51:30,100 --> 01:51:33,370
reflection against the back surfaces

2127
01:51:32,170 --> 01:51:35,949
should be nothing right because the

2128
01:51:33,369 --> 01:51:38,979
lights coming from here and so that back

2129
01:51:35,949 --> 01:51:41,079
surface should be nothing looking at how

2130
01:51:38,979 --> 01:51:42,609
it reflects on the light yeah I mean

2131
01:51:41,079 --> 01:51:50,319
it's that looks pretty good

2132
01:51:42,609 --> 01:51:52,179
I don't see any artifacts really um I'd

2133
01:51:50,319 --> 01:51:56,099
have to squint pretty hard to look at

2134
01:51:52,180 --> 01:51:56,100
those to see those right

2135
01:52:01,750 --> 01:52:10,810
um and so I would consider that kind of

2136
01:52:05,090 --> 01:52:14,900
a limited success to be honest right

2137
01:52:10,810 --> 01:52:18,140
and you know we're don't forget we also

2138
01:52:14,899 --> 01:52:19,969
have some some kind of random crap going

2139
01:52:18,140 --> 01:52:22,670
in there that we probably want would

2140
01:52:19,969 --> 01:52:25,429
want to get rid of here if you remember

2141
01:52:22,670 --> 01:52:29,029
so the way that we were doing our

2142
01:52:25,429 --> 01:52:31,369
clamping here is the drip the sort of

2143
01:52:29,029 --> 01:52:33,409
contribution of the light source when we

2144
01:52:31,369 --> 01:52:35,539
multiply in the light direction that

2145
01:52:33,409 --> 01:52:37,159
it's coming from we're including this

2146
01:52:35,539 --> 01:52:40,609
sort of like biased version of that

2147
01:52:37,159 --> 01:52:42,679
because we have plate based lighting and

2148
01:52:40,609 --> 01:52:44,238
so if we were to sort of say well you

2149
01:52:42,679 --> 01:52:45,710
know maybe we're actually gonna do

2150
01:52:44,238 --> 01:52:47,678
something where we reconstruct light

2151
01:52:45,710 --> 01:52:50,359
directions a little bit more precisely

2152
01:52:47,679 --> 01:52:52,760
we probably wouldn't do that so we'd

2153
01:52:50,359 --> 01:52:57,710
probably say something more like just do

2154
01:52:52,760 --> 01:53:00,020
the direct version of this and that's

2155
01:52:57,710 --> 01:53:00,920
gonna be more representative of what we

2156
01:53:00,020 --> 01:53:03,460
would see

2157
01:53:00,920 --> 01:53:06,890
so that would look more like this right

2158
01:53:03,460 --> 01:53:10,100
and again no real artifacts there that

2159
01:53:06,890 --> 01:53:13,460
I'm that I'm seeing pretty much works

2160
01:53:10,100 --> 01:53:14,989
exactly as I would expect right so hey

2161
01:53:13,460 --> 01:53:16,850
this turned out to be a lesson for all

2162
01:53:14,988 --> 01:53:18,769
of us including me in reconstruction

2163
01:53:16,850 --> 01:53:20,989
today I not really thought about it much

2164
01:53:18,770 --> 01:53:23,300
because you know we hadn't done anything

2165
01:53:20,988 --> 01:53:24,919
with that trailer filtering but if you

2166
01:53:23,300 --> 01:53:26,690
look at the reconstruction we're able to

2167
01:53:24,920 --> 01:53:29,960
reconstruct those functions quite well

2168
01:53:26,689 --> 01:53:31,849
the cube was not reconstructing well now

2169
01:53:29,960 --> 01:53:34,340
that may be because we just didn't think

2170
01:53:31,850 --> 01:53:37,579
of the right way to reconstruct the cube

2171
01:53:34,340 --> 01:53:39,529
but it makes me feel like what we really

2172
01:53:37,579 --> 01:53:42,079
want to do is take a step back and say

2173
01:53:39,529 --> 01:53:44,149
okay what can't like that reconstruction

2174
01:53:42,079 --> 01:53:48,079
looks so nice

2175
01:53:44,149 --> 01:53:49,549
what can we shove down there that would

2176
01:53:48,079 --> 01:53:52,309
reconstruct with a tri linear filter

2177
01:53:49,550 --> 01:53:54,650
because it sure seems to work okay right

2178
01:53:52,310 --> 01:53:56,539
it does seem like the tri linear filter

2179
01:53:54,649 --> 01:53:58,849
we will reconstruct this lighting well

2180
01:53:56,539 --> 01:54:01,460
so let's just forget about the box idea

2181
01:53:58,850 --> 01:54:03,320
cuz maybe that's stupid and let's find

2182
01:54:01,460 --> 01:54:05,420
something we can reconstruct maybe

2183
01:54:03,319 --> 01:54:09,158
that's where Clara monix maybe that's

2184
01:54:05,420 --> 01:54:13,510
not I'm not sure but

2185
01:54:09,158 --> 01:54:15,308
you know that's that's I think what

2186
01:54:13,510 --> 01:54:22,979
we're looking at here let's go ahead and

2187
01:54:15,309 --> 01:54:25,179
go to the QA oh right it's a it's a

2188
01:54:22,979 --> 01:54:30,269
Saturday so the mouse doesn't work on

2189
01:54:25,179 --> 01:54:30,269
Linux what was I thinking

2190
01:55:13,979 --> 01:55:19,019
Oh alko is asking are you gonna upgrade

2191
01:55:16,890 --> 01:55:20,700
the stream for kur to the latest when

2192
01:55:19,020 --> 01:55:23,310
you and how and working on so no I

2193
01:55:20,699 --> 01:55:26,340
branched to my own editor now and it's

2194
01:55:23,310 --> 01:55:30,570
on my codebase specifically so it's kind

2195
01:55:26,340 --> 01:55:31,650
of a separate thing I only want to use

2196
01:55:30,569 --> 01:55:34,170
stuff on stream that that's like

2197
01:55:31,649 --> 01:55:34,710
available to the general public if that

2198
01:55:34,170 --> 01:55:42,350
makes sense

2199
01:55:34,710 --> 01:55:42,350
so I'm gonna stick with the one I've got

2200
01:56:11,538 --> 01:56:18,880
for us late comers what helps move the

2201
01:56:13,788 --> 01:56:22,389
voxel like outline of the lighting so

2202
01:56:18,880 --> 01:56:25,809
this is for people who missed the stream

2203
01:56:22,389 --> 01:56:29,210
so there's a couple different things I

2204
01:56:25,809 --> 01:56:33,230
and basically what I would say is the

2205
01:56:29,210 --> 01:56:40,038
high-level overview of it is that we

2206
01:56:33,229 --> 01:56:42,468
kind of have to remember that whatever

2207
01:56:40,038 --> 01:56:44,420
we choose as our reconstruction scheme

2208
01:56:42,469 --> 01:56:46,639
on the back end so in the fragment

2209
01:56:44,420 --> 01:56:48,980
shader we have to reconstruct lighting

2210
01:56:46,639 --> 01:56:50,569
from some crappy version of the lighting

2211
01:56:48,979 --> 01:56:51,859
right because the good version of the

2212
01:56:50,569 --> 01:56:54,170
lighting is everything's ray traced

2213
01:56:51,859 --> 01:56:57,889
always everywhere and you have you know

2214
01:56:54,170 --> 01:56:59,719
a machine with 20 Archie X 20 80s in it

2215
01:56:57,889 --> 01:57:01,940
and you can actually just run real time

2216
01:56:59,719 --> 01:57:03,649
full ray tracing on every scene all the

2217
01:57:01,939 --> 01:57:09,109
time in real time hall with no smoothing

2218
01:57:03,649 --> 01:57:11,779
right in some magical world since we

2219
01:57:09,109 --> 01:57:13,848
know we can't have that because even

2220
01:57:11,779 --> 01:57:16,429
high-end systems today can't do that

2221
01:57:13,849 --> 01:57:19,360
right you don't do full ray tracing of

2222
01:57:16,429 --> 01:57:22,158
everything every frame with no smoothing

2223
01:57:19,359 --> 01:57:25,509
you pretty much need to have some way of

2224
01:57:22,158 --> 01:57:28,759
taking your lighting and reconstructing

2225
01:57:25,510 --> 01:57:30,590
some low-quality version of it into

2226
01:57:28,760 --> 01:57:33,800
something that looks good and that

2227
01:57:30,590 --> 01:57:36,500
reconstruction itself is a critical part

2228
01:57:33,800 --> 01:57:37,849
of the algorithm so there's the sampling

2229
01:57:36,500 --> 01:57:39,559
of the lighting in the first place and

2230
01:57:37,849 --> 01:57:42,170
that's critical because it has to be

2231
01:57:39,559 --> 01:57:45,170
done quickly and you want to produce a

2232
01:57:42,170 --> 01:57:48,139
sort of diffuse lighting effects and

2233
01:57:45,170 --> 01:57:50,658
profit and light propagation that helps

2234
01:57:48,139 --> 01:57:52,309
make the game look nice so that actually

2235
01:57:50,658 --> 01:57:53,448
has to happen but the other thing you

2236
01:57:52,309 --> 01:57:56,510
have to do is you have to be able to

2237
01:57:53,448 --> 01:57:57,919
reconstruct the lighting from whatever

2238
01:57:56,510 --> 01:58:00,590
you sampled when you push it down to the

2239
01:57:57,920 --> 01:58:02,029
graphics card per pixel you've got every

2240
01:58:00,590 --> 01:58:04,400
sample it because you know you don't

2241
01:58:02,029 --> 01:58:06,018
have you got to reconstruct it you don't

2242
01:58:04,399 --> 01:58:07,518
you know you don't have the actual

2243
01:58:06,019 --> 01:58:08,719
lighting information at every pixel you

2244
01:58:07,519 --> 01:58:11,269
only have the lighting information at

2245
01:58:08,719 --> 01:58:13,368
some sparse set of locations and the

2246
01:58:11,269 --> 01:58:14,989
question is what can you do to

2247
01:58:13,368 --> 01:58:16,698
reconstruct the lighting in a way that

2248
01:58:14,988 --> 01:58:19,098
looks good and you almost don't care

2249
01:58:16,698 --> 01:58:20,598
about accuracy too much I mean you don't

2250
01:58:19,099 --> 01:58:22,489
you need it to be somewhat related to

2251
01:58:20,599 --> 01:58:23,989
the actual lighting but the most

2252
01:58:22,488 --> 01:58:24,379
important thing by far is that there we

2253
01:58:23,988 --> 01:58:26,089
go

2254
01:58:24,380 --> 01:58:27,829
good right because if the reconstruction

2255
01:58:26,090 --> 01:58:31,069
doesn't look good is it matter how

2256
01:58:27,829 --> 01:58:32,988
accurate it is it will be ugly and and

2257
01:58:31,069 --> 01:58:34,698
the most important thing in a game is

2258
01:58:32,988 --> 01:58:35,869
that it not be ugly right it needs to be

2259
01:58:34,698 --> 01:58:36,948
attractive looking because the whole

2260
01:58:35,869 --> 01:58:40,670
point of the graphics is that people

2261
01:58:36,948 --> 01:58:40,969
want to play it right does that make

2262
01:58:40,670 --> 01:58:47,469
sense

2263
01:58:40,969 --> 01:58:51,350
I and so what that means is that in the

2264
01:58:47,469 --> 01:58:53,679
reconstruction we have to consider what

2265
01:58:51,350 --> 01:58:56,389
things can our reconstruction

2266
01:58:53,679 --> 01:58:59,090
reconstruct well and which ones can't it

2267
01:58:56,389 --> 01:59:00,380
now there's a question of which kind of

2268
01:58:59,090 --> 01:59:01,699
reconstruction you want to use because

2269
01:59:00,380 --> 01:59:04,609
there's lots of ways we could do a

2270
01:59:01,698 --> 01:59:06,678
reconstruction we know that the graphics

2271
01:59:04,609 --> 01:59:08,988
card does trilinear filtering on voxels

2272
01:59:06,679 --> 01:59:11,350
very quickly right so in terms of

2273
01:59:08,988 --> 01:59:14,299
reconstructing a 3d effect like lighting

2274
01:59:11,350 --> 01:59:16,310
if we put down a low resolution voxel

2275
01:59:14,300 --> 01:59:20,029
and we ask it to reconstruct the

2276
01:59:16,310 --> 01:59:22,159
lighting with a low resolution voxel we

2277
01:59:20,029 --> 01:59:25,009
know the Gravatar can try linearly

2278
01:59:22,158 --> 01:59:27,679
interpolate values quickly so the

2279
01:59:25,010 --> 01:59:31,100
question for today was if we don't

2280
01:59:27,679 --> 01:59:32,929
change that right so we we stick with

2281
01:59:31,100 --> 01:59:37,820
just trilinear filtering as the

2282
01:59:32,929 --> 01:59:41,840
reconstruction you know I'm saying what

2283
01:59:37,819 --> 01:59:44,750
will what could we do what values could

2284
01:59:41,840 --> 01:59:48,260
we push into our voxel that a trilinear

2285
01:59:44,750 --> 01:59:51,889
filter will reconstruct pleasantly right

2286
01:59:48,260 --> 01:59:54,590
and so one thing that that we know that

2287
01:59:51,889 --> 01:59:56,150
try linear and bilinear filtering can

2288
01:59:54,590 --> 01:59:58,969
interpolate properly is assigned

2289
01:59:56,149 --> 02:00:01,009
distance field a scientist ins field is

2290
01:59:58,969 --> 02:00:03,350
basically saying for every point that i

2291
02:00:01,010 --> 02:00:07,400
specify something so each each cube of

2292
02:00:03,350 --> 02:00:09,920
the voxel or oblong as our case they're

2293
02:00:07,399 --> 02:00:12,109
sort of rectangular prisms but you know

2294
02:00:09,920 --> 02:00:15,380
for each rectangular solid in the prism

2295
02:00:12,109 --> 02:00:17,299
in the voxel we know we can only have

2296
02:00:15,380 --> 02:00:19,550
one thing there and let's say it's at

2297
02:00:17,300 --> 02:00:21,770
the center of the voxel so we know we've

2298
02:00:19,550 --> 02:00:24,529
got sort of a regular grid of sample

2299
02:00:21,770 --> 02:00:26,540
points if we try linearly interpolate

2300
02:00:24,529 --> 02:00:30,229
those we know that one thing we can do

2301
02:00:26,539 --> 02:00:32,350
is if every point in that voxel was just

2302
02:00:30,229 --> 02:00:37,419
recording the distance from something

2303
02:00:32,350 --> 02:00:42,329
right some distance and the distance was

2304
02:00:37,420 --> 02:00:45,069
continuous then when we actually

2305
02:00:42,329 --> 02:00:48,579
interpolate that we will get back out in

2306
02:00:45,069 --> 02:00:51,039
a correct answer right we will get back

2307
02:00:48,579 --> 02:00:56,920
out and actually correct distance from

2308
02:00:51,039 --> 02:00:58,989
the thing that will happen right and in

2309
02:00:56,920 --> 02:01:04,480
order for that to happen and to look

2310
02:00:58,989 --> 02:01:08,019
proper though we can't clamp to 0 we

2311
02:01:04,479 --> 02:01:11,379
could clamp to 0 if we didn't care what

2312
02:01:08,020 --> 02:01:13,900
the light was at zero but we do so what

2313
02:01:11,380 --> 02:01:18,310
we need is we need our range to extend

2314
02:01:13,899 --> 02:01:20,769
past zero we need to have what is

2315
02:01:18,310 --> 02:01:23,380
effectively resolution out in the dark

2316
02:01:20,770 --> 02:01:26,200
area right and what I drew on stream was

2317
02:01:23,380 --> 02:01:27,880
showing the fact that if you look at

2318
02:01:26,199 --> 02:01:29,139
what happens in a region at the edge of

2319
02:01:27,880 --> 02:01:31,000
the light source you have like a one

2320
02:01:29,140 --> 02:01:33,970
value or a positive value and then a

2321
02:01:31,000 --> 02:01:35,739
bunch of zero values around it that's

2322
02:01:33,970 --> 02:01:37,539
not sufficient to reconstruct what the

2323
02:01:35,739 --> 02:01:39,429
shape should have been there so the

2324
02:01:37,539 --> 02:01:41,529
reason you actually need a signed

2325
02:01:39,430 --> 02:01:45,490
distance field is you don't really care

2326
02:01:41,529 --> 02:01:47,679
about the sign of it what you care about

2327
02:01:45,489 --> 02:01:50,289
is that you have resolution of your

2328
02:01:47,680 --> 02:01:52,360
distance field past the end of the

2329
02:01:50,289 --> 02:01:54,760
lighting and we know the lighting ends

2330
02:01:52,359 --> 02:01:56,559
at zero intensity so that means we need

2331
02:01:54,760 --> 02:01:58,960
things that define what happens out in

2332
02:01:56,560 --> 02:02:00,760
the negative intensity because at that

2333
02:01:58,960 --> 02:02:03,279
interpolation border we need to know

2334
02:02:00,760 --> 02:02:04,960
what it looked like right now you can

2335
02:02:03,279 --> 02:02:06,039
equivalently do this by just saying we

2336
02:02:04,960 --> 02:02:07,539
don't have a signed distance field

2337
02:02:06,039 --> 02:02:11,319
artist this field goes from zero to

2338
02:02:07,539 --> 02:02:15,430
something but our actual like that where

2339
02:02:11,319 --> 02:02:19,840
the lighting ends is at point four right

2340
02:02:15,430 --> 02:02:22,900
so black is point four and zero is

2341
02:02:19,840 --> 02:02:24,630
actually super black right super no

2342
02:02:22,899 --> 02:02:28,420
lighting

2343
02:02:24,630 --> 02:02:30,069
um this is related to just general

2344
02:02:28,420 --> 02:02:31,989
isosurface sampling so you could say

2345
02:02:30,069 --> 02:02:34,829
like our ISO surface is now at point

2346
02:02:31,989 --> 02:02:37,269
five so it was zero point five and one

2347
02:02:34,829 --> 02:02:39,579
darkness is at point five so we have

2348
02:02:37,270 --> 02:02:41,200
full resolution fact we can slide where

2349
02:02:39,579 --> 02:02:45,819
that is anywhere we want we could say

2350
02:02:41,199 --> 02:02:47,649
that pure dark is 0.2 and so zero to 0.2

2351
02:02:45,819 --> 02:02:50,710
is the like boundary area where we

2352
02:02:47,649 --> 02:02:55,119
encode what happens in darkness

2353
02:02:50,710 --> 02:02:57,039
and then we use the 0.2 - 0.2 1.0 to

2354
02:02:55,119 --> 02:02:59,260
encode the light that's probably smarter

2355
02:02:57,039 --> 02:03:01,510
we probably don't need full resolution

2356
02:02:59,260 --> 02:03:03,430
in darkness that we need in lightness so

2357
02:03:01,510 --> 02:03:05,920
we can actually play with that quite a

2358
02:03:03,430 --> 02:03:08,320
bit and you know that's something we

2359
02:03:05,920 --> 02:03:12,399
should should tweak but if you look at

2360
02:03:08,319 --> 02:03:14,949
what happens if we treat it as a signed

2361
02:03:12,399 --> 02:03:16,779
distance field versus not so meaning we

2362
02:03:14,949 --> 02:03:20,429
if we have resolution in the darks or we

2363
02:03:16,779 --> 02:03:24,069
don't if you look at what happens there

2364
02:03:20,430 --> 02:03:27,039
so remember this is what the the quality

2365
02:03:24,069 --> 02:03:30,429
of the lighting as it stands right and

2366
02:03:27,039 --> 02:03:33,039
it looks pretty darn nice then we go and

2367
02:03:30,430 --> 02:03:35,650
we we look at what happens if we don't

2368
02:03:33,039 --> 02:03:38,649
use that scientist ins field so let's

2369
02:03:35,649 --> 02:03:40,509
say I suppose I clamp these values well

2370
02:03:38,649 --> 02:03:44,319
you know we can actually just watch this

2371
02:03:40,510 --> 02:03:47,140
happen so there you can see sort of the

2372
02:03:44,319 --> 02:03:48,099
outline and it's nice and encircle

2373
02:03:47,140 --> 02:03:51,579
alright and everything looks kind of

2374
02:03:48,100 --> 02:03:54,370
Pleasant if I go here and I change these

2375
02:03:51,579 --> 02:03:57,250
clamp values to zero now we've lost that

2376
02:03:54,369 --> 02:04:01,000
resolution so now the resolution that we

2377
02:03:57,250 --> 02:04:03,279
had in the blacks is gone and if we go

2378
02:04:01,000 --> 02:04:07,300
back and look at what happens when we

2379
02:04:03,279 --> 02:04:10,649
recompile and reload into that did that

2380
02:04:07,300 --> 02:04:16,980
actually work it did not

2381
02:04:10,649 --> 02:04:19,738
I was like that still looks like that's

2382
02:04:16,979 --> 02:04:23,129
gonna compile there we go

2383
02:04:19,738 --> 02:04:25,079
and so now if we recompile and we wait

2384
02:04:23,130 --> 02:04:27,710
till it to reload here what we'll see on

2385
02:04:25,079 --> 02:04:31,380
the border is do you see how it becomes

2386
02:04:27,710 --> 02:04:33,210
rectangular right can you see all those

2387
02:04:31,380 --> 02:04:36,239
rectangular artifacts that are now in

2388
02:04:33,210 --> 02:04:38,489
there right and again that's just

2389
02:04:36,238 --> 02:04:40,559
because now we don't know it's just

2390
02:04:38,488 --> 02:04:42,718
zeros out there so the interpolator

2391
02:04:40,560 --> 02:04:45,300
doesn't know what it's looking at and it

2392
02:04:42,719 --> 02:04:47,908
creates hard lines because it doesn't

2393
02:04:45,300 --> 02:04:50,159
know what should happen in those extra

2394
02:04:47,908 --> 02:04:52,619
bilinear samples it's like taking one or

2395
02:04:50,158 --> 02:04:55,408
two of your bilinear samples out of the

2396
02:04:52,619 --> 02:04:58,319
equation entirely and it really doesn't

2397
02:04:55,408 --> 02:05:00,658
work to do that right you need all four

2398
02:04:58,319 --> 02:05:01,948
bilinear samples to correctly tell you

2399
02:05:00,658 --> 02:05:05,698
what the function looks like when it

2400
02:05:01,948 --> 02:05:08,309
pass through that area and so restoring

2401
02:05:05,698 --> 02:05:11,219
that ability gets us what we need right

2402
02:05:08,310 --> 02:05:13,100
and now you can see kind of right that

2403
02:05:11,219 --> 02:05:15,810
we get that nice smooth interpolation

2404
02:05:13,100 --> 02:05:18,719
this is the same thing by the way if

2405
02:05:15,810 --> 02:05:22,460
you've ever seen like originally where

2406
02:05:18,719 --> 02:05:22,460
we did this for texture interpolation so

2407
02:05:27,170 --> 02:05:37,380
all I'm doing is literally like this

2408
02:05:31,609 --> 02:05:40,619
right this is this is exactly the same

2409
02:05:37,380 --> 02:05:42,810
it's exactly analogous right so if you

2410
02:05:40,619 --> 02:05:44,880
look at like valve I would consider this

2411
02:05:42,810 --> 02:05:50,520
a fairly seminal paper on this kind of

2412
02:05:44,880 --> 02:05:52,909
reconstruction if you look at what Chris

2413
02:05:50,520 --> 02:05:56,489
Greene did at valve he was a

2414
02:05:52,908 --> 02:05:57,988
lookingglass person he wrote if you

2415
02:05:56,488 --> 02:06:00,629
don't know who Chris green is it's

2416
02:05:57,988 --> 02:06:06,149
because he's not a self-promoting kind

2417
02:06:00,630 --> 02:06:09,420
of person he is probably one of the most

2418
02:06:06,149 --> 02:06:11,279
like accomplished graphics people he

2419
02:06:09,420 --> 02:06:15,658
wrote the first texture mapper you

2420
02:06:11,279 --> 02:06:18,238
probably ever saw in real time and he

2421
02:06:15,658 --> 02:06:21,089
was the person who wrote the texture

2422
02:06:18,238 --> 02:06:23,369
member for Ultima Underworld the first

2423
02:06:21,090 --> 02:06:24,630
like really full 3d game that existed in

2424
02:06:23,369 --> 02:06:26,189
the world

2425
02:06:24,630 --> 02:06:31,289
for the most part at least that you ever

2426
02:06:26,189 --> 02:06:33,329
played on a PC and that's him right so

2427
02:06:31,289 --> 02:06:35,220
anyway uh if you look at what he did

2428
02:06:33,329 --> 02:06:37,170
here this is exactly the same this is

2429
02:06:35,220 --> 02:06:40,020
what he was doing he was saying look

2430
02:06:37,170 --> 02:06:42,569
when we interpolate using a bilinear

2431
02:06:40,020 --> 02:06:44,520
filter if we're actually interpreting

2432
02:06:42,569 --> 02:06:46,859
the Terp lighting the color the problem

2433
02:06:44,520 --> 02:06:49,500
is that if that doesn't interpreter

2434
02:06:46,859 --> 02:06:51,239
plate properly at the borders so if we

2435
02:06:49,500 --> 02:06:54,149
then just alpha test something for like

2436
02:06:51,239 --> 02:06:56,609
a decal it looks like crap because it's

2437
02:06:54,149 --> 02:07:01,019
basically just like using the stair step

2438
02:06:56,609 --> 02:07:04,079
pattern you can see it right and so if

2439
02:07:01,020 --> 02:07:08,220
what we do instead is we actually track

2440
02:07:04,079 --> 02:07:10,769
what happens outside the region where we

2441
02:07:08,220 --> 02:07:12,630
actually have the full brightness what

2442
02:07:10,770 --> 02:07:14,700
you end up with is something that does

2443
02:07:12,630 --> 02:07:18,079
reconstruct properly and then alpha test

2444
02:07:14,699 --> 02:07:22,199
works exactly as you would expect right

2445
02:07:18,079 --> 02:07:24,539
and so that's all I was doing is exactly

2446
02:07:22,199 --> 02:07:28,409
that I was saying look let's track what

2447
02:07:24,539 --> 02:07:30,750
happens outside the bright area so that

2448
02:07:28,409 --> 02:07:34,260
we can correctly reproduce that fall-off

2449
02:07:30,750 --> 02:07:37,710
now like I said we don't really need all

2450
02:07:34,260 --> 02:07:45,000
of this resolution right we don't really

2451
02:07:37,710 --> 02:07:47,850
need to have like we can clamp this and

2452
02:07:45,000 --> 02:07:50,729
and do it in a different way right so

2453
02:07:47,850 --> 02:07:52,530
instead of negative one to one here what

2454
02:07:50,729 --> 02:07:55,079
we could is clamp it to the range of

2455
02:07:52,529 --> 02:07:58,039
like negative 0.2 and I'm gonna put it

2456
02:07:55,079 --> 02:07:58,039
to do in there even for that

2457
02:08:19,569 --> 02:08:29,659
and all I'm trying to say there is like

2458
02:08:22,579 --> 02:08:31,640
look you really don't need the the same

2459
02:08:29,659 --> 02:08:33,229
resolution in darkness as you do in the

2460
02:08:31,640 --> 02:08:34,940
lightness because all we need to do is

2461
02:08:33,229 --> 02:08:38,119
make sure that our borders are nicely

2462
02:08:34,939 --> 02:08:40,369
clean but after it after we get outside

2463
02:08:38,119 --> 02:08:42,710
that that border region we don't need to

2464
02:08:40,369 --> 02:08:44,180
know anymore so we just need to be able

2465
02:08:42,710 --> 02:08:45,739
to capture the steepest possible

2466
02:08:44,180 --> 02:08:46,970
fall-off at the border and once we do

2467
02:08:45,739 --> 02:08:48,819
that we don't need the resolution

2468
02:08:46,970 --> 02:08:56,030
anymore so we probably want to bias that

2469
02:08:48,819 --> 02:08:57,409
away spiney said what's the reason you

2470
02:08:56,029 --> 02:08:59,569
want to keep with the light probes

2471
02:08:57,409 --> 02:09:02,720
approach instead of using light entities

2472
02:08:59,569 --> 02:09:07,599
I guess I'm not sure I understand the

2473
02:09:02,720 --> 02:09:07,600
question what is a light entity

2474
02:09:12,359 --> 02:09:17,339
I mean obviously I know what a light

2475
02:09:15,390 --> 02:09:19,200
probe entity is because that's what

2476
02:09:17,340 --> 02:09:21,329
we're doing we have those those look and

2477
02:09:19,199 --> 02:09:22,859
those light probes are our light

2478
02:09:21,329 --> 02:09:26,000
preventatives but don't know what a

2479
02:09:22,859 --> 02:09:26,000
light entity is

2480
02:10:11,439 --> 02:10:14,309
hmm

2481
02:10:21,448 --> 02:10:25,618
so spiney says light source so yeah

2482
02:10:23,788 --> 02:10:32,488
again I guess I don't really understand

2483
02:10:25,618 --> 02:10:34,198
so just to recap the lights can be

2484
02:10:32,488 --> 02:10:36,808
placed in the world wherever you want

2485
02:10:34,198 --> 02:10:40,728
and that's separate so there are light

2486
02:10:36,809 --> 02:10:42,838
there are lights everywhere right

2487
02:10:40,729 --> 02:10:45,449
anywhere you want you can just place

2488
02:10:42,838 --> 02:10:48,059
light sources so any entity can emit a

2489
02:10:45,448 --> 02:10:51,958
light source if you want it to that's

2490
02:10:48,059 --> 02:10:54,149
there but that really doesn't have any

2491
02:10:51,958 --> 02:10:56,099
bearing on us how we actually have to

2492
02:10:54,149 --> 02:10:58,469
compute what happens to lighting so the

2493
02:10:56,099 --> 02:11:00,538
idea behind light probes is it had that

2494
02:10:58,469 --> 02:11:02,819
light probes don't put light into the

2495
02:11:00,538 --> 02:11:04,918
world light probes are there to say

2496
02:11:02,819 --> 02:11:06,059
where we're going to simulate light

2497
02:11:04,918 --> 02:11:09,358
bouncing around

2498
02:11:06,059 --> 02:11:10,708
right so the light probes are ways of

2499
02:11:09,359 --> 02:11:13,229
saying we're going to capture what the

2500
02:11:10,708 --> 02:11:15,418
lighting looks like in this area from

2501
02:11:13,229 --> 02:11:17,128
indirect light sources like things that

2502
02:11:15,418 --> 02:11:20,128
bounce off walls and all that sort of

2503
02:11:17,128 --> 02:11:22,349
stuff right and that's what a light

2504
02:11:20,128 --> 02:11:24,929
probe is it has nothing to do with where

2505
02:11:22,349 --> 02:11:27,059
light emits from light emitters are

2506
02:11:24,929 --> 02:11:30,059
totally separate and they can be

2507
02:11:27,059 --> 02:11:32,369
anywhere and they're unrelated to the

2508
02:11:30,059 --> 02:11:35,069
light probes right the light probes are

2509
02:11:32,368 --> 02:11:37,918
where we compute lighting not where we

2510
02:11:35,069 --> 02:11:41,280
emit lighting emit emission happens

2511
02:11:37,918 --> 02:11:43,559
anywhere and on any entity and we don't

2512
02:11:41,279 --> 02:11:46,708
care right we don't need to we don't

2513
02:11:43,559 --> 02:11:49,679
need to restrict where light is emitted

2514
02:11:46,708 --> 02:11:51,988
because emitting light isn't necessarily

2515
02:11:49,679 --> 02:11:53,578
expensive it is in some sense if you

2516
02:11:51,988 --> 02:11:56,658
want to bias your sampling to make sure

2517
02:11:53,578 --> 02:12:00,858
that you count for them more potentially

2518
02:11:56,658 --> 02:12:03,898
but in general I guess I would say the

2519
02:12:00,859 --> 02:12:06,449
the emission is mostly not the problem

2520
02:12:03,899 --> 02:12:07,949
it's the figuring out doing all the ray

2521
02:12:06,448 --> 02:12:09,988
casting to determine where that light

2522
02:12:07,948 --> 02:12:13,948
bounces and that's what we need to

2523
02:12:09,988 --> 02:12:18,648
restrict which is why we have light

2524
02:12:13,948 --> 02:12:21,958
probes instead of doing it per pixel

2525
02:12:18,649 --> 02:12:25,159
right because doing doing the actual

2526
02:12:21,958 --> 02:12:27,708
light transport per pixel is prohibitive

2527
02:12:25,158 --> 02:12:32,429
it's one way to think of it right

2528
02:12:27,708 --> 02:12:34,229
because you know there's 1920 by 1080

2529
02:12:32,429 --> 02:12:35,550
pixels on the screen at a minimum

2530
02:12:34,229 --> 02:12:39,179
before you even count like multi

2531
02:12:35,550 --> 02:12:41,390
sampling or transparency and so if you

2532
02:12:39,180 --> 02:12:50,700
just think about how many points that is

2533
02:12:41,390 --> 02:12:52,619
where - like where - like simulate the

2534
02:12:50,699 --> 02:12:54,329
bounce lighting it's it's just wait a

2535
02:12:52,619 --> 02:12:56,550
minute so the light probes our way of

2536
02:12:54,329 --> 02:13:00,269
reducing that down because we don't need

2537
02:12:56,550 --> 02:13:02,090
the light to change too dramatically if

2538
02:13:00,270 --> 02:13:04,380
that makes sense

2539
02:13:02,090 --> 02:13:05,460
like from pixel to pixel the lighting

2540
02:13:04,380 --> 02:13:07,909
probably shouldn't change too

2541
02:13:05,460 --> 02:13:07,909
dramatically

2542
02:13:11,689 --> 02:13:15,419
could you explain about the real-time

2543
02:13:13,680 --> 02:13:18,270
fluid simulation for games for example

2544
02:13:15,420 --> 02:13:19,710
how to simulate swirling smoke have you

2545
02:13:18,270 --> 02:13:22,020
read the paper BIOS damn on the

2546
02:13:19,710 --> 02:13:25,619
real-time fluid solver for games it's

2547
02:13:22,020 --> 02:13:27,030
really interesting in my opinion so I

2548
02:13:25,619 --> 02:13:28,829
guess I'm not sure which ghost damn

2549
02:13:27,029 --> 02:13:30,989
paper you're talking about are you

2550
02:13:28,829 --> 02:13:34,289
talking about the original paper called

2551
02:13:30,989 --> 02:13:37,130
stable fluids or are you talking about a

2552
02:13:34,289 --> 02:13:37,130
different paper

2553
02:13:55,118 --> 02:14:07,389
I mean I can bring it up for a few if

2554
02:13:57,279 --> 02:14:10,090
you know so you talk about this we're

2555
02:14:07,389 --> 02:14:12,789
talking about a later paper yo stem is

2556
02:14:10,090 --> 02:14:14,020
you know pretty prolific or at least he

2557
02:14:12,789 --> 02:14:16,149
was I guess I don't know if he is

2558
02:14:14,020 --> 02:14:19,020
anymore because I haven't read any

2559
02:14:16,149 --> 02:14:24,399
ghosts and papers recently but you know

2560
02:14:19,020 --> 02:14:27,639
he's he's made a lot of contributions to

2561
02:14:24,399 --> 02:14:31,179
gastrous so I don't know which paper

2562
02:14:27,639 --> 02:14:32,440
you're talking about but this is the one

2563
02:14:31,179 --> 02:14:34,690
that I thought you might be talking

2564
02:14:32,439 --> 02:14:42,009
about so you have to tell me if it is or

2565
02:14:34,689 --> 02:14:44,368
not this paper okay click on that link

2566
02:14:42,010 --> 02:14:44,369
there

2567
02:14:58,670 --> 02:15:02,390
to get it

2568
02:15:02,560 --> 02:15:05,969
[Music]

2569
02:15:16,220 --> 02:15:21,340
okay yeah so it this is basically the

2570
02:15:22,420 --> 02:15:28,010
this is basically the same paper it's

2571
02:15:24,710 --> 02:15:30,819
just a tutorial version of the paper

2572
02:15:28,010 --> 02:15:30,820
basically

2573
02:15:44,069 --> 02:15:46,699
yeah

2574
02:15:46,850 --> 02:15:51,950
yep yep okay so yes we are talking about

2575
02:15:49,670 --> 02:15:53,960
this paper we're just talking about a

2576
02:15:51,949 --> 02:15:58,099
tutorial form basically on this paper

2577
02:15:53,960 --> 02:16:08,300
more or less um so I guess what I would

2578
02:15:58,100 --> 02:16:11,329
say is I you know not today would be the

2579
02:16:08,300 --> 02:16:14,600
answer this is a pretty in-depth topic

2580
02:16:11,329 --> 02:16:22,250
so what you have to remember is that

2581
02:16:14,600 --> 02:16:28,340
fluid solvers trying to think of how to

2582
02:16:22,250 --> 02:16:30,590
give a high-level over here simulating

2583
02:16:28,340 --> 02:16:32,840
fluids was a very challenging problem in

2584
02:16:30,590 --> 02:16:35,930
computer graphics for a while

2585
02:16:32,840 --> 02:16:39,860
largely because it requires a lot of

2586
02:16:35,930 --> 02:16:41,809
computation and if you think about

2587
02:16:39,860 --> 02:16:45,051
what's actually happening happening in

2588
02:16:41,809 --> 02:16:48,649
fluid simulation in the real world it's

2589
02:16:45,050 --> 02:16:52,010
you know trillions of molecules that are

2590
02:16:48,649 --> 02:16:55,250
all moving around to form a sort of blob

2591
02:16:52,010 --> 02:16:57,559
right and the thing that we usually get

2592
02:16:55,250 --> 02:16:59,989
away with in computer graphics for

2593
02:16:57,559 --> 02:17:04,039
solids is rather than tracking all

2594
02:16:59,989 --> 02:17:05,629
trillion molecules in you know the 3d

2595
02:17:04,040 --> 02:17:08,690
cube that's bouncing around your screen

2596
02:17:05,629 --> 02:17:10,909
we just remember the general outline of

2597
02:17:08,690 --> 02:17:12,950
the cube right we make a boundary

2598
02:17:10,909 --> 02:17:14,809
representation that just says here are

2599
02:17:12,950 --> 02:17:18,740
the six faces of the cube and then we

2600
02:17:14,809 --> 02:17:21,800
just simulate it as one continuous shape

2601
02:17:18,739 --> 02:17:26,930
that everything in it moves together

2602
02:17:21,800 --> 02:17:28,340
right one like rigid shape and so this

2603
02:17:26,930 --> 02:17:30,639
drastically reduces the number of

2604
02:17:28,340 --> 02:17:32,750
computations by like a trillion right

2605
02:17:30,639 --> 02:17:34,639
because instead of simulating every

2606
02:17:32,750 --> 02:17:36,889
molecule in there we just simulate one

2607
02:17:34,639 --> 02:17:39,170
molecule effectively which is the cube

2608
02:17:36,889 --> 02:17:41,329
moving around and we just place all of

2609
02:17:39,170 --> 02:17:43,340
the rest of the molecules automatically

2610
02:17:41,329 --> 02:17:44,629
because we know where they exist build

2611
02:17:43,340 --> 02:17:46,250
up through this thing so it's really

2612
02:17:44,629 --> 02:17:49,099
simple right it just turns this really

2613
02:17:46,250 --> 02:17:50,780
dense ridiculous problem of simulating

2614
02:17:49,100 --> 02:17:52,159
the physical behavior of molecules into

2615
02:17:50,780 --> 02:17:54,140
something incredibly simple we know that

2616
02:17:52,159 --> 02:17:56,090
all the molecules just move together

2617
02:17:54,139 --> 02:17:59,569
right and it's a reasonable

2618
02:17:56,090 --> 02:18:00,559
simplification for our purposes now when

2619
02:17:59,569 --> 02:18:03,279
you start to talk about things

2620
02:18:00,559 --> 02:18:06,319
like fluid dynamics which is like

2621
02:18:03,280 --> 02:18:08,810
compressible fluids like smoke which

2622
02:18:06,319 --> 02:18:10,819
means that they can be denser or less

2623
02:18:08,809 --> 02:18:13,069
dense depending on where they are or

2624
02:18:10,819 --> 02:18:15,229
incompressible fluids like water which

2625
02:18:13,069 --> 02:18:16,489
is to say that water can't really change

2626
02:18:15,229 --> 02:18:18,559
its density if density is the same

2627
02:18:16,489 --> 02:18:19,489
everywhere and so you push on one and it

2628
02:18:18,559 --> 02:18:21,710
comes out the other end

2629
02:18:19,489 --> 02:18:28,850
it doesn't first create a dense version

2630
02:18:21,710 --> 02:18:30,979
and then slowly you know decompress you

2631
02:18:28,850 --> 02:18:34,159
end up with a much more challenging

2632
02:18:30,979 --> 02:18:35,751
problem because now you need some way of

2633
02:18:34,159 --> 02:18:37,790
actually simulating what goes on

2634
02:18:35,751 --> 02:18:40,041
throughout the entire fluid right the

2635
02:18:37,790 --> 02:18:41,869
entire shape and you need a way to

2636
02:18:40,040 --> 02:18:43,909
represent the fact that it's boundary is

2637
02:18:41,870 --> 02:18:47,600
continuously deforming right the shape

2638
02:18:43,909 --> 02:18:51,069
the can contents of this thing it's

2639
02:18:47,600 --> 02:18:51,069
constantly changing what it looks like

2640
02:18:51,341 --> 02:18:57,200
the stable fluids paper was the first

2641
02:18:55,010 --> 02:19:00,969
paper to apply what I would call a

2642
02:18:57,200 --> 02:19:03,200
backwards integration method or a

2643
02:19:00,969 --> 02:19:05,420
backwards Euler I don't know how you

2644
02:19:03,200 --> 02:19:08,180
want to talk about it there are terms

2645
02:19:05,421 --> 02:19:10,880
for these sorts of things it was the

2646
02:19:08,180 --> 02:19:13,001
first time that anyone in graphics had

2647
02:19:10,880 --> 02:19:15,921
ever applied as far as I know a

2648
02:19:13,001 --> 02:19:18,860
backwards Euler integration method into

2649
02:19:15,921 --> 02:19:21,050
something like fluids as a result the

2650
02:19:18,860 --> 02:19:23,569
fluids themselves didn't explode anymore

2651
02:19:21,050 --> 02:19:25,251
with large time steps previously things

2652
02:19:23,569 --> 02:19:26,630
were forward integrators these are

2653
02:19:25,251 --> 02:19:27,950
integrators that look at the current

2654
02:19:26,630 --> 02:19:29,059
time step backwards and forwards

2655
02:19:27,950 --> 02:19:30,260
integrators again the whole huge table

2656
02:19:29,059 --> 02:19:31,489
this is why I said can't really tell you

2657
02:19:30,260 --> 02:19:33,860
much about it today but I'm trying give

2658
02:19:31,489 --> 02:19:36,139
you the overview backwards and Foilers

2659
02:19:33,860 --> 02:19:38,961
forwards integrators the only difference

2660
02:19:36,139 --> 02:19:40,880
between them is in one case a forwards

2661
02:19:38,960 --> 02:19:43,399
integrator says one day when what is the

2662
02:19:40,880 --> 02:19:46,579
time what is my state of my system what

2663
02:19:43,399 --> 02:19:48,139
does it look like now I am then going to

2664
02:19:46,579 --> 02:19:49,341
take whatever my time step is and I'm

2665
02:19:48,139 --> 02:19:50,989
gonna move everything forward by that

2666
02:19:49,341 --> 02:19:53,591
time step using a physical simulation

2667
02:19:50,989 --> 02:19:56,300
right that's forwards integration

2668
02:19:53,591 --> 02:19:58,761
backwards integration does sort of the

2669
02:19:56,300 --> 02:20:02,001
opposite of that what it does is it says

2670
02:19:58,761 --> 02:20:04,341
all right I haven't imagined that

2671
02:20:02,001 --> 02:20:06,050
there's some hypothetical future state I

2672
02:20:04,341 --> 02:20:08,631
don't know what it is that's what I need

2673
02:20:06,050 --> 02:20:11,439
to find out but what I want to do is I

2674
02:20:08,630 --> 02:20:14,478
want to figure out what future state

2675
02:20:11,440 --> 02:20:17,810
would have an inverse

2676
02:20:14,478 --> 02:20:21,198
simulation that would arrive back at the

2677
02:20:17,809 --> 02:20:22,398
current state that I have right and I

2678
02:20:21,199 --> 02:20:25,069
know this sounds kind of

2679
02:20:22,398 --> 02:20:28,430
counterintuitive it's like wait what are

2680
02:20:25,068 --> 02:20:31,908
you talking about but the difference is

2681
02:20:28,430 --> 02:20:36,970
actually pretty straightforward one is a

2682
02:20:31,908 --> 02:20:39,439
solve and one is a expression right and

2683
02:20:36,969 --> 02:20:41,389
just to give you a little bit of

2684
02:20:39,439 --> 02:20:43,369
perspective on what that is I could draw

2685
02:20:41,389 --> 02:20:46,998
that really quickly I don't want to get

2686
02:20:43,369 --> 02:20:48,710
too far in the weeds here but the

2687
02:20:46,998 --> 02:20:50,930
easiest way to think of it is let's

2688
02:20:48,709 --> 02:20:54,078
suppose I have a position of a particle

2689
02:20:50,930 --> 02:20:56,420
right p and then I have some time step

2690
02:20:54,078 --> 02:21:01,158
right that I'm going to take right this

2691
02:20:56,420 --> 02:21:04,609
is my time step so this is really a

2692
02:21:01,158 --> 02:21:06,288
delta time right so have some times I'm

2693
02:21:04,609 --> 02:21:08,600
going to take and I know that like I got

2694
02:21:06,289 --> 02:21:10,729
some physical crap happening like a

2695
02:21:08,600 --> 02:21:14,090
velocity or something here and so like

2696
02:21:10,728 --> 02:21:15,618
the new point is gonna be some time step

2697
02:21:14,090 --> 02:21:17,029
times the velocity right or something

2698
02:21:15,619 --> 02:21:18,109
like this right so I've got a particle

2699
02:21:17,029 --> 02:21:19,850
that's moving through space I'm gonna

2700
02:21:18,109 --> 02:21:22,670
move it somewhere it's got a speed and

2701
02:21:19,850 --> 02:21:24,109
whatever right normal physics stuff well

2702
02:21:22,670 --> 02:21:25,609
normally the way we think about running

2703
02:21:24,109 --> 02:21:27,078
this in games if we don't know very much

2704
02:21:25,609 --> 02:21:30,020
about physics which is most people who

2705
02:21:27,078 --> 02:21:32,119
write games we would end up with

2706
02:21:30,020 --> 02:21:34,069
something that was like okay to compute

2707
02:21:32,119 --> 02:21:35,930
the new position what I want to do is

2708
02:21:34,068 --> 02:21:38,748
take the old position and I want to add

2709
02:21:35,930 --> 02:21:40,818
T times some like velocity vector that

2710
02:21:38,748 --> 02:21:43,578
is simulated with physics right or

2711
02:21:40,818 --> 02:21:46,068
something so this this is like not as

2712
02:21:43,578 --> 02:21:47,299
simple as as it looks like it's not just

2713
02:21:46,068 --> 02:21:49,068
a vector usually there's some physics

2714
02:21:47,299 --> 02:21:50,868
simulation with bouncing and speed and

2715
02:21:49,068 --> 02:21:52,038
acceleration whatever else but it

2716
02:21:50,869 --> 02:21:54,998
basically comes down to something that

2717
02:21:52,039 --> 02:21:59,869
looks like this equation old physician

2718
02:21:54,998 --> 02:22:02,959
plus some time variant thing equals new

2719
02:21:59,869 --> 02:22:04,489
position right and this is totally fine

2720
02:22:02,959 --> 02:22:06,528
for some things like particle physics

2721
02:22:04,488 --> 02:22:07,549
effects and things like we're doing in

2722
02:22:06,529 --> 02:22:09,078
hand-made here that we don't care too

2723
02:22:07,549 --> 02:22:11,469
much about we'll write this equation all

2724
02:22:09,078 --> 02:22:13,488
the time it's fine but once you get to

2725
02:22:11,469 --> 02:22:15,590
physics equations that have sort of

2726
02:22:13,488 --> 02:22:18,228
stiff parameters to them things that can

2727
02:22:15,590 --> 02:22:21,648
explode things that can go like really

2728
02:22:18,228 --> 02:22:23,898
off the rails if you have things that

2729
02:22:21,648 --> 02:22:26,328
have too much force or too many forces

2730
02:22:23,898 --> 02:22:27,920
acting on them or who knows what get bad

2731
02:22:26,328 --> 02:22:29,779
feedback loops

2732
02:22:27,920 --> 02:22:32,601
these Kings can explode pretty quickly

2733
02:22:29,780 --> 02:22:35,030
right and so what backwards integration

2734
02:22:32,601 --> 02:22:37,521
looks like is that's a little bit

2735
02:22:35,030 --> 02:22:39,650
different right what it looks like

2736
02:22:37,521 --> 02:22:41,511
instead is says saying well instead of

2737
02:22:39,649 --> 02:22:44,569
doing like a forward computation here

2738
02:22:41,511 --> 02:22:48,409
what I actually want to do is say let me

2739
02:22:44,569 --> 02:22:50,989
try to phrase what I'm actually doing in

2740
02:22:48,409 --> 02:22:53,239
terms of solving for the actual change

2741
02:22:50,989 --> 02:22:57,079
instead of just prescribing what the

2742
02:22:53,239 --> 02:22:59,209
change actually is right and so what you

2743
02:22:57,079 --> 02:23:02,690
tend to do instead is you see stuff like

2744
02:22:59,209 --> 02:23:06,470
saying well what if I said that I had a

2745
02:23:02,690 --> 02:23:10,239
P Prime right so I had like my new state

2746
02:23:06,470 --> 02:23:21,500
and I wanted to say that if I took away

2747
02:23:10,239 --> 02:23:24,021
right if I took away the actual if I was

2748
02:23:21,500 --> 02:23:26,329
to say how would I get back to the

2749
02:23:24,021 --> 02:23:30,230
original state that I had so I did an

2750
02:23:26,329 --> 02:23:33,440
inverted look back at the physics what

2751
02:23:30,229 --> 02:23:37,189
would that the solution to that equation

2752
02:23:33,440 --> 02:23:41,329
be right because I don't actually know

2753
02:23:37,190 --> 02:23:42,829
this value right so instead of just

2754
02:23:41,329 --> 02:23:46,011
looking at is something that's pre

2755
02:23:42,829 --> 02:23:47,629
solved right that's looking at it as

2756
02:23:46,011 --> 02:23:50,479
something that is just an expression

2757
02:23:47,629 --> 02:23:52,699
where I already know this and I can

2758
02:23:50,479 --> 02:23:55,430
compute this directly so I just

2759
02:23:52,700 --> 02:23:57,950
literally update the thing you instead

2760
02:23:55,431 --> 02:24:00,681
look of it as a solve of what would this

2761
02:23:57,950 --> 02:24:04,400
have to be in order to make this

2762
02:24:00,681 --> 02:24:08,030
equation be true right and you can think

2763
02:24:04,399 --> 02:24:09,229
of it sort of as saying well and I agree

2764
02:24:08,030 --> 02:24:11,420
this is really hand waving so I

2765
02:24:09,229 --> 02:24:12,979
apologize I should probably think about

2766
02:24:11,420 --> 02:24:14,210
how to present this in a good way just

2767
02:24:12,979 --> 02:24:15,859
not something I work with very commonly

2768
02:24:14,209 --> 02:24:19,129
so I'm not sure how to give it the

2769
02:24:15,860 --> 02:24:20,780
five-second overview you know things

2770
02:24:19,129 --> 02:24:22,340
that I'm really familiar with I can bust

2771
02:24:20,780 --> 02:24:24,261
out a good explanation for quickly

2772
02:24:22,341 --> 02:24:26,210
things that I'm like only dealt with a

2773
02:24:24,261 --> 02:24:29,750
little bit in the past they're harder

2774
02:24:26,209 --> 02:24:34,399
for me to to do on the spot but you can

2775
02:24:29,750 --> 02:24:38,540
think of it as sort of you know if you

2776
02:24:34,399 --> 02:24:41,209
imagine a diagram and I said all right

2777
02:24:38,540 --> 02:24:44,000
look we're gonna have

2778
02:24:41,209 --> 02:24:46,398
some orbital dynamics thing right and

2779
02:24:44,000 --> 02:24:51,079
it's like it's a thing that's going

2780
02:24:46,398 --> 02:24:52,939
around a circle right so I'm orbiting

2781
02:24:51,079 --> 02:24:56,148
I'm a planet let's say I don't know

2782
02:24:52,939 --> 02:24:58,488
here's earth right and the more burning

2783
02:24:56,148 --> 02:25:00,559
this planet I got my satellite it's it's

2784
02:24:58,488 --> 02:25:02,409
great right everyone's happy it's

2785
02:25:00,559 --> 02:25:05,930
wonderful

2786
02:25:02,409 --> 02:25:08,059
so as I'm orbiting this planet what I

2787
02:25:05,930 --> 02:25:10,479
know is that if I imagined that I could

2788
02:25:08,059 --> 02:25:12,350
just do the like cosine theta sine theta

2789
02:25:10,478 --> 02:25:13,938
pre-integrated version of this thing

2790
02:25:12,350 --> 02:25:17,449
well then I can just go around the

2791
02:25:13,939 --> 02:25:19,100
circle perfectly right but if my oral

2792
02:25:17,449 --> 02:25:20,540
equation was much too complicated like

2793
02:25:19,100 --> 02:25:22,040
it normally is when you're doing physics

2794
02:25:20,540 --> 02:25:23,750
it's not a simple like war but you can

2795
02:25:22,040 --> 02:25:25,489
just write a closed-form equation for I

2796
02:25:23,750 --> 02:25:29,148
have some complicated physics I'm trying

2797
02:25:25,488 --> 02:25:31,270
to simulate right then what I know is I

2798
02:25:29,148 --> 02:25:34,909
only get an answer at an instant in time

2799
02:25:31,270 --> 02:25:37,609
right I only can ask at this moment what

2800
02:25:34,909 --> 02:25:39,529
is like the force on this thing and so

2801
02:25:37,609 --> 02:25:41,779
let's imagine for a simple equation like

2802
02:25:39,529 --> 02:25:43,729
something like this where we know

2803
02:25:41,779 --> 02:25:45,800
everything we know exactly what it

2804
02:25:43,728 --> 02:25:47,568
should do just to illustrate but you

2805
02:25:45,799 --> 02:25:49,099
have to remember you can't do this in

2806
02:25:47,568 --> 02:25:50,059
normal physics the equations are much

2807
02:25:49,100 --> 02:25:53,659
too complicated they cannot be

2808
02:25:50,059 --> 02:25:55,219
analytically integral period right what

2809
02:25:53,659 --> 02:25:57,139
happens to something like this equation

2810
02:25:55,219 --> 02:25:59,659
well what we know is that at any point

2811
02:25:57,139 --> 02:26:02,090
on here if we were to sample what the

2812
02:25:59,659 --> 02:26:03,770
force is well the force is like some

2813
02:26:02,090 --> 02:26:05,389
thing like over the direction something

2814
02:26:03,770 --> 02:26:07,729
like this and the force is something

2815
02:26:05,389 --> 02:26:09,698
like this or something right so you know

2816
02:26:07,728 --> 02:26:12,108
we know that we're always getting a

2817
02:26:09,699 --> 02:26:13,489
force that looks like that and we

2818
02:26:12,109 --> 02:26:15,920
produce a motion that looks like that

2819
02:26:13,488 --> 02:26:20,119
tangent right it's always tangent to the

2820
02:26:15,920 --> 02:26:22,189
circle right but since we're looking at

2821
02:26:20,120 --> 02:26:25,489
a linearized version at an instant in

2822
02:26:22,189 --> 02:26:27,979
time what happens if we actually are

2823
02:26:25,488 --> 02:26:29,959
taking a time step here well if you

2824
02:26:27,978 --> 02:26:32,898
think about what happens on the arc I

2825
02:26:29,959 --> 02:26:34,938
always get a little further away right

2826
02:26:32,898 --> 02:26:37,010
because what I'm looking at is I was

2827
02:26:34,939 --> 02:26:39,500
supposed to trace off if I look at just

2828
02:26:37,010 --> 02:26:40,639
just a little version there I was

2829
02:26:39,500 --> 02:26:43,969
supposed to trace off something that

2830
02:26:40,639 --> 02:26:46,068
looked like this right and I had a

2831
02:26:43,969 --> 02:26:48,170
motion a force that looked like this and

2832
02:26:46,068 --> 02:26:50,180
a motion a total motion when I added my

2833
02:26:48,170 --> 02:26:51,859
old motion in my new force a total

2834
02:26:50,180 --> 02:26:53,809
motion looked like that I get a little

2835
02:26:51,859 --> 02:26:54,461
further away from the circle and then

2836
02:26:53,809 --> 02:26:55,870
the next time

2837
02:26:54,460 --> 02:26:59,319
a little further away from a circle

2838
02:26:55,870 --> 02:27:02,050
right I get I go out right and the

2839
02:26:59,319 --> 02:27:04,449
bigger my time step the further I go out

2840
02:27:02,050 --> 02:27:07,239
right because at this time step is huge

2841
02:27:04,450 --> 02:27:11,051
I'm away off the circle right so those

2842
02:27:07,239 --> 02:27:13,511
instantaneous linear solutions they're

2843
02:27:11,050 --> 02:27:15,939
there right for an instant in time but

2844
02:27:13,511 --> 02:27:17,860
when you try to take it fixed a discrete

2845
02:27:15,940 --> 02:27:21,581
actual time step instead of a continuous

2846
02:27:17,860 --> 02:27:23,291
integration it's wrong and this is where

2847
02:27:21,581 --> 02:27:25,751
you get into second order third order

2848
02:27:23,290 --> 02:27:27,370
fourth order fifth order runge-kutta all

2849
02:27:25,751 --> 02:27:29,921
these like integrators they try to

2850
02:27:27,370 --> 02:27:32,170
correct for this by if the think is sort

2851
02:27:29,921 --> 02:27:34,989
of maybe a parabola or

2852
02:27:32,171 --> 02:27:36,610
cubic then we can get an exact and stay

2853
02:27:34,989 --> 02:27:40,690
on there so we get an actual curved

2854
02:27:36,610 --> 02:27:42,971
update right and so on but fundamentally

2855
02:27:40,690 --> 02:27:46,390
you're just fighting the problem you're

2856
02:27:42,970 --> 02:27:48,720
always gonna be off right and so what

2857
02:27:46,390 --> 02:27:51,100
happens is in these circumstances

2858
02:27:48,720 --> 02:27:52,960
anything that's a forward so forward

2859
02:27:51,101 --> 02:27:55,239
rung to cut off forward Euler any of

2860
02:27:52,960 --> 02:27:58,720
these sorts of integrators they that

2861
02:27:55,239 --> 02:28:01,661
update the step they all do some kind of

2862
02:27:58,720 --> 02:28:03,699
really bad feedback overshoot right so

2863
02:28:01,661 --> 02:28:05,681
as the time stepping creeps creases they

2864
02:28:03,700 --> 02:28:07,391
just they fly off the circle they fly

2865
02:28:05,681 --> 02:28:11,110
into the circle and out they do all

2866
02:28:07,390 --> 02:28:13,600
kinds of crazy stuff right and they're

2867
02:28:11,110 --> 02:28:15,280
all because of that same fundamental

2868
02:28:13,601 --> 02:28:17,230
problem of we take a look at the

2869
02:28:15,280 --> 02:28:20,700
function we're sampling it and we're

2870
02:28:17,229 --> 02:28:25,960
just we're going off the circle right

2871
02:28:20,700 --> 02:28:28,381
the way that backwards ones work is if

2872
02:28:25,960 --> 02:28:32,800
you imagine this is really just a field

2873
02:28:28,380 --> 02:28:35,529
right so remember if I've got equations

2874
02:28:32,800 --> 02:28:36,939
that I can plug a point in space and get

2875
02:28:35,530 --> 02:28:39,341
my orbit out which is this is how

2876
02:28:36,940 --> 02:28:41,771
physics works we have some stuff we feed

2877
02:28:39,341 --> 02:28:46,661
in right then I could have fed in any

2878
02:28:41,771 --> 02:28:50,739
point right any point would have told me

2879
02:28:46,661 --> 02:28:53,021
an answer to that question right so when

2880
02:28:50,739 --> 02:28:56,591
I ask this question any point would have

2881
02:28:53,021 --> 02:28:58,331
told me does that make sense so if I was

2882
02:28:56,591 --> 02:29:00,161
here in my orbit and I asked what the

2883
02:28:58,331 --> 02:29:02,979
force is it's gonna tell me you know the

2884
02:29:00,161 --> 02:29:05,021
force is like this or something and it's

2885
02:29:02,979 --> 02:29:06,460
gonna tell me that the that once I sum

2886
02:29:05,021 --> 02:29:08,079
those forces together with my previous

2887
02:29:06,460 --> 02:29:11,409
velocity I get this and I

2888
02:29:08,079 --> 02:29:13,090
be out here right well if I asked for

2889
02:29:11,409 --> 02:29:14,379
out here I'd get the same thing and if I

2890
02:29:13,090 --> 02:29:16,329
asked her out here I get the same thing

2891
02:29:14,379 --> 02:29:17,559
just adjusted for how far away I'm so

2892
02:29:16,329 --> 02:29:21,398
the gravity gets a little stronger a

2893
02:29:17,559 --> 02:29:25,000
little weaker and that you know right so

2894
02:29:21,398 --> 02:29:29,309
again backwards integrators what they do

2895
02:29:25,000 --> 02:29:33,579
is say find the point wherever that is

2896
02:29:29,309 --> 02:29:37,959
whose motion line would point back to

2897
02:29:33,579 --> 02:29:41,170
here right and what that's gonna do is

2898
02:29:37,959 --> 02:29:44,228
tell me like oh actually since if I look

2899
02:29:41,170 --> 02:29:46,989
right at trying to get the right motion

2900
02:29:44,228 --> 02:29:49,688
line if I if I was to ask this point

2901
02:29:46,989 --> 02:29:51,520
well that wouldn't the the the answer in

2902
02:29:49,689 --> 02:29:53,829
the forward case that wouldn't do it

2903
02:29:51,520 --> 02:29:55,899
because the tangent here looks like that

2904
02:29:53,829 --> 02:29:57,520
so the inverse tangent looks like that

2905
02:29:55,898 --> 02:30:01,148
and I don't get back to where I wanted

2906
02:29:57,520 --> 02:30:03,970
to be right so the answer would be well

2907
02:30:01,148 --> 02:30:05,739
alright so if I look it's probably like

2908
02:30:03,969 --> 02:30:08,228
I don't know maybe somewhere like here

2909
02:30:05,739 --> 02:30:11,318
right gives me that maybe someone like

2910
02:30:08,228 --> 02:30:14,590
there gives me that and so what you see

2911
02:30:11,318 --> 02:30:16,600
is rather than a thing that adds force

2912
02:30:14,590 --> 02:30:18,549
to the system in some direction kind of

2913
02:30:16,600 --> 02:30:20,770
violently what we actually get is

2914
02:30:18,549 --> 02:30:23,409
something that removes force from the

2915
02:30:20,770 --> 02:30:25,689
system it will take less force now

2916
02:30:23,409 --> 02:30:28,809
because I will I will actually

2917
02:30:25,689 --> 02:30:30,550
undershoot right and unlike ones even

2918
02:30:28,809 --> 02:30:32,139
these ones that undershoot they would

2919
02:30:30,549 --> 02:30:34,179
under shoot kind of badly and go off

2920
02:30:32,139 --> 02:30:39,670
this direction or out this way these

2921
02:30:34,180 --> 02:30:41,739
will always find someplace that had less

2922
02:30:39,670 --> 02:30:44,010
energy in the system than the one before

2923
02:30:41,739 --> 02:30:48,459
it right then then the forward version

2924
02:30:44,010 --> 02:30:51,239
and so what you will find is that if a

2925
02:30:48,459 --> 02:30:54,279
forward version would have spiraled out

2926
02:30:51,239 --> 02:30:56,799
this one will spiral gradually inward

2927
02:30:54,280 --> 02:31:01,479
until it eventually stops orbiting

2928
02:30:56,799 --> 02:31:07,748
altogether right okay

2929
02:31:01,478 --> 02:31:11,378
so that stamp paper really all that is

2930
02:31:07,748 --> 02:31:13,809
is it saying let's do this let's do

2931
02:31:11,379 --> 02:31:15,699
something that takes energy out of the

2932
02:31:13,809 --> 02:31:17,408
system instead of one that gives energy

2933
02:31:15,699 --> 02:31:21,069
into the system so that we know that

2934
02:31:17,408 --> 02:31:25,208
over time our fluids will always regress

2935
02:31:21,068 --> 02:31:27,068
back to no movement eventually again

2936
02:31:25,209 --> 02:31:30,159
perfect for games we don't want things

2937
02:31:27,068 --> 02:31:30,939
to explode right we really don't want

2938
02:31:30,158 --> 02:31:32,648
them to explode

2939
02:31:30,939 --> 02:31:34,270
we don't care if they gradually lose

2940
02:31:32,648 --> 02:31:36,218
energy and reset back to their original

2941
02:31:34,270 --> 02:31:37,810
form because we're gonna always add some

2942
02:31:36,218 --> 02:31:39,458
more energy into the system if we need

2943
02:31:37,809 --> 02:31:41,078
to and generally speaking we want this

2944
02:31:39,459 --> 02:31:46,359
anyway our fluids kind of want to come

2945
02:31:41,078 --> 02:31:48,158
back to rest right so that's fine too so

2946
02:31:46,359 --> 02:31:50,049
that's all that paper really was talking

2947
02:31:48,158 --> 02:31:53,228
about they also do a Fourier Fourier

2948
02:31:50,049 --> 02:31:54,310
domain transformation to do its layers

2949
02:31:53,228 --> 02:31:55,509
the long start with some other things I

2950
02:31:54,309 --> 02:31:58,478
got here but that's really all it was

2951
02:31:55,509 --> 02:32:01,449
right is that super relevant to games

2952
02:31:58,478 --> 02:32:04,269
well yes and no it's not that important

2953
02:32:01,449 --> 02:32:05,588
in some sense because really we kind of

2954
02:32:04,270 --> 02:32:07,238
know this we know that backwards

2955
02:32:05,588 --> 02:32:08,498
integrators do this it was a good

2956
02:32:07,238 --> 02:32:11,588
contribution because people haven't

2957
02:32:08,498 --> 02:32:17,318
thought about backwards in boiler with

2958
02:32:11,588 --> 02:32:18,728
respect to fluids and so that was a

2959
02:32:17,318 --> 02:32:20,680
really good contribution and super

2960
02:32:18,728 --> 02:32:23,228
important is it what you wanna do today

2961
02:32:20,680 --> 02:32:27,759
not really yes you'd probably do wants

2962
02:32:23,228 --> 02:32:30,009
to look backwards solver in a way but do

2963
02:32:27,759 --> 02:32:32,738
you want to only do grid based methods

2964
02:32:30,009 --> 02:32:34,148
for fluids absolutely not so if you're

2965
02:32:32,738 --> 02:32:36,158
starting today you wouldn't start with

2966
02:32:34,148 --> 02:32:37,718
the Sam stuff you would start with stuff

2967
02:32:36,158 --> 02:32:39,908
that's kind of many generations down

2968
02:32:37,718 --> 02:32:42,429
from that and typically what people use

2969
02:32:39,908 --> 02:32:45,218
now is what are called

2970
02:32:42,430 --> 02:32:48,100
like mixed ways of simulating the stand

2971
02:32:45,218 --> 02:32:50,408
paper just does find any element so all

2972
02:32:48,100 --> 02:32:52,689
it does is a grid right and it

2973
02:32:50,408 --> 02:32:53,798
stimulates on a grid that's not a very

2974
02:32:52,689 --> 02:32:55,389
good way to simulate floats anymore

2975
02:32:53,799 --> 02:32:58,989
typically what you now do is you have

2976
02:32:55,389 --> 02:33:00,759
particles and a grid and you use those

2977
02:32:58,988 --> 02:33:04,988
two things together to simulate your

2978
02:33:00,759 --> 02:33:06,789
fluid if that makes sense right and so

2979
02:33:04,988 --> 02:33:08,350
the stand paper is good understanding

2980
02:33:06,789 --> 02:33:09,909
it's very good it was a very good paper

2981
02:33:08,350 --> 02:33:11,799
at the time is it something you want

2982
02:33:09,908 --> 02:33:14,498
start with today no so I guess the way I

2983
02:33:11,799 --> 02:33:15,340
would say it and hopefully now you maybe

2984
02:33:14,498 --> 02:33:16,389
see a little bit

2985
02:33:15,340 --> 02:33:17,680
about the backwards roller you can see

2986
02:33:16,389 --> 02:33:19,719
what was the important countries the

2987
02:33:17,680 --> 02:33:22,180
paper was that it was how do we get

2988
02:33:19,719 --> 02:33:23,188
backwards integrators into fluids in an

2989
02:33:22,180 --> 02:33:29,470
easy way

2990
02:33:23,189 --> 02:33:40,809
right alright I'm gonna go ahead and

2991
02:33:29,469 --> 02:33:42,069
shut it down Sam grab some lunch thank

2992
02:33:40,809 --> 02:33:43,689
you everyone for joining me for another

2993
02:33:42,069 --> 02:33:45,969
episode of hand made hero it's been a

2994
02:33:43,689 --> 02:33:48,220
pleasure coding with you as always if

2995
02:33:45,969 --> 02:33:49,898
you would like to follow along with

2996
02:33:48,219 --> 02:33:51,670
series at home you can always pre-order

2997
02:33:49,898 --> 02:33:54,219
the game on handmade hero org and it

2998
02:33:51,670 --> 02:33:55,270
comes with the source code so if you

2999
02:33:54,219 --> 02:33:57,340
want to play around with that lighting

3000
02:33:55,270 --> 02:33:58,630
and maybe figure out what we should take

3001
02:33:57,340 --> 02:34:00,040
as our next step you could do that I'll

3002
02:33:58,629 --> 02:34:01,509
be back here tomorrow to do exactly that

3003
02:34:00,040 --> 02:34:03,130
I hope to see you back here for that I

3004
02:34:01,510 --> 02:34:06,130
think we've got a little bit of a better

3005
02:34:03,129 --> 02:34:07,959
handle on the reconstruction now and I'm

3006
02:34:06,129 --> 02:34:09,639
really happy about that so I think we

3007
02:34:07,959 --> 02:34:10,688
know how to push this I think we know

3008
02:34:09,639 --> 02:34:12,789
what to push on now

3009
02:34:10,689 --> 02:34:14,380
so we'll try some things we'll see what

3010
02:34:12,790 --> 02:34:15,399
we can do tomorrow but I'm excited about

3011
02:34:14,379 --> 02:34:18,250
that I think it's going in a good

3012
02:34:15,398 --> 02:34:19,599
direction that's it for today so hope to

3013
02:34:18,250 --> 02:34:20,709
see you back here tomorrow until then

3014
02:34:19,600 --> 02:34:22,420
have fun programming and I'll see

3015
02:34:20,709 --> 02:34:24,839
everyone on the Internet take it easy

3016
02:34:22,420 --> 02:34:24,840
everybody

