1
00:00:03,680 --> 00:00:07,620
hello everybody and welcome to handmade

2
00:00:06,209 --> 00:00:12,150
Hero the show recode a complete game

3
00:00:07,620 --> 00:00:15,240
live on stream we are well we added

4
00:00:12,150 --> 00:00:16,710
yesterday the ability to do sort of per

5
00:00:15,240 --> 00:00:19,259
element sorting and we did that in kind

6
00:00:16,710 --> 00:00:23,868
of an interesting way I thought which

7
00:00:19,260 --> 00:00:26,880
you know we that's something different

8
00:00:23,868 --> 00:00:28,109
we had sort of had this plan to do

9
00:00:26,879 --> 00:00:29,669
something a little more complicated then

10
00:00:28,109 --> 00:00:30,868
right in the middle of implementing I

11
00:00:29,670 --> 00:00:32,910
realized there was a much simpler way to

12
00:00:30,868 --> 00:00:34,530
do it and so we ended up doing it in a

13
00:00:32,909 --> 00:00:37,199
much simpler way and it seems to work

14
00:00:34,530 --> 00:00:39,179
quite well and at the end of yesterday's

15
00:00:37,200 --> 00:00:40,950
stream we actually used the cycle

16
00:00:39,179 --> 00:00:42,689
detection that we put in there to

17
00:00:40,950 --> 00:00:44,940
determine that we didn't actually have a

18
00:00:42,689 --> 00:00:47,429
bug in the comparison as well so the

19
00:00:44,939 --> 00:00:48,929
cycle detection ended up being kind of

20
00:00:47,429 --> 00:00:51,780
useful too so it's a pretty good day all

21
00:00:48,929 --> 00:00:54,628
around I think and I'm relatively happy

22
00:00:51,780 --> 00:00:56,879
with it however at this point it does

23
00:00:54,628 --> 00:01:00,420
mean that I think we've moved into the

24
00:00:56,878 --> 00:01:02,009
firmly into the territory of now we've

25
00:01:00,420 --> 00:01:04,530
got to go back and finish up our Z

26
00:01:02,009 --> 00:01:07,079
layering stuff because we've got sorting

27
00:01:04,530 --> 00:01:09,000
working inside a layer properly we don't

28
00:01:07,079 --> 00:01:11,489
currently have our layering stuff

29
00:01:09,000 --> 00:01:13,530
working and so what that means is of

30
00:01:11,489 --> 00:01:16,560
course if we go into the game at the

31
00:01:13,530 --> 00:01:22,219
moment because we sort of left it in in

32
00:01:16,560 --> 00:01:25,290
a sort of as I often say zygote estate

33
00:01:22,219 --> 00:01:27,929
so if we kind of go in here and we run

34
00:01:25,290 --> 00:01:31,110
it you can see that we've got sort of

35
00:01:27,930 --> 00:01:33,659
this one thing this this one room if you

36
00:01:31,109 --> 00:01:36,780
will that's doing what we expected to do

37
00:01:33,659 --> 00:01:39,090
now and that's good but we've got this

38
00:01:36,780 --> 00:01:41,400
stairwell here that we had made and it's

39
00:01:39,090 --> 00:01:43,920
it's not well it's already still using

40
00:01:41,400 --> 00:01:45,630
the old sort of perspective transform

41
00:01:43,920 --> 00:01:47,790
that we said we didn't want for things

42
00:01:45,629 --> 00:01:51,030
inside a room like we just want these

43
00:01:47,790 --> 00:01:53,368
these should just be up higher in Y but

44
00:01:51,030 --> 00:01:55,349
they shouldn't be going to the side or

45
00:01:53,368 --> 00:01:57,569
getting larger like they are so that

46
00:01:55,349 --> 00:02:00,209
obviously we need to fix and then

47
00:01:57,569 --> 00:02:04,109
similarly if we go and actually start

48
00:02:00,209 --> 00:02:05,938
allowing more than one room to be added

49
00:02:04,109 --> 00:02:12,360
instead of loops that's not where I want

50
00:02:05,938 --> 00:02:13,889
to be at all so if we allow two rooms to

51
00:02:12,360 --> 00:02:16,680
be added stacked on top of each

52
00:02:13,889 --> 00:02:18,779
we can quickly see that also our sorting

53
00:02:16,680 --> 00:02:21,900
won't work properly because our sorting

54
00:02:18,780 --> 00:02:24,659
is designed to only sort inside a single

55
00:02:21,900 --> 00:02:26,520
room given the rules of a single room

56
00:02:24,659 --> 00:02:28,770
and that's just because it's a two and a

57
00:02:26,520 --> 00:02:29,969
half day sort so it has to make some

58
00:02:28,770 --> 00:02:32,040
concessions but you can see right now

59
00:02:29,969 --> 00:02:33,629
that this is totally wrong right and the

60
00:02:32,039 --> 00:02:35,579
reason for that is our sorting rule

61
00:02:33,629 --> 00:02:39,359
doesn't really handle the idea of layers

62
00:02:35,580 --> 00:02:41,250
of Z slices on top of each other and you

63
00:02:39,360 --> 00:02:44,940
know we could try to make that work or

64
00:02:41,250 --> 00:02:46,469
whatever but the goal is not to make the

65
00:02:44,939 --> 00:02:49,430
sort handle everything that was never

66
00:02:46,469 --> 00:02:52,349
the goal the idea is we actually want to

67
00:02:49,430 --> 00:02:54,420
just slice the world into these slices

68
00:02:52,349 --> 00:02:56,280
and then have them sort separately which

69
00:02:54,419 --> 00:02:58,199
we know works that was always the plan

70
00:02:56,280 --> 00:03:00,030
and so now we need to make that happen

71
00:02:58,199 --> 00:03:01,649
and as you can see right now you know

72
00:03:00,030 --> 00:03:03,030
it's totally unworkable as it is because

73
00:03:01,650 --> 00:03:04,709
these things are just randomly sorting

74
00:03:03,030 --> 00:03:07,110
and you can't make any sense of it

75
00:03:04,709 --> 00:03:08,640
whatsoever so what we need to do is we

76
00:03:07,110 --> 00:03:11,340
need to take a step back and we need to

77
00:03:08,639 --> 00:03:13,500
go finish that slicing so that we can

78
00:03:11,340 --> 00:03:17,039
see whether our sort rule actually does

79
00:03:13,500 --> 00:03:18,750
work if we give the renderer slices to

80
00:03:17,039 --> 00:03:24,659
work with now this is going to be a

81
00:03:18,750 --> 00:03:26,219
pretty difficult excursion for us it's

82
00:03:24,659 --> 00:03:28,019
gonna be a little difficult for me in

83
00:03:26,219 --> 00:03:29,759
the sense that this is the kind of work

84
00:03:28,019 --> 00:03:31,409
that normally I do over probably the

85
00:03:29,759 --> 00:03:34,259
course of one or two days in a really

86
00:03:31,409 --> 00:03:35,549
concentrated like for our for our pair

87
00:03:34,259 --> 00:03:36,599
block or something like this where I

88
00:03:35,549 --> 00:03:39,239
really get in there and get everything

89
00:03:36,599 --> 00:03:41,900
right it's gonna be really hard as a

90
00:03:39,239 --> 00:03:44,219
thing to do on the stream because

91
00:03:41,900 --> 00:03:45,689
breaking things up into our chunks and

92
00:03:44,219 --> 00:03:46,680
talking while you're doing it is kind of

93
00:03:45,689 --> 00:03:48,090
difficult so it is gonna be a little

94
00:03:46,680 --> 00:03:49,739
difficult for me because it's a it's an

95
00:03:48,090 --> 00:03:53,099
architectural like reorg kind of thing

96
00:03:49,739 --> 00:03:54,719
which can be difficult but it's also

97
00:03:53,099 --> 00:03:56,009
gonna be kind of difficult for everyone

98
00:03:54,719 --> 00:03:57,599
else to follow too because I'm probably

99
00:03:56,009 --> 00:03:59,099
gonna be you know I'm moving things

100
00:03:57,599 --> 00:04:01,019
around and sort of talking about like

101
00:03:59,099 --> 00:04:02,519
the feel of things and how they go so I

102
00:04:01,019 --> 00:04:03,450
apologize for that but that's just

103
00:04:02,519 --> 00:04:06,090
something that you have to do

104
00:04:03,449 --> 00:04:08,069
periodically like I've always said I'm

105
00:04:06,090 --> 00:04:09,479
really into exploratory architecture

106
00:04:08,069 --> 00:04:11,639
which means you kind of have to feel

107
00:04:09,479 --> 00:04:13,469
your way out to like okay now I see how

108
00:04:11,639 --> 00:04:15,089
this works that's the only way that

109
00:04:13,469 --> 00:04:18,358
really good architecture ever happens

110
00:04:15,090 --> 00:04:20,040
and certainly the architecture that is

111
00:04:18,358 --> 00:04:23,098
going to be best for handmade hero which

112
00:04:20,040 --> 00:04:24,930
I think we're slowly annealing into is

113
00:04:23,098 --> 00:04:26,519
not one that we ever could have

114
00:04:24,930 --> 00:04:27,689
conceptualized at the start of the

115
00:04:26,519 --> 00:04:29,849
project so if we had you know

116
00:04:27,689 --> 00:04:31,740
tried to write out some some UML class

117
00:04:29,850 --> 00:04:34,230
diagram of how this game was going to

118
00:04:31,740 --> 00:04:35,850
work we would have been so far away from

119
00:04:34,230 --> 00:04:40,140
the actual correct architecture it would

120
00:04:35,850 --> 00:04:41,970
have been hilarious and so like just to

121
00:04:40,139 --> 00:04:43,919
sort of give some encouragement when you

122
00:04:41,970 --> 00:04:45,660
find this sort of thing happening you

123
00:04:43,920 --> 00:04:47,670
want to embrace it don't discourage it

124
00:04:45,660 --> 00:04:49,560
right you want to embrace the idea that

125
00:04:47,670 --> 00:04:51,420
the architecture gets better over time

126
00:04:49,560 --> 00:04:53,339
and that you're exploring towards a good

127
00:04:51,420 --> 00:04:55,710
architecture and if you believe that

128
00:04:53,339 --> 00:04:57,389
what good architecture is is thinking

129
00:04:55,709 --> 00:04:59,699
about everything upfront and getting

130
00:04:57,389 --> 00:05:01,259
this design and then plowing you know

131
00:04:59,699 --> 00:05:03,180
forwards on it after you finalize it

132
00:05:01,259 --> 00:05:05,670
like this is a design that's where bad

133
00:05:03,180 --> 00:05:08,250
software architecture comes from so you

134
00:05:05,670 --> 00:05:10,620
know always embrace the the sort of

135
00:05:08,250 --> 00:05:11,759
forward flow of the architecture and a

136
00:05:10,620 --> 00:05:15,090
lot of what you do when you're

137
00:05:11,759 --> 00:05:18,839
programming is absolutely about trying

138
00:05:15,089 --> 00:05:20,909
to make sure that you have a code base

139
00:05:18,839 --> 00:05:22,709
that's fluid enough that you can make

140
00:05:20,910 --> 00:05:24,660
those decisions and move forwards and

141
00:05:22,709 --> 00:05:26,129
get to better places rather than

142
00:05:24,660 --> 00:05:29,460
something that's really been rigidly

143
00:05:26,129 --> 00:05:32,040
codified and Kant has no flexibility to

144
00:05:29,459 --> 00:05:33,899
get to where it needs to go to be well

145
00:05:32,040 --> 00:05:36,930
working and fluid and fast and efficient

146
00:05:33,899 --> 00:05:39,000
and all that so so that's what we need

147
00:05:36,930 --> 00:05:41,009
to start working on now and so that is

148
00:05:39,000 --> 00:05:44,220
what I'm going to start looking at now

149
00:05:41,009 --> 00:05:46,469
if you recall we actually sort of

150
00:05:44,220 --> 00:05:48,930
started looking at this and that's what

151
00:05:46,470 --> 00:05:50,669
made us decide we needed to do the sort

152
00:05:48,930 --> 00:05:52,829
and so we went and did the sort but if

153
00:05:50,668 --> 00:05:54,990
you recall before we finish doing the

154
00:05:52,829 --> 00:05:57,539
sort we had actually sort of started

155
00:05:54,990 --> 00:05:59,519
this conceptualization of layering and

156
00:05:57,540 --> 00:06:01,919
you can see here where we've got this

157
00:05:59,519 --> 00:06:05,189
relative layer convert to relative layer

158
00:06:01,918 --> 00:06:06,750
and it does a temp Z thing right and you

159
00:06:05,189 --> 00:06:09,509
can see what ended up happening curious

160
00:06:06,750 --> 00:06:10,889
I just patched it really quickly so what

161
00:06:09,509 --> 00:06:12,209
was supposed to happen or what was

162
00:06:10,889 --> 00:06:14,129
happening in here is when we call

163
00:06:12,209 --> 00:06:15,989
convert to layer relative what would

164
00:06:14,129 --> 00:06:17,879
happen is it would return a relative

165
00:06:15,990 --> 00:06:23,910
layer value which is basically saying

166
00:06:17,879 --> 00:06:26,909
like oh you know here is which slice of

167
00:06:23,910 --> 00:06:29,669
the world this particular sprite is on

168
00:06:26,910 --> 00:06:32,460
or whatever but then the other thing for

169
00:06:29,668 --> 00:06:35,490
the the value pass in it would modify

170
00:06:32,459 --> 00:06:37,560
the value passed in to make it be now

171
00:06:35,490 --> 00:06:40,439
just an offset based on that layer and

172
00:06:37,560 --> 00:06:41,519
so what I did to sort of patch it out so

173
00:06:40,439 --> 00:06:42,930
that we could have two

174
00:06:41,519 --> 00:06:45,568
still on top of each other just while we

175
00:06:42,930 --> 00:06:47,400
were testing other stuff is I pass a

176
00:06:45,569 --> 00:06:50,069
temp value there that never then gets

177
00:06:47,399 --> 00:06:51,810
used so if we want to return to the

178
00:06:50,069 --> 00:06:54,030
previous way you know the previous state

179
00:06:51,810 --> 00:06:55,620
of the program before we put the sword

180
00:06:54,029 --> 00:06:57,839
in and when we were just working on the

181
00:06:55,620 --> 00:06:59,459
layers it would look like this and at

182
00:06:57,839 --> 00:07:02,219
that point what happens is everything's

183
00:06:59,459 --> 00:07:04,589
flattened down into one plane so now you

184
00:07:02,220 --> 00:07:08,009
can see we actually have two rooms here

185
00:07:04,589 --> 00:07:09,418
okay but instead of drawing those two

186
00:07:08,009 --> 00:07:11,550
rooms on top of each other we've

187
00:07:09,418 --> 00:07:13,589
actually truncated them out so they're

188
00:07:11,550 --> 00:07:16,348
actually drawn in the same place and you

189
00:07:13,589 --> 00:07:18,779
can see that flip happen here so no

190
00:07:16,348 --> 00:07:23,610
matter whether I go up or down either

191
00:07:18,779 --> 00:07:25,709
way like here I go up doo doo doo and

192
00:07:23,610 --> 00:07:27,360
you can see the flicker happened to

193
00:07:25,709 --> 00:07:28,680
where it's like the two tiles are being

194
00:07:27,360 --> 00:07:29,879
rendered on top of each other and

195
00:07:28,680 --> 00:07:31,978
they're fighting for who gets thrown

196
00:07:29,879 --> 00:07:33,810
first and all that right so this is

197
00:07:31,978 --> 00:07:36,568
basically just drawing two rooms on top

198
00:07:33,810 --> 00:07:38,939
of each other but that's actually what

199
00:07:36,569 --> 00:07:40,710
we want right we want to flatten all of

200
00:07:38,939 --> 00:07:42,899
the rooms down into the same space

201
00:07:40,709 --> 00:07:44,459
essentially and then we just want the

202
00:07:42,899 --> 00:07:48,299
renderer to know that each one is

203
00:07:44,459 --> 00:07:50,370
rendered at a different offset in terms

204
00:07:48,300 --> 00:07:52,468
of perspective now just to refresh your

205
00:07:50,370 --> 00:07:54,718
memory since it's been a while let me

206
00:07:52,468 --> 00:07:57,149
just reiterate why we are doing that

207
00:07:54,718 --> 00:07:59,939
here on day two 3:13 oh I forgot to say

208
00:07:57,149 --> 00:08:01,408
today is 3:13 so if you want to start if

209
00:07:59,939 --> 00:08:03,870
you want follow along day three twelve

210
00:08:01,408 --> 00:08:07,978
source code is the right code to start

211
00:08:03,870 --> 00:08:10,949
with what's going on my my Milton seems

212
00:08:07,978 --> 00:08:14,689
to think I'm a mouse again it's weird

213
00:08:10,949 --> 00:08:14,689
well reopen Milton

214
00:08:23,529 --> 00:08:31,929
hello there we go much nicer yeah I

215
00:08:30,910 --> 00:08:34,418
don't know why that happens but

216
00:08:31,930 --> 00:08:41,139
sometimes Milton decides that's in mouse

217
00:08:34,418 --> 00:08:42,549
mode there we go um okay so let's talk

218
00:08:41,139 --> 00:08:44,789
about the slice again really quickly

219
00:08:42,549 --> 00:08:48,399
just so everyone's on the same page so

220
00:08:44,789 --> 00:08:51,189
here's what we've got we have two sort

221
00:08:48,399 --> 00:08:54,279
of areas in the world right and we've

222
00:08:51,190 --> 00:08:56,230
got these sort of you know trees around

223
00:08:54,279 --> 00:08:57,639
here whatever and maybe this one's got

224
00:08:56,230 --> 00:08:58,810
trees around it too and you know who

225
00:08:57,639 --> 00:09:00,970
knows these are gonna be whatever they

226
00:08:58,809 --> 00:09:02,619
are with the actual game art but point

227
00:09:00,970 --> 00:09:03,759
being you've got you know two things

228
00:09:02,620 --> 00:09:07,299
stacked on top of each other

229
00:09:03,759 --> 00:09:08,860
so what we want to have happen is we

230
00:09:07,299 --> 00:09:10,929
want to have two separate

231
00:09:08,860 --> 00:09:15,070
conceptualizations of what it means to

232
00:09:10,929 --> 00:09:18,159
be up in the world right you know up

233
00:09:15,070 --> 00:09:19,660
goes this way it's our z-value but we

234
00:09:18,159 --> 00:09:21,730
have two different things that that's

235
00:09:19,659 --> 00:09:24,219
going to mean so when you're looking at

236
00:09:21,730 --> 00:09:26,500
an individual slice of the world what we

237
00:09:24,220 --> 00:09:29,110
want up to mean is just displacement in

238
00:09:26,500 --> 00:09:31,299
Y so for example if we have a stairwell

239
00:09:29,110 --> 00:09:39,700
a stairwell should actually just look

240
00:09:31,299 --> 00:09:41,559
like this kind of right it should be it

241
00:09:39,700 --> 00:09:44,230
should be basically the same size all

242
00:09:41,559 --> 00:09:46,179
the way up okay and it should be right

243
00:09:44,230 --> 00:09:47,379
in line with each other and right now as

244
00:09:46,179 --> 00:09:49,269
you see we have kind of a perspective

245
00:09:47,379 --> 00:09:51,129
stairwell so it kind of goes off at this

246
00:09:49,269 --> 00:09:53,470
direction and the tiles get bigger as

247
00:09:51,129 --> 00:09:55,539
they go so when we're looking at a

248
00:09:53,470 --> 00:09:57,790
single slice of the room we want to see

249
00:09:55,539 --> 00:10:03,730
all of those Z values are just converted

250
00:09:57,789 --> 00:10:07,689
to Y displacements and that's it no

251
00:10:03,730 --> 00:10:09,940
scaling no X displacement just Y

252
00:10:07,690 --> 00:10:15,280
displacements so it's true orthographic

253
00:10:09,940 --> 00:10:16,900
one sort of tilt orthographic so what

254
00:10:15,279 --> 00:10:18,850
we're essentially saying is if you are

255
00:10:16,899 --> 00:10:20,919
looking at a particular slice than

256
00:10:18,850 --> 00:10:23,170
something that is hovering above that

257
00:10:20,919 --> 00:10:30,519
slice or that is up you know from that

258
00:10:23,169 --> 00:10:31,899
slice like so that thing that Z the

259
00:10:30,519 --> 00:10:34,419
reason that I was saying we need to

260
00:10:31,899 --> 00:10:37,000
always think about relative to the layer

261
00:10:34,419 --> 00:10:39,069
is because that portion of the Z

262
00:10:37,000 --> 00:10:41,740
he needs to get converted to a wide

263
00:10:39,070 --> 00:10:44,940
displacement that's what we want for the

264
00:10:41,740 --> 00:10:48,220
art style okay now on the other hand

265
00:10:44,940 --> 00:10:51,010
this displacement here so the fact that

266
00:10:48,220 --> 00:10:53,620
this floor is up above this other floor

267
00:10:51,009 --> 00:10:55,689
this is a separate slice and what that

268
00:10:53,620 --> 00:10:58,120
means is that everything on that slice

269
00:10:55,690 --> 00:11:00,550
who by the way have their own relative Z

270
00:10:58,120 --> 00:11:04,210
displacements everything on that slice

271
00:11:00,549 --> 00:11:06,399
needs to actually be scaled so that it's

272
00:11:04,210 --> 00:11:09,040
in perspective in the sense that it does

273
00:11:06,399 --> 00:11:12,909
get bigger and it does displaced in x

274
00:11:09,039 --> 00:11:14,679
and y right so fundamentally what we're

275
00:11:12,909 --> 00:11:17,139
trying to do here is basically render

276
00:11:14,679 --> 00:11:20,379
the world in slices and take those

277
00:11:17,139 --> 00:11:24,370
slices which have Z offsets translated

278
00:11:20,379 --> 00:11:26,500
as Y offsets take those slices and scale

279
00:11:24,370 --> 00:11:29,799
and modulate and do whatever effects we

280
00:11:26,500 --> 00:11:32,259
want to the slices as wholes and by the

281
00:11:29,799 --> 00:11:35,529
way while we're at this we would like to

282
00:11:32,259 --> 00:11:38,319
correct the alpha blending of these

283
00:11:35,529 --> 00:11:40,750
things so that the Alpha blend away or

284
00:11:38,320 --> 00:11:43,360
fog in or out or all those sorts of

285
00:11:40,750 --> 00:11:45,730
things we want that to be consistent as

286
00:11:43,360 --> 00:11:47,589
a layer because you remember we sort of

287
00:11:45,730 --> 00:11:49,300
had this bug that's it's not very

288
00:11:47,589 --> 00:11:50,680
noticeable bug but I find it looks very

289
00:11:49,299 --> 00:11:52,419
unprofessional if you leave this kind of

290
00:11:50,679 --> 00:11:56,019
thing and I see a lot of games that have

291
00:11:52,419 --> 00:12:01,629
this actually you know if I've got a

292
00:11:56,019 --> 00:12:05,829
tree and right in front of it is another

293
00:12:01,629 --> 00:12:10,389
tree there's a region of overlap that's

294
00:12:05,830 --> 00:12:12,490
say right here so this right gets drawn

295
00:12:10,389 --> 00:12:14,350
and this right gets drawn usually what

296
00:12:12,490 --> 00:12:17,500
happens is you know a gets drawn before

297
00:12:14,350 --> 00:12:19,629
B and so that's why the part of a that's

298
00:12:17,500 --> 00:12:20,830
not visible is not visible right that's

299
00:12:19,629 --> 00:12:23,799
the way we're currently doing it as

300
00:12:20,830 --> 00:12:26,320
we're drawing back to front now when we

301
00:12:23,799 --> 00:12:27,819
draw back to front if the alpha level

302
00:12:26,320 --> 00:12:29,710
that we're using to draw everything at

303
00:12:27,820 --> 00:12:32,140
so if the opacity of these two things

304
00:12:29,710 --> 00:12:34,690
happens to be 100% everything's fine

305
00:12:32,139 --> 00:12:37,120
right you just see two trees and they

306
00:12:34,690 --> 00:12:39,790
appear to be be in front of a just like

307
00:12:37,120 --> 00:12:41,320
what we wanted however if we then set

308
00:12:39,789 --> 00:12:43,088
the opacity to 50%

309
00:12:41,320 --> 00:12:44,710
because say for example we're fading out

310
00:12:43,089 --> 00:12:46,600
an alpha layer that's getting close to

311
00:12:44,710 --> 00:12:48,070
the camera like you know when you go

312
00:12:46,600 --> 00:12:49,509
down a stairwell or something and it's

313
00:12:48,070 --> 00:12:50,709
supposed to kind of come up at you and

314
00:12:49,509 --> 00:12:53,769
disappear

315
00:12:50,708 --> 00:12:56,438
when we reduce that to 50% well this one

316
00:12:53,769 --> 00:12:58,720
will become 50% translucent which is

317
00:12:56,438 --> 00:13:01,208
fine but then this tree that gets stuck

318
00:12:58,720 --> 00:13:04,449
on top of it well this part of it will

319
00:13:01,208 --> 00:13:08,528
be 50% translucent but this part already

320
00:13:04,448 --> 00:13:11,109
had a 50% layer on it and now it's

321
00:13:08,528 --> 00:13:13,629
having another 50% layer put on top of

322
00:13:11,110 --> 00:13:15,369
that right and so if you think about

323
00:13:13,629 --> 00:13:17,860
what that ends up happening to the total

324
00:13:15,369 --> 00:13:20,889
translucency of this area it is not at

325
00:13:17,860 --> 00:13:21,789
50% anymore right because you can

326
00:13:20,889 --> 00:13:23,499
imagine what's happening there's

327
00:13:21,789 --> 00:13:25,778
something underneath this that the stuff

328
00:13:23,499 --> 00:13:27,999
that's below this layer right we'll call

329
00:13:25,778 --> 00:13:30,629
that a well let's not call it because

330
00:13:27,999 --> 00:13:35,409
all right do that let's let's call that

331
00:13:30,629 --> 00:13:44,100
what am i call that let's see here let's

332
00:13:35,409 --> 00:13:48,458
call this I'm gonna say m and n okay

333
00:13:44,100 --> 00:13:50,649
well no I'm gonna do that M is what's

334
00:13:48,458 --> 00:13:52,118
behind and then on this layer

335
00:13:50,649 --> 00:13:53,740
we've got I'm gonna talk about the

336
00:13:52,119 --> 00:13:56,709
individual objects we've got the two

337
00:13:53,740 --> 00:14:00,720
trees and the two trees can be a and B

338
00:13:56,708 --> 00:14:03,729
like we had there so here's a here's B

339
00:14:00,720 --> 00:14:07,959
okay so if you think about what happens

340
00:14:03,730 --> 00:14:09,610
here right if the bottom part is M then

341
00:14:07,958 --> 00:14:11,979
that's what we're starting with right

342
00:14:09,610 --> 00:14:13,870
and what we end up with if we imagine

343
00:14:11,980 --> 00:14:16,178
that this layer was was labeled n or

344
00:14:13,870 --> 00:14:20,318
whatever what I want to see if my a

345
00:14:16,178 --> 00:14:26,350
pathway level is 50% right is I want my

346
00:14:20,318 --> 00:14:28,568
final pixel to be 0.5 M plus 0.5 n right

347
00:14:26,350 --> 00:14:31,839
that's what I want to see I want to see

348
00:14:28,568 --> 00:14:35,289
50% of the underlying and 50% of the of

349
00:14:31,839 --> 00:14:37,620
the thing on top okay now the question

350
00:14:35,289 --> 00:14:41,798
is will I get that with this process

351
00:14:37,620 --> 00:14:43,870
well if I am to draw em first right well

352
00:14:41,798 --> 00:14:46,749
we know that's just what's in the buffer

353
00:14:43,870 --> 00:14:50,318
right so we start with M everything is

354
00:14:46,749 --> 00:14:53,589
cool if I was then to draw just some

355
00:14:50,318 --> 00:14:55,628
single object called M right then using

356
00:14:53,589 --> 00:14:58,089
my linear blend I know I would have you

357
00:14:55,629 --> 00:15:01,539
know 1 minus whatever the alpha value is

358
00:14:58,089 --> 00:15:04,180
n plus the alpha value of M right and

359
00:15:01,539 --> 00:15:08,230
that would be my pixel so if I set my

360
00:15:04,179 --> 00:15:10,000
the value to 0.5 what happens I get

361
00:15:08,230 --> 00:15:12,850
point five here and point five here

362
00:15:10,000 --> 00:15:15,820
right because 1 minus 0.5 is 0.5 and you

363
00:15:12,850 --> 00:15:17,560
know the value itself 0.5 is 0.5 so I

364
00:15:15,820 --> 00:15:21,190
would get exactly what I wanted if I

365
00:15:17,559 --> 00:15:23,409
just did 1 rasterizing operation but we

366
00:15:21,190 --> 00:15:25,480
don't have 1 rasterizing operation in

367
00:15:23,409 --> 00:15:27,969
this case we have multiple we're drawing

368
00:15:25,480 --> 00:15:30,039
multiple sprites so if all we do is set

369
00:15:27,970 --> 00:15:32,019
those individual sprites alpha value

370
00:15:30,039 --> 00:15:34,719
then what we get is a repeated

371
00:15:32,019 --> 00:15:37,269
application of this formula right so the

372
00:15:34,720 --> 00:15:42,940
first time through right if I repeat

373
00:15:37,269 --> 00:15:46,230
this formula 1 minus alpha a remember

374
00:15:42,940 --> 00:15:48,730
that's our back tree plus alpha value M

375
00:15:46,230 --> 00:15:52,409
well I'm a pretty happy camper because

376
00:15:48,730 --> 00:15:56,680
then I get point 5 a plus 0.5 M right

377
00:15:52,409 --> 00:15:58,990
but now I come to draw B well this is

378
00:15:56,679 --> 00:16:04,899
now what's in the buffer so I end up

379
00:15:58,990 --> 00:16:08,620
with 1 minus alpha times B plus alpha

380
00:16:04,899 --> 00:16:12,490
times this whole thing right 0.5 a plus

381
00:16:08,620 --> 00:16:15,519
0.5 M well if I multiply that out I get

382
00:16:12,490 --> 00:16:18,070
point 5 of B which is all fine that's

383
00:16:15,519 --> 00:16:20,289
probably you know if I was just trying B

384
00:16:18,070 --> 00:16:25,839
that would be good but then I get 0.5

385
00:16:20,289 --> 00:16:29,259
0.5 egg plus 0.5 M right so now let's

386
00:16:25,839 --> 00:16:35,730
multiply that out 0.5 B plus 0.25 a

387
00:16:29,259 --> 00:16:42,159
right plus 0.25 M do you see the problem

388
00:16:35,730 --> 00:16:43,870
B and a are both part of my n layer so

389
00:16:42,159 --> 00:16:46,299
if I now wanted to see what the total

390
00:16:43,870 --> 00:16:48,009
contribution of the N layer is well I

391
00:16:46,299 --> 00:16:50,169
could add these together I could say

392
00:16:48,009 --> 00:16:51,850
that this was N and this was n right so

393
00:16:50,169 --> 00:16:57,099
the total contribution from the N layer

394
00:16:51,850 --> 00:17:00,629
is 0.75 n plus my point 2 5 M which is

395
00:16:57,100 --> 00:17:06,130
still there well that's not 50% opacity

396
00:17:00,629 --> 00:17:08,619
right not even close so you can see what

397
00:17:06,130 --> 00:17:10,870
the problem is if we layer multiple

398
00:17:08,619 --> 00:17:13,509
sprites at a certain opacity level on

399
00:17:10,869 --> 00:17:16,229
top of each other what we end up is is

400
00:17:13,509 --> 00:17:17,709
we darken the contribution you know we

401
00:17:16,230 --> 00:17:20,860
increase the

402
00:17:17,709 --> 00:17:23,519
chasidy everytime they overlap right and

403
00:17:20,859 --> 00:17:26,438
we increase it by whatever that

404
00:17:23,519 --> 00:17:28,449
proportion actually is right the less

405
00:17:26,439 --> 00:17:30,669
this is the less noticeable it would be

406
00:17:28,449 --> 00:17:33,159
it's in theory potentially right because

407
00:17:30,669 --> 00:17:35,980
you're adding less each time but still

408
00:17:33,159 --> 00:17:37,240
right it's always wrong it's always the

409
00:17:35,980 --> 00:17:39,278
incorrect alpha

410
00:17:37,240 --> 00:17:41,950
except that one exact point where it

411
00:17:39,278 --> 00:17:46,000
would happen to be okay right which is

412
00:17:41,950 --> 00:17:47,710
if you only had one sprite and as you

413
00:17:46,000 --> 00:17:49,630
get more and more and more sprites it

414
00:17:47,710 --> 00:17:51,788
gets more and more and more wrong repeat

415
00:17:49,630 --> 00:17:53,380
this process one more time this number

416
00:17:51,788 --> 00:17:55,929
will increase this number will decrease

417
00:17:53,380 --> 00:17:59,559
you'll get even more opaque and off you

418
00:17:55,929 --> 00:18:02,470
go so one solution to this problem and

419
00:17:59,558 --> 00:18:05,470
the one that I was going to use is just

420
00:18:02,470 --> 00:18:07,808
to say okay you know we could try to do

421
00:18:05,470 --> 00:18:09,190
some rendering tricks to maybe work this

422
00:18:07,808 --> 00:18:10,898
out maybe we use something in the

423
00:18:09,190 --> 00:18:12,850
destination alpha maybe we have a

424
00:18:10,898 --> 00:18:15,849
separate buffer maybe we do who knows

425
00:18:12,849 --> 00:18:18,158
bla bla bla bla bla right we could do a

426
00:18:15,849 --> 00:18:20,889
depth pass first and have the depth pass

427
00:18:18,159 --> 00:18:22,630
then set comparison so we could figure

428
00:18:20,890 --> 00:18:25,028
that out whatever there's lots of things

429
00:18:22,630 --> 00:18:26,770
we could do to solve this problem the

430
00:18:25,028 --> 00:18:28,599
one that I'm choosing to do and this is

431
00:18:26,769 --> 00:18:30,940
not necessarily for any reason other

432
00:18:28,599 --> 00:18:32,709
than I'd like to limit the degree into

433
00:18:30,940 --> 00:18:35,830
which we get into crazy shader

434
00:18:32,710 --> 00:18:37,840
ridiculousness is to just render the

435
00:18:35,829 --> 00:18:40,269
scene in slices because if we render the

436
00:18:37,839 --> 00:18:43,058
scene in slices we can choose to just do

437
00:18:40,269 --> 00:18:46,329
essentially this operation P equals one

438
00:18:43,058 --> 00:18:48,788
minus alpha n plus alpha M we can just

439
00:18:46,329 --> 00:18:51,369
say we composite everything for the N

440
00:18:48,788 --> 00:18:53,859
layer first and then just draw in one

441
00:18:51,369 --> 00:18:56,439
pass so rather than changing the alpha

442
00:18:53,859 --> 00:18:58,509
opacity on all of the sprites to fade

443
00:18:56,440 --> 00:18:59,890
out the layer we actually draw the layer

444
00:18:58,509 --> 00:19:01,750
normally with whatever the sprites

445
00:18:59,890 --> 00:19:03,370
actual alpha values are which most the

446
00:19:01,750 --> 00:19:06,609
time is one but if something's you know

447
00:19:03,369 --> 00:19:08,889
maybe transparent than that it's less we

448
00:19:06,609 --> 00:19:11,229
draw that first for the N layer and we

449
00:19:08,890 --> 00:19:13,179
already have the M layer we then just do

450
00:19:11,230 --> 00:19:14,710
our composite operation on top of them

451
00:19:13,179 --> 00:19:17,409
and we get the right results because

452
00:19:14,710 --> 00:19:18,909
we're only applying the equation once no

453
00:19:17,409 --> 00:19:20,230
matter how many sprites were in the end

454
00:19:18,909 --> 00:19:22,480
layer because they've already been

455
00:19:20,230 --> 00:19:26,009
composited into essentially a single big

456
00:19:22,480 --> 00:19:28,329
sprite that can just be composited once

457
00:19:26,009 --> 00:19:33,460
okay

458
00:19:28,329 --> 00:19:37,509
so that's that's the idea if that makes

459
00:19:33,460 --> 00:19:41,169
sense and you know I'm not 100% certain

460
00:19:37,509 --> 00:19:43,899
but we may be able to implement that in

461
00:19:41,169 --> 00:19:49,210
a in a way that that might be somewhat

462
00:19:43,898 --> 00:19:50,528
tricky as well I'm not sure but we can

463
00:19:49,210 --> 00:19:51,399
see when we actually get to there we may

464
00:19:50,528 --> 00:19:53,368
be able to do things where we don't

465
00:19:51,398 --> 00:19:56,648
actually have to render separately but

466
00:19:53,368 --> 00:19:58,778
worst case all we're talking about here

467
00:19:56,648 --> 00:20:04,268
when we do this is just having a few

468
00:19:58,778 --> 00:20:07,778
render buffers right so rather than

469
00:20:04,269 --> 00:20:09,788
having just one thing we render to on

470
00:20:07,778 --> 00:20:11,499
the screen we would have a number of

471
00:20:09,788 --> 00:20:13,538
render buffers and the number of render

472
00:20:11,499 --> 00:20:17,558
buffers is proportional to the number of

473
00:20:13,538 --> 00:20:20,558
these operations we plan to do now from

474
00:20:17,558 --> 00:20:23,079
what we looked at originally right we

475
00:20:20,558 --> 00:20:27,729
don't have that many of these operations

476
00:20:23,079 --> 00:20:29,678
we have a fog effect which actually

477
00:20:27,729 --> 00:20:32,619
doesn't need this because it doesn't

478
00:20:29,679 --> 00:20:34,659
have this problem right for all the

479
00:20:32,618 --> 00:20:40,118
layers that are lower than the current

480
00:20:34,659 --> 00:20:42,519
layer so as we go down right as we go

481
00:20:40,118 --> 00:20:45,098
down from if this is the layer the hero

482
00:20:42,519 --> 00:20:48,519
is standing on as we go down these get

483
00:20:45,098 --> 00:20:52,118
fogged and fog doesn't have a problem

484
00:20:48,519 --> 00:20:54,909
fog is not an asset II write fog is a

485
00:20:52,118 --> 00:20:57,189
color effect so we're not drawing things

486
00:20:54,909 --> 00:20:59,889
on top of each other multiple times so

487
00:20:57,190 --> 00:21:03,220
fog we don't have to deal with in this

488
00:20:59,888 --> 00:21:05,079
way so we can actually composite all of

489
00:21:03,220 --> 00:21:07,028
the layers from the hero all the way

490
00:21:05,079 --> 00:21:11,499
down to the lowest level can be done

491
00:21:07,028 --> 00:21:14,909
into one buffer right so the only thing

492
00:21:11,499 --> 00:21:19,569
we need to do to get this effect is the

493
00:21:14,909 --> 00:21:22,720
single layer that's above the hero right

494
00:21:19,569 --> 00:21:23,950
that one has to be done this way so

495
00:21:22,720 --> 00:21:26,319
essentially what we're talking about

496
00:21:23,950 --> 00:21:29,739
here is we have to do one of these that

497
00:21:26,319 --> 00:21:33,158
has that that property to it and then

498
00:21:29,739 --> 00:21:35,079
the rest of them will just work so you

499
00:21:33,159 --> 00:21:38,309
know worst case scenario we're talking

500
00:21:35,079 --> 00:21:38,308
basically to render buffers

501
00:21:39,039 --> 00:21:45,200
so that's fine because you know 1920 by

502
00:21:41,630 --> 00:21:51,170
1080 right if we have 1920 by 1080 by 4

503
00:21:45,200 --> 00:22:00,019
bytes per pixel that is an extremely

504
00:21:51,170 --> 00:22:03,100
modest amount of size right it's about 8

505
00:22:00,019 --> 00:22:12,019
megabytes oops

506
00:22:03,099 --> 00:22:15,099
no right and so saying that we need a

507
00:22:12,019 --> 00:22:18,470
second one of these right about 16 Meg's

508
00:22:15,099 --> 00:22:20,240
is really not problematic in any way and

509
00:22:18,470 --> 00:22:23,240
it's not problematic from tubers to

510
00:22:20,240 --> 00:22:25,539
points of view really first we are not

511
00:22:23,240 --> 00:22:29,390
going to be stressing the graphics cards

512
00:22:25,539 --> 00:22:32,089
memory subsystem in terms of allocation

513
00:22:29,390 --> 00:22:34,850
at all to say we need to 8 Meg buffers

514
00:22:32,089 --> 00:22:36,980
right most graphics cards today have at

515
00:22:34,849 --> 00:22:39,139
least half a gigabyte of memory often

516
00:22:36,980 --> 00:22:41,839
times have a gigabyte often times have 2

517
00:22:39,140 --> 00:22:43,730
gigabytes right and by the way in that

518
00:22:41,839 --> 00:22:48,049
way that it's not particularly accurate

519
00:22:43,730 --> 00:22:49,640
but hey you can get some idea of what's

520
00:22:48,049 --> 00:22:51,200
going on if you look at the Steam

521
00:22:49,640 --> 00:22:55,460
Hardware survey there's basically break

522
00:22:51,200 --> 00:22:58,670
points right around that sort of level

523
00:22:55,460 --> 00:23:02,480
you can see them here so you can see

524
00:22:58,670 --> 00:23:06,080
right around half a gigabyte you've got

525
00:23:02,480 --> 00:23:07,460
you know a reasonable amount of people

526
00:23:06,079 --> 00:23:09,079
who fall in there about 10% of the

527
00:23:07,460 --> 00:23:11,690
people falling about you know somewhere

528
00:23:09,079 --> 00:23:13,819
around a half a gig then you've got

529
00:23:11,690 --> 00:23:16,490
another really big break point up here

530
00:23:13,819 --> 00:23:18,409
at a gigabyte a lot of people falling

531
00:23:16,490 --> 00:23:20,539
into that category almost a third of all

532
00:23:18,410 --> 00:23:22,730
cards and then you've got a bunch of you

533
00:23:20,539 --> 00:23:27,950
know about probably the other third or

534
00:23:22,730 --> 00:23:29,539
so is is somewhere above there right is

535
00:23:27,950 --> 00:23:32,210
probably even more than a third it looks

536
00:23:29,539 --> 00:23:36,259
like yeah so even more than a third it's

537
00:23:32,210 --> 00:23:38,960
up above in the in the 2 gig and so when

538
00:23:36,259 --> 00:23:40,759
you talk about you know when you're

539
00:23:38,960 --> 00:23:44,660
talking about the bottom number you can

540
00:23:40,759 --> 00:23:48,559
even have is 256 megabytes then looking

541
00:23:44,660 --> 00:23:50,330
at 16 megabytes as a number is is not

542
00:23:48,559 --> 00:23:51,829
threatening right so you know if you say

543
00:23:50,329 --> 00:23:54,740
I need to

544
00:23:51,829 --> 00:23:58,939
render buffers for a 1080p game you're

545
00:23:54,740 --> 00:24:00,710
not to you that's child's play on any PC

546
00:23:58,940 --> 00:24:02,870
certainly now maybe you talk about the

547
00:24:00,710 --> 00:24:06,379
Raspberry Pi or something but you know

548
00:24:02,869 --> 00:24:13,459
who does maybe we don't run 1080p on you

549
00:24:06,378 --> 00:24:15,168
know weak hardware right so that's

550
00:24:13,460 --> 00:24:17,329
totally fine the other way that is

551
00:24:15,169 --> 00:24:19,850
totally fine is the memory bandwidth

552
00:24:17,329 --> 00:24:21,619
necessary to do that extra blit is

553
00:24:19,849 --> 00:24:24,648
pretty minimal as well right if you're

554
00:24:21,619 --> 00:24:26,689
talking about an 8 megabyte copy you

555
00:24:24,648 --> 00:24:28,638
know again you can get a little bit of

556
00:24:26,690 --> 00:24:31,190
idea this is again you know only very

557
00:24:28,638 --> 00:24:32,508
ballpark but you can do you know list of

558
00:24:31,190 --> 00:24:35,179
and video hardware or something like

559
00:24:32,509 --> 00:24:37,190
this and you can go pick you know some

560
00:24:35,179 --> 00:24:39,950
graphics processing unit off of here

561
00:24:37,190 --> 00:24:42,048
let's pick something not necessarily top

562
00:24:39,950 --> 00:24:44,990
of the line or something let's just say

563
00:24:42,048 --> 00:24:47,839
a GeForce 600 series processor like a

564
00:24:44,990 --> 00:24:50,388
you know hack will even do a mobile part

565
00:24:47,839 --> 00:24:53,720
right so if you take a look at what the

566
00:24:50,388 --> 00:24:56,269
graphics memory bandwidth here is you

567
00:24:53,720 --> 00:24:56,808
can see right here it's in gigabytes a

568
00:24:56,269 --> 00:24:58,940
second

569
00:24:56,808 --> 00:25:01,519
right and you can see that you know even

570
00:24:58,940 --> 00:25:04,340
the most modest one is fourteen point

571
00:25:01,519 --> 00:25:06,019
four gigabytes per second so if you look

572
00:25:04,339 --> 00:25:07,849
at how many that's gonna be for a

573
00:25:06,019 --> 00:25:09,200
particular frame and that's again that's

574
00:25:07,849 --> 00:25:11,839
really weak sauce because this is a

575
00:25:09,200 --> 00:25:16,069
mobile part low-end mobile part super

576
00:25:11,839 --> 00:25:18,918
lousy so we're talking about at 60

577
00:25:16,069 --> 00:25:19,638
frames a second what is that 240

578
00:25:18,919 --> 00:25:22,429
megabytes

579
00:25:19,638 --> 00:25:25,099
we could do each frame of memory

580
00:25:22,429 --> 00:25:27,288
bandwidth again totally random pulling

581
00:25:25,099 --> 00:25:30,638
that out there but so if you're talking

582
00:25:27,288 --> 00:25:32,839
about just adding 8 megabytes more of

583
00:25:30,638 --> 00:25:37,459
bandwidth that we have to do to do that

584
00:25:32,839 --> 00:25:40,459
wrap that alpha composite pass not a big

585
00:25:37,460 --> 00:25:43,159
deal right and hopefully you understand

586
00:25:40,460 --> 00:25:45,460
sort of what I'm talking about there the

587
00:25:43,159 --> 00:25:48,049
idea is just that well you know

588
00:25:45,460 --> 00:25:50,210
originally we drew everything to the

589
00:25:48,048 --> 00:25:51,888
screen so however much bandwidth however

590
00:25:50,210 --> 00:25:53,659
much memory bandwidth that took the

591
00:25:51,888 --> 00:25:55,428
graphs hard to do you know pulling in

592
00:25:53,659 --> 00:25:57,049
the sprites letting them on top of each

593
00:25:55,429 --> 00:25:58,429
other reading the z-buffer writing the

594
00:25:57,048 --> 00:25:59,898
z-buffer reading the color buffers

595
00:25:58,429 --> 00:26:03,679
reading riting color buffers whatever

596
00:25:59,898 --> 00:26:05,179
it's doing right all of that stuff it is

597
00:26:03,679 --> 00:26:08,269
the memory bandwidth necessary

598
00:26:05,180 --> 00:26:09,830
to run the game and we do you know every

599
00:26:08,269 --> 00:26:12,319
60s in a second we need that much memory

600
00:26:09,829 --> 00:26:14,720
memory bandwidth to make the game happen

601
00:26:12,319 --> 00:26:17,000
and not missus framerate so when you say

602
00:26:14,720 --> 00:26:19,700
I need to add a second composite pass

603
00:26:17,000 --> 00:26:21,829
what you're talking about is using up

604
00:26:19,700 --> 00:26:23,210
however big the screens memory you know

605
00:26:21,829 --> 00:26:25,609
however much memory it takes to store

606
00:26:23,210 --> 00:26:28,309
one screens worth of data if you're

607
00:26:25,609 --> 00:26:32,649
talking about a second slice now you're

608
00:26:28,309 --> 00:26:35,029
talking about well I've got to do this

609
00:26:32,650 --> 00:26:36,950
alpha composite operation of that slice

610
00:26:35,029 --> 00:26:39,259
is adding right because you still have

611
00:26:36,950 --> 00:26:40,970
to do all the sprite blitz right all of

612
00:26:39,259 --> 00:26:42,109
the sprite operations you're still doing

613
00:26:40,970 --> 00:26:43,370
them you're doing them to two separate

614
00:26:42,109 --> 00:26:44,419
buffers right some of them go to one

615
00:26:43,369 --> 00:26:46,069
buffer something or the other you're

616
00:26:44,420 --> 00:26:47,870
still doing all of that so all of that

617
00:26:46,069 --> 00:26:50,329
memory bandwidth you're still taking

618
00:26:47,869 --> 00:26:53,329
that hit but now you also have to pay

619
00:26:50,329 --> 00:26:55,939
the cost of copying the on top buffer

620
00:26:53,329 --> 00:26:57,439
onto the lower buffer and you know that

621
00:26:55,940 --> 00:27:00,830
is going to take the extra eight

622
00:26:57,440 --> 00:27:02,570
megabytes of memory bandwidth assuming

623
00:27:00,829 --> 00:27:04,069
that there's no compression or bubble a

624
00:27:02,569 --> 00:27:06,470
lot but you get the idea right so

625
00:27:04,069 --> 00:27:07,639
somewhere in that ballpark and so

626
00:27:06,470 --> 00:27:11,180
usually when you're doing stuff like

627
00:27:07,640 --> 00:27:12,980
this you know is any of this stuff stuff

628
00:27:11,180 --> 00:27:15,110
that you can really work out on paper no

629
00:27:12,980 --> 00:27:16,579
because it's all super specific to

630
00:27:15,109 --> 00:27:18,349
what's going on the memory subsystems

631
00:27:16,579 --> 00:27:19,909
and you know okay what kind of shader

632
00:27:18,349 --> 00:27:21,469
operations are happening here and is it

633
00:27:19,910 --> 00:27:23,090
compressed and is the Z compressed and

634
00:27:21,470 --> 00:27:24,200
can it early-out and blah blah blah so

635
00:27:23,089 --> 00:27:26,329
there's so many different things in

636
00:27:24,200 --> 00:27:27,529
there that are involved I don't want to

637
00:27:26,329 --> 00:27:28,939
give the impression that it's like oh

638
00:27:27,529 --> 00:27:31,970
that's how much more memory bandwidth it

639
00:27:28,940 --> 00:27:34,220
is that's not true but it always helps

640
00:27:31,970 --> 00:27:36,289
when you're in this situations when

641
00:27:34,220 --> 00:27:38,480
you're working on code that has to do

642
00:27:36,289 --> 00:27:39,950
with performance it always helps to just

643
00:27:38,480 --> 00:27:43,069
have in the back of your mind

644
00:27:39,950 --> 00:27:44,990
what am I doing here like like is this a

645
00:27:43,069 --> 00:27:47,359
reasonable thing to even go or is it a

646
00:27:44,990 --> 00:27:49,220
disaster so if this number had come back

647
00:27:47,359 --> 00:27:50,959
and it was like oh it's 300 megabytes

648
00:27:49,220 --> 00:27:53,600
right or something like this you would

649
00:27:50,960 --> 00:27:55,759
go wait hold hold on a second right

650
00:27:53,599 --> 00:27:57,829
first of all I don't know if I have the

651
00:27:55,759 --> 00:28:00,799
memory bandwidth to do 300 megabytes

652
00:27:57,829 --> 00:28:02,659
extra up copying like certain cards are

653
00:28:00,799 --> 00:28:04,549
now off the table certainly I mean

654
00:28:02,660 --> 00:28:06,820
that's 300 megabytes would be more

655
00:28:04,549 --> 00:28:08,869
bandwidth at 60 frames a second then

656
00:28:06,819 --> 00:28:11,480
then that mobile part we just looked at

657
00:28:08,869 --> 00:28:13,399
even had at all right so never mind

658
00:28:11,480 --> 00:28:14,750
rendering the game just doing the alpha

659
00:28:13,400 --> 00:28:19,009
compositing would have would have killed

660
00:28:14,750 --> 00:28:20,539
it but you'd also go well 300 mega

661
00:28:19,009 --> 00:28:22,700
might is too much memory potentially to

662
00:28:20,539 --> 00:28:24,799
because of all I have is 512 Meg

663
00:28:22,700 --> 00:28:26,660
graphics card let's say well if 300

664
00:28:24,799 --> 00:28:28,759
megabytes of that graphics is just

665
00:28:26,660 --> 00:28:30,950
storing frame buffers well all of a

666
00:28:28,759 --> 00:28:33,559
sudden I'm like where the sprites gonna

667
00:28:30,950 --> 00:28:35,330
go and where's you know all the where's

668
00:28:33,559 --> 00:28:38,950
some Headroom for the operating system

669
00:28:35,329 --> 00:28:42,619
in like I'm getting nervous right

670
00:28:38,950 --> 00:28:45,410
already so it just helps to know to turn

671
00:28:42,619 --> 00:28:47,299
of be aware of what these values are I

672
00:28:45,410 --> 00:28:51,170
think Mikey brass used to call these

673
00:28:47,299 --> 00:28:53,809
back of the envelope computations it's a

674
00:28:51,170 --> 00:28:57,620
common industry term but it's basically

675
00:28:53,809 --> 00:28:59,149
just like being aware that anytime

676
00:28:57,619 --> 00:29:01,099
you're making decisions like this you

677
00:28:59,150 --> 00:29:03,740
should at least have an idea of whether

678
00:29:01,099 --> 00:29:06,169
of what's involved you shouldn't just be

679
00:29:03,740 --> 00:29:07,700
completely oblivious to like what

680
00:29:06,170 --> 00:29:09,560
actually has to happen in order to make

681
00:29:07,700 --> 00:29:11,000
that be the case so that's why I just

682
00:29:09,559 --> 00:29:13,549
want I always kind of sanity check

683
00:29:11,000 --> 00:29:15,109
myself there and and that's you know in

684
00:29:13,549 --> 00:29:16,700
negligible that's what I think that's

685
00:29:15,109 --> 00:29:21,469
something that we won't have to care

686
00:29:16,700 --> 00:29:23,809
about it all and and refine so yeah so

687
00:29:21,470 --> 00:29:25,309
what we need to do now is we need to

688
00:29:23,809 --> 00:29:31,480
start pushing forwards on two

689
00:29:25,309 --> 00:29:34,399
fundamental pieces of this of this

690
00:29:31,480 --> 00:29:36,380
problem I guess is what I would say the

691
00:29:34,400 --> 00:29:38,330
first piece is we have to actually get

692
00:29:36,380 --> 00:29:39,950
our transform straightened out because

693
00:29:38,329 --> 00:29:42,529
now we've got two different meanings for

694
00:29:39,950 --> 00:29:45,740
Z and we need to have some idea of how

695
00:29:42,529 --> 00:29:49,279
that's going to work out right and the

696
00:29:45,740 --> 00:29:51,410
second thing that we need to do is and

697
00:29:49,279 --> 00:29:54,769
like I said we can also put if we want

698
00:29:51,410 --> 00:29:56,810
to we can put this back temporarily if

699
00:29:54,769 --> 00:29:59,720
we want to work on them separately I

700
00:29:56,809 --> 00:30:02,809
don't know if we do or don't but you

701
00:29:59,720 --> 00:30:05,059
know I think maybe we might want to if

702
00:30:02,809 --> 00:30:06,759
we take a look at this here you know we

703
00:30:05,059 --> 00:30:09,500
could start with this and say well

704
00:30:06,759 --> 00:30:11,450
separate from the transform let's just

705
00:30:09,500 --> 00:30:13,099
get the renderer handling the concept

706
00:30:11,450 --> 00:30:15,170
that we have these two different slices

707
00:30:13,099 --> 00:30:16,969
and then let's alpha blend those two

708
00:30:15,170 --> 00:30:20,390
things on top of each other correctly

709
00:30:16,970 --> 00:30:22,730
right and I thought we had alpha being

710
00:30:20,390 --> 00:30:25,280
specified here but now I don't see it

711
00:30:22,730 --> 00:30:27,769
and so I'm wondering why the Alpha isn't

712
00:30:25,279 --> 00:30:29,149
set on these to begin with so maybe the

713
00:30:27,769 --> 00:30:31,039
first thing I'll do is just take a look

714
00:30:29,150 --> 00:30:32,830
at why that is the case so I thought

715
00:30:31,039 --> 00:30:35,680
that was specified up in here

716
00:30:32,829 --> 00:30:46,539
right and I don't actually know why it's

717
00:30:35,680 --> 00:30:49,690
not at the moment I am Not sure it looks

718
00:30:46,539 --> 00:30:52,180
like it's because oh well you know why I

719
00:30:49,690 --> 00:30:54,160
guess I guess what happened

720
00:30:52,180 --> 00:30:55,870
III guess I see what happened actually

721
00:30:54,160 --> 00:30:57,759
now that I think about it what's going

722
00:30:55,869 --> 00:31:00,129
on here is just that we had already

723
00:30:57,759 --> 00:31:03,460
partitioned it and so we're not setting

724
00:31:00,130 --> 00:31:05,410
the entity alpha right we're just let me

725
00:31:03,460 --> 00:31:07,809
just verify that that's true so if I

726
00:31:05,410 --> 00:31:09,670
wanted to set the entity alpha I think

727
00:31:07,809 --> 00:31:12,549
do we still have the global alpha

728
00:31:09,670 --> 00:31:14,470
concept probably not but if we wanted to

729
00:31:12,549 --> 00:31:17,169
set the entity alpha what I could do is

730
00:31:14,470 --> 00:31:19,210
say well what should the entity alpha be

731
00:31:17,170 --> 00:31:22,330
because we're in here and we've got this

732
00:31:19,210 --> 00:31:25,710
like level index concept so what I

733
00:31:22,329 --> 00:31:25,710
should be able to do here is say well

734
00:31:29,009 --> 00:31:42,099
this cliprect FX thing here's where I do

735
00:31:37,210 --> 00:31:43,329
my push cliprect well I guess now it

736
00:31:42,099 --> 00:31:46,869
looks like there's no way for me to

737
00:31:43,329 --> 00:31:50,199
really get out what it what that alpha

738
00:31:46,869 --> 00:31:53,189
value should have been let me just do it

739
00:31:50,200 --> 00:31:56,650
this way I want to just be able to I

740
00:31:53,190 --> 00:31:58,269
guess get this myself since we won't be

741
00:31:56,650 --> 00:32:00,310
able to look it up any other way I'm

742
00:31:58,269 --> 00:32:03,160
gonna call this test alpha I'm just

743
00:32:00,309 --> 00:32:06,099
gonna do you know however many of these

744
00:32:03,160 --> 00:32:07,600
there are I want to get that out so here

745
00:32:06,099 --> 00:32:13,740
we'll just say well the test alpha for

746
00:32:07,599 --> 00:32:13,740
our level index equals whatever the

747
00:32:14,460 --> 00:32:19,420
whatever this thing said the Alpha value

748
00:32:16,779 --> 00:32:21,789
was right so you can see here if we're

749
00:32:19,420 --> 00:32:25,060
above the fade top see we do a tea color

750
00:32:21,789 --> 00:32:27,099
two zero zero zero of this T value so I

751
00:32:25,059 --> 00:32:31,029
think really all we want to do is say

752
00:32:27,099 --> 00:32:37,779
the test alpha is I guess one minus

753
00:32:31,029 --> 00:32:40,450
whatever that that tea color is right

754
00:32:37,779 --> 00:32:42,190
so that way I've stored it and then if I

755
00:32:40,450 --> 00:32:43,600
go through here and we could should be

756
00:32:42,190 --> 00:32:44,830
able to link live coded at this so we

757
00:32:43,599 --> 00:32:45,939
should be able to be able to you should

758
00:32:44,829 --> 00:32:48,308
be able to go in through

759
00:32:45,940 --> 00:32:51,100
here and actually make this work this

760
00:32:48,308 --> 00:32:52,778
way so when I actually go ahead and do

761
00:32:51,099 --> 00:32:55,689
the rendering of this guy when we do the

762
00:32:52,778 --> 00:32:58,179
pieces and the collision volume

763
00:32:55,690 --> 00:33:00,038
traversals law stuff I should be able to

764
00:32:58,179 --> 00:33:02,440
say like oh well what was the Alpha

765
00:33:00,038 --> 00:33:07,569
supposed to be here and I could put that

766
00:33:02,440 --> 00:33:09,129
in right I can sort of just say well you

767
00:33:07,569 --> 00:33:20,829
know whatever the Alpha was supposed to

768
00:33:09,128 --> 00:33:23,369
be off we go and so this would be you

769
00:33:20,829 --> 00:33:33,849
know before color equals peace color

770
00:33:23,369 --> 00:33:35,378
color alpha x equals alpha right and so

771
00:33:33,849 --> 00:33:38,678
now we need to do is actually look up

772
00:33:35,378 --> 00:33:41,798
that alpha so in here where we say like

773
00:33:38,679 --> 00:33:47,440
oh what's the relative layer then we

774
00:33:41,798 --> 00:33:48,908
would have to say well the Alpha value

775
00:33:47,440 --> 00:33:54,330
is going to be the test alpha of

776
00:33:48,909 --> 00:33:57,190
whatever the relative layers right and

777
00:33:54,329 --> 00:33:59,918
since we have to base that off of our

778
00:33:57,190 --> 00:34:03,100
our base level we got to put that in

779
00:33:59,919 --> 00:34:05,230
there all right so let's see what

780
00:34:03,099 --> 00:34:07,808
happens here so as I climb up the stairs

781
00:34:05,230 --> 00:34:09,190
we should see this fade in but that is

782
00:34:07,808 --> 00:34:14,619
actually not at all what I'm seeing

783
00:34:09,190 --> 00:34:15,909
which is weird which is good I verified

784
00:34:14,619 --> 00:34:21,419
this because I want to make sure this is

785
00:34:15,909 --> 00:34:21,419
correct first

786
00:34:21,639 --> 00:34:35,460
yeah it looks like that just switches

787
00:34:23,940 --> 00:34:35,460
immediately why am I getting this result

788
00:34:38,510 --> 00:34:53,030
why I ask why so I have my level index

789
00:34:49,398 --> 00:34:55,819
and I'm writing in whatever this value

790
00:34:53,030 --> 00:35:00,950
is I would like to look at that value

791
00:34:55,820 --> 00:35:05,330
personally and let's take a look inside

792
00:35:00,949 --> 00:35:07,069
handmade entity I just want to see when

793
00:35:05,329 --> 00:35:12,889
we come in here I just want to see what

794
00:35:07,070 --> 00:35:17,720
this actually says so here at my test

795
00:35:12,889 --> 00:35:22,179
office one one one one one zero all

796
00:35:17,719 --> 00:35:25,789
right uh let's be a little bit more

797
00:35:22,179 --> 00:35:28,489
forthcoming there let's see what happens

798
00:35:25,789 --> 00:35:33,559
in this case okay so basically no one is

799
00:35:28,489 --> 00:35:34,789
above fade tops start Z oh no there we

800
00:35:33,559 --> 00:35:42,730
go

801
00:35:34,789 --> 00:35:49,519
so what's my T value T value is one hmm

802
00:35:42,730 --> 00:35:52,070
all right well if you say so I guess I'm

803
00:35:49,519 --> 00:35:56,960
not gonna yell at you yet for being a

804
00:35:52,070 --> 00:35:58,640
liar but eventually you fade in right

805
00:35:56,960 --> 00:36:03,050
there so now what do you think your T

806
00:35:58,639 --> 00:36:05,799
value is you think your T value is one

807
00:36:03,050 --> 00:36:05,800
now as well

808
00:36:09,630 --> 00:36:25,358
what am I missing here camera relative

809
00:36:17,789 --> 00:36:27,489
ground Z Abe top start Z so that is

810
00:36:25,358 --> 00:36:37,208
actually quite a bit higher

811
00:36:27,489 --> 00:36:42,728
is there another there's only one ever

812
00:36:37,208 --> 00:36:45,190
that's above right all right I'm a

813
00:36:42,728 --> 00:36:47,708
little perplexed I don't mind telling

814
00:36:45,190 --> 00:36:51,940
you what's fade I want to see what the

815
00:36:47,708 --> 00:36:54,068
fade top NZ is as well 2.25 so it's

816
00:36:51,940 --> 00:37:03,489
definitely outside but yet at the same

817
00:36:54,068 --> 00:37:05,099
time right I'm looking at it so I don't

818
00:37:03,489 --> 00:37:10,150
understand

819
00:37:05,099 --> 00:37:12,640
Casey is confused quite confused

820
00:37:10,150 --> 00:37:15,219
actually so when I'm here

821
00:37:12,639 --> 00:37:18,098
then I do expect it to be faded out

822
00:37:15,219 --> 00:37:23,739
completely and when I see it right and I

823
00:37:18,099 --> 00:37:26,920
look that's exactly what I get my top

824
00:37:23,739 --> 00:37:30,909
end is 2.25 the relative positioning of

825
00:37:26,920 --> 00:37:32,979
this layer is 3.0 that's it's exactly

826
00:37:30,909 --> 00:37:34,808
right right I that just looks that looks

827
00:37:32,978 --> 00:37:40,478
like exactly what I would expect however

828
00:37:34,809 --> 00:37:46,028
if I go up the stairs now right I don't

829
00:37:40,478 --> 00:37:50,308
expect to see that at all that isn't

830
00:37:46,028 --> 00:37:50,309
what I would have expected to see right

831
00:37:52,300 --> 00:37:59,700
I guess is it because the world has now

832
00:37:56,769 --> 00:37:59,699
shifted down

833
00:38:18,809 --> 00:38:25,590
I guess I should probably look at what

834
00:38:21,809 --> 00:38:33,449
the actual Z is that we're talking about

835
00:38:25,590 --> 00:38:37,850
here so if I take this right and I look

836
00:38:33,449 --> 00:38:37,849
at what the offset Z is from the

837
00:38:38,360 --> 00:38:43,579
actually I guess that's not so much what

838
00:38:40,590 --> 00:38:47,610
I want I want the chunk

839
00:38:43,579 --> 00:38:59,610
so that's chunk one look were we on

840
00:38:47,610 --> 00:39:03,300
chunk zero before okay so basically what

841
00:38:59,610 --> 00:39:05,519
happens is it's sliding us up before the

842
00:39:03,300 --> 00:39:14,340
fade actually has a chance to take

843
00:39:05,519 --> 00:39:20,309
effect can't say I didn't necessarily

844
00:39:14,340 --> 00:39:24,360
see that one coming but so I guess I'm

845
00:39:20,309 --> 00:39:27,509
not 100% certain how we ended up in that

846
00:39:24,360 --> 00:39:30,000
place but that does mean that you know

847
00:39:27,510 --> 00:39:32,910
our the way that we're doing our fade

848
00:39:30,000 --> 00:39:35,670
ends our fade in has to happen further

849
00:39:32,909 --> 00:39:37,529
up I guess is what I would say in order

850
00:39:35,670 --> 00:39:41,430
for that for it to actually come in

851
00:39:37,530 --> 00:39:50,430
before it gets switched to as sort of

852
00:39:41,429 --> 00:39:51,809
the new the new normal if you will but I

853
00:39:50,429 --> 00:39:54,089
don't understand because if you look at

854
00:39:51,809 --> 00:39:55,679
the typical floor heights here if half a

855
00:39:54,090 --> 00:39:58,470
typical floor right is where it starts

856
00:39:55,679 --> 00:40:00,839
fading in and two-thirds of it is where

857
00:39:58,469 --> 00:40:03,329
it fades out it was where it stops

858
00:40:00,840 --> 00:40:06,630
waiting in I don't know that that just

859
00:40:03,329 --> 00:40:09,319
seems really weird let's try something

860
00:40:06,630 --> 00:40:09,320
more like this

861
00:40:30,099 --> 00:40:39,779
okay so nobody is over the fade fade top

862
00:40:33,880 --> 00:40:39,780
start Z at this point take a look

863
00:40:46,239 --> 00:40:52,239
I step through this actually one by one

864
00:40:48,730 --> 00:40:53,860
there we go so let's see we have

865
00:40:52,239 --> 00:40:56,529
negative 12 we have negative 9 negative

866
00:40:53,860 --> 00:40:59,170
6 negative 3 the one we're actually on

867
00:40:56,530 --> 00:41:01,660
which is 0 the one above us which is at

868
00:40:59,170 --> 00:41:08,700
3 and then of course we've got our fade

869
00:41:01,659 --> 00:41:08,699
top start Z is 3 so yeah

870
00:41:25,480 --> 00:41:30,519
I don't know I'm a little perplexed

871
00:41:28,059 --> 00:41:34,000
maybe it's just a slow day it happens

872
00:41:30,519 --> 00:41:36,099
sometimes but it feels like as long as

873
00:41:34,000 --> 00:41:39,369
we you know I don't really understand

874
00:41:36,099 --> 00:41:41,789
why starting it here wouldn't have

875
00:41:39,369 --> 00:41:41,789
worked

876
00:41:47,230 --> 00:41:52,389
I mean it feels like that should be a

877
00:41:50,130 --> 00:41:55,750
reasonable alpha region for doing the

878
00:41:52,389 --> 00:42:03,819
transition alright so there we've at

879
00:41:55,750 --> 00:42:06,699
least got it in the range but doesn't

880
00:42:03,820 --> 00:42:15,100
even seem to really do the the range map

881
00:42:06,699 --> 00:42:17,139
it just has its own this feels really

882
00:42:15,099 --> 00:42:19,319
sloppy I feel like there's something I'm

883
00:42:17,139 --> 00:42:19,319
missing

884
00:42:26,460 --> 00:42:29,880
all right we're gonna have to drill down

885
00:42:28,619 --> 00:42:31,380
on this because I'm not happy about this

886
00:42:29,880 --> 00:42:33,809
this is obviously something I'm doing

887
00:42:31,380 --> 00:42:36,300
stupid in the meantime I should probably

888
00:42:33,809 --> 00:42:37,500
when we do where we're doing our sort of

889
00:42:36,300 --> 00:42:40,500
when we draw a rectangle will be

890
00:42:37,500 --> 00:42:42,050
outlined it which is actually pretty

891
00:42:40,500 --> 00:42:45,108
good and it makes it easier to see stuff

892
00:42:42,050 --> 00:42:47,818
but I do want to make sure I get the

893
00:42:45,108 --> 00:42:50,130
Alpha more correct

894
00:42:47,818 --> 00:42:52,739
so what I'd rather do is take the Primo

895
00:42:50,130 --> 00:42:54,390
colors alpha here and make sure that

896
00:42:52,739 --> 00:42:57,358
that gets respected that way at least

897
00:42:54,389 --> 00:42:59,190
everything fades out together so you

898
00:42:57,358 --> 00:43:01,338
know it doesn't we don't have the lot

899
00:42:59,190 --> 00:43:04,409
the rectangles lie and staying around

900
00:43:01,338 --> 00:43:06,509
right but you can see that they just the

901
00:43:04,409 --> 00:43:10,440
things things basically are popping out

902
00:43:06,510 --> 00:43:15,960
of that range and we've got kind of a

903
00:43:10,440 --> 00:43:17,429
nasty I think this is kind of busted so

904
00:43:15,960 --> 00:43:23,838
I think what's happening is this

905
00:43:17,429 --> 00:43:23,838
computation is not quite correct so

906
00:43:28,199 --> 00:43:36,029
I feel like if it might be this idea

907
00:43:32,670 --> 00:43:39,300
right here that's kind of busted in fact

908
00:43:36,030 --> 00:43:40,769
I'm not really sure why I did it this

909
00:43:39,300 --> 00:43:42,480
way at all because it seems like the

910
00:43:40,769 --> 00:43:44,880
camera relative ground Zee this should

911
00:43:42,480 --> 00:43:48,869
have been subtracted right it feels like

912
00:43:44,880 --> 00:43:50,550
this should have been like this that's

913
00:43:48,869 --> 00:43:51,780
not what we wrote so I'm gonna go work

914
00:43:50,550 --> 00:43:54,960
this out on the blackboard and figure

915
00:43:51,780 --> 00:43:58,550
out if I'm just on crack or if we were

916
00:43:54,960 --> 00:44:02,130
just doing something stupid there right

917
00:43:58,550 --> 00:44:04,200
but yeah either way it doesn't work so

918
00:44:02,130 --> 00:44:06,510
I'm not sure why we wrote that and I'm

919
00:44:04,199 --> 00:44:07,409
not really sure why this isn't working

920
00:44:06,510 --> 00:44:10,200
more correctly

921
00:44:07,409 --> 00:44:12,629
it's a tricky it's very tricky don't get

922
00:44:10,199 --> 00:44:15,328
me wrong but I just kind of want to know

923
00:44:12,630 --> 00:44:18,000
what's going on so here is the situation

924
00:44:15,329 --> 00:44:22,050
as we have it we have some number of

925
00:44:18,000 --> 00:44:24,300
stacks here and somewhere in here is the

926
00:44:22,050 --> 00:44:25,589
actual simulation origin now most of the

927
00:44:24,300 --> 00:44:29,190
time it's going to actually probably

928
00:44:25,588 --> 00:44:30,358
coincide with one of these slices so

929
00:44:29,190 --> 00:44:33,300
it's going to actually be like right on

930
00:44:30,358 --> 00:44:42,318
one of these slices so then our question

931
00:44:33,300 --> 00:44:42,318
is well you know the oh wait

932
00:44:45,250 --> 00:44:51,039
that might be that that might be it

933
00:44:47,650 --> 00:44:55,090
right there what's the actual camera

934
00:44:51,039 --> 00:44:58,000
part of this because this is the origin

935
00:44:55,090 --> 00:45:00,570
of the simulation region but the camera

936
00:44:58,000 --> 00:45:05,679
is actually in a different place right

937
00:45:00,570 --> 00:45:07,360
the camera does this nonsense so right

938
00:45:05,679 --> 00:45:10,719
this is the camera situation where we

939
00:45:07,360 --> 00:45:13,470
say like okay you know world mode camera

940
00:45:10,719 --> 00:45:17,409
offset so I think that's the problem is

941
00:45:13,469 --> 00:45:19,179
the simulation region moves in steps so

942
00:45:17,409 --> 00:45:22,269
if we actually want to know you know

943
00:45:19,179 --> 00:45:23,619
this is fine but if we actually want to

944
00:45:22,269 --> 00:45:25,780
know where it is relative the camera

945
00:45:23,619 --> 00:45:33,009
we've got to subtract away the world

946
00:45:25,780 --> 00:45:35,170
mode camera offset Z right and we

947
00:45:33,010 --> 00:45:36,820
weren't doing that so that we just kind

948
00:45:35,170 --> 00:45:37,930
of left ourselves some bad code there

949
00:45:36,820 --> 00:45:38,350
when we were working on that to begin

950
00:45:37,929 --> 00:45:40,569
with

951
00:45:38,349 --> 00:45:41,619
I don't know why or how that was working

952
00:45:40,570 --> 00:45:44,680
in the first place

953
00:45:41,619 --> 00:45:49,449
but there we go so now now we're flying

954
00:45:44,679 --> 00:45:51,190
again right now everything's happy so

955
00:45:49,449 --> 00:45:53,469
now we can kind of see like alright now

956
00:45:51,190 --> 00:45:56,170
we get our fade back that's all nice

957
00:45:53,469 --> 00:45:59,609
right and when we get down here we're

958
00:45:56,170 --> 00:46:02,860
good to go again so so that's all much

959
00:45:59,610 --> 00:46:06,070
much more fancy and happy alright let's

960
00:46:02,860 --> 00:46:11,289
just double check start to fade start to

961
00:46:06,070 --> 00:46:16,720
fade all looks good alright and maybe we

962
00:46:11,289 --> 00:46:18,610
can make this a little bit wider again

963
00:46:16,719 --> 00:46:22,719
just I don't know we'll tweak those

964
00:46:18,610 --> 00:46:25,349
values later on but yeah that's not

965
00:46:22,719 --> 00:46:25,349
that's not good

966
00:46:30,650 --> 00:46:38,619
so let's see if this makes things a

967
00:46:32,239 --> 00:46:40,879
little more gradual still not not great

968
00:46:38,619 --> 00:46:47,088
well we'll have plenty of time to play

969
00:46:40,880 --> 00:46:49,608
with that anyway alright so yeah so

970
00:46:47,088 --> 00:47:00,739
that's that's basically what we're

971
00:46:49,608 --> 00:47:02,269
looking at here and like I said what we

972
00:47:00,739 --> 00:47:05,269
want to do now is we want to kind of get

973
00:47:02,269 --> 00:47:07,940
these things to be in layers more

974
00:47:05,269 --> 00:47:10,150
properly and we kind of already have a

975
00:47:07,940 --> 00:47:12,889
little bit of a problem in my opinion

976
00:47:10,150 --> 00:47:14,690
which is that our layer selection

977
00:47:12,889 --> 00:47:16,460
doesn't seem to be quite correct

978
00:47:14,690 --> 00:47:19,670
because if you look at what's going on

979
00:47:16,460 --> 00:47:22,159
here these stairs should all be part of

980
00:47:19,670 --> 00:47:23,869
my layer right because we're supposed to

981
00:47:22,159 --> 00:47:27,858
be flooring pun intended

982
00:47:23,869 --> 00:47:29,900
I think our what layer were on and so

983
00:47:27,858 --> 00:47:34,460
when we do reckon annika lies coordinate

984
00:47:29,900 --> 00:47:35,780
here like this I I feel like that's a

985
00:47:34,460 --> 00:47:39,849
mistake

986
00:47:35,780 --> 00:47:39,849
because that's not what we actually want

987
00:47:41,380 --> 00:47:45,798
essentially what we're doing at the

988
00:47:43,280 --> 00:47:48,410
moment is we're rounding and so what I

989
00:47:45,798 --> 00:47:50,750
think we need to do is re canonicalize

990
00:47:48,409 --> 00:47:53,509
coordinate unfortunately is is just kind

991
00:47:50,750 --> 00:47:55,369
of wrong for Z because if you remember

992
00:47:53,510 --> 00:47:57,950
the way that we decided to do this and

993
00:47:55,369 --> 00:47:59,990
maybe this was a mistake but this is how

994
00:47:57,949 --> 00:48:02,719
we were doing it is if you remember we

995
00:47:59,989 --> 00:48:05,618
had sort of tiles in the world right and

996
00:48:02,719 --> 00:48:09,289
we stored things relative to the tile

997
00:48:05,619 --> 00:48:10,670
the center of the tile and we had

998
00:48:09,289 --> 00:48:12,858
switched because we were in the in the

999
00:48:10,670 --> 00:48:16,220
previous time we were doing it relative

1000
00:48:12,858 --> 00:48:19,250
to the corner that's how we were working

1001
00:48:16,219 --> 00:48:21,348
things out right and we don't really

1002
00:48:19,250 --> 00:48:22,849
have there's really no rhyme or reason

1003
00:48:21,349 --> 00:48:25,760
for why you would have to do it one way

1004
00:48:22,849 --> 00:48:26,720
or the other but now we sort of do have

1005
00:48:25,760 --> 00:48:30,640
a little bit of a rhyme or a reason

1006
00:48:26,719 --> 00:48:34,179
right because once we extend this to 3d

1007
00:48:30,639 --> 00:48:34,179
which we now have

1008
00:48:34,510 --> 00:48:40,630
we now do have a reason to decide right

1009
00:48:38,050 --> 00:48:45,310
if our goal is to make everything

1010
00:48:40,630 --> 00:48:47,740
contained here in be part of this level

1011
00:48:45,309 --> 00:48:52,449
and then everything that's on this plane

1012
00:48:47,739 --> 00:48:55,779
and up be part of this level right then

1013
00:48:52,449 --> 00:48:58,899
we we want more of a truncate right we

1014
00:48:55,780 --> 00:49:03,280
want a operation that's more truncation

1015
00:48:58,900 --> 00:49:05,320
based than centroid based now it doesn't

1016
00:49:03,280 --> 00:49:07,240
really matter because we can just decide

1017
00:49:05,320 --> 00:49:09,850
how we want to layer these things

1018
00:49:07,239 --> 00:49:11,949
together but what it does mean is if we

1019
00:49:09,849 --> 00:49:15,069
want to continue with a centroid based

1020
00:49:11,949 --> 00:49:19,629
scheme where we put the floor the floor

1021
00:49:15,070 --> 00:49:23,680
needs to be placed down a bit right or

1022
00:49:19,630 --> 00:49:29,500
up a bit depending on how we want that

1023
00:49:23,679 --> 00:49:35,199
box to work out so for example what I'm

1024
00:49:29,500 --> 00:49:38,110
currently conceptualizing pretend these

1025
00:49:35,199 --> 00:49:41,699
are the two floors we actually have here

1026
00:49:38,110 --> 00:49:41,700
is this well know

1027
00:49:49,489 --> 00:49:54,919
so here are a bunch of people with Z

1028
00:49:51,980 --> 00:49:56,480
displacements and the problem is right

1029
00:49:54,920 --> 00:49:57,980
now we've got a rule which basically

1030
00:49:56,480 --> 00:49:59,269
says well everything between here and

1031
00:49:57,980 --> 00:50:00,619
here is on this floor and everything

1032
00:49:59,269 --> 00:50:03,769
between here and here is on this floor

1033
00:50:00,619 --> 00:50:05,809
right and so what happens is these guys

1034
00:50:03,769 --> 00:50:07,159
they get kind of picked up and if I drew

1035
00:50:05,809 --> 00:50:08,358
this from the side which I probably is

1036
00:50:07,159 --> 00:50:14,569
what I should've done begin with if I

1037
00:50:08,358 --> 00:50:18,549
drew it like this right here's that

1038
00:50:14,570 --> 00:50:18,550
stairwell curious those displacements

1039
00:50:18,969 --> 00:50:24,169
okay and if I'm looking at this and

1040
00:50:22,608 --> 00:50:26,509
going well you know I've got this

1041
00:50:24,170 --> 00:50:28,369
problem where this is what's my

1042
00:50:26,510 --> 00:50:31,040
definition of who falls into which

1043
00:50:28,369 --> 00:50:32,660
brackets well the problem now is these

1044
00:50:31,039 --> 00:50:34,159
guys fall into the correct bracket but

1045
00:50:32,659 --> 00:50:36,079
these guys who I actually want to be

1046
00:50:34,159 --> 00:50:39,279
down here are falling into this bracket

1047
00:50:36,079 --> 00:50:42,289
so what I need to do is push the floors

1048
00:50:39,280 --> 00:50:45,410
downward so the floor should actually be

1049
00:50:42,289 --> 00:50:48,858
at negative something relative to their

1050
00:50:45,409 --> 00:50:50,868
centroid right in order to make it so

1051
00:50:48,858 --> 00:50:52,789
that everything that might be offset

1052
00:50:50,869 --> 00:50:56,750
from them all of the ground layers are

1053
00:50:52,789 --> 00:50:58,309
always up and that's fine right we can

1054
00:50:56,750 --> 00:51:00,769
just say that that's how that works

1055
00:50:58,309 --> 00:51:02,570
that's not a problem at all

1056
00:51:00,769 --> 00:51:06,409
we could just go into world mode or

1057
00:51:02,570 --> 00:51:11,510
something right and we can take a look

1058
00:51:06,409 --> 00:51:14,920
at when we do ad standard room you can

1059
00:51:11,510 --> 00:51:17,270
see how we're adding things you know and

1060
00:51:14,920 --> 00:51:20,539
when we come in here we've got the like

1061
00:51:17,269 --> 00:51:23,559
P offset Z value right and so when we

1062
00:51:20,539 --> 00:51:26,059
call chunk position from tile position

1063
00:51:23,559 --> 00:51:28,130
it's implicit in there that what it's

1064
00:51:26,059 --> 00:51:30,108
doing is it's giving us that sort of

1065
00:51:28,130 --> 00:51:31,670
floor level right and so you can see

1066
00:51:30,108 --> 00:51:33,108
that that's happening here and it just

1067
00:51:31,670 --> 00:51:36,380
kind of does it's it's it's mapping

1068
00:51:33,108 --> 00:51:38,509
right but what we really want to do in

1069
00:51:36,380 --> 00:51:41,180
that case is we want to say that the

1070
00:51:38,510 --> 00:51:46,550
offsets Z value is actually going to be

1071
00:51:41,179 --> 00:51:48,500
down a little from the size of a tile so

1072
00:51:46,550 --> 00:51:51,349
we want it to be like the tile depth in

1073
00:51:48,500 --> 00:51:53,239
meters we want it to be some you know

1074
00:51:51,349 --> 00:51:57,650
whatever our floor region there would be

1075
00:51:53,239 --> 00:51:59,949
we want would want it to be some ways

1076
00:51:57,650 --> 00:51:59,950
down

1077
00:52:02,619 --> 00:52:09,680
okay so now when we actually do that in

1078
00:52:07,789 --> 00:52:11,449
theory well I don't actually know I

1079
00:52:09,679 --> 00:52:12,618
should double-check to see that this is

1080
00:52:11,449 --> 00:52:23,629
actually what we call all the time I

1081
00:52:12,619 --> 00:52:27,650
think it is yeah so now when we actually

1082
00:52:23,630 --> 00:52:29,510
do this in theory we should get we

1083
00:52:27,650 --> 00:52:37,309
should have all of the things move down

1084
00:52:29,510 --> 00:52:40,690
relative to yeah relative to where we

1085
00:52:37,309 --> 00:52:42,920
should have all entities moved downwards

1086
00:52:40,690 --> 00:52:44,539
so that they aren't sorting up into the

1087
00:52:42,920 --> 00:52:46,130
thing now unfortunately I look just then

1088
00:52:44,539 --> 00:52:48,559
and saw that that's not actually what

1089
00:52:46,130 --> 00:52:50,510
happened right because we're still

1090
00:52:48,559 --> 00:52:53,108
missing these two guys here so that's a

1091
00:52:50,510 --> 00:52:56,109
little odd to see them not there right

1092
00:52:53,108 --> 00:52:56,108
Oh

1093
00:53:12,219 --> 00:53:15,429
No that's what I would expect so I'm

1094
00:53:14,530 --> 00:53:18,450
gonna have to go take a look at this

1095
00:53:15,429 --> 00:53:20,980
down and just see what I actually see

1096
00:53:18,449 --> 00:53:22,899
why that is now the other thing is this

1097
00:53:20,980 --> 00:53:24,818
is getting kind of sloppy here so these

1098
00:53:22,900 --> 00:53:27,849
tile side and meters and tile depth and

1099
00:53:24,818 --> 00:53:31,389
metres things I think we we had our kind

1100
00:53:27,849 --> 00:53:34,420
of world concept here we have the chunk

1101
00:53:31,389 --> 00:53:38,618
chunk diamond meters so really I feel

1102
00:53:34,420 --> 00:53:42,639
like this should you know I feel like we

1103
00:53:38,619 --> 00:53:46,990
should be getting this this way right

1104
00:53:42,639 --> 00:53:50,250
and because I think that's what we

1105
00:53:46,989 --> 00:53:53,318
decided for the chunk stuff but anyway

1106
00:53:50,250 --> 00:53:54,909
so yeah if the if that's the size of one

1107
00:53:53,318 --> 00:53:59,289
of these things and we're talking about

1108
00:53:54,909 --> 00:54:01,929
zero zero being sort of a centroid point

1109
00:53:59,289 --> 00:54:04,599
then if we displace it downwards by you

1110
00:54:01,929 --> 00:54:06,190
know almost half then we're close to

1111
00:54:04,599 --> 00:54:09,869
that floor level that's what I would

1112
00:54:06,190 --> 00:54:11,950
have expected so I want to take a a

1113
00:54:09,869 --> 00:54:19,420
second to just go and find out why

1114
00:54:11,949 --> 00:54:21,730
that's not right before we exit all

1115
00:54:19,420 --> 00:54:23,108
right so let's step into the world

1116
00:54:21,730 --> 00:54:24,519
creation I want to see what's going on

1117
00:54:23,108 --> 00:54:37,440
with that chunk position from top

1118
00:54:24,519 --> 00:54:37,440
position fit there we go scroll up here

1119
00:54:42,150 --> 00:54:49,230
so I just want to look and see what

1120
00:54:48,119 --> 00:54:52,289
we've got

1121
00:54:49,230 --> 00:54:54,659
you can kind of see that we have a Z

1122
00:54:52,289 --> 00:54:56,659
displacement of negative 1.2 that's what

1123
00:54:54,659 --> 00:55:02,609
we would expect cuz that's gonna be this

1124
00:54:56,659 --> 00:55:04,859
divided you know there are times 0.4 so

1125
00:55:02,610 --> 00:55:06,809
when we do our map into chunk space I

1126
00:55:04,860 --> 00:55:17,099
just want to look and see what the

1127
00:55:06,809 --> 00:55:19,170
result is up being so yeah that's like

1128
00:55:17,099 --> 00:55:22,380
exactly what I would have expected it to

1129
00:55:19,170 --> 00:55:24,809
be so it's operating the way I would

1130
00:55:22,380 --> 00:55:26,970
have thought let me take a look at the a

1131
00:55:24,809 --> 00:55:28,769
standard room code I just want to see

1132
00:55:26,969 --> 00:55:39,959
what else is doing here

1133
00:55:28,769 --> 00:55:42,349
so offset y plus 2 so that's this is the

1134
00:55:39,960 --> 00:55:46,400
part that's actually displacing

1135
00:55:42,349 --> 00:55:55,980
everything upwards here so I'm not sure

1136
00:55:46,400 --> 00:55:58,710
I really understand I mean that looks

1137
00:55:55,980 --> 00:56:01,230
like it should do exactly what I'm

1138
00:55:58,710 --> 00:56:04,470
asking it to do and it feels like it

1139
00:56:01,230 --> 00:56:06,389
should never be able to quite get high

1140
00:56:04,469 --> 00:56:09,209
enough there now maybe that's not true

1141
00:56:06,389 --> 00:56:11,549
maybe what's happening is offset Y is

1142
00:56:09,210 --> 00:56:16,500
actually too large when we come in here

1143
00:56:11,550 --> 00:56:19,019
so if it's 3 I'm sorry if it's between

1144
00:56:16,500 --> 00:56:21,719
negative 2 and 2 that's gonna be 0

1145
00:56:19,019 --> 00:56:25,079
through 4 so what that means it's going

1146
00:56:21,719 --> 00:56:28,049
to add up to 2 units that should not put

1147
00:56:25,079 --> 00:56:30,469
us over the boundary right that should

1148
00:56:28,050 --> 00:56:34,470
our P offset Z should always still be

1149
00:56:30,469 --> 00:56:38,449
okay at that point I should think but

1150
00:56:34,469 --> 00:56:38,449
I'm gonna go ahead and take a look here

1151
00:56:40,260 --> 00:56:44,730
and let's go to the highest possible one

1152
00:56:45,539 --> 00:57:01,989
so 0 1 2 so there we go and let's take a

1153
00:56:51,250 --> 00:57:03,730
look at what our p offset z is now so

1154
00:57:01,989 --> 00:57:06,969
looking at our p offset we've got

1155
00:57:03,730 --> 00:57:08,500
negative 1.5 1.2 rather which is you

1156
00:57:06,969 --> 00:57:10,389
know what we wanted the fluoride to be

1157
00:57:08,500 --> 00:57:12,608
we're now going to add to it the

1158
00:57:10,389 --> 00:57:15,190
displacement for the highest level of

1159
00:57:12,608 --> 00:57:19,000
the stairwell and we can see that we get

1160
00:57:15,190 --> 00:57:21,309
0.8 all right now to me that seems

1161
00:57:19,000 --> 00:57:23,260
exactly right because 0.8 is still going

1162
00:57:21,309 --> 00:57:25,769
to sort onto the same layer it's still

1163
00:57:23,260 --> 00:57:28,690
going to gonna snap when those cook

1164
00:57:25,769 --> 00:57:30,608
those coordinates are reckon analyzed so

1165
00:57:28,690 --> 00:57:31,990
I think I did what I wanted to do here

1166
00:57:30,608 --> 00:57:36,219
and that all of these people are going

1167
00:57:31,989 --> 00:57:39,848
to still be in that same chunk right but

1168
00:57:36,219 --> 00:57:42,759
obviously you know that's not true

1169
00:57:39,849 --> 00:57:45,970
because that's not what we're getting

1170
00:57:42,760 --> 00:57:48,460
here so I'm interested to know if if we

1171
00:57:45,969 --> 00:57:50,439
do step into here and just take a look

1172
00:57:48,460 --> 00:57:52,030
at what some of the Z values are what

1173
00:57:50,440 --> 00:57:55,179
are the Z values that we're actually

1174
00:57:52,030 --> 00:57:58,869
looking at here so I'm getting a Z value

1175
00:57:55,179 --> 00:58:01,358
of 0 and I'm getting that a lot and I'm

1176
00:57:58,869 --> 00:58:07,240
I'm wondering how am I getting a z value

1177
00:58:01,358 --> 00:58:09,608
of 0 right and I'm guessing that

1178
00:58:07,239 --> 00:58:14,639
probably what's happening there is the

1179
00:58:09,608 --> 00:58:14,639
camera is getting set to the location of

1180
00:58:15,179 --> 00:58:21,759
something specific which is undoing the

1181
00:58:20,108 --> 00:58:24,900
displacement that I did right so things

1182
00:58:21,760 --> 00:58:27,280
are sorting into the right chunk area

1183
00:58:24,900 --> 00:58:29,650
but we're not actually getting that same

1184
00:58:27,280 --> 00:58:31,000
sorting on the way out now mind you what

1185
00:58:29,650 --> 00:58:33,970
we should be doing is just using the

1186
00:58:31,000 --> 00:58:36,280
chunk in the first place for how we do

1187
00:58:33,969 --> 00:58:38,019
the rendering but that's sort of a

1188
00:58:36,280 --> 00:58:40,510
separate issue we'll get to that well as

1189
00:58:38,019 --> 00:58:43,239
we kind of collapse things down as we go

1190
00:58:40,510 --> 00:58:44,859
further so if I take a look here at the

1191
00:58:43,239 --> 00:58:46,809
entity transform with the default

1192
00:58:44,858 --> 00:58:48,460
upright transform bit and then we do

1193
00:58:46,809 --> 00:58:52,630
sort of the get ground to point entity

1194
00:58:48,460 --> 00:58:53,500
minus the camera P so what we can see

1195
00:58:52,630 --> 00:58:56,110
happening there

1196
00:58:53,500 --> 00:58:57,130
is I'm not really like this is not

1197
00:58:56,110 --> 00:58:59,410
really correct

1198
00:58:57,130 --> 00:59:01,180
right we're not actually using absolute

1199
00:58:59,409 --> 00:59:03,369
coordinates here which is what we should

1200
00:59:01,179 --> 00:59:04,719
actually be using what we should

1201
00:59:03,369 --> 00:59:07,389
actually be doing here is saying well

1202
00:59:04,719 --> 00:59:09,399
where is the entity in absolute

1203
00:59:07,389 --> 00:59:11,319
coordinates which is get enemy ground

1204
00:59:09,400 --> 00:59:13,269
point I guess well actually I don't even

1205
00:59:11,320 --> 00:59:16,059
know any ground point is relative this

1206
00:59:13,269 --> 00:59:19,840
sim region right and so what I need to

1207
00:59:16,059 --> 00:59:23,920
do is I want to know specifically what

1208
00:59:19,840 --> 00:59:25,120
the the difference is in chunk Z between

1209
00:59:23,920 --> 00:59:26,710
these two things

1210
00:59:25,119 --> 00:59:33,339
I want to know the difference in chunk

1211
00:59:26,710 --> 00:59:35,590
see between the the entity that I'm

1212
00:59:33,340 --> 00:59:38,050
rendering and the the sim origin so

1213
00:59:35,590 --> 00:59:40,030
really this is all noise at some level

1214
00:59:38,050 --> 00:59:42,430
and not really what we want to be doing

1215
00:59:40,030 --> 00:59:44,200
but that's okay right

1216
00:59:42,429 --> 00:59:45,879
like we just sort of we just sort of pop

1217
00:59:44,199 --> 00:59:48,429
back over here so it's you know we're

1218
00:59:45,880 --> 00:59:50,950
getting our bearings we're not expected

1219
00:59:48,429 --> 00:59:52,809
to know everything right away so yeah

1220
00:59:50,949 --> 01:00:02,739
what we wanted to do here is say okay

1221
00:59:52,809 --> 01:00:05,590
really what's going on here is I want to

1222
01:00:02,739 --> 01:00:08,679
know for purposes of the relative layer

1223
01:00:05,590 --> 01:00:10,420
alpha lookup right what I would actually

1224
01:00:08,679 --> 01:00:13,210
want to know for the alpha lookup is I

1225
01:00:10,420 --> 01:00:14,860
want to know or rather what I want to

1226
01:00:13,210 --> 01:00:18,579
know to figure out which layer I'm in is

1227
01:00:14,860 --> 01:00:22,420
really just saying well where is this

1228
01:00:18,579 --> 01:00:25,420
entity's actual location in the world

1229
01:00:22,420 --> 01:00:27,220
right so you know who knows where that

1230
01:00:25,420 --> 01:00:29,490
is exactly but I want to I want a base

1231
01:00:27,219 --> 01:00:33,519
to build like world locate you know

1232
01:00:29,489 --> 01:00:39,329
world position and I want to do the

1233
01:00:33,519 --> 01:00:42,070
chunk Z of that minus V whatever the the

1234
01:00:39,329 --> 01:00:45,969
simulation origin is or whatever the the

1235
01:00:42,070 --> 01:00:48,970
you know the fundamental point around

1236
01:00:45,969 --> 01:00:53,139
which I'm looking so I want the the sim

1237
01:00:48,969 --> 01:00:56,069
regions origin chunk see that is the

1238
01:00:53,139 --> 01:00:59,199
actual location I care about right now

1239
01:00:56,070 --> 01:01:02,050
fortunately I'm out of time but that is

1240
01:00:59,199 --> 01:01:03,399
what we will do tomorrow and then we

1241
01:01:02,050 --> 01:01:05,140
will take a look at what we want to do

1242
01:01:03,400 --> 01:01:06,369
for the rest of this stuff I think we

1243
01:01:05,139 --> 01:01:07,089
don't I think we don't care about this

1244
01:01:06,369 --> 01:01:09,609
anymore

1245
01:01:07,090 --> 01:01:11,800
right because this is computing the

1246
01:01:09,610 --> 01:01:13,930
distance from the camera in Z which we

1247
01:01:11,800 --> 01:01:15,640
don't care about because it's only the

1248
01:01:13,929 --> 01:01:18,219
layers themselves that we'll have that

1249
01:01:15,639 --> 01:01:19,509
be relevant so we have plenty of work to

1250
01:01:18,219 --> 01:01:21,099
do but now we know what we're actually

1251
01:01:19,510 --> 01:01:21,490
doing I'm gonna put it to do in here to

1252
01:01:21,099 --> 01:01:26,079
do

1253
01:01:21,489 --> 01:01:32,589
KC it's the chunk z difference that

1254
01:01:26,079 --> 01:01:34,509
tells us what the relative layer is I

1255
01:01:32,590 --> 01:01:35,530
already sent this bug to Allen so

1256
01:01:34,510 --> 01:01:37,420
hopefully next version of our critter

1257
01:01:35,530 --> 01:01:40,660
will have there's a bug that got

1258
01:01:37,420 --> 01:01:45,280
introduced regarding multi line double

1259
01:01:40,659 --> 01:01:50,230
slash comments but so roll areas and we

1260
01:01:45,280 --> 01:01:55,980
no longer care about the camera Z Delta

1261
01:01:50,230 --> 01:02:02,490
because things inside a layer aren't

1262
01:01:55,980 --> 01:02:02,490
transformed proportionately respectively

1263
01:02:04,079 --> 01:02:10,329
anymore all right so we'll go ahead and

1264
01:02:08,710 --> 01:02:13,449
tackle that tomorrow and I'll go to the

1265
01:02:10,329 --> 01:02:16,569
Q&amp;A now which I'm gonna have to teach

1266
01:02:13,449 --> 01:02:28,889
this machine to not blank the screen so

1267
01:02:16,570 --> 01:02:28,890
while I wait for the Q&amp;A I will see here

1268
01:02:32,360 --> 01:02:36,440
why tell this little fellow

1269
01:02:48,929 --> 01:03:00,858
system settings yeah

1270
01:02:58,108 --> 01:03:06,929
time and date hardware detection

1271
01:03:00,858 --> 01:03:10,500
appearance window manager desktop

1272
01:03:06,929 --> 01:03:15,690
behavior so I can shut down hardware

1273
01:03:10,500 --> 01:03:18,019
power management maybe on AC power don't

1274
01:03:15,690 --> 01:03:30,780
dim the screen don't do that

1275
01:03:18,019 --> 01:03:31,440
no no no apply like no okay so so maybe

1276
01:03:30,780 --> 01:03:35,839
that'll work

1277
01:03:31,440 --> 01:03:39,829
I don't really know we'll see okay

1278
01:03:35,838 --> 01:03:39,828
alright now we're good to go

1279
01:03:47,030 --> 01:03:52,369
and so that does do a great job of

1280
01:03:49,260 --> 01:03:52,369
asking questions it's true

1281
01:04:03,530 --> 01:04:06,640
no questions

1282
01:04:29,690 --> 01:04:34,990
what keyboard do I have well thanks to

1283
01:04:32,150 --> 01:04:37,880
mid low and fiery Drake I have a Razer

1284
01:04:34,989 --> 01:04:41,329
BlackWidow stealth tournament edition

1285
01:04:37,880 --> 01:04:47,059
actually which was sent to me as a gift

1286
01:04:41,329 --> 01:04:50,090
by those two fine gentlemen and I am

1287
01:04:47,059 --> 01:04:52,250
absolutely delighted to be typing on it

1288
01:04:50,090 --> 01:04:55,730
because it's so much better than the Das

1289
01:04:52,250 --> 01:04:56,989
Keyboard it's not even funny I have one

1290
01:04:55,730 --> 01:05:00,710
of these at work it's what I type on at

1291
01:04:56,989 --> 01:05:02,599
work and it's awesome and they sent me

1292
01:05:00,710 --> 01:05:04,849
one for typing on handmade here it's

1293
01:05:02,599 --> 01:05:08,750
been it's been extremely put it's been

1294
01:05:04,849 --> 01:05:11,630
very very pleasurable typing is like I

1295
01:05:08,750 --> 01:05:13,010
really enjoy the act of typing which is

1296
01:05:11,630 --> 01:05:15,050
probably why I'm a programmer in the

1297
01:05:13,010 --> 01:05:16,190
first place to be honest because I feel

1298
01:05:15,050 --> 01:05:17,890
like if you don't enjoy the act of

1299
01:05:16,190 --> 01:05:22,099
typing it's got to be pretty hard to

1300
01:05:17,889 --> 01:05:24,049
want to work on a computer all day but

1301
01:05:22,099 --> 01:05:25,789
it just feels great to type on these

1302
01:05:24,050 --> 01:05:30,170
things they just they feel fantastic I

1303
01:05:25,789 --> 01:05:32,119
really like their switches the Cherry MX

1304
01:05:30,170 --> 01:05:34,909
switches we're always just too hard in

1305
01:05:32,119 --> 01:05:36,559
my opinion I don't I like almost no

1306
01:05:34,909 --> 01:05:40,819
activation force like I want the key to

1307
01:05:36,559 --> 01:05:43,849
just like bottom like just like like

1308
01:05:40,820 --> 01:05:47,900
putting your finger in a cloud and the

1309
01:05:43,849 --> 01:05:50,449
these I think they're called orange

1310
01:05:47,900 --> 01:05:52,849
razor orange switches or are lighter

1311
01:05:50,449 --> 01:05:54,230
touch than Cherry MX browns which is

1312
01:05:52,849 --> 01:06:00,860
what I was looking and and that lighter

1313
01:05:54,230 --> 01:06:02,900
touch makes a big difference for me best

1314
01:06:00,860 --> 01:06:05,570
of luck to expect that the final game

1315
01:06:02,900 --> 01:06:08,300
will contain enough sprites to warrant

1316
01:06:05,570 --> 01:06:14,170
using a texture Atlas to reduce the

1317
01:06:08,300 --> 01:06:20,690
number of texture binds per frame well I

1318
01:06:14,170 --> 01:06:24,650
mean it depends on the circumstances

1319
01:06:20,690 --> 01:06:28,429
probably not it'd be pretty unlikely but

1320
01:06:24,650 --> 01:06:32,809
in either case it's that's really only

1321
01:06:28,429 --> 01:06:35,509
an AMD Hardware question I think wait is

1322
01:06:32,809 --> 01:06:37,190
it even it no I guess there really isn't

1323
01:06:35,510 --> 01:06:40,640
there there I don't think there's

1324
01:06:37,190 --> 01:06:42,530
anybody who has texture change overhead

1325
01:06:40,639 --> 01:06:43,489
anymore is there I don't even think

1326
01:06:42,530 --> 01:06:45,860
Intel does

1327
01:06:43,489 --> 01:06:47,629
so basically if you're trying to work on

1328
01:06:45,860 --> 01:06:51,890
really old hardware because nowadays

1329
01:06:47,630 --> 01:06:56,150
there's no penalty for changing the

1330
01:06:51,889 --> 01:06:58,309
texture handle right you don't you don't

1331
01:06:56,150 --> 01:07:00,280
it's just like changing the constant

1332
01:06:58,309 --> 01:07:03,650
store right so it's it's just like

1333
01:07:00,280 --> 01:07:07,790
trivial you could even put it in the

1334
01:07:03,650 --> 01:07:09,559
vertex if you wanted to so really that's

1335
01:07:07,789 --> 01:07:13,219
a hard that's a very specific hardware

1336
01:07:09,559 --> 01:07:16,279
question it's like you know on an Nvidia

1337
01:07:13,219 --> 01:07:18,980
card absolutely not like Nvidia any

1338
01:07:16,280 --> 01:07:22,970
Nvidia card would it won't matter at all

1339
01:07:18,980 --> 01:07:25,550
because you can just use bind lists on

1340
01:07:22,969 --> 01:07:27,349
your textures and be done right and then

1341
01:07:25,550 --> 01:07:32,210
you have note you never have a texture

1342
01:07:27,349 --> 01:07:34,489
bind right but on other hardware that's

1343
01:07:32,210 --> 01:07:37,130
not as true so depending on the hardware

1344
01:07:34,489 --> 01:07:38,599
that you target you would then be able

1345
01:07:37,130 --> 01:07:39,980
to answer that question but it's

1346
01:07:38,599 --> 01:07:43,339
certainly not something I would care

1347
01:07:39,980 --> 01:07:47,360
about well till we end up going to ship

1348
01:07:43,340 --> 01:07:49,309
the game right because it doesn't matter

1349
01:07:47,360 --> 01:07:53,059
right it's something we could go put in

1350
01:07:49,309 --> 01:07:55,699
a texture Atlas after the games done or

1351
01:07:53,059 --> 01:08:01,250
after it shipped even and it's not gonna

1352
01:07:55,699 --> 01:08:03,259
affect the architecture it just means we

1353
01:08:01,250 --> 01:08:05,869
have to write a better asset manager

1354
01:08:03,260 --> 01:08:08,810
than the one we wrote because now it has

1355
01:08:05,869 --> 01:08:11,299
to think about how it's gonna page

1356
01:08:08,809 --> 01:08:13,989
things in and out in a in a much more

1357
01:08:11,300 --> 01:08:13,990
specific way

1358
01:08:33,368 --> 01:08:38,500
and understand why Basie value of each

1359
01:08:35,829 --> 01:08:41,198
floor would be negative it seems really

1360
01:08:38,500 --> 01:08:43,420
contrived it seems very logical to me to

1361
01:08:41,198 --> 01:08:44,979
have zero as the bottom maybe it has to

1362
01:08:43,420 --> 01:08:47,440
do with rendering I have not follow the

1363
01:08:44,979 --> 01:08:52,229
latest shows well it's really it's just

1364
01:08:47,439 --> 01:08:54,548
it's a it's a very very straightforward

1365
01:08:52,229 --> 01:08:55,959
decision you can make and you can make

1366
01:08:54,548 --> 01:08:58,750
it any way you want

1367
01:08:55,960 --> 01:09:02,560
so saying contrived I guess I would

1368
01:08:58,750 --> 01:09:04,779
object because your it sort of makes it

1369
01:09:02,560 --> 01:09:08,469
sound like there's a right answer but

1370
01:09:04,779 --> 01:09:09,969
there isn't you have a cube right in

1371
01:09:08,469 --> 01:09:12,000
hand made here oh we call these chunks

1372
01:09:09,969 --> 01:09:16,239
but it's basically a spatial partition

1373
01:09:12,000 --> 01:09:17,738
where we clearly I did not do a good

1374
01:09:16,238 --> 01:09:23,798
enough job telling it not to blank my

1375
01:09:17,738 --> 01:09:27,189
screen stop thanking my screen options

1376
01:09:23,798 --> 01:09:28,599
how do I tell it sorry I gotta tell the

1377
01:09:27,189 --> 01:09:32,439
singer stopping my circa I can't see the

1378
01:09:28,599 --> 01:09:37,929
chat when it does that so let's see

1379
01:09:32,439 --> 01:09:39,608
screen saver screen locking screen

1380
01:09:37,929 --> 01:09:42,759
locking is in desktop behavior

1381
01:09:39,609 --> 01:09:45,539
okay screen locking lock screen

1382
01:09:42,759 --> 01:09:51,460
automatically don't do that there you go

1383
01:09:45,539 --> 01:09:53,408
apply okay hopefully now we're good so

1384
01:09:51,460 --> 01:09:56,618
you have two choices right we are

1385
01:09:53,408 --> 01:09:58,868
essentially a 3d world in handmade hero

1386
01:09:56,618 --> 01:10:01,868
right we you can move things around in

1387
01:09:58,868 --> 01:10:05,710
3ds we're so although we're 2d sprites

1388
01:10:01,868 --> 01:10:07,689
and stuff we don't have a 2d world

1389
01:10:05,710 --> 01:10:10,840
representation our representation is 3d

1390
01:10:07,689 --> 01:10:14,589
so the question is for this chunk where

1391
01:10:10,840 --> 01:10:16,869
would you like the sort of you know

1392
01:10:14,590 --> 01:10:19,750
canonical point inside a chunk to be

1393
01:10:16,868 --> 01:10:22,448
would you like it to be at one of the

1394
01:10:19,750 --> 01:10:24,429
corners say for example here would you

1395
01:10:22,448 --> 01:10:26,979
like it to be in the middle would you

1396
01:10:24,429 --> 01:10:29,889
like it to be in the middle in X&amp;Y but

1397
01:10:26,979 --> 01:10:31,718
at the bottom in Z all right you can

1398
01:10:29,889 --> 01:10:34,090
pick any one of those that you want but

1399
01:10:31,719 --> 01:10:37,389
which one you pick determines what your

1400
01:10:34,090 --> 01:10:40,270
base value is for a relative location so

1401
01:10:37,389 --> 01:10:44,590
if you were to pick the corner or the

1402
01:10:40,270 --> 01:10:46,809
center but bottom right then your Z

1403
01:10:44,590 --> 01:10:48,550
value for the floor would be you know

1404
01:10:46,809 --> 01:10:50,110
maybe zero you probably still wouldn't

1405
01:10:48,550 --> 01:10:52,090
get 0 for a floor value because then

1406
01:10:50,109 --> 01:10:53,380
it's right on the edge which seems like

1407
01:10:52,090 --> 01:10:56,050
it's gonna cause you some sorting head

1408
01:10:53,380 --> 01:10:57,788
like some rounding headaches so you

1409
01:10:56,050 --> 01:10:59,110
would probably still want it to be it

1410
01:10:57,788 --> 01:11:01,029
like you know point one or something

1411
01:10:59,109 --> 01:11:02,979
just to you know save yourself some

1412
01:11:01,029 --> 01:11:05,349
trouble but you know whatever you want

1413
01:11:02,979 --> 01:11:06,968
to do if on the other hand you pick the

1414
01:11:05,349 --> 01:11:09,038
center of the cube as the canonical

1415
01:11:06,969 --> 01:11:10,480
point then the floor relative that

1416
01:11:09,038 --> 01:11:12,880
canonical point is gonna be at negative

1417
01:11:10,479 --> 01:11:14,828
something which is however far down you

1418
01:11:12,880 --> 01:11:17,980
want the floor to be you know 0.5 point

1419
01:11:14,828 --> 01:11:19,509
whatever right so you can choose however

1420
01:11:17,979 --> 01:11:22,058
you want to do that but there isn't a

1421
01:11:19,510 --> 01:11:23,500
right answer like it's no more right to

1422
01:11:22,059 --> 01:11:24,730
say that the floor is that point 1 that

1423
01:11:23,500 --> 01:11:26,319
it is to say that the floor is at point

1424
01:11:24,729 --> 01:11:27,879
7 or something right it's completely

1425
01:11:26,319 --> 01:11:29,799
arbitrary it's just whatever your

1426
01:11:27,880 --> 01:11:33,929
reference point happened to be but I

1427
01:11:29,800 --> 01:11:36,579
would argue that if one was going to be

1428
01:11:33,929 --> 01:11:39,609
sort of persnickety about it

1429
01:11:36,578 --> 01:11:41,679
actually it's floor at 0 that makes the

1430
01:11:39,609 --> 01:11:44,319
least sense if you're not going to pick

1431
01:11:41,679 --> 01:11:47,469
a corner for everything so if you pick

1432
01:11:44,319 --> 01:11:49,139
the center bottom that's weird cuz now

1433
01:11:47,469 --> 01:11:52,090
your coordinates are handled very

1434
01:11:49,139 --> 01:11:54,159
non-homogeneous li inside all of your

1435
01:11:52,090 --> 01:11:56,319
computations because now everything is

1436
01:11:54,158 --> 01:11:58,929
about the center if you're in X&amp;Y

1437
01:11:56,319 --> 01:12:01,479
but it's about the minimum if you're in

1438
01:11:58,929 --> 01:12:02,920
Z so you've drawn this weird distinction

1439
01:12:01,479 --> 01:12:04,959
so now all your routines have to be

1440
01:12:02,920 --> 01:12:06,309
bifurcated every time you're leaving Z

1441
01:12:04,960 --> 01:12:08,739
you do one thing in X and ye to the

1442
01:12:06,309 --> 01:12:10,599
other now that's fine if you actually

1443
01:12:08,738 --> 01:12:12,578
had to write because you know obviously

1444
01:12:10,599 --> 01:12:13,779
in the renderer we're already doing some

1445
01:12:12,578 --> 01:12:15,429
things where we have to treat Z

1446
01:12:13,779 --> 01:12:16,779
separately but we're not treating Z

1447
01:12:15,429 --> 01:12:18,550
separately just because we like treating

1448
01:12:16,779 --> 01:12:20,859
Z separately I would love to treat Z

1449
01:12:18,550 --> 01:12:22,719
exactly the same but we have to because

1450
01:12:20,859 --> 01:12:25,238
we have certain effects that are based

1451
01:12:22,719 --> 01:12:27,609
entirely on Z well in the spatial

1452
01:12:25,238 --> 01:12:29,229
partition on the other hand there's no

1453
01:12:27,609 --> 01:12:31,839
difference between these three why would

1454
01:12:29,229 --> 01:12:34,089
we introduce an artificial difference so

1455
01:12:31,840 --> 01:12:36,099
I would argue that ok if you decided

1456
01:12:34,090 --> 01:12:38,139
let's say you decided that you really

1457
01:12:36,099 --> 01:12:40,980
want the floor at zero that's just what

1458
01:12:38,139 --> 01:12:43,389
you you really have to have it

1459
01:12:40,979 --> 01:12:46,000
ok fine your decision but I would argue

1460
01:12:43,389 --> 01:12:47,679
that at that point x and y should now be

1461
01:12:46,000 --> 01:12:50,500
also based on the minimum corner of the

1462
01:12:47,679 --> 01:12:53,078
cube not the center right now we're a

1463
01:12:50,500 --> 01:12:55,059
center right and so I wouldn't want to

1464
01:12:53,078 --> 01:12:59,139
move everything to min so its min X min

1465
01:12:55,059 --> 01:13:00,460
Y min Z at that point and hopefully you

1466
01:12:59,139 --> 01:13:03,359
can see why I think that

1467
01:13:00,460 --> 01:13:03,359
is true

1468
01:13:21,640 --> 01:13:27,400
all right I am going to wrap it up

1469
01:13:35,988 --> 01:13:39,899
all right thank you everyone for joining

1470
01:13:38,310 --> 01:13:41,039
me for an episode handmade hero it's

1471
01:13:39,899 --> 01:13:43,049
been a pleasure coding with you as

1472
01:13:41,039 --> 01:13:44,429
always if you want to follow along with

1473
01:13:43,050 --> 01:13:46,050
the series at home you can always peer

1474
01:13:44,429 --> 01:13:48,000
to the game on handmade hero org and it

1475
01:13:46,050 --> 01:13:48,960
comes to the source code so you can play

1476
01:13:48,000 --> 01:13:51,448
around with it and do your own

1477
01:13:48,960 --> 01:13:53,069
experiments for example if you wanted Z

1478
01:13:51,448 --> 01:13:55,889
to be at zero you could very easily go

1479
01:13:53,069 --> 01:13:57,269
do that we have a forum site you can go

1480
01:13:55,890 --> 01:13:58,619
if you want to ask questions we have a

1481
01:13:57,270 --> 01:14:00,780
patreon page you want support the video

1482
01:13:58,619 --> 01:14:02,039
series a schedule about you can use to

1483
01:14:00,779 --> 01:14:04,800
see when the studio's gonna be live and

1484
01:14:02,039 --> 01:14:06,269
an episode guide you can go to catch up

1485
01:14:04,800 --> 01:14:08,100
on past episodes and I highly recommend

1486
01:14:06,270 --> 01:14:09,330
using this good little bot because a lot

1487
01:14:08,100 --> 01:14:11,310
of times on the stream in fact I did it

1488
01:14:09,329 --> 01:14:13,350
yesterday or two days ago rather I'll

1489
01:14:11,310 --> 01:14:15,750
say we'll be back here tomorrow at blah

1490
01:14:13,350 --> 01:14:17,489
when the schedule is not for us to be

1491
01:14:15,750 --> 01:14:18,960
back here by I tend to be absent mind

1492
01:14:17,488 --> 01:14:22,979
about it so the schedule bot is almost

1493
01:14:18,960 --> 01:14:23,969
always accurate I am NOT so always check

1494
01:14:22,979 --> 01:14:25,229
the schedule bot if you want to know

1495
01:14:23,969 --> 01:14:28,890
when we're gonna be live it's the surest

1496
01:14:25,229 --> 01:14:30,599
thing to do that's about it I believe if

1497
01:14:28,890 --> 01:14:32,369
I'm not mistaken but I just said don't

1498
01:14:30,600 --> 01:14:34,969
trust me that I'll be back here too

1499
01:14:32,369 --> 01:14:37,979
tomorrow at 8 p.m. Pacific Daylight Time

1500
01:14:34,969 --> 01:14:39,840
until then have fun programming and I

1501
01:14:37,979 --> 01:14:42,589
will see you guys on the Internet

1502
01:14:39,840 --> 01:14:42,590
take it easy everyone

