1
00:00:02,029 --> 00:00:07,019
hello everybody and welcome oh god I

2
00:00:04,980 --> 00:00:08,160
didn't mean to actually click that hello

3
00:00:07,019 --> 00:00:10,049
everybody and welcome to handmade hero

4
00:00:08,160 --> 00:00:13,490
show recode a complete-game live on

5
00:00:10,050 --> 00:00:17,160
stream yesterday we did all the work of

6
00:00:13,490 --> 00:00:19,379
optimizing the grid stepping so and I

7
00:00:17,160 --> 00:00:21,539
did it in the actual table building code

8
00:00:19,379 --> 00:00:24,028
so that I could verify it against our

9
00:00:21,539 --> 00:00:25,859
table driven version and so that way I

10
00:00:24,028 --> 00:00:30,028
have some reasonable confidence that it

11
00:00:25,859 --> 00:00:33,750
will just work so today what I would

12
00:00:30,028 --> 00:00:36,119
like to do is actually put it into the

13
00:00:33,750 --> 00:00:37,170
main code so that I can do the change I

14
00:00:36,119 --> 00:00:40,349
can make the change that I actually

15
00:00:37,170 --> 00:00:42,929
wanted to make and so part of the thing

16
00:00:40,350 --> 00:00:46,980
that I want to do here if we take a look

17
00:00:42,929 --> 00:00:50,640
at what we've built so far I have a nice

18
00:00:46,979 --> 00:00:54,179
way of verifying what or I shouldn't say

19
00:00:50,640 --> 00:00:59,340
verifying measuring the slowdown so if I

20
00:00:54,179 --> 00:01:02,448
actually go into handmade debug here and

21
00:00:59,340 --> 00:01:05,909
I run h/h lightproof

22
00:01:02,448 --> 00:01:09,209
like so one thing we can do that's nice

23
00:01:05,909 --> 00:01:12,180
is we can look at what our total time is

24
00:01:09,209 --> 00:01:14,759
right now in terms of the speed at which

25
00:01:12,180 --> 00:01:18,150
things are going and we can sort of see

26
00:01:14,760 --> 00:01:19,859
that we're hovering around 4.5 seconds

27
00:01:18,150 --> 00:01:22,409
and there's some variability in there as

28
00:01:19,859 --> 00:01:25,430
you might expect depending what the OS

29
00:01:22,409 --> 00:01:25,430
is doing and so on so forth

30
00:01:25,519 --> 00:01:32,699
but we kind of know how long our routine

31
00:01:29,938 --> 00:01:35,339
takes to function right now and so what

32
00:01:32,700 --> 00:01:39,450
I wanted to highlight there is just as I

33
00:01:35,340 --> 00:01:41,880
make this switch I want to see if it

34
00:01:39,450 --> 00:01:45,560
costs me anything so right now what

35
00:01:41,879 --> 00:01:48,629
we're doing is we load you can see us

36
00:01:45,560 --> 00:01:51,719
sort of passing it in here you can see

37
00:01:48,629 --> 00:01:53,609
us loading this walk table and so the

38
00:01:51,719 --> 00:01:55,530
way that this works is every time we go

39
00:01:53,609 --> 00:02:00,118
through this loop and we do our array

40
00:01:55,530 --> 00:02:01,829
casting we access the next we basically

41
00:02:00,118 --> 00:02:04,170
look into that walk table to figure out

42
00:02:01,828 --> 00:02:06,118
what grid square we're going to or I

43
00:02:04,170 --> 00:02:11,250
should say grid cube we're going to xx

44
00:02:06,118 --> 00:02:13,939
access next and so what I want to see is

45
00:02:11,250 --> 00:02:16,919
can we now sub in

46
00:02:13,939 --> 00:02:22,349
just the raw code from the walk table

47
00:02:16,919 --> 00:02:26,429
routine and effectively get our walking

48
00:02:22,349 --> 00:02:28,079
in line with no table lookups without

49
00:02:26,430 --> 00:02:30,689
actually paying any significant

50
00:02:28,080 --> 00:02:32,070
performance penalty again if you're here

51
00:02:30,689 --> 00:02:34,370
yesterday you know the reason why I want

52
00:02:32,069 --> 00:02:37,620
to do that the reason is just because I

53
00:02:34,370 --> 00:02:39,390
want to be able to make the sizes of our

54
00:02:37,620 --> 00:02:42,180
grid squares significantly larger than

55
00:02:39,389 --> 00:02:45,119
the lighting voxel that's just so we can

56
00:02:42,180 --> 00:02:46,590
do more iterations of the inner loop to

57
00:02:45,120 --> 00:02:49,170
test and right now we're just really

58
00:02:46,590 --> 00:02:50,460
under filled and again if you missed

59
00:02:49,169 --> 00:02:55,369
yesterday's dream that's what this is

60
00:02:50,460 --> 00:02:58,980
showing we really want to slot into

61
00:02:55,370 --> 00:03:01,050
these much more cleanly we want a lot

62
00:02:58,979 --> 00:03:03,239
more higher numbers in here so we want

63
00:03:01,050 --> 00:03:05,910
box count you know 16 and stuff like

64
00:03:03,240 --> 00:03:08,790
this and furthermore we really want to

65
00:03:05,909 --> 00:03:10,379
reduce the count here and the since this

66
00:03:08,789 --> 00:03:13,139
is just representing empty space the

67
00:03:10,379 --> 00:03:15,719
only way to reduce that count is reduce

68
00:03:13,139 --> 00:03:17,099
the size right and what you can

69
00:03:15,719 --> 00:03:18,719
understand there it's like we're

70
00:03:17,099 --> 00:03:20,250
traversing these grid squares as a way

71
00:03:18,719 --> 00:03:21,569
of reducing the number of things we're a

72
00:03:20,250 --> 00:03:24,930
cast against but when that number

73
00:03:21,569 --> 00:03:26,819
reduces to small we just are wasting too

74
00:03:24,930 --> 00:03:28,920
much time getting over the grid right

75
00:03:26,819 --> 00:03:30,509
and it's really easy for me to just

76
00:03:28,919 --> 00:03:32,269
change that size it's just a few

77
00:03:30,509 --> 00:03:35,069
parameters we can just play with right

78
00:03:32,270 --> 00:03:37,050
but the thing that would hold us back is

79
00:03:35,069 --> 00:03:42,599
the watt table so we just need to go

80
00:03:37,050 --> 00:03:46,200
make sure right that we can actually do

81
00:03:42,599 --> 00:03:47,909
the walk generically without a table and

82
00:03:46,199 --> 00:03:52,319
so that's what I'm going to try to do

83
00:03:47,909 --> 00:03:54,719
now so if we go down to our compute walk

84
00:03:52,319 --> 00:03:58,620
table fast routine in here you can kind

85
00:03:54,719 --> 00:04:00,689
of see us doing the set up and so on and

86
00:03:58,620 --> 00:04:02,789
we have a few tables that we need to use

87
00:04:00,689 --> 00:04:06,840
that are just local access tables those

88
00:04:02,789 --> 00:04:07,949
are cheap and pretty easy so I should be

89
00:04:06,840 --> 00:04:09,840
able to just stick them in here and

90
00:04:07,949 --> 00:04:15,509
furthermore once we actually have these

91
00:04:09,840 --> 00:04:19,410
tables lined up in here we will also be

92
00:04:15,509 --> 00:04:24,469
able to replace if we want to we could I

93
00:04:19,410 --> 00:04:27,480
think probably do an extended version of

94
00:04:24,470 --> 00:04:28,920
the best table

95
00:04:27,480 --> 00:04:30,660
if we wanted to do an extended version

96
00:04:28,920 --> 00:04:34,910
of the best table we could probably

97
00:04:30,660 --> 00:04:38,880
change from using the min the mini pu 16

98
00:04:34,910 --> 00:04:41,760
hack that I did here that I feel like

99
00:04:38,879 --> 00:04:43,800
was kind of fancy and smart but

100
00:04:41,759 --> 00:04:46,230
sometimes being fancy and smart just

101
00:04:43,800 --> 00:04:47,430
just makes you fancy and dumb so I'm not

102
00:04:46,230 --> 00:04:50,819
sure that this was really a good idea

103
00:04:47,430 --> 00:04:53,490
because of the accuracy concerns and so

104
00:04:50,819 --> 00:04:55,319
on so I'm not really sure we want to

105
00:04:53,490 --> 00:04:58,259
leave that in there so now that we've

106
00:04:55,319 --> 00:04:59,969
got a way to kind of do this and we're

107
00:04:58,259 --> 00:05:01,680
already using a table to drive the tea

108
00:04:59,970 --> 00:05:07,260
comparison and we know we need that one

109
00:05:01,680 --> 00:05:14,670
to be accurate we can probably extend

110
00:05:07,259 --> 00:05:21,629
this to this table to be 16 long and if

111
00:05:14,670 --> 00:05:25,439
we I mean honestly we can change this to

112
00:05:21,629 --> 00:05:26,459
eu8 as well so we extend this table we

113
00:05:25,439 --> 00:05:30,449
could then use it for the other

114
00:05:26,459 --> 00:05:31,229
comparison probably right so just

115
00:05:30,449 --> 00:05:33,120
something to think about

116
00:05:31,230 --> 00:05:35,129
it's in the back of my head whether I

117
00:05:33,120 --> 00:05:36,959
want to do it or not I don't know and it

118
00:05:35,129 --> 00:05:38,550
doesn't really matter right now but it's

119
00:05:36,959 --> 00:05:40,259
just worth noting that we may be able to

120
00:05:38,550 --> 00:05:41,520
more or less for free because we already

121
00:05:40,259 --> 00:05:44,370
paid for the tables and they're already

122
00:05:41,519 --> 00:05:45,959
in the cache we may be able to just

123
00:05:44,370 --> 00:05:47,879
replace this with a more accurate one

124
00:05:45,959 --> 00:05:53,399
and and that may be something we want to

125
00:05:47,879 --> 00:05:56,370
do just something about ok so if we go

126
00:05:53,399 --> 00:05:58,769
and now take a look at what's going on

127
00:05:56,370 --> 00:06:00,840
in the table building loop that we

128
00:05:58,769 --> 00:06:02,969
already optimized you can see the stuff

129
00:06:00,839 --> 00:06:05,699
that's happening here is fairly

130
00:06:02,970 --> 00:06:07,920
straightforward and then each time we

131
00:06:05,699 --> 00:06:11,959
want to take a step it's just this code

132
00:06:07,920 --> 00:06:17,189
at the top right it's this code here so

133
00:06:11,959 --> 00:06:19,919
I believe if we just go down here and we

134
00:06:17,189 --> 00:06:23,759
take a look at when it's using the table

135
00:06:19,920 --> 00:06:25,710
right I should be able to do something

136
00:06:23,759 --> 00:06:28,289
where I can just validate this against

137
00:06:25,709 --> 00:06:30,419
the table directly in line right so what

138
00:06:28,290 --> 00:06:32,490
I could do is say ok I'm gonna grab this

139
00:06:30,420 --> 00:06:37,490
code here's the code that actually does

140
00:06:32,490 --> 00:06:37,490
the walk right that's it right there

141
00:06:40,850 --> 00:06:47,730
um and all its doing is it's just taking

142
00:06:44,579 --> 00:06:50,099
the T values moving them forward by the

143
00:06:47,730 --> 00:06:51,990
amount they would go in each of the

144
00:06:50,100 --> 00:06:54,360
dimensions seeing which one hits first

145
00:06:51,990 --> 00:06:58,290
so do we hit the x wall Y wall or Z wall

146
00:06:54,360 --> 00:07:02,939
first updating the tracking of where we

147
00:06:58,290 --> 00:07:05,069
are and you know outputting basically

148
00:07:02,939 --> 00:07:07,230
thanks to the best table outputting

149
00:07:05,069 --> 00:07:11,099
which one of the columns you know was it

150
00:07:07,230 --> 00:07:12,300
X was it why was it Z so if you take a

151
00:07:11,100 --> 00:07:14,220
look at what we actually need to know

152
00:07:12,300 --> 00:07:15,990
here we just need grid index in T

153
00:07:14,220 --> 00:07:19,590
terminate or more specifically we just

154
00:07:15,990 --> 00:07:21,629
need D grid and T terminate and so we

155
00:07:19,589 --> 00:07:24,209
kind of know at that point we can get

156
00:07:21,629 --> 00:07:26,069
those two out by just doing these two we

157
00:07:24,209 --> 00:07:28,469
can we can extract if T terminate if we

158
00:07:26,069 --> 00:07:30,300
need one and we can extract a good

159
00:07:28,470 --> 00:07:32,550
result if we need one just by looking at

160
00:07:30,300 --> 00:07:35,100
these so the step table a determinate

161
00:07:32,550 --> 00:07:36,900
table and so all I want to do here is

162
00:07:35,100 --> 00:07:41,430
again I want to do the exact same stuff

163
00:07:36,899 --> 00:07:44,819
I was doing so I basically want to do

164
00:07:41,430 --> 00:07:47,009
this verification and basically have it

165
00:07:44,819 --> 00:07:48,870
just fault on me immediately if they

166
00:07:47,009 --> 00:07:53,459
don't fire if I I want to do that

167
00:07:48,870 --> 00:07:57,060
verification against the these values so

168
00:07:53,459 --> 00:08:00,089
I don't want to update the walk table

169
00:07:57,060 --> 00:08:03,389
just yet right I want to kind of do that

170
00:08:00,089 --> 00:08:04,799
afterwards just so I can see like so but

171
00:08:03,389 --> 00:08:07,409
another way I could do that and maybe

172
00:08:04,800 --> 00:08:09,329
I'll do it just for fun is here I'll

173
00:08:07,410 --> 00:08:12,900
just do like what was the D grid value

174
00:08:09,329 --> 00:08:14,759
I'll just read it out that way we're not

175
00:08:12,899 --> 00:08:17,189
reacting that table so we've got the D

176
00:08:14,759 --> 00:08:19,409
grid in the T terminate there and what

177
00:08:17,189 --> 00:08:21,329
I'm gonna do here is just take and say I

178
00:08:19,410 --> 00:08:23,720
want the T terminate and the degrade

179
00:08:21,329 --> 00:08:30,089
values to line up like you can see and

180
00:08:23,720 --> 00:08:31,890
that way as soon as there's a problem it

181
00:08:30,089 --> 00:08:35,039
will crash right so I'll fault

182
00:08:31,889 --> 00:08:36,120
immediately upon there and again the

183
00:08:35,039 --> 00:08:38,009
reason for that is because sometimes we

184
00:08:36,120 --> 00:08:39,539
turn asserts off when we're building in

185
00:08:38,009 --> 00:08:41,460
release mode and so I just want this

186
00:08:39,539 --> 00:08:44,579
default all the time right now and then

187
00:08:41,460 --> 00:08:46,200
when I clean it out we'll be done so

188
00:08:44,580 --> 00:08:48,930
that should do it

189
00:08:46,200 --> 00:08:51,450
and now what I need is the preamble

190
00:08:48,929 --> 00:08:51,929
right so you can see here we've got some

191
00:08:51,450 --> 00:08:57,300
issues

192
00:08:51,929 --> 00:08:58,859
like the shuffle table the shuffle table

193
00:08:57,299 --> 00:09:01,169
is a little bit different right and I

194
00:08:58,860 --> 00:09:02,100
have two and this one is and and one of

195
00:09:01,169 --> 00:09:05,429
the things we'll probably want to do is

196
00:09:02,100 --> 00:09:06,629
unify these shuffle tables right and we

197
00:09:05,429 --> 00:09:08,219
may be able to do that but for now I

198
00:09:06,629 --> 00:09:10,919
don't care so I'm just gonna call this

199
00:09:08,220 --> 00:09:13,019
like the tea shuffle table and that one

200
00:09:10,919 --> 00:09:15,179
can still be called shuffle table so

201
00:09:13,019 --> 00:09:16,919
down here where we where we access it

202
00:09:15,179 --> 00:09:19,949
there's really only one place right all

203
00:09:16,919 --> 00:09:22,679
it does is is do that one shuffle to get

204
00:09:19,950 --> 00:09:24,509
everything into the right location so

205
00:09:22,679 --> 00:09:26,579
it's pretty straight forward and then

206
00:09:24,509 --> 00:09:30,659
what we need is you can see all of these

207
00:09:26,580 --> 00:09:37,740
four values are not actually they don't

208
00:09:30,659 --> 00:09:40,500
exist right cuz we set them up to me we

209
00:09:37,740 --> 00:09:42,899
set them up up here so what we want to

210
00:09:40,500 --> 00:09:44,940
do is we want to bring those values into

211
00:09:42,899 --> 00:09:47,940
the system and it's a little bit tricky

212
00:09:44,940 --> 00:09:54,740
because the way we chose to do this as X

213
00:09:47,940 --> 00:09:56,970
Y the way we chose to do this as X Y X Z

214
00:09:54,740 --> 00:10:02,039
again that causes some problems for us

215
00:09:56,970 --> 00:10:06,060
so it makes it not line up very well

216
00:10:02,039 --> 00:10:08,429
with the other things we have to be

217
00:10:06,059 --> 00:10:10,109
completely honest with you I think the

218
00:10:08,429 --> 00:10:12,269
reason we did it was probably not a

219
00:10:10,110 --> 00:10:13,950
fantastic reason so the reason we did it

220
00:10:12,269 --> 00:10:16,919
was so that we could actually just make

221
00:10:13,950 --> 00:10:19,170
this table be shorter but that looks

222
00:10:16,919 --> 00:10:21,419
pretty dumb now doesn't it because if

223
00:10:19,169 --> 00:10:23,519
you look at what's gonna happen when we

224
00:10:21,419 --> 00:10:25,049
integrate this routine all of a sudden

225
00:10:23,519 --> 00:10:29,039
we're going to need completely different

226
00:10:25,049 --> 00:10:33,359
values for each of these right which is

227
00:10:29,039 --> 00:10:37,199
a huge pain in the butt so actually you

228
00:10:33,360 --> 00:10:42,149
know maybe we don't want to do that yet

229
00:10:37,200 --> 00:10:45,509
like maybe that's actually dumb and

230
00:10:42,149 --> 00:10:48,208
maybe what we actually want is to go

231
00:10:45,509 --> 00:10:53,450
back to that routine and just make it

232
00:10:48,208 --> 00:10:57,539
work with X Y Z X right I don't know

233
00:10:53,450 --> 00:11:00,600
it's unclear to me like I want to double

234
00:10:57,539 --> 00:11:01,889
check that that makes sense but I just

235
00:11:00,600 --> 00:11:03,600
think it would because if you take a

236
00:11:01,889 --> 00:11:05,610
look at what happens here with like Ray

237
00:11:03,600 --> 00:11:09,000
ad packed and stuff we are

238
00:11:05,610 --> 00:11:11,190
kind of have what we need but we just

239
00:11:09,000 --> 00:11:14,129
would have to add like the ex in here

240
00:11:11,190 --> 00:11:16,680
right and even if we didn't want to do

241
00:11:14,129 --> 00:11:19,980
that we could even just leave that lane

242
00:11:16,679 --> 00:11:22,079
as zero if we wanted to and if we did

243
00:11:19,980 --> 00:11:23,580
that we still would probably just be

244
00:11:22,080 --> 00:11:25,740
able to make this work we just need to

245
00:11:23,580 --> 00:11:28,160
do one extra shuffle right we just need

246
00:11:25,740 --> 00:11:33,330
to replicate the X before we do anything

247
00:11:28,159 --> 00:11:35,100
so it's kind of it seems kind of

248
00:11:33,330 --> 00:11:37,410
motivating to do that so if we take a

249
00:11:35,100 --> 00:11:38,850
look at Rady pact and where that

250
00:11:37,409 --> 00:11:40,529
actually gets used you can see it

251
00:11:38,850 --> 00:11:42,930
getting used in a bunch of places for

252
00:11:40,529 --> 00:11:44,669
initialization as well my only question

253
00:11:42,929 --> 00:11:46,529
is like what are we doing with that one

254
00:11:44,669 --> 00:11:48,569
lane there with that Lane being zero

255
00:11:46,529 --> 00:11:51,870
like does that always get knocked out or

256
00:11:48,570 --> 00:11:53,810
doesn't it right and that's pretty

257
00:11:51,870 --> 00:11:56,159
tricky because I don't know like we're

258
00:11:53,809 --> 00:11:58,049
optimized this code quite a bit and so

259
00:11:56,159 --> 00:12:01,199
we're kind of past the point of this

260
00:11:58,049 --> 00:12:03,599
being versatile code like we went we're

261
00:12:01,200 --> 00:12:08,100
in the speed zone now so everything's

262
00:12:03,600 --> 00:12:10,409
like very concentrated and so it's hard

263
00:12:08,100 --> 00:12:12,029
for me to know like to what extent we

264
00:12:10,409 --> 00:12:14,639
may have relied on that for tricks

265
00:12:12,029 --> 00:12:16,019
because it's hard to you know can't

266
00:12:14,639 --> 00:12:17,519
really document every little thing you

267
00:12:16,019 --> 00:12:20,220
do when you try to optimize a piece of

268
00:12:17,519 --> 00:12:24,329
code and so it's you know it's kind of

269
00:12:20,220 --> 00:12:26,790
difficult to say but we can't kind of

270
00:12:24,330 --> 00:12:28,710
take a quick look and just see like do

271
00:12:26,789 --> 00:12:31,110
we think we could just stack an X in

272
00:12:28,710 --> 00:12:32,550
there and again another thing we

273
00:12:31,110 --> 00:12:34,680
probably want to do is eventually just

274
00:12:32,549 --> 00:12:40,019
test these routines a little bit hard

275
00:12:34,679 --> 00:12:42,329
because we can make constructive tests

276
00:12:40,019 --> 00:12:43,769
where we make specific shapes and stuff

277
00:12:42,330 --> 00:12:49,710
and make sure we hit in the way we

278
00:12:43,769 --> 00:12:52,259
expect and things like that right so

279
00:12:49,710 --> 00:12:55,920
like looking you know I mean just

280
00:12:52,259 --> 00:12:59,129
looking at this stuff though I honestly

281
00:12:55,919 --> 00:13:01,610
don't know that there's a huge issue

282
00:12:59,129 --> 00:13:01,610
there

283
00:13:05,919 --> 00:13:20,469
I mean you know it doesn't look like it

284
00:13:17,078 --> 00:13:25,058
right because most of the time you see

285
00:13:20,470 --> 00:13:31,859
it's extracting out and it just doesn't

286
00:13:25,058 --> 00:13:34,659
really look like it particularly cares

287
00:13:31,859 --> 00:13:38,528
you know because like things just get

288
00:13:34,659 --> 00:13:40,659
knocked out all the time here so it just

289
00:13:38,528 --> 00:13:42,698
it doesn't really look like the kind of

290
00:13:40,659 --> 00:13:45,999
thing where it's gonna care if we used

291
00:13:42,698 --> 00:13:48,308
that extra Lane so I think I'm just

292
00:13:45,999 --> 00:13:51,519
going to go ahead and say like either

293
00:13:48,308 --> 00:13:57,009
way I want to go to that fast routine

294
00:13:51,519 --> 00:13:59,438
here and I just want to do a little bit

295
00:13:57,009 --> 00:14:02,259
more work on that so let's just make

296
00:13:59,438 --> 00:14:04,480
sure so if I go and launch this in the

297
00:14:02,259 --> 00:14:06,609
debugger I should be able to make sure

298
00:14:04,480 --> 00:14:09,159
that we're still validating correctly so

299
00:14:06,609 --> 00:14:11,350
if I run it it works if I go in here and

300
00:14:09,159 --> 00:14:13,389
I change this table to be like incorrect

301
00:14:11,350 --> 00:14:16,839
or something like let's say these are

302
00:14:13,389 --> 00:14:19,959
twos now it should just fall immediately

303
00:14:16,839 --> 00:14:22,839
as not matching the results that we

304
00:14:19,958 --> 00:14:24,878
expect right and again this is just for

305
00:14:22,839 --> 00:14:26,499
me to make sure that our safety net is

306
00:14:24,879 --> 00:14:32,308
still in place while we make these

307
00:14:26,499 --> 00:14:36,249
changes so when I go down here and I

308
00:14:32,308 --> 00:14:39,428
want to do this reorganization so if I

309
00:14:36,249 --> 00:14:46,079
just move the X's to the end for

310
00:14:39,428 --> 00:14:50,288
starters that looks like this oops

311
00:14:46,078 --> 00:14:54,159
so now we're packed X Y Z X X Y Z X X Y

312
00:14:50,288 --> 00:14:56,048
Z X and when we come down through and we

313
00:14:54,159 --> 00:14:57,938
do any of our extractions and shuffles

314
00:14:56,048 --> 00:14:59,980
these might be slightly different now

315
00:14:57,938 --> 00:15:02,168
right so the first thing we'll see is

316
00:14:59,980 --> 00:15:04,629
when we do this shuffle for X and we're

317
00:15:02,168 --> 00:15:07,480
trying to line things up what you can

318
00:15:04,629 --> 00:15:09,188
see is we're doing one three that's for

319
00:15:07,480 --> 00:15:12,178
the X Y those are the same so that's

320
00:15:09,188 --> 00:15:15,958
fine and then we do the T 4 we're doing

321
00:15:12,178 --> 00:15:15,958
Z Z and

322
00:15:21,220 --> 00:15:25,110
you know doesn't really make a lot of

323
00:15:23,960 --> 00:15:28,139
sense

324
00:15:25,110 --> 00:15:28,139
[Music]

325
00:15:37,899 --> 00:15:43,278
hmm so you know now that I'm kind of

326
00:15:42,169 --> 00:15:47,240
looking at this I'm also wondering

327
00:15:43,278 --> 00:15:50,088
myself did we even really need that in

328
00:15:47,240 --> 00:15:54,259
the first place so like we could have

329
00:15:50,089 --> 00:15:56,899
just shuffled the X into here and done

330
00:15:54,259 --> 00:16:02,899
the X Z comparison the wrong way round

331
00:15:56,899 --> 00:16:11,539
so I don't actually even know if we need

332
00:16:02,899 --> 00:16:14,629
this padding so maybe what I would say

333
00:16:11,539 --> 00:16:18,949
there is let's do this one change then

334
00:16:14,629 --> 00:16:21,409
I'll try the actual active also just

335
00:16:18,950 --> 00:16:22,700
leaving this Lane zero and switching the

336
00:16:21,409 --> 00:16:24,110
order the comparison because it looks

337
00:16:22,700 --> 00:16:28,610
like we could get away with that too

338
00:16:24,110 --> 00:16:32,389
right so all right so if we change that

339
00:16:28,610 --> 00:16:36,680
comparison order here is our mask table

340
00:16:32,389 --> 00:16:39,139
and the mask table you can see every

341
00:16:36,679 --> 00:16:41,509
time there's an X it has this channel in

342
00:16:39,139 --> 00:16:43,549
it as well we would want to change that

343
00:16:41,509 --> 00:16:45,819
so now what we would be doing is we'd

344
00:16:43,549 --> 00:16:48,349
say look when we are doing X masking

345
00:16:45,820 --> 00:16:50,240
what we're only talking about the first

346
00:16:48,350 --> 00:16:52,879
lane similarly when we're doing Z

347
00:16:50,240 --> 00:16:55,399
masking now we would be we would be

348
00:16:52,879 --> 00:17:01,429
talking specifically about the third

349
00:16:55,399 --> 00:17:04,189
lane so you know we look like that so Z

350
00:17:01,429 --> 00:17:08,659
is third lane Y is first that sorry well

351
00:17:04,189 --> 00:17:14,089
0 with Lane is x1 if Lane is is y insect

352
00:17:08,660 --> 00:17:15,500
that second lane is Izzy so the last

353
00:17:14,088 --> 00:17:18,019
thing we have to update is the best

354
00:17:15,500 --> 00:17:20,990
table and the reason we have to update

355
00:17:18,019 --> 00:17:24,949
the best table is because now the best

356
00:17:20,990 --> 00:17:28,068
table would actually be 16 wide and so

357
00:17:24,949 --> 00:17:30,110
the X less than Y would be the same the

358
00:17:28,068 --> 00:17:32,990
Y less than Z would be the same and the

359
00:17:30,109 --> 00:17:35,659
X less than Z is now not in this channel

360
00:17:32,990 --> 00:17:39,730
so it's actually like a there's a

361
00:17:35,660 --> 00:17:39,730
phantom channel here right

362
00:17:41,419 --> 00:17:49,620
and sort of what we're saying is we

363
00:17:45,029 --> 00:17:52,139
don't care what this channel is right

364
00:17:49,619 --> 00:17:54,000
like we don't want to care and so you

365
00:17:52,140 --> 00:17:56,309
know and this is an interim step like I

366
00:17:54,000 --> 00:17:58,048
said we don't really want to actually do

367
00:17:56,308 --> 00:18:02,788
this right but you know that's just

368
00:17:58,048 --> 00:18:04,410
where we're at so if we continue the bit

369
00:18:02,788 --> 00:18:05,640
pattern here you know that's what we

370
00:18:04,410 --> 00:18:07,380
would get here and it's gonna be the

371
00:18:05,640 --> 00:18:09,630
same in this case and then we would do

372
00:18:07,380 --> 00:18:11,250
you know a duplicate here as well right

373
00:18:09,630 --> 00:18:13,350
so you just say like okay it's gonna be

374
00:18:11,250 --> 00:18:15,750
same and again I don't think we actually

375
00:18:13,349 --> 00:18:18,329
want to do this right but I'm just

376
00:18:15,750 --> 00:18:21,779
trying to do it one step at a time so

377
00:18:18,329 --> 00:18:22,740
that we can validate sort of things in

378
00:18:21,779 --> 00:18:24,329
the interim because it's fairly

379
00:18:22,740 --> 00:18:29,880
complicated code right I don't really

380
00:18:24,329 --> 00:18:32,460
want to have to do it blind so again

381
00:18:29,880 --> 00:18:34,710
same thing so now when we look at length

382
00:18:32,460 --> 00:18:36,900
the shuffle table so the shuffle table

383
00:18:34,710 --> 00:18:39,538
in this case is doing the same lookup

384
00:18:36,900 --> 00:18:41,190
that you would be doing here and again

385
00:18:39,538 --> 00:18:44,490
you know it's it's gonna be a little

386
00:18:41,190 --> 00:18:46,769
cumbersome at first but that's fine so

387
00:18:44,490 --> 00:18:51,120
it is zero one zero and then the

388
00:18:46,769 --> 00:18:52,679
difference here is two is not this like

389
00:18:51,119 --> 00:18:54,058
that's picking the final lane but we

390
00:18:52,679 --> 00:19:07,169
actually want to pick the middle lane so

391
00:18:54,058 --> 00:19:08,940
this is an 8 9 10 11 like so and so

392
00:19:07,169 --> 00:19:12,480
that's the zero and zero two we would

393
00:19:08,940 --> 00:19:14,700
duplicate that much like we duplicated

394
00:19:12,480 --> 00:19:16,319
it up here just because that middle bit

395
00:19:14,700 --> 00:19:19,500
we don't want to care we're just not

396
00:19:16,319 --> 00:19:21,779
going to look at it ever so we're just

397
00:19:19,500 --> 00:19:23,788
gonna leave it out and then we get to

398
00:19:21,779 --> 00:19:26,339
the second part which is 2 1 2 2 and

399
00:19:23,788 --> 00:19:27,960
again same problem these twelves is not

400
00:19:26,339 --> 00:19:31,529
we actually want so we just want to

401
00:19:27,960 --> 00:19:33,600
replace those like so and then we're

402
00:19:31,529 --> 00:19:35,158
just duplicating that twice and so you

403
00:19:33,599 --> 00:19:38,069
can see this like expands our tables

404
00:19:35,159 --> 00:19:40,620
quite extensively and that's why I think

405
00:19:38,069 --> 00:19:42,269
we want to just stick with doing the 3

406
00:19:40,619 --> 00:19:45,000
wide version because it just keeps

407
00:19:42,269 --> 00:19:48,808
everything smaller but I just want to do

408
00:19:45,000 --> 00:19:51,630
this one first alright so now let's

409
00:19:48,808 --> 00:19:54,500
debug it as you would expect like it's

410
00:19:51,630 --> 00:19:54,500
probably going to be busted

411
00:19:54,648 --> 00:20:00,478
the mask table is wrong though I just

412
00:19:57,569 --> 00:20:05,418
realized that we didn't we didn't finish

413
00:20:00,479 --> 00:20:08,249
this there we go

414
00:20:05,419 --> 00:20:09,840
all right let's try that one more time

415
00:20:08,249 --> 00:20:14,999
and I probably want to go into debug

416
00:20:09,839 --> 00:20:21,449
mode for this as well I might just let

417
00:20:14,999 --> 00:20:23,729
these be Auto yeah I want to go to debug

418
00:20:21,450 --> 00:20:25,679
mode because I want to be able to go

419
00:20:23,729 --> 00:20:27,840
through it and see what's wrong and so

420
00:20:25,679 --> 00:20:32,309
on so I want to kind of just do a quick

421
00:20:27,839 --> 00:20:33,988
yeah there we go all right so now what I

422
00:20:32,308 --> 00:20:36,239
want to do is I want to kind of see like

423
00:20:33,989 --> 00:20:39,538
what's going wrong here you could see

424
00:20:36,239 --> 00:20:43,319
that I think the tables are roughly

425
00:20:39,538 --> 00:20:52,259
correct if it's 0 1 0 2 0 1 0 2 right 0

426
00:20:43,319 --> 00:21:00,329
1 0 2 0 1 0 - 2 1 - 2 - 1 - 2 - 1 2 -

427
00:20:52,259 --> 00:21:09,048
the math table is 0 1 0 2 so 0 1 0 2 0 1

428
00:21:00,329 --> 00:21:14,178
0 2 &amp; 2 1 - 2 - wait that's wrong

429
00:21:09,048 --> 00:21:18,319
where'd it go alright so well I was

430
00:21:14,179 --> 00:21:18,320
thinking I had it right I don't

431
00:21:24,440 --> 00:21:29,999
yeah bit twiddling it's always very

432
00:21:27,479 --> 00:21:33,808
finicky alright let's try that one more

433
00:21:29,999 --> 00:21:36,389
time so - 1 - 2 - 1 - 2 times the bottom

434
00:21:33,808 --> 00:21:37,888
right and so now I can take a look at

435
00:21:36,388 --> 00:21:40,519
what we're actually getting here in the

436
00:21:37,888 --> 00:21:42,959
registers and see what's going wrong so

437
00:21:40,519 --> 00:21:49,229
let's take a look at at what all these

438
00:21:42,960 --> 00:21:51,808
actually are first so looking at the

439
00:21:49,229 --> 00:21:57,048
values we know when we doing T 4 and T 4

440
00:21:51,808 --> 00:22:00,028
s essentially T 4 is XY and Z and oh

441
00:21:57,048 --> 00:22:02,579
well and that's wrong - so we have not

442
00:22:00,028 --> 00:22:04,829
finished updating this routine this we

443
00:22:02,579 --> 00:22:06,369
moved from lane 3 to lane 2 so that's

444
00:22:04,829 --> 00:22:09,189
supposed to be 2

445
00:22:06,369 --> 00:22:11,158
three just has X in it and we don't

446
00:22:09,190 --> 00:22:13,390
actually want X anywhere on the bottom

447
00:22:11,159 --> 00:22:15,220
that was not a thing we're actually

448
00:22:13,390 --> 00:22:18,009
doing so I don't know what that was

449
00:22:15,220 --> 00:22:19,870
there for again we might change that

450
00:22:18,009 --> 00:22:21,038
eventually but again it wasn't very

451
00:22:19,869 --> 00:22:24,519
great okay so let's try that one more

452
00:22:21,038 --> 00:22:27,700
time so let's take a look at what T 4

453
00:22:24,519 --> 00:22:29,798
equals because T 4 in this case like we

454
00:22:27,700 --> 00:22:31,298
always want everything the X Y Z X and

455
00:22:29,798 --> 00:22:36,369
you can see we initialize it that way X

456
00:22:31,298 --> 00:22:37,918
Y Z X X Y Z X always at the top right so

457
00:22:36,369 --> 00:22:47,639
now if we take a look at what these

458
00:22:37,919 --> 00:22:49,419
actually equal I can start to just

459
00:22:47,640 --> 00:22:53,049
validate whether or not any of this

460
00:22:49,419 --> 00:22:56,049
stuff went correctly right so our T 4

461
00:22:53,048 --> 00:22:57,668
and our t 4s they never get modified so

462
00:22:56,048 --> 00:22:59,379
I can watch exactly what happened to

463
00:22:57,669 --> 00:23:03,190
them and you can see here so we've got

464
00:22:59,380 --> 00:23:05,110
our T 4 here's our x y&amp;z stepping values

465
00:23:03,190 --> 00:23:07,090
so that's like you can see here that

466
00:23:05,109 --> 00:23:14,229
we're supposed to be picking like the Z

467
00:23:07,089 --> 00:23:17,189
step because it's the lowest I'm gonna

468
00:23:14,230 --> 00:23:17,190
get some extra T here

469
00:23:37,390 --> 00:23:40,509
all right

470
00:23:47,429 --> 00:23:53,559
okay so what I was trying to say there

471
00:23:51,308 --> 00:23:55,388
is if you look here these are the T

472
00:23:53,558 --> 00:23:58,989
values we computed and now you can see

473
00:23:55,388 --> 00:24:01,719
that we've got this Z value here and so

474
00:23:58,989 --> 00:24:05,048
here we're trying to rearrange these so

475
00:24:01,720 --> 00:24:07,569
that we have Y Z and then just Z right

476
00:24:05,048 --> 00:24:09,908
and that's what we have Y Z and Z so

477
00:24:07,569 --> 00:24:11,710
that shuffle appears to work properly we

478
00:24:09,909 --> 00:24:14,769
have a min comp here which will show us

479
00:24:11,710 --> 00:24:16,808
if we look at what the comparison is so

480
00:24:14,769 --> 00:24:20,319
here's the min comp

481
00:24:16,808 --> 00:24:24,940
you can see here that the this is trying

482
00:24:20,319 --> 00:24:28,358
to say like what's greater right so in

483
00:24:24,940 --> 00:24:31,389
this case nine is not greater than 27 1

484
00:24:28,358 --> 00:24:34,658
is not greater than sorry 27 is greater

485
00:24:31,388 --> 00:24:37,118
than 1 1 is not greater than 1.4 or

486
00:24:34,659 --> 00:24:41,369
whatever and so this is the only channel

487
00:24:37,118 --> 00:24:44,378
that we get as you know a positive right

488
00:24:41,368 --> 00:24:46,839
so then we say okay let's move the comp

489
00:24:44,378 --> 00:24:49,298
mask out so that's going to basically

490
00:24:46,839 --> 00:24:51,099
take and it's going to look at the high

491
00:24:49,298 --> 00:24:55,658
bits of each of these so what we expect

492
00:24:51,099 --> 00:25:02,009
to see here is 0 1 0 0 from the LSB out

493
00:24:55,659 --> 00:25:02,009
so that's just gonna be 2 right here

494
00:25:03,599 --> 00:25:08,378
which is what we get and then we're

495
00:25:06,308 --> 00:25:10,118
looking up into the best table here to

496
00:25:08,378 --> 00:25:11,949
see what the best dimension is so let's

497
00:25:10,118 --> 00:25:18,939
see let's make sure our best in this

498
00:25:11,950 --> 00:25:22,899
correct cuz maybe this is wrong like so

499
00:25:18,940 --> 00:25:26,200
yeah if we look at what we actually have

500
00:25:22,898 --> 00:25:28,888
here that's just wrong so let me look at

501
00:25:26,200 --> 00:25:28,889
what's going on in that

502
00:25:32,640 --> 00:25:44,290
so what we basically saw right is we saw

503
00:25:37,450 --> 00:25:47,220
just this one bit set right and so we

504
00:25:44,289 --> 00:25:57,599
basically said if X rather than Y Y is

505
00:25:47,220 --> 00:26:04,600
less than Z wait a second

506
00:25:57,599 --> 00:26:08,909
right there bring me back there so we

507
00:26:04,599 --> 00:26:12,339
basically got our comparisons we said

508
00:26:08,910 --> 00:26:16,870
accident you know we're doing a greater

509
00:26:12,339 --> 00:26:19,539
than so in this case X greater than Y is

510
00:26:16,869 --> 00:26:23,049
what that's doing and X is not greater

511
00:26:19,539 --> 00:26:25,210
than Y right so that would mean that X

512
00:26:23,049 --> 00:26:30,240
is lower than Y so we want to then know

513
00:26:25,210 --> 00:26:34,660
if X is greater than Z right and so X

514
00:26:30,240 --> 00:26:46,089
greater than Z should also be false

515
00:26:34,660 --> 00:26:54,250
right yeah so we should have been

516
00:26:46,089 --> 00:26:56,349
keeping X because X is greater than Z am

517
00:26:54,250 --> 00:27:03,730
I wrong about that so we should be

518
00:26:56,349 --> 00:27:07,319
keeping X because X and that goes the

519
00:27:03,730 --> 00:27:10,089
wrong way around too so we changed these

520
00:27:07,319 --> 00:27:14,379
partway through these should be this way

521
00:27:10,089 --> 00:27:17,079
right because I mean that's that's what

522
00:27:14,380 --> 00:27:22,660
we're looking at we're looking at it

523
00:27:17,079 --> 00:27:25,279
this way am I wrong about this not sure

524
00:27:22,660 --> 00:27:27,050
why we wrote it that way

525
00:27:25,279 --> 00:27:29,960
because that's that's what the

526
00:27:27,049 --> 00:27:32,960
comparison is it's it's blank greater

527
00:27:29,960 --> 00:27:35,480
than blank right so in this case we're

528
00:27:32,960 --> 00:27:38,420
looking to see did X compare greater

529
00:27:35,480 --> 00:27:40,400
than than Y so in this case X did not

530
00:27:38,420 --> 00:27:44,120
compare greater than Y so we keep X

531
00:27:40,400 --> 00:27:46,100
right y&amp;z we don't really care about

532
00:27:44,119 --> 00:27:48,169
what that actually is

533
00:27:46,099 --> 00:27:52,039
so in this case well I guess we're up

534
00:27:48,170 --> 00:27:54,140
here in this case it was here but we

535
00:27:52,039 --> 00:27:56,859
don't care about that so all we now need

536
00:27:54,140 --> 00:28:04,070
to know is is X greater than C right and

537
00:27:56,859 --> 00:28:09,199
the weird part here is it looks like we

538
00:28:04,069 --> 00:28:17,059
never did that somehow like the t4 value

539
00:28:09,200 --> 00:28:23,840
here like that's supposed to be X right

540
00:28:17,059 --> 00:28:34,849
X X X so how is that value why is that

541
00:28:23,839 --> 00:28:37,689
value 0 that's why so this table here if

542
00:28:34,849 --> 00:28:41,149
we want to keep something in that Lane

543
00:28:37,690 --> 00:28:44,210
we need that two masks to work all right

544
00:28:41,150 --> 00:28:47,450
that's fair so basically we forgot to

545
00:28:44,210 --> 00:28:49,009
replicate the X out here right I removed

546
00:28:47,450 --> 00:28:57,880
it from this column but I forgot that it

547
00:28:49,009 --> 00:28:57,879
in this column looks ok all right

548
00:29:00,630 --> 00:29:07,390
and now we're good okay so that works

549
00:29:05,289 --> 00:29:10,869
just fine but like I said I think it's a

550
00:29:07,390 --> 00:29:12,670
little bit unnecessary and so what I'd

551
00:29:10,869 --> 00:29:15,759
like to do is make one more change which

552
00:29:12,670 --> 00:29:18,009
is just to not use that fourth lane

553
00:29:15,759 --> 00:29:21,879
because it just creates larger tables

554
00:29:18,009 --> 00:29:23,619
for no real reason and there's two ways

555
00:29:21,880 --> 00:29:27,780
we can do that one is we can put the

556
00:29:23,619 --> 00:29:31,439
shuffle in here and the other is we can

557
00:29:27,779 --> 00:29:34,029
we can be a little bit more clever about

558
00:29:31,440 --> 00:29:37,600
the way we do the comparison so that we

559
00:29:34,029 --> 00:29:40,450
actually just do the X Z comparison the

560
00:29:37,599 --> 00:29:42,339
other way round now normally you'd start

561
00:29:40,450 --> 00:29:44,110
there but because we're comparing

562
00:29:42,339 --> 00:29:47,529
against a routine that doesn't do this

563
00:29:44,109 --> 00:29:52,049
that means we may have a switch there so

564
00:29:47,529 --> 00:29:57,428
I'm gonna do the shuffle first and then

565
00:29:52,049 --> 00:29:59,940
we'll switch although I don't actually

566
00:29:57,429 --> 00:30:03,550
know that that helps I think about it

567
00:29:59,940 --> 00:30:05,679
you know it really doesn't so maybe we

568
00:30:03,549 --> 00:30:07,480
ignore that but anyway so if you take a

569
00:30:05,679 --> 00:30:09,280
look what's going on here right what I'm

570
00:30:07,480 --> 00:30:11,799
saying is we don't care what this value

571
00:30:09,279 --> 00:30:14,649
is particularly much right it just

572
00:30:11,799 --> 00:30:16,720
doesn't matter so what we can do there

573
00:30:14,650 --> 00:30:18,309
is say look just leave that as zero so

574
00:30:16,720 --> 00:30:19,870
we know that this will always just be

575
00:30:18,308 --> 00:30:22,329
zeros in that final column because

576
00:30:19,869 --> 00:30:24,039
everything in it will be zeros so just

577
00:30:22,329 --> 00:30:26,109
leave it as zero so that we never get a

578
00:30:24,039 --> 00:30:30,039
true comparison it's always it's always

579
00:30:26,109 --> 00:30:32,859
a zero and then what we do here is say

580
00:30:30,039 --> 00:30:34,779
look let's put X in there so that we

581
00:30:32,859 --> 00:30:37,779
just do the X comparison the other way

582
00:30:34,779 --> 00:30:41,230
round so at that point then you could

583
00:30:37,779 --> 00:30:44,319
say well now we don't need to worry

584
00:30:41,230 --> 00:30:47,140
about lane four or lane three I guess I

585
00:30:44,319 --> 00:30:48,279
don't want to say that we don't need to

586
00:30:47,140 --> 00:30:50,620
worry about that Lane we're just gonna

587
00:30:48,279 --> 00:30:52,389
leave that lane out of it and then we

588
00:30:50,619 --> 00:30:56,019
can just get rid of of any of this stuff

589
00:30:52,390 --> 00:31:02,920
right so we don't then care about that

590
00:30:56,019 --> 00:31:05,889
final Lane like so and then all our

591
00:31:02,920 --> 00:31:08,590
tables can shrink again so at that point

592
00:31:05,890 --> 00:31:12,550
we can then say all right we don't need

593
00:31:08,589 --> 00:31:13,809
this extra duplicate 'iv version here we

594
00:31:12,549 --> 00:31:16,599
can just shrink it

595
00:31:13,809 --> 00:31:18,940
down to eight and the same thing would

596
00:31:16,599 --> 00:31:20,980
go for basically all of our tables so we

597
00:31:18,940 --> 00:31:24,370
don't need that and we don't need this

598
00:31:20,980 --> 00:31:26,019
so now it's much more condensed and up

599
00:31:24,369 --> 00:31:29,139
here we can do the same thing to where

600
00:31:26,019 --> 00:31:31,690
we say all right we only need these but

601
00:31:29,140 --> 00:31:34,920
we also now need to kind of reverse the

602
00:31:31,690 --> 00:31:38,259
idea of what's happening here so if I

603
00:31:34,920 --> 00:31:41,740
delete this part that's all well and

604
00:31:38,259 --> 00:31:44,619
good but we now have a different meaning

605
00:31:41,740 --> 00:31:47,079
for our final column so we don't like

606
00:31:44,619 --> 00:31:52,479
this is not this anymore it's actually

607
00:31:47,079 --> 00:31:55,960
that right so in every place that

608
00:31:52,480 --> 00:31:58,210
previously we were picking an X we would

609
00:31:55,960 --> 00:32:00,819
need to pick the Z value and in each

610
00:31:58,210 --> 00:32:02,110
case where we were picking the Z value

611
00:32:00,819 --> 00:32:09,339
we'd need to pick the X file because we

612
00:32:02,109 --> 00:32:11,319
flipped the meaning right so if we take

613
00:32:09,339 --> 00:32:14,230
a look at what happens here all of these

614
00:32:11,319 --> 00:32:17,169
right are like is X greater than Y it's

615
00:32:14,230 --> 00:32:21,190
not so we take X is y greater than Z we

616
00:32:17,170 --> 00:32:26,440
don't care then is Z greater than X and

617
00:32:21,190 --> 00:32:31,320
if it's if it's not right then we would

618
00:32:26,440 --> 00:32:36,789
take Z but it is so we keep the X right

619
00:32:31,319 --> 00:32:39,789
same thing here in this case if X is

620
00:32:36,789 --> 00:32:41,950
greater than Y then we keep Y and if Y

621
00:32:39,789 --> 00:32:46,420
is not greater than Z then we continue

622
00:32:41,950 --> 00:32:48,039
to keep Y right and so we don't really

623
00:32:46,420 --> 00:32:50,529
care about that in this case where we've

624
00:32:48,039 --> 00:32:52,240
got the 0 here again X is greater than Y

625
00:32:50,529 --> 00:32:53,410
it's not so we keep X we don't care

626
00:32:52,240 --> 00:32:56,319
about this value and then we go here and

627
00:32:53,410 --> 00:32:59,140
say zero might it is right and then

628
00:32:56,319 --> 00:33:02,559
finally this last one here where we're

629
00:32:59,140 --> 00:33:05,259
like X is greater than Y is true

630
00:33:02,559 --> 00:33:09,339
so we would actually keep Y Y is greater

631
00:33:05,259 --> 00:33:14,700
than Z so now we keep Z Z is greater

632
00:33:09,339 --> 00:33:18,159
than X is not possible at that point

633
00:33:14,700 --> 00:33:20,710
right so really we don't care what this

634
00:33:18,160 --> 00:33:22,660
value is at that point because that

635
00:33:20,710 --> 00:33:25,470
creates like an okay you can't really

636
00:33:22,660 --> 00:33:25,470
have that comparison

637
00:33:29,039 --> 00:33:34,629
you know what I'm saying so then if we

638
00:33:32,920 --> 00:33:36,820
come up here and we say let's see what

639
00:33:34,630 --> 00:33:42,130
these do so this is X is greater than Y

640
00:33:36,819 --> 00:33:45,639
so it's not so to keep X we then say Z

641
00:33:42,130 --> 00:33:51,760
is greater than X a it's not so we keep

642
00:33:45,640 --> 00:33:54,070
Z right X is greater than Y it is so we

643
00:33:51,759 --> 00:33:56,619
keep Y Y is greater than C it's not so

644
00:33:54,069 --> 00:34:00,309
we keep Y X is greater than C it's not

645
00:33:56,619 --> 00:34:05,289
so we keep X Z is greater than X it's

646
00:34:00,309 --> 00:34:08,650
not so we keep Z X is greater than Y it

647
00:34:05,289 --> 00:34:12,639
is so we keep Y Y is greater than Z it

648
00:34:08,650 --> 00:34:22,320
is so we keep Z and again this is these

649
00:34:12,639 --> 00:34:25,089
are not possible I don't think right so

650
00:34:22,320 --> 00:34:27,910
in theory we should be able to use that

651
00:34:25,090 --> 00:34:31,240
because you know although there's the

652
00:34:27,909 --> 00:34:33,279
equals case will come out differently we

653
00:34:31,239 --> 00:34:35,979
don't care which one we use in the

654
00:34:33,280 --> 00:34:39,880
equals case right so we may not be able

655
00:34:35,980 --> 00:34:41,829
to validate this against the old routine

656
00:34:39,880 --> 00:34:45,309
but I can rewrite the o routine slightly

657
00:34:41,829 --> 00:34:48,279
to be the same so we should be able to

658
00:34:45,309 --> 00:34:51,759
make it work if I'm not missing a case

659
00:34:48,280 --> 00:34:55,840
right but I don't know so we'll see ok

660
00:34:51,760 --> 00:34:57,940
so this is a problem as well so actually

661
00:34:55,840 --> 00:35:02,920
we need to take care of that so hold on

662
00:34:57,940 --> 00:35:04,599
one second so we need to figure out ok

663
00:35:02,920 --> 00:35:07,570
so one of the problems is like in of

664
00:35:04,599 --> 00:35:10,750
DeRay for there so the inverted version

665
00:35:07,570 --> 00:35:12,610
we use here I kind of need that to make

666
00:35:10,750 --> 00:35:14,530
sure that that's and just going to be 0

667
00:35:12,610 --> 00:35:16,900
all the time so I may do that a slightly

668
00:35:14,530 --> 00:35:19,510
different way because I want that to

669
00:35:16,900 --> 00:35:21,400
just be easy for me to read I don't I

670
00:35:19,510 --> 00:35:22,930
don't want to be seeing crazy stuff

671
00:35:21,400 --> 00:35:26,590
there I want that to be 0 just so I can

672
00:35:22,929 --> 00:35:29,669
you know for my own just from just for a

673
00:35:26,590 --> 00:35:29,670
simplicity for my own sake

674
00:35:31,739 --> 00:35:38,500
all right so let's get started looking

675
00:35:33,909 --> 00:35:40,659
with this so if we take a look at what

676
00:35:38,500 --> 00:35:45,789
the comp mask is here we're in the exact

677
00:35:40,659 --> 00:35:49,920
same state that we were before I don't

678
00:35:45,789 --> 00:35:49,920
actually wait

679
00:36:04,480 --> 00:36:14,869
so something's weird about that possibly

680
00:36:09,588 --> 00:36:18,108
because of the way I was masking it or

681
00:36:14,869 --> 00:36:20,528
saying so T values should never be

682
00:36:18,108 --> 00:36:20,528
negative

683
00:36:20,539 --> 00:36:43,278
so I screwed something up there that we

684
00:36:25,909 --> 00:36:45,230
need to address which is what oh it's

685
00:36:43,278 --> 00:36:51,409
very simple the mask table is different

686
00:36:45,230 --> 00:37:04,298
now so it's 2 1 2 2 0 1 0 2 right so 2 2

687
00:36:51,409 --> 00:37:08,778
2 so there's 2 1 2 2 &amp; 0 1 0 tube so 0 1

688
00:37:04,298 --> 00:37:13,719
0 2 all right I was gonna say that's

689
00:37:08,778 --> 00:37:13,719
just nonsense that we're seeing in there

690
00:37:14,318 --> 00:37:21,409
so let's try that again it's still bad

691
00:37:17,829 --> 00:37:24,920
did I mess it up twice unsurprisingly

692
00:37:21,409 --> 00:37:26,750
these things are very finicky so so I

693
00:37:24,920 --> 00:37:27,829
may not have messed this up but I may

694
00:37:26,750 --> 00:37:31,489
have messed up the construction that's a

695
00:37:27,829 --> 00:37:33,980
table right so this one here so I think

696
00:37:31,489 --> 00:37:40,399
this aligns right you know cuz - 1 - 2 -

697
00:37:33,980 --> 00:37:43,278
1 - 2 0 1 0 2 0 1 0 2 so the mass table

698
00:37:40,400 --> 00:37:45,079
and the best table look correct to me oh

699
00:37:43,278 --> 00:37:49,009
but the shuffle table we didn't do that

700
00:37:45,079 --> 00:37:56,420
one yet Dubey so in that case that's 2 2

701
00:37:49,009 --> 00:38:00,818
2 right and there's the 1 so 2 1 2 - and

702
00:37:56,420 --> 00:38:00,818
then here we have 0 1 0 2 so 0

703
00:38:02,449 --> 00:38:10,318
1:02 I don't know that that would have

704
00:38:07,440 --> 00:38:11,278
done it though so I don't think we're

705
00:38:10,318 --> 00:38:18,440
out of the woods yet on that I think

706
00:38:11,278 --> 00:38:23,818
we've still got an issue here okay

707
00:38:18,440 --> 00:38:24,838
that's a new one so I'm going to step to

708
00:38:23,818 --> 00:38:26,849
this and see where that comes from but I

709
00:38:24,838 --> 00:38:34,889
think these are all in line now right 2

710
00:38:26,849 --> 00:38:41,490
1 2 2 0 1 0 2 so it's 2 1 2 2 0 1 0 2

711
00:38:34,889 --> 00:38:43,889
yeah okay good deal so now I just want

712
00:38:41,489 --> 00:38:46,528
to see what's you know what we're

713
00:38:43,889 --> 00:38:49,068
actually doing here let's step through

714
00:38:46,528 --> 00:38:56,039
this one at a time I just want to see

715
00:38:49,068 --> 00:39:02,880
what's happening okay so there's our T

716
00:38:56,039 --> 00:39:06,900
computations probably yeah well so we're

717
00:39:02,880 --> 00:39:08,730
supposed to pick the we're supposed to

718
00:39:06,900 --> 00:39:11,309
pick the second thing in the comp mask

719
00:39:08,730 --> 00:39:14,039
which comes out to be 2 so that's

720
00:39:11,309 --> 00:39:15,450
suggesting that Z is the best value

721
00:39:14,039 --> 00:39:19,049
that's correct

722
00:39:15,449 --> 00:39:28,288
so that part works fine so let's take a

723
00:39:19,048 --> 00:39:31,170
look at what we actually select so that

724
00:39:28,289 --> 00:39:33,240
did correctly select Z so that's good

725
00:39:31,170 --> 00:39:35,568
and so our app for now just gets

726
00:39:33,239 --> 00:39:40,199
advanced by that much like we can look

727
00:39:35,568 --> 00:39:44,429
at that as well and then what we want to

728
00:39:40,199 --> 00:39:46,318
do is we want to take the because we

729
00:39:44,429 --> 00:39:49,618
went one self forward in that direction

730
00:39:46,318 --> 00:39:51,318
we want to subtract out that dimension

731
00:39:49,619 --> 00:39:55,740
which would be 1 by 4 so this should now

732
00:39:51,318 --> 00:39:58,920
get zeroed and it does so that whole

733
00:39:55,739 --> 00:40:01,588
thing looked good so I guess what I

734
00:39:58,920 --> 00:40:04,559
would say is we probably have a bug in

735
00:40:01,588 --> 00:40:06,808
one particular part of the table so

736
00:40:04,559 --> 00:40:08,730
because that also it's all working right

737
00:40:06,809 --> 00:40:11,769
now that all looked exactly correct so

738
00:40:08,730 --> 00:40:20,980
unless I just spaced

739
00:40:11,769 --> 00:40:22,150
that's right and so what I probably did

740
00:40:20,980 --> 00:40:23,710
is when I was reading the stuff I

741
00:40:22,150 --> 00:40:25,059
probably just made it a mistake right

742
00:40:23,710 --> 00:40:26,260
and I can check it one more time just to

743
00:40:25,059 --> 00:40:27,340
see if we can catch it by inspection but

744
00:40:26,260 --> 00:40:28,960
otherwise what I'll do is I'll step

745
00:40:27,340 --> 00:40:33,970
through til I see it right and then

746
00:40:28,960 --> 00:40:35,639
we'll just fix it there so in this case

747
00:40:33,969 --> 00:40:40,719
you know once we could write this is

748
00:40:35,639 --> 00:40:45,150
this is X greater than Y so this is y

749
00:40:40,719 --> 00:40:45,149
less than X is this case oops

750
00:40:45,840 --> 00:41:08,650
right so Y is less than X Y is less than

751
00:40:55,329 --> 00:41:19,360
Z I'm sorry X is less than Y y is less

752
00:41:08,650 --> 00:41:25,289
than Z right and X is greater than X is

753
00:41:19,360 --> 00:41:30,070
less than Z no sorry Z is less than X

754
00:41:25,289 --> 00:41:31,929
right I mean I'm just you have to flip

755
00:41:30,070 --> 00:41:34,930
these so these are 0 0 0 so they're

756
00:41:31,929 --> 00:41:37,299
gonna flip each time right so I guess I

757
00:41:34,929 --> 00:41:44,889
could do it this way this is Z less than

758
00:41:37,300 --> 00:41:48,600
X y less than Z X less than Y right

759
00:41:44,889 --> 00:41:48,599
because every time is this a 0 it flips

760
00:41:49,739 --> 00:41:57,159
so if we take a look at that if Z is

761
00:41:52,630 --> 00:42:00,039
less than X and Y is less than Z and X

762
00:41:57,159 --> 00:42:04,960
is less than Y is that one of those

763
00:42:00,039 --> 00:42:08,500
that's like I mean that's that triple

764
00:42:04,960 --> 00:42:09,970
right so Z can't be less than X like

765
00:42:08,500 --> 00:42:12,119
that's one of those ones it just doesn't

766
00:42:09,969 --> 00:42:12,119
work

767
00:42:13,679 --> 00:42:21,848
like one of those two things has to be

768
00:42:16,028 --> 00:42:25,150
wrong you know I'm saying so I wonder if

769
00:42:21,849 --> 00:42:28,568
you can ever actually get that case like

770
00:42:25,150 --> 00:42:30,039
shouldn't that case not really be the

771
00:42:28,568 --> 00:42:34,150
thing I mean I guess you could say well

772
00:42:30,039 --> 00:42:37,270
it's it's less than or equal to right

773
00:42:34,150 --> 00:42:42,338
because you don't it's not it's actually

774
00:42:37,269 --> 00:42:44,889
fat right so in that case it could be

775
00:42:42,338 --> 00:42:48,130
that they're just all equal would would

776
00:42:44,889 --> 00:42:56,500
be I guess one way that could be true so

777
00:42:48,130 --> 00:42:59,490
I think that's what that means

778
00:42:56,500 --> 00:43:02,048
so we could literally pick like anything

779
00:42:59,489 --> 00:43:07,750
you know and I mean like no matter what

780
00:43:02,048 --> 00:43:11,710
we pick it's right so let's take a look

781
00:43:07,750 --> 00:43:18,219
at this one so this one is X greater

782
00:43:11,710 --> 00:43:25,240
than Y y less than or equal to Z Z less

783
00:43:18,219 --> 00:43:28,419
than or equal to X right so in that case

784
00:43:25,239 --> 00:43:31,419
I guess we would say if X is greater

785
00:43:28,420 --> 00:43:33,490
than Y then we know that X is kind of

786
00:43:31,420 --> 00:43:36,338
out of the question so we're really just

787
00:43:33,489 --> 00:43:37,719
looking at these so if Y is less than or

788
00:43:36,338 --> 00:43:39,190
equal to Z and Z is less than or equal

789
00:43:37,719 --> 00:43:44,588
to X we're really just talking about

790
00:43:39,190 --> 00:43:47,380
that and so it's that looks right you

791
00:43:44,588 --> 00:43:49,750
know that's why that's right so that's

792
00:43:47,380 --> 00:43:53,980
fine here we're talking about X less

793
00:43:49,750 --> 00:43:57,489
than or equal to Y y greater than Z Cu

794
00:43:53,980 --> 00:43:59,528
less than or equal to X right so here we

795
00:43:57,489 --> 00:44:05,798
would say if X is looking to the y&amp;z so

796
00:43:59,528 --> 00:44:08,519
that's that's this right so that's

797
00:44:05,798 --> 00:44:08,519
clearly Z

798
00:44:14,480 --> 00:44:21,230
here we would say X greater than Y y

799
00:44:18,239 --> 00:44:26,879
greater than Z and that's just this

800
00:44:21,230 --> 00:44:27,269
right so that would also be Z pretty

801
00:44:26,880 --> 00:44:36,119
clearly

802
00:44:27,269 --> 00:44:41,130
I mean Z greater than X is false

803
00:44:36,119 --> 00:44:48,259
so that means it's that which is not

804
00:44:41,130 --> 00:44:52,470
possible I want to say because how could

805
00:44:48,260 --> 00:44:54,810
how could X be greater than Y which is

806
00:44:52,469 --> 00:44:58,289
greater than Z but then suddenly Z is

807
00:44:54,809 --> 00:45:02,969
less than or equal to X like even

808
00:44:58,289 --> 00:45:05,460
equivalence doesn't do that in this case

809
00:45:02,969 --> 00:45:07,289
I believe because they could all be

810
00:45:05,460 --> 00:45:10,099
equal like this is this one you could

811
00:45:07,289 --> 00:45:23,009
pick any this one should never occur

812
00:45:10,099 --> 00:45:25,309
we should probably assert that ok here

813
00:45:23,010 --> 00:45:29,940
we have s less or equal to Y Z less

814
00:45:25,309 --> 00:45:33,299
sorry y less than or equal to Z and Z

815
00:45:29,940 --> 00:45:36,119
greater than X right so again if we

816
00:45:33,300 --> 00:45:39,269
Junction these we just get that and this

817
00:45:36,119 --> 00:45:40,230
says that Z is greater than X which is

818
00:45:39,269 --> 00:45:42,570
what you would expect

819
00:45:40,230 --> 00:45:46,860
so that just seems like X and that's

820
00:45:42,570 --> 00:45:50,370
fine here we have X greater than Y y

821
00:45:46,860 --> 00:45:55,710
less than or equal to Z Z greater than X

822
00:45:50,369 --> 00:45:57,449
right so in that case I believe you can

823
00:45:55,710 --> 00:46:00,150
just Junction these two and just say

824
00:45:57,449 --> 00:46:02,309
well it's Y at that point y less than or

825
00:46:00,150 --> 00:46:04,530
equal to Z is also correct

826
00:46:02,309 --> 00:46:08,340
so that just seems like Y and that's

827
00:46:04,530 --> 00:46:11,970
exactly what we put in this case we have

828
00:46:08,340 --> 00:46:17,510
X less than or equal to Y y greater than

829
00:46:11,969 --> 00:46:22,069
Z Z greater than X so that's this again

830
00:46:17,510 --> 00:46:24,170
s X less than or equal to Y is exactly

831
00:46:22,070 --> 00:46:27,800
what we would expect so again that

832
00:46:24,170 --> 00:46:30,800
should just be X and it is and then the

833
00:46:27,800 --> 00:46:33,380
last one is everything's true so X is

834
00:46:30,800 --> 00:46:40,030
greater than Y y is greater than Z Z is

835
00:46:33,380 --> 00:46:40,030
greater than X right that's not possible

836
00:46:53,818 --> 00:46:57,858
I want to say

837
00:47:02,360 --> 00:47:06,740
oh wait no that's the right okay no

838
00:47:04,579 --> 00:47:09,799
that's actually fine Z less than or

839
00:47:06,739 --> 00:47:12,889
equal to X is low allowed here so that's

840
00:47:09,800 --> 00:47:14,930
fine it's this one that is not allowed

841
00:47:12,889 --> 00:47:20,629
because Z can't be great so it's just

842
00:47:14,929 --> 00:47:22,789
this one I think it's not seem right so

843
00:47:20,630 --> 00:47:24,410
I think that one that one is actually

844
00:47:22,789 --> 00:47:29,409
bogus oops

845
00:47:24,409 --> 00:47:32,539
yeah what's happening stop no bad okay

846
00:47:29,409 --> 00:47:35,210
so I think this table is is correct I

847
00:47:32,539 --> 00:47:39,289
don't know it seems right to me I don't

848
00:47:35,210 --> 00:47:44,480
see what I don't see where that goes

849
00:47:39,289 --> 00:47:49,880
wrong it's possible that when you hit

850
00:47:44,480 --> 00:47:57,500
this one case so so this case here feels

851
00:47:49,880 --> 00:47:59,090
like it would differ from the so you

852
00:47:57,500 --> 00:48:01,010
know what I could do though

853
00:47:59,090 --> 00:48:03,500
in the case where they're all equal I

854
00:48:01,010 --> 00:48:05,440
dunno what the other routine would pick

855
00:48:03,500 --> 00:48:11,659
so in the case where they're all equal

856
00:48:05,440 --> 00:48:21,309
this routine would pick X so I should be

857
00:48:11,659 --> 00:48:21,309
able to say that right

858
00:48:24,679 --> 00:48:31,529
all right um so let's see like how long

859
00:48:28,710 --> 00:48:33,300
does it take this thing to fail okay so

860
00:48:31,530 --> 00:48:35,750
we don't we're gonna have to see let's

861
00:48:33,300 --> 00:48:38,250
see which one it fails on so we can

862
00:48:35,750 --> 00:48:40,409
debug like that one specifically because

863
00:48:38,250 --> 00:48:41,789
we're obviously in a case where it's a

864
00:48:40,409 --> 00:48:43,679
little bit more sensitive to exactly

865
00:48:41,789 --> 00:48:45,809
what we're asking it to do before we get

866
00:48:43,679 --> 00:48:48,539
a problem so which which one are we

867
00:48:45,809 --> 00:48:51,480
talking about okay how many of these are

868
00:48:48,539 --> 00:48:53,610
there Wow

869
00:48:51,480 --> 00:48:55,619
so we made it all the way to like

870
00:48:53,610 --> 00:48:59,789
basically the end and then we kind of

871
00:48:55,619 --> 00:49:02,429
pooped out so well you know too bad

872
00:48:59,789 --> 00:49:08,579
let's take a look cost so we took three

873
00:49:02,429 --> 00:49:14,940
steps into number ten twelve and then we

874
00:49:08,579 --> 00:49:17,069
poop we pooped out right and so what did

875
00:49:14,940 --> 00:49:20,280
we poop out on like what did we do wrong

876
00:49:17,070 --> 00:49:23,580
so let's take a look here so let's look

877
00:49:20,280 --> 00:49:34,550
at key terminate results and degrade

878
00:49:23,579 --> 00:49:34,549
results and verify you terminate verify

879
00:49:40,789 --> 00:49:47,119
so we're producing the correct key

880
00:49:43,889 --> 00:49:50,190
terminate value but instead of picking

881
00:49:47,119 --> 00:49:53,909
and I guess you can see why that's

882
00:49:50,190 --> 00:49:56,340
happening is we actually have two values

883
00:49:53,909 --> 00:49:57,899
that are the same here and I guess we're

884
00:49:56,340 --> 00:50:02,370
differentiating on them differently so

885
00:49:57,900 --> 00:50:05,010
this one picked X and we picked Z so why

886
00:50:02,369 --> 00:50:07,710
did we do that would be the first

887
00:50:05,010 --> 00:50:11,700
question right so what you can see here

888
00:50:07,710 --> 00:50:16,650
is if we look at the comparison that

889
00:50:11,699 --> 00:50:23,750
we're doing we basically have two

890
00:50:16,650 --> 00:50:23,750
equivalents and one actual

891
00:50:26,349 --> 00:50:35,969
yes so we we aren't picking X when we

892
00:50:29,349 --> 00:50:51,099
should have been if that makes sense and

893
00:50:35,969 --> 00:50:53,349
it's specifically this case right so

894
00:50:51,099 --> 00:50:56,380
let's go over this one more time so we

895
00:50:53,349 --> 00:51:01,119
know in this case that X is less than or

896
00:50:56,380 --> 00:51:04,690
equal to Y we know that Y is greater

897
00:51:01,119 --> 00:51:09,849
than Z and we know that Z is less than

898
00:51:04,690 --> 00:51:19,708
or equal to X right so again we kind of

899
00:51:09,849 --> 00:51:19,709
know this oops

900
00:51:26,289 --> 00:51:35,750
so in that case if Y is greater than

901
00:51:32,349 --> 00:51:37,009
wait these are so confusing let me write

902
00:51:35,750 --> 00:51:40,670
that one more time because that can't be

903
00:51:37,010 --> 00:51:45,440
true X is less than a go to Y y is

904
00:51:40,670 --> 00:51:46,039
greater than Z and Z is less than equal

905
00:51:45,440 --> 00:51:53,599
to

906
00:51:46,039 --> 00:51:56,230
oops Z is less than or equal to X this

907
00:51:53,599 --> 00:52:03,589
is just a typing problem at this point

908
00:51:56,230 --> 00:52:05,960
so Z less than or equal to X ok so this

909
00:52:03,590 --> 00:52:08,660
is not a bug this is just a preference

910
00:52:05,960 --> 00:52:12,199
problem we're picking one instead of the

911
00:52:08,659 --> 00:52:14,389
other but it's totally fine right so I'm

912
00:52:12,199 --> 00:52:18,289
going to actually call that fine because

913
00:52:14,389 --> 00:52:21,319
we don't actually like like in this case

914
00:52:18,289 --> 00:52:26,690
we're just picking a different one we're

915
00:52:21,320 --> 00:52:29,300
picking we're picking two out of the

916
00:52:26,690 --> 00:52:31,329
equivalent ones right and so we could

917
00:52:29,300 --> 00:52:35,750
have written this differently to do that

918
00:52:31,329 --> 00:52:39,469
and we wouldn't have had a problem there

919
00:52:35,750 --> 00:52:41,329
right so that seems fine

920
00:52:39,469 --> 00:52:43,939
like I don't care about that I'm not

921
00:52:41,329 --> 00:52:49,699
sure how we continue the validation

922
00:52:43,940 --> 00:52:51,440
process with that happening so that's a

923
00:52:49,699 --> 00:52:54,589
little tricky because I'd like to keep

924
00:52:51,440 --> 00:52:58,820
it with that validator but I guess what

925
00:52:54,590 --> 00:53:00,680
we could do is say if two of the Val

926
00:52:58,820 --> 00:53:03,800
we could look for exactly that one case

927
00:53:00,679 --> 00:53:06,309
and use Z instead so like we could say

928
00:53:03,800 --> 00:53:06,310
in here

929
00:53:13,269 --> 00:53:17,079
something more like

930
00:53:29,269 --> 00:53:40,349
maybe like this so we just say okay

931
00:53:34,590 --> 00:53:48,269
compute the T this values right and then

932
00:53:40,349 --> 00:53:53,489
we'll use them down here like so but I'm

933
00:53:48,269 --> 00:53:54,900
in a special case this one kind because

934
00:53:53,489 --> 00:53:58,739
we want to match up so I'm just going to

935
00:53:54,900 --> 00:54:06,720
say look if T this zero equals T this

936
00:53:58,739 --> 00:54:12,379
two so they're the same and T this zero

937
00:54:06,719 --> 00:54:16,109
is all I'll do 2 is less than 2 this 1

938
00:54:12,380 --> 00:54:24,410
then we're just going to pick it the way

939
00:54:16,110 --> 00:54:27,300
we know the other routine will right and

940
00:54:24,409 --> 00:54:29,849
again that's just for me so that I can

941
00:54:27,300 --> 00:54:31,769
make my validation work because if

942
00:54:29,849 --> 00:54:33,719
that's the only case that we differ on

943
00:54:31,769 --> 00:54:35,880
and it doesn't matter which one you pick

944
00:54:33,719 --> 00:54:39,029
I'd like to make sure we still validate

945
00:54:35,880 --> 00:54:40,829
right so now I think we've done that

946
00:54:39,030 --> 00:54:44,820
complete validation and now we're using

947
00:54:40,829 --> 00:54:49,679
the tables like our shuffle table and

948
00:54:44,820 --> 00:54:51,120
our best table now are smaller so I'm

949
00:54:49,679 --> 00:54:56,429
just going to go ahead and call these

950
00:54:51,119 --> 00:54:58,710
like T best table T shuffle table and T

951
00:54:56,429 --> 00:55:00,480
mask table just so we know what they're

952
00:54:58,710 --> 00:55:01,800
doing because we're about to loft them

953
00:55:00,480 --> 00:55:04,740
up into another routine and I don't

954
00:55:01,800 --> 00:55:09,480
really want there to be a lot of

955
00:55:04,739 --> 00:55:11,369
confusion about that okay so I'm pretty

956
00:55:09,480 --> 00:55:13,829
pleased with that because that doesn't

957
00:55:11,369 --> 00:55:16,139
cost us anything at all and now we don't

958
00:55:13,829 --> 00:55:18,179
have to have extra table space or extra

959
00:55:16,139 --> 00:55:20,039
lanes involved so we can literally just

960
00:55:18,179 --> 00:55:21,299
reuse the exact same variables that we

961
00:55:20,039 --> 00:55:23,730
have in here and everything should be

962
00:55:21,300 --> 00:55:25,500
fine so now I'm going to go ahead and

963
00:55:23,730 --> 00:55:28,170
plop that in the way I was going to do

964
00:55:25,500 --> 00:55:35,010
at the start and then we'll go from

965
00:55:28,170 --> 00:55:37,530
there so here's our T values and then

966
00:55:35,010 --> 00:55:38,820
here is our preamble stuff that we'll

967
00:55:37,530 --> 00:55:44,250
work on in a second

968
00:55:38,820 --> 00:55:46,200
for right now I just want this part and

969
00:55:44,250 --> 00:55:51,030
again we're only focusing on validation

970
00:55:46,199 --> 00:55:52,889
right now so all I'm gonna do is well

971
00:55:51,030 --> 00:55:55,260
I'm literally gonna do this all I'm

972
00:55:52,889 --> 00:55:56,849
gonna do is just take a look at whether

973
00:55:55,260 --> 00:56:00,000
I can match what comes out of the table

974
00:55:56,849 --> 00:56:01,589
because that's all I want right now so

975
00:56:00,000 --> 00:56:03,780
if we take a look at what we've got here

976
00:56:01,590 --> 00:56:05,370
we just end up with situations where

977
00:56:03,780 --> 00:56:07,080
some of these things we already have

978
00:56:05,369 --> 00:56:09,269
values forward some of them we don't so

979
00:56:07,079 --> 00:56:11,549
let's take a look we know that R ad and

980
00:56:09,269 --> 00:56:13,769
n'ver ad might very well exist because

981
00:56:11,550 --> 00:56:16,580
of the sorts of things we would be doing

982
00:56:13,769 --> 00:56:16,579
in this routine anyway

983
00:56:28,230 --> 00:56:37,990
so taking a look you can see it looks

984
00:56:35,079 --> 00:56:40,480
like we have rady packed but not in

985
00:56:37,989 --> 00:56:48,129
fraidy packed just from looking at it

986
00:56:40,480 --> 00:56:51,099
right so rady packed here is select

987
00:56:48,130 --> 00:56:58,050
radio R like that we have that it's rady

988
00:56:51,099 --> 00:57:01,510
packed but we don't have say m4 ad for

989
00:56:58,050 --> 00:57:04,349
that doesn't exist so we can make it

990
00:57:01,510 --> 00:57:09,579
pretty easy it's not a huge deal right

991
00:57:04,349 --> 00:57:15,510
but it's just like we would want some

992
00:57:09,579 --> 00:57:15,510
way of getting this easier right like I

993
00:57:16,108 --> 00:57:28,598
guess I'll just do this for now and this

994
00:57:26,980 --> 00:57:32,429
is not the way we want to do this at all

995
00:57:28,599 --> 00:57:32,430
right like actually me about it this way

996
00:57:47,278 --> 00:57:51,938
so I just want to make a note that all

997
00:57:49,420 --> 00:57:53,499
of this stuff is kind of like there's

998
00:57:51,938 --> 00:57:54,728
way too much crap at the beginning like

999
00:57:53,498 --> 00:57:56,858
a lot of these things are the same and

1000
00:57:54,728 --> 00:57:59,498
can be simplified and collapsed down so

1001
00:57:56,858 --> 00:58:01,389
we'll be able to do much better work

1002
00:57:59,498 --> 00:58:03,218
here eventually but for right now I just

1003
00:58:01,389 --> 00:58:06,188
want to keep it exactly the same as much

1004
00:58:03,219 --> 00:58:07,749
as I can right okay

1005
00:58:06,188 --> 00:58:11,858
so if we take a look at what else we

1006
00:58:07,748 --> 00:58:15,909
need we need to have the app for and the

1007
00:58:11,858 --> 00:58:18,630
seldom for so seldom I don't think we

1008
00:58:15,909 --> 00:58:21,159
have anywhere like that's just something

1009
00:58:18,630 --> 00:58:22,838
that we effectively just want to copy

1010
00:58:21,159 --> 00:58:24,458
right cuz that doesn't that doesn't

1011
00:58:22,838 --> 00:58:29,318
actually occur anywhere in here I don't

1012
00:58:24,458 --> 00:58:32,348
think so that's something that we can

1013
00:58:29,318 --> 00:58:34,509
grab pretty easily like we can lemon

1014
00:58:32,349 --> 00:58:36,400
grab that no problem and it's constant

1015
00:58:34,509 --> 00:58:40,088
so it's something that it doesn't change

1016
00:58:36,400 --> 00:58:42,430
based on the Ray at all right it's

1017
00:58:40,088 --> 00:58:44,679
completely the same no matter what

1018
00:58:42,429 --> 00:58:50,278
you're doing so let's grab that

1019
00:58:44,679 --> 00:58:58,108
somewhere and where was the seldom from

1020
00:58:50,278 --> 00:59:00,068
so I guess that seldom compute compute

1021
00:58:58,108 --> 00:59:02,619
walk table

1022
00:59:00,068 --> 00:59:06,278
so the seldom just comes from the

1023
00:59:02,619 --> 00:59:18,209
spatial grid here so that's just like

1024
00:59:06,278 --> 00:59:20,429
this right so at that point I'm not sure

1025
00:59:18,208 --> 00:59:23,409
what we call this I think this is just

1026
00:59:20,429 --> 00:59:27,969
ready packed right so it's in ready

1027
00:59:23,409 --> 00:59:32,768
packed yeah so it's really just at four

1028
00:59:27,969 --> 00:59:36,039
and then we need the step and well we

1029
00:59:32,768 --> 00:59:39,028
just we just need the step at that point

1030
00:59:36,039 --> 00:59:39,028
right

1031
00:59:42,730 --> 00:59:49,010
tea terminated in this case is wide as

1032
00:59:46,389 --> 00:59:55,809
you can see so I would need to extract

1033
00:59:49,010 --> 00:59:55,810
that to compare but that's fine

1034
01:00:09,630 --> 01:00:22,059
so in this case t terminate we actually

1035
01:00:17,469 --> 01:00:25,119
update that so basically this this value

1036
01:00:22,059 --> 01:00:28,090
right here that's coming out of the walk

1037
01:00:25,119 --> 01:00:30,309
table the problem that we're gonna have

1038
01:00:28,090 --> 01:00:32,530
is we need our own t terminate here to

1039
01:00:30,309 --> 01:00:35,230
track so just for validation purposes

1040
01:00:32,530 --> 01:00:37,240
and then they would collapse but I want

1041
01:00:35,230 --> 01:00:39,159
to actually do that work because I again

1042
01:00:37,239 --> 01:00:42,689
really care about validating this

1043
01:00:39,159 --> 01:00:45,369
because it's just too finicky otherwise

1044
01:00:42,690 --> 01:00:47,470
so we're gonna have like a tracking T

1045
01:00:45,369 --> 01:00:49,420
terminate here so I'm going to do

1046
01:00:47,469 --> 01:00:59,500
something along the lines of like this

1047
01:00:49,420 --> 01:01:01,690
and then I'll just slip stream that

1048
01:00:59,500 --> 01:01:08,530
right on in there

1049
01:01:01,690 --> 01:01:12,070
there we go and here we can also do well

1050
01:01:08,530 --> 01:01:14,650
that's fine so the T terminate verify in

1051
01:01:12,070 --> 01:01:16,870
this case what I'm going to do there is

1052
01:01:14,650 --> 01:01:18,490
just say well whatever the t terminate

1053
01:01:16,869 --> 01:01:27,489
was before that's what we're going to

1054
01:01:18,489 --> 01:01:30,029
use and i guess i can actually just do

1055
01:01:27,489 --> 01:01:30,029
that here okay

1056
01:01:33,909 --> 01:01:39,199
so one of the other interesting things

1057
01:01:37,070 --> 01:01:41,950
about this is since we would now be

1058
01:01:39,199 --> 01:01:45,469
tracking the position as it goes I guess

1059
01:01:41,949 --> 01:01:52,250
like we don't even really need to

1060
01:01:45,469 --> 01:01:54,769
terminate anymore though actually so we

1061
01:01:52,250 --> 01:01:59,630
probably can just get rid of it I mean

1062
01:01:54,769 --> 01:02:01,519
like if you look I mean I guess the

1063
01:01:59,630 --> 01:02:03,110
reason we wanted is well I don't even

1064
01:02:01,519 --> 01:02:14,059
know I don't even know if we're gonna

1065
01:02:03,110 --> 01:02:16,579
need that I guess we'll see yeah I mean

1066
01:02:14,059 --> 01:02:18,079
so like if you look at what we do so

1067
01:02:16,579 --> 01:02:20,829
this is gonna be this will actually

1068
01:02:18,079 --> 01:02:23,269
optimize this even more because

1069
01:02:20,829 --> 01:02:25,190
previously when we when we early doubt

1070
01:02:23,269 --> 01:02:26,449
we needed to keep track of T terminate

1071
01:02:25,190 --> 01:02:28,059
for this purpose we don't even need to

1072
01:02:26,449 --> 01:02:32,119
keep track of T terminate anymore

1073
01:02:28,059 --> 01:02:34,969
because when you leave we can just make

1074
01:02:32,119 --> 01:02:37,460
probe P single be the step value that's

1075
01:02:34,969 --> 01:02:45,379
that's currently in at X so basically

1076
01:02:37,460 --> 01:02:52,159
this right that value is just the sample

1077
01:02:45,380 --> 01:02:59,750
position right so we don't I think need

1078
01:02:52,159 --> 01:03:02,149
to worry about that anymore I could be

1079
01:02:59,750 --> 01:03:05,300
wrong about that but it seems like it's

1080
01:03:02,150 --> 01:03:07,250
fine so so I don't know if we even will

1081
01:03:05,300 --> 01:03:09,500
need to track to terminate we may be

1082
01:03:07,250 --> 01:03:11,300
able to just remove it because at four

1083
01:03:09,500 --> 01:03:15,320
which is what we would be doing anyway

1084
01:03:11,300 --> 01:03:17,720
we'll just be what we want so if we take

1085
01:03:15,320 --> 01:03:19,940
a look at the starting location here

1086
01:03:17,719 --> 01:03:21,379
what we know right now is we're always

1087
01:03:19,940 --> 01:03:25,610
starting at the center if this will

1088
01:03:21,380 --> 01:03:30,860
change eventually but for the moment I

1089
01:03:25,610 --> 01:03:33,789
it's not it's not going to right so

1090
01:03:30,860 --> 01:03:33,789
let's see where we're at

1091
01:03:35,400 --> 01:03:53,610
yep I agree that is a syntax error okay

1092
01:03:39,820 --> 01:03:56,380
um so now we just need our actual step

1093
01:03:53,610 --> 01:03:57,789
values that we look up in and what you

1094
01:03:56,380 --> 01:03:59,500
could sort of see here is that's gonna

1095
01:03:57,789 --> 01:04:02,529
have to get built based on the Ray

1096
01:03:59,500 --> 01:04:05,409
anyway when we start now the thing we

1097
01:04:02,530 --> 01:04:07,390
may want to do is to just that may want

1098
01:04:05,409 --> 01:04:10,059
to be in a table because since we know

1099
01:04:07,389 --> 01:04:14,579
that the Rays are what the Rays are we

1100
01:04:10,059 --> 01:04:17,619
may or may not actually want this right

1101
01:04:14,579 --> 01:04:19,569
so when we look up our D grid results I

1102
01:04:17,619 --> 01:04:21,460
don't know if we actually want to spend

1103
01:04:19,570 --> 01:04:23,800
the time to make this thing I mean maybe

1104
01:04:21,460 --> 01:04:26,320
we do maybe we don't for now I'm going

1105
01:04:23,800 --> 01:04:29,310
to do it but I don't know that I want to

1106
01:04:26,320 --> 01:04:31,510
spend this cost every time we shift rays

1107
01:04:29,309 --> 01:04:33,880
because it's sort of a waste of

1108
01:04:31,510 --> 01:04:36,670
everyone's time so we may want to try

1109
01:04:33,880 --> 01:04:38,349
and optimize this step production by

1110
01:04:36,670 --> 01:04:40,659
just saying look we already know what it

1111
01:04:38,349 --> 01:04:42,819
is also the way it's being done here is

1112
01:04:40,659 --> 01:04:48,839
not particularly good so we may actually

1113
01:04:42,820 --> 01:04:54,640
just be able to fix that part too right

1114
01:04:48,840 --> 01:04:56,829
so who knows hard set so if we come

1115
01:04:54,639 --> 01:05:00,969
through here and say we're gonna do this

1116
01:04:56,829 --> 01:05:03,699
computation and what we're gonna do here

1117
01:05:00,969 --> 01:05:05,759
is the raid erection that we're using oh

1118
01:05:03,699 --> 01:05:11,799
I guess so this is interesting

1119
01:05:05,760 --> 01:05:15,270
so because we sort of finicky eyes this

1120
01:05:11,800 --> 01:05:21,100
I guess we kind of do want to keep these

1121
01:05:15,269 --> 01:05:23,800
like that if that makes sense because we

1122
01:05:21,099 --> 01:05:28,289
are sort of doing a little bit of an

1123
01:05:23,800 --> 01:05:31,210
extra dance there aren't we right like

1124
01:05:28,289 --> 01:05:35,949
we want the absolute value of these

1125
01:05:31,210 --> 01:05:39,570
things you know I'm saying so we kind of

1126
01:05:35,949 --> 01:05:39,569
want to say like

1127
01:05:49,829 --> 01:05:56,019
we want the absolute value of each of

1128
01:05:52,599 --> 01:06:03,580
these right now what I don't know

1129
01:05:56,019 --> 01:06:06,099
offhand is do we really need that I mean

1130
01:06:03,579 --> 01:06:14,400
it flips everything so I think we don't

1131
01:06:06,099 --> 01:06:14,400
want that but we could I don't know

1132
01:06:14,730 --> 01:06:20,070
that's that one's going to be another

1133
01:06:17,108 --> 01:06:20,069
thing we should probably look at

1134
01:06:31,608 --> 01:06:38,108
okay yes so in here we actually wants

1135
01:06:38,170 --> 01:06:49,249
abs rady pecs and abs convert a pact

1136
01:06:42,440 --> 01:06:50,838
right and in here this is where we are

1137
01:06:49,248 --> 01:06:55,939
producing those so we don't actually

1138
01:06:50,838 --> 01:06:59,869
care about modifying this so we can just

1139
01:06:55,940 --> 01:07:00,729
do this you can just say you know that's

1140
01:06:59,869 --> 01:07:07,130
the thing

1141
01:07:00,728 --> 01:07:08,868
now voxel DIMM is again something that I

1142
01:07:07,130 --> 01:07:11,269
think we just get out of the spatial

1143
01:07:08,869 --> 01:07:19,749
grid so voxel games getting passed in

1144
01:07:11,268 --> 01:07:19,748
here but it's it's really just this

1145
01:07:21,849 --> 01:07:29,509
right so now we kind of have an inline

1146
01:07:27,469 --> 01:07:31,429
validation running of this thing and

1147
01:07:29,509 --> 01:07:33,380
what we can do is start to look at it

1148
01:07:31,429 --> 01:07:39,739
and see if we can get it to behave

1149
01:07:33,380 --> 01:07:48,430
properly so we can take a look at a

1150
01:07:39,739 --> 01:07:50,298
couple things there first of all um just

1151
01:07:48,429 --> 01:07:53,649
double check that all this looks right

1152
01:07:50,298 --> 01:08:01,728
yeah so let's take a look at some of our

1153
01:07:53,650 --> 01:08:04,818
info here so in this case you know we're

1154
01:08:01,728 --> 01:08:12,108
just we're just picking two right as you

1155
01:08:04,818 --> 01:08:18,068
would expect and to terminate Oh so

1156
01:08:12,108 --> 01:08:18,068
that's supposed to happen after the fact

1157
01:08:21,100 --> 01:08:32,270
sorry yeah okay so let's take a look one

1158
01:08:29,119 --> 01:08:33,318
more time so here we now have some

1159
01:08:32,270 --> 01:08:36,589
slightly different stuff we're looking

1160
01:08:33,319 --> 01:08:41,480
at so we're looking here at D grid and D

1161
01:08:36,588 --> 01:08:46,579
grid salt totally wrong T terminate and

1162
01:08:41,479 --> 01:08:52,218
T terminate purify and in this case I

1163
01:08:46,579 --> 01:08:54,408
just want to look at the zero with so

1164
01:08:52,219 --> 01:08:57,259
those two were matching presumably just

1165
01:08:54,408 --> 01:08:58,670
because you know we haven't gone

1166
01:08:57,259 --> 01:09:03,920
anywhere yet it's just the first step

1167
01:08:58,670 --> 01:09:07,579
through and so when we are looking at

1168
01:09:03,920 --> 01:09:14,239
what our deltas would be that you know

1169
01:09:07,579 --> 01:09:23,028
makes sense if I if I look at what we're

1170
01:09:14,238 --> 01:09:29,539
doing here I mean it's pretty clear that

1171
01:09:23,029 --> 01:09:36,250
you want to step in Z though so like are

1172
01:09:29,539 --> 01:09:38,539
we initializing our values wrong maybe I

1173
01:09:36,250 --> 01:09:41,238
mean we must be two because this doesn't

1174
01:09:38,539 --> 01:09:42,469
really make much sense like I don't know

1175
01:09:41,238 --> 01:09:50,439
maybe it does let's see what the radius

1176
01:09:42,469 --> 01:09:50,439
angle is no yeah that does fair enough

1177
01:09:59,279 --> 01:10:06,099
so I may have played it too fast and

1178
01:10:01,930 --> 01:10:07,630
loose with this for all I know like

1179
01:10:06,100 --> 01:10:09,130
maybe what we were doing there was

1180
01:10:07,630 --> 01:10:14,920
important in some other way that I

1181
01:10:09,130 --> 01:10:17,109
didn't think about like maybe absolute

1182
01:10:14,920 --> 01:10:19,560
valuing those things is not what you

1183
01:10:17,109 --> 01:10:19,559
want to do

1184
01:10:29,130 --> 01:10:36,970
but I'm not sure why that would be the

1185
01:10:31,689 --> 01:10:39,129
case right because in these you know

1186
01:10:36,970 --> 01:10:40,449
that the inverse version is going to be

1187
01:10:39,130 --> 01:10:44,130
that let me just double check that of

1188
01:10:40,449 --> 01:10:44,130
the routine so let me see what it does

1189
01:10:50,340 --> 01:10:55,210
so you can see that all this is doing is

1190
01:10:52,989 --> 01:10:56,859
just flipping the sign so it's just

1191
01:10:55,210 --> 01:10:58,600
guaranteeing that it's always positive

1192
01:10:56,859 --> 01:11:00,369
and then it just sets the step to be

1193
01:10:58,600 --> 01:11:07,960
negative if it was going in the negative

1194
01:11:00,369 --> 01:11:11,430
direction so I really don't see why that

1195
01:11:07,960 --> 01:11:11,430
would cause a problem

1196
01:11:31,099 --> 01:11:43,590
yep I don't know so the hell that all

1197
01:11:40,408 --> 01:11:43,948
looks fine I'm not seeing I'm not seeing

1198
01:11:43,590 --> 01:11:46,679
it

1199
01:11:43,948 --> 01:11:50,098
so in here we just yeah we don't do any

1200
01:11:46,679 --> 01:11:54,000
preconditioning to that do we we just we

1201
01:11:50,099 --> 01:11:59,849
set the starting location as you would

1202
01:11:54,000 --> 01:12:02,069
expect and that's just what gets loaded

1203
01:11:59,849 --> 01:12:06,538
right so there's nothing weird happening

1204
01:12:02,069 --> 01:12:09,808
there yeah I don't know I might step

1205
01:12:06,538 --> 01:12:11,578
through that real quick just to see if I

1206
01:12:09,809 --> 01:12:15,690
can understand what's where we're going

1207
01:12:11,578 --> 01:12:17,460
wrong there so when we enter that we set

1208
01:12:15,689 --> 01:12:22,379
up the tables here the cell dimensions

1209
01:12:17,460 --> 01:12:23,609
are exactly what you would expect let me

1210
01:12:22,380 --> 01:12:37,670
take a look at what happens when we get

1211
01:12:23,609 --> 01:12:37,670
in here so this is this ray goes

1212
01:12:54,689 --> 01:13:05,460
this ray goes yeah like 126 negative 468

1213
01:12:58,800 --> 01:13:07,980
which is right right I mean there's

1214
01:13:05,460 --> 01:13:12,230
nothing weird about that so I don't

1215
01:13:07,979 --> 01:13:12,229
quite get it that all seemed fine

1216
01:13:21,859 --> 01:13:32,659
so that all seems fine to make sure I

1217
01:13:34,369 --> 01:13:53,760
should probably do this shorthand so

1218
01:13:36,539 --> 01:14:00,680
it's easier to see so that also seems

1219
01:13:53,760 --> 01:14:03,800
right just failing to see the bug here

1220
01:14:00,680 --> 01:14:07,740
so law looks pretty good so far

1221
01:14:03,800 --> 01:14:10,260
starting at half a seldom which is just

1222
01:14:07,739 --> 01:14:13,099
the middle of the cell right seems

1223
01:14:10,260 --> 01:14:13,100
reasonable

1224
01:14:22,550 --> 01:14:31,710
again just does not seem particularly

1225
01:14:26,609 --> 01:14:35,729
weird so I don't know and let's take a

1226
01:14:31,710 --> 01:14:42,720
look at what the walk table says so the

1227
01:14:35,729 --> 01:14:53,339
walk table wanted to take an X step for

1228
01:14:42,720 --> 01:14:55,860
this ray right I mean we're XYZ right

1229
01:14:53,340 --> 01:14:58,020
the Z's is major isn't it I mean am I

1230
01:14:55,859 --> 01:15:03,409
just like totally missed remembering how

1231
01:14:58,020 --> 01:15:03,410
we did the voxel somehow

1232
01:15:17,109 --> 01:15:29,649
I mean right so how on earth can that

1233
01:15:25,720 --> 01:15:34,090
ray which is definitely taking Z steps

1234
01:15:29,649 --> 01:15:41,670
and only Z steps how on earth could that

1235
01:15:34,090 --> 01:15:46,000
possibly want to take an X step ever

1236
01:15:41,670 --> 01:15:50,500
like I mean it's zero

1237
01:15:46,000 --> 01:15:53,319
how is it going to move in X am I

1238
01:15:50,500 --> 01:15:56,189
missing something I mean yes is the

1239
01:15:53,319 --> 01:15:56,189
answer apparently

1240
01:16:05,319 --> 01:16:11,500
what the heck dude I mean this just

1241
01:16:09,640 --> 01:16:14,020
looks like our walk table stuff is wrong

1242
01:16:11,500 --> 01:16:23,920
but how is the walk table stuff wrong

1243
01:16:14,020 --> 01:16:27,510
like how did that get screwed up so

1244
01:16:23,920 --> 01:16:27,510
confused dude so confused

1245
01:16:34,310 --> 01:16:40,470
can you please show me something here so

1246
01:16:38,489 --> 01:16:42,719
let me run this in here I just want to

1247
01:16:40,470 --> 01:16:48,270
see if it's the same thing what the heck

1248
01:16:42,720 --> 01:16:50,220
dude look this just seems like garbage

1249
01:16:48,270 --> 01:16:54,450
I'm so confused about what's going on

1250
01:16:50,220 --> 01:16:56,490
here right cuz the wok table like what

1251
01:16:54,449 --> 01:17:01,760
was the starting index for the wok table

1252
01:16:56,489 --> 01:17:01,760
first four just lets tell me that right

1253
01:17:02,449 --> 01:17:10,649
because I'm so confused right now so

1254
01:17:05,399 --> 01:17:14,519
here's our initial grid index and here's

1255
01:17:10,649 --> 01:17:18,119
our grid index so we only went like one

1256
01:17:14,520 --> 01:17:29,400
forward right and so I don't actually

1257
01:17:18,119 --> 01:17:38,189
know how long the wok table is but I'm

1258
01:17:29,399 --> 01:17:40,229
curious to know so let's see so here's

1259
01:17:38,189 --> 01:17:45,169
the light sampling wok table actually

1260
01:17:40,229 --> 01:17:45,169
let's see how long it is let's see

1261
01:17:53,029 --> 01:18:02,189
so here we are computing the log table

1262
01:17:58,250 --> 01:18:06,840
and let's just see what that value

1263
01:18:02,189 --> 01:18:11,129
actually is so I mean the walk table is

1264
01:18:06,840 --> 01:18:13,079
huge man so all of those should be right

1265
01:18:11,130 --> 01:18:25,440
how are we getting imps

1266
01:18:13,079 --> 01:18:28,609
ittan in here exactly like like did I

1267
01:18:25,439 --> 01:18:28,609
mess this up somehow

1268
01:18:37,279 --> 01:18:50,179
I mean hourly see I don't really see how

1269
01:18:40,189 --> 01:18:52,429
that happened so let's do some other

1270
01:18:50,180 --> 01:18:55,430
things I want to take a look at when

1271
01:18:52,430 --> 01:18:56,810
we're assigning these right and I want

1272
01:18:55,430 --> 01:18:59,320
to see like what hour to terminate

1273
01:18:56,810 --> 01:18:59,320
values are

1274
01:19:14,868 --> 01:19:21,109
top ten things you can't do with Visual

1275
01:19:16,849 --> 01:19:22,699
Studio like this just doesn't you can't

1276
01:19:21,109 --> 01:19:25,938
do anything like this individual studio

1277
01:19:22,698 --> 01:19:28,098
right stepping speed is fine I don't

1278
01:19:25,939 --> 01:19:30,050
understand it's it's ooh what it takes

1279
01:19:28,099 --> 01:19:35,689
to half a second to step what would you

1280
01:19:30,050 --> 01:19:42,070
need more it was like this this is what

1281
01:19:35,689 --> 01:19:45,979
you need it for so this is just totally

1282
01:19:42,069 --> 01:19:47,958
like something's super bogus here did I

1283
01:19:45,979 --> 01:19:49,878
accidentally like overwrite part of this

1284
01:19:47,958 --> 01:19:54,618
table or something like what is going on

1285
01:19:49,878 --> 01:19:57,019
because you can see me writing here like

1286
01:19:54,618 --> 01:20:00,198
imps are not getting written to this

1287
01:19:57,019 --> 01:20:03,649
table you know I'm saying so like I

1288
01:20:00,198 --> 01:20:06,458
screwed something up and I don't

1289
01:20:03,649 --> 01:20:12,289
actually know like what I screwed up but

1290
01:20:06,458 --> 01:20:14,958
something got borked when and and you

1291
01:20:12,288 --> 01:20:16,908
know I probably should just look at the

1292
01:20:14,958 --> 01:20:19,578
solution walk table let me let me run it

1293
01:20:16,908 --> 01:20:23,179
that again to the crash point

1294
01:20:19,578 --> 01:20:25,219
well the validation fail let me just

1295
01:20:23,179 --> 01:20:28,550
take a look at what the walk table is at

1296
01:20:25,219 --> 01:20:30,708
right now so if I look at solution so

1297
01:20:28,550 --> 01:20:41,029
like if I just want to know which index

1298
01:20:30,708 --> 01:20:43,449
this was supposedly right I'm gonna go

1299
01:20:41,029 --> 01:20:46,750
ahead and say no to that

1300
01:20:43,449 --> 01:20:46,750
[Music]

1301
01:20:47,889 --> 01:20:57,260
how what on earth oh I've got it

1302
01:20:51,378 --> 01:21:02,590
backwards I'm like what there we go so

1303
01:20:57,260 --> 01:21:02,590
actually I'm way high here but what the

1304
01:21:04,479 --> 01:21:09,639
so is that the end of the walk table

1305
01:21:07,399 --> 01:21:09,639
then

1306
01:21:25,039 --> 01:21:32,539
so confused I'm just like truly baffled

1307
01:21:28,550 --> 01:21:33,890
by what's going on so it looks like we

1308
01:21:32,539 --> 01:21:36,289
actually were much higher than that

1309
01:21:33,890 --> 01:21:43,990
probably because when we access the walk

1310
01:21:36,289 --> 01:21:46,310
table I don't I don't really know all

1311
01:21:43,989 --> 01:21:47,779
right so let's take a look let's set a

1312
01:21:46,310 --> 01:21:49,370
breakpoint in here and walk through this

1313
01:21:47,779 --> 01:21:50,420
from start to finish so I understand

1314
01:21:49,369 --> 01:21:53,000
what the heck is happening because I

1315
01:21:50,420 --> 01:21:54,470
have an absolute an idea um so if I take

1316
01:21:53,000 --> 01:21:57,050
a look at where this is actually

1317
01:21:54,470 --> 01:21:59,060
breaking and we take a look here at

1318
01:21:57,050 --> 01:22:00,980
loading out of the walk table whatever

1319
01:21:59,060 --> 01:22:03,500
the sample directions walk table offset

1320
01:22:00,979 --> 01:22:07,750
is here so let me just like grab that

1321
01:22:03,500 --> 01:22:07,750
and see what it actually it says right

1322
01:22:09,760 --> 01:22:20,350
so that says 69 12 right so this is cool

1323
01:22:18,409 --> 01:22:22,869
I mean unless I'm just totally

1324
01:22:20,350 --> 01:22:26,900
misinterpreting what we're seeing here

1325
01:22:22,869 --> 01:22:29,329
from 69 112 we're now saying that

1326
01:22:26,899 --> 01:22:34,069
somehow the walk table - the solution

1327
01:22:29,329 --> 01:22:36,019
right so is like well that that's an

1328
01:22:34,069 --> 01:22:38,229
actual reasonable number so what how

1329
01:22:36,020 --> 01:22:43,250
were we getting that other number before

1330
01:22:38,229 --> 01:22:44,839
what was happening there totally don't

1331
01:22:43,250 --> 01:22:50,439
understand that like that was - that was

1332
01:22:44,840 --> 01:22:50,440
bizarre right so there's one

1333
01:22:54,609 --> 01:23:00,289
there's two so it looks like here's one

1334
01:22:58,248 --> 01:23:13,038
I know like that's obviously in bounds

1335
01:23:00,288 --> 01:23:19,878
right and yet there's the T terminate

1336
01:23:13,038 --> 01:23:24,788
int I just don't understand so if I look

1337
01:23:19,878 --> 01:23:31,038
at the light sampling table here like

1338
01:23:24,788 --> 01:23:33,378
it's not in right that I accidentally up

1339
01:23:31,038 --> 01:23:41,208
like increment the walk table twice or

1340
01:23:33,378 --> 01:23:44,469
something I just don't I just understand

1341
01:23:41,208 --> 01:23:49,278
so let's see so supposedly like this is

1342
01:23:44,469 --> 01:23:51,078
69 13 right so I guess if if I look

1343
01:23:49,279 --> 01:23:56,719
there I should see it right sampling

1344
01:23:51,078 --> 01:23:58,338
walk table 913 so it's that right and it

1345
01:23:56,719 --> 01:24:05,529
what happens if I look at the previous

1346
01:23:58,338 --> 01:24:05,528
one it's zero

1347
01:24:16,139 --> 01:24:20,949
so I guess one thing I could do is see

1348
01:24:18,368 --> 01:24:24,578
where that's written so I know which

1349
01:24:20,948 --> 01:24:43,118
index it is it's 69 13 so let's take a

1350
01:24:24,578 --> 01:24:45,128
look at 69 13 I guess I mean we can just

1351
01:24:43,118 --> 01:24:49,628
put a FRU FRU in there right and just

1352
01:24:45,128 --> 01:24:54,840
stop on the frou frou and then we'll get

1353
01:24:49,628 --> 01:24:54,840
to see it right in for some reason I

1354
01:24:56,368 --> 01:25:01,029
mean that's what it should do right I

1355
01:24:58,389 --> 01:25:03,279
could do this in hhhh light prophesy

1356
01:25:01,029 --> 01:25:05,918
want to but so there's my frou frou

1357
01:25:03,279 --> 01:25:09,728
right and so what we're saying here is T

1358
01:25:05,918 --> 01:25:13,358
terminate is in right so the question is

1359
01:25:09,729 --> 01:25:16,059
how did it get to be int and if I take a

1360
01:25:13,359 --> 01:25:19,719
look at yeah to this so everything is

1361
01:25:16,059 --> 01:25:22,840
garbage right so influence was fine but

1362
01:25:19,719 --> 01:25:24,550
the question is how how you know how did

1363
01:25:22,840 --> 01:25:26,109
you get it how did you get to do that

1364
01:25:24,550 --> 01:25:29,320
and remember this is not the optimizer

1365
01:25:26,109 --> 01:25:34,300
this is just a regular routine so what's

1366
01:25:29,319 --> 01:25:39,808
the Ray D that that let you do that

1367
01:25:34,300 --> 01:25:47,739
right so okay so we've got a Z here and

1368
01:25:39,809 --> 01:25:50,800
somehow and I have no idea how like did

1369
01:25:47,738 --> 01:25:58,328
I screw this up somehow like somehow the

1370
01:25:50,800 --> 01:26:06,929
T this values for that I mean how did

1371
01:25:58,328 --> 01:26:06,929
that ever be the case I don't understand

1372
01:26:07,399 --> 01:26:24,139
I mean how did you get in by multiplying

1373
01:26:15,408 --> 01:26:27,710
by one I'm I'm at a loss for someone to

1374
01:26:24,140 --> 01:26:29,960
tell me how you managed that right so

1375
01:26:27,710 --> 01:26:32,420
I'm assuming what you must have done is

1376
01:26:29,960 --> 01:26:35,960
in a previous round

1377
01:26:32,420 --> 01:26:42,170
somehow you picked infinity as your best

1378
01:26:35,960 --> 01:26:44,329
guess right so you you basically you you

1379
01:26:42,170 --> 01:26:48,500
picked a garbage value here right so at

1380
01:26:44,329 --> 01:26:51,399
one point me because of this right maybe

1381
01:26:48,500 --> 01:26:51,399
I've got that wrong

1382
01:27:01,319 --> 01:27:06,929
okay so the best image was the dim index

1383
01:27:04,300 --> 01:27:06,930
that were on

1384
01:27:15,760 --> 01:27:21,800
yes I just don't quite see it let's take

1385
01:27:20,000 --> 01:27:25,369
a look at if it only happens during

1386
01:27:21,800 --> 01:27:26,510
these cases I'm kind of curious to know

1387
01:27:25,369 --> 01:27:27,680
I should probably go to a judge light

1388
01:27:26,510 --> 01:27:30,350
prophetess there's no reason for running

1389
01:27:27,680 --> 01:27:31,730
the like game so we're not even going

1390
01:27:30,350 --> 01:27:37,940
through these cases we're going through

1391
01:27:31,729 --> 01:27:41,149
these cases right and because we haven't

1392
01:27:37,939 --> 01:27:43,159
even hit this we haven't hit this yet we

1393
01:27:41,149 --> 01:27:49,039
were doing this and we haven't even hit

1394
01:27:43,159 --> 01:27:53,210
this yet so I really don't know where

1395
01:27:49,039 --> 01:27:55,399
that's coming from so I guess what I'll

1396
01:27:53,210 --> 01:27:58,180
do is I'll say well alright so if

1397
01:27:55,399 --> 01:28:02,960
frou-frou happened here I'm gonna try

1398
01:27:58,180 --> 01:28:09,550
I'm going to try going back one so that

1399
01:28:02,960 --> 01:28:12,949
I can watch this roll through here

1400
01:28:09,550 --> 01:28:17,720
hopefully just slightly before things go

1401
01:28:12,949 --> 01:28:20,649
pear-shaped you know I'm saying so I can

1402
01:28:17,720 --> 01:28:20,650
watch them go pear-shaped

1403
01:28:31,828 --> 01:28:40,238
so let's see here we are we still have

1404
01:28:35,198 --> 01:28:43,808
reasonable values so we can now I think

1405
01:28:40,238 --> 01:28:48,058
hopefully watch what happens so here's

1406
01:28:43,809 --> 01:28:48,059
our tea this values for the next step

1407
01:28:48,988 --> 01:28:55,109
we've got negative imps here for some

1408
01:28:52,929 --> 01:28:55,109
reason

1409
01:28:55,349 --> 01:29:03,309
which I'm not sure why I guess because

1410
01:29:01,689 --> 01:29:06,118
these are negative but why are those

1411
01:29:03,309 --> 01:29:06,119
negative

1412
01:29:14,329 --> 01:29:21,809
someone want to tell me why those are

1413
01:29:16,199 --> 01:29:24,300
negative so I guess the reason those are

1414
01:29:21,810 --> 01:29:25,170
negative so that's kind of that's kind

1415
01:29:24,300 --> 01:29:26,640
of weird

1416
01:29:25,170 --> 01:29:28,440
so the reason those are negative is

1417
01:29:26,640 --> 01:29:31,829
because these are negative zeros but

1418
01:29:28,439 --> 01:29:33,899
really we wanted to abs this so really I

1419
01:29:31,829 --> 01:29:35,519
think this was just a bug in the

1420
01:29:33,899 --> 01:29:38,729
original that we just didn't know about

1421
01:29:35,520 --> 01:29:46,200
right because really what you want here

1422
01:29:38,729 --> 01:29:48,000
is to say look we need to negate this in

1423
01:29:46,199 --> 01:29:53,988
the case of knives but in either case

1424
01:29:48,000 --> 01:29:53,988
this just wants to be absolute value

1425
01:29:57,319 --> 01:30:02,069
because those negative zeros are causing

1426
01:29:59,939 --> 01:30:03,779
us a lot of problems and I think they

1427
01:30:02,069 --> 01:30:05,880
were just wrong in this routine and when

1428
01:30:03,779 --> 01:30:10,289
we got rid of we did the absolute value

1429
01:30:05,880 --> 01:30:15,029
part of things there I think that would

1430
01:30:10,289 --> 01:30:25,800
have fixed that right so here we just

1431
01:30:15,029 --> 01:30:27,869
want to do this right so now those two

1432
01:30:25,800 --> 01:30:33,060
routines are doing the absolute value

1433
01:30:27,869 --> 01:30:34,949
bit and I think that's more what we want

1434
01:30:33,060 --> 01:30:36,480
so let me just see if that helps us at

1435
01:30:34,949 --> 01:30:43,619
all because it seems like we would want

1436
01:30:36,479 --> 01:30:47,609
that right all right so let's see what

1437
01:30:43,619 --> 01:30:49,859
happens here - Artie this okay now it's

1438
01:30:47,609 --> 01:30:52,500
doing what I want right so like now we

1439
01:30:49,859 --> 01:30:54,359
shouldn't get into this disaster zone of

1440
01:30:52,500 --> 01:30:58,738
like at getting corrupted by garbage

1441
01:30:54,359 --> 01:31:00,569
yeah so everyone's fine now okay good so

1442
01:30:58,738 --> 01:31:04,769
now let's see what happens in the main

1443
01:31:00,569 --> 01:31:06,689
routine do we get errors there no okay

1444
01:31:04,770 --> 01:31:10,560
so that was actually just a bug in our

1445
01:31:06,689 --> 01:31:13,349
original routine right so that was just

1446
01:31:10,560 --> 01:31:15,900
a screw-up but everything else validated

1447
01:31:13,350 --> 01:31:18,450
so now we know that like the stepper is

1448
01:31:15,899 --> 01:31:21,149
now validating so I should be able to

1449
01:31:18,449 --> 01:31:24,000
now yank the original version of the

1450
01:31:21,149 --> 01:31:25,679
code and see what happens like this is

1451
01:31:24,000 --> 01:31:28,159
now running without any validation

1452
01:31:25,680 --> 01:31:33,090
problems in the actual lighting right

1453
01:31:28,159 --> 01:31:35,519
that was an interesting one so when we

1454
01:31:33,090 --> 01:31:37,949
go through this piece of code now I

1455
01:31:35,520 --> 01:31:41,670
should be able to just say alright so

1456
01:31:37,949 --> 01:31:45,510
this piece here where we do the D grid

1457
01:31:41,670 --> 01:31:47,210
values and the cost metric still wants

1458
01:31:45,510 --> 01:31:53,960
to do the same thing it was doing before

1459
01:31:47,210 --> 01:31:53,960
but now I believe this stuff here I

1460
01:31:54,470 --> 01:31:59,670
think we can just sort of do an if zero

1461
01:31:57,930 --> 01:32:09,409
around it right so I think we can do

1462
01:31:59,670 --> 01:32:13,829
this and I think we can do a t terminate

1463
01:32:09,409 --> 01:32:20,939
equals to terminate verify and a grid

1464
01:32:13,829 --> 01:32:24,659
index plus D grid results and can nerf

1465
01:32:20,939 --> 01:32:28,769
this and I think that gives you what you

1466
01:32:24,659 --> 01:32:30,059
need because now that's just using

1467
01:32:28,770 --> 01:32:33,120
values we know we're exactly the same

1468
01:32:30,060 --> 01:32:36,020
what we know to terminate verify and to

1469
01:32:33,119 --> 01:32:36,019
terminate we're equal

1470
01:32:43,579 --> 01:32:51,170
and the D grid was right so now we are

1471
01:32:49,189 --> 01:32:53,419
doing the stepping in the routine proper

1472
01:32:51,170 --> 01:32:54,859
it's not the optimal way to do it

1473
01:32:53,420 --> 01:32:57,409
because we've got a lot of extra craft

1474
01:32:54,859 --> 01:33:01,670
in there for no real reason that we

1475
01:32:57,409 --> 01:33:04,789
should be able to get rid of right but I

1476
01:33:01,670 --> 01:33:08,270
can now I think go take a look and just

1477
01:33:04,789 --> 01:33:10,310
see like how far away we are on speed

1478
01:33:08,270 --> 01:33:13,970
for having made that change so now we're

1479
01:33:10,310 --> 01:33:17,630
not doing table driving and we can see

1480
01:33:13,970 --> 01:33:22,930
how fast we are right so that's pretty

1481
01:33:17,630 --> 01:33:28,640
brutal like that's like way way slower

1482
01:33:22,930 --> 01:33:31,159
you know I'm saying like way slower and

1483
01:33:28,640 --> 01:33:33,560
so the question is is it way slower

1484
01:33:31,159 --> 01:33:36,699
because of something that we can fix or

1485
01:33:33,560 --> 01:33:39,730
is that just like no not gonna happen

1486
01:33:36,699 --> 01:33:42,260
because if it's really that much slower

1487
01:33:39,729 --> 01:33:44,839
we'd be in a ton of trouble like there's

1488
01:33:42,260 --> 01:33:49,070
no way we're gonna be able to deal with

1489
01:33:44,840 --> 01:33:52,569
that so I also would wonder like is it

1490
01:33:49,069 --> 01:33:52,569
if I do this

1491
01:34:00,590 --> 01:34:08,038
I'm just wondering so it looks like it's

1492
01:34:05,639 --> 01:34:10,618
literally just the fact that we are

1493
01:34:08,038 --> 01:34:18,689
doing these computations and here is

1494
01:34:10,618 --> 01:34:22,380
enough to make it cost too much right so

1495
01:34:18,689 --> 01:34:24,618
yeah like I don't know what we do about

1496
01:34:22,380 --> 01:34:24,618
that

1497
01:34:49,219 --> 01:34:57,060
because we're not really doing very much

1498
01:34:53,659 --> 01:34:58,738
you know and I'm saying and I guess one

1499
01:34:57,060 --> 01:35:01,590
question though is I guess that doesn't

1500
01:34:58,738 --> 01:35:04,948
really prove that this necessarily like

1501
01:35:01,590 --> 01:35:09,000
this part here is the culprit either

1502
01:35:04,948 --> 01:35:12,539
because when we remove this part we also

1503
01:35:09,000 --> 01:35:16,890
remove all of this stuff because if no

1504
01:35:12,539 --> 01:35:18,769
one accesses it right then you're not

1505
01:35:16,890 --> 01:35:23,100
going to have to put that code in there

1506
01:35:18,770 --> 01:35:24,630
so I guess I don't really know like you

1507
01:35:23,100 --> 01:35:31,110
know I'm saying like I don't actually

1508
01:35:24,630 --> 01:35:35,510
have I don't have a solid feel for like

1509
01:35:31,109 --> 01:35:35,509
to what extent the setup is expensive

1510
01:35:44,550 --> 01:35:50,800
so yeah one thing I can do is invade e

1511
01:35:47,710 --> 01:35:55,539
already is here so maybe I'll also just

1512
01:35:50,800 --> 01:35:57,340
do maybe I'll try to do something a

1513
01:35:55,539 --> 01:35:58,719
little more clever here so these divides

1514
01:35:57,340 --> 01:36:00,279
aren't there I don't know I I don't

1515
01:35:58,719 --> 01:36:01,989
think that's really going to be much but

1516
01:36:00,279 --> 01:36:05,380
it could I mean it's really hard to say

1517
01:36:01,988 --> 01:36:08,968
sometimes what that would actually look

1518
01:36:05,380 --> 01:36:08,969
like but

1519
01:36:37,260 --> 01:36:41,650
so one problem that we would have to is

1520
01:36:39,850 --> 01:36:44,620
that in this case the infrared deep act

1521
01:36:41,649 --> 01:36:47,229
we kind of want to zero out that Lane as

1522
01:36:44,619 --> 01:36:49,300
well and so that wouldn't actually be

1523
01:36:47,229 --> 01:36:51,099
good because I don't know what zero over

1524
01:36:49,300 --> 01:36:52,510
zero or one over zero is gonna come out

1525
01:36:51,100 --> 01:36:54,070
to but it's not going to be zero right

1526
01:36:52,510 --> 01:36:58,840
it's gonna be like undefined or

1527
01:36:54,069 --> 01:37:02,559
something or you know NAND and we would

1528
01:36:58,840 --> 01:37:08,230
probably rather not be manning around so

1529
01:37:02,560 --> 01:37:09,430
that's hard to say but you know I don't

1530
01:37:08,229 --> 01:37:11,769
remember what we did for that in the

1531
01:37:09,430 --> 01:37:17,200
faster team did we just set that one

1532
01:37:11,770 --> 01:37:19,990
yeah we did right but yeah so this is

1533
01:37:17,199 --> 01:37:22,510
this is bad and like I said I'm not

1534
01:37:19,989 --> 01:37:23,920
really sure what to do about this so we

1535
01:37:22,510 --> 01:37:28,900
have two choices one we can back off

1536
01:37:23,920 --> 01:37:33,989
this avenue of optimization and wait

1537
01:37:28,899 --> 01:37:36,420
that must mean I still have the yeah

1538
01:37:33,989 --> 01:37:39,219
when we can back off this avenue of

1539
01:37:36,420 --> 01:37:40,869
optimization and say look that's just

1540
01:37:39,220 --> 01:37:45,510
not going to cut it I mean it would be

1541
01:37:40,869 --> 01:37:48,699
nice if it did but it's not going to the

1542
01:37:45,510 --> 01:37:51,100
other is we can try to see if we can

1543
01:37:48,699 --> 01:37:56,109
optimize that stepping to not be so bad

1544
01:37:51,100 --> 01:38:00,970
right and I really don't know like I

1545
01:37:56,109 --> 01:38:03,729
said I really don't know how much that's

1546
01:38:00,970 --> 01:38:07,150
costing so another thing that I might

1547
01:38:03,729 --> 01:38:10,779
want to look at is like suppose we

1548
01:38:07,149 --> 01:38:14,439
actually did one again where we sort of

1549
01:38:10,779 --> 01:38:23,289
do an if one on this and an if one on

1550
01:38:14,439 --> 01:38:26,259
this right so we keep both of these

1551
01:38:23,289 --> 01:38:28,600
pieces of code in there with the

1552
01:38:26,260 --> 01:38:31,140
validator I'm just curious to what

1553
01:38:28,600 --> 01:38:36,100
extent is

1554
01:38:31,140 --> 01:38:40,539
is it just the dependency on that oops

1555
01:38:36,100 --> 01:38:43,020
that's bad I guess this doesn't validate

1556
01:38:40,539 --> 01:38:46,078
right now for some reason

1557
01:38:43,020 --> 01:38:46,079
[Music]

1558
01:38:55,550 --> 01:39:01,760
what did I do there that breaks that

1559
01:39:03,770 --> 01:39:10,110
because we just were validating moments

1560
01:39:06,840 --> 01:39:12,829
ago right is our abs in view ready

1561
01:39:10,109 --> 01:39:16,039
packed wrong now or something

1562
01:39:12,829 --> 01:39:16,039
would I do

1563
01:39:35,060 --> 01:39:41,810
show me where the problem is so what did

1564
01:39:40,039 --> 01:39:44,210
what happened because we were fine and

1565
01:39:41,810 --> 01:39:47,360
then I I poked it and we weren't fine

1566
01:39:44,210 --> 01:39:49,640
and I would like to know why so here we

1567
01:39:47,359 --> 01:39:51,500
are with what the walk table well

1568
01:39:49,640 --> 01:39:56,440
actually I guess it's not that anymore

1569
01:39:51,500 --> 01:39:56,439
but here's what our Oh

1570
01:40:08,219 --> 01:40:18,109
I mean that I suppose that I suppose

1571
01:40:13,770 --> 01:40:18,110
could could do it let me see

1572
01:40:30,590 --> 01:40:37,230
so is it just that I'm doing this in the

1573
01:40:33,210 --> 01:40:40,560
wrong order now so if we look at how

1574
01:40:37,229 --> 01:40:46,379
this gets initialized right like so

1575
01:40:40,560 --> 01:40:49,320
we're taking T terminate from the walk

1576
01:40:46,380 --> 01:40:57,630
table here here where we produce to

1577
01:40:49,319 --> 01:40:59,759
terminate verify I'm wondering if that

1578
01:40:57,630 --> 01:41:09,539
part is just the part that's busted

1579
01:40:59,760 --> 01:41:12,210
right to terminate verify so they're

1580
01:41:09,539 --> 01:41:15,300
both 0 in this case it loads the one

1581
01:41:12,210 --> 01:41:19,020
from the walk table which is whatever it

1582
01:41:15,300 --> 01:41:23,360
is here you would validate them before

1583
01:41:19,020 --> 01:41:23,360
adding and so this part let me just

1584
01:41:23,960 --> 01:41:27,140
there we go

1585
01:41:35,260 --> 01:41:43,539
nope I'm wrong so how did I bust that

1586
01:41:40,750 --> 01:41:46,689
what did I do wrong there like

1587
01:41:43,539 --> 01:41:46,689
something's weird

1588
01:41:48,090 --> 01:41:52,699
[Music]

1589
01:41:49,659 --> 01:41:59,109
is this not getting initialized somehow

1590
01:41:52,699 --> 01:42:03,349
or what's going on so these are both

1591
01:41:59,109 --> 01:42:05,719
starting out at zero we load from the

1592
01:42:03,350 --> 01:42:09,110
walk table what the new T terminate is

1593
01:42:05,720 --> 01:42:15,579
here and we use the D grid value and all

1594
01:42:09,109 --> 01:42:15,579
that nonsense right oh right

1595
01:42:29,630 --> 01:42:35,609
okay so we're still validating properly

1596
01:42:33,090 --> 01:42:37,800
now so that was just a slight false

1597
01:42:35,609 --> 01:42:39,238
alarm there um so yeah so I don't know

1598
01:42:37,800 --> 01:42:41,010
what to do I think this is a good place

1599
01:42:39,238 --> 01:42:43,139
to stop because I'm gonna need to think

1600
01:42:41,010 --> 01:42:44,640
about this or ruminate on this so like

1601
01:42:43,140 --> 01:42:47,880
over the course of the week I'll have

1602
01:42:44,640 --> 01:42:50,039
thoughts about it because I really do

1603
01:42:47,880 --> 01:42:51,539
need the grid squares to get bigger but

1604
01:42:50,039 --> 01:42:53,130
the question is maybe I need to do

1605
01:42:51,539 --> 01:42:55,380
something else to make that happen and

1606
01:42:53,130 --> 01:42:58,829
we still need to be able to load out of

1607
01:42:55,380 --> 01:43:00,630
tables right because just the speed hit

1608
01:42:58,829 --> 01:43:02,369
there is just really really bad and

1609
01:43:00,630 --> 01:43:03,989
again I don't know if something else is

1610
01:43:02,369 --> 01:43:07,019
we can inspect it a little bit more

1611
01:43:03,988 --> 01:43:09,059
carefully later but it's definitely like

1612
01:43:07,020 --> 01:43:14,070
that's just a really really unacceptably

1613
01:43:09,060 --> 01:43:22,640
large jump right and so I don't actually

1614
01:43:14,069 --> 01:43:29,908
know what's so horrible about it exactly

1615
01:43:22,640 --> 01:43:32,810
but and you know I could take a look to

1616
01:43:29,908 --> 01:43:32,809
it what the code looks like

1617
01:43:44,328 --> 01:43:49,630
this is a little annoying because it

1618
01:43:45,800 --> 01:43:49,630
looks like this is since this is um

1619
01:43:50,050 --> 01:43:53,750
since this is multi-threaded it's a

1620
01:43:52,219 --> 01:44:06,500
little bit harder to like watch it go

1621
01:43:53,750 --> 01:44:10,988
through what exactly is so here's the

1622
01:44:06,500 --> 01:44:14,618
move mask so that's here right and

1623
01:44:10,988 --> 01:44:18,218
here's the comp PS so that's here

1624
01:44:14,618 --> 01:44:18,219
there's the shuffle

1625
01:44:18,279 --> 01:44:37,578
there's the mall and I don't really know

1626
01:44:29,420 --> 01:44:39,289
what all this is though so like I'm

1627
01:44:37,578 --> 01:44:40,908
assuming some of this stuff got slip

1628
01:44:39,289 --> 01:44:46,729
streamed in here like maybe that's like

1629
01:44:40,908 --> 01:44:54,519
loop counter stuff so Dec add add add is

1630
01:44:46,729 --> 01:44:54,519
that just maybe for maybe for this

1631
01:45:00,618 --> 01:45:09,158
it's weird yeah don't know anyway

1632
01:45:04,658 --> 01:45:12,828
there's the move mask here's us doing

1633
01:45:09,158 --> 01:45:14,089
something I'm not sure why we would I'm

1634
01:45:12,828 --> 01:45:17,418
not sure why we would be doing this

1635
01:45:14,090 --> 01:45:21,529
exactly that's trying to load off the

1636
01:45:17,418 --> 01:45:25,128
table I guess and then we've got the pea

1637
01:45:21,529 --> 01:45:32,118
chef B and that yeah there's the moles

1638
01:45:25,128 --> 01:45:34,550
that part I mean is not part of the

1639
01:45:32,118 --> 01:45:35,238
optimized code so yeah I don't know I'll

1640
01:45:34,550 --> 01:45:37,489
have to look at this a little more

1641
01:45:35,238 --> 01:45:40,898
carefully we'll go to a brief Q&amp;A and

1642
01:45:37,488 --> 01:45:40,898
then we'll save it for tomorrow

1643
01:45:53,918 --> 01:45:58,929
I think the first entry of the tea

1644
01:45:56,918 --> 01:46:02,559
shuffle and tea masts tables haven't

1645
01:45:58,929 --> 01:46:06,010
changed 2x oh you are you are probably

1646
01:46:02,559 --> 01:46:11,800
correct thanks for that catch because we

1647
01:46:06,010 --> 01:46:14,469
just we just changed that that's

1648
01:46:11,800 --> 01:46:18,189
probably never happening because the

1649
01:46:14,469 --> 01:46:19,510
validation doesn't fail but you know

1650
01:46:18,189 --> 01:46:27,519
it'll happen someday

1651
01:46:19,510 --> 01:46:29,498
or maybe it won't you know I set a

1652
01:46:27,519 --> 01:46:30,969
breakpoint on that one before and it

1653
01:46:29,498 --> 01:46:32,948
never hit so that's probably why this

1654
01:46:30,969 --> 01:46:36,969
didn't cause a validation fail because

1655
01:46:32,948 --> 01:46:41,319
like we know that it never actually gets

1656
01:46:36,969 --> 01:46:42,880
there right but yeah like this should be

1657
01:46:41,319 --> 01:46:52,498
consistent that should look like this

1658
01:46:42,880 --> 01:46:52,498
right so X X both both times

1659
01:47:06,920 --> 01:47:10,199
all right

1660
01:47:08,310 --> 01:47:12,260
so that's what that should have looked

1661
01:47:10,199 --> 01:47:12,260
like

1662
01:47:31,750 --> 01:47:34,929
all right

1663
01:47:43,909 --> 01:47:50,639
could be going out of the cache if that

1664
01:47:46,560 --> 01:47:53,370
made it slow I mean no I mean we added

1665
01:47:50,640 --> 01:47:57,480
like if you look at the size of the

1666
01:47:53,369 --> 01:48:07,619
tables we added so the tables we added

1667
01:47:57,479 --> 01:48:10,799
here are two cache lines like one cache

1668
01:48:07,619 --> 01:48:17,579
line and we're talking about like three

1669
01:48:10,800 --> 01:48:19,380
cache lines or something right so I mean

1670
01:48:17,579 --> 01:48:20,880
there are weird things that could happen

1671
01:48:19,380 --> 01:48:22,680
we're like if you've got some weird

1672
01:48:20,880 --> 01:48:24,090
aliasing scenario by just putting a

1673
01:48:22,680 --> 01:48:26,220
table in and it just like creates this

1674
01:48:24,090 --> 01:48:31,079
weird you know that could happen but

1675
01:48:26,220 --> 01:48:34,380
just the cache is 32 K right so you

1676
01:48:31,079 --> 01:48:36,510
can't add like you know 512 bytes and

1677
01:48:34,380 --> 01:48:38,069
suddenly make the entire thing that work

1678
01:48:36,510 --> 01:48:40,199
it doesn't really work that way you'd

1679
01:48:38,069 --> 01:48:42,599
see you could use a little bit more

1680
01:48:40,199 --> 01:48:45,210
cache and see a slight degradation but

1681
01:48:42,600 --> 01:48:50,430
unless you hit a weird aliasing pattern

1682
01:48:45,210 --> 01:48:51,390
or something you know that's it's really

1683
01:48:50,430 --> 01:48:57,420
not realistic

1684
01:48:51,390 --> 01:48:59,100
I don't think it's not it's not a

1685
01:48:57,420 --> 01:49:00,810
concern I would have until we eliminated

1686
01:48:59,100 --> 01:49:02,450
like everything else as concerns if that

1687
01:49:00,810 --> 01:49:14,789
makes sense

1688
01:49:02,449 --> 01:49:16,710
think I'm out of tea yes I am plus the

1689
01:49:14,789 --> 01:49:18,420
other reason not to suspect that is that

1690
01:49:16,710 --> 01:49:20,039
when you turn off reading the walk cable

1691
01:49:18,420 --> 01:49:21,779
that means the walk table isn't taking

1692
01:49:20,039 --> 01:49:24,300
up any cash and the walk tables way

1693
01:49:21,779 --> 01:49:27,630
bigger than these tables so if anything

1694
01:49:24,300 --> 01:49:28,440
we probably saved cash space here but

1695
01:49:27,630 --> 01:49:30,390
the problem is just too many

1696
01:49:28,439 --> 01:49:39,589
computations probably you know too many

1697
01:49:30,390 --> 01:49:39,590
dependent computations so but yeah

1698
01:49:43,969 --> 01:49:48,828
we'll take a look at it next week we'll

1699
01:49:45,708 --> 01:49:51,219
see what happens all right I'm gonna

1700
01:49:48,828 --> 01:49:51,219
wrap it up

1701
01:49:53,319 --> 01:49:56,509
thank you very for joining me for those

1702
01:49:55,399 --> 01:49:58,728
sort of handmade here at Summa pleasure

1703
01:49:56,510 --> 01:49:59,840
coding with you as always if you would

1704
01:49:58,729 --> 01:50:02,869
like to follow the series at home you

1705
01:49:59,840 --> 01:50:04,849
can always go to handmade here org and

1706
01:50:02,868 --> 01:50:06,228
prayer to the game it comes the source

1707
01:50:04,849 --> 01:50:08,418
code so that you can follow along with

1708
01:50:06,229 --> 01:50:11,900
it at home and maybe you can go see what

1709
01:50:08,418 --> 01:50:14,630
you think about you know you can you can

1710
01:50:11,899 --> 01:50:17,058
sort of see like hey can you figure out

1711
01:50:14,630 --> 01:50:18,498
why that code got so much slower is it

1712
01:50:17,059 --> 01:50:19,849
just dependency chains you know we've

1713
01:50:18,498 --> 01:50:21,228
looked at a bunch of ways to analyze it

1714
01:50:19,849 --> 01:50:24,219
you can load up in vtune we've got a lot

1715
01:50:21,229 --> 01:50:26,300
of things we could do so it's probably

1716
01:50:24,219 --> 01:50:27,979
the kind of thing that that you could

1717
01:50:26,300 --> 01:50:29,300
have fun with this week if you wanted to

1718
01:50:27,979 --> 01:50:30,800
sort of learn more about optimization

1719
01:50:29,300 --> 01:50:33,260
and tracking things down you should be

1720
01:50:30,800 --> 01:50:34,880
able to figure it out right I'll be back

1721
01:50:33,260 --> 01:50:36,229
here next week to take a closer look at

1722
01:50:34,880 --> 01:50:37,578
it until then have fun partnering

1723
01:50:36,229 --> 01:50:40,510
everyone I'll see you in the Internet

1724
01:50:37,578 --> 01:50:40,509
take is everybody

