1
00:00:00,260 --> 00:00:03,629
hello everyone and welcome to hand made

2
00:00:02,459 --> 00:00:07,349
here oh sure we could a complete-game

3
00:00:03,629 --> 00:00:09,240
live on stream we are going to well

4
00:00:07,349 --> 00:00:12,300
honestly we're gonna do what we were

5
00:00:09,240 --> 00:00:13,919
going to do last weekend but we ended up

6
00:00:12,300 --> 00:00:16,260
just having a giant discussion about

7
00:00:13,919 --> 00:00:19,050
caches because that was some questions

8
00:00:16,260 --> 00:00:20,820
that people had and so we kind of went

9
00:00:19,050 --> 00:00:21,929
through all of the stuff that you you

10
00:00:20,820 --> 00:00:24,868
know kind of want to have as background

11
00:00:21,929 --> 00:00:26,759
information on them and that took up the

12
00:00:24,868 --> 00:00:28,079
whole two hours so today we're actually

13
00:00:26,760 --> 00:00:30,240
gonna get back to what we were trying to

14
00:00:28,079 --> 00:00:31,948
do which is to start to extend our

15
00:00:30,239 --> 00:00:35,159
entity system to have some larger

16
00:00:31,949 --> 00:00:38,850
storage in it and the idea behind what

17
00:00:35,159 --> 00:00:40,890
we did just prior was to set us up so

18
00:00:38,850 --> 00:00:45,300
that we could really take probably I

19
00:00:40,890 --> 00:00:47,009
mean not not literally infinite but we

20
00:00:45,299 --> 00:00:49,140
could start to use basically as much

21
00:00:47,009 --> 00:00:51,149
storage as we want in our entities

22
00:00:49,140 --> 00:00:54,509
because we don't have to keep it

23
00:00:51,149 --> 00:00:56,879
permanently so it only we can have our

24
00:00:54,509 --> 00:00:59,339
entities when they're actually being

25
00:00:56,878 --> 00:01:00,509
simulated and they're in the local

26
00:00:59,340 --> 00:01:03,870
region that where the player is

27
00:01:00,509 --> 00:01:06,599
currently playing those can be quite

28
00:01:03,869 --> 00:01:09,060
large and quite sophisticated because

29
00:01:06,599 --> 00:01:13,469
they then get packed down later into

30
00:01:09,060 --> 00:01:15,689
smaller sort of more concise versions

31
00:01:13,469 --> 00:01:18,569
for long term storage so that's the

32
00:01:15,688 --> 00:01:20,219
two-tier structure that we ended up

33
00:01:18,569 --> 00:01:22,709
creating and already is working now so

34
00:01:20,219 --> 00:01:24,509
we've got that done but we haven't

35
00:01:22,709 --> 00:01:28,109
actually added anything to it to

36
00:01:24,509 --> 00:01:30,599
actually use this sort of this sort of

37
00:01:28,109 --> 00:01:32,670
model for any productive purposes so

38
00:01:30,599 --> 00:01:36,390
what we want to do is start down that

39
00:01:32,670 --> 00:01:41,728
road so if we open up the game here in

40
00:01:36,390 --> 00:01:44,728
remedy which is the debugger written by

41
00:01:41,728 --> 00:01:47,519
George man Arnie's X 13 pixels it looks

42
00:01:44,728 --> 00:01:49,709
like we're still in debug build I guess

43
00:01:47,519 --> 00:01:52,438
we didn't build a release mode for some

44
00:01:49,709 --> 00:01:55,408
reason not sure why let me go ahead and

45
00:01:52,438 --> 00:01:57,478
switch into debug build there so we can

46
00:01:55,409 --> 00:02:02,640
hop around one interesting thing we may

47
00:01:57,478 --> 00:02:04,049
be able to to is if our if we do

48
00:02:02,640 --> 00:02:05,939
improved lighting which is kind of on

49
00:02:04,049 --> 00:02:08,550
the schedule here for stuff we want to

50
00:02:05,938 --> 00:02:10,439
do with the larger energy store improved

51
00:02:08,550 --> 00:02:11,879
lighting would also get rid of the fact

52
00:02:10,439 --> 00:02:14,039
that our debug go slow because all of

53
00:02:11,878 --> 00:02:17,399
our time in our

54
00:02:14,039 --> 00:02:18,900
game is spent in the lighting and we can

55
00:02:17,400 --> 00:02:20,609
do better right we can make a better

56
00:02:18,900 --> 00:02:22,859
lighting system so you know that's

57
00:02:20,609 --> 00:02:25,519
that's a sort of an interesting side

58
00:02:22,859 --> 00:02:28,620
effect that we can do there so anyway

59
00:02:25,519 --> 00:02:30,688
what we wanted to start doing is to

60
00:02:28,620 --> 00:02:32,219
utilize that it's twofold one is you can

61
00:02:30,688 --> 00:02:33,780
see the lighting is still just sort of

62
00:02:32,219 --> 00:02:35,158
our little test lighting volume you can

63
00:02:33,780 --> 00:02:37,680
actually see the edges there as we move

64
00:02:35,158 --> 00:02:39,750
around it only contains a small region

65
00:02:37,680 --> 00:02:42,269
of the world at the moment yeah you know

66
00:02:39,750 --> 00:02:44,370
if we actually zoom out you can see

67
00:02:42,269 --> 00:02:48,030
there's just that's the region that gets

68
00:02:44,370 --> 00:02:50,009
lit and what we want to do is be able to

69
00:02:48,030 --> 00:02:52,469
light a much larger region than that as

70
00:02:50,009 --> 00:02:54,479
we go forward and have it be much faster

71
00:02:52,469 --> 00:02:55,859
so we want like faster simpler better

72
00:02:54,479 --> 00:02:58,168
lighting right we just want we just want

73
00:02:55,859 --> 00:03:00,030
a general improvement of that system

74
00:02:58,169 --> 00:03:01,139
which is always hard lighting is one of

75
00:03:00,030 --> 00:03:04,799
the most difficult things that you

76
00:03:01,139 --> 00:03:06,599
encounter in games certainly largely

77
00:03:04,799 --> 00:03:07,799
because doing it correctly is impossible

78
00:03:06,598 --> 00:03:10,709
so you're always dealing with trying to

79
00:03:07,799 --> 00:03:12,540
do some approximations that give you

80
00:03:10,709 --> 00:03:14,969
good results but have reasonable speed

81
00:03:12,539 --> 00:03:16,400
right okay so we want to do that and the

82
00:03:14,969 --> 00:03:18,900
other thing that we want to do is

83
00:03:16,400 --> 00:03:22,500
indoors right like this is roughly what

84
00:03:18,900 --> 00:03:24,750
we wanted to look like in terms of what

85
00:03:22,500 --> 00:03:26,128
the general layout is we've got these

86
00:03:24,750 --> 00:03:27,780
sort of little tiles I wanted them to

87
00:03:26,128 --> 00:03:30,959
sort of be like rough and you know

88
00:03:27,780 --> 00:03:32,609
uneven and stuff and and have a texture

89
00:03:30,959 --> 00:03:34,739
on the top it's like whatever wood grain

90
00:03:32,609 --> 00:03:36,840
or stone or something and as you can see

91
00:03:34,739 --> 00:03:37,289
here like that's pretty much done like

92
00:03:36,840 --> 00:03:39,269
that

93
00:03:37,289 --> 00:03:40,650
that is fine like that looks the way I

94
00:03:39,269 --> 00:03:44,459
wanted it to look I don't really have

95
00:03:40,650 --> 00:03:47,129
any problem with that so that's all good

96
00:03:44,459 --> 00:03:51,658
but what's not so good is if we go

97
00:03:47,128 --> 00:03:53,459
outside this is not what I wanted this

98
00:03:51,658 --> 00:03:55,739
this is not what I want the outdoor

99
00:03:53,459 --> 00:03:57,750
regions to look like so we tried

100
00:03:55,739 --> 00:03:59,699
spamming some trees in there and that's

101
00:03:57,750 --> 00:04:01,378
all fine so I think putting down trees

102
00:03:59,699 --> 00:04:02,519
when we want to write our final tree

103
00:04:01,378 --> 00:04:04,768
distribution you can so you can put

104
00:04:02,519 --> 00:04:08,819
trees we got snowy trees we got non

105
00:04:04,769 --> 00:04:11,370
snowy trees whatever stumps that all

106
00:04:08,818 --> 00:04:14,250
seems to be fine what what isn't fine is

107
00:04:11,370 --> 00:04:18,780
just I wanted to be able to sort of spam

108
00:04:14,250 --> 00:04:22,528
ground cover around on these on these

109
00:04:18,779 --> 00:04:24,869
sort of small like I guess not sure how

110
00:04:22,528 --> 00:04:27,209
to describe it really but just I want to

111
00:04:24,870 --> 00:04:30,959
go through on these

112
00:04:27,209 --> 00:04:34,109
grass tiles and just put a bunch of

113
00:04:30,959 --> 00:04:35,698
little like flowery like grasses coming

114
00:04:34,110 --> 00:04:38,939
up and things like that

115
00:04:35,699 --> 00:04:41,460
right and so what we'd like to do is

116
00:04:38,939 --> 00:04:43,680
we'd like to just have some way of

117
00:04:41,459 --> 00:04:45,568
spamming that grass out when something

118
00:04:43,680 --> 00:04:49,110
comes into the active set so you know

119
00:04:45,569 --> 00:04:51,240
this region here just spam it out there

120
00:04:49,110 --> 00:04:55,288
and produce like whatever we're gonna

121
00:04:51,240 --> 00:04:57,538
use for for the grass right so we want

122
00:04:55,288 --> 00:05:00,689
something like that but then when the

123
00:04:57,538 --> 00:05:03,180
thing goes out of the active set meaning

124
00:05:00,689 --> 00:05:05,279
you know I up up here right and then

125
00:05:03,180 --> 00:05:07,620
stuff well I guess I have to actually

126
00:05:05,279 --> 00:05:09,029
change rooms first but let's move out

127
00:05:07,620 --> 00:05:13,228
here and you can see it happened more

128
00:05:09,029 --> 00:05:15,329
specifically so as I walk up or through

129
00:05:13,228 --> 00:05:17,038
this hallway these things will come out

130
00:05:15,329 --> 00:05:17,609
of the active set right you see they're

131
00:05:17,038 --> 00:05:20,310
gone now

132
00:05:17,610 --> 00:05:22,470
right they're just disappearing and so

133
00:05:20,310 --> 00:05:24,449
as things come out of the active set

134
00:05:22,470 --> 00:05:27,690
like that what we want to be able to do

135
00:05:24,449 --> 00:05:29,939
is we want to be able to throw away all

136
00:05:27,689 --> 00:05:31,620
of that data about where all the grass

137
00:05:29,939 --> 00:05:34,589
is because that's just going to be a ton

138
00:05:31,620 --> 00:05:36,959
of extra information there that we don't

139
00:05:34,589 --> 00:05:39,029
really need to be storing now in order

140
00:05:36,959 --> 00:05:43,019
to do this stuff and keep tabs on it we

141
00:05:39,029 --> 00:05:46,709
also have a new friend with us this is

142
00:05:43,019 --> 00:05:49,500
our memory arena and as you can see from

143
00:05:46,709 --> 00:05:51,989
here it basically keeps track of

144
00:05:49,500 --> 00:05:55,079
everything that we have allocated and

145
00:05:51,990 --> 00:05:58,530
tells us who's using what and where I'm

146
00:05:55,079 --> 00:06:01,468
not sure why this is not broken up into

147
00:05:58,529 --> 00:06:04,679
tinier pieces currently because I

148
00:06:01,468 --> 00:06:09,569
thought I thought the last time we

149
00:06:04,680 --> 00:06:12,918
checked into the two here this was sort

150
00:06:09,569 --> 00:06:17,819
of partitioned into little chunks but I

151
00:06:12,918 --> 00:06:20,279
guess that's not happening oh right

152
00:06:17,819 --> 00:06:23,009
because we haven't actually looked at

153
00:06:20,279 --> 00:06:26,698
this since we did our major changes this

154
00:06:23,009 --> 00:06:32,038
is now just a let's go back to the the

155
00:06:26,699 --> 00:06:38,550
sizes so this is now inside our game

156
00:06:32,038 --> 00:06:40,319
storage we now just have a giant cache

157
00:06:38,550 --> 00:06:41,020
effectively of entities that are

158
00:06:40,319 --> 00:06:43,810
expanded

159
00:06:41,019 --> 00:06:46,329
and they just go in that giant pool so

160
00:06:43,810 --> 00:06:49,329
that is just one big allocation that

161
00:06:46,329 --> 00:06:53,139
stores the entire game active set at any

162
00:06:49,329 --> 00:06:55,000
given time and then we only get little

163
00:06:53,139 --> 00:06:58,629
world chunks when things have to get

164
00:06:55,000 --> 00:07:00,759
packed back in and I would wager I guess

165
00:06:58,629 --> 00:07:04,080
I don't actually know but I would wager

166
00:07:00,759 --> 00:07:07,870
that right now we're actually not even

167
00:07:04,079 --> 00:07:11,408
spilling probably so the whole world

168
00:07:07,870 --> 00:07:13,389
just fits in the unexpanded version and

169
00:07:11,408 --> 00:07:15,279
we don't get that so you know that's

170
00:07:13,389 --> 00:07:19,000
that's kind of interesting if we went

171
00:07:15,279 --> 00:07:21,969
back to the world mode here that's right

172
00:07:19,000 --> 00:07:23,740
not the world no of the world and we we

173
00:07:21,970 --> 00:07:25,030
take a look I just had forgotten that

174
00:07:23,740 --> 00:07:26,348
would actually happen but that is what

175
00:07:25,029 --> 00:07:28,089
would happen you don't need to pack

176
00:07:26,348 --> 00:07:31,719
anything if things stay in the active

177
00:07:28,089 --> 00:07:34,959
set I believe what we would see here is

178
00:07:31,720 --> 00:07:38,229
if we were to change this number revise

179
00:07:34,959 --> 00:07:42,038
it down so let's say it was more like

180
00:07:38,228 --> 00:07:43,930
that right then I think we would start

181
00:07:42,038 --> 00:07:49,689
to see more in the in terms of packing

182
00:07:43,930 --> 00:07:52,840
right if I now take a look at that

183
00:07:49,689 --> 00:07:54,819
memory set there you go okay wow that's

184
00:07:52,839 --> 00:07:57,339
cool right this is why I really like

185
00:07:54,819 --> 00:07:59,680
these visualizations right even when you

186
00:07:57,339 --> 00:08:02,978
are the one who wrote the program you

187
00:07:59,680 --> 00:08:05,019
oftentimes won't remember like or won't

188
00:08:02,978 --> 00:08:06,848
think through how things will change and

189
00:08:05,019 --> 00:08:09,250
when you can see them operating you can

190
00:08:06,848 --> 00:08:11,079
tell so here's the cash this is

191
00:08:09,250 --> 00:08:13,990
unexpected

192
00:08:11,079 --> 00:08:16,209
expanded entities that are capable of

193
00:08:13,990 --> 00:08:18,610
running directly and simulating right

194
00:08:16,209 --> 00:08:21,430
and these are all the compressed entity

195
00:08:18,610 --> 00:08:23,500
chunks right now right now we don't

196
00:08:21,430 --> 00:08:25,240
actually do any compression that routine

197
00:08:23,500 --> 00:08:26,769
just stubbed out and will likely remain

198
00:08:25,240 --> 00:08:28,120
subbed out for a while because we don't

199
00:08:26,769 --> 00:08:29,348
care about actually doing the

200
00:08:28,120 --> 00:08:30,668
compression for a while and during

201
00:08:29,348 --> 00:08:32,918
developments it's easier not to bother

202
00:08:30,668 --> 00:08:34,629
but as we start to like tighten down the

203
00:08:32,918 --> 00:08:37,299
memory requirements for the game we can

204
00:08:34,629 --> 00:08:38,860
get a lot of win there right and so you

205
00:08:37,299 --> 00:08:40,990
can kind of see that process setting

206
00:08:38,860 --> 00:08:43,629
itself up nicely so that's pretty cool

207
00:08:40,990 --> 00:08:46,329
you can actually watch that cache

208
00:08:43,629 --> 00:08:48,338
getting used and at the size that we set

209
00:08:46,328 --> 00:08:52,088
it to which was four times the the

210
00:08:48,339 --> 00:08:53,890
maximum sim region count at that point

211
00:08:52,089 --> 00:08:54,730
you've really got enough that the whole

212
00:08:53,889 --> 00:08:56,559
game just runs

213
00:08:54,730 --> 00:08:58,600
out of it at the moment because we just

214
00:08:56,559 --> 00:09:00,278
don't create large enough worlds in the

215
00:08:58,600 --> 00:09:02,589
future will be creating much larger

216
00:09:00,278 --> 00:09:03,789
worlds will be me and not just spatially

217
00:09:02,589 --> 00:09:05,680
but just there's more stuff in it right

218
00:09:03,789 --> 00:09:08,708
because right now it's mostly empty we

219
00:09:05,679 --> 00:09:10,359
haven't put like the game design stuff

220
00:09:08,708 --> 00:09:12,278
in there that will create lots of new

221
00:09:10,360 --> 00:09:13,449
entities and stuff like that and also I

222
00:09:12,278 --> 00:09:15,189
think there's only like one or two

223
00:09:13,448 --> 00:09:16,569
levels of the dungeon I don't know three

224
00:09:15,190 --> 00:09:18,600
levels I don't know how many levels of

225
00:09:16,570 --> 00:09:23,019
dungeon it went down but it's not much

226
00:09:18,600 --> 00:09:24,639
so as we add more we should be actually

227
00:09:23,019 --> 00:09:26,528
utilizing more than four times the

228
00:09:24,639 --> 00:09:30,209
maximum region and account anyway but

229
00:09:26,528 --> 00:09:32,828
that's sort of a separate issue right ok

230
00:09:30,208 --> 00:09:35,500
so I think that's roughly what we're

231
00:09:32,828 --> 00:09:38,049
looking at here and what I want to do

232
00:09:35,500 --> 00:09:41,860
now like I said is look at maybe doing

233
00:09:38,049 --> 00:09:45,429
some of that ground cover stuff so that

234
00:09:41,860 --> 00:09:48,389
as entities come into the set like I'll

235
00:09:45,429 --> 00:09:52,359
sort of spam ground cover out onto

236
00:09:48,389 --> 00:09:55,440
grassy areas and you know things that

237
00:09:52,360 --> 00:09:59,649
want to have grass will have them right

238
00:09:55,440 --> 00:10:02,440
alright so if we go back into our entity

239
00:09:59,649 --> 00:10:06,039
set let's let's just take a look at the

240
00:10:02,440 --> 00:10:07,510
entity structure itself here if we're in

241
00:10:06,039 --> 00:10:10,240
the entity structure and we want to

242
00:10:07,509 --> 00:10:11,948
start adding this here's like the stuff

243
00:10:10,240 --> 00:10:13,480
that we have for lighting storage and

244
00:10:11,948 --> 00:10:17,289
here's the stuff that we have for ground

245
00:10:13,480 --> 00:10:19,209
cover these two things are both elements

246
00:10:17,289 --> 00:10:21,039
that don't really need to be there and

247
00:10:19,208 --> 00:10:22,750
you can see there was a to do here for

248
00:10:21,039 --> 00:10:25,889
the lighting elements that don't really

249
00:10:22,750 --> 00:10:28,539
need to be there when there isn't some

250
00:10:25,889 --> 00:10:30,940
when the entity is it's sort of packed

251
00:10:28,539 --> 00:10:34,328
away it's not in the actus that's not

252
00:10:30,940 --> 00:10:36,550
being used and there's more down here in

253
00:10:34,328 --> 00:10:38,799
addition to that that could be as well a

254
00:10:36,549 --> 00:10:41,409
lot of this animation sort of stuff

255
00:10:38,799 --> 00:10:44,049
right like all this you know these angle

256
00:10:41,409 --> 00:10:46,568
swipes the and base and all that stuff

257
00:10:44,049 --> 00:10:49,299
all of the things that our animation

258
00:10:46,568 --> 00:10:51,370
related also don't need to be there so a

259
00:10:49,299 --> 00:11:00,028
lot of this stuff can sort of be packed

260
00:10:51,370 --> 00:11:00,028
up into like a more concise format and

261
00:11:00,269 --> 00:11:05,980
you know we can just truncate the entity

262
00:11:03,068 --> 00:11:08,719
as we go so what I'd like to do is start

263
00:11:05,980 --> 00:11:10,340
by actually doing something like that

264
00:11:08,720 --> 00:11:12,740
where we kind of have some knowledge

265
00:11:10,340 --> 00:11:14,120
about how it might get truncated I'm

266
00:11:12,740 --> 00:11:16,879
gonna do the simplest possible thing

267
00:11:14,120 --> 00:11:19,750
first this is just a really really basic

268
00:11:16,879 --> 00:11:23,539
idea but I'm going to start with it

269
00:11:19,750 --> 00:11:25,159
which is here where I sort of say okay

270
00:11:23,539 --> 00:11:27,860
we're gonna have some extra data with

271
00:11:25,159 --> 00:11:31,189
our entities I'm gonna I'm gonna do

272
00:11:27,860 --> 00:11:32,360
something like say well maybe and

273
00:11:31,190 --> 00:11:35,000
there's two ways I go with this I'll

274
00:11:32,360 --> 00:11:39,200
just tell you what they both are way

275
00:11:35,000 --> 00:11:43,269
number one would be that we keep the n

276
00:11:39,200 --> 00:11:46,310
destructive this size and we just

277
00:11:43,269 --> 00:11:47,960
truncate it when we pack it so when the

278
00:11:46,309 --> 00:11:48,259
entity gets packed down to a smaller

279
00:11:47,960 --> 00:11:51,680
size

280
00:11:48,259 --> 00:11:55,939
we just don't pack down the ending bit

281
00:11:51,679 --> 00:11:58,819
right we just leave it off you know I'm

282
00:11:55,940 --> 00:12:01,100
saying so that's one way to do it

283
00:11:58,820 --> 00:12:02,720
another way to do it is these could

284
00:12:01,100 --> 00:12:04,940
actually now be things that are more

285
00:12:02,720 --> 00:12:08,600
complicated so for example we could have

286
00:12:04,940 --> 00:12:11,960
secondary rings of data for things like

287
00:12:08,600 --> 00:12:13,519
ground cover that we just allocate to an

288
00:12:11,960 --> 00:12:15,650
entity when the entity comes into

289
00:12:13,519 --> 00:12:17,569
service and then remove from the entity

290
00:12:15,649 --> 00:12:19,850
when it goes out of service and I think

291
00:12:17,570 --> 00:12:22,520
that's actually more like what we're

292
00:12:19,850 --> 00:12:25,310
going to move towards as we go because

293
00:12:22,519 --> 00:12:28,039
things like ground cover at least maybe

294
00:12:25,309 --> 00:12:30,500
not lighting Point State but maybe but

295
00:12:28,039 --> 00:12:34,069
ground cover at least may reside

296
00:12:30,500 --> 00:12:37,250
entirely on the GPU right because the

297
00:12:34,070 --> 00:12:40,250
GPU could know how the ground cover is

298
00:12:37,250 --> 00:12:43,100
arranged and there could just be like a

299
00:12:40,250 --> 00:12:44,840
vertex buffer that's stored that says

300
00:12:43,100 --> 00:12:49,220
here's where the ground cover goes and

301
00:12:44,840 --> 00:12:51,170
so we wouldn't really need to store the

302
00:12:49,220 --> 00:12:52,879
ground cover data on the CPU side it

303
00:12:51,169 --> 00:12:56,419
could always just reside in the GPU side

304
00:12:52,879 --> 00:12:59,029
and so then the entity pack unpack stage

305
00:12:56,419 --> 00:13:01,219
still very important just instead of

306
00:12:59,029 --> 00:13:04,039
being there for modifying CPU memory

307
00:13:01,220 --> 00:13:06,980
it'll be there for modifying GPU memory

308
00:13:04,039 --> 00:13:08,719
right and so I think that's where we're

309
00:13:06,980 --> 00:13:11,210
gonna go with it eventually but I don't

310
00:13:08,720 --> 00:13:13,129
want to you know run before we can crawl

311
00:13:11,210 --> 00:13:15,320
here so what I'm going to do for

312
00:13:13,129 --> 00:13:18,379
starters is I'm just gonna define a

313
00:13:15,320 --> 00:13:21,800
boundary that says at this point in the

314
00:13:18,379 --> 00:13:29,088
code everything after it can

315
00:13:21,799 --> 00:13:31,729
get discarded right and so this is kind

316
00:13:29,089 --> 00:13:33,830
of just like a temporary way we're gonna

317
00:13:31,730 --> 00:13:35,899
deal with this for the moment and it's a

318
00:13:33,830 --> 00:13:38,028
really easy way for us to just do our

319
00:13:35,899 --> 00:13:40,190
packing and unpacking so what this means

320
00:13:38,028 --> 00:13:40,870
is here's our lighting and our cover

321
00:13:40,190 --> 00:13:44,329
information

322
00:13:40,870 --> 00:13:46,909
masae that all of our entities you know

323
00:13:44,328 --> 00:13:48,679
I may go back here temporarily and and

324
00:13:46,909 --> 00:13:51,828
sort of do this again as well just so we

325
00:13:48,679 --> 00:13:53,838
can watch it happen all of our entities

326
00:13:51,828 --> 00:13:55,399
are gonna have all of this stuff in them

327
00:13:53,839 --> 00:14:00,260
when they're in the cash right now so

328
00:13:55,399 --> 00:14:02,690
when we run and we look at sort of this

329
00:14:00,259 --> 00:14:04,519
part right and we look at how this is

330
00:14:02,690 --> 00:14:06,079
getting distributed you can see that

331
00:14:04,519 --> 00:14:08,480
we've got all the packed entities here

332
00:14:06,078 --> 00:14:10,278
all the cash tracer these entities and

333
00:14:08,480 --> 00:14:11,870
these entities currently have all that

334
00:14:10,278 --> 00:14:15,289
data so what I'm gonna do now is just

335
00:14:11,870 --> 00:14:17,899
remove that data just from here so when

336
00:14:15,289 --> 00:14:21,469
an entity gets packed so out of the

337
00:14:17,899 --> 00:14:26,360
actors set this storage will no longer

338
00:14:21,470 --> 00:14:28,370
contain that extra space right so how

339
00:14:26,360 --> 00:14:30,919
we're gonna do that well inside the

340
00:14:28,370 --> 00:14:33,980
world struct we know exactly what's

341
00:14:30,919 --> 00:14:36,769
going on when we call unsure region is

342
00:14:33,980 --> 00:14:38,480
unpacked we know that those pieces of

343
00:14:36,769 --> 00:14:42,828
information are going to come into being

344
00:14:38,480 --> 00:14:44,389
right and so when we go well actually I

345
00:14:42,828 --> 00:14:46,370
think this does both of them right

346
00:14:44,389 --> 00:14:48,860
but anyway point being when we come in

347
00:14:46,370 --> 00:14:51,679
here and we call acquire unpacked in the

348
00:14:48,860 --> 00:14:55,100
slot that acquire unpacked and the slot

349
00:14:51,679 --> 00:14:57,949
call is the thing that preps that region

350
00:14:55,100 --> 00:14:59,540
so if we look at what that does you can

351
00:14:57,950 --> 00:15:02,540
see here that it just kind of grabs it

352
00:14:59,539 --> 00:15:07,789
and then gives it back and so we want to

353
00:15:02,539 --> 00:15:11,120
probably at this point unpacking

354
00:15:07,789 --> 00:15:12,828
something we want at this point to do

355
00:15:11,120 --> 00:15:14,959
something a little bit more than just

356
00:15:12,828 --> 00:15:17,059
taking whatever the source data is and

357
00:15:14,958 --> 00:15:18,559
slamming it back in there because now

358
00:15:17,059 --> 00:15:21,649
what we're gonna do is we're gonna start

359
00:15:18,559 --> 00:15:25,489
using a smaller size for the actual

360
00:15:21,649 --> 00:15:26,120
packing right all right so how are we

361
00:15:25,490 --> 00:15:27,649
gonna do that

362
00:15:26,120 --> 00:15:29,990
well first of all we need to start

363
00:15:27,649 --> 00:15:33,110
maintaining an actual pointer here so

364
00:15:29,990 --> 00:15:35,950
we're going to use sort of a read

365
00:15:33,110 --> 00:15:40,419
pointer and I want to do

366
00:15:35,950 --> 00:15:42,280
I want this to start looking a little

367
00:15:40,419 --> 00:15:44,139
bit more like a streaming construction

368
00:15:42,279 --> 00:15:46,419
because like I said in the future I

369
00:15:44,139 --> 00:15:48,039
think I'm going to want to do some like

370
00:15:46,419 --> 00:15:50,379
more advanced compression these sorts of

371
00:15:48,039 --> 00:15:52,829
stuff with it and so I wanted to start

372
00:15:50,379 --> 00:15:56,379
looking a little bit more like our PNG

373
00:15:52,830 --> 00:15:59,290
sort of stuff right and so if we look I

374
00:15:56,379 --> 00:16:01,539
think I mean I don't know but I think we

375
00:15:59,289 --> 00:16:04,539
may just be able to go ahead and use our

376
00:16:01,539 --> 00:16:06,490
stream here because if you remember how

377
00:16:04,539 --> 00:16:10,779
our stream worked you could just make

378
00:16:06,490 --> 00:16:13,659
these calls like consume this much from

379
00:16:10,779 --> 00:16:15,939
the stream and you know this is this is

380
00:16:13,659 --> 00:16:18,789
what I want you to give me for data

381
00:16:15,940 --> 00:16:21,430
right and so if we have something like

382
00:16:18,789 --> 00:16:23,829
that that we use on top of the stream

383
00:16:21,429 --> 00:16:27,399
that may be the easiest way for us to

384
00:16:23,830 --> 00:16:29,230
really work this stuff out now there's a

385
00:16:27,399 --> 00:16:32,110
couple things that aren't probably ideal

386
00:16:29,230 --> 00:16:34,450
about it namely it can't read across

387
00:16:32,110 --> 00:16:36,820
boundaries so this stream was made to

388
00:16:34,450 --> 00:16:38,920
just only work on a single boundary you

389
00:16:36,820 --> 00:16:40,930
can see that happening here where you've

390
00:16:38,919 --> 00:16:44,019
got the file under flowed thing being

391
00:16:40,929 --> 00:16:47,019
true because I think this refill if

392
00:16:44,019 --> 00:16:49,389
necessary right this thing is only

393
00:16:47,019 --> 00:16:51,610
getting called once so what happens is

394
00:16:49,389 --> 00:16:54,189
while the stream is reading it can read

395
00:16:51,610 --> 00:16:58,539
out of multiple chunks but it has to

396
00:16:54,190 --> 00:17:02,800
read individual things out of it in as

397
00:16:58,539 --> 00:17:04,839
as a single block right now I don't

398
00:17:02,799 --> 00:17:06,789
really need to replace that now because

399
00:17:04,839 --> 00:17:08,980
I that may in fact that limitation may

400
00:17:06,789 --> 00:17:12,220
be fine just in general but it's worth

401
00:17:08,980 --> 00:17:13,539
noting that it is there right and so

402
00:17:12,220 --> 00:17:16,480
it's something that we just want to be

403
00:17:13,539 --> 00:17:18,490
like aware of if that makes sense but

404
00:17:16,480 --> 00:17:20,920
otherwise you know I think this is

405
00:17:18,490 --> 00:17:22,660
something we probably could use if you

406
00:17:20,920 --> 00:17:24,640
look at how this is set up we've got

407
00:17:22,660 --> 00:17:28,540
this stream chunk here with the the

408
00:17:24,640 --> 00:17:30,759
buffer contents and that stuff I could

409
00:17:28,539 --> 00:17:32,470
however also just make a custom one just

410
00:17:30,759 --> 00:17:34,750
for the world and the reason why we

411
00:17:32,470 --> 00:17:36,819
might want to do that is because again

412
00:17:34,750 --> 00:17:38,740
these entity blocks we already have are

413
00:17:36,819 --> 00:17:42,309
kind of doing something relatively

414
00:17:38,740 --> 00:17:47,380
specific there and so on and so forth so

415
00:17:42,309 --> 00:17:49,000
I don't know kind of hard for me to say

416
00:17:47,380 --> 00:17:52,390
what I really want to do there

417
00:17:49,000 --> 00:17:55,000
I think what I may do is just say yeah

418
00:17:52,390 --> 00:17:57,790
let's let's just kind of clone just that

419
00:17:55,000 --> 00:17:59,529
one consumption sort of operation maybe

420
00:17:57,789 --> 00:18:01,299
and I'll implement especially here

421
00:17:59,529 --> 00:18:02,799
because I think the stream is just not

422
00:18:01,299 --> 00:18:04,240
quite compatible enough I don't want to

423
00:18:02,799 --> 00:18:05,980
shoehorn it in there and this is

424
00:18:04,240 --> 00:18:07,779
probably gonna be a relatively important

425
00:18:05,980 --> 00:18:09,849
part of our program so I'm gonna I'm

426
00:18:07,779 --> 00:18:11,529
gonna keep it more straightforward than

427
00:18:09,849 --> 00:18:13,329
that so what I'm going to do here is

428
00:18:11,529 --> 00:18:14,859
just pretend I have the thing I need and

429
00:18:13,329 --> 00:18:16,859
I'm gonna write the two sides at the

430
00:18:14,859 --> 00:18:19,629
same time just so I can make things nice

431
00:18:16,859 --> 00:18:22,899
here where we have this this code right

432
00:18:19,630 --> 00:18:24,280
here this is where we pack an entity so

433
00:18:22,900 --> 00:18:28,269
this this part of the code right here

434
00:18:24,279 --> 00:18:29,799
packs an entity into a waiting stream so

435
00:18:28,269 --> 00:18:32,529
you can see it here doing the

436
00:18:29,799 --> 00:18:34,629
adjustments for the entity location then

437
00:18:32,529 --> 00:18:36,549
you can see this getting space for the

438
00:18:34,630 --> 00:18:39,070
entity there that it's going to try to

439
00:18:36,549 --> 00:18:43,329
write in and then there there it is

440
00:18:39,069 --> 00:18:47,710
writing it right and so what I want to

441
00:18:43,329 --> 00:18:49,720
do now is kind of figure out yeah I want

442
00:18:47,710 --> 00:18:51,490
to kind of say how do I want that to

443
00:18:49,720 --> 00:18:53,289
work on this side and this side where

444
00:18:51,490 --> 00:18:57,460
we're not reading out an entirety Randy

445
00:18:53,289 --> 00:18:59,980
well the basics here would be just say

446
00:18:57,460 --> 00:19:02,650
all right how much do I actually want so

447
00:18:59,980 --> 00:19:06,160
if I take a look and I say like total

448
00:19:02,650 --> 00:19:10,060
entity size or maybe packed enemy size

449
00:19:06,160 --> 00:19:11,830
right what's that gonna be well I know

450
00:19:10,059 --> 00:19:14,919
that this is how big the entire entity

451
00:19:11,829 --> 00:19:17,679
is but I also know that inside my entity

452
00:19:14,920 --> 00:19:19,960
struct I have write like this discard

453
00:19:17,680 --> 00:19:23,350
everything after I have a point that I

454
00:19:19,960 --> 00:19:27,460
don't want a store passed right so I

455
00:19:23,349 --> 00:19:29,949
want to look and see where is the you

456
00:19:27,460 --> 00:19:33,220
know where is that actually going right

457
00:19:29,950 --> 00:19:34,690
well how far in is it so a long time ago

458
00:19:33,220 --> 00:19:37,720
we wrote this macro which is just kind

459
00:19:34,690 --> 00:19:39,130
of an easy way of saying how far is this

460
00:19:37,720 --> 00:19:41,079
member from the beginning of the struck

461
00:19:39,130 --> 00:19:43,570
it says assume we're starting at a

462
00:19:41,079 --> 00:19:45,759
pointer value of 0 so this the struct

463
00:19:43,569 --> 00:19:47,799
starts at 0 memory the base of memory

464
00:19:45,759 --> 00:19:49,240
how far we have to go to get to the

465
00:19:47,799 --> 00:19:52,509
member right it's just using the address

466
00:19:49,240 --> 00:19:55,120
of operator for that and so what I can

467
00:19:52,509 --> 00:19:58,720
do is I can say all right if I know the

468
00:19:55,119 --> 00:20:00,879
offset of that thing in memory right

469
00:19:58,720 --> 00:20:02,140
instead of saying size of entity what I

470
00:20:00,880 --> 00:20:05,410
could just do is say

471
00:20:02,140 --> 00:20:08,170
how big would the how far would I have

472
00:20:05,410 --> 00:20:11,200
to get if I went all the way to this

473
00:20:08,170 --> 00:20:14,620
discard everything after that's the size

474
00:20:11,200 --> 00:20:16,390
of all the things before it right so it

475
00:20:14,619 --> 00:20:18,519
gives me this sort of easy way of

476
00:20:16,390 --> 00:20:19,810
figuring out how much I need to save and

477
00:20:18,519 --> 00:20:22,210
everything else after it would get

478
00:20:19,809 --> 00:20:25,210
discarded so if this was the pact entity

479
00:20:22,210 --> 00:20:28,990
size here then I could just change this

480
00:20:25,210 --> 00:20:32,289
code to use that size so I could say

481
00:20:28,990 --> 00:20:34,750
well let's just instead use oops pact

482
00:20:32,289 --> 00:20:37,359
entity size so we'll use that much chunk

483
00:20:34,750 --> 00:20:39,220
space when this comes back I'm not going

484
00:20:37,359 --> 00:20:43,089
to do entity star I'm just gonna call

485
00:20:39,220 --> 00:20:45,309
this a void star and then I'm just gonna

486
00:20:43,089 --> 00:20:47,379
do a regular copy of the pact entity

487
00:20:45,309 --> 00:20:50,769
size and I'm gonna say go from the

488
00:20:47,380 --> 00:20:53,080
entity to this destination right now

489
00:20:50,769 --> 00:20:56,440
this part isn't going to work this

490
00:20:53,079 --> 00:20:58,000
clearing part here because we've we've

491
00:20:56,440 --> 00:20:59,980
now sort of destroyed the ability to

492
00:20:58,000 --> 00:21:03,069
access anything that's okay this is just

493
00:20:59,980 --> 00:21:04,900
saying don't actually store these you

494
00:21:03,069 --> 00:21:07,269
know for all intents purposes and so

495
00:21:04,900 --> 00:21:11,050
what I want to do is just let's now use

496
00:21:07,269 --> 00:21:13,089
our packing for that we have DDP and we

497
00:21:11,049 --> 00:21:18,299
have DDT Bob it's saying don't pack it

498
00:21:13,089 --> 00:21:18,299
well all right let's just not pack it

499
00:21:31,450 --> 00:21:36,080
so this stuff will now just get

500
00:21:34,369 --> 00:21:38,659
discarded and that means we don't have

501
00:21:36,079 --> 00:21:41,210
to do anything with it here right so

502
00:21:38,660 --> 00:21:43,610
this is what we're doing you know that's

503
00:21:41,210 --> 00:21:45,610
our code I'm gonna pull this out for now

504
00:21:43,609 --> 00:21:49,250
because it happens to be shared at this

505
00:21:45,609 --> 00:21:51,798
you know at this stage and so what I

506
00:21:49,250 --> 00:21:54,109
want to do is in here where we do this

507
00:21:51,798 --> 00:21:56,569
operation I want to make a symmetric

508
00:21:54,109 --> 00:22:00,399
version on the side that actually does

509
00:21:56,569 --> 00:22:03,408
the unpack right so where we do this so

510
00:22:00,400 --> 00:22:06,380
when we acquire an unpacked NV slot I

511
00:22:03,409 --> 00:22:08,120
now want to make sure I can copy the

512
00:22:06,380 --> 00:22:10,280
rest of the stuff into it and what

513
00:22:08,119 --> 00:22:12,589
you'll see here is that this code is

514
00:22:10,279 --> 00:22:13,879
actually kind of wrong and I guess I

515
00:22:12,589 --> 00:22:17,359
should update the other piece of code as

516
00:22:13,880 --> 00:22:20,659
well first so you can see here when I do

517
00:22:17,359 --> 00:22:29,109
my use chunk space this is only going to

518
00:22:20,659 --> 00:22:32,690
advance by however much space I really

519
00:22:29,109 --> 00:22:37,519
know I'm looking at that to start use

520
00:22:32,690 --> 00:22:40,538
chunk space call who updates how many

521
00:22:37,519 --> 00:22:40,538
entities there are

522
00:22:46,589 --> 00:22:54,990
okay so what you can see here is we have

523
00:22:52,919 --> 00:22:57,120
the entity count getting updated as well

524
00:22:54,990 --> 00:22:58,558
and again that's something that I pretty

525
00:22:57,119 --> 00:23:00,239
much don't want to do anymore

526
00:22:58,558 --> 00:23:02,908
the reason for that is if our entities

527
00:23:00,240 --> 00:23:04,288
start becoming flexibly sized which I

528
00:23:02,909 --> 00:23:05,789
would like to get to as well because

529
00:23:04,288 --> 00:23:08,339
eventually I think that's probably the

530
00:23:05,788 --> 00:23:10,769
right way to go we don't really want we

531
00:23:08,339 --> 00:23:12,749
don't want to be doing stuff with a unit

532
00:23:10,769 --> 00:23:15,388
block size entity right we want to be

533
00:23:12,749 --> 00:23:17,249
flexibly reading the data so I think

534
00:23:15,388 --> 00:23:18,569
what we want to do here is just treat

535
00:23:17,249 --> 00:23:21,899
this again a little bit more like a

536
00:23:18,569 --> 00:23:24,839
streaming thing and say this is not

537
00:23:21,898 --> 00:23:26,189
there anymore right and we've got this

538
00:23:24,839 --> 00:23:28,019
entity data we're just gonna use this

539
00:23:26,190 --> 00:23:29,490
entity a to size to say how much of its

540
00:23:28,019 --> 00:23:32,190
filled and that's what we're actually

541
00:23:29,490 --> 00:23:34,349
going to use so this entity data here

542
00:23:32,190 --> 00:23:36,450
with this world block size my 16 instead

543
00:23:34,349 --> 00:23:38,788
of 16 we're gonna trim off 4 bytes from

544
00:23:36,450 --> 00:23:42,960
that right and we're gonna we're gonna

545
00:23:38,788 --> 00:23:45,298
say okay it's just an 8 up to 8 byte

546
00:23:42,960 --> 00:23:47,610
pointer and then a 4 byte size and

547
00:23:45,298 --> 00:23:50,609
that's all that's gonna be in here so

548
00:23:47,609 --> 00:23:53,368
once we trim that off we can get down to

549
00:23:50,609 --> 00:23:58,288
to just 12 there now when we look at any

550
00:23:53,368 --> 00:24:02,519
data and we say do we really need entity

551
00:23:58,288 --> 00:24:05,579
data size there to be 32 a 32-bit

552
00:24:02,519 --> 00:24:09,149
integer what you can hopefully gain from

553
00:24:05,579 --> 00:24:12,329
this is like well hey that's not right

554
00:24:09,148 --> 00:24:14,969
here this world block size at a maximum

555
00:24:12,329 --> 00:24:17,278
is only 16 bits and we know that we've

556
00:24:14,970 --> 00:24:20,368
already taken up some of it so actually

557
00:24:17,278 --> 00:24:23,579
this can just be a 16-bit integer if we

558
00:24:20,368 --> 00:24:26,099
want to and then we can save an extra 2

559
00:24:23,579 --> 00:24:29,339
right so now we've got roadblocks size

560
00:24:26,099 --> 00:24:30,538
-10 worth of storage which is basically

561
00:24:29,339 --> 00:24:32,308
just room for the next pointer and a

562
00:24:30,538 --> 00:24:36,720
little thing that says how far we should

563
00:24:32,308 --> 00:24:40,168
go to the end right now even that's

564
00:24:36,720 --> 00:24:42,210
probably not actually 100% necessary we

565
00:24:40,169 --> 00:24:44,129
could do something even squeakier if we

566
00:24:42,210 --> 00:24:45,990
really wanted to but for now I'm gonna

567
00:24:44,128 --> 00:24:49,878
stick with that and I'm gonna get rid of

568
00:24:45,990 --> 00:24:53,548
the Edit account stuff altogether right

569
00:24:49,878 --> 00:24:56,038
so here is the block MB count I'm gonna

570
00:24:53,548 --> 00:24:57,690
get rid of that and I'm gonna recompile

571
00:24:56,038 --> 00:25:00,950
now and just get rid of it everywhere it

572
00:24:57,690 --> 00:25:07,140
is and then we're gonna go from there

573
00:25:00,950 --> 00:25:10,190
okay yep so we don't want that and this

574
00:25:07,140 --> 00:25:15,180
when we do the plus equals size here

575
00:25:10,190 --> 00:25:18,330
this size value is a 32-bit value that's

576
00:25:15,180 --> 00:25:20,850
okay when we do this has room for check

577
00:25:18,329 --> 00:25:23,759
that will take care of it so it should

578
00:25:20,849 --> 00:25:25,409
be a safe front gate to you 16 here

579
00:25:23,759 --> 00:25:34,470
where we can just say that's only we're

580
00:25:25,410 --> 00:25:37,680
only gonna use 16 bits of that data all

581
00:25:34,470 --> 00:25:40,200
right so as you can see the packing side

582
00:25:37,680 --> 00:25:41,670
is much simpler it doesn't really need

583
00:25:40,200 --> 00:25:43,500
to know how many entities there are

584
00:25:41,670 --> 00:25:45,240
because it's the one creating all of

585
00:25:43,500 --> 00:25:46,829
that used chunk space in the first place

586
00:25:45,240 --> 00:25:49,319
it just streams it out till it's done

587
00:25:46,829 --> 00:25:52,139
and that will track how much total space

588
00:25:49,319 --> 00:25:54,599
is used when we get back here and we go

589
00:25:52,140 --> 00:25:57,600
through these blocks as we are unpacking

590
00:25:54,599 --> 00:26:02,909
our entities the problem that we're

591
00:25:57,599 --> 00:26:05,819
gonna have here is again without this we

592
00:26:02,910 --> 00:26:07,769
don't know when we're done but since we

593
00:26:05,819 --> 00:26:09,779
have the entity data science field

594
00:26:07,769 --> 00:26:13,889
that's gonna tell us how much we have

595
00:26:09,779 --> 00:26:16,259
left so really in here we can do change

596
00:26:13,890 --> 00:26:18,060
the the nature of this to a slightly

597
00:26:16,259 --> 00:26:20,579
different way of looking at the data

598
00:26:18,059 --> 00:26:23,730
right what instead we could do is have a

599
00:26:20,579 --> 00:26:27,449
u16 here that's like at will start at 0

600
00:26:23,730 --> 00:26:30,120
I guess I could do it this way right

601
00:26:27,450 --> 00:26:31,860
we'll go until we're under the entity

602
00:26:30,119 --> 00:26:34,949
data like when we get to the entity data

603
00:26:31,859 --> 00:26:37,619
size we have to stop right and so then

604
00:26:34,950 --> 00:26:40,170
as we read in here we can just advance

605
00:26:37,619 --> 00:26:41,849
that pointer once that pointer has read

606
00:26:40,170 --> 00:26:44,940
all the data in the block we know we're

607
00:26:41,849 --> 00:26:46,859
done with the block right now this will

608
00:26:44,940 --> 00:26:49,710
get more complicated and we'll want to

609
00:26:46,859 --> 00:26:51,359
pull this out to an actual little struct

610
00:26:49,710 --> 00:26:54,150
probably that like streams things in for

611
00:26:51,359 --> 00:26:56,129
us as we go but at the moment since we

612
00:26:54,150 --> 00:26:58,950
only since we're not renting out

613
00:26:56,130 --> 00:27:01,320
entities in pieces we can still keep

614
00:26:58,950 --> 00:27:03,750
this structure of doing one nd at a time

615
00:27:01,319 --> 00:27:06,149
inside the inner loop with this actually

616
00:27:03,750 --> 00:27:08,910
being a loop around it that's actually

617
00:27:06,150 --> 00:27:10,920
totally fine but once we get to this the

618
00:27:08,910 --> 00:27:12,810
the part where an entity might be stored

619
00:27:10,920 --> 00:27:13,650
across two blocks which there's no

620
00:27:12,809 --> 00:27:14,849
reason not to do

621
00:27:13,650 --> 00:27:17,400
pretty easy for us to extend to that

622
00:27:14,849 --> 00:27:19,139
then this has to get lofted up into a

623
00:27:17,400 --> 00:27:22,410
thing that just does the check every

624
00:27:19,140 --> 00:27:24,660
time right so it would actually be in

625
00:27:22,410 --> 00:27:29,029
here where we would say you know make

626
00:27:24,660 --> 00:27:32,220
sure we haven't reached the end of the

627
00:27:29,029 --> 00:27:34,980
it would be a four loop that goes and

628
00:27:32,220 --> 00:27:38,430
gets a new block if it can if it can't

629
00:27:34,980 --> 00:27:41,250
we're done if it or start I should say

630
00:27:38,430 --> 00:27:42,900
if we it checks to see if we've run out

631
00:27:41,250 --> 00:27:45,059
of bits in this block and when we have

632
00:27:42,900 --> 00:27:47,430
gets another block if it can't then

633
00:27:45,059 --> 00:27:49,259
we're actually done right so it's just

634
00:27:47,430 --> 00:27:50,970
it won't be as complicated for it won't

635
00:27:49,259 --> 00:27:52,200
be as straightforward for a loop it'll

636
00:27:50,970 --> 00:27:54,390
be something that looks more like that

637
00:27:52,200 --> 00:27:56,400
with the actual code inside and a break

638
00:27:54,390 --> 00:27:57,840
statement right but for right now we can

639
00:27:56,400 --> 00:27:59,580
stay with a simpler version because we

640
00:27:57,839 --> 00:28:01,919
know we're only packing whole entities

641
00:27:59,579 --> 00:28:04,379
at a time still so it's a simpler

642
00:28:01,920 --> 00:28:05,880
process that we're doing so we don't

643
00:28:04,380 --> 00:28:09,570
really want to do any of this anymore

644
00:28:05,880 --> 00:28:11,820
right we do want the dest to do the

645
00:28:09,569 --> 00:28:13,740
acquire app unpacked any slot but here

646
00:28:11,819 --> 00:28:16,019
this is going to be more of the the same

647
00:28:13,740 --> 00:28:18,539
where we take the packed entity size

648
00:28:16,019 --> 00:28:21,629
that we expect we're going to take the

649
00:28:18,539 --> 00:28:23,789
destination here and say we're going to

650
00:28:21,630 --> 00:28:26,790
copy into that so then we just need our

651
00:28:23,789 --> 00:28:29,190
source so we need the entity data for

652
00:28:26,789 --> 00:28:30,480
the block plus where we're actually at

653
00:28:29,190 --> 00:28:33,539
in the block that's where we're gonna

654
00:28:30,480 --> 00:28:34,920
copy from and then when of course it has

655
00:28:33,539 --> 00:28:36,779
to do the unpacking of the position as

656
00:28:34,920 --> 00:28:39,300
well when we're actually done with that

657
00:28:36,779 --> 00:28:41,879
read we also then want to advance our

658
00:28:39,299 --> 00:28:43,529
app pointer to be that packed entity

659
00:28:41,880 --> 00:28:47,430
size so again we're just consuming that

660
00:28:43,529 --> 00:28:49,980
much out of the packed stream right so

661
00:28:47,430 --> 00:28:53,539
now in theory barring problems that I

662
00:28:49,980 --> 00:28:54,690
may have introduced hopefully that is

663
00:28:53,539 --> 00:28:57,299
correct

664
00:28:54,690 --> 00:28:58,980
meaning hopefully we've got the right

665
00:28:57,299 --> 00:29:01,680
logic in there now and if once we just

666
00:28:58,980 --> 00:29:04,529
debug that we will still have our game

667
00:29:01,680 --> 00:29:05,789
running exactly as it was only now when

668
00:29:04,529 --> 00:29:08,129
we store our entities for long-term

669
00:29:05,789 --> 00:29:11,490
storage it will strip off that large

670
00:29:08,130 --> 00:29:14,280
section at the end of it and so if we

671
00:29:11,490 --> 00:29:16,039
take a look inside the arena's now you

672
00:29:14,279 --> 00:29:19,019
can actually see how much there's

673
00:29:16,039 --> 00:29:20,700
drastically less storage being spent on

674
00:29:19,019 --> 00:29:22,049
the entities that are in long-term

675
00:29:20,700 --> 00:29:26,490
storage right it was like two three

676
00:29:22,049 --> 00:29:27,240
times the size of that four right and so

677
00:29:26,490 --> 00:29:29,970
now when I'm

678
00:29:27,240 --> 00:29:33,299
around in theory as things get packed

679
00:29:29,970 --> 00:29:35,190
and unpacked in through that set we

680
00:29:33,299 --> 00:29:36,990
shouldn't see any bugs and we don't so I

681
00:29:35,190 --> 00:29:37,529
guess maybe I did that at least roughly

682
00:29:36,990 --> 00:29:38,910
right

683
00:29:37,529 --> 00:29:40,049
we haven't stressed that system or

684
00:29:38,910 --> 00:29:42,179
tested it much so it's a little

685
00:29:40,049 --> 00:29:44,308
premature to say anything like that but

686
00:29:42,179 --> 00:29:46,559
certainly it's not obviously busted

687
00:29:44,308 --> 00:29:48,420
because as these entities are coming in

688
00:29:46,558 --> 00:29:50,240
they're working just fine there's our

689
00:29:48,420 --> 00:29:53,640
little saucy gentleman hopping around

690
00:29:50,240 --> 00:29:55,470
and the lighting is all just fine now

691
00:29:53,640 --> 00:29:57,900
let's go back to an into an area that

692
00:29:55,470 --> 00:29:59,100
was packed up again we shouldn't expect

693
00:29:57,900 --> 00:30:01,470
to see anything different here because

694
00:29:59,099 --> 00:30:03,509
since our world generation code uses the

695
00:30:01,470 --> 00:30:05,880
world system as it is in the first place

696
00:30:03,509 --> 00:30:07,579
if unpacking was broken we would have

697
00:30:05,880 --> 00:30:10,410
expected to be broken the entire time

698
00:30:07,579 --> 00:30:12,928
not just when we pack and unpack and

699
00:30:10,410 --> 00:30:15,058
repack and so on but you know I don't

700
00:30:12,929 --> 00:30:16,530
see any particular issues here we don't

701
00:30:15,058 --> 00:30:19,649
really know how hard we've tested it

702
00:30:16,529 --> 00:30:22,558
like I said but that seems fine all

703
00:30:19,650 --> 00:30:24,269
right so that's again the first stage

704
00:30:22,558 --> 00:30:26,250
and that just gets us in the habit of

705
00:30:24,269 --> 00:30:29,029
having this packing work now as you can

706
00:30:26,250 --> 00:30:32,339
see when we have ensure region is

707
00:30:29,029 --> 00:30:35,670
unpacked here what I want to do is when

708
00:30:32,339 --> 00:30:39,449
we actually go to do an unpack which is

709
00:30:35,670 --> 00:30:41,070
here when we call register entity we

710
00:30:39,450 --> 00:30:45,120
kind of want register enemy now to

711
00:30:41,069 --> 00:30:46,919
potentially do more stuff right

712
00:30:45,119 --> 00:30:48,599
or rather we want I guess we shouldn't

713
00:30:46,920 --> 00:30:49,800
say do more stuff we actually just

714
00:30:48,599 --> 00:30:51,359
probably want a separate call because

715
00:30:49,799 --> 00:30:53,069
register entity needs to be done when we

716
00:30:51,359 --> 00:30:56,519
just use entities that are already in

717
00:30:53,069 --> 00:31:06,349
the set as well so here what I'd like to

718
00:30:56,519 --> 00:31:06,349
do is you know fill entity or something

719
00:31:06,679 --> 00:31:13,160
something like this so what I want to do

720
00:31:09,720 --> 00:31:16,319
here is say hey we've got an entity it

721
00:31:13,160 --> 00:31:18,808
was packed long term storage now we have

722
00:31:16,319 --> 00:31:21,720
unpacked it and it needs to recreate

723
00:31:18,808 --> 00:31:24,899
like any stuff that you know gets

724
00:31:21,720 --> 00:31:28,440
generally discarded we got that's got to

725
00:31:24,900 --> 00:31:31,410
start coming back in now right and so

726
00:31:28,440 --> 00:31:32,910
inside well and in fact I guess this

727
00:31:31,410 --> 00:31:35,070
could be just in the entity code itself

728
00:31:32,910 --> 00:31:38,400
I really don't know exactly where I want

729
00:31:35,069 --> 00:31:39,808
it to be completely honest with you but

730
00:31:38,400 --> 00:31:41,550
what I'm gonna do for now just say all

731
00:31:39,808 --> 00:31:43,500
right let's just say

732
00:31:41,549 --> 00:31:46,889
there's gonna be this call I don't know

733
00:31:43,500 --> 00:31:49,319
where it's gonna live we can get to all

734
00:31:46,890 --> 00:31:50,850
that later but for now what I want to do

735
00:31:49,319 --> 00:31:54,539
is have this little entity death

736
00:31:50,849 --> 00:31:56,519
situation going on in here and all I

737
00:31:54,539 --> 00:32:00,119
really want to do now is just have some

738
00:31:56,519 --> 00:32:02,009
way of creating that ground cover every

739
00:32:00,119 --> 00:32:05,009
time one of these entities comes into

740
00:32:02,009 --> 00:32:06,269
existence and so you know creating the

741
00:32:05,009 --> 00:32:10,500
ground cover is gonna be pretty simple

742
00:32:06,269 --> 00:32:20,339
at least at first I actually have a kind

743
00:32:10,500 --> 00:32:24,690
of so if you go out here and look on the

744
00:32:20,339 --> 00:32:27,389
interwebs on my blog for example I did a

745
00:32:24,690 --> 00:32:30,660
bunch of stuff with grass generation and

746
00:32:27,390 --> 00:32:32,400
ground cover for the witness which is if

747
00:32:30,660 --> 00:32:36,660
you've never heard of it it's a game

748
00:32:32,400 --> 00:32:42,540
it's a game by Jonathan Blow that does

749
00:32:36,660 --> 00:32:43,980
like it's a it's a complete 3d world

750
00:32:42,539 --> 00:32:47,190
like walk around kind of like

751
00:32:43,980 --> 00:32:48,870
first-person he sort of game and so the

752
00:32:47,190 --> 00:32:50,850
on the ground there's lots of grasses

753
00:32:48,869 --> 00:32:52,859
and flowers and things like this and

754
00:32:50,849 --> 00:32:57,809
there was a planting system that there

755
00:32:52,859 --> 00:32:59,579
level editor had in it and so I did the

756
00:32:57,809 --> 00:33:02,159
replacement for that it was very slow

757
00:32:59,579 --> 00:33:04,559
and had a bunch of problems so I did the

758
00:33:02,160 --> 00:33:05,670
replacement version and while I was

759
00:33:04,559 --> 00:33:08,490
doing that there are a couple things

760
00:33:05,670 --> 00:33:13,470
that I looked into this particular one

761
00:33:08,490 --> 00:33:14,880
here was sort of a separate thing I

762
00:33:13,470 --> 00:33:16,710
figured out after the fact doesn't

763
00:33:14,880 --> 00:33:18,240
actually appear in the witness so this

764
00:33:16,710 --> 00:33:21,150
this particular pattern doesn't appear

765
00:33:18,240 --> 00:33:25,620
in the witness but this whole series you

766
00:33:21,150 --> 00:33:27,450
can see actually here we go starting at

767
00:33:25,619 --> 00:33:29,729
visually pleasing distributions this

768
00:33:27,450 --> 00:33:31,680
whole series kind of talks about the

769
00:33:29,730 --> 00:33:33,720
subtle aspects of ground planting and

770
00:33:31,680 --> 00:33:34,140
how you want to do them and that sort of

771
00:33:33,720 --> 00:33:38,309
stuff

772
00:33:34,140 --> 00:33:39,900
so yeah take a look at that if you're if

773
00:33:38,309 --> 00:33:41,369
you're interested in I talked about like

774
00:33:39,900 --> 00:33:43,500
blue noise and stuff like that and

775
00:33:41,369 --> 00:33:46,199
things we'll cover here on here a little

776
00:33:43,500 --> 00:33:48,119
bit probably too anyway you can spend a

777
00:33:46,200 --> 00:33:49,860
lot of time on grass packing on grass

778
00:33:48,119 --> 00:33:51,779
distribution stuff I don't know to what

779
00:33:49,859 --> 00:33:53,699
extent I really want to do that much

780
00:33:51,779 --> 00:33:54,599
with that on stream but point being

781
00:33:53,700 --> 00:33:56,429
we'll do something

782
00:33:54,599 --> 00:33:57,689
probably better than white noise which

783
00:33:56,429 --> 00:34:02,130
is the very worst kind of grass

784
00:33:57,690 --> 00:34:04,500
distribution and so we're gonna start

785
00:34:02,130 --> 00:34:05,970
with white noise and later probably

786
00:34:04,500 --> 00:34:06,419
replace it again because I said it's

787
00:34:05,970 --> 00:34:08,970
terrible

788
00:34:06,419 --> 00:34:11,338
so if I wanted to do that I need some

789
00:34:08,969 --> 00:34:13,888
way of creating a random distribution of

790
00:34:11,338 --> 00:34:15,480
grass on this thing I'm just gonna hack

791
00:34:13,889 --> 00:34:17,818
in some of that right now so that we

792
00:34:15,480 --> 00:34:20,789
could start testing this stuff out if I

793
00:34:17,818 --> 00:34:22,489
go in here and look at how we're storing

794
00:34:20,789 --> 00:34:24,659
this right I've got a ground cover thing

795
00:34:22,489 --> 00:34:26,489
we go up and look at the ground cover

796
00:34:24,659 --> 00:34:30,690
it's got you know what bitmap did you

797
00:34:26,489 --> 00:34:33,598
want on there what was the location how

798
00:34:30,690 --> 00:34:36,628
big was it and what color was it right

799
00:34:33,599 --> 00:34:37,889
and a guy I think we're gonna we're

800
00:34:36,628 --> 00:34:40,259
gonna go through a couple iterations of

801
00:34:37,889 --> 00:34:42,720
this so don't fixate on that this is

802
00:34:40,260 --> 00:34:45,629
just one way that we're gonna put that

803
00:34:42,719 --> 00:34:48,898
in there but it's yeah things will

804
00:34:45,628 --> 00:34:50,309
things will progress from here because

805
00:34:48,898 --> 00:34:51,719
we're still we're gonna want to simplify

806
00:34:50,309 --> 00:34:54,449
the amount of work we're doing for some

807
00:34:51,719 --> 00:34:56,068
of this stuff anyways so I want to do a

808
00:34:54,449 --> 00:34:58,529
couple things one is I do want this to

809
00:34:56,068 --> 00:35:00,659
be time function because I do want to

810
00:34:58,530 --> 00:35:02,640
know if our unpack fills are taking too

811
00:35:00,659 --> 00:35:04,108
long if we if we start putting more

812
00:35:02,639 --> 00:35:05,489
complicated stuff that goes on in here I

813
00:35:04,108 --> 00:35:07,650
want to see that show up on the profile

814
00:35:05,489 --> 00:35:11,039
is a separate issue and not bury it in

815
00:35:07,650 --> 00:35:12,389
some other buddies timing so what I want

816
00:35:11,039 --> 00:35:14,849
to do is distribute the ground cover

817
00:35:12,389 --> 00:35:16,559
here I don't know how we want to pick

818
00:35:14,849 --> 00:35:20,640
that amount but for now I'm just gonna

819
00:35:16,559 --> 00:35:23,608
do the maximum amount so we're gonna

820
00:35:20,639 --> 00:35:25,170
actually just fill that to the brim and

821
00:35:23,608 --> 00:35:27,088
we especially I think we want to do that

822
00:35:25,170 --> 00:35:29,550
at first to get cuz we're gonna want to

823
00:35:27,088 --> 00:35:31,380
stress the system see it'd be really

824
00:35:29,550 --> 00:35:33,150
slow and then improve it so it's nice

825
00:35:31,380 --> 00:35:35,369
and fast and that kind stuff so I'm

826
00:35:33,150 --> 00:35:37,920
gonna go with the maximum count for the

827
00:35:35,369 --> 00:35:39,869
ground cover right now and just let that

828
00:35:37,920 --> 00:35:42,630
be sort of the the high-water mark for

829
00:35:39,869 --> 00:35:45,780
her slowness and then we'll we'll pull

830
00:35:42,630 --> 00:35:47,910
it back all right so we've got the cover

831
00:35:45,780 --> 00:35:49,500
index here we're gonna loop over those

832
00:35:47,909 --> 00:35:54,809
and we're gonna fill each of these as we

833
00:35:49,500 --> 00:35:57,929
go so here's a you know here's where the

834
00:35:54,809 --> 00:36:02,750
ground cover goes this thing is going to

835
00:35:57,929 --> 00:36:02,750
need some kind of a random point

836
00:36:03,338 --> 00:36:10,009
it's gonna need one of those bitmaps

837
00:36:05,528 --> 00:36:13,400
right it's gonna need a color and it's

838
00:36:10,009 --> 00:36:15,650
gonna need a scale and so at first you

839
00:36:13,400 --> 00:36:18,619
know we can't just keep this pretty

840
00:36:15,650 --> 00:36:19,880
simple this is gonna be the thing we're

841
00:36:18,619 --> 00:36:22,278
gonna have to randomize for the

842
00:36:19,880 --> 00:36:24,019
placement but that shouldn't be too hard

843
00:36:22,278 --> 00:36:24,949
and then the bitmap is a little bit more

844
00:36:24,018 --> 00:36:29,118
complicated because we're gonna need

845
00:36:24,949 --> 00:36:33,588
some sort of a idea about where these

846
00:36:29,119 --> 00:36:35,298
bitmaps actually are right we're gonna

847
00:36:33,588 --> 00:36:38,088
have to do something where we pick sort

848
00:36:35,298 --> 00:36:41,088
of you know ask the the asset matcher to

849
00:36:38,088 --> 00:36:42,440
find where where these crafts bitmaps

850
00:36:41,088 --> 00:36:43,670
are and figure out which ones we're

851
00:36:42,440 --> 00:36:46,759
putting in there and why and that sort

852
00:36:43,670 --> 00:36:48,469
of stuff so we need to do those two and

853
00:36:46,759 --> 00:36:51,858
that'll be most of what we're gonna do

854
00:36:48,469 --> 00:36:54,108
however obviously when we're filling an

855
00:36:51,858 --> 00:36:56,179
unpacked NNE not everybody gets ground

856
00:36:54,108 --> 00:36:59,869
cover only the actual grass tiles or

857
00:36:56,179 --> 00:37:01,639
other tiles that we deem suitable for

858
00:36:59,869 --> 00:37:03,528
having crap scattered on them and

859
00:37:01,639 --> 00:37:05,358
remember we may want this system to do

860
00:37:03,528 --> 00:37:09,099
other stuff like scatter rocks around

861
00:37:05,358 --> 00:37:10,429
the dungeon or splotchy little stains

862
00:37:09,099 --> 00:37:13,400
bloodstains

863
00:37:10,429 --> 00:37:16,448
who knows how gruesome they can get when

864
00:37:13,400 --> 00:37:18,559
Krampus is involved but point being we

865
00:37:16,449 --> 00:37:20,180
will probably use the ground cover

866
00:37:18,559 --> 00:37:22,729
system for more than just grass as well

867
00:37:20,179 --> 00:37:25,368
but either way the point is not everyone

868
00:37:22,728 --> 00:37:27,379
gets it only entities that are supposed

869
00:37:25,369 --> 00:37:31,309
to have ground cover get them and that

870
00:37:27,380 --> 00:37:32,869
particular ground cover probably wants

871
00:37:31,309 --> 00:37:35,089
to come from a set of ground covers and

872
00:37:32,869 --> 00:37:37,548
also maybe have some settings on it

873
00:37:35,088 --> 00:37:39,708
about what it should actually be and so

874
00:37:37,548 --> 00:37:42,380
in here I want to store that information

875
00:37:39,708 --> 00:37:44,328
I'm going to say that maybe we've got

876
00:37:42,380 --> 00:37:47,509
some information here that tells us

877
00:37:44,329 --> 00:37:51,109
about how our ground cover works so like

878
00:37:47,509 --> 00:37:54,469
we've got something like the density

879
00:37:51,108 --> 00:37:58,788
value maybe I don't know

880
00:37:54,469 --> 00:38:04,778
and then we probably have a type of

881
00:37:58,789 --> 00:38:09,799
ground cover that needs to be there um

882
00:38:04,778 --> 00:38:12,548
here's what I will say I don't actually

883
00:38:09,798 --> 00:38:12,548
know

884
00:38:20,039 --> 00:38:31,949
I don't actually know how we want to do

885
00:38:25,230 --> 00:38:33,690
this exactly when we look at our let me

886
00:38:31,949 --> 00:38:35,399
load up our tags files cuz I just don't

887
00:38:33,690 --> 00:38:36,659
I don't even remember what we've got I

888
00:38:35,400 --> 00:38:37,889
know we've got ground cover in there

889
00:38:36,659 --> 00:38:42,629
he's got some grasses and some I don't

890
00:38:37,889 --> 00:38:46,559
remember what we did with it so here's

891
00:38:42,630 --> 00:38:50,610
our tags file I and so somewhere in here

892
00:38:46,559 --> 00:38:57,150
we've got some like grass and crap here

893
00:38:50,610 --> 00:39:03,090
we go so we have like grass one two and

894
00:38:57,150 --> 00:39:04,800
three we've got some rocks I'm not sure

895
00:39:03,090 --> 00:39:06,990
what Puffs are let's take a look at

896
00:39:04,800 --> 00:39:08,160
these actual files because like I said I

897
00:39:06,989 --> 00:39:12,389
don't really remember what we've got

898
00:39:08,159 --> 00:39:20,969
here we've really never looked at these

899
00:39:12,389 --> 00:39:24,210
before so sources base game arts so it's

900
00:39:20,969 --> 00:39:36,059
in the particles section here fire grass

901
00:39:24,210 --> 00:39:40,500
this stuff so it looks like grass yeah I

902
00:39:36,059 --> 00:39:42,239
don't know I think these can just be

903
00:39:40,500 --> 00:39:44,789
fairly interchangeable so you know it

904
00:39:42,239 --> 00:39:47,369
looks like these are maybe little

905
00:39:44,789 --> 00:39:51,949
splotchy things whereas this looks like

906
00:39:47,369 --> 00:39:56,730
thicker cover maybe these are flowers

907
00:39:51,949 --> 00:39:58,469
right so I'm not sure really want it

908
00:39:56,730 --> 00:39:59,909
let's look at those rocks though okay so

909
00:39:58,469 --> 00:40:05,009
the rocks are kind of like more

910
00:39:59,909 --> 00:40:06,690
occasional scattering so I don't really

911
00:40:05,010 --> 00:40:14,610
know how I want to do this but I'm just

912
00:40:06,690 --> 00:40:16,139
gonna go I'm assuming this for now so

913
00:40:14,610 --> 00:40:17,670
I'm going to do a cover type thing and

914
00:40:16,139 --> 00:40:20,089
I'm just gonna say look we're gonna have

915
00:40:17,670 --> 00:40:20,090
a field

916
00:40:24,539 --> 00:40:29,309
and then I'm just gonna sign craft of

917
00:40:26,278 --> 00:40:36,719
the field because I don't know right let

918
00:40:29,309 --> 00:40:38,849
me do it this way and so I'm just gonna

919
00:40:36,719 --> 00:40:41,308
make a few cover types here that I might

920
00:40:38,849 --> 00:40:50,599
want and so I'm gonna say look if you

921
00:40:41,309 --> 00:40:50,599
want you know thick grass brass watch

922
00:40:52,219 --> 00:41:04,889
and rocks I think that's what we've got

923
00:40:56,730 --> 00:41:06,960
at the moment Oh flowers I'm just gonna

924
00:41:04,889 --> 00:41:07,679
say we got a bit field and that has that

925
00:41:06,960 --> 00:41:10,099
in there

926
00:41:07,679 --> 00:41:14,429
and then what I'm going to say is that

927
00:41:10,099 --> 00:41:16,950
that density value I guess tells you

928
00:41:14,429 --> 00:41:18,748
what that is like how dense you want to

929
00:41:16,949 --> 00:41:21,808
be although now that I think of well you

930
00:41:18,748 --> 00:41:23,038
know now that I think about it that

931
00:41:21,809 --> 00:41:24,839
doesn't really work particularly well

932
00:41:23,039 --> 00:41:28,559
does it because you probably want to set

933
00:41:24,838 --> 00:41:31,068
the density differently for each type of

934
00:41:28,559 --> 00:41:34,109
cover that you wanted to splat on there

935
00:41:31,068 --> 00:41:44,099
so thinking about it you probably want

936
00:41:34,108 --> 00:41:46,170
something like this or like that and you

937
00:41:44,099 --> 00:41:47,970
probably want to say that it's going to

938
00:41:46,170 --> 00:41:49,230
be some kind of a packs value that gives

939
00:41:47,969 --> 00:41:53,459
you both of those pieces of information

940
00:41:49,230 --> 00:42:01,818
like separately right so you probably

941
00:41:53,460 --> 00:42:06,329
want something like this maybe

942
00:42:01,818 --> 00:42:11,989
does that seem reasonable and so then

943
00:42:06,329 --> 00:42:11,989
you would do something more like Grande

944
00:42:16,710 --> 00:42:20,949
so the cover types again I shouldn't

945
00:42:19,360 --> 00:42:22,960
have deleted those there they're just

946
00:42:20,949 --> 00:42:24,219
you know they're the same they're just

947
00:42:22,960 --> 00:42:25,690
not gonna be bit fields anymore they're

948
00:42:24,219 --> 00:42:37,389
just an int that tells you which one

949
00:42:25,690 --> 00:42:39,159
you've got something like this and so

950
00:42:37,389 --> 00:42:40,299
you can have 256 different types of

951
00:42:39,159 --> 00:42:43,089
ground cover

952
00:42:40,300 --> 00:42:46,990
well technically 255 one of them is non

953
00:42:43,090 --> 00:42:48,220
cover and then you can send a density

954
00:42:46,989 --> 00:42:50,669
value and that density value will mean

955
00:42:48,219 --> 00:42:54,129
something but I don't know what

956
00:42:50,670 --> 00:42:57,700
and so each entity can get that piece of

957
00:42:54,130 --> 00:42:59,740
information right so the ground cover

958
00:42:57,699 --> 00:43:02,289
type here density might just be how many

959
00:42:59,739 --> 00:43:04,629
there are at this point for us as well

960
00:43:02,289 --> 00:43:07,090
so something like that so anyway inside

961
00:43:04,630 --> 00:43:09,430
the ground cover type thing we'd pick

962
00:43:07,090 --> 00:43:15,460
one of those and then you know over when

963
00:43:09,429 --> 00:43:18,489
we're doing we're doing this this can be

964
00:43:15,460 --> 00:43:20,320
a loop itself that's sort of like let me

965
00:43:18,489 --> 00:43:22,239
loop over the ground covers that are

966
00:43:20,320 --> 00:43:28,990
specified for this particular place and

967
00:43:22,239 --> 00:43:32,079
we'll boot them forth right and so like

968
00:43:28,989 --> 00:43:36,039
yeah you get some number of this you can

969
00:43:32,079 --> 00:43:38,710
you can splooge on there and after you

970
00:43:36,039 --> 00:43:47,050
do each of those you're done right so

971
00:43:38,710 --> 00:43:49,240
okay seems reasonable to me so what I

972
00:43:47,050 --> 00:43:51,010
want to do now is say all right in that

973
00:43:49,239 --> 00:43:54,989
case the way that this is going to work

974
00:43:51,010 --> 00:43:54,990
is more like this

975
00:44:02,289 --> 00:44:15,259
loop over each of the cover specs that

976
00:44:04,849 --> 00:44:16,699
we have exhale so we're going to go

977
00:44:15,260 --> 00:44:19,760
through each one of the ground cover

978
00:44:16,699 --> 00:44:23,629
specs and we're going to process them in

979
00:44:19,760 --> 00:44:30,200
order if we hit the end of the amount we

980
00:44:23,630 --> 00:44:39,289
can store which would be this we want to

981
00:44:30,199 --> 00:44:43,239
stop then as well and then here actually

982
00:44:39,289 --> 00:44:43,239
I suppose we can just put that one here

983
00:44:52,599 --> 00:45:06,019
so this would be our complete set now

984
00:45:03,730 --> 00:45:07,940
we're gonna know ahead of time like we

985
00:45:06,019 --> 00:45:09,590
don't really have to do this check-in

986
00:45:07,940 --> 00:45:12,170
line because we are gonna know ahead of

987
00:45:09,590 --> 00:45:14,180
time where that would actually be so for

988
00:45:12,170 --> 00:45:17,230
example what we could do instead is say

989
00:45:14,179 --> 00:45:21,500
all right let's get that density count

990
00:45:17,230 --> 00:45:26,539
out of the spec first right then let's

991
00:45:21,500 --> 00:45:31,039
say alright how much room would there be

992
00:45:26,539 --> 00:45:32,480
if we if we were to use all of the

993
00:45:31,039 --> 00:45:35,029
remaining space in the ground cover

994
00:45:32,480 --> 00:45:38,929
array and we can just clamp that density

995
00:45:35,030 --> 00:45:41,690
count down from there right so if I did

996
00:45:38,929 --> 00:45:43,099
a thing that said like in fact here I'll

997
00:45:41,690 --> 00:45:45,320
do it this way this would be the easiest

998
00:45:43,099 --> 00:45:47,569
way if I just said look the density

999
00:45:45,320 --> 00:45:54,789
count is going to be however much room I

1000
00:45:47,570 --> 00:45:57,650
could afford at the moment - how much I

1001
00:45:54,789 --> 00:46:01,400
have used so far that's how much you're

1002
00:45:57,650 --> 00:46:04,940
going to put here but if the spec

1003
00:46:01,400 --> 00:46:07,550
density is actually less than that right

1004
00:46:04,940 --> 00:46:10,630
so meaning if the density count would

1005
00:46:07,550 --> 00:46:12,859
exceed how many I was asked to plant

1006
00:46:10,630 --> 00:46:15,440
then just clamp it

1007
00:46:12,858 --> 00:46:17,298
and you may ask why do that well the

1008
00:46:15,440 --> 00:46:18,920
reason is because if I clamp the value

1009
00:46:17,298 --> 00:46:21,498
first then it doesn't have to check it

1010
00:46:18,920 --> 00:46:24,889
every time to the array after the loop

1011
00:46:21,498 --> 00:46:27,828
it can just check it once right and then

1012
00:46:24,889 --> 00:46:30,920
we do both of our checks with one if

1013
00:46:27,829 --> 00:46:34,430
right it just simplifies the code for

1014
00:46:30,920 --> 00:46:36,230
the CPU so basically you just pick the

1015
00:46:34,429 --> 00:46:37,489
minimum of the two here and then when

1016
00:46:36,230 --> 00:46:42,769
you do your loop you're only looping

1017
00:46:37,489 --> 00:46:44,480
over one and off we go so when we do our

1018
00:46:42,768 --> 00:46:47,568
ground cover

1019
00:46:44,480 --> 00:46:49,940
now we're assigning it across multiple

1020
00:46:47,568 --> 00:46:52,150
specs as well which is nice and this

1021
00:46:49,940 --> 00:46:55,880
doesn't have to be here anymore either

1022
00:46:52,150 --> 00:46:59,180
so that can go away and so I think

1023
00:46:55,880 --> 00:47:03,108
that's all good now what we want to do

1024
00:46:59,179 --> 00:47:05,960
is actually pull out that spec I never

1025
00:47:03,108 --> 00:47:10,400
actually did that also we now no longer

1026
00:47:05,960 --> 00:47:17,989
need these two and so here I want to

1027
00:47:10,400 --> 00:47:19,730
pull out the spec in question and now we

1028
00:47:17,989 --> 00:47:22,880
have I think what's completely

1029
00:47:19,730 --> 00:47:24,769
functional for all our n DS and this

1030
00:47:22,880 --> 00:47:27,039
loop will never get entered because

1031
00:47:24,768 --> 00:47:30,348
nobody will have set any ground cover on

1032
00:47:27,039 --> 00:47:33,319
themselves so we won't generate any and

1033
00:47:30,349 --> 00:47:34,849
that's fine however if we actually did

1034
00:47:33,318 --> 00:47:36,440
want to generate some we're gonna need

1035
00:47:34,849 --> 00:47:39,220
some additional stuff here to finish

1036
00:47:36,440 --> 00:47:42,349
which is the spit map and the placement

1037
00:47:39,219 --> 00:47:44,028
gonna start with white noise on the

1038
00:47:42,349 --> 00:47:46,160
placement which is again white noise is

1039
00:47:44,028 --> 00:47:49,690
just purely like is what you might call

1040
00:47:46,159 --> 00:47:51,949
real entropy it's white noise is an

1041
00:47:49,690 --> 00:47:54,769
unpredictable completely unpredictable

1042
00:47:51,949 --> 00:47:56,268
value obviously we can't get completely

1043
00:47:54,768 --> 00:47:59,659
unpredictable values out of computer

1044
00:47:56,268 --> 00:48:01,098
really Intel claims that they sort of

1045
00:47:59,659 --> 00:48:02,899
can on their processor but I don't know

1046
00:48:01,099 --> 00:48:07,460
how true that is

1047
00:48:02,900 --> 00:48:09,889
either way white noise is literally

1048
00:48:07,460 --> 00:48:12,489
random in the truest sense of the word

1049
00:48:09,889 --> 00:48:16,909
it's trying to just be completely

1050
00:48:12,489 --> 00:48:20,150
unstructured grass in the real world is

1051
00:48:16,909 --> 00:48:23,808
not completely unstructured you will not

1052
00:48:20,150 --> 00:48:25,519
have be as likely for two Tufts of grass

1053
00:48:23,809 --> 00:48:26,660
to appear directly next to each other

1054
00:48:25,518 --> 00:48:29,298
because they're competing

1055
00:48:26,659 --> 00:48:32,929
for sunshine and rain so you will much

1056
00:48:29,298 --> 00:48:35,750
likely much more likely see grass based

1057
00:48:32,929 --> 00:48:39,199
at sort of regular distances but

1058
00:48:35,750 --> 00:48:42,710
irregular patterns which again is a more

1059
00:48:39,199 --> 00:48:44,538
blue blue noise like pattern which is to

1060
00:48:42,710 --> 00:48:48,259
say randomness constrained by

1061
00:48:44,539 --> 00:48:50,240
non-overlapping that is how organic

1062
00:48:48,259 --> 00:48:52,579
things tend to grow again because they

1063
00:48:50,239 --> 00:48:54,500
compete for space and resources so they

1064
00:48:52,579 --> 00:48:56,539
tend to grow into cellular like patterns

1065
00:48:54,500 --> 00:48:57,559
that are distributed so we would

1066
00:48:56,539 --> 00:48:59,839
probably want to move to a more blue

1067
00:48:57,559 --> 00:49:02,059
noise pattern or something like that as

1068
00:48:59,838 --> 00:49:04,308
we go forward but for right now we're

1069
00:49:02,059 --> 00:49:05,569
just going to use pure entropy in order

1070
00:49:04,309 --> 00:49:07,759
to do put your entropy we need to be

1071
00:49:05,568 --> 00:49:12,380
able to pick a random point on top of

1072
00:49:07,759 --> 00:49:16,969
this entity here and so to do that we

1073
00:49:12,380 --> 00:49:22,150
need our random series so we have our

1074
00:49:16,969 --> 00:49:22,149
random series let's see here

1075
00:49:30,318 --> 00:49:35,719
so we don't really need to do a

1076
00:49:32,358 --> 00:49:37,219
four-wide randomizer just yet we have

1077
00:49:35,719 --> 00:49:39,318
one here that does four at a time

1078
00:49:37,219 --> 00:49:43,130
obviously that's going to be a fancier

1079
00:49:39,318 --> 00:49:44,358
version that would be faster right so I

1080
00:49:43,130 --> 00:49:46,669
don't really know that we need to do

1081
00:49:44,358 --> 00:49:50,239
that although I guess we could

1082
00:49:46,668 --> 00:49:56,509
so I maybe we'll just use the the PCG

1083
00:49:50,239 --> 00:49:59,349
for now I don't know maybe we should

1084
00:49:56,509 --> 00:49:59,349
just do four at a time

1085
00:50:00,219 --> 00:50:12,650
maybe we should so I guess what I'll do

1086
00:50:09,380 --> 00:50:13,999
is we will we will do a random seed with

1087
00:50:12,650 --> 00:50:17,150
the random series and we'll I guess

1088
00:50:13,998 --> 00:50:19,098
we'll do forward time I guess

1089
00:50:17,150 --> 00:50:22,699
so we'll do random series and this will

1090
00:50:19,099 --> 00:50:24,919
be our cover series here and what I'm

1091
00:50:22,699 --> 00:50:27,108
going to do is our cover series I'm

1092
00:50:24,918 --> 00:50:31,248
going to initialize when we do the

1093
00:50:27,108 --> 00:50:33,318
random seed so here what I'm going to do

1094
00:50:31,248 --> 00:50:34,759
is I'll use the same stuff we were doing

1095
00:50:33,318 --> 00:50:43,219
here

1096
00:50:34,759 --> 00:50:46,668
so this but what I'd like to do is I'd

1097
00:50:43,219 --> 00:50:49,489
like to seed it with the entity ID as

1098
00:50:46,668 --> 00:50:51,348
like an offset so each entity will get

1099
00:50:49,489 --> 00:50:58,818
its own slightly different random series

1100
00:50:51,349 --> 00:51:02,838
so if I just do this right that produces

1101
00:50:58,818 --> 00:51:05,630
an offset series that gives me a you

1102
00:51:02,838 --> 00:51:09,288
know sort of randomized version for each

1103
00:51:05,630 --> 00:51:11,088
of the entities separately but it also

1104
00:51:09,289 --> 00:51:14,028
means I'll generate the exact same

1105
00:51:11,088 --> 00:51:16,699
ground cover for a given entity every

1106
00:51:14,028 --> 00:51:19,068
time I process that entity which means

1107
00:51:16,699 --> 00:51:21,559
that even if you went off-screen the

1108
00:51:19,068 --> 00:51:23,748
entity got packed you go back find the

1109
00:51:21,559 --> 00:51:25,339
entity again the grass pattern will

1110
00:51:23,748 --> 00:51:26,748
still be exactly the same because it

1111
00:51:25,338 --> 00:51:29,028
will have been generated with the same

1112
00:51:26,748 --> 00:51:31,598
generator and that just helps keep the

1113
00:51:29,028 --> 00:51:33,798
world a little bit more consistent right

1114
00:51:31,599 --> 00:51:36,469
because unless something has happened to

1115
00:51:33,798 --> 00:51:38,119
that particular tile the player wouldn't

1116
00:51:36,469 --> 00:51:41,150
expect the grass pattern on it to change

1117
00:51:38,119 --> 00:51:43,489
because why would it right um so that

1118
00:51:41,150 --> 00:51:43,700
kind of helps us keep the things feeling

1119
00:51:43,489 --> 00:51:47,570
of

1120
00:51:43,699 --> 00:51:50,348
more solid and I might suggest to in

1121
00:51:47,570 --> 00:52:01,010
here that we would potentially want

1122
00:51:50,349 --> 00:52:04,880
something like this something like this

1123
00:52:01,010 --> 00:52:10,780
where we just say oh okay let's do our

1124
00:52:04,880 --> 00:52:14,420
random seed here and then we will just I

1125
00:52:10,780 --> 00:52:30,500
mean basically just this do this for

1126
00:52:14,420 --> 00:52:33,619
anyone who wants it so if something like

1127
00:52:30,500 --> 00:52:37,039
that and that way this sort of thing

1128
00:52:33,619 --> 00:52:38,750
this looks more like that and that way

1129
00:52:37,039 --> 00:52:40,599
we can also like improve this this is

1130
00:52:38,750 --> 00:52:45,139
probably not the best way of doing that

1131
00:52:40,599 --> 00:52:46,519
so we could maybe make this better over

1132
00:52:45,139 --> 00:52:47,719
time and then anyone who needed to do

1133
00:52:46,519 --> 00:52:51,199
stuff like that could just get it this

1134
00:52:47,719 --> 00:52:53,389
way right so I don't know something like

1135
00:52:51,199 --> 00:52:55,368
this so once we have one of these what

1136
00:52:53,389 --> 00:52:59,509
we're gonna need is we've got sort of

1137
00:52:55,369 --> 00:53:01,550
the ability to do random muta laterals

1138
00:52:59,510 --> 00:53:04,490
and random bilaterals and we can get

1139
00:53:01,550 --> 00:53:07,880
that data out you know any time we want

1140
00:53:04,489 --> 00:53:14,199
and so what I want to do here is I would

1141
00:53:07,880 --> 00:53:16,940
like to if possible take the bounding

1142
00:53:14,199 --> 00:53:19,699
rectangle of the top of my entity and

1143
00:53:16,940 --> 00:53:21,800
just pick a random point inside that so

1144
00:53:19,699 --> 00:53:24,078
the question is where actually is that

1145
00:53:21,800 --> 00:53:26,269
right and if we look at the entity

1146
00:53:24,079 --> 00:53:32,810
structure I believe that what that

1147
00:53:26,269 --> 00:53:35,690
amounts to is in here we have the

1148
00:53:32,809 --> 00:53:39,469
position of the entity right so we're

1149
00:53:35,690 --> 00:53:45,039
gonna start with entity P and then we

1150
00:53:39,469 --> 00:53:48,858
have a collision volume that specifies

1151
00:53:45,039 --> 00:53:55,940
where you know what the bounds are

1152
00:53:48,858 --> 00:53:57,500
relative to relative to that P so we

1153
00:53:55,940 --> 00:54:00,349
know that we would

1154
00:53:57,500 --> 00:54:03,079
like you know get min corner or

1155
00:54:00,349 --> 00:54:04,759
something of collision volume right or

1156
00:54:03,079 --> 00:54:08,119
something like that would get us to like

1157
00:54:04,760 --> 00:54:17,060
the bottom of it or I could do get max

1158
00:54:08,119 --> 00:54:19,639
corner so I can do various stuff or I

1159
00:54:17,059 --> 00:54:26,509
like pick out of the the collision

1160
00:54:19,639 --> 00:54:28,219
volume but I thought so we have a way of

1161
00:54:26,510 --> 00:54:34,670
mapping in but we don't have a way of

1162
00:54:28,219 --> 00:54:35,989
mapping out we went through this exact

1163
00:54:34,670 --> 00:54:37,340
code before we should have made a

1164
00:54:35,989 --> 00:54:50,869
function for it because we're just doing

1165
00:54:37,340 --> 00:54:53,180
the same darn thing again right so when

1166
00:54:50,869 --> 00:54:56,989
we do like when we get the ground points

1167
00:54:53,179 --> 00:55:05,509
right when we when we get the actual

1168
00:54:56,989 --> 00:55:11,659
yeah so you can see here we actually all

1169
00:55:05,510 --> 00:55:13,900
right well I'm gonna go look up that

1170
00:55:11,659 --> 00:55:13,899
code

1171
00:55:20,849 --> 00:55:36,599
and I'm gonna see where we're doing that

1172
00:55:24,449 --> 00:55:40,449
stuff I just want to see if this can be

1173
00:55:36,599 --> 00:55:42,849
put until oh yeah all right well here's

1174
00:55:40,449 --> 00:55:44,889
what I'm gonna do since I've believed I

1175
00:55:42,849 --> 00:55:48,610
wanted this function before I'm gonna

1176
00:55:44,889 --> 00:55:51,190
write it now so that I can have it so we

1177
00:55:48,610 --> 00:55:54,970
have a thing called get barycentric and

1178
00:55:51,190 --> 00:55:56,650
what that does is it takes a point and

1179
00:55:54,969 --> 00:55:58,599
it gives you back the barycentric

1180
00:55:56,650 --> 00:56:02,410
coordinates for that point relative to

1181
00:55:58,599 --> 00:56:08,159
the rectangle right but I kind of want

1182
00:56:02,409 --> 00:56:08,159
the opposite here right I want the like

1183
00:56:10,289 --> 00:56:16,750
this where you kind of give it like

1184
00:56:13,780 --> 00:56:19,269
here's the uvw barycentric coordinates

1185
00:56:16,750 --> 00:56:22,420
here's the rectangle give me out what

1186
00:56:19,269 --> 00:56:24,670
the point would actually be right and so

1187
00:56:22,420 --> 00:56:26,500
when we look at something like this what

1188
00:56:24,670 --> 00:56:33,849
we'd be saying is all right the result

1189
00:56:26,500 --> 00:56:40,960
is going to be the linear blend between

1190
00:56:33,849 --> 00:56:48,269
like the a min X and the a max X along

1191
00:56:40,960 --> 00:56:48,269
the you know T value specified by my uvw

1192
00:56:51,179 --> 00:56:57,699
you see what I'm where I'm getting that

1193
00:56:55,150 --> 00:57:00,220
from so we're just gonna say you give us

1194
00:56:57,699 --> 00:57:01,809
a number between 0 &amp; 1 on each of x y&amp;z

1195
00:57:00,219 --> 00:57:04,239
and we're gonna pick out the point in

1196
00:57:01,809 --> 00:57:06,789
the rectangle that is that point right

1197
00:57:04,239 --> 00:57:08,769
and that just makes it easy to sort of

1198
00:57:06,789 --> 00:57:11,199
say stuff like oh I want to ran a point

1199
00:57:08,769 --> 00:57:13,659
inside this volume pick a random number

1200
00:57:11,199 --> 00:57:18,819
between 0 &amp; 1 on each axis there you go

1201
00:57:13,659 --> 00:57:20,259
right so I believe that that would be

1202
00:57:18,820 --> 00:57:22,720
the easiest way to do it so because then

1203
00:57:20,260 --> 00:57:26,050
I can just say well take the collision

1204
00:57:22,719 --> 00:57:29,049
volume that you've got and then you know

1205
00:57:26,050 --> 00:57:42,400
take our random uvw

1206
00:57:29,050 --> 00:57:45,640
and we're good to go right so we just

1207
00:57:42,400 --> 00:57:49,000
pick three of those and then and then

1208
00:57:45,639 --> 00:57:51,699
we're done now we can see here is

1209
00:57:49,000 --> 00:57:53,289
actually we don't want to ran a point in

1210
00:57:51,699 --> 00:57:54,609
the volume I mean that might be

1211
00:57:53,289 --> 00:57:56,739
interesting for other kinds of cover

1212
00:57:54,610 --> 00:57:59,349
that was like gas or something that was

1213
00:57:56,739 --> 00:58:01,509
filling up a volume but we're only

1214
00:57:59,349 --> 00:58:04,630
trying to fill the top so we know that

1215
00:58:01,510 --> 00:58:06,760
actually we only ever want this value to

1216
00:58:04,630 --> 00:58:09,460
be one because the Z value should be the

1217
00:58:06,760 --> 00:58:12,010
highest it always can be so we only

1218
00:58:09,460 --> 00:58:18,789
actually want randomness on these two

1219
00:58:12,010 --> 00:58:21,100
right makes sense and so now we've got

1220
00:58:18,789 --> 00:58:23,170
our random point distributor so the

1221
00:58:21,099 --> 00:58:25,690
final thing we need is an actual bitmap

1222
00:58:23,170 --> 00:58:28,269
here and again that bitmap is going to

1223
00:58:25,690 --> 00:58:30,159
come from the cover spec so what we want

1224
00:58:28,269 --> 00:58:32,349
to do here is figure out is the spec

1225
00:58:30,159 --> 00:58:37,329
actually something we want so if the

1226
00:58:32,349 --> 00:58:39,099
spec what's that called type if the spec

1227
00:58:37,329 --> 00:58:40,719
type is valid then it says you know it's

1228
00:58:39,099 --> 00:58:42,849
actually something we want if it's set

1229
00:58:40,719 --> 00:58:46,449
to zero then that means this isn't used

1230
00:58:42,849 --> 00:58:48,250
this ground cover isn't used right so

1231
00:58:46,449 --> 00:58:50,169
once we test it what we then want to do

1232
00:58:48,250 --> 00:58:55,000
is say let's we need to sort of have

1233
00:58:50,170 --> 00:58:58,269
like a bitmap sort of table or however

1234
00:58:55,000 --> 00:59:02,610
you want to look at that for looking up

1235
00:58:58,269 --> 00:59:08,920
the various ground covers that we have

1236
00:59:02,610 --> 00:59:13,030
and there's a few ways we might want to

1237
00:59:08,920 --> 00:59:14,829
do this it's kind of it's kind of one of

1238
00:59:13,030 --> 00:59:16,990
those places where we've said many times

1239
00:59:14,829 --> 00:59:21,449
we need to read you how we how our tag

1240
00:59:16,989 --> 00:59:23,889
matching works and that's very very true

1241
00:59:21,449 --> 00:59:26,889
because I don't think we want to on

1242
00:59:23,889 --> 00:59:28,809
every bitmap actually make the call to

1243
00:59:26,889 --> 00:59:33,250
do the asset matching because calling it

1244
00:59:28,809 --> 00:59:34,509
64 times it's way too many times so what

1245
00:59:33,250 --> 00:59:36,309
you really want is just a table that you

1246
00:59:34,510 --> 00:59:38,500
can look up in and get those variants

1247
00:59:36,309 --> 00:59:42,250
more quickly where you just pick a

1248
00:59:38,500 --> 00:59:42,909
random number in that zone I'll start

1249
00:59:42,250 --> 00:59:46,989
with the crap

1250
00:59:42,909 --> 00:59:49,929
version which doesn't do that and then

1251
00:59:46,989 --> 00:59:51,519
we'll go from there so if I look at the

1252
00:59:49,929 --> 00:59:55,568
code just slightly above this particular

1253
00:59:51,519 --> 00:59:59,798
code you can see us doing the bitmap

1254
00:59:55,568 --> 01:00:03,009
retrieval using the matching vector so

1255
00:59:59,798 --> 01:00:09,159
you know you can see this here like this

1256
01:00:03,010 --> 01:00:11,710
for example and so here we don't have

1257
01:00:09,159 --> 01:00:13,899
really any other information at the

1258
01:00:11,710 --> 01:00:18,568
moment except for the fact that we've

1259
01:00:13,900 --> 01:00:21,490
got a variant here and the weight vector

1260
01:00:18,568 --> 01:00:23,500
wants to do that too

1261
01:00:21,489 --> 01:00:26,288
and what we're gonna do is the match

1262
01:00:23,500 --> 01:00:28,329
vectors variant part itself will just

1263
01:00:26,289 --> 01:00:30,819
have to be randomized every time so each

1264
01:00:28,329 --> 01:00:34,630
time through here we would do random

1265
01:00:30,818 --> 01:00:38,889
unilateral and we would send the cover

1266
01:00:34,630 --> 01:00:45,630
series down when we actually then go in

1267
01:00:38,889 --> 01:00:47,889
to get a get mass get the best bit map

1268
01:00:45,630 --> 01:00:50,410
this is the code that would have to

1269
01:00:47,889 --> 01:00:58,269
actually run right and so this asset

1270
01:00:50,409 --> 01:01:02,909
category thing here is go this asset

1271
01:00:58,269 --> 01:01:10,929
basic category and that's just gonna be

1272
01:01:02,909 --> 01:01:14,219
particle I believe and then the rest of

1273
01:01:10,929 --> 01:01:19,028
this is is all good right

1274
01:01:14,219 --> 01:01:22,078
okay so because we have to do asset

1275
01:01:19,028 --> 01:01:26,199
queries in here to assign these bitmaps

1276
01:01:22,079 --> 01:01:29,500
that does also mean that when we're in

1277
01:01:26,199 --> 01:01:35,469
here I we're gonna need that asset

1278
01:01:29,500 --> 01:01:37,510
system and so that's gonna create a

1279
01:01:35,469 --> 01:01:39,129
little bit of a call chain issue for us

1280
01:01:37,510 --> 01:01:41,049
so we're gonna have to make sure we pipe

1281
01:01:39,130 --> 01:01:43,990
that through properly but otherwise

1282
01:01:41,048 --> 01:01:46,298
that's what we would want to do now the

1283
01:01:43,989 --> 01:01:48,729
rest of this stuff facing Direction is

1284
01:01:46,298 --> 01:01:51,608
not really what we want to be pulling

1285
01:01:48,730 --> 01:01:56,019
out there so what we want to do here is

1286
01:01:51,608 --> 01:01:56,769
we actually want to do sort of a switch

1287
01:01:56,019 --> 01:02:00,219
statement on

1288
01:01:56,769 --> 01:02:04,420
spec type here where we actually look at

1289
01:02:00,219 --> 01:02:07,989
these ground cover types I defines and

1290
01:02:04,420 --> 01:02:09,970
we want to see which ones of them we

1291
01:02:07,989 --> 01:02:21,939
want to say how they're gonna get looked

1292
01:02:09,969 --> 01:02:24,129
up right so we've got rocks flowers

1293
01:02:21,940 --> 01:02:27,309
thick grass and splotch grass we can go

1294
01:02:24,130 --> 01:02:30,220
into the HST and see what those are set

1295
01:02:27,309 --> 01:02:32,710
to and so here you know you can see

1296
01:02:30,219 --> 01:02:36,369
we've got cover set and then we've got

1297
01:02:32,710 --> 01:02:39,460
flowers set and then we've got I guess

1298
01:02:36,369 --> 01:02:45,819
what we where the rocks stone is that

1299
01:02:39,460 --> 01:02:50,889
right um why the flowers aren't set to

1300
01:02:45,820 --> 01:02:55,300
cover I don't know because that seems a

1301
01:02:50,889 --> 01:02:57,489
little bit odd but you know whatevs so

1302
01:02:55,300 --> 01:02:59,110
in this kind of crappy system that we've

1303
01:02:57,489 --> 01:03:02,829
said many times we need to redo and have

1304
01:02:59,110 --> 01:03:07,019
never redone we then need to just kind

1305
01:03:02,829 --> 01:03:07,019
of laborious ly fill this garbage out

1306
01:03:15,929 --> 01:03:27,429
all right so uh we need something like

1307
01:03:21,429 --> 01:03:29,649
this and you're gonna see how

1308
01:03:27,429 --> 01:03:32,379
ridiculously crappy this is I mean like

1309
01:03:29,650 --> 01:03:34,980
this is not gonna stay in the game it's

1310
01:03:32,380 --> 01:03:39,730
just a terrible idea for so many reasons

1311
01:03:34,980 --> 01:03:44,050
um but you know got stuck with what we

1312
01:03:39,730 --> 01:03:46,059
have for now so in here we got a look at

1313
01:03:44,050 --> 01:03:47,940
this weight vector here and say okay for

1314
01:03:46,059 --> 01:03:52,980
Rox what is it that we're going to use

1315
01:03:47,940 --> 01:04:04,200
so for here we want tag Rox

1316
01:03:52,980 --> 01:04:11,170
why is that not a thing oh it was stone

1317
01:04:04,199 --> 01:04:22,719
cover and sighs actually I don't think

1318
01:04:11,170 --> 01:04:23,800
we need the size for this one right we

1319
01:04:22,719 --> 01:04:27,489
don't care about size because there's

1320
01:04:23,800 --> 01:04:30,030
only one size of rocks at the moment so

1321
01:04:27,489 --> 01:04:30,029
there are flowers

1322
01:04:35,619 --> 01:04:48,099
looks like it's just that for here we've

1323
01:04:43,780 --> 01:04:52,510
got cover and oddly enough there's

1324
01:04:48,099 --> 01:05:00,639
nothing else on it seems bad shouldn't

1325
01:04:52,510 --> 01:05:04,680
it at least be labeled like grass and I

1326
01:05:00,639 --> 01:05:04,679
my totally off-base here

1327
01:05:17,639 --> 01:05:32,009
so splotch grass was the smaller one and

1328
01:05:21,509 --> 01:05:32,789
thick grass was the larger one and off

1329
01:05:32,009 --> 01:05:35,338
we go

1330
01:05:32,789 --> 01:05:37,049
so again really crappy and theories just

1331
01:05:35,338 --> 01:05:41,308
to be clear the reason it's crappy is

1332
01:05:37,048 --> 01:05:43,409
because what you want most out of an

1333
01:05:41,309 --> 01:05:47,670
asset system is you want to deliver

1334
01:05:43,409 --> 01:05:49,469
assets to the game in the way that the

1335
01:05:47,670 --> 01:05:51,420
game wants to use them and so for

1336
01:05:49,469 --> 01:05:53,098
example here what we want is we want to

1337
01:05:51,420 --> 01:05:55,880
just be able to say give me the rock

1338
01:05:53,099 --> 01:05:59,369
data set how many are there right and

1339
01:05:55,880 --> 01:06:01,858
then I'm going to distribute them so it

1340
01:05:59,369 --> 01:06:05,970
doesn't want the asset system to match

1341
01:06:01,858 --> 01:06:07,768
it wants to do the you know variation so

1342
01:06:05,969 --> 01:06:10,939
it really just wants to be given like an

1343
01:06:07,768 --> 01:06:16,618
array like here's what they are right

1344
01:06:10,940 --> 01:06:18,119
and so I think probably even even if we

1345
01:06:16,619 --> 01:06:21,690
just kept the system the way it is now

1346
01:06:18,119 --> 01:06:23,640
it's actually fine we just need to move

1347
01:06:21,690 --> 01:06:26,309
to a system where you could ask for that

1348
01:06:23,639 --> 01:06:28,588
and get back the array as something that

1349
01:06:26,309 --> 01:06:30,599
that's a queryable that you just do once

1350
01:06:28,588 --> 01:06:32,578
and then you can distribute it from

1351
01:06:30,599 --> 01:06:34,410
there so we can do that without too much

1352
01:06:32,579 --> 01:06:38,548
upset but as it is now it's really

1353
01:06:34,409 --> 01:06:47,608
pretty crappy alright so we now have our

1354
01:06:38,548 --> 01:06:50,818
fill unpacked entity here I don't know

1355
01:06:47,608 --> 01:06:52,338
what some of this stuff is doing or if

1356
01:06:50,818 --> 01:06:56,509
anyone's even calling any of this stuff

1357
01:06:52,338 --> 01:06:56,509
we should just test to see

1358
01:07:08,019 --> 01:07:12,710
and we're gonna have again to route that

1359
01:07:10,909 --> 01:07:14,329
asset system through because again we

1360
01:07:12,710 --> 01:07:18,949
need that when we're unpacking the mb's

1361
01:07:14,329 --> 01:07:22,159
so we know that's true let's see what

1362
01:07:18,949 --> 01:07:24,769
else we gots random seed offset cannot

1363
01:07:22,159 --> 01:07:26,659
cover everyone from entity ID so I want

1364
01:07:24,769 --> 01:07:29,179
to look at what nd ID is I probably need

1365
01:07:26,659 --> 01:07:33,259
to get the value out of it yeah so we'll

1366
01:07:29,179 --> 01:07:35,779
just do that entity undeclared

1367
01:07:33,260 --> 01:07:38,090
identifier I agree with that it was

1368
01:07:35,780 --> 01:07:51,890
supposed to be called nd but we didn't

1369
01:07:38,090 --> 01:07:54,590
call it entity yeah there and that was

1370
01:07:51,889 --> 01:07:56,839
just a typo so hopefully now we're down

1371
01:07:54,590 --> 01:08:01,760
mostly just to the routing issue there

1372
01:07:56,840 --> 01:08:04,070
so ear fill unpacked entity we need to

1373
01:08:01,760 --> 01:08:05,450
find a way to get the game assets

1374
01:08:04,070 --> 01:08:09,440
through which means that when we're

1375
01:08:05,449 --> 01:08:13,309
calling this part of the unpack here we

1376
01:08:09,440 --> 01:08:15,619
need to have that right because I don't

1377
01:08:13,309 --> 01:08:17,930
believe the world's knows where the

1378
01:08:15,619 --> 01:08:22,250
assets come from you can see here it's

1379
01:08:17,930 --> 01:08:24,109
unaware of that so when it calls inshore

1380
01:08:22,250 --> 01:08:26,899
region is unpacked somebody at that

1381
01:08:24,109 --> 01:08:30,410
stage has to be able to provide the

1382
01:08:26,899 --> 01:08:32,420
assets and you know easier said than

1383
01:08:30,409 --> 01:08:35,930
done because I think that's typically

1384
01:08:32,420 --> 01:08:38,210
not yea happening in here so when we

1385
01:08:35,930 --> 01:08:39,560
call begin world change and that's when

1386
01:08:38,210 --> 01:08:41,210
you're doing sort of that unpacking

1387
01:08:39,560 --> 01:08:47,240
that's where we would actually need that

1388
01:08:41,210 --> 01:08:50,739
data to be to be given all right so

1389
01:08:47,239 --> 01:08:50,739
let's just force it through

1390
01:09:11,989 --> 01:09:16,800
and again I'm just walking up the stack

1391
01:09:14,609 --> 01:09:18,539
and requiring everyone who was

1392
01:09:16,800 --> 01:09:22,460
previously making a call down this chain

1393
01:09:18,539 --> 01:09:22,460
to provide that information

1394
01:09:25,239 --> 01:09:28,978
[Music]

1395
01:09:38,420 --> 01:09:45,020
so how is this guy yeah so this guy

1396
01:09:43,399 --> 01:09:48,529
needs the game assets what doesn't have

1397
01:09:45,020 --> 01:09:54,010
it and so the world sim struct itself

1398
01:09:48,529 --> 01:09:54,009
should have that in there meaning

1399
01:09:59,800 --> 01:10:04,070
although I guess the world sim work

1400
01:10:02,270 --> 01:10:05,990
structure actually could have it in

1401
01:10:04,069 --> 01:10:10,509
there I don't know that world sim itself

1402
01:10:05,989 --> 01:10:14,630
needs it so it's probably more like that

1403
01:10:10,510 --> 01:10:18,560
right if the game states there though

1404
01:10:14,630 --> 01:10:29,680
game state assets actually has it right

1405
01:10:18,560 --> 01:10:29,680
so I could just do that sorry that

1406
01:10:32,560 --> 01:10:37,640
although now that I look at it does the

1407
01:10:35,449 --> 01:10:41,989
game state get past here it doesn't okay

1408
01:10:37,640 --> 01:10:44,230
because say if simulate has the game

1409
01:10:41,989 --> 01:10:45,439
state it could do it but I guess not all

1410
01:10:44,229 --> 01:10:55,939
right

1411
01:10:45,439 --> 01:10:58,719
so let's see game state assets does Jen

1412
01:10:55,939 --> 01:10:58,719
have the assets

1413
01:11:03,210 --> 01:11:09,119
again this is just kind of busy work

1414
01:11:06,119 --> 01:11:09,119
oops

1415
01:11:12,399 --> 01:11:17,079
so I feel like the room gener the world

1416
01:11:15,460 --> 01:11:18,609
generator should have the assets because

1417
01:11:17,079 --> 01:11:22,119
it's going to need those for various

1418
01:11:18,609 --> 01:11:29,559
querying purposes so we probably need to

1419
01:11:22,119 --> 01:11:32,649
put that in here so yeah so in here

1420
01:11:29,560 --> 01:11:45,700
where we're like doing begin world

1421
01:11:32,649 --> 01:11:48,699
change we want to and then that just

1422
01:11:45,699 --> 01:11:53,760
needs to get actually set when we start

1423
01:11:48,699 --> 01:11:58,059
the world gym so that's going to be in

1424
01:11:53,760 --> 01:12:00,699
the world Jen CBP and when that stuff

1425
01:11:58,060 --> 01:12:02,560
gets initialized probably delete a lot

1426
01:12:00,699 --> 01:12:05,260
of this crap now it's like we saved a

1427
01:12:02,560 --> 01:12:10,420
bunch of room stuff in fact I'm just

1428
01:12:05,260 --> 01:12:18,520
gonna get rid of all of us so when we

1429
01:12:10,420 --> 01:12:22,829
first create the world generator right

1430
01:12:18,520 --> 01:12:22,830
here this code is going to need that

1431
01:12:27,840 --> 01:12:54,779
and so we're we call create world we

1432
01:12:39,220 --> 01:12:57,640
will have to pass the assets as well and

1433
01:12:54,779 --> 01:13:00,939
so I think that's everything it's a

1434
01:12:57,640 --> 01:13:02,680
little bit long-winded but we really do

1435
01:13:00,939 --> 01:13:05,409
need those because when we're randomly

1436
01:13:02,680 --> 01:13:07,060
distributing detail features we're going

1437
01:13:05,409 --> 01:13:21,039
to need to ask the asset system like

1438
01:13:07,060 --> 01:13:24,030
which ones are they right so I think

1439
01:13:21,039 --> 01:13:24,029
that's all good

1440
01:13:40,060 --> 01:13:44,930
all right so I think we're mostly done

1441
01:13:43,010 --> 01:13:47,390
with that and now we can distribute

1442
01:13:44,930 --> 01:13:50,720
points on our stuff whenever we want to

1443
01:13:47,390 --> 01:13:52,220
now there is one issue that we have not

1444
01:13:50,720 --> 01:13:54,770
addressed that we do need to address

1445
01:13:52,220 --> 01:13:59,780
though and that is that when we are

1446
01:13:54,770 --> 01:14:03,770
creating our entities they will not have

1447
01:13:59,779 --> 01:14:06,380
been actually updated for like with the

1448
01:14:03,770 --> 01:14:07,970
ground cover right the reason for that

1449
01:14:06,380 --> 01:14:10,940
is when we first when we initially

1450
01:14:07,970 --> 01:14:13,730
create our entities we don't do any of

1451
01:14:10,939 --> 01:14:15,369
the unpacking stuff right we just create

1452
01:14:13,729 --> 01:14:18,559
the entity and that's it

1453
01:14:15,369 --> 01:14:20,000
what that means is that all of the

1454
01:14:18,560 --> 01:14:23,720
entities that get created that if not

1455
01:14:20,000 --> 01:14:25,520
been packed will not be unpacked and

1456
01:14:23,720 --> 01:14:30,619
therefore we'll never have that called

1457
01:14:25,520 --> 01:14:33,830
so actually what we want to do before we

1458
01:14:30,619 --> 01:14:38,449
you know after we Jen the world right so

1459
01:14:33,829 --> 01:14:41,899
when we do create world call and we do

1460
01:14:38,449 --> 01:14:43,849
this crap right what we want to do is at

1461
01:14:41,899 --> 01:14:45,920
the end of it all so when we do like

1462
01:14:43,850 --> 01:14:50,300
begin world Jen and then we do end world

1463
01:14:45,920 --> 01:14:55,220
Jen the end world Jen stuff actually

1464
01:14:50,300 --> 01:14:58,039
this needs to tell the simulation system

1465
01:14:55,220 --> 01:15:01,010
like the world system to flush the

1466
01:14:58,039 --> 01:15:05,390
entire cache because everything should

1467
01:15:01,010 --> 01:15:08,630
get brought in afresh right so inside

1468
01:15:05,390 --> 01:15:16,030
that handmade world system here we need

1469
01:15:08,630 --> 01:15:16,029
to flush that where is that

1470
01:15:23,880 --> 01:15:30,750
ah okay so right here so that unpacked

1471
01:15:28,560 --> 01:15:32,370
in any count that says how many entities

1472
01:15:30,750 --> 01:15:36,090
we have start unpacked that just needs

1473
01:15:32,369 --> 01:15:41,460
to get set back to zero right so that's

1474
01:15:36,090 --> 01:15:43,350
that's what we need to do so how would

1475
01:15:41,460 --> 01:15:44,698
we do this well there's a couple

1476
01:15:43,350 --> 01:15:46,139
different ways we can do it at the

1477
01:15:44,698 --> 01:15:48,509
moment we could literally just set it

1478
01:15:46,139 --> 01:15:50,730
back to zero but if we start to

1479
01:15:48,510 --> 01:15:53,070
introduce things that maybe manage other

1480
01:15:50,729 --> 01:15:54,629
resources as a result of entities coming

1481
01:15:53,069 --> 01:15:56,519
in and out of the active set we want

1482
01:15:54,630 --> 01:15:59,609
that sort of happen generally in one

1483
01:15:56,520 --> 01:16:01,650
place so we don't screw it up right and

1484
01:15:59,609 --> 01:16:05,369
so in order to do that what I want to do

1485
01:16:01,649 --> 01:16:08,479
here is make sure that's let me just add

1486
01:16:05,369 --> 01:16:08,479
the call here before I forget

1487
01:16:11,060 --> 01:16:26,280
so inside and world gen I'm going to be

1488
01:16:13,969 --> 01:16:28,980
we're unpacked edit cash in world and so

1489
01:16:26,279 --> 01:16:34,698
then here in the world calls I want an

1490
01:16:28,979 --> 01:16:34,698
ability to do this where I can just say

1491
01:16:38,810 --> 01:16:44,909
write and like I said that's not really

1492
01:16:42,600 --> 01:16:47,250
what I want so I would like a way of

1493
01:16:44,908 --> 01:16:49,469
unwinding everything there and so in

1494
01:16:47,250 --> 01:16:53,219
order to do that just to again just to

1495
01:16:49,469 --> 01:17:00,060
keep it clean so in here where we do

1496
01:16:53,219 --> 01:17:04,590
this operation and we take the the

1497
01:17:00,060 --> 01:17:07,730
entity position and we remap it and pack

1498
01:17:04,590 --> 01:17:07,730
it and all that sort of stuff

1499
01:17:19,460 --> 01:17:28,908
I guess I don't actually know why the

1500
01:17:22,520 --> 01:17:31,010
chunk okay there we go looking for

1501
01:17:28,908 --> 01:17:32,988
something and it wasn't seeing it so

1502
01:17:31,010 --> 01:17:36,380
this entity P here we do the map into

1503
01:17:32,988 --> 01:17:38,750
chunks face I guess I'll be honest I'm

1504
01:17:36,380 --> 01:17:40,819
not sure why is that happening outside

1505
01:17:38,750 --> 01:17:42,979
here still so if you look at that I was

1506
01:17:40,819 --> 01:17:46,279
starting to be inside and it wasn't um

1507
01:17:42,979 --> 01:17:48,979
if you look at that entity P you can see

1508
01:17:46,279 --> 01:17:49,399
it's only really used ah there it is

1509
01:17:48,979 --> 01:17:51,859
okay

1510
01:17:49,399 --> 01:17:54,109
because it's used in here I was like why

1511
01:17:51,859 --> 01:17:56,359
is that outside uh so if you look at

1512
01:17:54,109 --> 01:18:00,139
what's happening here what I want to do

1513
01:17:56,359 --> 01:18:03,710
is effectively have a way of making sure

1514
01:18:00,140 --> 01:18:06,050
that this stuff happens consistently in

1515
01:18:03,710 --> 01:18:09,380
both cases and so what I'm thinking up

1516
01:18:06,050 --> 01:18:14,659
here this is just kind of my loose kind

1517
01:18:09,380 --> 01:18:18,350
of opinion of what I kind of think I

1518
01:18:14,658 --> 01:18:25,039
want to have happen is when we do the

1519
01:18:18,350 --> 01:18:28,550
the D unpack origin here I think I want

1520
01:18:25,039 --> 01:18:33,698
to pull this out into its own sort of

1521
01:18:28,550 --> 01:18:33,699
separate pass so this

1522
01:18:38,090 --> 01:18:44,239
I think I just want this to be a

1523
01:18:42,319 --> 01:19:03,469
separate function that gets called here

1524
01:18:44,239 --> 01:19:05,179
by default something like this so that

1525
01:19:03,470 --> 01:19:10,550
we always go through kind of like a

1526
01:19:05,180 --> 01:19:13,700
known case if this makes sense but then

1527
01:19:10,550 --> 01:19:15,650
have two ways of running it one way that

1528
01:19:13,699 --> 01:19:19,819
clears the cache and one way that

1529
01:19:15,649 --> 01:19:23,389
actually makes the decision something

1530
01:19:19,819 --> 01:19:27,049
like this now I guess the other thing

1531
01:19:23,390 --> 01:19:28,460
maybe it's better to know what I'm

1532
01:19:27,050 --> 01:19:30,860
looking at too though because that's

1533
01:19:28,460 --> 01:19:34,659
sort of it also calls register in there

1534
01:19:30,859 --> 01:19:39,339
maybe we don't really quite want that

1535
01:19:34,659 --> 01:19:39,340
you know maybe we want something more

1536
01:19:41,739 --> 01:19:47,469
maybe want something more like only

1537
01:19:44,149 --> 01:19:53,619
taking the interior part so like

1538
01:19:47,470 --> 01:19:53,619
literally just this maybe

1539
01:19:59,189 --> 01:20:04,809
so if we did something like this where

1540
01:20:01,750 --> 01:20:07,479
you would say PAC entity and it just

1541
01:20:04,810 --> 01:20:14,800
packs that entity into someplace that

1542
01:20:07,479 --> 01:20:17,799
it's going to go yeah maybe that's

1543
01:20:14,800 --> 01:20:19,360
better so we call PAC entity here and

1544
01:20:17,800 --> 01:20:41,800
then we'll have a loop here that calls

1545
01:20:19,359 --> 01:20:44,229
PAC entity so this would sort of take us

1546
01:20:41,800 --> 01:20:45,670
through the entire set you know why

1547
01:20:44,229 --> 01:20:56,109
would I do that that's just that's just

1548
01:20:45,670 --> 01:20:58,449
unnecessary let's write it clearer so

1549
01:20:56,109 --> 01:21:02,069
I'm just going to loop through I'm gonna

1550
01:20:58,449 --> 01:21:02,069
say for each one of these entities I

1551
01:21:03,090 --> 01:21:10,409
want you to pack it back up and then I'm

1552
01:21:06,340 --> 01:21:12,789
gonna say that we've gotta none right

1553
01:21:10,409 --> 01:21:15,220
okay so now the only question is what

1554
01:21:12,789 --> 01:21:18,039
does PAC entity actually need to do its

1555
01:21:15,220 --> 01:21:19,810
job so it needs a couple of things first

1556
01:21:18,039 --> 01:21:21,869
of all it's gonna need the world right

1557
01:21:19,810 --> 01:21:24,550
because it's gonna pack that up in there

1558
01:21:21,869 --> 01:21:26,349
it's gonna need the pack entity size but

1559
01:21:24,550 --> 01:21:29,739
the packed entity size is something we

1560
01:21:26,350 --> 01:21:30,789
can know off hand and that's fine and

1561
01:21:29,739 --> 01:21:35,199
eventually it'll go away because the

1562
01:21:30,789 --> 01:21:38,109
entity's size will vary right so we're

1563
01:21:35,199 --> 01:21:42,880
gonna need that we're going to need the

1564
01:21:38,109 --> 01:21:51,219
chunk Delta and that will be zero I'm

1565
01:21:42,880 --> 01:21:54,369
sorry the chunk Delta the the entity P

1566
01:21:51,220 --> 01:21:56,369
so when we actually map it into chunks

1567
01:21:54,369 --> 01:21:59,369
face we're going to need this value

1568
01:21:56,369 --> 01:21:59,369
right

1569
01:21:59,609 --> 01:22:05,729
there yeah I think that's everything

1570
01:22:06,869 --> 01:22:13,659
looks good okay

1571
01:22:10,659 --> 01:22:15,670
and so in here where we do pack enemy it

1572
01:22:13,659 --> 01:22:18,519
needs to simulate those so it needs to

1573
01:22:15,670 --> 01:22:19,600
be able to do that pack and the way it's

1574
01:22:18,520 --> 01:22:21,730
going to do that is just using the

1575
01:22:19,600 --> 01:22:23,170
unpack origin that was used last time

1576
01:22:21,729 --> 01:22:27,519
because it knows that there have been no

1577
01:22:23,170 --> 01:22:29,890
updates yet right so it's literally it

1578
01:22:27,520 --> 01:22:32,650
is the same call right

1579
01:22:29,890 --> 01:22:34,600
it's just that but we're just doing it

1580
01:22:32,649 --> 01:22:40,659
outside because it was needed here for

1581
01:22:34,600 --> 01:22:43,930
other reasons so I think that's all we

1582
01:22:40,659 --> 01:22:45,789
actually need to do and that allows us

1583
01:22:43,930 --> 01:22:49,230
to do a clear of the cache that packs

1584
01:22:45,789 --> 01:22:49,229
everything right

1585
01:22:55,729 --> 01:23:01,619
of course it would also help if I pack

1586
01:22:58,649 --> 01:23:04,979
past the actual entity that you're

1587
01:23:01,619 --> 01:23:06,720
supposed to be packing all right so here

1588
01:23:04,979 --> 01:23:09,329
we've got the enemy P and the entity

1589
01:23:06,720 --> 01:23:10,710
itself that we're working with those are

1590
01:23:09,329 --> 01:23:12,239
both known here we need that entity

1591
01:23:10,710 --> 01:23:14,130
again other than that I think we're all

1592
01:23:12,239 --> 01:23:16,859
good so I think this will properly clear

1593
01:23:14,130 --> 01:23:18,720
the cache and it calls the same code in

1594
01:23:16,859 --> 01:23:21,619
both cases so that as we change that

1595
01:23:18,720 --> 01:23:30,690
code to do that packing in other ways

1596
01:23:21,619 --> 01:23:35,849
hopefully that will work right didn't

1597
01:23:30,689 --> 01:23:40,069
like that hold on a second I may have

1598
01:23:35,850 --> 01:23:40,070
forgotten to wait world gin

1599
01:23:48,708 --> 01:23:57,748
seems like that should be okay shouldn't

1600
01:23:51,149 --> 01:23:58,978
it well we'll see so I'm gonna go ahead

1601
01:23:57,748 --> 01:24:00,300
and compile debug Mook

1602
01:23:58,979 --> 01:24:02,039
we're gonna do bug this and then I think

1603
01:24:00,300 --> 01:24:05,519
we're probably getting towards the end

1604
01:24:02,038 --> 01:24:07,288
of the again end of our time today but

1605
01:24:05,519 --> 01:24:09,920
we've got the ground cover distributing

1606
01:24:07,288 --> 01:24:12,149
and hopefully all that stuff is is

1607
01:24:09,920 --> 01:24:13,969
functional now and so if we drew it we

1608
01:24:12,149 --> 01:24:17,248
would presumably actually see some stuff

1609
01:24:13,969 --> 01:24:19,679
all right so on our call of clear

1610
01:24:17,248 --> 01:24:22,948
unpacked entity cache it looks like the

1611
01:24:19,679 --> 01:24:29,538
world structure is set to 0 for some

1612
01:24:22,948 --> 01:24:29,538
reason so I guess

1613
01:24:33,529 --> 01:24:46,579
well I'll be honest I'm not really sure

1614
01:24:35,449 --> 01:24:57,289
why that's the case ah right because we

1615
01:24:46,579 --> 01:24:59,300
cleared our memory uh so I think we can

1616
01:24:57,289 --> 01:25:02,420
test this now and see of course we're

1617
01:24:59,300 --> 01:25:03,710
not really going to know whether or not

1618
01:25:02,420 --> 01:25:05,510
this is working because we're not

1619
01:25:03,710 --> 01:25:09,230
drawing the ground cover but I think

1620
01:25:05,510 --> 01:25:10,640
we've got everything in place for the

1621
01:25:09,229 --> 01:25:12,879
ground cover to work just fine now

1622
01:25:10,640 --> 01:25:14,930
albeit perhaps a little bit slowly I

1623
01:25:12,880 --> 01:25:16,340
want to take a look at that profile real

1624
01:25:14,930 --> 01:25:18,110
quick and then we're gonna hop over and

1625
01:25:16,340 --> 01:25:19,909
and actually put some drawing code in

1626
01:25:18,109 --> 01:25:22,849
there so we can see about the ground

1627
01:25:19,909 --> 01:25:24,019
cover we've got to actually ask it to

1628
01:25:22,850 --> 01:25:25,310
generate some ground cover and then we

1629
01:25:24,020 --> 01:25:28,970
have to actually draw it in order to see

1630
01:25:25,310 --> 01:25:30,890
if it worked so in here we can see our

1631
01:25:28,970 --> 01:25:32,720
memory usage if I look at the arena's it

1632
01:25:30,890 --> 01:25:34,369
looks roughly the same as it did before

1633
01:25:32,720 --> 01:25:36,829
which is you know more or less what we

1634
01:25:34,369 --> 01:25:38,119
would expect if I go over to the profile

1635
01:25:36,829 --> 01:25:39,949
I just want to make sure there's no

1636
01:25:38,119 --> 01:25:43,460
weirdness going on there as we're moving

1637
01:25:39,949 --> 01:25:45,789
around light propagation as you can see

1638
01:25:43,460 --> 01:25:49,369
still taking pretty much all the time

1639
01:25:45,789 --> 01:25:52,569
you know nothing nothing unusual there

1640
01:25:49,369 --> 01:25:52,569
it's exactly what you would expect

1641
01:26:01,809 --> 01:26:05,659
yeah I mean really this is just exactly

1642
01:26:04,130 --> 01:26:07,489
what we would expect there's nothing

1643
01:26:05,658 --> 01:26:10,118
nothing interesting here it's just

1644
01:26:07,488 --> 01:26:12,468
lighting calcs eating up all the time

1645
01:26:10,118 --> 01:26:17,029
and that's what I wanted that's what I

1646
01:26:12,469 --> 01:26:21,500
wanted to make sure all right so if we

1647
01:26:17,029 --> 01:26:25,639
now go and actually set some ground

1648
01:26:21,500 --> 01:26:36,229
cover on our crafts entities so for

1649
01:26:25,639 --> 01:26:40,029
example inside room Jen oops let's go

1650
01:26:36,229 --> 01:26:42,859
look at where we're getting some grass

1651
01:26:40,029 --> 01:26:45,939
selected here and so when we do this add

1652
01:26:42,859 --> 01:26:48,679
tag tag grass what I'm gonna do is say

1653
01:26:45,939 --> 01:26:50,839
when we add tagged grass I'm also just

1654
01:26:48,679 --> 01:26:52,429
going to go ahead and and hard code some

1655
01:26:50,840 --> 01:26:54,078
ground cover in here and then later we

1656
01:26:52,429 --> 01:26:56,929
can make a system that thinks a little

1657
01:26:54,078 --> 01:26:58,038
bit harder about it but for now we'll

1658
01:26:56,929 --> 01:27:00,649
just say if we were going to set the

1659
01:26:58,038 --> 01:27:02,359
thing to a grass type I'm gonna set one

1660
01:27:00,649 --> 01:27:05,448
of these ground covers here with the

1661
01:27:02,359 --> 01:27:07,609
type and the density so what I'll say as

1662
01:27:05,448 --> 01:27:12,698
well all right we'll take those ground

1663
01:27:07,609 --> 01:27:17,779
cover specs zero and we'll do like a

1664
01:27:12,698 --> 01:27:23,750
density of 16 or something and the type

1665
01:27:17,779 --> 01:27:25,849
will be thick grass right so now we're

1666
01:27:23,750 --> 01:27:29,118
like asking for ground cover to actually

1667
01:27:25,849 --> 01:27:30,440
occur and so now we should we might see

1668
01:27:29,118 --> 01:27:33,618
it show up on the profile but probably

1669
01:27:30,439 --> 01:27:35,928
not because it's probably not really

1670
01:27:33,618 --> 01:27:39,288
doing very much but we should actually

1671
01:27:35,929 --> 01:27:42,078
be getting calls to it now right and

1672
01:27:39,288 --> 01:27:44,689
looking at like the yeah there's there's

1673
01:27:42,078 --> 01:27:48,788
nothing happening here in particular as

1674
01:27:44,689 --> 01:27:48,788
far as I can tell mm-hmm sir

1675
01:27:49,219 --> 01:27:57,020
I don't even see it on here

1676
01:27:52,988 --> 01:28:01,629
it's called Phil right Phil entity but

1677
01:27:57,020 --> 01:28:01,630
it's not even not even on there

1678
01:28:05,948 --> 01:28:10,210
I mean it should be in there somewhere

1679
01:28:08,560 --> 01:28:11,949
but I guess it doesn't get called except

1680
01:28:10,210 --> 01:28:13,300
when you unpack and you only unpack of

1681
01:28:11,948 --> 01:28:18,519
it so it probably bloops on and then

1682
01:28:13,300 --> 01:28:20,619
bloops off right so now that we've got

1683
01:28:18,520 --> 01:28:22,090
it you know asking to do that cover what

1684
01:28:20,619 --> 01:28:24,488
we need to do is actually try to draw

1685
01:28:22,090 --> 01:28:26,860
that cover somewhere and so if we go

1686
01:28:24,488 --> 01:28:30,069
into the enemy system and we look down

1687
01:28:26,859 --> 01:28:32,619
where it's actually doing that drawing

1688
01:28:30,069 --> 01:28:34,029
you can see here like for example this

1689
01:28:32,619 --> 01:28:36,090
is the part where it loops over the

1690
01:28:34,029 --> 01:28:39,309
pieces of the entity and draws those

1691
01:28:36,090 --> 01:28:44,140
let's try to do you know that same sort

1692
01:28:39,310 --> 01:29:00,160
of thing let's try to do that for the

1693
01:28:44,140 --> 01:29:05,949
ground cover here so yeah maybe I'll

1694
01:29:00,159 --> 01:29:08,960
make a little section for that and we

1695
01:29:05,948 --> 01:29:12,068
can isolate this out maybe

1696
01:29:08,960 --> 01:29:12,069
[Music]

1697
01:29:17,929 --> 01:29:24,170
so the p-values now and I think about it

1698
01:29:24,800 --> 01:29:33,539
those actually want to be offset by

1699
01:29:27,569 --> 01:29:36,238
where the entity is right so if we take

1700
01:29:33,539 --> 01:29:41,090
a look at how the entity fill is

1701
01:29:36,238 --> 01:29:41,089
happening I actually don't want this

1702
01:29:41,719 --> 01:29:45,630
right because that's the enemy moves

1703
01:29:44,010 --> 01:29:49,500
around the ground cover should move with

1704
01:29:45,630 --> 01:29:51,389
it so on here like you imagine like a

1705
01:29:49,500 --> 01:29:53,310
floating platform that was like moving

1706
01:29:51,389 --> 01:29:55,078
around or whatever you want the grass to

1707
01:29:53,310 --> 01:29:57,840
go with it you don't have to go update

1708
01:29:55,078 --> 01:29:59,939
all the grass every time and so I guess

1709
01:29:57,840 --> 01:30:02,340
what we want to do here is say okay like

1710
01:29:59,939 --> 01:30:06,448
let's go ahead and say draw this thing

1711
01:30:02,340 --> 01:30:07,920
like that and let's make a little

1712
01:30:06,448 --> 01:30:10,559
function here that draws that ground

1713
01:30:07,920 --> 01:30:19,859
cover and we'll see what that looks like

1714
01:30:10,560 --> 01:30:21,780
so here's my draw ground cover so what

1715
01:30:19,859 --> 01:30:25,049
would I actually need for that

1716
01:30:21,779 --> 01:30:26,939
particular part of things well in here

1717
01:30:25,050 --> 01:30:29,310
if we're doing like a push right call

1718
01:30:26,939 --> 01:30:31,789
which I assume is roughly what we would

1719
01:30:29,310 --> 01:30:31,789
want to do

1720
01:30:41,380 --> 01:30:48,220
so we need to be able to do the load

1721
01:30:44,229 --> 01:30:49,479
bitmap in the case where it fails but

1722
01:30:48,220 --> 01:30:51,640
other than that I don't think there's

1723
01:30:49,479 --> 01:31:00,519
particularly much there so we don't need

1724
01:30:51,640 --> 01:31:01,990
any of this whoops so we're really just

1725
01:31:00,520 --> 01:31:11,710
looking at this so we need the render

1726
01:31:01,989 --> 01:31:13,569
group we would need the game assets and

1727
01:31:11,710 --> 01:31:15,460
that's about it and so the rest of the

1728
01:31:13,569 --> 01:31:18,759
stuff we can actually just get out of

1729
01:31:15,460 --> 01:31:21,460
what we have right now so I think that's

1730
01:31:18,760 --> 01:31:24,239
where we're at we would want to do this

1731
01:31:21,460 --> 01:31:24,239
sort of thing

1732
01:31:44,698 --> 01:31:50,438
and popping over here it occurs to me

1733
01:31:48,189 --> 01:31:52,570
that we never really stored into the

1734
01:31:50,439 --> 01:31:55,239
entity how many pieces of ground cover

1735
01:31:52,569 --> 01:31:59,349
there actually were and so we probably

1736
01:31:55,238 --> 01:32:01,418
want to do that although I suppose we

1737
01:31:59,349 --> 01:32:03,059
can just bail when we see a bitmap idea

1738
01:32:01,418 --> 01:32:06,010
of zero and that would be sufficient

1739
01:32:03,059 --> 01:32:12,159
also but I don't see any reason not to

1740
01:32:06,010 --> 01:32:17,820
just go like that so I think I may in

1741
01:32:12,158 --> 01:32:17,819
here in space instead say do this right

1742
01:32:19,229 --> 01:32:29,219
all right so I'm gonna do it this way

1743
01:32:21,998 --> 01:32:33,458
I'm going to loop over these in order

1744
01:32:29,219 --> 01:32:40,569
for each of them I'm gonna get out the

1745
01:32:33,458 --> 01:32:45,458
bitmap like this I'm gonna load it if we

1746
01:32:40,569 --> 01:32:47,168
can't get it I don't know that this is a

1747
01:32:45,458 --> 01:32:49,118
particularly good way to do this part of

1748
01:32:47,168 --> 01:32:50,439
the code but you know as we've

1749
01:32:49,118 --> 01:32:52,268
streamlined the rendering of the

1750
01:32:50,439 --> 01:32:55,239
entities I'm sure we can take care of

1751
01:32:52,269 --> 01:32:57,429
most of that but then we really just

1752
01:32:55,238 --> 01:33:00,728
need to know what the actual layout of

1753
01:32:57,429 --> 01:33:02,618
this sprite is and we can probably use

1754
01:33:00,729 --> 01:33:04,239
our existing code for that although for

1755
01:33:02,618 --> 01:33:05,978
ground cover because there's so much of

1756
01:33:04,238 --> 01:33:08,168
it and because it's very specialized I

1757
01:33:05,979 --> 01:33:12,039
could see us wanting us a particular

1758
01:33:08,168 --> 01:33:14,229
piece of code that operates just for

1759
01:33:12,038 --> 01:33:20,069
ground cover to figure out kind of how

1760
01:33:14,229 --> 01:33:22,030
its arranged and where it goes so if we

1761
01:33:20,069 --> 01:33:25,808
take a look at update and render

1762
01:33:22,029 --> 01:33:34,838
entities here when we actually create

1763
01:33:25,809 --> 01:33:37,119
that sprite bit here again not really

1764
01:33:34,838 --> 01:33:42,969
sure exactly what I want this to look

1765
01:33:37,118 --> 01:33:47,228
like but we'll figure it out so if we

1766
01:33:42,969 --> 01:33:51,550
look at the x and y axes those are going

1767
01:33:47,229 --> 01:33:53,559
to presumably just be the same as what

1768
01:33:51,550 --> 01:33:55,628
you'd expect so we're not really gonna

1769
01:33:53,559 --> 01:33:56,699
be modifying those again this is why I

1770
01:33:55,628 --> 01:33:59,069
say this should

1771
01:33:56,699 --> 01:34:01,649
be welded into something that doesn't

1772
01:33:59,069 --> 01:34:04,769
take into account any kind of morphing

1773
01:34:01,649 --> 01:34:07,979
of those or deformation because it can

1774
01:34:04,770 --> 01:34:10,200
be much faster right for the align P

1775
01:34:07,979 --> 01:34:10,619
again don't really know what I want

1776
01:34:10,199 --> 01:34:13,199
there

1777
01:34:10,619 --> 01:34:20,489
but I'm guessing actually I guess I'll

1778
01:34:13,199 --> 01:34:23,909
just do it this way I'm guessing I want

1779
01:34:20,489 --> 01:34:25,949
something sort of like this look and

1780
01:34:23,909 --> 01:34:29,550
look at that a little bit later and then

1781
01:34:25,949 --> 01:34:33,059
for the world dim that's how big I want

1782
01:34:29,550 --> 01:34:35,310
the thing to be in the world and that

1783
01:34:33,060 --> 01:34:37,980
part is a little confusing because again

1784
01:34:35,310 --> 01:34:41,520
we need the texture information for that

1785
01:34:37,979 --> 01:34:46,379
and so I don't know how the world dim

1786
01:34:41,520 --> 01:34:53,460
actually bakes down like in terms of in

1787
01:34:46,380 --> 01:34:55,800
terms of how we want so you can see it's

1788
01:34:53,460 --> 01:34:58,649
using the bitmap info for the thing here

1789
01:34:55,800 --> 01:35:02,180
to actually do it getting the getting

1790
01:34:58,649 --> 01:35:02,179
the actual dimension of it that way

1791
01:35:07,550 --> 01:35:12,960
again just a lot too much going on here

1792
01:35:10,979 --> 01:35:15,149
what we could we probably want to do is

1793
01:35:12,960 --> 01:35:17,369
actually bake this down into the ground

1794
01:35:15,149 --> 01:35:21,049
cover that's what I'm guessing because

1795
01:35:17,369 --> 01:35:21,050
it's just way too much fussing

1796
01:35:29,439 --> 01:35:33,609
just just wait wait wait wait wait wait

1797
01:35:31,479 --> 01:35:35,709
too much fussing so if I want to get the

1798
01:35:33,609 --> 01:35:37,960
actual bitmap info there for that for

1799
01:35:35,710 --> 01:35:39,310
that particular bitmap that's actually

1800
01:35:37,960 --> 01:35:41,408
not very hard though we can do that

1801
01:35:39,310 --> 01:35:46,960
pretty easily so we just say okay give

1802
01:35:41,408 --> 01:35:50,589
me that I and in here I can just say all

1803
01:35:46,960 --> 01:35:53,439
right whatever this thing wants to be I

1804
01:35:50,590 --> 01:35:55,090
don't know what the height ratio yeah

1805
01:35:53,439 --> 01:35:57,129
that's that's a that's a thing for sort

1806
01:35:55,090 --> 01:35:58,659
of change so together in terms of how

1807
01:35:57,130 --> 01:36:00,520
big we want this I think that's going to

1808
01:35:58,658 --> 01:36:02,819
come from the cover scale value so

1809
01:36:00,520 --> 01:36:06,070
that's how big you want this thing to be

1810
01:36:02,819 --> 01:36:07,929
so I think that's fine all of this

1811
01:36:06,069 --> 01:36:09,579
should cascade together now and we

1812
01:36:07,929 --> 01:36:10,869
should be able to draw oh and this

1813
01:36:09,579 --> 01:36:15,760
actually comes from the cover as well

1814
01:36:10,869 --> 01:36:17,710
right so I think that's roughly right

1815
01:36:15,760 --> 01:36:19,260
but again there's too much work going on

1816
01:36:17,710 --> 01:36:21,579
there and so I think we want to do is

1817
01:36:19,260 --> 01:36:23,679
over time migrate that and saying that

1818
01:36:21,579 --> 01:36:25,840
just builds the correct render set and

1819
01:36:23,679 --> 01:36:27,250
then we just offset that and move it to

1820
01:36:25,840 --> 01:36:32,020
where it needs to go but other than that

1821
01:36:27,250 --> 01:36:35,698
we don't touch it right okay so this is

1822
01:36:32,020 --> 01:36:35,699
actually not bitmap ideas just bitmap

1823
01:36:36,179 --> 01:36:46,000
and then draw a ground covering these

1824
01:36:38,260 --> 01:36:50,469
asset and the render group sets render

1825
01:36:46,000 --> 01:36:55,569
group entity we do get passed the assets

1826
01:36:50,469 --> 01:37:01,119
here as assets yes yes

1827
01:36:55,569 --> 01:37:03,309
okay that should do it there's one error

1828
01:37:01,119 --> 01:37:06,279
there we got to look at up at the top

1829
01:37:03,310 --> 01:37:10,840
push bright is unhappy what is it

1830
01:37:06,279 --> 01:37:13,119
from bitmap ID to a render texture so

1831
01:37:10,840 --> 01:37:22,090
this just wants the texture handle at

1832
01:37:13,119 --> 01:37:32,199
that point and it also looks like it

1833
01:37:22,090 --> 01:37:34,480
wants it looks like it wants those axes

1834
01:37:32,199 --> 01:37:44,979
in world space so these are actually

1835
01:37:34,479 --> 01:37:47,169
VIII's not be two's know which one was

1836
01:37:44,979 --> 01:37:52,239
it complaining about

1837
01:37:47,170 --> 01:37:54,369
oh is it actually the fact that it wants

1838
01:37:52,239 --> 01:37:57,219
a v4 for color that's probably what it

1839
01:37:54,369 --> 01:37:59,069
is so we actually want the v4 here just

1840
01:37:57,220 --> 01:38:02,340
because we can specify an alpha value

1841
01:37:59,069 --> 01:38:02,340
any sense

1842
01:38:05,288 --> 01:38:10,759
so I think that actually would attempt

1843
01:38:08,748 --> 01:38:12,649
to draw the ground cover now and so now

1844
01:38:10,760 --> 01:38:14,719
we have to debug the system and find out

1845
01:38:12,649 --> 01:38:17,899
okay first of all is art well we're not

1846
01:38:14,719 --> 01:38:19,010
seeing it so no but first of all we have

1847
01:38:17,899 --> 01:38:22,399
to make sure the ground cover it's

1848
01:38:19,010 --> 01:38:24,920
actually getting generated and then we

1849
01:38:22,399 --> 01:38:27,138
have to once it is generated make sure

1850
01:38:24,920 --> 01:38:29,658
that's actually getting drawn so we've

1851
01:38:27,139 --> 01:38:31,819
got ten minutes left let's see how far

1852
01:38:29,658 --> 01:38:34,879
we can get in that and what we don't

1853
01:38:31,819 --> 01:38:36,590
finish we can do tomorrow so first

1854
01:38:34,880 --> 01:38:38,599
things first let's make sure that we're

1855
01:38:36,590 --> 01:38:40,880
actually ever getting any ground cover

1856
01:38:38,599 --> 01:38:42,828
generated in the first place because we

1857
01:38:40,880 --> 01:38:44,208
may just never actually have any ground

1858
01:38:42,828 --> 01:38:47,058
cover set in which case we're never

1859
01:38:44,208 --> 01:38:48,679
hitting the rendering code so that's the

1860
01:38:47,059 --> 01:38:50,269
first thing I want to verify we're

1861
01:38:48,679 --> 01:38:53,719
actually doing so I'm gonna set a

1862
01:38:50,269 --> 01:38:58,880
breakpoint in fill unpacked entity just

1863
01:38:53,719 --> 01:39:00,439
so we can do a spot check on that and so

1864
01:38:58,880 --> 01:39:03,019
here where we're actually creating one

1865
01:39:00,439 --> 01:39:05,749
of these things I just want to see that

1866
01:39:03,019 --> 01:39:07,880
it's actually you know ever ever

1867
01:39:05,748 --> 01:39:09,380
happening right so you can see us

1868
01:39:07,880 --> 01:39:15,409
switching on the ground spec type here

1869
01:39:09,380 --> 01:39:18,170
do we ever get in here we do so somebody

1870
01:39:15,408 --> 01:39:20,509
is correctly setting the ground cover

1871
01:39:18,170 --> 01:39:25,149
specs for at least some entity in our

1872
01:39:20,510 --> 01:39:28,059
game and it looks like thick grass is Oh

1873
01:39:25,149 --> 01:39:30,558
already thought of one thing I forgot I

1874
01:39:28,059 --> 01:39:33,170
said I wanted to start storing the count

1875
01:39:30,559 --> 01:39:35,739
we never stored the count so infill

1876
01:39:33,170 --> 01:39:40,309
unpacked entity what we want to do here

1877
01:39:35,738 --> 01:39:42,948
Jimmy is instead of actually using this

1878
01:39:40,309 --> 01:39:45,739
cover index we actually want to use the

1879
01:39:42,948 --> 01:39:47,688
entity ground cover count I can actually

1880
01:39:45,738 --> 01:39:51,399
just use cover index though if I want to

1881
01:39:47,689 --> 01:39:55,369
on the outside so when we actually start

1882
01:39:51,399 --> 01:39:58,188
this right here I can just say okay the

1883
01:39:55,368 --> 01:40:00,698
entity ground covered counts equals the

1884
01:39:58,189 --> 01:40:04,820
cover index and then we're done right

1885
01:40:00,698 --> 01:40:06,498
so that needed to happen let's run again

1886
01:40:04,819 --> 01:40:08,058
and just make sure we know what we're

1887
01:40:06,498 --> 01:40:09,288
seeing now because we may see something

1888
01:40:08,059 --> 01:40:12,279
different and then we'll change our

1889
01:40:09,288 --> 01:40:15,559
strategy for how we're two plugging all

1890
01:40:12,279 --> 01:40:16,698
right so I'm still not seeing any I feel

1891
01:40:15,559 --> 01:40:18,079
like there should be some ground cover

1892
01:40:16,698 --> 01:40:19,488
over here right and I'm still not

1893
01:40:18,078 --> 01:40:21,469
seeing anything in particular or at

1894
01:40:19,488 --> 01:40:23,688
least if I am its microscopic so there's

1895
01:40:21,469 --> 01:40:27,828
nothing there so let's go ahead and

1896
01:40:23,689 --> 01:40:29,209
again take a look I must set a

1897
01:40:27,828 --> 01:40:31,368
breakpoint there when we come through

1898
01:40:29,208 --> 01:40:34,128
here I'm gonna see what we're actually

1899
01:40:31,368 --> 01:40:35,868
generating in terms of ground cover just

1900
01:40:34,128 --> 01:40:39,698
to give myself a sense of whether the

1901
01:40:35,868 --> 01:40:39,698
values make any any sense whatsoever

1902
01:40:47,020 --> 01:40:56,060
um so I guess I would say the collisions

1903
01:40:53,149 --> 01:41:02,859
volume maybes isn't set properly these

1904
01:40:56,060 --> 01:41:02,860
are all zeros which is not good right

1905
01:41:09,069 --> 01:41:12,710
yeah and so you can see the collision

1906
01:41:11,000 --> 01:41:15,350
volume here for this entity that has

1907
01:41:12,710 --> 01:41:18,739
ground cover on it it's actually set to

1908
01:41:15,350 --> 01:41:20,900
not be anything I thought we were

1909
01:41:18,738 --> 01:41:23,599
setting collision volumes on all of our

1910
01:41:20,899 --> 01:41:27,670
grass stuff though so I don't really

1911
01:41:23,600 --> 01:41:30,590
understand why that would be happening I

1912
01:41:27,670 --> 01:41:33,649
thought like for example when we when we

1913
01:41:30,590 --> 01:41:35,090
actually set these they had collision

1914
01:41:33,649 --> 01:41:38,269
volumes and that's what we were also

1915
01:41:35,090 --> 01:41:42,500
using we were drawing them to in fact

1916
01:41:38,270 --> 01:41:44,239
let me just okay I didn't mean to do

1917
01:41:42,500 --> 01:41:48,409
that I just like ran the game in a

1918
01:41:44,238 --> 01:41:52,309
separate way or something there so

1919
01:41:48,409 --> 01:41:54,829
that's pretty odd and I guess I'm gonna

1920
01:41:52,310 --> 01:41:56,510
go take a look at that because I want to

1921
01:41:54,829 --> 01:42:00,109
make sure that that makes sense to me

1922
01:41:56,510 --> 01:42:00,770
first cuz I don't really know what's

1923
01:42:00,109 --> 01:42:02,329
going on there

1924
01:42:00,770 --> 01:42:07,820
so let's take a look at when those

1925
01:42:02,329 --> 01:42:09,469
collision volumes actually get set I'm

1926
01:42:07,819 --> 01:42:11,809
guessing that they yeah they don't

1927
01:42:09,469 --> 01:42:14,090
actually get set inside here they get

1928
01:42:11,810 --> 01:42:15,890
set presumably when you actually create

1929
01:42:14,090 --> 01:42:18,640
one of the entities so here we're adding

1930
01:42:15,890 --> 01:42:18,640
an entity

1931
01:42:30,368 --> 01:42:35,710
yes so I don't know collision volume

1932
01:42:32,618 --> 01:42:39,339
isn't ever getting set there but didn't

1933
01:42:35,710 --> 01:42:41,250
we use this specifically because it Oh

1934
01:42:39,340 --> 01:42:46,619
interesting

1935
01:42:41,250 --> 01:42:55,529
hmm so we don't create collision volumes

1936
01:42:46,618 --> 01:42:55,529
for our non apron entities

1937
01:43:07,229 --> 01:43:15,779
so that's an issue because I really I

1938
01:43:12,920 --> 01:43:19,409
think we want those right I mean we want

1939
01:43:15,779 --> 01:43:20,729
those collision volumes to be there and

1940
01:43:19,409 --> 01:43:22,920
they don't have to get used for

1941
01:43:20,729 --> 01:43:24,629
collision but we need these volumes for

1942
01:43:22,920 --> 01:43:26,159
a lot of stuff such as distributing

1943
01:43:24,630 --> 01:43:30,239
grass on the enemy there's a whole bunch

1944
01:43:26,159 --> 01:43:33,630
of things we need it for right so when

1945
01:43:30,239 --> 01:43:35,460
we do this collision volume here I think

1946
01:43:33,630 --> 01:43:39,750
we want to do that in both places when

1947
01:43:35,460 --> 01:43:41,159
we do regular entities as well so this

1948
01:43:39,750 --> 01:43:43,590
part here where we're actually creating

1949
01:43:41,159 --> 01:43:47,699
this thing and we're adding the piece

1950
01:43:43,590 --> 01:43:50,699
onto it like this right here I think we

1951
01:43:47,699 --> 01:43:56,399
want to create the collision volume for

1952
01:43:50,699 --> 01:43:58,880
the entity in exactly the same way so we

1953
01:43:56,399 --> 01:43:58,879
want to do

1954
01:44:05,310 --> 01:44:10,719
we want to do a get volume from Minzy

1955
01:44:08,679 --> 01:44:14,319
kind of a situation here we've got the

1956
01:44:10,719 --> 01:44:17,890
wall height and we just need that that

1957
01:44:14,319 --> 01:44:20,529
entity relative bit so I think I think

1958
01:44:17,890 --> 01:44:22,690
we want to just do the same thing now

1959
01:44:20,529 --> 01:44:25,960
the tile in this case we should have

1960
01:44:22,689 --> 01:44:27,969
that tile in both cases and we do so I

1961
01:44:25,960 --> 01:44:30,130
think we should be able to do that and

1962
01:44:27,969 --> 01:44:32,198
it should be okay right

1963
01:44:30,130 --> 01:44:34,329
we'll have to debug that and possibly

1964
01:44:32,198 --> 01:44:35,948
visualize it but I do think that's what

1965
01:44:34,329 --> 01:44:37,569
we want and then when we come through

1966
01:44:35,948 --> 01:44:39,549
here in theory this collision flank

1967
01:44:37,569 --> 01:44:41,229
should not be garbage anymore

1968
01:44:39,550 --> 01:44:44,619
yeah so that's that's more what we want

1969
01:44:41,229 --> 01:44:46,928
and that's good so now we should see

1970
01:44:44,619 --> 01:44:48,159
these values being more valid at the end

1971
01:44:46,929 --> 01:44:52,119
of this so I don't have to stress about

1972
01:44:48,159 --> 01:44:56,920
it right so let's take a look at what

1973
01:44:52,119 --> 01:44:57,729
the cover value is now okay so that's

1974
01:44:56,920 --> 01:45:02,980
much better

1975
01:44:57,729 --> 01:45:06,279
right that all looks good looks good

1976
01:45:02,979 --> 01:45:07,899
okay so that's one good thing the other

1977
01:45:06,279 --> 01:45:10,059
thing we're kind of gonna need here as

1978
01:45:07,899 --> 01:45:11,889
well and I guess I didn't think about

1979
01:45:10,060 --> 01:45:14,440
this when we we were doing it when we

1980
01:45:11,890 --> 01:45:16,110
first typed it in inside draw ground

1981
01:45:14,439 --> 01:45:19,049
cover I don't think I ever actually

1982
01:45:16,109 --> 01:45:21,429
moved this thing based on where it was

1983
01:45:19,050 --> 01:45:24,520
originally so for example when we're

1984
01:45:21,429 --> 01:45:26,469
doing this push Pride call and we have

1985
01:45:24,520 --> 01:45:28,690
this right min P here when this is

1986
01:45:26,469 --> 01:45:32,529
actually getting created when are we

1987
01:45:28,689 --> 01:45:37,089
ever offsetting it by the entities

1988
01:45:32,529 --> 01:45:40,109
position itself right because I don't

1989
01:45:37,090 --> 01:45:43,810
see that happening in here anywhere and

1990
01:45:40,109 --> 01:45:46,359
you know this this ain't gonna do it so

1991
01:45:43,810 --> 01:45:48,910
I feel like the min P was probably

1992
01:45:46,359 --> 01:45:50,738
getting offset in the other code in a

1993
01:45:48,909 --> 01:45:52,149
different way and we didn't do that here

1994
01:45:50,738 --> 01:45:54,849
so we need to that's the other thing

1995
01:45:52,149 --> 01:45:56,529
that would be why we wouldn't be placing

1996
01:45:54,850 --> 01:45:59,710
the grass in the right place potentially

1997
01:45:56,529 --> 01:46:02,019
so when we come through here and we look

1998
01:45:59,710 --> 01:46:03,819
at what it's doing like yeah you can see

1999
01:46:02,020 --> 01:46:08,010
here right we're offsetting it by a

2000
01:46:03,819 --> 01:46:11,109
bunch of information so I feel like that

2001
01:46:08,010 --> 01:46:14,050
that probably needs to happen as well so

2002
01:46:11,109 --> 01:46:16,799
what we want to do I think is in here

2003
01:46:14,050 --> 01:46:19,140
where we do a push right of the min P

2004
01:46:16,800 --> 01:46:21,210
what I want to do is take the entity

2005
01:46:19,140 --> 01:46:23,270
position and offset it by that right

2006
01:46:21,210 --> 01:46:27,149
because that's not getting counted for

2007
01:46:23,270 --> 01:46:29,640
all right getting closer but probably

2008
01:46:27,149 --> 01:46:30,299
still not quite right so let's see where

2009
01:46:29,640 --> 01:46:32,340
we're at

2010
01:46:30,300 --> 01:46:34,829
here's this is the debug belt so it's

2011
01:46:32,340 --> 01:46:36,690
excruciatingly Li slow what I'm gonna do

2012
01:46:34,829 --> 01:46:38,729
now is I'm going to break inside that

2013
01:46:36,689 --> 01:46:42,689
entity render call and just see forever

2014
01:46:38,729 --> 01:46:45,509
getting there so just the draw

2015
01:46:42,689 --> 01:46:47,609
ground-cover part and that will

2016
01:46:45,510 --> 01:46:51,390
hopefully give me a little bit more of

2017
01:46:47,609 --> 01:46:52,889
clues as to what's going on here so some

2018
01:46:51,390 --> 01:46:56,579
entities will have no ground cover and

2019
01:46:52,890 --> 01:46:58,140
some will have ground cover so i well

2020
01:46:56,579 --> 01:46:59,880
turns out the first one had it so that's

2021
01:46:58,140 --> 01:47:01,320
good because guys say we got a break

2022
01:46:59,880 --> 01:47:03,090
inside one that actually has some ground

2023
01:47:01,319 --> 01:47:07,289
cover if we look at what's ground cover

2024
01:47:03,090 --> 01:47:09,300
count is 16 that seems fine let's start

2025
01:47:07,289 --> 01:47:12,750
to take a look at what we actually

2026
01:47:09,300 --> 01:47:15,600
pushed down for sprites so the texture

2027
01:47:12,750 --> 01:47:19,229
handle was valid that we got and the

2028
01:47:15,600 --> 01:47:22,020
cover that we have here is seems pretty

2029
01:47:19,229 --> 01:47:26,159
reasonable right uh the only thing I

2030
01:47:22,020 --> 01:47:33,060
would say is the Z being negative that

2031
01:47:26,159 --> 01:47:38,059
seems wrong and I can't really think of

2032
01:47:33,060 --> 01:47:38,060
why the Z would be negative if it was

2033
01:47:43,880 --> 01:47:51,579
I would not think the Z's should ever be

2034
01:47:47,659 --> 01:47:53,659
negative so that that just seems bad but

2035
01:47:51,579 --> 01:47:55,340
regardless let's just look at what we

2036
01:47:53,659 --> 01:47:57,710
were gonna say here so if this entity

2037
01:47:55,340 --> 01:48:03,369
placement whatever it is there's the Z

2038
01:47:57,710 --> 01:48:03,369
value what's its collision volume here

2039
01:48:10,529 --> 01:48:19,630
so its maximum is actually below the Z

2040
01:48:16,539 --> 01:48:21,850
of the thing so I guess that's

2041
01:48:19,630 --> 01:48:23,170
technically correct I maybe we're saying

2042
01:48:21,850 --> 01:48:24,430
if there's volume wrong so we'll have to

2043
01:48:23,170 --> 01:48:26,440
go debug the collision volume as well

2044
01:48:24,430 --> 01:48:30,039
that's the that's the other thing we'll

2045
01:48:26,439 --> 01:48:33,629
do but otherwise let me look at the

2046
01:48:30,039 --> 01:48:33,630
sprite values see what those are

2047
01:48:45,899 --> 01:48:50,969
so all of this looks pretty reasonable

2048
01:48:47,970 --> 01:48:52,949
right so I don't think we're far from

2049
01:48:50,970 --> 01:48:58,440
working look I don't think we're in like

2050
01:48:52,949 --> 01:49:00,869
a ridiculous territory but we're

2051
01:48:58,439 --> 01:49:09,929
definitely not quite there yet right not

2052
01:49:00,869 --> 01:49:11,159
quite out of the woods yet the other

2053
01:49:09,930 --> 01:49:13,050
thing I would say is we're not

2054
01:49:11,159 --> 01:49:15,269
generating grass on the apron

2055
01:49:13,050 --> 01:49:18,630
now think about it so the actual grass

2056
01:49:15,270 --> 01:49:21,000
is not going to be there let me let me

2057
01:49:18,630 --> 01:49:25,140
go get us over to an area well or I can

2058
01:49:21,000 --> 01:49:28,439
just tell the you know what let's just

2059
01:49:25,140 --> 01:49:31,020
tell the apron to do it so when we

2060
01:49:28,439 --> 01:49:33,119
actually create the apron which is not

2061
01:49:31,020 --> 01:49:36,150
actual places that the player can go

2062
01:49:33,119 --> 01:49:39,659
it's just there for visual effect let me

2063
01:49:36,149 --> 01:49:42,839
go ahead and slap a ground cover on the

2064
01:49:39,659 --> 01:49:46,590
apron so that way we can see it right

2065
01:49:42,840 --> 01:49:48,900
when we start up so here when we create

2066
01:49:46,590 --> 01:49:51,020
this stuff and we add the tags I'm gonna

2067
01:49:48,899 --> 01:49:54,779
set it here so that it gets the same

2068
01:49:51,020 --> 01:49:58,530
thick grass ground cover because why not

2069
01:49:54,779 --> 01:50:00,059
and now when we run we should see if

2070
01:49:58,529 --> 01:50:03,899
there's any ground cover happening on

2071
01:50:00,060 --> 01:50:05,310
those apron and these or not right and

2072
01:50:03,899 --> 01:50:07,559
so you can see some but they're

2073
01:50:05,310 --> 01:50:09,420
obviously kind of weird and wrong right

2074
01:50:07,560 --> 01:50:12,810
but we're again we're getting there so

2075
01:50:09,420 --> 01:50:15,270
that's good so let's let's try and

2076
01:50:12,810 --> 01:50:18,120
figure out what's happening with with

2077
01:50:15,270 --> 01:50:20,850
that code I'm gonna look at just a few

2078
01:50:18,119 --> 01:50:23,640
really quick things and then we'll go to

2079
01:50:20,850 --> 01:50:27,360
the Q&amp;A so all I want to look at now is

2080
01:50:23,640 --> 01:50:33,000
when we do unpack our sorry I should say

2081
01:50:27,359 --> 01:50:35,279
fill unpacked entity I want to make sure

2082
01:50:33,000 --> 01:50:39,449
that this part of the process is working

2083
01:50:35,279 --> 01:50:42,479
okay so where we do the random UVW and

2084
01:50:39,449 --> 01:50:44,519
we get the point here for the cover P

2085
01:50:42,479 --> 01:50:45,299
and that we unpack it right I want to

2086
01:50:44,520 --> 01:50:49,020
make sure that there's nothing

2087
01:50:45,300 --> 01:50:53,100
particularly bizarre going on in there

2088
01:50:49,020 --> 01:50:56,820
okay so you can see so I forgot when I

2089
01:50:53,100 --> 01:50:59,310
wrote this code I didn't use the cover

2090
01:50:56,819 --> 01:50:59,710
key at all right so that's just totally

2091
01:50:59,310 --> 01:51:03,880
garbage

2092
01:50:59,710 --> 01:51:05,199
so this is actually that right so that

2093
01:51:03,880 --> 01:51:09,130
was probably a big part of that problem

2094
01:51:05,199 --> 01:51:11,710
as well okay so I'm gonna probably call

2095
01:51:09,130 --> 01:51:14,680
it there and we'll do more debugging of

2096
01:51:11,710 --> 01:51:16,630
this tomorrow but I think we're

2097
01:51:14,680 --> 01:51:18,190
basically where we want to be we've

2098
01:51:16,630 --> 01:51:21,369
we've done the systemic work there's

2099
01:51:18,189 --> 01:51:23,649
just some tuning but I think we're good

2100
01:51:21,369 --> 01:51:25,210
so if you look there you can see that

2101
01:51:23,649 --> 01:51:27,460
we've now got like rudimentary ground

2102
01:51:25,210 --> 01:51:30,310
cover sort of working I think the Z is

2103
01:51:27,460 --> 01:51:31,689
wrong on these so I think the collision

2104
01:51:30,310 --> 01:51:35,710
the collision volume is actually in the

2105
01:51:31,689 --> 01:51:38,500
wrong place so we need to debug that

2106
01:51:35,710 --> 01:51:42,579
tomorrow but you can see the ground

2107
01:51:38,500 --> 01:51:44,859
covers working okay now right and and

2108
01:51:42,579 --> 01:51:47,920
honestly that's pretty much it so we're

2109
01:51:44,859 --> 01:51:51,219
almost there the ground covers it's too

2110
01:51:47,920 --> 01:51:53,380
big at the moment you know it should be

2111
01:51:51,220 --> 01:51:56,619
more like that but other than that I

2112
01:51:53,380 --> 01:51:58,210
think we're okay the other thing I want

2113
01:51:56,619 --> 01:51:59,949
to take a quick look at is can I just

2114
01:51:58,210 --> 01:52:01,300
fix that Z value and then at that point

2115
01:51:59,949 --> 01:52:03,039
we're pretty much going into tomorrow

2116
01:52:01,300 --> 01:52:04,239
with mostly done and so then we can

2117
01:52:03,039 --> 01:52:06,220
maybe start looking at lighting and

2118
01:52:04,239 --> 01:52:10,719
getting the ground cover lit and all

2119
01:52:06,220 --> 01:52:12,760
that stuff all I wanted to look at here

2120
01:52:10,720 --> 01:52:15,699
was inside the room gen right when we're

2121
01:52:12,760 --> 01:52:18,390
actually this one we know that these

2122
01:52:15,699 --> 01:52:20,529
have correct collision volumes I believe

2123
01:52:18,390 --> 01:52:23,140
although I don't know if we Mankowski

2124
01:52:20,529 --> 01:52:25,779
some of them I don't think we do right

2125
01:52:23,140 --> 01:52:27,880
yeah so when we're actually creating the

2126
01:52:25,779 --> 01:52:29,349
collision volumes in here I'm putting it

2127
01:52:27,880 --> 01:52:31,000
sort of in the wrong place I just kind

2128
01:52:29,350 --> 01:52:34,600
of slapped it in there the question is

2129
01:52:31,000 --> 01:52:39,550
what was wrong with what I did why is my

2130
01:52:34,600 --> 01:52:41,640
Z getting kind of off I want to look at

2131
01:52:39,550 --> 01:52:44,170
how the piece is getting added at the

2132
01:52:41,640 --> 01:52:47,320
inside this one here how are we adding

2133
01:52:44,170 --> 01:52:49,119
it the the display piece there you can

2134
01:52:47,319 --> 01:52:51,159
see it's calling get radius and get

2135
01:52:49,119 --> 01:52:53,050
center on this thing called Vall which

2136
01:52:51,159 --> 01:52:57,279
is is actually the collision volume of

2137
01:52:53,050 --> 01:52:59,789
the unit what I'm assuming is this right

2138
01:52:57,279 --> 01:52:59,789
here

2139
01:53:03,059 --> 01:53:07,300
yeah I'm assuming that this is just

2140
01:53:05,139 --> 01:53:08,889
garbage we should be really doing this

2141
01:53:07,300 --> 01:53:11,349
ad piece call the same way we're doing

2142
01:53:08,889 --> 01:53:13,090
it here I think so I think what we want

2143
01:53:11,349 --> 01:53:18,369
to do there is when we get that wall

2144
01:53:13,090 --> 01:53:21,340
height right we just want to do this so

2145
01:53:18,368 --> 01:53:23,198
I'm gonna say yeah the ball is gonna be

2146
01:53:21,340 --> 01:53:26,769
the wall height and it's gonna be

2147
01:53:23,198 --> 01:53:29,978
relative to that p-value we're gonna

2148
01:53:26,769 --> 01:53:33,570
come in here and use the same stuff we

2149
01:53:29,979 --> 01:53:37,780
were using for the piece and get that

2150
01:53:33,569 --> 01:53:40,719
ready the oh seven oh seven part again

2151
01:53:37,779 --> 01:53:43,389
should be baked into the tiles automatic

2152
01:53:40,719 --> 01:53:48,639
creation of that stuff so then I'm gonna

2153
01:53:43,389 --> 01:53:51,248
call get center here so and I think

2154
01:53:48,639 --> 01:53:54,849
that's now those are in line more so

2155
01:53:51,248 --> 01:53:56,498
when we call this vowel call then the

2156
01:53:54,849 --> 01:53:58,328
place where we set the collision volume

2157
01:53:56,498 --> 01:54:01,719
to that should now be able to just use

2158
01:53:58,328 --> 01:54:03,158
that value directly now again I don't

2159
01:54:01,719 --> 01:54:04,448
really know why we were getting the

2160
01:54:03,158 --> 01:54:10,779
wrong Z there cuz I think that should be

2161
01:54:04,448 --> 01:54:12,279
basically doing the same thing but let's

2162
01:54:10,779 --> 01:54:14,578
just see what happens here I want to see

2163
01:54:12,279 --> 01:54:14,578
where we're at

2164
01:54:19,090 --> 01:54:30,680
okay I see what's going on so basically

2165
01:54:27,229 --> 01:54:33,889
that it's because the the volume wasn't

2166
01:54:30,680 --> 01:54:36,320
offset by how by whatever the stagger

2167
01:54:33,890 --> 01:54:38,079
was all right so let's just fix that and

2168
01:54:36,319 --> 01:54:40,489
then I think we're done for the day

2169
01:54:38,079 --> 01:54:42,710
good I'm glad we looked up what that was

2170
01:54:40,489 --> 01:54:46,159
that was gonna bug me if we didn't so if

2171
01:54:42,710 --> 01:54:50,590
you look here what happens in terms of

2172
01:54:46,159 --> 01:54:50,590
the staggering so

2173
01:54:59,139 --> 01:55:13,270
I guess I'm not sure why that would have

2174
01:55:01,719 --> 01:55:15,810
flattened everything out though what am

2175
01:55:13,270 --> 01:55:22,659
I missing there because that p-value

2176
01:55:15,810 --> 01:55:27,780
there's the randomization sort of of the

2177
01:55:22,658 --> 01:55:27,779
up and down float of that nd

2178
01:55:34,920 --> 01:55:43,440
oh I okay yeah I see so when we're doing

2179
01:55:40,079 --> 01:55:46,289
this make relative to and we're saying

2180
01:55:43,439 --> 01:55:52,049
we want this volume to relat to it this

2181
01:55:46,289 --> 01:55:58,470
is not offset yet so it hasn't been sort

2182
01:55:52,050 --> 01:56:00,630
of you know sort of triggered for any

2183
01:55:58,470 --> 01:56:02,220
kind of displacement that you might want

2184
01:56:00,630 --> 01:56:05,430
it to have like an uneven displacement

2185
01:56:02,220 --> 01:56:11,130
right so really I guess you want to do

2186
01:56:05,430 --> 01:56:12,360
this which is a little wonky and again

2187
01:56:11,130 --> 01:56:13,980
we probably want to streamline these

2188
01:56:12,359 --> 01:56:15,420
more now that we have good utility

2189
01:56:13,979 --> 01:56:19,739
functions we probably want to make those

2190
01:56:15,420 --> 01:56:22,109
a little bit more clean so that it's not

2191
01:56:19,739 --> 01:56:26,489
so weird and hard to parse there right

2192
01:56:22,109 --> 01:56:28,529
oh that was weird so when we actually

2193
01:56:26,489 --> 01:56:31,710
take the wall height and we get the P

2194
01:56:28,529 --> 01:56:34,649
here then we just need to do our

2195
01:56:31,710 --> 01:56:36,420
displacement right that's all we don't

2196
01:56:34,649 --> 01:56:40,319
need to take the wall height into

2197
01:56:36,420 --> 01:56:42,390
account at all and then when we displace

2198
01:56:40,319 --> 01:56:43,529
the entity the vault the collision

2199
01:56:42,390 --> 01:56:47,970
volume will just go with it

2200
01:56:43,529 --> 01:56:50,279
right so I think that should be fine the

2201
01:56:47,970 --> 01:56:52,170
only question is yeah where do we place

2202
01:56:50,279 --> 01:56:55,170
the like part you're actually standing

2203
01:56:52,170 --> 01:56:58,250
on but I think that should be fine so

2204
01:56:55,170 --> 01:56:58,250
then when we place the

2205
01:57:05,289 --> 01:57:17,510
when we place the actual part you're

2206
01:57:07,699 --> 01:57:21,738
standing on which it would be here this

2207
01:57:17,510 --> 01:57:24,079
needs to get sort of put at the top so

2208
01:57:21,738 --> 01:57:26,899
it sort of needs to yeah it needs to

2209
01:57:24,079 --> 01:57:29,269
take into account what the actual

2210
01:57:26,899 --> 01:57:31,009
collision volumes Minzy is for the area

2211
01:57:29,270 --> 01:57:34,670
so that because the ground P is up on

2212
01:57:31,010 --> 01:57:38,530
top of it right so in this case yeah the

2213
01:57:34,670 --> 01:57:38,529
ground P would be what

2214
01:57:45,538 --> 01:57:52,469
I guess it's just in the center which

2215
01:57:49,288 --> 01:57:55,380
that would be and then it's actually

2216
01:57:52,469 --> 01:58:00,658
well it's just the max of the the volume

2217
01:57:55,380 --> 01:58:04,500
right so whatever the offset is for the

2218
01:58:00,658 --> 01:58:04,948
entities actual top part that's what

2219
01:58:04,500 --> 01:58:07,380
it's gonna be

2220
01:58:04,948 --> 01:58:09,569
again I don't like having to do all this

2221
01:58:07,380 --> 01:58:11,309
math in here we really want this to be

2222
01:58:09,569 --> 01:58:14,279
something you can ask about entities and

2223
01:58:11,309 --> 01:58:16,139
I think we should kind of maybe tomorrow

2224
01:58:14,279 --> 01:58:17,729
that's actually what we'll do is clean

2225
01:58:16,139 --> 01:58:19,109
that up so that we're not constantly

2226
01:58:17,729 --> 01:58:23,669
talking about all these little pieces

2227
01:58:19,109 --> 01:58:29,698
like this but yeah the volume actually

2228
01:58:23,670 --> 01:58:32,399
has a right get dimensions I believe and

2229
01:58:29,698 --> 01:58:33,658
so you just want to go up to the top Z

2230
01:58:32,399 --> 01:58:35,429
wise and that's where you would place

2231
01:58:33,658 --> 01:58:40,859
the actual traversal point that entities

2232
01:58:35,429 --> 01:58:42,269
are standing on I think right well it

2233
01:58:40,859 --> 01:58:43,948
doesn't look like that actually worked

2234
01:58:42,269 --> 01:58:45,599
right because that's what when I

2235
01:58:43,948 --> 01:58:51,419
actually place where that ground P is

2236
01:58:45,599 --> 01:58:54,139
gonna be although we're we're not

2237
01:58:51,420 --> 01:58:54,139
actually using it

2238
01:58:56,769 --> 01:59:05,949
so when were we actually planning on

2239
01:58:59,760 --> 01:59:15,248
specifying that though like when are we

2240
01:59:05,948 --> 01:59:17,578
adding that traversable it's the

2241
01:59:15,248 --> 01:59:21,359
traversable that I wanted to change

2242
01:59:17,578 --> 01:59:21,359
when's that getting added

2243
01:59:26,788 --> 01:59:30,988
I don't know I don't know oh there it is

2244
01:59:28,979 --> 01:59:33,000
okay I'm like I'm losing my mind

2245
01:59:30,988 --> 01:59:35,459
so this is actually the part that I've

2246
01:59:33,000 --> 01:59:40,529
meant to change right so this actually

2247
01:59:35,460 --> 01:59:43,590
needs to be offset up from the ground

2248
01:59:40,529 --> 01:59:46,078
that traversable by whatever the amount

2249
01:59:43,590 --> 01:59:48,449
is here that you're actually using so

2250
01:59:46,078 --> 01:59:51,599
when it creates this information it

2251
01:59:48,448 --> 01:59:54,839
needs yeah it needs to know this ahead

2252
01:59:51,599 --> 01:59:56,760
of time right because that traversable

2253
01:59:54,840 --> 02:00:00,809
is always going to be however far up the

2254
01:59:56,760 --> 02:00:02,789
volume actually is and so yeah when we

2255
02:00:00,809 --> 02:00:06,059
come in here we've got to do like okay

2256
02:00:02,788 --> 02:00:07,649
what's the wall height and actually know

2257
02:00:06,059 --> 02:00:09,300
where the wall height gets set

2258
02:00:07,649 --> 02:00:14,399
differently okay it gets set differently

2259
02:00:09,300 --> 02:00:16,260
in here right so when we set the wall

2260
02:00:14,399 --> 02:00:19,759
height then we'd have to do this and

2261
02:00:16,260 --> 02:00:19,760
then we'd have to do this right so

2262
02:00:26,448 --> 02:00:32,368
assuming that we want a traversable on

2263
02:00:28,679 --> 02:00:34,500
this particular thing we need to place

2264
02:00:32,368 --> 02:00:36,839
the points such that it exists at the

2265
02:00:34,500 --> 02:00:38,399
top of the volume we know what that

2266
02:00:36,840 --> 02:00:43,559
actually is because we have the volume

2267
02:00:38,399 --> 02:00:47,098
here right and off we go I think this

2268
02:00:43,559 --> 02:00:53,309
could also be called get minzy's entropy

2269
02:00:47,099 --> 02:00:55,380
yeah so we can also just sorry maxi's

2270
02:00:53,309 --> 02:00:57,480
entropy so I think we can also just ask

2271
02:00:55,380 --> 02:01:00,779
for that position that's at the top of

2272
02:00:57,479 --> 02:01:02,638
that that volume and again this is all

2273
02:01:00,779 --> 02:01:08,219
relative to the entity so that should

2274
02:01:02,639 --> 02:01:10,788
work all right so I think that's all

2275
02:01:08,219 --> 02:01:13,260
fine the only thing I don't know now is

2276
02:01:10,788 --> 02:01:17,099
to what extent does that still line up

2277
02:01:13,260 --> 02:01:19,019
with room boundaries let's double check

2278
02:01:17,099 --> 02:01:21,650
that nothing particularly odd has

2279
02:01:19,019 --> 02:01:21,650
happened here

2280
02:01:37,039 --> 02:01:45,479
this looks fine so I think all that is

2281
02:01:41,810 --> 02:01:47,929
pretty good looking at the size of those

2282
02:01:45,479 --> 02:01:56,578
I'm just gonna adjust that now and then

2283
02:01:47,929 --> 02:01:58,020
we will call it a day so on my fill I'm

2284
02:01:56,578 --> 02:02:00,599
gonna say that those should be about

2285
02:01:58,020 --> 02:02:04,199
point 5 I'm also gonna say that maybe

2286
02:02:00,599 --> 02:02:07,260
there should be more of them and then

2287
02:02:04,198 --> 02:02:10,469
we're gonna say that that is that and go

2288
02:02:07,260 --> 02:02:12,060
to the q-and-a don't really know what we

2289
02:02:10,469 --> 02:02:18,920
want to do with some of these ground

2290
02:02:12,060 --> 02:02:18,920
recoveries things in the future but um

2291
02:02:21,590 --> 02:02:28,650
yeah so you can kind of see that we need

2292
02:02:27,270 --> 02:02:30,090
to start lighting them because they're

2293
02:02:28,649 --> 02:02:32,279
drastically different colors than the

2294
02:02:30,090 --> 02:02:34,170
things under that they're underneath but

2295
02:02:32,279 --> 02:02:36,059
that was you know we were going to be

2296
02:02:34,170 --> 02:02:39,029
lighting sprites soon anyway so that's

2297
02:02:36,060 --> 02:02:43,500
not really a big deal and we'll get to

2298
02:02:39,029 --> 02:02:46,259
that when we get to that we otherwise

2299
02:02:43,500 --> 02:02:48,929
are in pretty good shape here

2300
02:02:46,260 --> 02:02:52,590
I think these want to be maybe a little

2301
02:02:48,929 --> 02:02:57,480
slower than that they go up quite high

2302
02:02:52,590 --> 02:03:00,060
on the hero you can kind of see although

2303
02:02:57,479 --> 02:03:01,678
I guess they don't really when when when

2304
02:03:00,060 --> 02:03:08,429
the hearest well know that I guess they

2305
02:03:01,679 --> 02:03:10,469
kind of do so they are quite high so I

2306
02:03:08,429 --> 02:03:12,239
guess maybe maybe I was being a little

2307
02:03:10,469 --> 02:03:14,130
overzealous there of course I'm just not

2308
02:03:12,238 --> 02:03:17,368
sure how that maybe that the art assets

2309
02:03:14,130 --> 02:03:22,520
need to be drawn slightly differently to

2310
02:03:17,368 --> 02:03:22,519
sort of how we're doing these here but

2311
02:03:22,819 --> 02:03:27,779
I'm not really sure how they should be

2312
02:03:25,500 --> 02:03:29,939
set up to be roughly the right size

2313
02:03:27,779 --> 02:03:32,238
relative to the hero and and all that

2314
02:03:29,939 --> 02:03:32,238
stuff

2315
02:03:41,770 --> 02:03:46,450
so that might be more of the correct

2316
02:03:44,149 --> 02:03:46,449
size

2317
02:04:01,389 --> 02:04:06,639
yeah and then we just have more of them

2318
02:04:04,210 --> 02:04:08,380
and also even at this number if they

2319
02:04:06,639 --> 02:04:11,010
were distributed more properly I think

2320
02:04:08,380 --> 02:04:20,409
you would be fine with that too

2321
02:04:11,010 --> 02:04:23,380
right let's get the maximum number in

2322
02:04:20,408 --> 02:04:26,158
there just to stress the system as much

2323
02:04:23,380 --> 02:04:26,159
as possible

2324
02:04:31,788 --> 02:04:46,018
alright let us go to some Q&amp;A

2325
02:04:35,908 --> 02:04:47,339
oops that's not Q&amp;A there we go so I

2326
02:04:46,019 --> 02:04:48,780
think yeah I think we're in good shape

2327
02:04:47,340 --> 02:04:53,159
here but you can also see the slowdown

2328
02:04:48,779 --> 02:05:03,618
from it so I think like again that's the

2329
02:04:53,158 --> 02:05:06,299
saying we kind of want to motivate here

2330
02:05:03,618 --> 02:05:08,908
it's a frame display I don't know to

2331
02:05:06,300 --> 02:05:10,110
what extent we yeah like we're probably

2332
02:05:08,908 --> 02:05:11,488
stressing out the render too much we

2333
02:05:10,109 --> 02:05:12,808
also need and generate MIT maps and

2334
02:05:11,488 --> 02:05:14,848
stuff like there's so much we could do

2335
02:05:12,809 --> 02:05:16,650
to take heat off the graphic card that

2336
02:05:14,849 --> 02:05:19,980
we're not it we're we're really abusing

2337
02:05:16,649 --> 02:05:21,328
it right now and so you know kind of

2338
02:05:19,979 --> 02:05:24,209
going through that lighting pass and

2339
02:05:21,328 --> 02:05:29,460
making everything look nicer I think

2340
02:05:24,210 --> 02:05:32,130
that's a good like good kind of general

2341
02:05:29,460 --> 02:05:33,840
goal now that we've got you can all see

2342
02:05:32,130 --> 02:05:36,569
that there too sparkly right and that's

2343
02:05:33,840 --> 02:05:38,010
again because it's we need them to be

2344
02:05:36,569 --> 02:05:39,960
MIT mapped and we don't MIT map anything

2345
02:05:38,010 --> 02:05:42,030
yet and so it's it's pulling from a

2346
02:05:39,960 --> 02:05:46,139
drastically large amount of texture

2347
02:05:42,029 --> 02:05:49,368
memory for no reason right now - but

2348
02:05:46,139 --> 02:05:49,368
we're getting there I'm pretty pleased

2349
02:06:00,719 --> 02:06:04,960
to intend coverage to be used for things

2350
02:06:03,039 --> 02:06:06,760
like footprints and do you want cover to

2351
02:06:04,960 --> 02:06:09,250
be interacted with like grass shifting

2352
02:06:06,760 --> 02:06:11,940
as you walk through it to show a path or

2353
02:06:09,250 --> 02:06:11,939
someone has walked

2354
02:06:19,800 --> 02:06:24,480
so I guess I haven't really thought too

2355
02:06:22,920 --> 02:06:27,420
much about whether I wanted that or not

2356
02:06:24,479 --> 02:06:28,589
but one of the nice things about kind of

2357
02:06:27,420 --> 02:06:33,140
doing it the way we're doing it I

2358
02:06:28,590 --> 02:06:33,140
suppose is that that's pretty easy to do

2359
02:06:36,079 --> 02:06:43,079
so like for example if you did have some

2360
02:06:41,489 --> 02:06:46,260
parameter in there that you wanted to

2361
02:06:43,079 --> 02:06:51,269
modify now that becomes relatively easy

2362
02:06:46,260 --> 02:06:57,690
to do so for example suppose you took

2363
02:06:51,270 --> 02:07:00,090
the ground spec like if you want to do

2364
02:06:57,689 --> 02:07:02,009
something like that suppose you took the

2365
02:07:00,090 --> 02:07:05,069
ground cover spec and we made it a

2366
02:07:02,010 --> 02:07:07,890
little bit larger so we said in addition

2367
02:07:05,069 --> 02:07:11,130
to the 16 bits of data that's going to

2368
02:07:07,890 --> 02:07:15,150
say the type and the density like maybe

2369
02:07:11,130 --> 02:07:19,109
there's some other parameters that kind

2370
02:07:15,149 --> 02:07:22,589
of come in here that can be set by the

2371
02:07:19,109 --> 02:07:27,089
the game as people do stuff like who

2372
02:07:22,590 --> 02:07:30,449
knows what and so there's going to be

2373
02:07:27,090 --> 02:07:33,779
two more in here that are like reserved

2374
02:07:30,449 --> 02:07:37,619
a and reserved B for now because I have

2375
02:07:33,779 --> 02:07:41,399
no idea what right but we could totally

2376
02:07:37,619 --> 02:07:43,500
for each one of those set those as the

2377
02:07:41,399 --> 02:07:47,460
ground cover happens and then rebuild

2378
02:07:43,500 --> 02:07:56,189
the ground cover so for example you

2379
02:07:47,460 --> 02:08:04,369
could you could say that's every time

2380
02:07:56,189 --> 02:08:04,369
inanity lands on a section so like I

2381
02:08:04,699 --> 02:08:11,789
don't know where the best place to do

2382
02:08:06,899 --> 02:08:14,489
this would be but like inside the code

2383
02:08:11,789 --> 02:08:20,130
where we actually track when you land

2384
02:08:14,489 --> 02:08:22,689
down so when an entity is like hopping

2385
02:08:20,130 --> 02:08:25,770
along and it lands

2386
02:08:22,689 --> 02:08:25,769
[Music]

2387
02:08:39,819 --> 02:08:45,219
just trying to think about exactly what

2388
02:08:42,380 --> 02:08:45,220
needs to happen here

2389
02:08:49,140 --> 02:08:55,539
where do we actually do that

2390
02:08:51,659 --> 02:09:11,979
transitioning to planted that's what I

2391
02:08:55,539 --> 02:09:15,670
was wondering um so right here where we

2392
02:09:11,979 --> 02:09:16,149
do this you know you could do oh there

2393
02:09:15,670 --> 02:09:18,970
it is

2394
02:09:16,149 --> 02:09:21,939
that's spawning middle of fire so where

2395
02:09:18,970 --> 02:09:29,860
we do that we could at this point say

2396
02:09:21,939 --> 02:09:31,809
okay so whoever like is whoever you're

2397
02:09:29,859 --> 02:09:35,199
actually standing on we want to tamp

2398
02:09:31,810 --> 02:09:42,430
that grass down or something right

2399
02:09:35,199 --> 02:09:45,309
so like something like this you know I'm

2400
02:09:42,430 --> 02:09:47,140
saying and so when we call stomp on

2401
02:09:45,310 --> 02:09:51,760
enemy we'd probably say something like

2402
02:09:47,140 --> 02:09:56,560
well who is the actual entity that we're

2403
02:09:51,760 --> 02:10:02,310
now kind of stepping on right and I

2404
02:09:56,560 --> 02:10:02,310
guess that's the entity occupying there

2405
02:10:03,239 --> 02:10:08,050
let me make sure I have that right it's

2406
02:10:06,340 --> 02:10:10,630
been a long time since we didn't

2407
02:10:08,050 --> 02:10:13,510
anything with this but the but the

2408
02:10:10,630 --> 02:10:15,300
actual like thing you're standing on is

2409
02:10:13,510 --> 02:10:23,739
its I think called occupying right

2410
02:10:15,300 --> 02:10:25,989
answer traversable reference and so it's

2411
02:10:23,739 --> 02:10:28,689
gotten any ID in it right so I think

2412
02:10:25,989 --> 02:10:39,960
what we could do is say alright take

2413
02:10:28,689 --> 02:10:39,960
this this entity here and like update it

2414
02:10:41,880 --> 02:10:47,409
this actually spawned fire could happen

2415
02:10:45,130 --> 02:10:50,880
there as well but I guess we'll say this

2416
02:10:47,408 --> 02:10:57,598
person stomped on that person right

2417
02:10:50,880 --> 02:10:57,599
something like that you know I'm saying

2418
02:10:57,658 --> 02:11:19,899
and then what we do is we say that call

2419
02:11:03,010 --> 02:11:21,670
stomp on entity and that's really what

2420
02:11:19,899 --> 02:11:25,509
to name these here but I guess we would

2421
02:11:21,670 --> 02:11:31,420
call them the like stomper and the stomp

2422
02:11:25,510 --> 02:11:34,420
II um you know we could say all right so

2423
02:11:31,420 --> 02:11:40,500
who's ever doing the stomping they're

2424
02:11:34,420 --> 02:11:43,239
gonna like spew out some some crap right

2425
02:11:40,500 --> 02:11:46,118
but then we also want to take the stompy

2426
02:11:43,238 --> 02:11:50,649
and I guess in this case this section is

2427
02:11:46,118 --> 02:11:54,609
the ID look them up and see you know who

2428
02:11:50,649 --> 02:12:02,408
is that actually so the stompy equals

2429
02:11:54,609 --> 02:12:05,288
get enemy by ID of the stompy and if

2430
02:12:02,408 --> 02:12:08,649
that's actually a person maybe we want

2431
02:12:05,288 --> 02:12:11,679
to go in there and muck with it so then

2432
02:12:08,649 --> 02:12:14,308
we say like okay yeah the zombies like

2433
02:12:11,679 --> 02:12:14,309
ground cover

2434
02:12:25,390 --> 02:12:30,579
in fact I guess you could even make

2435
02:12:28,500 --> 02:12:32,380
footprints be one of the ground cover I

2436
02:12:30,579 --> 02:12:34,260
wasn't gonna do that but I guess you

2437
02:12:32,380 --> 02:12:37,060
could do that what I was gonna say is

2438
02:12:34,260 --> 02:12:39,100
let's just change like the color value

2439
02:12:37,060 --> 02:12:42,970
here so you know we would set maybe we

2440
02:12:39,100 --> 02:12:46,840
just say like okay the ground cover that

2441
02:12:42,970 --> 02:12:49,270
actually was requested in here so the

2442
02:12:46,840 --> 02:12:51,460
ground cover specs I'm just gonna reach

2443
02:12:49,270 --> 02:12:53,590
in I'm randomly doing nonsense here

2444
02:12:51,460 --> 02:12:55,869
right I'm gonna say that the reserved a

2445
02:12:53,590 --> 02:12:58,119
value is now set to 1 instead of 0 like

2446
02:12:55,869 --> 02:13:01,119
it was before or something right

2447
02:12:58,119 --> 02:13:04,689
and then I'm gonna say - like update

2448
02:13:01,119 --> 02:13:17,829
that entity so you know this this call

2449
02:13:04,689 --> 02:13:20,769
here I'm gonna call that again right so

2450
02:13:17,829 --> 02:13:23,409
you know that gives us some way of doing

2451
02:13:20,770 --> 02:13:27,340
something right we now are tracking

2452
02:13:23,409 --> 02:13:30,819
where you've stomped around and so maybe

2453
02:13:27,340 --> 02:13:35,680
we just want to do so what or will

2454
02:13:30,819 --> 02:13:38,619
actually heck sure forget the reserved

2455
02:13:35,680 --> 02:13:41,250
part for now let's do something even

2456
02:13:38,619 --> 02:13:41,250
stupider

2457
02:13:46,369 --> 02:14:00,859
let's just plant eight flowers

2458
02:13:50,840 --> 02:14:00,860
everywhere you hop right

2459
02:14:05,159 --> 02:14:10,829
make sense now in these you probably

2460
02:14:09,630 --> 02:14:14,159
can't really see them cuz they're

2461
02:14:10,829 --> 02:14:15,420
probably too tiny although it doesn't

2462
02:14:14,159 --> 02:14:17,939
look like they're actually happening are

2463
02:14:15,420 --> 02:14:21,630
we not properly oh because we don't have

2464
02:14:17,939 --> 02:14:23,369
enough space in the ground cover we're

2465
02:14:21,630 --> 02:14:24,750
out of space there we need more space in

2466
02:14:23,369 --> 02:14:30,659
our entity for the ground cover

2467
02:14:24,750 --> 02:14:32,789
lucky for me enemy max ground cover is

2468
02:14:30,659 --> 02:14:35,909
actually kind of cheap to expand because

2469
02:14:32,789 --> 02:14:42,170
again it's only in the local cache lucky

2470
02:14:35,909 --> 02:14:42,170
me it's almost like I planned for this

2471
02:14:43,489 --> 02:14:52,909
so I think you can just kind of go

2472
02:14:46,470 --> 02:14:52,909
through and do that and off you go right

2473
02:14:53,149 --> 02:14:58,349
and so you can do whatever probably with

2474
02:14:56,909 --> 02:15:00,510
a system like this you've got a lot of

2475
02:14:58,350 --> 02:15:06,390
flexibility you know I'm saying to you

2476
02:15:00,510 --> 02:15:08,850
now I don't actually want the hero to be

2477
02:15:06,390 --> 02:15:12,510
dropping flowers everywhere they go

2478
02:15:08,850 --> 02:15:14,880
particularly much that that doesn't

2479
02:15:12,510 --> 02:15:16,770
thrill me but you know let's say you

2480
02:15:14,880 --> 02:15:19,529
were trying to implement the like forest

2481
02:15:16,770 --> 02:15:20,460
spirit from spirited away you know well

2482
02:15:19,529 --> 02:15:28,800
now you've got it

2483
02:15:20,460 --> 02:15:32,239
I can even create it in my dungeon all

2484
02:15:28,800 --> 02:15:32,239
right those guys will do it too

2485
02:15:40,599 --> 02:15:49,670
so it's just kind of like a flower

2486
02:15:42,559 --> 02:15:51,739
festival here right you know which

2487
02:15:49,670 --> 02:15:54,349
depending on how much you like those

2488
02:15:51,738 --> 02:15:56,379
little flowers you may or may not care

2489
02:15:54,349 --> 02:15:56,380
for

2490
02:16:04,369 --> 02:16:09,079
will there be a sort of transition from

2491
02:16:06,800 --> 02:16:17,840
the doors to the outside

2492
02:16:09,079 --> 02:16:19,239
I suspect yes but curious of how I don't

2493
02:16:17,840 --> 02:16:21,770
think I know what you mean

2494
02:16:19,239 --> 02:16:24,369
transitioned from the doors to the

2495
02:16:21,770 --> 02:16:24,370
outside

2496
02:16:32,558 --> 02:16:37,808
got a fixed I have to stop taking that

2497
02:16:35,299 --> 02:16:40,488
alpha we got to put it to do in there

2498
02:16:37,808 --> 02:16:46,308
should just add it to our list can I can

2499
02:16:40,488 --> 02:16:51,109
I add it to our list err no because we

2500
02:16:46,308 --> 02:16:57,078
got logged out thank you so much

2501
02:16:51,109 --> 02:17:00,229
Oh will there be a transition of the

2502
02:16:57,078 --> 02:17:04,609
grass I so what I would probably say is

2503
02:17:00,228 --> 02:17:08,238
we will do a little bit but not much so

2504
02:17:04,609 --> 02:17:12,078
probably all we really do is right in

2505
02:17:08,238 --> 02:17:15,379
this region will have like less density

2506
02:17:12,078 --> 02:17:17,828
of grass and then will have more density

2507
02:17:15,379 --> 02:17:20,959
further up right but that's like we're

2508
02:17:17,828 --> 02:17:23,478
not we aren't even lighting our grass

2509
02:17:20,959 --> 02:17:25,098
yet so we're kind of not the point where

2510
02:17:23,478 --> 02:17:28,278
we're ready to be thinking about that

2511
02:17:25,099 --> 02:17:31,449
sort of thing obviously right that's

2512
02:17:28,279 --> 02:17:31,449
like a graphical update

2513
02:17:41,329 --> 02:17:45,200
if you step on a town more than once

2514
02:17:43,099 --> 02:17:47,599
with a flower sack only if we want them

2515
02:17:45,200 --> 02:17:49,790
to so right now they don't right they

2516
02:17:47,599 --> 02:17:52,760
they would just kind of you get one

2517
02:17:49,790 --> 02:17:54,410
splat of tiles and then they're done if

2518
02:17:52,760 --> 02:17:56,179
you wanted them to stack then what you

2519
02:17:54,409 --> 02:17:58,909
want to do is increase the density each

2520
02:17:56,179 --> 02:18:01,460
time so basically on here what you'd

2521
02:17:58,909 --> 02:18:03,619
want to do is say this is plus equals

2522
02:18:01,459 --> 02:18:05,839
eight so that they stack but then

2523
02:18:03,620 --> 02:18:07,219
remember you don't want to go too high

2524
02:18:05,840 --> 02:18:09,558
because eventually you'll overflow and

2525
02:18:07,218 --> 02:18:11,478
rap to zero I'll let it wrap to zero now

2526
02:18:09,558 --> 02:18:12,768
so you can see what I mean

2527
02:18:11,478 --> 02:18:15,648
but you would normally want to threshold

2528
02:18:12,769 --> 02:18:20,179
that value some at some maximum and then

2529
02:18:15,648 --> 02:18:21,739
don't go above that but if you don't do

2530
02:18:20,179 --> 02:18:23,359
that then what you can see is you just

2531
02:18:21,739 --> 02:18:24,769
keep adding flowers and flowers and

2532
02:18:23,359 --> 02:18:28,540
flowers and flowers and flowers and

2533
02:18:24,769 --> 02:18:33,318
flowers and flowers until finally you

2534
02:18:28,540 --> 02:18:35,960
wrapped the eight bit counter and then

2535
02:18:33,318 --> 02:18:38,029
you would get none so I should in theory

2536
02:18:35,959 --> 02:18:39,978
if I just keep hopping long enough I

2537
02:18:38,030 --> 02:18:41,719
should be able to wrap that value around

2538
02:18:39,978 --> 02:18:45,398
and then it'll go back to zero but it's

2539
02:18:41,718 --> 02:18:52,750
gonna thank me a little while to do it

2540
02:18:45,398 --> 02:18:55,308
there it is see it so normally you would

2541
02:18:52,750 --> 02:18:57,019
you would just threshold the value at

2542
02:18:55,308 --> 02:19:00,529
the maximum number of flowers you wanted

2543
02:18:57,019 --> 02:19:03,130
to put there right whatever that number

2544
02:19:00,530 --> 02:19:03,130
is but

2545
02:20:01,700 --> 02:20:05,000
all right

2546
02:20:16,998 --> 02:20:22,139
these guys have been this entire time

2547
02:20:19,818 --> 02:20:23,670
making flowers haven't they oh I guess

2548
02:20:22,139 --> 02:20:26,788
not because they wouldn't start until we

2549
02:20:23,670 --> 02:20:30,498
got here but they're just like little

2550
02:20:26,789 --> 02:20:30,498
flower dropping machines right

2551
02:21:32,870 --> 02:21:38,560
alright looks like no questions so I

2552
02:21:35,239 --> 02:21:42,228
think we're done I'm gonna pull that out

2553
02:21:38,559 --> 02:21:46,459
because I don't actually want that right

2554
02:21:42,228 --> 02:21:48,969
now but yeah that's how you would do it

2555
02:21:46,459 --> 02:21:57,739
we probably will do something like that

2556
02:21:48,969 --> 02:22:01,069
but not at the moment right and not

2557
02:21:57,739 --> 02:22:02,209
exactly that all right thank you

2558
02:22:01,069 --> 02:22:03,228
everyone for joining me for the upside

2559
02:22:02,209 --> 02:22:04,849
handmade hero it's what a pleasure

2560
02:22:03,228 --> 02:22:06,769
coating with you as always if you would

2561
02:22:04,850 --> 02:22:08,239
like to follow along the series you can

2562
02:22:06,770 --> 02:22:09,829
always fear it again and handmade he

2563
02:22:08,239 --> 02:22:11,989
rode up or gonna come to the source code

2564
02:22:09,829 --> 02:22:15,020
so you can follow along with it at home

2565
02:22:11,989 --> 02:22:18,409
I will be back here tomorrow at which

2566
02:22:15,020 --> 02:22:20,000
point I'm not sure exactly what we'll do

2567
02:22:18,409 --> 02:22:23,270
there's a lot of things we could be

2568
02:22:20,000 --> 02:22:27,049
doing right now and so we probably want

2569
02:22:23,270 --> 02:22:28,399
to do some of those things working with

2570
02:22:27,049 --> 02:22:30,769
the ground cover a little bit more is

2571
02:22:28,398 --> 02:22:32,148
probably a good idea however moving on

2572
02:22:30,770 --> 02:22:33,140
to the lighting is definitely something

2573
02:22:32,148 --> 02:22:35,629
I want to do because I'd like to get

2574
02:22:33,139 --> 02:22:36,889
that sorted and finished ground cover

2575
02:22:35,629 --> 02:22:40,159
and lighting were two of the big things

2576
02:22:36,889 --> 02:22:45,170
that we just had left to do that just

2577
02:22:40,159 --> 02:22:49,760
weren't done in the engine and so with

2578
02:22:45,170 --> 02:22:51,590
that I think that's probably it for our

2579
02:22:49,760 --> 02:22:58,670
cosmetics right I mean it's looking

2580
02:22:51,590 --> 02:22:59,989
pretty good I don't know yeah I don't

2581
02:22:58,670 --> 02:23:01,790
know that we have really anything else

2582
02:22:59,989 --> 02:23:03,439
we need to do in the engine why engine

2583
02:23:01,790 --> 02:23:06,859
land so I think at that point we're just

2584
02:23:03,439 --> 02:23:09,079
on gameplay I'll try to think if there's

2585
02:23:06,859 --> 02:23:10,460
anything else I want to do but we're

2586
02:23:09,079 --> 02:23:12,559
looking pretty good I like the look of

2587
02:23:10,459 --> 02:23:16,938
it now feels nice to hop around a

2588
02:23:12,559 --> 02:23:19,699
pretty-looking world so I think we're in

2589
02:23:16,939 --> 02:23:22,850
pretty good shape in terms of being like

2590
02:23:19,700 --> 02:23:24,920
nice nice visual right so I think like

2591
02:23:22,850 --> 02:23:27,920
just getting the lighting tightened up

2592
02:23:24,920 --> 02:23:30,200
and obviously improving also to a

2593
02:23:27,920 --> 02:23:31,760
certain extent the the ground cover

2594
02:23:30,200 --> 02:23:33,710
because we only just kind of hacked in

2595
02:23:31,760 --> 02:23:35,728
the first thing we probably want good

2596
02:23:33,709 --> 02:23:37,799
yeah better distribution there and

2597
02:23:35,728 --> 02:23:40,170
other stuff like that get the MIT maps

2598
02:23:37,799 --> 02:23:42,059
working so that stuff so so we'll push

2599
02:23:40,170 --> 02:23:44,158
forward on that and till then have fun

2600
02:23:42,059 --> 02:23:47,148
programming and I'll see everyone on the

2601
02:23:44,158 --> 02:23:47,148
Internet techies everybody

