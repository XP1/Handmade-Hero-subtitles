1
00:00:01,700 --> 00:00:06,990
hello everyone and welcome to another

2
00:00:05,068 --> 00:00:09,150
episode of handmade hero the show recode

3
00:00:06,990 --> 00:00:11,460
a complete game live on stream on Twitch

4
00:00:09,150 --> 00:00:12,929
no engines no libraries just us and

5
00:00:11,460 --> 00:00:14,969
basically we're doing it old-school

6
00:00:12,929 --> 00:00:16,649
we're kicking it old school we're doing

7
00:00:14,968 --> 00:00:18,059
it the way that you used to do it when

8
00:00:16,649 --> 00:00:20,849
you sat down in front of a computer and

9
00:00:18,059 --> 00:00:22,948
you're like it's just me and we're going

10
00:00:20,850 --> 00:00:25,019
to make this computer do something

11
00:00:22,949 --> 00:00:29,279
awesome right that is what we do here

12
00:00:25,018 --> 00:00:33,629
and we're in sort of the middle of you

13
00:00:29,278 --> 00:00:36,000
know a sort of a a big shift I guess I

14
00:00:33,630 --> 00:00:37,920
would say and I guess I want I want to

15
00:00:36,000 --> 00:00:40,200
sing yesterday i was expecting today to

16
00:00:37,920 --> 00:00:42,210
kind of be more in the middle of it as

17
00:00:40,200 --> 00:00:43,500
well but yesterday we kind of just typed

18
00:00:42,210 --> 00:00:45,239
in all the stuff we had to do and then

19
00:00:43,500 --> 00:00:46,500
we ran it and it kind of almost worked

20
00:00:45,238 --> 00:00:47,699
perfectly i think there were a couple

21
00:00:46,500 --> 00:00:50,039
things that weren't quite working right

22
00:00:47,700 --> 00:00:52,530
and so we kind of lucked out you know

23
00:00:50,039 --> 00:00:54,960
some days you just you luck out right

24
00:00:52,530 --> 00:00:56,399
and so today really i think mostly we're

25
00:00:54,960 --> 00:00:58,109
just doing a little tune-up in there and

26
00:00:56,399 --> 00:00:59,759
so we made me coming to the end and the

27
00:00:58,109 --> 00:01:02,489
thing that we were working on was moving

28
00:00:59,759 --> 00:01:05,099
over to a unified asset file so before

29
00:01:02,488 --> 00:01:07,590
we were loading bitmaps and wav files

30
00:01:05,099 --> 00:01:09,419
off disc just randomly like you might do

31
00:01:07,590 --> 00:01:10,890
and what i want to do is consolidate

32
00:01:09,420 --> 00:01:12,868
those so you could ship these little

33
00:01:10,890 --> 00:01:14,549
asset packs which were basically a

34
00:01:12,868 --> 00:01:16,228
bundle of an arbitrary number of assets

35
00:01:14,549 --> 00:01:17,909
in the game and that would include their

36
00:01:16,228 --> 00:01:19,798
metadata like when they should be used

37
00:01:17,909 --> 00:01:21,570
and that sort of stuff and then the game

38
00:01:19,799 --> 00:01:24,780
would just look at all of the asset

39
00:01:21,569 --> 00:01:26,938
files that were in you know the sort of

40
00:01:24,780 --> 00:01:28,200
startup directory for the game and it

41
00:01:26,938 --> 00:01:30,629
would merge all those together and that

42
00:01:28,200 --> 00:01:33,750
would be the assets for that the game

43
00:01:30,629 --> 00:01:37,289
would run with right and so that's what

44
00:01:33,750 --> 00:01:40,739
we did and yesterday we showed how to

45
00:01:37,290 --> 00:01:42,210
sort of change over to making we had our

46
00:01:40,739 --> 00:01:43,920
file API is used to just read a whole

47
00:01:42,209 --> 00:01:45,179
file of time we changed over to make it

48
00:01:43,920 --> 00:01:47,879
so she could read little pieces of the

49
00:01:45,180 --> 00:01:49,049
file and so that's all done now and so

50
00:01:47,879 --> 00:01:50,129
we're gonna do is hop back in there

51
00:01:49,049 --> 00:01:52,770
because there was a couple things I

52
00:01:50,129 --> 00:01:53,789
think with our the way asset membrane

53
00:01:52,769 --> 00:01:54,989
was lining up and there's a couple

54
00:01:53,790 --> 00:01:57,180
things I think there's a couple little

55
00:01:54,989 --> 00:01:58,739
bugs in there so even though we kind of

56
00:01:57,180 --> 00:02:01,409
it kind of worked the first time we try

57
00:01:58,739 --> 00:02:02,908
to I think it's not quite working and so

58
00:02:01,409 --> 00:02:04,950
we got to go in there and now do you

59
00:02:02,909 --> 00:02:06,210
know we're a time to even really step

60
00:02:04,950 --> 00:02:07,680
through it much of the de bugger so

61
00:02:06,209 --> 00:02:09,989
today we're going to do is go back in

62
00:02:07,680 --> 00:02:11,969
there just kind of clean it out all out

63
00:02:09,989 --> 00:02:16,860
make sure we've got everything working

64
00:02:11,969 --> 00:02:19,259
we want and then we can just move on to

65
00:02:16,860 --> 00:02:21,180
our second testing of it which is I'd

66
00:02:19,259 --> 00:02:23,879
like to test having more than one asset

67
00:02:21,180 --> 00:02:27,030
file so we'll go and we'll have you know

68
00:02:23,879 --> 00:02:29,460
our we have a little thing that does a

69
00:02:27,030 --> 00:02:33,060
test right writes out a asset file as a

70
00:02:29,460 --> 00:02:35,460
test and so what we could do is we could

71
00:02:33,060 --> 00:02:38,159
make that thing right out to separate

72
00:02:35,460 --> 00:02:40,200
asset files and you know make sure that

73
00:02:38,159 --> 00:02:42,719
the game can merge those two asset files

74
00:02:40,199 --> 00:02:45,569
together properly without making a

75
00:02:42,719 --> 00:02:46,560
mistake right and so that be that's sort

76
00:02:45,569 --> 00:02:48,030
of the next logical thing on the horizon

77
00:02:46,560 --> 00:02:49,469
because we need to make sure that that's

78
00:02:48,030 --> 00:02:50,819
actually working we wrote the code but

79
00:02:49,469 --> 00:02:54,030
we don't know if it works till we

80
00:02:50,819 --> 00:02:58,620
actually run it so today is day 1 53 on

81
00:02:54,030 --> 00:03:00,000
hand made hiro de 152 is the source code

82
00:02:58,620 --> 00:03:02,759
if you pre-ordered the game on handmade

83
00:03:00,000 --> 00:03:05,280
here org day 152 is the source code that

84
00:03:02,759 --> 00:03:08,370
you would want to unzip into your source

85
00:03:05,280 --> 00:03:10,319
code directory if you wanted to be at

86
00:03:08,370 --> 00:03:12,509
the exact place in the code base that

87
00:03:10,319 --> 00:03:15,180
I'm at when I start running right now

88
00:03:12,509 --> 00:03:18,780
right so I'm going to go ahead and load

89
00:03:15,180 --> 00:03:21,569
it up here here we go and mukuro dot cpp

90
00:03:18,780 --> 00:03:24,390
i'm gonna do my little compile just get

91
00:03:21,569 --> 00:03:27,479
things started and where we left off I

92
00:03:24,389 --> 00:03:29,669
you know like i said look to me like it

93
00:03:27,479 --> 00:03:34,909
wasn't quite right because i ran the

94
00:03:29,669 --> 00:03:37,409
game right and it sounded like mm-hmm oh

95
00:03:34,909 --> 00:03:39,959
that's unusual well okay so maybe not

96
00:03:37,409 --> 00:03:41,219
maybe we've got a better oh wait no that

97
00:03:39,959 --> 00:03:44,069
was we knew that was there that was

98
00:03:41,219 --> 00:03:45,389
there less time to write yeah that was

99
00:03:44,069 --> 00:03:47,669
sort of the indication that something

100
00:03:45,389 --> 00:03:48,929
was wrong but it's not actually a crash

101
00:03:47,669 --> 00:03:50,759
right thing that was actually just a

102
00:03:48,930 --> 00:03:53,459
cert that was like hey wait a minute yes

103
00:03:50,759 --> 00:03:56,159
it counts wrong but when we ran it yet

104
00:03:53,459 --> 00:03:59,099
something seemed to work correctly like

105
00:03:56,159 --> 00:04:02,299
sound you know it's streaming the sound

106
00:03:59,099 --> 00:04:02,299
and playing the sounds correctly

107
00:04:02,539 --> 00:04:10,370
yeah what and all of them what seemed to

108
00:04:05,688 --> 00:04:11,810
be there you know what and then we kind

109
00:04:10,370 --> 00:04:14,989
of have this weird thing though like

110
00:04:11,810 --> 00:04:17,899
where are the shadows right I don't see

111
00:04:14,989 --> 00:04:19,668
the shadows and so I think you know my

112
00:04:17,899 --> 00:04:20,839
my guests before we didn't have a chance

113
00:04:19,668 --> 00:04:22,788
to really live you look at it but my

114
00:04:20,839 --> 00:04:24,589
guess is that what's happening is when

115
00:04:22,788 --> 00:04:28,009
we loaded the asset files we forget to

116
00:04:24,589 --> 00:04:30,319
account for the fact that asset 0 is the

117
00:04:28,009 --> 00:04:33,080
null asset so we actually I think are

118
00:04:30,319 --> 00:04:35,689
loading the the shadow into the 0 slot

119
00:04:33,079 --> 00:04:37,279
which means that everything else still

120
00:04:35,689 --> 00:04:38,990
works correctly but when it when you go

121
00:04:37,279 --> 00:04:40,489
I want a shadow it goes okay here's the

122
00:04:38,990 --> 00:04:43,069
shadow handle it gives you back a SAT

123
00:04:40,490 --> 00:04:44,660
handle 0 and you're like oh everybody

124
00:04:43,069 --> 00:04:46,579
knows that's the null asset so it

125
00:04:44,660 --> 00:04:47,930
doesn't return anything right so I'm

126
00:04:46,579 --> 00:04:50,508
assuming that that's what's happening

127
00:04:47,930 --> 00:04:52,250
with our shadow and that's why we're in

128
00:04:50,509 --> 00:04:54,860
this situation where our shadows

129
00:04:52,250 --> 00:04:58,160
disappeared but every literally every

130
00:04:54,860 --> 00:05:01,250
last thing other than that seems to be

131
00:04:58,160 --> 00:05:02,539
loading properly and identified properly

132
00:05:01,250 --> 00:05:04,848
right like that's the head that's a

133
00:05:02,538 --> 00:05:06,439
tourist oh that's the legs there's the

134
00:05:04,848 --> 00:05:08,269
other head there's the other tour so

135
00:05:06,439 --> 00:05:10,848
there's all the ground patches there's

136
00:05:08,269 --> 00:05:13,310
the trees like every other bitmap seem

137
00:05:10,848 --> 00:05:14,959
to come in and identify itself properly

138
00:05:13,310 --> 00:05:19,639
and so it's just a question of like okay

139
00:05:14,959 --> 00:05:21,739
you know what's what's going on right so

140
00:05:19,639 --> 00:05:23,210
that's my guess just having sort of when

141
00:05:21,740 --> 00:05:24,560
we when we first ran it yesterday that's

142
00:05:23,209 --> 00:05:28,250
what i was thinking in my head oh we

143
00:05:24,560 --> 00:05:30,220
must have missed that but i'm going to

144
00:05:28,250 --> 00:05:34,279
use that as an excuse to to kind of just

145
00:05:30,220 --> 00:05:36,620
take a quick look again at when we do

146
00:05:34,279 --> 00:05:38,269
test asset builder what i want to do

147
00:05:36,620 --> 00:05:41,750
here is I want to kind of take a look

148
00:05:38,269 --> 00:05:43,728
and see when we did our asset file

149
00:05:41,750 --> 00:05:45,560
creation you know I don't really

150
00:05:43,728 --> 00:05:47,750
remember I don't remember what we did

151
00:05:45,560 --> 00:05:50,629
with zero I don't remember if we even

152
00:05:47,750 --> 00:05:51,829
really looked at that in the code and so

153
00:05:50,629 --> 00:05:54,139
what I wanted to do is just kinda take a

154
00:05:51,829 --> 00:05:56,089
quick look through it here and see what

155
00:05:54,139 --> 00:05:59,418
was supposed to happen in the asset file

156
00:05:56,089 --> 00:06:01,158
right and so what it looks like here

157
00:05:59,418 --> 00:06:02,990
right if you see it looks like it sets

158
00:06:01,158 --> 00:06:06,439
the asset count to one which means it's

159
00:06:02,990 --> 00:06:09,379
going to leave space the zero asset the

160
00:06:06,439 --> 00:06:11,990
zero the asset index zero will actually

161
00:06:09,379 --> 00:06:14,240
be no there won't be anything in there

162
00:06:11,990 --> 00:06:16,310
and what I'm thinking you know in my

163
00:06:14,240 --> 00:06:18,259
head I don't think that's a very good

164
00:06:16,310 --> 00:06:20,180
idea I don't think it's a very good idea

165
00:06:18,259 --> 00:06:21,920
for the asset bundler to leave slot 0

166
00:06:20,180 --> 00:06:25,310
open and the reason I don't think that

167
00:06:21,920 --> 00:06:27,140
that's a good idea is because i feel

168
00:06:25,310 --> 00:06:31,069
like the asset bundler doesn't need to

169
00:06:27,139 --> 00:06:32,779
leave those slot well you know as I'm

170
00:06:31,069 --> 00:06:34,639
seeing that I kind of take and maybe I'm

171
00:06:32,779 --> 00:06:37,250
even taking it back because if things

172
00:06:34,639 --> 00:06:39,139
inside the asset file had to refer to

173
00:06:37,250 --> 00:06:40,790
had to have a null pointer as well they

174
00:06:39,139 --> 00:06:42,829
would need to do that so maybe you know

175
00:06:40,790 --> 00:06:44,750
what maybe that should stay and so what

176
00:06:42,829 --> 00:06:46,879
that means is that the first asset in

177
00:06:44,750 --> 00:06:49,699
that file is going to be the null asset

178
00:06:46,879 --> 00:06:52,040
it's going to be a garbage entity you

179
00:06:49,699 --> 00:06:54,349
know garbage asset that should never be

180
00:06:52,040 --> 00:06:56,000
loaded and so what we need to do in the

181
00:06:54,350 --> 00:06:58,939
handmade asset thing is we need to make

182
00:06:56,000 --> 00:07:01,069
sure that we're correctly expecting that

183
00:06:58,939 --> 00:07:04,219
right that we're doing the right thing

184
00:07:01,069 --> 00:07:05,659
there and actually you know being aware

185
00:07:04,220 --> 00:07:10,310
of the fact that that that zero with

186
00:07:05,660 --> 00:07:15,890
entity is not in there and so on so if

187
00:07:10,310 --> 00:07:17,449
you look at what we're doing here if you

188
00:07:15,889 --> 00:07:19,819
look at what we're doing here I think we

189
00:07:17,449 --> 00:07:20,959
can kind of see what the problem I think

190
00:07:19,819 --> 00:07:23,889
we can kind of see what the problem is

191
00:07:20,959 --> 00:07:26,449
right so the asset count in the file

192
00:07:23,889 --> 00:07:28,099
first of all it let's talk about these

193
00:07:26,449 --> 00:07:29,990
problems one time so first of all we

194
00:07:28,100 --> 00:07:31,670
have this assertion and the assertions

195
00:07:29,990 --> 00:07:33,620
saying the number of assets we actually

196
00:07:31,670 --> 00:07:35,480
processed out of the asset file was one

197
00:07:33,620 --> 00:07:37,129
less we when we looked at it it's one

198
00:07:35,480 --> 00:07:39,830
less than the asset count we were

199
00:07:37,129 --> 00:07:41,930
actually expecting right and we can sort

200
00:07:39,829 --> 00:07:43,099
of see exactly why that would be we

201
00:07:41,930 --> 00:07:44,360
don't even you really need to

202
00:07:43,100 --> 00:07:46,100
investigate further we already know

203
00:07:44,360 --> 00:07:47,750
exact whether it would be and the reason

204
00:07:46,100 --> 00:07:49,040
is because here's the asset count that

205
00:07:47,750 --> 00:07:50,389
we that we count up at the beginning

206
00:07:49,040 --> 00:07:52,340
when we look at our HHA files and we

207
00:07:50,389 --> 00:07:54,259
only have one of them and that asset

208
00:07:52,339 --> 00:07:55,699
count here is going to be 1 plus the

209
00:07:54,259 --> 00:07:56,930
number of actual assets in the file

210
00:07:55,699 --> 00:08:00,079
because it's going to be that 0 slot

211
00:07:56,930 --> 00:08:03,259
right so if there are 50 assets in the

212
00:08:00,079 --> 00:08:04,729
game it's going to report 51 okay then

213
00:08:03,259 --> 00:08:07,159
what happens down here when we actually

214
00:08:04,730 --> 00:08:10,910
load them out we only load out the

215
00:08:07,160 --> 00:08:13,910
assets that are actually invalid type

216
00:08:10,910 --> 00:08:15,890
asset types right because we're picking

217
00:08:13,910 --> 00:08:17,960
and we're basically doing that asset

218
00:08:15,889 --> 00:08:19,879
merge and the asset merge never loads

219
00:08:17,959 --> 00:08:21,799
the null asset type it never loads

220
00:08:19,879 --> 00:08:23,839
things with that aren't in an asset type

221
00:08:21,800 --> 00:08:25,280
of right and that first asset is in the

222
00:08:23,839 --> 00:08:27,919
last it's not in an asset type of right

223
00:08:25,279 --> 00:08:30,229
so we're only going to load 50 assets

224
00:08:27,920 --> 00:08:32,479
total out of the file even if

225
00:08:30,230 --> 00:08:37,039
were 51 with Anna lacet that mill assets

226
00:08:32,479 --> 00:08:38,990
never going to get touched right and so

227
00:08:37,039 --> 00:08:40,610
that is the first thing that we would

228
00:08:38,990 --> 00:08:42,979
have to fix the first thing we have to

229
00:08:40,610 --> 00:08:44,810
sit fix is when we increment the asset

230
00:08:42,979 --> 00:08:46,340
count we're going to have to subtract

231
00:08:44,809 --> 00:08:48,349
one from the asset count in the file

232
00:08:46,340 --> 00:08:51,230
right and we're going to have to that's

233
00:08:48,350 --> 00:08:57,009
not to do that's a note the first slot

234
00:08:51,230 --> 00:09:02,810
in every HHA is a null asset preserve

235
00:08:57,009 --> 00:09:07,730
right so we don't count it as something

236
00:09:02,809 --> 00:09:09,829
we will need space for right so that's

237
00:09:07,730 --> 00:09:11,810
time and that way so I think we would

238
00:09:09,830 --> 00:09:13,310
have seen let's say we have three HHH

239
00:09:11,809 --> 00:09:14,779
files is our number at the end would've

240
00:09:13,309 --> 00:09:17,149
been off by three instead of off by one

241
00:09:14,779 --> 00:09:21,439
because we left by 14 for every file

242
00:09:17,149 --> 00:09:22,639
that we have okay and similarly up here

243
00:09:21,440 --> 00:09:24,950
we kind of have the opposite problem

244
00:09:22,639 --> 00:09:27,379
here we're starting out at asset zero

245
00:09:24,950 --> 00:09:29,840
but the problem is we actually want to

246
00:09:27,379 --> 00:09:32,450
be starting off at asset one because we

247
00:09:29,840 --> 00:09:34,040
want to leave that null spot open right

248
00:09:32,450 --> 00:09:37,160
so we want to make sure that we have

249
00:09:34,039 --> 00:09:39,079
exactly one null rather than one Mel per

250
00:09:37,159 --> 00:09:41,389
file which is what we were doing before

251
00:09:39,080 --> 00:09:43,340
right so we want to subtract one from

252
00:09:41,389 --> 00:09:45,080
the s I got here and started at one here

253
00:09:43,340 --> 00:09:48,470
because that's what gives us the actual

254
00:09:45,080 --> 00:09:52,820
layout we want one no total no matter

255
00:09:48,470 --> 00:09:59,060
how many files there are okay so that's

256
00:09:52,820 --> 00:10:02,000
thing one thing two is when we actually

257
00:09:59,059 --> 00:10:03,259
start loading the assets right when we

258
00:10:02,000 --> 00:10:04,700
actually start loading the assets we

259
00:10:03,259 --> 00:10:06,950
have the problem of the asset count

260
00:10:04,700 --> 00:10:09,220
starts at zero but really we need to

261
00:10:06,950 --> 00:10:11,870
reserve that for the metal asset right

262
00:10:09,220 --> 00:10:15,139
so what we need to do is we need to

263
00:10:11,870 --> 00:10:16,730
first make a null asset right so we want

264
00:10:15,139 --> 00:10:18,559
to basically make a null asset here

265
00:10:16,730 --> 00:10:19,940
where we're going to take a look I

266
00:10:18,559 --> 00:10:22,909
suppose we should actually just generate

267
00:10:19,940 --> 00:10:24,380
one where we do a zero struck we're just

268
00:10:22,909 --> 00:10:26,149
going to say you know what that first

269
00:10:24,379 --> 00:10:33,399
asset right that if we're going to

270
00:10:26,149 --> 00:10:36,649
assets asset plus the asset count right

271
00:10:33,399 --> 00:10:38,720
we want to take that asset and we want

272
00:10:36,649 --> 00:10:40,399
to zero that out right we want to take

273
00:10:38,720 --> 00:10:41,629
whatever that is and we want to clear it

274
00:10:40,399 --> 00:10:43,549
so that if anyone actually ever looks at

275
00:10:41,629 --> 00:10:44,870
it it's just a bunch of zeros

276
00:10:43,549 --> 00:10:47,149
really ever should look at it but just

277
00:10:44,870 --> 00:10:49,129
so we know this is 20 it's just blank in

278
00:10:47,149 --> 00:10:51,708
there right and then we increment the

279
00:10:49,129 --> 00:10:55,939
asset count by one right to make sure so

280
00:10:51,708 --> 00:10:59,479
we want to do no Casey reserve one null

281
00:10:55,940 --> 00:11:04,459
empty at that's all right what no asset

282
00:10:59,480 --> 00:11:06,950
at the beginning and I think that will

283
00:11:04,458 --> 00:11:09,379
now align things properly compared to

284
00:11:06,950 --> 00:11:11,899
what we were doing for and hey what do

285
00:11:09,379 --> 00:11:14,450
you know the shadows are back and we

286
00:11:11,899 --> 00:11:15,980
don't get that assertion so now I think

287
00:11:14,450 --> 00:11:18,050
we're in a little bit better shape to

288
00:11:15,980 --> 00:11:19,789
proceed because like I said I think you

289
00:11:18,049 --> 00:11:21,458
know what I saw it I thought come up I

290
00:11:19,789 --> 00:11:24,319
was like I kind of kind of think I know

291
00:11:21,458 --> 00:11:27,289
roughly what's going on there and and

292
00:11:24,320 --> 00:11:28,730
that was clearly a problem right so now

293
00:11:27,289 --> 00:11:30,860
that we've got that what I'd like to do

294
00:11:28,730 --> 00:11:32,778
is like I said I'd like to move on to

295
00:11:30,860 --> 00:11:34,129
testing to make sure because you know

296
00:11:32,778 --> 00:11:37,399
right now the code appears to be working

297
00:11:34,129 --> 00:11:39,919
but we're only loading one HHA file so

298
00:11:37,399 --> 00:11:42,169
for all we know this asset merging might

299
00:11:39,919 --> 00:11:44,088
totally fall apart and break as soon as

300
00:11:42,169 --> 00:11:45,708
you actually have two files because all

301
00:11:44,089 --> 00:11:47,180
of the all of the merging that's going

302
00:11:45,708 --> 00:11:50,000
to happen is really basic right now

303
00:11:47,179 --> 00:11:51,620
because it's all loaded basically

304
00:11:50,000 --> 00:11:54,500
exactly you know it's loaded essentially

305
00:11:51,620 --> 00:11:57,049
the exact same way as it was before and

306
00:11:54,500 --> 00:11:59,328
so some things about whoop that's I was

307
00:11:57,049 --> 00:12:01,250
a little sometimes I put my palm

308
00:11:59,328 --> 00:12:03,559
accidentally on the little like part of

309
00:12:01,250 --> 00:12:06,289
the the wacom tablet scrolls and it goes

310
00:12:03,559 --> 00:12:07,639
nuts right gotta maybe I should disable

311
00:12:06,289 --> 00:12:10,879
that I think I probably could disable

312
00:12:07,639 --> 00:12:12,350
that pretty easily but anyway so I feel

313
00:12:10,879 --> 00:12:14,958
like we have the exact same thing here

314
00:12:12,350 --> 00:12:17,089
with tags potentially since we want to

315
00:12:14,958 --> 00:12:18,859
reserve a null tag right I think we want

316
00:12:17,089 --> 00:12:20,180
to do something like that and since we

317
00:12:18,860 --> 00:12:21,950
were reserving in they'll tag in the

318
00:12:20,179 --> 00:12:25,009
file as well I think the same is good

319
00:12:21,950 --> 00:12:27,410
thing is going to be true here right so

320
00:12:25,009 --> 00:12:31,370
we want them like the first asset and

321
00:12:27,409 --> 00:12:33,110
tagged slot is a null so we don't count

322
00:12:31,370 --> 00:12:34,220
it assuming we need space for it so I

323
00:12:33,110 --> 00:12:36,560
think we want to do exactly the same

324
00:12:34,220 --> 00:12:39,230
things here all is that again all

325
00:12:36,559 --> 00:12:41,689
exactly the same stuff and so that that

326
00:12:39,230 --> 00:12:43,820
way when we do the tag base the tag base

327
00:12:41,690 --> 00:12:47,930
starts at one right instead of starting

328
00:12:43,820 --> 00:12:49,339
at zero and is based from there up and

329
00:12:47,929 --> 00:12:53,750
then similarly when we come in here

330
00:12:49,339 --> 00:12:57,200
right and we do our tag count I want to

331
00:12:53,750 --> 00:13:04,220
do reserve one ml tag at the beginning I

332
00:12:57,200 --> 00:13:06,020
10 struct be that particular tag right

333
00:13:04,220 --> 00:13:10,279
and then I want to increment that tat

334
00:13:06,019 --> 00:13:12,019
count by one and then well you know what

335
00:13:10,279 --> 00:13:14,059
that's actually not how the tag count

336
00:13:12,019 --> 00:13:18,860
works i forgot the tag count i think is

337
00:13:14,059 --> 00:13:24,679
actually already handled up here right

338
00:13:18,860 --> 00:13:27,649
so that's this this part is never

339
00:13:24,679 --> 00:13:31,370
actually used right yeah so really i

340
00:13:27,649 --> 00:13:36,769
just want to do that i just want to

341
00:13:31,370 --> 00:13:39,649
clear that initial tag right and that's

342
00:13:36,769 --> 00:13:41,269
fine so we're do it here and the tag

343
00:13:39,649 --> 00:13:45,199
base has already be set up for us we

344
00:13:41,269 --> 00:13:47,240
don't have to worry about that so there

345
00:13:45,200 --> 00:13:49,790
we go and I think that's all relatively

346
00:13:47,240 --> 00:13:51,500
good that all seems pretty good we can

347
00:13:49,789 --> 00:13:54,169
now get rid of this guy this code is the

348
00:13:51,500 --> 00:13:56,539
old file test code that we had we can

349
00:13:54,169 --> 00:13:59,000
get rid of that and now you know we've

350
00:13:56,539 --> 00:14:01,519
got sort of our file stuff looks pretty

351
00:13:59,000 --> 00:14:02,809
good so let's go ahead and test that

352
00:14:01,519 --> 00:14:04,779
with the tags and make sure that the

353
00:14:02,809 --> 00:14:08,899
tags are still being aligned properly

354
00:14:04,779 --> 00:14:11,299
oops not at all apparently what did I do

355
00:14:08,899 --> 00:14:13,009
wrong there still got the asset tag

356
00:14:11,299 --> 00:14:15,139
count right it's got the tag base right

357
00:14:13,009 --> 00:14:17,269
we're still incrementing it we do

358
00:14:15,139 --> 00:14:24,080
correctly account for that in the asset

359
00:14:17,269 --> 00:14:26,600
yes we do so that's all good but HJ

360
00:14:24,080 --> 00:14:32,270
asset tag 0 we are zeroing that struct

361
00:14:26,600 --> 00:14:35,090
which should be fine right and then we

362
00:14:32,269 --> 00:14:40,389
read them all into the tag base so I

363
00:14:35,090 --> 00:14:40,389
don't know why that would be broken

364
00:14:46,769 --> 00:14:53,740
you know what I do know why that would

365
00:14:48,669 --> 00:14:55,838
be broken now that i think about it so

366
00:14:53,740 --> 00:14:57,639
what I realized here is this is actually

367
00:14:55,839 --> 00:14:59,500
a little bit wrong right because the

368
00:14:57,639 --> 00:15:03,669
number of tags is the tag count minus

369
00:14:59,500 --> 00:15:07,778
one right and here we're actually using

370
00:15:03,669 --> 00:15:11,198
the tag count regular so what we really

371
00:15:07,778 --> 00:15:17,860
need to do is you know we need to skip

372
00:15:11,198 --> 00:15:21,338
the first tag right which would require

373
00:15:17,860 --> 00:15:23,919
us to do something like this right we

374
00:15:21,339 --> 00:15:26,170
want to load one less tag right and we

375
00:15:23,919 --> 00:15:28,360
want to read like this is the thing

376
00:15:26,169 --> 00:15:31,809
that's reading it in it's reading it

377
00:15:28,360 --> 00:15:34,570
into the correct place right but we need

378
00:15:31,809 --> 00:15:38,439
to skip the first tag here where we do

379
00:15:34,570 --> 00:15:40,329
file header tags right so where it's

380
00:15:38,440 --> 00:15:43,060
telling us to do it we need to skip

381
00:15:40,328 --> 00:15:45,549
forward one tag to skip the null tag

382
00:15:43,059 --> 00:15:48,039
right so we're going to skip the first

383
00:15:45,549 --> 00:15:49,359
nut tag since the snow then what's going

384
00:15:48,039 --> 00:15:52,899
to happen down here is when we're

385
00:15:49,360 --> 00:15:56,169
rebasing the tag right that tag base

386
00:15:52,899 --> 00:16:00,309
again the tag base is not quite correct

387
00:15:56,169 --> 00:16:02,409
because the null tag is sort of a

388
00:16:00,309 --> 00:16:05,229
different tag than the other tags right

389
00:16:02,409 --> 00:16:07,208
the null tag is getting collapse down so

390
00:16:05,230 --> 00:16:10,180
what we really have to do is say if the

391
00:16:07,208 --> 00:16:13,239
asset HHA first tag index right if that

392
00:16:10,179 --> 00:16:15,129
equals 0 then what we would want to do

393
00:16:13,240 --> 00:16:17,169
is just make sure that everyone actually

394
00:16:15,129 --> 00:16:20,620
equals 0 right that everything is mapped

395
00:16:17,169 --> 00:16:22,778
to the no tag right on the other hand if

396
00:16:20,620 --> 00:16:24,639
it's not equal to 0 then what we want to

397
00:16:22,778 --> 00:16:26,350
do is move it up by the tag base but

398
00:16:24,639 --> 00:16:29,139
again we would move it up by the tag

399
00:16:26,350 --> 00:16:31,269
base minus 1 right because we would want

400
00:16:29,139 --> 00:16:33,278
to move it up we would want to move it

401
00:16:31,269 --> 00:16:35,740
up to its location but minus that you

402
00:16:33,278 --> 00:16:37,389
know it's 0 tag and so again this

403
00:16:35,740 --> 00:16:39,759
complexity comes from the fact that we

404
00:16:37,389 --> 00:16:41,769
we don't want to duplicate the fact that

405
00:16:39,759 --> 00:16:46,328
there are many no tags when we do that

406
00:16:41,769 --> 00:16:49,929
shift up right yeah so that's a little

407
00:16:46,328 --> 00:16:51,458
janky oops that's left tag index so

408
00:16:49,929 --> 00:16:53,919
that's a little janky but i'm not sure

409
00:16:51,458 --> 00:16:56,139
like i have to think about it but i'm

410
00:16:53,919 --> 00:16:57,789
not sure there's a lot of ways to unjam

411
00:16:56,139 --> 00:16:59,409
by that because but it by its very

412
00:16:57,789 --> 00:17:00,579
nature we're kind of merging these

413
00:16:59,409 --> 00:17:04,029
arrays so there's going to be some

414
00:17:00,580 --> 00:17:06,700
finicky kind of like handling of the

415
00:17:04,029 --> 00:17:09,759
edges of that just by you know by its

416
00:17:06,700 --> 00:17:12,309
very nature right and so I feel like on

417
00:17:09,759 --> 00:17:13,690
the whole that's probably fine I'm not

418
00:17:12,309 --> 00:17:15,578
too worried about the fact that it's a

419
00:17:13,690 --> 00:17:17,049
little finicky again it only really

420
00:17:15,578 --> 00:17:18,789
happens at load time and it's something

421
00:17:17,049 --> 00:17:21,490
that's not too hard to verify and test

422
00:17:18,789 --> 00:17:23,680
should we need to really like take a

423
00:17:21,490 --> 00:17:26,680
more you know a careful look at it at

424
00:17:23,680 --> 00:17:28,240
some point so that looks pretty good I'm

425
00:17:26,680 --> 00:17:30,820
going to go ahead and pop over to test

426
00:17:28,240 --> 00:17:32,410
asset builder here and I'm going to try

427
00:17:30,819 --> 00:17:34,659
and figure out a good way that we can

428
00:17:32,410 --> 00:17:36,970
make something that splits this into two

429
00:17:34,660 --> 00:17:39,330
HHA files so that we can actually test

430
00:17:36,970 --> 00:17:41,650
to see whether it's working at all right

431
00:17:39,329 --> 00:17:43,689
and so what you can see here is we've

432
00:17:41,650 --> 00:17:45,640
got this code that writes out the file

433
00:17:43,690 --> 00:17:46,750
and so what I'm going to do is I'm going

434
00:17:45,640 --> 00:17:50,980
to try and pull I'm going to try and

435
00:17:46,750 --> 00:17:53,769
extract that part out so that I can do

436
00:17:50,980 --> 00:17:55,360
it more than once all right so all I'm

437
00:17:53,769 --> 00:17:58,029
going to do here right is I'm just going

438
00:17:55,359 --> 00:18:00,490
to go ahead and you know extract that in

439
00:17:58,029 --> 00:18:03,879
the in the most direct way you know

440
00:18:00,490 --> 00:18:04,960
exactly how you would think again kind

441
00:18:03,880 --> 00:18:06,190
of doing this is that compression

442
00:18:04,960 --> 00:18:07,930
oriented programming that I'm talking

443
00:18:06,190 --> 00:18:10,299
about here's something I have that I

444
00:18:07,930 --> 00:18:11,860
want to do I want to do it twice so I'm

445
00:18:10,299 --> 00:18:13,960
literally just pulling it out just at

446
00:18:11,859 --> 00:18:15,549
that time and making the thing that I

447
00:18:13,960 --> 00:18:17,500
can call twice right and I'm not doing

448
00:18:15,549 --> 00:18:19,740
anything more fancy than that it's

449
00:18:17,500 --> 00:18:23,859
really really really really basic right

450
00:18:19,740 --> 00:18:25,329
so this is a little right HHA and so

451
00:18:23,859 --> 00:18:27,729
then what I'm going to do is I'm going

452
00:18:25,329 --> 00:18:29,859
to you know make something like this

453
00:18:27,730 --> 00:18:32,860
where you pass it in a file name and

454
00:18:29,859 --> 00:18:36,099
then I'm going to replace oops I'm going

455
00:18:32,859 --> 00:18:38,469
to replace that hard coded file name

456
00:18:36,099 --> 00:18:40,509
with one in here that it can pass so you

457
00:18:38,470 --> 00:18:43,269
kind of say okay you know now would be a

458
00:18:40,509 --> 00:18:45,099
good time to write the HHA i want you to

459
00:18:43,269 --> 00:18:46,450
write it to this file right so we're

460
00:18:45,099 --> 00:18:48,099
going to have to pass in the assets

461
00:18:46,450 --> 00:18:50,110
because it's going to need something to

462
00:18:48,099 --> 00:18:54,549
write so it's going to need you know

463
00:18:50,109 --> 00:18:56,649
this pointer here so there we go and

464
00:18:54,549 --> 00:18:58,089
then we'll see what compositors we have

465
00:18:56,650 --> 00:19:00,040
okay we don't have any so that that's

466
00:18:58,089 --> 00:19:02,259
how we would write out an asset as a

467
00:19:00,039 --> 00:19:05,700
function call and once I've got that now

468
00:19:02,259 --> 00:19:09,099
I can feel free to write more than one

469
00:19:05,700 --> 00:19:10,028
HHA right i can write more than one so

470
00:19:09,099 --> 00:19:11,829
what i'm going to do is

471
00:19:10,028 --> 00:19:16,569
I'm going to break these up into two

472
00:19:11,829 --> 00:19:18,638
separate you know sort of blocks very

473
00:19:16,569 --> 00:19:20,979
arbitrarily so i'm going to have one

474
00:19:18,638 --> 00:19:23,019
here where I'm going to say right here

475
00:19:20,979 --> 00:19:26,759
oh right and then i'm going to have one

476
00:19:23,019 --> 00:19:29,710
here that's like right nan hero right

477
00:19:26,759 --> 00:19:30,819
and those are literally they're not

478
00:19:29,710 --> 00:19:32,499
going take any parameters or anything

479
00:19:30,819 --> 00:19:36,158
they're just going to be functions that

480
00:19:32,499 --> 00:19:37,868
do that thing ok and so here we go i'm

481
00:19:36,159 --> 00:19:39,429
just going to cut out this code will be

482
00:19:37,868 --> 00:19:43,628
the same in both of them basically just

483
00:19:39,429 --> 00:19:46,659
a little startup bit here right and then

484
00:19:43,628 --> 00:19:48,338
this code will actually be unique and so

485
00:19:46,659 --> 00:19:50,289
i'm going to go ahead and grab the stuff

486
00:19:48,338 --> 00:19:52,138
that's not the hero right there's the

487
00:19:50,288 --> 00:19:56,048
non hero i'm going to put that in there

488
00:19:52,138 --> 00:19:59,918
and you know I feel like the sounds are

489
00:19:56,048 --> 00:20:02,558
also not the hero right so so those

490
00:19:59,919 --> 00:20:03,940
maybe would go in there in fact you know

491
00:20:02,558 --> 00:20:07,388
what let's just even let's let's get

492
00:20:03,940 --> 00:20:08,919
nuts let's get crazy here people just

493
00:20:07,388 --> 00:20:11,348
absolutely ludicrous because I remember

494
00:20:08,919 --> 00:20:14,200
someone one time I don't remember the

495
00:20:11,348 --> 00:20:15,519
circumstances but I know we could go or

496
00:20:14,200 --> 00:20:18,069
a couple days ago something somebody

497
00:20:15,519 --> 00:20:21,669
asks could you put all the sounds in one

498
00:20:18,069 --> 00:20:25,138
asset file right and so let's just do it

499
00:20:21,669 --> 00:20:27,489
they wanted to see it let's do it right

500
00:20:25,138 --> 00:20:29,798
so there's all the sounds now and the

501
00:20:27,489 --> 00:20:33,548
music will all come from a different

502
00:20:29,798 --> 00:20:36,429
asset file okay and so there we go and

503
00:20:33,548 --> 00:20:38,710
so now I've got these all of these files

504
00:20:36,429 --> 00:20:41,288
separate they're all going to do their

505
00:20:38,710 --> 00:20:44,679
own their own little dance here right

506
00:20:41,288 --> 00:20:46,989
and again just total test code really

507
00:20:44,679 --> 00:20:49,960
nothing nothing all that much to it now

508
00:20:46,989 --> 00:20:51,729
you know even even as I say it though

509
00:20:49,960 --> 00:20:53,369
you know I mean why not go a little bit

510
00:20:51,729 --> 00:20:56,528
further it wouldn't take much to do it

511
00:20:53,368 --> 00:20:59,319
just something like initialize it takes

512
00:20:56,528 --> 00:21:01,838
a game assets right something like this

513
00:20:59,319 --> 00:21:04,148
if I want to I can pull out this code

514
00:21:01,838 --> 00:21:05,950
we've seen it a couple times maybe it'd

515
00:21:04,148 --> 00:21:09,308
make my life a little bit easier I don't

516
00:21:05,950 --> 00:21:10,929
really know but but there is something I

517
00:21:09,308 --> 00:21:14,788
can do if i want to write and now i can

518
00:21:10,929 --> 00:21:17,679
just say initialize assets like so right

519
00:21:14,788 --> 00:21:20,200
and that's you know pretty

520
00:21:17,679 --> 00:21:21,548
straightforward so maybe i'll do that

521
00:21:20,200 --> 00:21:22,778
and that way i know that this code is

522
00:21:21,548 --> 00:21:23,259
always kind of getting initialized same

523
00:21:22,778 --> 00:21:26,319
wage

524
00:21:23,259 --> 00:21:27,730
I'm which is you know again not really

525
00:21:26,319 --> 00:21:31,659
not really a big deal in this particular

526
00:21:27,730 --> 00:21:36,900
case but can't hurt so let's go up in

527
00:21:31,660 --> 00:21:40,779
here and make this be test three right

528
00:21:36,900 --> 00:21:43,540
this is going to be test two and this is

529
00:21:40,779 --> 00:21:46,329
going to be test one and then I'll do

530
00:21:43,539 --> 00:21:49,509
those files i'll do right here oh you

531
00:21:46,329 --> 00:21:52,329
know right nan hero right sounds

532
00:21:49,509 --> 00:21:55,390
something like this and then i'll go

533
00:21:52,329 --> 00:21:59,460
ahead and compile those now if I take a

534
00:21:55,390 --> 00:22:03,190
look so if i go to the handmade right

535
00:21:59,460 --> 00:22:04,600
data directory and i'm not sure do we

536
00:22:03,190 --> 00:22:06,100
have any global variables as well I

537
00:22:04,599 --> 00:22:08,919
don't know if we do I don't think we did

538
00:22:06,099 --> 00:22:10,569
I don't think so so really we want we

539
00:22:08,920 --> 00:22:11,650
thought that's it in terms of making it

540
00:22:10,569 --> 00:22:15,250
happen multiple times I don't think we

541
00:22:11,650 --> 00:22:17,290
need to do anything else so if I go in

542
00:22:15,250 --> 00:22:19,390
here and I look I got that test out HHA

543
00:22:17,289 --> 00:22:21,730
I'm going to delete that right I'm going

544
00:22:19,390 --> 00:22:23,080
to make get rid of that and then I'm

545
00:22:21,730 --> 00:22:24,460
going to go ahead and just run this code

546
00:22:23,079 --> 00:22:27,339
right so I'm going to go ahead and run

547
00:22:24,460 --> 00:22:29,829
the test asset builder I'm going to let

548
00:22:27,339 --> 00:22:31,959
it do whatever it's going to do and

549
00:22:29,829 --> 00:22:35,559
there you can kind of see the output of

550
00:22:31,960 --> 00:22:38,380
it it's got test1 test2 and test3 now we

551
00:22:35,559 --> 00:22:41,799
have no idea if that did what we wanted

552
00:22:38,380 --> 00:22:43,990
right we have no idea but what we can do

553
00:22:41,799 --> 00:22:45,759
is we can kind of go look now and see if

554
00:22:43,990 --> 00:22:47,230
we can load those files successfully and

555
00:22:45,759 --> 00:22:49,000
then we can see whether we can merge

556
00:22:47,230 --> 00:22:50,259
them successfully the first thing I'm

557
00:22:49,000 --> 00:22:54,130
going to do is I'm not even really going

558
00:22:50,259 --> 00:22:55,629
to do the first test what I'm gonna do

559
00:22:54,130 --> 00:22:58,180
instead is I'm going to just try loading

560
00:22:55,630 --> 00:23:00,610
just one of them right and so now what

561
00:22:58,180 --> 00:23:02,769
we should see we hope right if we've

562
00:23:00,609 --> 00:23:04,929
done this correctly is we should see the

563
00:23:02,769 --> 00:23:07,000
things that are in that file show up but

564
00:23:04,930 --> 00:23:09,220
not any of the other things right so our

565
00:23:07,000 --> 00:23:12,160
asset system will just find that it can

566
00:23:09,220 --> 00:23:14,079
actually load any of those other things

567
00:23:12,160 --> 00:23:16,509
it'll only be able to load the ones from

568
00:23:14,079 --> 00:23:18,250
the first file right and so what are the

569
00:23:16,509 --> 00:23:20,230
things in the first file if we take a

570
00:23:18,250 --> 00:23:23,049
look at what's in there right we've got

571
00:23:20,230 --> 00:23:25,120
the hero that the Cape the head the cape

572
00:23:23,049 --> 00:23:28,149
and the torso of the hero in all four

573
00:23:25,119 --> 00:23:30,429
directions so what I expect to see is

574
00:23:28,150 --> 00:23:32,140
the hero and the familiar the torso the

575
00:23:30,430 --> 00:23:34,060
Monstars those will all show up their

576
00:23:32,140 --> 00:23:36,460
shadows won't the environment won't show

577
00:23:34,059 --> 00:23:38,109
up and

578
00:23:36,460 --> 00:23:39,880
that's what I'm expecting to see right

579
00:23:38,109 --> 00:23:42,099
and that's exactly what I saw so that's

580
00:23:39,880 --> 00:23:44,950
good so that the file writing is still

581
00:23:42,099 --> 00:23:47,529
working properly again we can test each

582
00:23:44,950 --> 00:23:51,279
individual file that way here's testudo

583
00:23:47,529 --> 00:23:52,509
HHA we'll go ahead and load that and so

584
00:23:51,279 --> 00:23:56,410
okay we've got some kind of a problem

585
00:23:52,509 --> 00:24:02,730
here not sure exactly what it is but it

586
00:23:56,410 --> 00:24:07,390
looks like looks like the asset count is

587
00:24:02,730 --> 00:24:11,500
somehow wrong like there's more assets

588
00:24:07,390 --> 00:24:25,270
in the file then a cap then it counted

589
00:24:11,500 --> 00:24:32,799
total right am i right yeah alright so

590
00:24:25,269 --> 00:24:36,190
that's on test2 and test3 same thing so

591
00:24:32,799 --> 00:24:38,589
it looks like only on test one HHA which

592
00:24:36,190 --> 00:24:43,750
is the first one written which is rather

593
00:24:38,589 --> 00:24:49,449
suspicious right in fact I just how

594
00:24:43,750 --> 00:24:51,549
suspicious is it right I just to see

595
00:24:49,450 --> 00:24:57,940
just how suspicious it is we could also

596
00:24:51,549 --> 00:25:00,519
do this right and if I run the test a

597
00:24:57,940 --> 00:25:04,509
set builder again so that it's written

598
00:25:00,519 --> 00:25:07,660
them out in a different order now let's

599
00:25:04,509 --> 00:25:10,119
see if test2 is still the problem or if

600
00:25:07,660 --> 00:25:14,350
test2 has magically been fixed by our

601
00:25:10,119 --> 00:25:16,449
order reversal Hey look at that so

602
00:25:14,349 --> 00:25:17,829
that's very suspicious and says to me

603
00:25:16,450 --> 00:25:21,549
that we've got something that we didn't

604
00:25:17,829 --> 00:25:23,799
quite initialize properly right because

605
00:25:21,549 --> 00:25:24,789
the order shouldn't matter if the file

606
00:25:23,799 --> 00:25:27,639
is going to be wrong it should be wrong

607
00:25:24,789 --> 00:25:29,799
but obviously I didn't quite extract

608
00:25:27,640 --> 00:25:33,520
that code quite correctly so I'm going

609
00:25:29,799 --> 00:25:36,430
to go figure out why not right so let's

610
00:25:33,519 --> 00:25:39,819
take a look in the assets what have we

611
00:25:36,430 --> 00:25:41,740
got we've got the tag count wrench like

612
00:25:39,819 --> 00:25:44,369
Matt got the asset type count not

613
00:25:41,740 --> 00:25:46,660
initialized so there you go very simple

614
00:25:44,369 --> 00:25:49,058
and by the way I've said this a couple

615
00:25:46,660 --> 00:25:51,919
times before

616
00:25:49,058 --> 00:25:53,028
I've said many times before one thing I

617
00:25:51,919 --> 00:25:55,130
like to do in a lot of my production

618
00:25:53,028 --> 00:25:57,259
code is if there's no reason not to do

619
00:25:55,130 --> 00:26:00,049
it I will always initialize everything

620
00:25:57,259 --> 00:26:02,538
20 always and the reason is because

621
00:26:00,048 --> 00:26:03,710
uninitialized variables are very common

622
00:26:02,538 --> 00:26:07,720
in programming and they're very easy

623
00:26:03,710 --> 00:26:09,919
mistake to make in this particular case

624
00:26:07,720 --> 00:26:14,120
right it doesn't look particularly

625
00:26:09,919 --> 00:26:15,230
harmful actually that's zero there it

626
00:26:14,119 --> 00:26:17,449
doesn't look particularly harmful or

627
00:26:15,230 --> 00:26:19,490
anything right it seems kind of harmless

628
00:26:17,450 --> 00:26:21,200
i found that error you know right away

629
00:26:19,490 --> 00:26:24,230
or whatever and it's not that big a deal

630
00:26:21,200 --> 00:26:26,028
right but other times it can be much

631
00:26:24,230 --> 00:26:28,069
more subtle right other times those

632
00:26:26,028 --> 00:26:31,038
uninitialized variable bugs can you know

633
00:26:28,069 --> 00:26:32,750
can come back to haunt you and so rather

634
00:26:31,038 --> 00:26:34,970
than relying on having to actually

635
00:26:32,750 --> 00:26:36,740
manually slice things and remember that

636
00:26:34,970 --> 00:26:40,130
you actually made meal initialized all

637
00:26:36,740 --> 00:26:42,288
your stuff right I i actually vastly

638
00:26:40,130 --> 00:26:44,299
prefer if there's if you don't have to

639
00:26:42,288 --> 00:26:47,000
worry about the speed implications of it

640
00:26:44,298 --> 00:26:49,579
in fig no case i highly recommend clear

641
00:26:47,000 --> 00:26:53,148
to 0 because clear 20 solves all those

642
00:26:49,579 --> 00:26:56,298
problems and is pretty cheap you know

643
00:26:53,148 --> 00:27:00,500
it's it's pretty darn cheap so i do a

644
00:26:56,298 --> 00:27:02,569
lot of that in fact at work my version

645
00:27:00,500 --> 00:27:05,690
of the arena stuff that we do in here

646
00:27:02,569 --> 00:27:09,349
where we do push array and all those

647
00:27:05,690 --> 00:27:11,000
sorts of things i actually pass flags to

648
00:27:09,349 --> 00:27:13,219
these things and one of the flags is

649
00:27:11,000 --> 00:27:14,869
clear 20 and I pass it often so I just

650
00:27:13,220 --> 00:27:16,429
like when I push new memory I just it

651
00:27:14,869 --> 00:27:18,589
gets cleared to zero right because

652
00:27:16,429 --> 00:27:20,059
that's a really easy way to avoid having

653
00:27:18,589 --> 00:27:23,388
those kind of bugs in cases where you

654
00:27:20,058 --> 00:27:26,418
don't care about the extra time spent on

655
00:27:23,388 --> 00:27:29,089
that right so let's go ahead and run

656
00:27:26,419 --> 00:27:32,389
that again let's see if my hypothesis

657
00:27:29,089 --> 00:27:34,879
was correct it looks like it was let's

658
00:27:32,388 --> 00:27:38,869
go ahead and try to load a third file

659
00:27:34,880 --> 00:27:45,409
now as well so i'll switch back here go

660
00:27:38,869 --> 00:27:47,959
test 30 was the dying not do it

661
00:27:45,409 --> 00:27:49,760
correctly I thought I did did I not

662
00:27:47,960 --> 00:27:53,389
initialize the tip the output type

663
00:27:49,759 --> 00:27:55,429
properly what happened

664
00:27:53,388 --> 00:27:57,888
I initialized everything that's all we

665
00:27:55,429 --> 00:28:00,889
got right do we have anything else do I

666
00:27:57,888 --> 00:28:03,678
count on one of these let's see asset

667
00:28:00,888 --> 00:28:07,488
count is one asset type count am I right

668
00:28:03,679 --> 00:28:12,190
about the asset type count or as asset

669
00:28:07,489 --> 00:28:12,190
type count also need to be set to 10

670
00:28:16,598 --> 00:28:28,989
that's interesting asset type count uh

671
00:28:26,108 --> 00:28:31,999
so actually that wasn't really a bug I

672
00:28:28,989 --> 00:28:33,588
take it back although we should probably

673
00:28:31,999 --> 00:28:36,440
initialize that because it's kind of bad

674
00:28:33,588 --> 00:28:42,648
not to i would suspect it turns out

675
00:28:36,440 --> 00:28:46,009
that's actually not relevant okay so the

676
00:28:42,648 --> 00:28:50,918
real bug is not clearing the asset types

677
00:28:46,009 --> 00:28:55,429
array probably i would suspect right

678
00:28:50,919 --> 00:28:57,469
this value was irrelevant it just wasn't

679
00:28:55,429 --> 00:28:59,028
wasn't relevant at all so what we

680
00:28:57,469 --> 00:29:01,700
probably want to do is something more

681
00:28:59,028 --> 00:29:04,338
like this where we say okay there is

682
00:29:01,700 --> 00:29:06,259
asset count number of asset types right

683
00:29:04,338 --> 00:29:08,118
that's just how many there are and what

684
00:29:06,259 --> 00:29:10,759
we want to do is clear out those HHA

685
00:29:08,118 --> 00:29:12,618
asset types so they're set to 0 0 for

686
00:29:10,759 --> 00:29:15,078
every asset type that we don't touch

687
00:29:12,618 --> 00:29:17,958
right so we actually need to initialize

688
00:29:15,078 --> 00:29:20,388
this entire array which again it's not

689
00:29:17,959 --> 00:29:23,570
really a huge deal but it's something

690
00:29:20,388 --> 00:29:25,668
where you know we probably should do it

691
00:29:23,569 --> 00:29:27,678
again this we're using the C runtime

692
00:29:25,669 --> 00:29:28,999
library and our external tools so test

693
00:29:27,679 --> 00:29:30,709
as I builder doesn't get built in so you

694
00:29:28,999 --> 00:29:31,879
know I'm fine with glowing them sitting

695
00:29:30,709 --> 00:29:34,339
here just kind of like we're fine using

696
00:29:31,878 --> 00:29:37,638
the printf and all that sort of stuff in

697
00:29:34,338 --> 00:29:41,778
here so we can go ahead and do that it's

698
00:29:37,638 --> 00:29:43,848
this asset types situation right and the

699
00:29:41,778 --> 00:29:46,128
size of that is going to just be the

700
00:29:43,848 --> 00:29:49,038
size you know of the of the whole array

701
00:29:46,128 --> 00:29:51,069
right I want the whole thing cleared to

702
00:29:49,038 --> 00:29:51,069
zero

703
00:29:52,140 --> 00:30:00,460
right and I've got a pound include I

704
00:29:58,298 --> 00:30:02,250
don't know where that's that I assume

705
00:30:00,460 --> 00:30:06,269
it's a memory H I don't really remember

706
00:30:02,250 --> 00:30:13,390
yeah so let's try that one more time

707
00:30:06,269 --> 00:30:15,190
write that out and run it there we go so

708
00:30:13,390 --> 00:30:17,230
now we're we've taken care of our

709
00:30:15,190 --> 00:30:19,058
uninitialized portion for the test asset

710
00:30:17,230 --> 00:30:20,890
builder again we don't really care about

711
00:30:19,058 --> 00:30:22,808
that code it's a relevant code it's just

712
00:30:20,890 --> 00:30:24,278
for testing but you know we have to make

713
00:30:22,808 --> 00:30:26,589
it work well enough to actually do our

714
00:30:24,278 --> 00:30:28,179
tests right so it's worth debugging it

715
00:30:26,589 --> 00:30:30,369
feel least to the point where we can use

716
00:30:28,179 --> 00:30:33,509
it not worth worrying about it much mark

717
00:30:30,369 --> 00:30:37,148
to that so now let's see about merging

718
00:30:33,509 --> 00:30:39,970
again before we implement this win32

719
00:30:37,148 --> 00:30:42,038
side of things let's do a cheese version

720
00:30:39,970 --> 00:30:44,528
where we just force it to do exactly

721
00:30:42,038 --> 00:30:45,970
what we want to do in this case and so

722
00:30:44,528 --> 00:30:49,659
what I'm going to go ahead and do there

723
00:30:45,970 --> 00:30:51,429
is say all right the file name right I'm

724
00:30:49,659 --> 00:30:55,450
just going to do a simple thing where I

725
00:30:51,429 --> 00:30:58,169
say if the file index equals 0 then the

726
00:30:55,450 --> 00:31:02,798
file name equals one thing right

727
00:30:58,169 --> 00:31:11,399
something like this else if right else

728
00:31:02,798 --> 00:31:16,000
if something like that or invalid HHA

729
00:31:11,398 --> 00:31:17,798
something like this right so if the

730
00:31:16,000 --> 00:31:19,829
autumn is 0 will load the first one if

731
00:31:17,798 --> 00:31:23,558
it's one will the second one if it's to

732
00:31:19,829 --> 00:31:26,079
below the third one and now we'll load

733
00:31:23,558 --> 00:31:28,839
all three and now we can go you know

734
00:31:26,079 --> 00:31:30,428
debug our emerging code which you know

735
00:31:28,839 --> 00:31:32,740
like I said we have not had a chance to

736
00:31:30,429 --> 00:31:37,269
test yet so this will be our way of

737
00:31:32,740 --> 00:31:39,009
debugging that code right so at first

738
00:31:37,269 --> 00:31:40,690
blush it appears that everything just

739
00:31:39,009 --> 00:31:43,750
kind of works so maybe the emerging code

740
00:31:40,690 --> 00:31:45,730
doesn't have any bugs in it or none that

741
00:31:43,750 --> 00:31:52,028
that are sort of evinced by this but I

742
00:31:45,730 --> 00:31:58,829
don't really know oh dear that does not

743
00:31:52,028 --> 00:32:00,909
look good in our load sound call oh my

744
00:31:58,829 --> 00:32:03,308
well okay so we've definitely do have

745
00:32:00,909 --> 00:32:05,500
some kind of bug in our loading code and

746
00:32:03,308 --> 00:32:06,009
it's in the sound stuff because you can

747
00:32:05,500 --> 00:32:11,890
see what

748
00:32:06,009 --> 00:32:15,670
happened here somebody got back an ID

749
00:32:11,890 --> 00:32:18,640
that's wildly invalid so our asset file

750
00:32:15,670 --> 00:32:22,690
thought that there was a valid you know

751
00:32:18,640 --> 00:32:25,509
a valid ID out in the middle of nowhere

752
00:32:22,690 --> 00:32:26,860
right I mean there's no we don't have

753
00:32:25,509 --> 00:32:30,129
anywhere near that number of assets so

754
00:32:26,859 --> 00:32:32,259
that can't possibly be a valid ID it's

755
00:32:30,130 --> 00:32:35,560
happening inside the prefetch sound code

756
00:32:32,259 --> 00:32:38,140
so in here that info where we have that

757
00:32:35,559 --> 00:32:40,000
info next idea to play you can see that

758
00:32:38,140 --> 00:32:44,500
that's just garbage right it's just

759
00:32:40,000 --> 00:32:47,200
totally and completely wrong since we

760
00:32:44,500 --> 00:32:48,609
know that was the music basically we

761
00:32:47,200 --> 00:32:52,029
know that we're either setting or

762
00:32:48,609 --> 00:32:56,079
adjusting those assets incorrectly so

763
00:32:52,029 --> 00:32:59,859
let's think about that you know what

764
00:32:56,079 --> 00:33:03,399
that's a good point so when we merge the

765
00:32:59,859 --> 00:33:07,029
assets in we are not updating that thing

766
00:33:03,400 --> 00:33:10,030
one but thing too is that's so far out

767
00:33:07,029 --> 00:33:11,529
of bounds I'm not sure that that we I

768
00:33:10,029 --> 00:33:13,049
mean I wonder if we were even setting

769
00:33:11,529 --> 00:33:15,460
that quote I think probably we weren't

770
00:33:13,049 --> 00:33:18,369
so when we create create one of these

771
00:33:15,460 --> 00:33:19,690
assets right I wonder if we weren't when

772
00:33:18,369 --> 00:33:23,529
we create a sound asset if we weren't

773
00:33:19,690 --> 00:33:26,230
initializing that properly or not so in

774
00:33:23,529 --> 00:33:28,649
here it looks like we are right it looks

775
00:33:26,230 --> 00:33:30,940
like H sound next idea to play value

776
00:33:28,650 --> 00:33:35,980
that looks like we are initializing the

777
00:33:30,940 --> 00:33:38,370
sound properly and if we go look down

778
00:33:35,980 --> 00:33:47,309
here when we're actually adding it in

779
00:33:38,369 --> 00:33:50,589
when I look at this I kind of feels like

780
00:33:47,309 --> 00:33:54,240
that should have been correct so I'm not

781
00:33:50,589 --> 00:33:56,740
sure where that really bogus number is

782
00:33:54,240 --> 00:33:58,839
coming from so we're gonna have to do a

783
00:33:56,740 --> 00:34:00,160
little more forensics on that but one

784
00:33:58,839 --> 00:34:02,980
thing that I did want to point out is

785
00:34:00,160 --> 00:34:05,320
when we load our asset files that is

786
00:34:02,980 --> 00:34:07,180
actually something that's going to be a

787
00:34:05,319 --> 00:34:11,019
little bit difficult for us right

788
00:34:07,180 --> 00:34:15,250
because next ID to play for this for the

789
00:34:11,019 --> 00:34:18,230
sounds right that value we don't know

790
00:34:15,250 --> 00:34:20,000
how to remap that value right

791
00:34:18,230 --> 00:34:21,289
oh and now I think about it that's

792
00:34:20,000 --> 00:34:23,898
probably exactly what's happening even

793
00:34:21,289 --> 00:34:25,190
so if you think about it this is this is

794
00:34:23,898 --> 00:34:27,888
actually probably exactly what's

795
00:34:25,190 --> 00:34:30,378
happening and why we're getting the

796
00:34:27,889 --> 00:34:33,200
bogus value so it is probably the exact

797
00:34:30,378 --> 00:34:36,769
problem that i was just saying so here's

798
00:34:33,199 --> 00:34:39,108
what happens right we rebased our tags

799
00:34:36,769 --> 00:34:40,940
so we know that the tags are correct so

800
00:34:39,108 --> 00:34:44,539
basically when we have you know multiple

801
00:34:40,940 --> 00:34:47,030
files and each one of them so we have

802
00:34:44,539 --> 00:34:49,279
these tag arrays when we merge these tag

803
00:34:47,030 --> 00:34:51,230
arrays where this you know this used to

804
00:34:49,280 --> 00:34:53,960
be tag 0 that used to be tag 0 that's

805
00:34:51,230 --> 00:34:56,269
used to be tag 0 right and now they've

806
00:34:53,960 --> 00:34:58,490
all got you know all the tags zeros not

807
00:34:56,269 --> 00:35:01,190
to hear right this used to be tagged one

808
00:34:58,489 --> 00:35:03,529
tag one tag one now tag one of this one

809
00:35:01,190 --> 00:35:05,659
maps to hear tag one of this one maps to

810
00:35:03,530 --> 00:35:09,500
like tag 17 you know tag one of this one

811
00:35:05,659 --> 00:35:11,719
maps the tag 35 or whatever right now

812
00:35:09,500 --> 00:35:14,420
that we're doing that remapping for the

813
00:35:11,719 --> 00:35:16,879
tags we know that our assets all point

814
00:35:14,420 --> 00:35:19,400
to the right tag so if some asset you

815
00:35:16,880 --> 00:35:21,108
know if an asset here was pointing to

816
00:35:19,400 --> 00:35:24,440
this particular part of the tag table

817
00:35:21,108 --> 00:35:26,358
and then another asset here was pointing

818
00:35:24,440 --> 00:35:28,750
to this part of this tag table right

819
00:35:26,358 --> 00:35:31,460
they might both be pointing to tag to

820
00:35:28,750 --> 00:35:33,440
this guy when it gets merged will still

821
00:35:31,460 --> 00:35:35,900
be pointing to tag too but this guy

822
00:35:33,440 --> 00:35:39,679
should be pointing to tag 18 now right

823
00:35:35,900 --> 00:35:42,289
so we have to remap that and we're doing

824
00:35:39,679 --> 00:35:44,480
it what we're not doing however is in

825
00:35:42,289 --> 00:35:46,670
the assets what if an asset points to

826
00:35:44,480 --> 00:35:48,949
another asset we really don't have any

827
00:35:46,670 --> 00:35:51,320
of that except for one place which is

828
00:35:48,949 --> 00:35:53,809
the next sound ID so what will happen

829
00:35:51,320 --> 00:35:56,930
there is the first time we play a sound

830
00:35:53,809 --> 00:35:59,358
that has one of those right that came

831
00:35:56,929 --> 00:36:01,969
from a file which gotri you know when

832
00:35:59,358 --> 00:36:04,489
the things got rearranged the first one

833
00:36:01,969 --> 00:36:06,649
will be fine but its next pointer right

834
00:36:04,489 --> 00:36:08,479
I mean to think about how this worked in

835
00:36:06,650 --> 00:36:12,920
the file may be right they look like

836
00:36:08,480 --> 00:36:16,190
this so I had you know sound 0 and it

837
00:36:12,920 --> 00:36:20,409
pointed you know to sound one and it

838
00:36:16,190 --> 00:36:23,090
pointed to sound too you know like so

839
00:36:20,409 --> 00:36:27,289
those now have to be remapped so they

840
00:36:23,090 --> 00:36:30,140
can kind of jump you know so they can be

841
00:36:27,289 --> 00:36:32,029
correct because when we map these right

842
00:36:30,139 --> 00:36:33,829
and this is you know if this

843
00:36:32,030 --> 00:36:34,910
slot 0 slot 1 slot 2 or actually it

844
00:36:33,829 --> 00:36:39,440
would be more selecting out let's say

845
00:36:34,909 --> 00:36:41,089
this is slot 16 15 17 18 this pointer is

846
00:36:39,440 --> 00:36:44,119
going to be 16 this pointer is going to

847
00:36:41,090 --> 00:36:47,480
be 17 I should say this point will be 17

848
00:36:44,119 --> 00:36:50,869
this one's going to be 16 or 18 right so

849
00:36:47,480 --> 00:36:52,820
16 points in 17 17 verse 18 right when

850
00:36:50,869 --> 00:36:54,440
we be mapped these they may get loaded

851
00:36:52,820 --> 00:36:56,930
into some part of the asset array way

852
00:36:54,440 --> 00:37:00,530
down here right and now this asset is

853
00:36:56,929 --> 00:37:03,199
acid at 237 well if it's pointing to

854
00:37:00,530 --> 00:37:04,940
asset 17 still it's going to point way

855
00:37:03,199 --> 00:37:06,379
back to some totally different asset

856
00:37:04,940 --> 00:37:08,300
that's not even a sound potentially

857
00:37:06,380 --> 00:37:09,860
could be like a bitmap right or it could

858
00:37:08,300 --> 00:37:11,690
be to some other totally different sound

859
00:37:09,860 --> 00:37:14,809
right and we'd have no it'd be totally

860
00:37:11,690 --> 00:37:16,220
wrong and so we need to remap those

861
00:37:14,809 --> 00:37:17,690
pointers otherwise we'll load garbage

862
00:37:16,219 --> 00:37:18,889
which is f what we saw where the next

863
00:37:17,690 --> 00:37:20,420
idea to play with some garbage value

864
00:37:18,889 --> 00:37:22,159
that was probably like the bitmap width

865
00:37:20,420 --> 00:37:24,019
or something or the floating-point

866
00:37:22,159 --> 00:37:28,250
alignment for the bitmap or something

867
00:37:24,019 --> 00:37:29,630
right so that's just a garbage thing so

868
00:37:28,250 --> 00:37:32,630
what we need to do when we load these in

869
00:37:29,630 --> 00:37:35,210
is we need a way of translating where

870
00:37:32,630 --> 00:37:36,680
the assets are trying to point to so

871
00:37:35,210 --> 00:37:43,449
that we can make sure that they actually

872
00:37:36,679 --> 00:37:46,239
exist in the right places right so yeah

873
00:37:43,449 --> 00:37:49,699
so we know they're all inside the same

874
00:37:46,239 --> 00:37:52,449
asset class right and we do know what

875
00:37:49,699 --> 00:37:55,189
the base of the asset class actually is

876
00:37:52,449 --> 00:37:56,839
so when we come in here and we say asset

877
00:37:55,190 --> 00:37:59,389
count for type 1 passed last a SAT

878
00:37:56,840 --> 00:38:01,490
master assassin is source type first

879
00:37:59,389 --> 00:38:05,119
asset index is telling us sort of the

880
00:38:01,489 --> 00:38:07,939
base of these guys right so if I were to

881
00:38:05,119 --> 00:38:10,489
take whatever that you know that next

882
00:38:07,940 --> 00:38:13,039
pointer actually was right and and do

883
00:38:10,489 --> 00:38:15,259
the rebasing on it that would that would

884
00:38:13,039 --> 00:38:17,420
do the trick the problem here is again

885
00:38:15,260 --> 00:38:19,090
do we don't actually know what kind of

886
00:38:17,420 --> 00:38:21,619
an asset it is right we don't know

887
00:38:19,090 --> 00:38:23,750
whether it's sound or music at this

888
00:38:21,619 --> 00:38:25,219
point and again I don't think that's

889
00:38:23,750 --> 00:38:27,920
something that we ever actually stored

890
00:38:25,219 --> 00:38:30,549
so knowing how to remap it is actually

891
00:38:27,920 --> 00:38:30,550
kind of tricky

892
00:38:37,039 --> 00:38:45,239
because in order to know whether to

893
00:38:39,869 --> 00:38:47,519
remap it oh well you know what I take it

894
00:38:45,239 --> 00:38:51,389
back we kind of do no we actually do

895
00:38:47,518 --> 00:38:53,698
still no because what we do know is in

896
00:38:51,389 --> 00:38:55,858
the asset type ID right where we've got

897
00:38:53,699 --> 00:38:58,229
like asset tag as a type ID that stuff

898
00:38:55,858 --> 00:39:00,679
in this in this we do know that

899
00:38:58,228 --> 00:39:05,698
everything above a certain places sounds

900
00:39:00,679 --> 00:39:08,009
right you know I'm saying to you so we

901
00:39:05,699 --> 00:39:13,619
actually do have the ability to say

902
00:39:08,009 --> 00:39:20,548
something like okay you know asset first

903
00:39:13,619 --> 00:39:23,759
sound something like this right and then

904
00:39:20,548 --> 00:39:25,438
we can do something like this I guess we

905
00:39:23,759 --> 00:39:27,119
don't even care if there's empty stuff

906
00:39:25,438 --> 00:39:31,138
in the tree we could even just do it

907
00:39:27,119 --> 00:39:33,149
like that right and so we can do

908
00:39:31,139 --> 00:39:35,548
something like this where we say okay

909
00:39:33,148 --> 00:39:37,708
that it's bracketed so we actually know

910
00:39:35,548 --> 00:39:38,938
where the sounds are and then we could

911
00:39:37,708 --> 00:39:40,048
always determine whether something with

912
00:39:38,938 --> 00:39:42,778
a sound just by doing a simple

913
00:39:40,048 --> 00:39:44,398
inequality check right I could pretty

914
00:39:42,778 --> 00:39:46,349
truly say is this a sound by just going

915
00:39:44,398 --> 00:39:48,088
is it in between here and here and then

916
00:39:46,349 --> 00:39:50,159
I still wouldn't have to store whether

917
00:39:48,088 --> 00:39:52,228
the thing was a sound or not right so

918
00:39:50,159 --> 00:39:53,548
what i could do is say oh all right you

919
00:39:52,228 --> 00:39:59,578
know at the end of this I could say if

920
00:39:53,548 --> 00:40:04,648
is sound and pass it they that that

921
00:39:59,579 --> 00:40:06,809
asset index right so basically is is I'm

922
00:40:04,648 --> 00:40:13,739
not the asset index the asset type right

923
00:40:06,809 --> 00:40:18,329
so which one is its source index like so

924
00:40:13,739 --> 00:40:25,918
right basically if this is a sound type

925
00:40:18,329 --> 00:40:28,199
right if if this is a sound type then I

926
00:40:25,918 --> 00:40:31,978
know I have to remap it so I know I have

927
00:40:28,199 --> 00:40:35,159
to take HHA sound cut next ID to play

928
00:40:31,978 --> 00:40:38,938
and that next ID to play has to be set

929
00:40:35,159 --> 00:40:44,959
to be the correct value for the offset

930
00:40:38,938 --> 00:40:44,958
so I know that its current value right

931
00:40:45,280 --> 00:40:52,910
like so oops didn't that subtract in the

932
00:40:49,550 --> 00:40:55,880
wrong direction right I know that's it's

933
00:40:52,909 --> 00:40:57,739
offset from its base and now what I need

934
00:40:55,880 --> 00:41:01,490
to do is say okay now i need to make it

935
00:40:57,739 --> 00:41:04,789
the offset from our base wherever that's

936
00:41:01,489 --> 00:41:06,319
going to be right because I know that

937
00:41:04,789 --> 00:41:08,719
that's where it will load right so I

938
00:41:06,320 --> 00:41:10,100
know that that all of the things in my

939
00:41:08,719 --> 00:41:13,009
asset type are going to get loaded

940
00:41:10,099 --> 00:41:16,099
together so I know that that you know I

941
00:41:13,010 --> 00:41:17,540
can I can remap it that way now it's a

942
00:41:16,099 --> 00:41:20,809
little cheesy because it means that you

943
00:41:17,539 --> 00:41:22,550
couldn't have an asset in one class have

944
00:41:20,809 --> 00:41:25,130
its next idea to play be an asset in

945
00:41:22,550 --> 00:41:26,570
another class right that that would be a

946
00:41:25,130 --> 00:41:28,460
limitation of this style of remapping

947
00:41:26,570 --> 00:41:30,710
whereas I could do something more

948
00:41:28,460 --> 00:41:32,690
ridiculous in fact maybe I'll do it more

949
00:41:30,710 --> 00:41:35,659
ridiculous just so you can see instead

950
00:41:32,690 --> 00:41:38,150
of doing the remapping sort of in that

951
00:41:35,659 --> 00:41:46,399
tricky way maybe I'll just do something

952
00:41:38,150 --> 00:41:48,380
like asset remapping table like that and

953
00:41:46,400 --> 00:41:50,570
so what we would need to do now is make

954
00:41:48,380 --> 00:41:53,539
an asset remapping table that remaps one

955
00:41:50,570 --> 00:41:56,300
type of asset to the other and so as we

956
00:41:53,539 --> 00:41:59,079
come through here right what i would do

957
00:41:56,300 --> 00:42:02,660
is say okay there's you know going to be

958
00:41:59,079 --> 00:42:05,360
one of these profile so as we go through

959
00:42:02,659 --> 00:42:07,789
the file and we load out the individual

960
00:42:05,360 --> 00:42:09,620
assets we have a remapping table that

961
00:42:07,789 --> 00:42:13,509
tells us where they go right and I could

962
00:42:09,619 --> 00:42:15,619
totally you know I can totally do that

963
00:42:13,510 --> 00:42:16,670
although it's easy to write I'm just

964
00:42:15,619 --> 00:42:18,049
thinking about it like man I'm

965
00:42:16,670 --> 00:42:21,110
introducing this whole of the table

966
00:42:18,050 --> 00:42:23,870
lookup thing that has to have i'm not

967
00:42:21,110 --> 00:42:27,110
happy i'm not happy about this let me

968
00:42:23,869 --> 00:42:29,509
just tell you i want to tell you from me

969
00:42:27,110 --> 00:42:31,519
to you I'm not happy about it I don't

970
00:42:29,510 --> 00:42:34,160
love it right I don't really like that

971
00:42:31,519 --> 00:42:36,349
that aspect of it I don't like the fact

972
00:42:34,159 --> 00:42:38,059
that the next idea to play is so janky

973
00:42:36,349 --> 00:42:40,579
in terms of how it gets remapped and I'm

974
00:42:38,059 --> 00:42:45,460
wondering whether we want to introduce

975
00:42:40,579 --> 00:42:45,460
some kind of a shorthand that's going to

976
00:42:45,760 --> 00:42:52,360
make a cleaner so for example if we

977
00:42:48,800 --> 00:42:57,070
wanted next idea to play to be something

978
00:42:52,360 --> 00:42:57,070
you know something a little bit more

979
00:42:57,619 --> 00:43:02,180
special-purpose right so if it was just

980
00:42:59,838 --> 00:43:05,119
for doing streaming music and looping

981
00:43:02,179 --> 00:43:07,639
that's all it did we could do this a lot

982
00:43:05,119 --> 00:43:09,019
more cleanly right and so since I don't

983
00:43:07,639 --> 00:43:11,960
know of anything really that we're going

984
00:43:09,018 --> 00:43:13,368
to do with it besides those things what

985
00:43:11,960 --> 00:43:15,289
I'm kind of thinking is that I should

986
00:43:13,369 --> 00:43:16,730
take a step back and say don't bother

987
00:43:15,289 --> 00:43:18,049
introducing this whole remapping thing

988
00:43:16,730 --> 00:43:20,690
when we don't have assets that really

989
00:43:18,048 --> 00:43:22,309
need to reference other assets you know

990
00:43:20,690 --> 00:43:24,769
wait till there's some real reason why

991
00:43:22,309 --> 00:43:26,509
we want that feature and instead make

992
00:43:24,768 --> 00:43:29,419
next idea to play be a little bit

993
00:43:26,509 --> 00:43:31,009
different right just change the way that

994
00:43:29,420 --> 00:43:34,309
that code works so that it doesn't have

995
00:43:31,009 --> 00:43:36,409
to be remapped and that means we also

996
00:43:34,309 --> 00:43:39,559
wouldn't have to do this right and that

997
00:43:36,409 --> 00:43:41,328
seems better to me and so the way we

998
00:43:39,559 --> 00:43:44,599
would do that right is we would go okay

999
00:43:41,329 --> 00:43:47,210
inside the file format instead of

1000
00:43:44,599 --> 00:43:53,980
storing next idea to play we would do

1001
00:43:47,210 --> 00:43:53,980
something like you know enum HHA sound

1002
00:43:54,009 --> 00:44:03,528
sound operation is probably wrong but

1003
00:43:58,880 --> 00:44:06,440
sound chain something like this and we'd

1004
00:44:03,528 --> 00:44:10,429
have like HHA sound chain underscored

1005
00:44:06,440 --> 00:44:14,420
none we'd have underscore loop and we'd

1006
00:44:10,429 --> 00:44:17,179
have underscore advance right and that's

1007
00:44:14,420 --> 00:44:19,278
all we have and then this right here

1008
00:44:17,179 --> 00:44:21,528
would just be one of those where we said

1009
00:44:19,278 --> 00:44:25,400
okay this is going to be some value from

1010
00:44:21,528 --> 00:44:27,920
HHA sound chain and that value is going

1011
00:44:25,400 --> 00:44:31,450
to tell us what we should do and so

1012
00:44:27,920 --> 00:44:34,489
that's going to be like you know chain

1013
00:44:31,449 --> 00:44:37,248
so that when we do is we say okay by

1014
00:44:34,489 --> 00:44:39,289
default chain is going to be equal to

1015
00:44:37,248 --> 00:44:42,738
none so you know our sounds by default

1016
00:44:39,289 --> 00:44:45,859
will not we'll just play and stop and

1017
00:44:42,739 --> 00:44:47,480
then what we do here is when we actually

1018
00:44:45,858 --> 00:44:49,909
do these sounds we won't have to store

1019
00:44:47,480 --> 00:44:53,449
the last music value or anything like

1020
00:44:49,909 --> 00:44:56,268
that right all we have to do is say in

1021
00:44:53,449 --> 00:44:58,998
general if this is not the last sample

1022
00:44:56,268 --> 00:45:04,518
right so if first sample index is not

1023
00:44:58,998 --> 00:45:06,108
equal to total music I guess what I it's

1024
00:45:04,518 --> 00:45:08,149
a little bit tricky here because it's

1025
00:45:06,108 --> 00:45:09,528
going to be added to music chunks so I

1026
00:45:08,150 --> 00:45:11,119
guess what I'd do is I'd say all right

1027
00:45:09,528 --> 00:45:13,568
if

1028
00:45:11,119 --> 00:45:17,088
if first sample index plus 1 music chunk

1029
00:45:13,568 --> 00:45:19,579
is still less than right if it's still

1030
00:45:17,088 --> 00:45:22,190
less than it then I know it's going to

1031
00:45:19,579 --> 00:45:23,509
have to do its advanced thing so what

1032
00:45:22,190 --> 00:45:26,900
we're going to do is say this music

1033
00:45:23,509 --> 00:45:31,730
value sound chain is going to be equal

1034
00:45:26,900 --> 00:45:36,619
to advance right so go you know play the

1035
00:45:31,730 --> 00:45:37,998
next sound right and that's it that's

1036
00:45:36,619 --> 00:45:40,849
all we I think we would really have to

1037
00:45:37,998 --> 00:45:43,129
do it's this music and we just modify

1038
00:45:40,849 --> 00:45:46,278
the mixer to understand what that means

1039
00:45:43,130 --> 00:45:50,900
right so what it's going to do is it's

1040
00:45:46,278 --> 00:45:57,679
going to say okay if the info says that

1041
00:45:50,900 --> 00:45:59,119
the chain sound got chain oh wait we

1042
00:45:57,679 --> 00:46:02,118
have to do sound up chain it's just info

1043
00:45:59,119 --> 00:46:07,430
chain if the info says that we have to

1044
00:46:02,119 --> 00:46:09,200
chain this sound then what we'll do is

1045
00:46:07,429 --> 00:46:11,629
we'll just know that we increment we go

1046
00:46:09,199 --> 00:46:13,098
to the next one right so if it tells us

1047
00:46:11,630 --> 00:46:15,230
to advance we just always play the next

1048
00:46:13,099 --> 00:46:18,650
one so all of the music chunks exists

1049
00:46:15,230 --> 00:46:21,400
sequentially in the fat file right so we

1050
00:46:18,650 --> 00:46:24,588
just do prefetch sound whatever our

1051
00:46:21,400 --> 00:46:28,639
playing sound ID was right playing sound

1052
00:46:24,588 --> 00:46:35,568
ID we would just say you know what sound

1053
00:46:28,639 --> 00:46:37,639
Shane advanced or get next sound insane

1054
00:46:35,568 --> 00:46:40,308
in fact you know what we would do what

1055
00:46:37,639 --> 00:46:42,259
would really do is we'd actually just

1056
00:46:40,309 --> 00:46:44,809
just do exactly that we wouldn't even do

1057
00:46:42,259 --> 00:46:46,338
the if we would just do that we do

1058
00:46:44,809 --> 00:46:49,730
prepaid sound get mixed sound in chain

1059
00:46:46,338 --> 00:46:51,710
and we have that next ID to to play

1060
00:46:49,730 --> 00:46:54,440
would not be there we just say here's

1061
00:46:51,710 --> 00:46:55,999
the sound info for this thing in fact I

1062
00:46:54,440 --> 00:46:58,818
don't even know do we need the info for

1063
00:46:55,998 --> 00:47:01,068
anything else yeah we only kind of do it

1064
00:46:58,818 --> 00:47:03,199
there right so what we'd really do

1065
00:47:01,068 --> 00:47:06,969
probably even condensing this further is

1066
00:47:03,199 --> 00:47:09,199
next sound in chain we just ask it

1067
00:47:06,969 --> 00:47:14,088
what's the next sound insane for this

1068
00:47:09,199 --> 00:47:15,469
sound right and this will be you know

1069
00:47:14,088 --> 00:47:17,960
something that we put in the other thing

1070
00:47:15,469 --> 00:47:19,368
and then we will prefetch that the next

1071
00:47:17,960 --> 00:47:21,559
sound of chain

1072
00:47:19,369 --> 00:47:29,358
this will move over into our asset

1073
00:47:21,559 --> 00:47:33,259
system so this might be an inline to be

1074
00:47:29,358 --> 00:47:34,909
pretty simple so yeah we'll make a call

1075
00:47:33,259 --> 00:47:38,809
we'll make a call to the thing called

1076
00:47:34,909 --> 00:47:42,219
get next sounded Shane and that would

1077
00:47:38,809 --> 00:47:44,930
take probably the game assets as well

1078
00:47:42,219 --> 00:47:47,689
because it needs to do that query right

1079
00:47:44,929 --> 00:47:49,219
so it needs to take the assets so do get

1080
00:47:47,690 --> 00:47:51,409
next on a chain it'll prefetch that

1081
00:47:49,219 --> 00:47:54,318
sound and then later it's got next sound

1082
00:47:51,409 --> 00:47:56,838
and Shane down here and so what it can

1083
00:47:54,318 --> 00:47:59,538
do is when it comes down here and says

1084
00:47:56,838 --> 00:48:04,940
you know next I need to play it'll just

1085
00:47:59,539 --> 00:48:10,999
use next sounded chain right and it will

1086
00:48:04,940 --> 00:48:13,099
advance to that ok and so that's pretty

1087
00:48:10,998 --> 00:48:14,509
straightforward right and so the only

1088
00:48:13,099 --> 00:48:18,259
thing we think we really need to do now

1089
00:48:14,509 --> 00:48:21,528
is just fix no fix this guy here so he's

1090
00:48:18,259 --> 00:48:23,269
going to return a sound ID what it's

1091
00:48:21,528 --> 00:48:27,108
going to do is going to take a sound ID

1092
00:48:23,268 --> 00:48:29,838
in and it's going to say all right let's

1093
00:48:27,108 --> 00:48:32,690
get the sound info of that ID whatever

1094
00:48:29,838 --> 00:48:34,730
that ID is let's assume I guess we could

1095
00:48:32,690 --> 00:48:36,889
do is room that the result is going to

1096
00:48:34,730 --> 00:48:39,199
be nothing so that there is isn't it's a

1097
00:48:36,889 --> 00:48:41,598
there's no sound that follows it will go

1098
00:48:39,199 --> 00:48:45,318
ahead and ask if the ID we got past is

1099
00:48:41,599 --> 00:48:48,140
even valid right we go ahead and get the

1100
00:48:45,318 --> 00:48:49,338
sound ID out in fact I guess we don't

1101
00:48:48,139 --> 00:48:50,690
have to do that because we call get some

1102
00:48:49,338 --> 00:48:51,619
people just get the null one back if it

1103
00:48:50,690 --> 00:48:54,679
was null so that's actually probably

1104
00:48:51,619 --> 00:48:58,789
fine to get the science sound info we

1105
00:48:54,679 --> 00:49:00,528
then just do an if right on the info so

1106
00:48:58,789 --> 00:49:05,180
we say I guess we could even do a switch

1107
00:49:00,528 --> 00:49:07,190
where we say info chain and then we

1108
00:49:05,179 --> 00:49:10,639
handle our cases right we just handle

1109
00:49:07,190 --> 00:49:13,989
those cases that we had up here like so

1110
00:49:10,639 --> 00:49:13,989
so assuming it's none

1111
00:49:15,170 --> 00:49:21,360
nothing to do it's all good assuming

1112
00:49:18,539 --> 00:49:23,699
it's loop we're going to return the same

1113
00:49:21,360 --> 00:49:27,120
sound that we have and assuming its

1114
00:49:23,699 --> 00:49:30,989
advanced we're going to return the

1115
00:49:27,119 --> 00:49:34,109
result value equals ID dot value plus

1116
00:49:30,989 --> 00:49:36,359
one just move it one forward right and

1117
00:49:34,110 --> 00:49:49,920
we have an invalid code path here avail

1118
00:49:36,360 --> 00:49:52,380
a default case so I think that's what we

1119
00:49:49,920 --> 00:49:54,300
want because now we don't have to get in

1120
00:49:52,380 --> 00:49:57,269
the asset remapping business it's just

1121
00:49:54,300 --> 00:50:00,000
loads and works right and so let's debug

1122
00:49:57,269 --> 00:50:01,230
that make sure we don't have more

1123
00:50:00,000 --> 00:50:03,449
problems in there that I've created by

1124
00:50:01,230 --> 00:50:07,260
sort of what I've been doing let's take

1125
00:50:03,449 --> 00:50:08,579
a look oh dear oh right these are not

1126
00:50:07,260 --> 00:50:10,080
going to be set correctly because we

1127
00:50:08,579 --> 00:50:13,250
have to rerun the exporter since we've

1128
00:50:10,079 --> 00:50:16,940
changed the data definition there right

1129
00:50:13,250 --> 00:50:16,940
so let's go ahead and run it

1130
00:50:29,989 --> 00:50:32,989
nicely

1131
00:50:34,728 --> 00:50:42,328
all right one so that's better and now

1132
00:50:40,380 --> 00:50:43,798
that's you know we've sort of gotten

1133
00:50:42,329 --> 00:50:44,849
that problem out with the remapping and

1134
00:50:43,798 --> 00:50:45,869
we just don't have to worry about so I

1135
00:50:44,849 --> 00:50:47,039
think that's good i think that's where

1136
00:50:45,869 --> 00:50:48,390
we want to be i didn't like the

1137
00:50:47,039 --> 00:50:50,309
direction it was going without me to

1138
00:50:48,389 --> 00:50:52,469
remap the entities because i felt like

1139
00:50:50,309 --> 00:50:54,599
we would be doing a lot of bookkeeping

1140
00:50:52,469 --> 00:50:58,289
there for potentially not a lot of wind

1141
00:50:54,599 --> 00:51:00,479
so i would like to see more asset vile

1142
00:50:58,289 --> 00:51:02,429
referencing of assets between assets

1143
00:51:00,478 --> 00:51:03,718
before i would say that that's a good

1144
00:51:02,429 --> 00:51:07,168
way to go it seemed like just a lot of

1145
00:51:03,719 --> 00:51:08,309
work that didn't need to happen right so

1146
00:51:07,168 --> 00:51:11,489
I'm glad we got really bad that's much

1147
00:51:08,309 --> 00:51:12,839
better all right so I think that's

1148
00:51:11,489 --> 00:51:14,789
probably a good stopping point we only

1149
00:51:12,838 --> 00:51:17,248
have two minutes left in the stream

1150
00:51:14,789 --> 00:51:19,619
anyway so I'll go to the QA a little bit

1151
00:51:17,248 --> 00:51:21,088
early since I don't know that there's

1152
00:51:19,619 --> 00:51:22,439
anything that i really want to start on

1153
00:51:21,088 --> 00:51:25,349
right now because the next thing that

1154
00:51:22,438 --> 00:51:27,208
I'd like to do is to sort of you know

1155
00:51:25,349 --> 00:51:29,548
take a take a step back and just go and

1156
00:51:27,208 --> 00:51:32,159
go all right let's go ahead and actually

1157
00:51:29,548 --> 00:51:34,559
implement this stuff that actually gets

1158
00:51:32,159 --> 00:51:38,969
us the the fight all of the files of

1159
00:51:34,559 --> 00:51:41,159
this type in win32 right which is you

1160
00:51:38,969 --> 00:51:43,858
know again something that we're going to

1161
00:51:41,159 --> 00:51:45,900
have to go to have to write new you guys

1162
00:51:43,858 --> 00:51:47,880
haven't really seen me do any stuff like

1163
00:51:45,900 --> 00:51:50,729
that in win32 before and so I want kind

1164
00:51:47,880 --> 00:51:55,259
of want that to be handled properly so

1165
00:51:50,728 --> 00:52:04,108
all right that is it I will go ahead and

1166
00:51:55,259 --> 00:52:06,929
start the QA going if you have questions

1167
00:52:04,108 --> 00:52:09,298
about what we did on the stream please

1168
00:52:06,929 --> 00:52:12,689
prefix them with Q colon so I can see

1169
00:52:09,298 --> 00:52:13,889
them because I filter out the question

1170
00:52:12,688 --> 00:52:15,149
so that you know people who are trying

1171
00:52:13,889 --> 00:52:17,308
to talk about something else on the

1172
00:52:15,150 --> 00:52:19,168
stream can go ahead and do that and so

1173
00:52:17,309 --> 00:52:21,329
that I can see the questions that people

1174
00:52:19,168 --> 00:52:23,728
are asking and answer them so please put

1175
00:52:21,329 --> 00:52:26,599
a cue colon in front of it and then I

1176
00:52:23,728 --> 00:52:26,598
can check it out

1177
00:52:36,019 --> 00:52:38,079
you

1178
00:52:45,000 --> 00:52:50,860
duckbill Phil can we do advanced and

1179
00:52:47,590 --> 00:52:53,289
then loop sounds yeah I mean every sound

1180
00:52:50,860 --> 00:52:55,240
has that value set separately on it

1181
00:52:53,289 --> 00:52:59,739
right so you can do whatever you want

1182
00:52:55,239 --> 00:53:05,649
right there's no restrictions on on that

1183
00:52:59,739 --> 00:53:08,319
I mean you could you know if you were

1184
00:53:05,650 --> 00:53:09,700
just sitting down and going I don't have

1185
00:53:08,320 --> 00:53:11,350
any reason for it i'm just going to

1186
00:53:09,699 --> 00:53:13,899
start playing with this because i'm

1187
00:53:11,349 --> 00:53:15,519
interested right which by the way you

1188
00:53:13,900 --> 00:53:17,769
know is not something I super do that

1189
00:53:15,519 --> 00:53:20,409
much these days because I'm a production

1190
00:53:17,769 --> 00:53:22,300
programmer so I tend to focus on what's

1191
00:53:20,409 --> 00:53:25,449
going to be a valuable thing for me to

1192
00:53:22,300 --> 00:53:26,830
implement for this game right but when

1193
00:53:25,449 --> 00:53:28,809
you're first learning that's not such a

1194
00:53:26,829 --> 00:53:30,309
good mindset to have playing around with

1195
00:53:28,809 --> 00:53:32,739
things is good and valuable right

1196
00:53:30,309 --> 00:53:34,570
because it helps you learn and so you

1197
00:53:32,739 --> 00:53:36,489
could imagine doing some more things

1198
00:53:34,570 --> 00:53:37,990
here if you just wanted to sort of how

1199
00:53:36,489 --> 00:53:39,969
much functionality could we get out of

1200
00:53:37,989 --> 00:53:42,909
this thing and so one example is you

1201
00:53:39,969 --> 00:53:44,649
could change chain to be something a

1202
00:53:42,909 --> 00:53:47,349
little more specific you could change

1203
00:53:44,650 --> 00:53:49,750
chain to be like instead of a u32 you

1204
00:53:47,349 --> 00:53:51,489
could have it be to you six teens one

1205
00:53:49,750 --> 00:53:54,489
that's like a command like none loop in

1206
00:53:51,489 --> 00:53:56,289
advance and one that's a counter and so

1207
00:53:54,489 --> 00:53:58,750
if you set it to loop you could set the

1208
00:53:56,289 --> 00:54:01,179
loop counter to something and then in

1209
00:53:58,750 --> 00:54:03,849
the sound playing code it would count

1210
00:54:01,179 --> 00:54:07,659
how many times it played the sound with

1211
00:54:03,849 --> 00:54:10,539
the same ID right so every time it gets

1212
00:54:07,659 --> 00:54:12,399
hits down here and does invalid next on

1213
00:54:10,539 --> 00:54:15,039
a chain it would go if playing sound

1214
00:54:12,400 --> 00:54:17,019
equals next sound right if these two

1215
00:54:15,039 --> 00:54:19,690
things were already equal increment the

1216
00:54:17,019 --> 00:54:22,840
loop counter and check the info for this

1217
00:54:19,690 --> 00:54:28,300
sounds loop count and if I'm above that

1218
00:54:22,840 --> 00:54:30,820
loop count then advance right so you

1219
00:54:28,300 --> 00:54:34,720
could actually have inserted multiple

1220
00:54:30,820 --> 00:54:36,610
loops in and then advances so advanced

1221
00:54:34,719 --> 00:54:39,699
advanced loop loop advanced loop loop

1222
00:54:36,610 --> 00:54:41,650
loop advanta just with that one thing

1223
00:54:39,699 --> 00:54:43,419
you could make these pretty crazy series

1224
00:54:41,650 --> 00:54:45,940
of things you did right I just don't

1225
00:54:43,420 --> 00:54:48,519
know that there's any real what reason

1226
00:54:45,940 --> 00:54:52,110
you'd ever want that but you if you're

1227
00:54:48,519 --> 00:54:55,869
just kind of looking to program for fun

1228
00:54:52,110 --> 00:54:57,490
it's it's fine right if you're doing the

1229
00:54:55,869 --> 00:54:59,230
ID value plus equals one what you

1230
00:54:57,489 --> 00:55:01,959
eventually loop off the last sound asset

1231
00:54:59,230 --> 00:55:04,539
well the idea is that that would be a

1232
00:55:01,960 --> 00:55:06,670
bug in the asset build because if you

1233
00:55:04,539 --> 00:55:09,219
notice what I did here is I only set it

1234
00:55:06,670 --> 00:55:11,619
to advance if there are more to play if

1235
00:55:09,219 --> 00:55:14,079
it's the last one I set it to none so it

1236
00:55:11,619 --> 00:55:15,519
will end so the idea is you set advance

1237
00:55:14,079 --> 00:55:17,980
advance advance advance advance advance

1238
00:55:15,519 --> 00:55:19,599
end and so when it gets to the end it's

1239
00:55:17,980 --> 00:55:23,740
no longer going to keep trying but we

1240
00:55:19,599 --> 00:55:27,339
can let it run someone was actually

1241
00:55:23,739 --> 00:55:28,719
saying that we had a separate bug on the

1242
00:55:27,340 --> 00:55:31,059
forums that we haven't had a chance to

1243
00:55:28,719 --> 00:55:32,649
debug yet and so actually I can t do

1244
00:55:31,059 --> 00:55:34,570
this for another reason which is we

1245
00:55:32,650 --> 00:55:37,000
should have an actual different bug at

1246
00:55:34,570 --> 00:55:39,220
assertion they were saying they get if

1247
00:55:37,000 --> 00:55:40,329
you just let it run for a while although

1248
00:55:39,219 --> 00:55:44,349
actually you know what they said that

1249
00:55:40,329 --> 00:55:48,989
you had to that it repro if you did it

1250
00:55:44,349 --> 00:55:53,549
with the chipmunk version so so I think

1251
00:55:48,989 --> 00:55:53,549
if we do this version where plays fast

1252
00:55:54,420 --> 00:55:57,909
yeah so let's let that go because we

1253
00:55:56,800 --> 00:56:02,380
have another bug to catch as well

1254
00:55:57,909 --> 00:56:04,569
potentially not a question but Abner's

1255
00:56:02,380 --> 00:56:06,700
internet will be out for noches oh no

1256
00:56:04,570 --> 00:56:09,609
what happened to heaven or what happened

1257
00:56:06,699 --> 00:56:14,939
to his internet that's unfortunate I

1258
00:56:09,608 --> 00:56:14,940
didn't realize that's do that

1259
00:56:15,619 --> 00:56:20,420
can i watch when you first started

1260
00:56:17,510 --> 00:56:22,970
writing this game yes you can go to

1261
00:56:20,420 --> 00:56:29,960
handmade hero org and click on video

1262
00:56:22,969 --> 00:56:35,389
archive there it is so this is the

1263
00:56:29,960 --> 00:56:37,340
assertion and basically what it was as

1264
00:56:35,389 --> 00:56:40,969
you can see it's not the things don't

1265
00:56:37,340 --> 00:56:51,400
quite line up right it's just barely

1266
00:56:40,969 --> 00:56:51,399
under right and we kind of fixed these

1267
00:56:55,719 --> 00:56:59,089
so we still have a book i don't know if

1268
00:56:58,309 --> 00:57:00,529
i should debug it now because

1269
00:56:59,090 --> 00:57:01,220
technically this is the QA and I don't

1270
00:57:00,530 --> 00:57:05,180
know that I'm really supposed to be

1271
00:57:01,219 --> 00:57:06,289
doing it but it doesn't look like

1272
00:57:05,179 --> 00:57:08,389
there's really any questions that are on

1273
00:57:06,289 --> 00:57:09,980
topic so let me just take a quick look

1274
00:57:08,389 --> 00:57:17,359
at it so basically what we're looking at

1275
00:57:09,980 --> 00:57:19,460
here is our samples played is is getting

1276
00:57:17,360 --> 00:57:24,349
set to end sample position but n sample

1277
00:57:19,460 --> 00:57:28,490
position is actually not actually off

1278
00:57:24,349 --> 00:57:31,699
the end of the samples right it's a

1279
00:57:28,489 --> 00:57:36,349
little bit short right ends it ends just

1280
00:57:31,699 --> 00:57:38,949
a little bit short it's and so I wonder

1281
00:57:36,349 --> 00:57:38,949
what

1282
00:57:46,469 --> 00:57:57,399
so let's take a look here and sample

1283
00:57:49,510 --> 00:58:00,720
position yeah this does look kind of a

1284
00:57:57,400 --> 00:58:00,720
little float precision a

1285
00:58:04,070 --> 00:58:08,600
so we were going off of chunks to mix

1286
00:58:09,710 --> 00:58:16,139
and when we do our computation right we

1287
00:58:13,949 --> 00:58:18,239
said the total chunks to mix you know

1288
00:58:16,139 --> 00:58:20,009
versus the tungsten makes it the headend

1289
00:58:18,239 --> 00:58:21,089
was was 309 or whatever I don't know if

1290
00:58:20,010 --> 00:58:23,070
the actual number would have been

1291
00:58:21,090 --> 00:58:25,039
because it gets overwritten by other

1292
00:58:23,070 --> 00:58:28,410
things something probably clipped it

1293
00:58:25,039 --> 00:58:30,539
where we did the rounding right where we

1294
00:58:28,409 --> 00:58:33,119
said okay the number of chunks were

1295
00:58:30,539 --> 00:58:37,860
mating and sound you know we did sort of

1296
00:58:33,119 --> 00:58:39,539
our clipping and I'm guessing that if we

1297
00:58:37,860 --> 00:58:40,559
actually go do the math out for this

1298
00:58:39,539 --> 00:58:42,329
we're going to see that that's too

1299
00:58:40,559 --> 00:58:44,340
sloppy to actually guarantee that we're

1300
00:58:42,329 --> 00:58:45,690
always going to end at the correct

1301
00:58:44,340 --> 00:58:48,240
number we may be off by a little bit

1302
00:58:45,690 --> 00:58:51,769
right and it it's not going to actually

1303
00:58:48,239 --> 00:58:59,639
matter right like we can keep going and

1304
00:58:51,769 --> 00:59:00,989
it's fine but it's a little glitchy so I

1305
00:58:59,639 --> 00:59:02,250
think we might want to set it aside a

1306
00:59:00,989 --> 00:59:05,359
day to kind of go through and maybe

1307
00:59:02,250 --> 00:59:07,920
clean up how we're doing this whole

1308
00:59:05,360 --> 00:59:10,559
chunk counting thing to make sure that

1309
00:59:07,920 --> 00:59:12,329
we're you know doing it in the way

1310
00:59:10,559 --> 00:59:13,679
that's as robust as possible so that we

1311
00:59:12,329 --> 00:59:14,789
don't have because like trying to get

1312
00:59:13,679 --> 00:59:17,839
that stuff to always line up properly

1313
00:59:14,789 --> 00:59:17,840
seems error prone

1314
00:59:17,998 --> 00:59:24,699
right and this is going to be that this

1315
00:59:20,469 --> 00:59:28,088
is right and it's only going to really

1316
00:59:24,699 --> 00:59:31,439
happen on pitch shifted sounds but we're

1317
00:59:28,088 --> 00:59:31,440
gonna have plenty of pictures and sounds

1318
00:59:36,338 --> 00:59:54,998
that happen only when I dude volume or

1319
00:59:39,130 --> 00:59:56,440
is it so anyway though case in point

1320
00:59:54,998 --> 00:59:58,808
right you can see the sound ends

1321
00:59:56,440 --> 01:00:00,880
properly so we don't have that problem

1322
00:59:58,809 --> 01:00:02,440
but we still have plenty of bugs left in

1323
01:00:00,880 --> 01:00:04,420
our sound that we really should go back

1324
01:00:02,440 --> 01:00:05,889
and fix there's something with the when

1325
01:00:04,420 --> 01:00:08,318
we moved over to the asset fell stuff we

1326
01:00:05,889 --> 01:00:10,538
introduced a little glitch at the end as

1327
01:00:08,318 --> 01:00:12,369
well so we just have some stuff that we

1328
01:00:10,539 --> 01:00:14,109
need to we need to kind of go through

1329
01:00:12,369 --> 01:00:16,059
that sounded one more time it's not

1330
01:00:14,108 --> 01:00:17,199
quite as robust it needs to be and we

1331
01:00:16,059 --> 01:00:18,910
need to double check that we're writing

1332
01:00:17,199 --> 01:00:21,088
out the ends of our sounds properly as

1333
01:00:18,909 --> 01:00:21,088
well

1334
01:00:36,559 --> 01:00:40,019
sorry for not related to the stream but

1335
01:00:38,940 --> 01:00:43,920
what is the next thing you have planned

1336
01:00:40,019 --> 01:00:46,559
after assets I probably will will try to

1337
01:00:43,920 --> 01:00:48,210
tackle well either well we only have two

1338
01:00:46,559 --> 01:00:51,239
things to big things on the to-do list

1339
01:00:48,210 --> 01:00:57,929
at the moment before moving on to game

1340
01:00:51,239 --> 01:01:00,000
code which is like the we have the debug

1341
01:00:57,929 --> 01:01:02,489
code like debug annotation and being

1342
01:01:00,000 --> 01:01:04,380
able to draw debug stuff and you know

1343
01:01:02,489 --> 01:01:08,699
debug readouts hud's that sort of stuff

1344
01:01:04,380 --> 01:01:10,110
so debug code debug infrastructure it's

1345
01:01:08,699 --> 01:01:11,819
about time we did that we've got enough

1346
01:01:10,110 --> 01:01:14,670
complexity in the game now that it you

1347
01:01:11,820 --> 01:01:17,550
know would be helpful to have that

1348
01:01:14,670 --> 01:01:19,230
infrastructure and lighting so those are

1349
01:01:17,550 --> 01:01:23,130
those are the only really two big tech

1350
01:01:19,230 --> 01:01:24,420
features that we don't have and so once

1351
01:01:23,130 --> 01:01:26,579
those you know we got to go do to those

1352
01:01:24,420 --> 01:01:29,070
two and once we have those two in then

1353
01:01:26,579 --> 01:01:31,679
we can kind of do it some passes on

1354
01:01:29,070 --> 01:01:34,110
thick to kind of clean things out fix

1355
01:01:31,679 --> 01:01:35,879
some of the bus of things you know it's

1356
01:01:34,110 --> 01:01:38,039
kind of solidify stuff a bit and we'll

1357
01:01:35,880 --> 01:01:39,599
be you know we'll be pretty ready to

1358
01:01:38,039 --> 01:01:41,550
sign off on the engine in terms of like

1359
01:01:39,599 --> 01:01:45,509
this is ready to start prototyping the

1360
01:01:41,550 --> 01:01:48,000
game you know ready to start start

1361
01:01:45,510 --> 01:01:50,970
writing whatever we want for the actual

1362
01:01:48,000 --> 01:01:54,059
you know intro the game in the you know

1363
01:01:50,969 --> 01:01:56,429
how we're generating the maps and how

1364
01:01:54,059 --> 01:02:01,559
you're now the combat works and all that

1365
01:01:56,429 --> 01:02:03,329
sort of stuff how do you determine

1366
01:02:01,559 --> 01:02:07,230
whether to fix a bug or keep moving

1367
01:02:03,329 --> 01:02:08,819
forward so you know the ant the actual

1368
01:02:07,230 --> 01:02:09,900
answer that question is not exactly what

1369
01:02:08,820 --> 01:02:11,250
I show on the stream and the reason for

1370
01:02:09,900 --> 01:02:14,400
that is because I have two bucket this

1371
01:02:11,250 --> 01:02:17,090
into educational chunks the answer is

1372
01:02:14,400 --> 01:02:21,420
you fix the bug immediately always

1373
01:02:17,090 --> 01:02:23,250
always so when you are doing production

1374
01:02:21,420 --> 01:02:25,559
programming you fix the bug always

1375
01:02:23,250 --> 01:02:28,349
immediately right now and the only time

1376
01:02:25,559 --> 01:02:29,880
that you don't fix the bug is if a it's

1377
01:02:28,349 --> 01:02:31,529
in code that you are in the process of

1378
01:02:29,880 --> 01:02:32,820
deleting so there's no point in fixing

1379
01:02:31,530 --> 01:02:35,460
because if you're deleting the whole

1380
01:02:32,820 --> 01:02:37,559
thing or B you're in the process of

1381
01:02:35,460 --> 01:02:41,010
fixing a different bug so that you can't

1382
01:02:37,559 --> 01:02:42,090
really go to bug that bug right there is

1383
01:02:41,010 --> 01:02:43,350
no other circumstance where you don't

1384
01:02:42,090 --> 01:02:45,570
fix the bug immediately you

1385
01:02:43,349 --> 01:02:48,719
always fix the bug immediately so if you

1386
01:02:45,570 --> 01:02:51,420
find it you go fix it that's definitely

1387
01:02:48,719 --> 01:02:52,739
the rule and if you're not going to do

1388
01:02:51,420 --> 01:02:54,090
that you would better be pretty darn

1389
01:02:52,739 --> 01:02:56,429
sure that you're not going to use the

1390
01:02:54,090 --> 01:02:58,500
code that the bug is in that you're just

1391
01:02:56,429 --> 01:03:00,659
going to delete it right that's my

1392
01:02:58,500 --> 01:03:03,420
opinion so I don't really leave bugs

1393
01:03:00,659 --> 01:03:07,469
sitting at all I never move forward past

1394
01:03:03,420 --> 01:03:09,289
the book and so on the stream the reason

1395
01:03:07,469 --> 01:03:13,169
I have to do that sometimes is because I

1396
01:03:09,289 --> 01:03:16,110
need to try to bucket things into one

1397
01:03:13,170 --> 01:03:17,760
our educational pieces and I don't have

1398
01:03:16,110 --> 01:03:19,260
the luxury of always doing the thing

1399
01:03:17,760 --> 01:03:22,140
that would be the best programming

1400
01:03:19,260 --> 01:03:23,580
practice I try to as much as possible

1401
01:03:22,139 --> 01:03:24,659
show the best programming practice

1402
01:03:23,579 --> 01:03:26,519
because that's what the streams about

1403
01:03:24,659 --> 01:03:28,500
but I do have to do things we're like

1404
01:03:26,519 --> 01:03:30,119
okay you know normally I'd go take a

1405
01:03:28,500 --> 01:03:31,980
look at X now but I'm kind of going to

1406
01:03:30,119 --> 01:03:33,809
not necessarily do that because it'd be

1407
01:03:31,980 --> 01:03:38,519
really inconvenient to do so in terms of

1408
01:03:33,809 --> 01:03:41,150
where the streams lineup but yeah so the

1409
01:03:38,519 --> 01:03:44,309
sound code has a bug in it I'm sure and

1410
01:03:41,150 --> 01:03:47,369
so I would like to go spend a day

1411
01:03:44,309 --> 01:03:50,369
debugging that above day one of our

1412
01:03:47,369 --> 01:03:51,929
hours right debugging that but you know

1413
01:03:50,369 --> 01:03:53,279
I'm trying to teach you this thing and I

1414
01:03:51,929 --> 01:03:54,569
don't want everyone to forget what I'm

1415
01:03:53,280 --> 01:03:56,640
teaching you about the asset code when I

1416
01:03:54,570 --> 01:03:58,289
go do that code right so I kind of have

1417
01:03:56,639 --> 01:04:00,750
to make some concessions to the

1418
01:03:58,289 --> 01:04:02,279
educational nature of this project that

1419
01:04:00,750 --> 01:04:05,670
are not necessarily exactly how I would

1420
01:04:02,280 --> 01:04:11,910
have done it if you know if I were doing

1421
01:04:05,670 --> 01:04:13,380
it completely alone if I decide to go

1422
01:04:11,909 --> 01:04:15,029
for a PhD or something in the future

1423
01:04:13,380 --> 01:04:16,740
will you give me the blessing to write

1424
01:04:15,030 --> 01:04:19,080
about compression or ed program you

1425
01:04:16,739 --> 01:04:21,269
don't really need my blessing you know

1426
01:04:19,079 --> 01:04:23,340
compression oriented programming is the

1427
01:04:21,269 --> 01:04:25,559
thing I would like people to do and so

1428
01:04:23,340 --> 01:04:27,539
I'm happy to hear that people would be

1429
01:04:25,559 --> 01:04:31,670
writing about it I would like more

1430
01:04:27,539 --> 01:04:31,670
people to do it so

1431
01:04:38,789 --> 01:04:44,849
any other q Cullens or or not

1432
01:04:55,199 --> 01:05:03,429
looks like not all right but I'm going

1433
01:05:00,159 --> 01:05:06,129
to wind us down here I'm going to go

1434
01:05:03,429 --> 01:05:08,199
ahead and remove this one point nine but

1435
01:05:06,130 --> 01:05:11,680
I'm going to say well you know what I'll

1436
01:05:08,199 --> 01:05:20,069
do I'll do something more like this I'll

1437
01:05:11,679 --> 01:05:25,960
do do k see if you use the 1.9 version

1438
01:05:20,070 --> 01:05:32,730
there get it can clearly repro a bug in

1439
01:05:25,960 --> 01:05:32,730
the accuracy of the sample played caps

1440
01:05:34,980 --> 01:05:39,480
so yeah I have a feeling the problem is

1441
01:05:37,780 --> 01:05:43,030
that this really wants to be a ceiling

1442
01:05:39,480 --> 01:05:44,440
because we allow you to play over and so

1443
01:05:43,030 --> 01:05:47,500
I feel like we're act I feel like it's

1444
01:05:44,440 --> 01:05:48,909
really just our math is just wrong and

1445
01:05:47,500 --> 01:05:50,260
so I feel like when we if we go through

1446
01:05:48,909 --> 01:05:54,849
there and do a little more of a

1447
01:05:50,260 --> 01:06:02,760
fine-tooth comb approach we can fix that

1448
01:05:54,849 --> 01:06:06,190
in a much cleaner way all right okay uh

1449
01:06:02,760 --> 01:06:13,720
let's take a look let's take a look at

1450
01:06:06,190 --> 01:06:15,010
where we are at okay file save all right

1451
01:06:13,719 --> 01:06:16,329
thank you everyone for joining me for

1452
01:06:15,010 --> 01:06:17,440
another episode of handmade hero it's

1453
01:06:16,329 --> 01:06:19,599
been a pleasure coding with you as

1454
01:06:17,440 --> 01:06:21,039
always if you would like to follow along

1455
01:06:19,599 --> 01:06:22,869
at home to the source code you always

1456
01:06:21,039 --> 01:06:25,239
can it's at handmade hero org you can

1457
01:06:22,869 --> 01:06:27,009
pre-order the game and it comes with a

1458
01:06:25,239 --> 01:06:28,750
source code the whole time so right from

1459
01:06:27,010 --> 01:06:31,150
you know the very first episode you can

1460
01:06:28,750 --> 01:06:32,469
download the source code and you can

1461
01:06:31,150 --> 01:06:33,610
play around with it and it's a good way

1462
01:06:32,469 --> 01:06:34,750
to learn if you're traveling program you

1463
01:06:33,610 --> 01:06:35,829
just want to play around expert with

1464
01:06:34,750 --> 01:06:39,429
some of the ideas that we're doing on

1465
01:06:35,829 --> 01:06:40,719
handmade hero you can you can do that we

1466
01:06:39,429 --> 01:06:42,309
also have a forum site you can go to

1467
01:06:40,719 --> 01:06:43,959
catch up on old episodes there's the

1468
01:06:42,309 --> 01:06:45,880
anti episode guide there there's a form

1469
01:06:43,960 --> 01:06:47,079
can ask questions there's ports to mac

1470
01:06:45,880 --> 01:06:48,039
and linux that the community has done so

1471
01:06:47,079 --> 01:06:49,900
if you're trying to follow along one of

1472
01:06:48,039 --> 01:06:51,909
those platforms in advance of us porting

1473
01:06:49,900 --> 01:06:53,349
to it you can check those out we have a

1474
01:06:51,909 --> 01:06:55,359
patreon page if you want to support the

1475
01:06:53,349 --> 01:06:57,789
video series that's the place to do it

1476
01:06:55,360 --> 01:06:58,660
and we also have a tweet bot the tweets

1477
01:06:57,789 --> 01:07:00,670
the schedule so if you're trying to

1478
01:06:58,659 --> 01:07:03,699
catch is live you can check the tweet

1479
01:07:00,670 --> 01:07:06,250
bot I will be speaking this thursday at

1480
01:07:03,699 --> 01:07:08,319
the intel buzz workshop in seattle so if

1481
01:07:06,250 --> 01:07:12,309
you do want to stop by and check

1482
01:07:08,320 --> 01:07:14,200
out and say hi that's where I'll be it's

1483
01:07:12,309 --> 01:07:16,389
a it's a low-cost event for the

1484
01:07:14,199 --> 01:07:18,369
community Intel basically you know I

1485
01:07:16,389 --> 01:07:19,539
think they the tickets are free for

1486
01:07:18,369 --> 01:07:20,980
people who register early and they're

1487
01:07:19,539 --> 01:07:23,590
only like 20 bucks or something for

1488
01:07:20,980 --> 01:07:25,840
people who register late so it's

1489
01:07:23,590 --> 01:07:27,220
actually you know it's kind of just

1490
01:07:25,840 --> 01:07:31,210
something they do for community outreach

1491
01:07:27,219 --> 01:07:32,709
it's pretty cool so check that out I

1492
01:07:31,210 --> 01:07:41,670
actually know what the web address is

1493
01:07:32,710 --> 01:07:44,170
but Intel buzz workshop right Seattle so

1494
01:07:41,670 --> 01:07:47,230
that's the old one of course they didn't

1495
01:07:44,170 --> 01:07:49,420
this one this is actually it seattle

1496
01:07:47,230 --> 01:07:53,769
until buzz work shut up Abby my app com

1497
01:07:49,420 --> 01:07:55,930
right so it's here and so this is this

1498
01:07:53,769 --> 01:07:57,280
is the actual thing I don't know if

1499
01:07:55,929 --> 01:07:59,980
they've actually fixed the speaker thing

1500
01:07:57,280 --> 01:08:03,240
yet to actually lift me know if they did

1501
01:07:59,980 --> 01:08:06,849
it's right there and so that's that's

1502
01:08:03,239 --> 01:08:09,459
where that's at thursday at the impact

1503
01:08:06,849 --> 01:08:11,199
hub which is this thing down downtown so

1504
01:08:09,460 --> 01:08:12,400
yeah i will tweet out some more details

1505
01:08:11,199 --> 01:08:13,899
about that a little bit later if you're

1506
01:08:12,400 --> 01:08:16,329
sit in it that's where i'll be this

1507
01:08:13,900 --> 01:08:19,300
thursday and definitely come say hi if

1508
01:08:16,329 --> 01:08:21,010
you have to check it out until then we

1509
01:08:19,300 --> 01:08:22,810
will be back here tomorrow 5 p.m.

1510
01:08:21,010 --> 01:08:24,970
pacific standard time as always right

1511
01:08:22,810 --> 01:08:28,839
here on twitch love to see you back here

1512
01:08:24,970 --> 01:08:31,960
when we will go through and yeah I guess

1513
01:08:28,838 --> 01:08:33,130
I I think I want it will make me save

1514
01:08:31,960 --> 01:08:35,109
the sound stuff for a little later like

1515
01:08:33,130 --> 01:08:37,180
I saying we'll probably go do the win32

1516
01:08:35,109 --> 01:08:38,109
code necessary to load the files so we

1517
01:08:37,180 --> 01:08:39,670
don't have to hard code it like we're

1518
01:08:38,109 --> 01:08:41,530
doing now so we came to kind of finish

1519
01:08:39,670 --> 01:08:43,899
that up and and call that nice and done

1520
01:08:41,529 --> 01:08:44,949
and then we'll be good to go we can you

1521
01:08:43,899 --> 01:08:47,289
know sort of look at look at some of the

1522
01:08:44,949 --> 01:08:49,929
other stuff so we'll be doing that

1523
01:08:47,289 --> 01:08:52,659
tomorrow hopes to you back here until

1524
01:08:49,930 --> 01:08:54,310
then have fun coding and i will see you

1525
01:08:52,659 --> 01:08:57,689
guys out there on the Internet at large

1526
01:08:54,310 --> 01:08:57,690
taggies everyone

