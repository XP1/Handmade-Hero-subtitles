1
00:00:00,089 --> 00:00:04,560
hello everyone.welcome a handmade hero

2
00:00:02,428 --> 00:00:08,308
show recode a complete-game live on

3
00:00:04,559 --> 00:00:10,138
stream we are doing a little bonus

4
00:00:08,308 --> 00:00:11,579
stream here again like I kind of just

5
00:00:10,138 --> 00:00:15,029
wanted to stream I wanted to yesterday I

6
00:00:11,580 --> 00:00:15,480
want to show you today um I don't know

7
00:00:15,029 --> 00:00:17,309
exactly

8
00:00:15,480 --> 00:00:19,740
we're gonna be doing on the game today

9
00:00:17,309 --> 00:00:22,108
because again I plan to be on winter

10
00:00:19,739 --> 00:00:22,979
break but we're not on winter break so I

11
00:00:22,109 --> 00:00:25,529
don't know

12
00:00:22,980 --> 00:00:28,320
so we yesterday when I did a stream like

13
00:00:25,528 --> 00:00:30,359
this one just drop him we took a little

14
00:00:28,320 --> 00:00:31,980
look at our list here of stuff and so

15
00:00:30,359 --> 00:00:34,230
maybe that's what we'll do today again -

16
00:00:31,980 --> 00:00:36,829
so just take a look at some stuff here

17
00:00:34,229 --> 00:00:41,398
that we've got on the list of things and

18
00:00:36,829 --> 00:00:44,939
try to clean up any loose ends that we

19
00:00:41,399 --> 00:00:46,640
have here so you can see I really want

20
00:00:44,939 --> 00:00:48,780
to filter out enhancements probably

21
00:00:46,640 --> 00:00:50,128
because enhancements are things for kind

22
00:00:48,780 --> 00:00:53,760
of at the end of the game like things we

23
00:00:50,128 --> 00:00:55,649
want to add in potentially or maybe at

24
00:00:53,759 --> 00:00:58,170
least things that should be second on

25
00:00:55,649 --> 00:01:00,660
the list I don't know how you do that

26
00:00:58,170 --> 00:01:03,239
because I don't use github you can see

27
00:01:00,659 --> 00:01:05,728
here there's like a filter by label you

28
00:01:03,238 --> 00:01:07,709
can filter labels that you want to have

29
00:01:05,728 --> 00:01:10,379
in I'm not sure how you filter labels

30
00:01:07,709 --> 00:01:11,699
that you don't want to have in if I

31
00:01:10,379 --> 00:01:13,649
click on enhancement

32
00:01:11,700 --> 00:01:16,618
I'm guessing anyway that would show me

33
00:01:13,650 --> 00:01:18,930
just that I'm wondering if I can you

34
00:01:16,618 --> 00:01:23,478
know can you do something here I don't

35
00:01:18,930 --> 00:01:28,380
know like can you say not that thing

36
00:01:23,478 --> 00:01:33,569
I don't know so hard to say if you can

37
00:01:28,379 --> 00:01:34,618
do that at all but yeah who knows so we

38
00:01:33,569 --> 00:01:35,459
made it set to leave those in there I

39
00:01:34,618 --> 00:01:36,930
don't really know

40
00:01:35,459 --> 00:01:39,449
and again the handmade ray ones

41
00:01:36,930 --> 00:01:40,740
obviously aren't related to what we're

42
00:01:39,450 --> 00:01:42,180
doing

43
00:01:40,739 --> 00:01:43,769
those are further when we do our little

44
00:01:42,180 --> 00:01:45,450
handmade ray streams that are just kind

45
00:01:43,769 --> 00:01:46,530
of fun streams that are a different

46
00:01:45,450 --> 00:01:48,780
project altogether

47
00:01:46,530 --> 00:01:50,340
so we're mainly looking at the stuff

48
00:01:48,780 --> 00:01:53,368
that we've got in here I'd like to take

49
00:01:50,340 --> 00:01:54,840
them for it from the bottom on up and so

50
00:01:53,368 --> 00:01:56,188
on because these have been sitting

51
00:01:54,840 --> 00:01:57,359
around a long time they're just little

52
00:01:56,188 --> 00:01:59,758
things that really haven't had a problem

53
00:01:57,359 --> 00:02:02,399
with so here we have a segfault and

54
00:01:59,759 --> 00:02:04,618
handmade brain and this is a thing where

55
00:02:02,399 --> 00:02:07,109
it's just you know handmade brain is not

56
00:02:04,618 --> 00:02:09,118
real code it's sort of placeholder code

57
00:02:07,109 --> 00:02:11,639
for later when we implement things like

58
00:02:09,118 --> 00:02:12,300
enemy AIS or the player controller and

59
00:02:11,639 --> 00:02:14,919
things like

60
00:02:12,300 --> 00:02:16,990
but if you look in there there's

61
00:02:14,919 --> 00:02:19,809
probably some stuff where if you know

62
00:02:16,990 --> 00:02:21,760
the head gets detached from the hero or

63
00:02:19,810 --> 00:02:23,890
something like this we didn't actually

64
00:02:21,759 --> 00:02:27,699
properly bracket it so that you can't

65
00:02:23,889 --> 00:02:29,109
access those things and what you see

66
00:02:27,699 --> 00:02:31,079
here is we've got like body facing

67
00:02:29,110 --> 00:02:33,850
Direction equals head facing direction

68
00:02:31,080 --> 00:02:35,170
yeah you can see it right here so the

69
00:02:33,849 --> 00:02:36,819
interesting thing about this is that you

70
00:02:35,169 --> 00:02:39,369
need to have both a body and a head for

71
00:02:36,819 --> 00:02:40,000
that to work and it looks like it's in

72
00:02:39,370 --> 00:02:42,099
there

73
00:02:40,000 --> 00:02:45,580
so I don't think this particular thing

74
00:02:42,099 --> 00:02:47,079
would actually have that problem it

75
00:02:45,580 --> 00:02:48,940
looks like maybe we already fixed that

76
00:02:47,080 --> 00:02:51,340
because you can see the body in the head

77
00:02:48,939 --> 00:02:55,150
sort of already have to be on there so

78
00:02:51,340 --> 00:02:57,939
let's see here head is no - not too

79
00:02:55,150 --> 00:03:00,189
native there's if head blocks so I think

80
00:02:57,939 --> 00:03:04,120
we changed this summer on the line so I

81
00:03:00,189 --> 00:03:07,569
think I think we inadvertently fixed

82
00:03:04,120 --> 00:03:13,840
this at some point looks like it's now

83
00:03:07,569 --> 00:03:16,409
inside the if head and body block so I

84
00:03:13,840 --> 00:03:18,939
think this actually already got fixed

85
00:03:16,409 --> 00:03:21,400
there may still be problems in here but

86
00:03:18,939 --> 00:03:23,829
again this code is not we're gonna do

87
00:03:21,400 --> 00:03:27,280
some more work with code like that in

88
00:03:23,830 --> 00:03:29,560
kind of in the future we we don't really

89
00:03:27,280 --> 00:03:30,909
need to be too worried about this so I'm

90
00:03:29,560 --> 00:03:32,740
not super worried about this anyway

91
00:03:30,909 --> 00:03:34,299
because it's not really a segfault I

92
00:03:32,740 --> 00:03:35,920
would care about it's in code that's

93
00:03:34,300 --> 00:03:37,719
gonna get blown away and replaces

94
00:03:35,919 --> 00:03:40,530
something better so it's not something

95
00:03:37,719 --> 00:03:46,030
we have to be particularly careful about

96
00:03:40,530 --> 00:03:47,979
so in here this is a different this is

97
00:03:46,030 --> 00:03:49,240
not really a bug per se this is almost

98
00:03:47,979 --> 00:03:50,560
an enhancement but it's one we should

99
00:03:49,240 --> 00:03:56,290
probably talk about it's not really that

100
00:03:50,560 --> 00:03:59,709
important to deal with now but we might

101
00:03:56,289 --> 00:04:01,389
as well because it's easy fix so what

102
00:03:59,709 --> 00:04:03,039
happens here let me just explain a

103
00:04:01,389 --> 00:04:05,229
little bit about what this person is

104
00:04:03,039 --> 00:04:08,889
talking about for folks who don't who

105
00:04:05,229 --> 00:04:11,859
aren't familiar with this situation so

106
00:04:08,889 --> 00:04:14,049
one of the things that happens if you

107
00:04:11,860 --> 00:04:15,910
think about how a personal computer

108
00:04:14,050 --> 00:04:17,799
modern person computer is constructed

109
00:04:15,909 --> 00:04:19,449
you kind of know if you're a gamer

110
00:04:17,798 --> 00:04:22,449
anyway you know what it looks like

111
00:04:19,449 --> 00:04:24,699
you've got a big old case and besides

112
00:04:22,449 --> 00:04:25,379
the fact that it's you blinged out with

113
00:04:24,699 --> 00:04:28,500
tons of RG

114
00:04:25,379 --> 00:04:29,939
lighting you also have a CPU in there

115
00:04:28,500 --> 00:04:32,759
right that goes onto the motherboard

116
00:04:29,939 --> 00:04:35,069
with a big old honkin heatsink on it or

117
00:04:32,759 --> 00:04:39,120
water-cooled piping or god knows what

118
00:04:35,069 --> 00:04:42,540
right and then into the PCI slot of this

119
00:04:39,120 --> 00:04:47,970
thing you've got a gigantic usually

120
00:04:42,540 --> 00:04:50,340
takes up two slots now a gigantic video

121
00:04:47,970 --> 00:04:53,910
card with a GPU chip on it its own

122
00:04:50,339 --> 00:04:56,339
memory right it's this huge thing giant

123
00:04:53,910 --> 00:04:58,980
heat spreader fans that thing gets

124
00:04:56,339 --> 00:05:00,599
jammed in there right and this is a huge

125
00:04:58,980 --> 00:05:02,250
honkin thing and now if you've ever put

126
00:05:00,600 --> 00:05:04,110
together computer yourself you also know

127
00:05:02,250 --> 00:05:06,810
that that gigantic huge honkin graphics

128
00:05:04,110 --> 00:05:08,850
card takes its own power plug right so

129
00:05:06,810 --> 00:05:10,800
the power coming off the PCI bus isn't

130
00:05:08,850 --> 00:05:15,750
sufficient to run this thing it now

131
00:05:10,800 --> 00:05:19,379
needs its own plug sometimes too so that

132
00:05:15,750 --> 00:05:21,600
structure if you think about it that's

133
00:05:19,379 --> 00:05:24,540
powering like modern gaming at a high

134
00:05:21,600 --> 00:05:29,129
level 4k graphics super high-end all

135
00:05:24,540 --> 00:05:30,750
this stuff high detail settings 144

136
00:05:29,129 --> 00:05:34,290
frames a second got you know whatever

137
00:05:30,750 --> 00:05:39,240
all this other stuff right that whole

138
00:05:34,290 --> 00:05:42,420
world draws a ton of power if you look

139
00:05:39,240 --> 00:05:44,579
at the power draw of just that GPU the

140
00:05:42,420 --> 00:05:46,230
power draw of just the video card itself

141
00:05:44,579 --> 00:05:49,379
is usually more than the entire computer

142
00:05:46,230 --> 00:05:51,900
it can draw 200 300 Watts these things

143
00:05:49,379 --> 00:05:53,189
are insane sometimes right if you have

144
00:05:51,899 --> 00:05:56,250
like two of them in there whatever so

145
00:05:53,189 --> 00:05:59,040
the amount of watts going to the GPU is

146
00:05:56,250 --> 00:06:02,310
more than your phone battery has or

147
00:05:59,040 --> 00:06:04,830
laptop battery has total right in an

148
00:06:02,310 --> 00:06:07,500
hour so one hour of running one of those

149
00:06:04,829 --> 00:06:09,180
GPUs your phone battery couldn't even do

150
00:06:07,500 --> 00:06:11,639
it your laptop battery couldn't do it

151
00:06:09,180 --> 00:06:14,790
it's drawing that much wattage per hour

152
00:06:11,639 --> 00:06:16,709
right but it's fine because it's plugged

153
00:06:14,790 --> 00:06:18,860
into a wall outlet which has a ton of

154
00:06:16,709 --> 00:06:22,829
watts and is used to running things like

155
00:06:18,860 --> 00:06:25,680
washing machines and dryers which draw

156
00:06:22,829 --> 00:06:28,050
tons of electricity or charging a Tesla

157
00:06:25,680 --> 00:06:30,150
for if you're one of those people who

158
00:06:28,050 --> 00:06:34,199
ordered a model 3 or if you're wealthy

159
00:06:30,149 --> 00:06:36,329
and have a Model S um so it's fine for

160
00:06:34,199 --> 00:06:38,459
desktop computing to be using it an

161
00:06:36,329 --> 00:06:39,120
incredible amount of power but once you

162
00:06:38,459 --> 00:06:41,399
get to a

163
00:06:39,120 --> 00:06:45,269
top it just it doesn't really have that

164
00:06:41,399 --> 00:06:48,239
kind of power available so obviously

165
00:06:45,269 --> 00:06:49,709
you've got some other you know you've

166
00:06:48,240 --> 00:06:52,079
got to have some other setup in there to

167
00:06:49,709 --> 00:06:54,599
support graphics because the kinds of

168
00:06:52,079 --> 00:06:57,659
stuff that you see in a desktop is never

169
00:06:54,600 --> 00:06:59,820
gonna fly it could be in there to work

170
00:06:57,660 --> 00:07:02,939
when you plug in your laptop to a wall

171
00:06:59,819 --> 00:07:05,668
outlet for example but it's never gonna

172
00:07:02,939 --> 00:07:08,250
work if you're just on battery power

173
00:07:05,668 --> 00:07:10,079
flying on an airplane somewhere you know

174
00:07:08,250 --> 00:07:11,728
going home for Christmas or who knows

175
00:07:10,079 --> 00:07:14,069
what you're doing and you're typing on

176
00:07:11,728 --> 00:07:15,810
your laptop that graphics has to be way

177
00:07:14,069 --> 00:07:19,500
lower power because you just don't have

178
00:07:15,810 --> 00:07:22,500
the draw for it so the solution that a

179
00:07:19,500 --> 00:07:25,680
lot of laptops have adopted in the case

180
00:07:22,500 --> 00:07:30,990
of the PC world is what they'll do is

181
00:07:25,680 --> 00:07:34,978
they'll use part of the CPU die so

182
00:07:30,990 --> 00:07:37,319
basically you know you got a CPU on that

183
00:07:34,978 --> 00:07:39,810
die there's a bunch of cores right the

184
00:07:37,319 --> 00:07:43,259
cores we have for CPU computing but then

185
00:07:39,810 --> 00:07:46,139
there's also a little crappy GPU stuck

186
00:07:43,259 --> 00:07:47,909
on the die so you've got some cores for

187
00:07:46,139 --> 00:07:51,360
the CPU and some cords for GPU just on

188
00:07:47,910 --> 00:07:54,389
one chip intel does this that's what

189
00:07:51,360 --> 00:07:56,490
Intel integrated graphics is right AMD

190
00:07:54,389 --> 00:07:58,560
does this that's what the apu czar and

191
00:07:56,490 --> 00:07:59,910
that way you can just stick one of those

192
00:07:58,560 --> 00:08:01,978
in there and the laptop does it and

193
00:07:59,910 --> 00:08:03,750
those can be low-power that can be

194
00:08:01,978 --> 00:08:06,389
throttled down just like the cpu is

195
00:08:03,750 --> 00:08:08,430
lower power you can throttle down so in

196
00:08:06,389 --> 00:08:11,848
your battery power it doesn't run very

197
00:08:08,430 --> 00:08:16,650
fast or run slow convergence or Zenergy

198
00:08:11,848 --> 00:08:19,259
right but if you really need to get some

199
00:08:16,649 --> 00:08:21,239
high quality graphics on the screen they

200
00:08:19,259 --> 00:08:23,909
will then on the higher end laptops

201
00:08:21,240 --> 00:08:25,889
they'll throw in a mobile GPU part as

202
00:08:23,910 --> 00:08:28,500
well right so there'll be another chip

203
00:08:25,889 --> 00:08:30,598
on there which is also a GPU but that

204
00:08:28,500 --> 00:08:32,309
ship will be dormant so it will be

205
00:08:30,598 --> 00:08:34,889
basically completely powered off for the

206
00:08:32,309 --> 00:08:36,809
most part most of the time so if you're

207
00:08:34,889 --> 00:08:38,098
just you know typing into a text center

208
00:08:36,809 --> 00:08:41,399
or something it doesn't need to fire

209
00:08:38,099 --> 00:08:46,350
that thing up you then go and run some

210
00:08:41,399 --> 00:08:49,259
piggy webpage or you run you know some

211
00:08:46,350 --> 00:08:52,529
kind of a game and the game will spin up

212
00:08:49,259 --> 00:08:53,220
the high end GPU and render on that now

213
00:08:52,529 --> 00:08:55,139
this drink

214
00:08:53,220 --> 00:08:57,629
your battery quickly so you usually

215
00:08:55,139 --> 00:08:59,220
don't want to do it if the laptops not

216
00:08:57,629 --> 00:09:01,438
plugged into something but when the

217
00:08:59,220 --> 00:09:04,980
laptop is plugged into something you

218
00:09:01,438 --> 00:09:08,159
want that GPU to get fired up the

219
00:09:04,980 --> 00:09:11,159
question becomes how does the computer

220
00:09:08,159 --> 00:09:13,769
know whether to turn on the GPU or not

221
00:09:11,159 --> 00:09:17,219
right because it is a discrete decision

222
00:09:13,769 --> 00:09:20,490
pun intended if you've got a CPU that

223
00:09:17,220 --> 00:09:22,769
has a GPU a weak GPU on it and then

224
00:09:20,490 --> 00:09:24,629
you've also got a beefier GPU sitting

225
00:09:22,769 --> 00:09:26,370
there on the side that if I turn it on

226
00:09:24,629 --> 00:09:28,438
I'm going to use a lot of battery but I

227
00:09:26,370 --> 00:09:32,159
would get a lot better performance how

228
00:09:28,438 --> 00:09:34,500
does a computer know which one to do and

229
00:09:32,159 --> 00:09:36,719
the answer is it doesn't and it often

230
00:09:34,500 --> 00:09:42,980
makes the wrong decision

231
00:09:36,720 --> 00:09:45,420
so there's that but if the user is savvy

232
00:09:42,980 --> 00:09:48,449
they know that there are things they can

233
00:09:45,419 --> 00:09:50,729
do to help it out you can go to the

234
00:09:48,448 --> 00:09:52,769
Nvidia control panel the AMD control

235
00:09:50,730 --> 00:09:54,930
panel the intelligent graphics panel and

236
00:09:52,769 --> 00:09:57,060
there's things you can say this

237
00:09:54,929 --> 00:09:59,399
executable run on the discreet graphics

238
00:09:57,059 --> 00:10:01,438
part this executable do that and

239
00:09:59,399 --> 00:10:03,089
furthermore you can set those sometimes

240
00:10:01,438 --> 00:10:04,948
based on whether things plugged in or

241
00:10:03,089 --> 00:10:07,740
not so you can say look if I'm plugged

242
00:10:04,948 --> 00:10:10,258
in use the good GPU if I'm not plugged

243
00:10:07,740 --> 00:10:15,870
in only used a good GPU if I run this

244
00:10:10,259 --> 00:10:19,558
particular program so now that brings us

245
00:10:15,870 --> 00:10:22,409
to this particular issue what it says

246
00:10:19,558 --> 00:10:24,389
here is we've got trouble with Nvidia

247
00:10:22,409 --> 00:10:26,490
Optimus right Nvidia Optimus is the

248
00:10:24,389 --> 00:10:29,579
brand name for when you have an NVIDIA

249
00:10:26,490 --> 00:10:32,159
GPU in your laptop that sits dormant

250
00:10:29,578 --> 00:10:34,078
until it needs to get turned on and the

251
00:10:32,159 --> 00:10:37,469
Intel integrated graphics is what runs

252
00:10:34,078 --> 00:10:39,750
most of the time and so what you can do

253
00:10:37,470 --> 00:10:43,170
is the reason this person filed it is

254
00:10:39,750 --> 00:10:45,629
because we don't warrant our executable

255
00:10:43,169 --> 00:10:48,088
we don't recommend that it run on Nvidia

256
00:10:45,629 --> 00:10:50,339
Optimus or AMD or anything we just have

257
00:10:48,089 --> 00:10:54,509
a vanilla cutable so what our xq2 will

258
00:10:50,339 --> 00:10:56,009
do is run the default right that means

259
00:10:54,509 --> 00:10:58,110
by default we'll probably run on

260
00:10:56,009 --> 00:10:59,459
integrated graphics but handmade here is

261
00:10:58,110 --> 00:11:00,899
not really something that wants to run

262
00:10:59,458 --> 00:11:03,479
at integrated graphics it wants to run

263
00:11:00,899 --> 00:11:06,818
on the discrete GPU if it can and so

264
00:11:03,480 --> 00:11:10,538
what we may want to do is by default

265
00:11:06,818 --> 00:11:12,759
say let's ask the system to please run

266
00:11:10,538 --> 00:11:14,318
us on the discrete GPU if it's okay with

267
00:11:12,759 --> 00:11:16,209
the user the user can still disable that

268
00:11:14,318 --> 00:11:20,259
and so the question is how do you do

269
00:11:16,208 --> 00:11:23,588
that well one way of doing that is you

270
00:11:20,259 --> 00:11:27,850
can weld in to your executable an actual

271
00:11:23,589 --> 00:11:29,679
marker that lets Nvidia know that you

272
00:11:27,850 --> 00:11:31,778
want to run the screen GPU and similarly

273
00:11:29,678 --> 00:11:33,159
you can do that for AMD and you can see

274
00:11:31,778 --> 00:11:35,109
the person who is requesting it here

275
00:11:33,159 --> 00:11:36,759
helpfully cut and paste those in but

276
00:11:35,109 --> 00:11:38,168
these are not secret you can find these

277
00:11:36,759 --> 00:11:40,839
on the internet just by searching so

278
00:11:38,168 --> 00:11:45,208
it's totally it's just a known thing you

279
00:11:40,839 --> 00:11:49,689
can put in there and what you want to do

280
00:11:45,208 --> 00:11:52,358
is you want to use these to tell the

281
00:11:49,688 --> 00:11:53,948
default graphics setup that hey as long

282
00:11:52,359 --> 00:11:55,689
as the user doesn't tell you not to

283
00:11:53,948 --> 00:11:57,099
because the user may say I want to run

284
00:11:55,688 --> 00:11:58,538
on low power so don't let this happen

285
00:11:57,100 --> 00:12:00,159
there's not as you didn't tell you not

286
00:11:58,538 --> 00:12:02,470
to run us we're one of those

287
00:12:00,159 --> 00:12:04,808
applications that needs the power okay

288
00:12:02,470 --> 00:12:07,418
so how does this work in practice well

289
00:12:04,808 --> 00:12:09,188
if you go way back to the beginning of

290
00:12:07,418 --> 00:12:10,749
handmade hero

291
00:12:09,188 --> 00:12:12,608
do you remember and we've done this a

292
00:12:10,749 --> 00:12:14,619
couple times since then to remember

293
00:12:12,609 --> 00:12:15,939
there's this dependency check I don't

294
00:12:14,619 --> 00:12:18,759
know if this thing ever worked the other

295
00:12:15,938 --> 00:12:26,318
dependency generator that doesn't look

296
00:12:18,759 --> 00:12:33,729
good this here it is if you remember

297
00:12:26,318 --> 00:12:37,568
looking at the you see here we open up

298
00:12:33,729 --> 00:12:39,009
ours first of all it's in build so we've

299
00:12:37,568 --> 00:12:41,259
done this a couple times if I open up

300
00:12:39,009 --> 00:12:45,938
win32 your hammer exe what you're gonna

301
00:12:41,259 --> 00:12:49,209
see here right is a sort of a listing of

302
00:12:45,938 --> 00:12:50,978
what our executable looks like when the

303
00:12:49,208 --> 00:12:52,688
system goes to read it now remember go

304
00:12:50,979 --> 00:12:54,339
back and look at the archives if you

305
00:12:52,688 --> 00:12:55,208
don't know any of this stuff because

306
00:12:54,339 --> 00:12:56,909
we've covered it all before

307
00:12:55,208 --> 00:12:59,798
when you build a Windows executable

308
00:12:56,908 --> 00:13:01,389
inside that executable or DLL but

309
00:12:59,798 --> 00:13:04,058
basically actually O's Andy allows both

310
00:13:01,389 --> 00:13:06,579
have these there's essentially a table

311
00:13:04,058 --> 00:13:10,928
in there that lists a bunch of things

312
00:13:06,578 --> 00:13:12,188
that the executable has marked so it's a

313
00:13:10,928 --> 00:13:13,869
bunch of code right next table is a

314
00:13:12,188 --> 00:13:16,389
giant block of code and data and stuff

315
00:13:13,869 --> 00:13:18,489
like this and in order for that the

316
00:13:16,389 --> 00:13:20,360
operation to use it it has to have some

317
00:13:18,489 --> 00:13:21,679
a table that basically says you know

318
00:13:20,360 --> 00:13:23,480
here's the entry point yours rise to

319
00:13:21,678 --> 00:13:24,889
start running this thing for example but

320
00:13:23,480 --> 00:13:26,389
it also needs to know like are there any

321
00:13:24,889 --> 00:13:28,039
other things that I might need to know

322
00:13:26,389 --> 00:13:29,749
in here are there other things I might

323
00:13:28,039 --> 00:13:33,169
need to link to or options that I need

324
00:13:29,749 --> 00:13:36,290
to know about and so what happens is if

325
00:13:33,169 --> 00:13:38,238
you look at the handmade executable well

326
00:13:36,289 --> 00:13:41,028
what you can see is you can see all of

327
00:13:38,239 --> 00:13:43,429
the things that we import for example

328
00:13:41,028 --> 00:13:45,169
here they are right but you can also see

329
00:13:43,428 --> 00:13:47,269
all of the things that we export now

330
00:13:45,169 --> 00:13:49,219
since this executable doesn't ever get

331
00:13:47,269 --> 00:13:51,409
linked to by anybody else you can see

332
00:13:49,220 --> 00:13:52,879
there's no exports here so the only

333
00:13:51,409 --> 00:13:54,078
thing that's marked on our table and

334
00:13:52,879 --> 00:13:55,670
it's not shown here but the only was

335
00:13:54,078 --> 00:13:58,308
marked sale is the actual entry point

336
00:13:55,669 --> 00:14:00,019
that the system uses but remember we

337
00:13:58,308 --> 00:14:03,169
build some DLL scoops I didn't mean to

338
00:14:00,019 --> 00:14:05,778
close that so let's open one of our

339
00:14:03,169 --> 00:14:08,149
dll's one of the ones we use right so

340
00:14:05,778 --> 00:14:10,428
here's win32 a hand made opengl this is

341
00:14:08,149 --> 00:14:12,678
our renderer right and so what you can

342
00:14:10,428 --> 00:14:15,619
see here is if we actually look at our

343
00:14:12,678 --> 00:14:17,269
DLL you can see that we export a

344
00:14:15,619 --> 00:14:20,449
function went through to load renderer

345
00:14:17,269 --> 00:14:22,999
right that's our function that our game

346
00:14:20,448 --> 00:14:25,609
calls we load that in and then jump to

347
00:14:22,999 --> 00:14:26,928
it right so this is that table and we

348
00:14:25,610 --> 00:14:29,869
can put as many things in there as we

349
00:14:26,928 --> 00:14:33,438
want so you've seen me do this in the

350
00:14:29,869 --> 00:14:36,379
win32 code right I load this DLL I call

351
00:14:33,438 --> 00:14:39,110
get proc address and I look for get for

352
00:14:36,379 --> 00:14:41,928
win32 load renderer right so I can see

353
00:14:39,110 --> 00:14:45,409
you know an external executable can load

354
00:14:41,928 --> 00:14:47,749
a DLL it can see what's in it so what

355
00:14:45,409 --> 00:14:51,409
they chose to do for the Nvidia and the

356
00:14:47,749 --> 00:14:54,949
a.m. AMD stuff the way they chose to

357
00:14:51,409 --> 00:14:58,159
expose that preference right that says

358
00:14:54,948 --> 00:15:01,698
this executable wants to be run on you

359
00:14:58,159 --> 00:15:04,219
know Nvidia Optimus or on AMD's discrete

360
00:15:01,698 --> 00:15:07,278
chip if it's there right if they said

361
00:15:04,220 --> 00:15:09,619
just add some dummy stuff to this

362
00:15:07,278 --> 00:15:11,958
ordinal table the export table just add

363
00:15:09,619 --> 00:15:14,149
some dummy stuff with secret names that

364
00:15:11,958 --> 00:15:16,188
we provide right and we're the only

365
00:15:14,149 --> 00:15:18,289
people who look for that we'll look for

366
00:15:16,188 --> 00:15:19,909
it if it's there rugged do anything with

367
00:15:18,289 --> 00:15:22,278
it but we're just gonna see that it's

368
00:15:19,909 --> 00:15:24,379
there and if it's there we'll know that

369
00:15:22,278 --> 00:15:26,509
that's what you wanted right so they're

370
00:15:24,379 --> 00:15:29,209
effectively using the export table as a

371
00:15:26,509 --> 00:15:30,740
sort of preference as a sort of thing to

372
00:15:29,208 --> 00:15:32,508
put a preference in there so it's

373
00:15:30,740 --> 00:15:34,159
they're not trying to actually provide

374
00:15:32,509 --> 00:15:35,870
an address like you normally would

375
00:15:34,159 --> 00:15:37,850
instead what they're trying to do is

376
00:15:35,870 --> 00:15:40,100
just say look let's dump some settings

377
00:15:37,850 --> 00:15:41,509
in there right so instead of providing

378
00:15:40,100 --> 00:15:43,579
an address that you know you're gonna

379
00:15:41,509 --> 00:15:45,620
jump to or do something with instead the

380
00:15:43,578 --> 00:15:47,870
address is just where do you read the

381
00:15:45,620 --> 00:15:49,669
preference from right it's a good idea

382
00:15:47,870 --> 00:15:51,528
right it's it works pretty well I think

383
00:15:49,669 --> 00:15:53,649
it's a it's a smart use of that feature

384
00:15:51,528 --> 00:15:55,730
and it doesn't cost really anything that

385
00:15:53,649 --> 00:15:57,559
making that table a little larger

386
00:15:55,730 --> 00:16:00,350
doesn't hurt anybody it's a not a big

387
00:15:57,559 --> 00:16:03,099
table to begin with so all we would have

388
00:16:00,350 --> 00:16:06,639
to do if we wanted to weren't that is

389
00:16:03,100 --> 00:16:10,250
you know inside are went through two

390
00:16:06,639 --> 00:16:11,930
handmade code in here we can just add a

391
00:16:10,250 --> 00:16:18,528
little thing where we say something like

392
00:16:11,929 --> 00:16:23,508
you know note we prefer the discrete GPU

393
00:16:18,528 --> 00:16:25,399
in laptops we're available right and

394
00:16:23,509 --> 00:16:27,889
then what we would do is we just again

395
00:16:25,399 --> 00:16:28,730
include these secrets so here they are

396
00:16:27,889 --> 00:16:30,500
right

397
00:16:28,730 --> 00:16:32,659
conveniently supplied by the person

398
00:16:30,500 --> 00:16:33,919
that's a great thank you for filing that

399
00:16:32,659 --> 00:16:35,179
with the bug report so I don't have to

400
00:16:33,919 --> 00:16:36,378
go search for them because otherwise you

401
00:16:35,179 --> 00:16:39,528
search on the web and you gotta go dig

402
00:16:36,379 --> 00:16:42,528
these up yourself right but here they

403
00:16:39,528 --> 00:16:44,688
are right there just to exported symbols

404
00:16:42,528 --> 00:16:47,028
one is called envy optimist enable

405
00:16:44,688 --> 00:16:48,528
enablement when it's called ambi power

406
00:16:47,028 --> 00:16:51,828
expressed requests high-performance

407
00:16:48,528 --> 00:16:54,860
right and all they literally don't do

408
00:16:51,828 --> 00:16:58,578
anything other than export those symbols

409
00:16:54,860 --> 00:17:00,500
for us so now if we rebuild right all

410
00:16:58,578 --> 00:17:03,528
that's gonna happen is when we look at

411
00:17:00,500 --> 00:17:06,529
our code now if i refresh this and i

412
00:17:03,528 --> 00:17:10,400
don't really know how to do that can i

413
00:17:06,529 --> 00:17:14,769
refresh this I can't so I guess I'll

414
00:17:10,400 --> 00:17:14,769
just reload it we go

415
00:17:17,380 --> 00:17:23,380
or maybe that did refresh I was on the

416
00:17:19,298 --> 00:17:24,818
wrong one so maybe I did there we go so

417
00:17:23,380 --> 00:17:26,289
now when I look at the executable

418
00:17:24,818 --> 00:17:28,808
remember there was nothing on here

419
00:17:26,288 --> 00:17:33,509
before now both of those things show up

420
00:17:28,808 --> 00:17:36,548
on the import table and both of them are

421
00:17:33,509 --> 00:17:38,319
like it shows where the address is if we

422
00:17:36,548 --> 00:17:41,740
went and looked at that address in

423
00:17:38,319 --> 00:17:43,779
theory we should see the 1 &amp; 1 now I

424
00:17:41,740 --> 00:17:45,669
don't know if they care about what those

425
00:17:43,779 --> 00:17:47,200
are set to it made like I don't know if

426
00:17:45,669 --> 00:17:49,270
they actually go in and look at what

427
00:17:47,200 --> 00:17:50,590
those values are they may not it may

428
00:17:49,269 --> 00:17:52,269
just be if it's there or not but they

429
00:17:50,589 --> 00:17:55,480
may actually go in digital and read

430
00:17:52,269 --> 00:17:57,879
what's out that app off set look and

431
00:17:55,480 --> 00:17:59,409
then see if it's a 1 or not so we want

432
00:17:57,880 --> 00:18:01,179
to leave it as the recommended setting

433
00:17:59,409 --> 00:18:04,000
just in case they actually look but they

434
00:18:01,179 --> 00:18:05,500
may not look they may just look at at

435
00:18:04,000 --> 00:18:07,240
whether the name is there for all I know

436
00:18:05,500 --> 00:18:08,740
so I'm not sure you can go read about it

437
00:18:07,240 --> 00:18:10,089
one way or the other we don't care we

438
00:18:08,740 --> 00:18:10,990
know that's what they want us to put in

439
00:18:10,089 --> 00:18:13,928
their new name but so we're just gonna

440
00:18:10,990 --> 00:18:33,038
leave it that way and that's it so now

441
00:18:13,929 --> 00:18:36,159
on laptops that should just work so

442
00:18:33,038 --> 00:18:39,009
that's all done and again if we wanted

443
00:18:36,159 --> 00:18:40,750
to test that we could on a laptop or

444
00:18:39,009 --> 00:18:43,569
something we can't really test it on

445
00:18:40,750 --> 00:18:45,579
this machine but that's something for a

446
00:18:43,569 --> 00:18:47,649
little later on in the process also it's

447
00:18:45,579 --> 00:18:49,720
kind of a hard thing to test because a

448
00:18:47,650 --> 00:18:52,298
lot of times those things are finicky

449
00:18:49,720 --> 00:18:53,740
and so it's hard to know whether you're

450
00:18:52,298 --> 00:18:55,599
really getting the right results or not

451
00:18:53,740 --> 00:18:57,190
because there's so much cruft

452
00:18:55,599 --> 00:18:58,859
in the driver that may do different

453
00:18:57,190 --> 00:19:01,000
things or decide to do different things

454
00:18:58,859 --> 00:19:03,038
sometimes it's kind of hard to figure

455
00:19:01,000 --> 00:19:04,359
that out right whether you're setting is

456
00:19:03,038 --> 00:19:06,460
what's causing it to run or whether it

457
00:19:04,359 --> 00:19:08,439
was some thing the driver just decided

458
00:19:06,460 --> 00:19:11,850
to do because it knows that it should or

459
00:19:08,440 --> 00:19:15,009
whatever right so that's a little tough

460
00:19:11,849 --> 00:19:17,500
if that makes sense all right so let's

461
00:19:15,009 --> 00:19:20,650
go to Linux updates now I don't know if

462
00:19:17,500 --> 00:19:23,679
these are up-to-date or not but this

463
00:19:20,650 --> 00:19:26,620
this is you know from a while back and

464
00:19:23,679 --> 00:19:31,320
so we want to see whether these see

465
00:19:26,619 --> 00:19:31,319
what's going on let's see here

466
00:19:31,799 --> 00:19:36,609
so let's take a look at some of this

467
00:19:34,359 --> 00:19:38,649
stuff and try to figure out what we

468
00:19:36,609 --> 00:19:40,839
could this one for example we definitely

469
00:19:38,650 --> 00:19:44,740
haven't fixed so we could go try to fix

470
00:19:40,839 --> 00:19:47,949
that for them the status problem here

471
00:19:44,740 --> 00:19:51,099
looks like we've got an issue with the

472
00:19:47,950 --> 00:19:53,860
window manager so that one we might want

473
00:19:51,099 --> 00:19:56,019
to fix and then this one I don't know to

474
00:19:53,859 --> 00:20:00,069
what extent we're still doing that but

475
00:19:56,019 --> 00:20:02,230
we can look so all of these are things

476
00:20:00,069 --> 00:20:03,970
we should be able to fix for people who

477
00:20:02,230 --> 00:20:06,039
are running on links just makes it

478
00:20:03,970 --> 00:20:07,720
easier for them to keep running on Linux

479
00:20:06,039 --> 00:20:09,909
so let's see if we can we can deal with

480
00:20:07,720 --> 00:20:15,240
that for them so in the OpenGL

481
00:20:09,910 --> 00:20:18,279
infrastruc which we have right here

482
00:20:15,240 --> 00:20:20,680
basically the issue is that these names

483
00:20:18,279 --> 00:20:23,230
are as Mac defined as macros on Linux

484
00:20:20,680 --> 00:20:27,000
unfortunately so what we want to do is

485
00:20:23,230 --> 00:20:30,220
just just get them out of there right

486
00:20:27,000 --> 00:20:33,670
something like this just just make it so

487
00:20:30,220 --> 00:20:36,190
there's something not just name them

488
00:20:33,670 --> 00:20:39,009
something else right and that way we

489
00:20:36,190 --> 00:20:40,960
won't have that conflict the only reason

490
00:20:39,009 --> 00:20:43,029
we're doing that again is just to

491
00:20:40,960 --> 00:20:45,519
placate the macro preprocessor so that

492
00:20:43,029 --> 00:20:46,690
it doesn't freak out that's not

493
00:20:45,519 --> 00:20:49,660
something that happens on other

494
00:20:46,690 --> 00:20:52,029
platforms but apparently it's true on on

495
00:20:49,660 --> 00:20:55,330
Linux so again just renaming those

496
00:20:52,029 --> 00:20:58,240
should solve that problem so that should

497
00:20:55,329 --> 00:21:00,129
be good the status variable here in

498
00:20:58,240 --> 00:21:01,990
hand-made open jail I don't know we can

499
00:21:00,130 --> 00:21:05,950
just look for anything called status in

500
00:21:01,990 --> 00:21:08,500
a in a dependent thing and check let me

501
00:21:05,950 --> 00:21:10,690
just see if we've got anything here

502
00:21:08,500 --> 00:21:12,609
that's using the word status as a bear

503
00:21:10,690 --> 00:21:15,279
yes so this right here

504
00:21:12,609 --> 00:21:17,589
status is a type name apparently of some

505
00:21:15,279 --> 00:21:20,019
kind or something like this and so it

506
00:21:17,589 --> 00:21:21,879
doesn't like this so I can just rename

507
00:21:20,019 --> 00:21:24,789
this to frame buffer status or something

508
00:21:21,880 --> 00:21:26,860
right and then hopefully that won't be

509
00:21:24,789 --> 00:21:31,509
an issue we'll see how that how that

510
00:21:26,859 --> 00:21:34,059
goes there that seems fine right and

511
00:21:31,509 --> 00:21:36,069
then down here where we've got the this

512
00:21:34,059 --> 00:21:39,909
one's a little bit more subtle so let's

513
00:21:36,069 --> 00:21:42,700
talk about this one a little bit more if

514
00:21:39,910 --> 00:21:45,160
we go into wizard do handmaid

515
00:21:42,700 --> 00:21:48,819
what you can see for our memory

516
00:21:45,160 --> 00:21:51,090
subsystem is that in here we've got like

517
00:21:48,819 --> 00:21:53,259
you know the code that normally does

518
00:21:51,089 --> 00:21:55,839
allocations you can see it's got like

519
00:21:53,259 --> 00:21:59,500
virtual free and virtual a lock and

520
00:21:55,839 --> 00:22:01,629
stuff like this right and so the reason

521
00:21:59,500 --> 00:22:03,759
that we call like if you uh if you

522
00:22:01,630 --> 00:22:04,840
followed handmade hero this far you you

523
00:22:03,759 --> 00:22:09,819
know how we deal with memory and all

524
00:22:04,839 --> 00:22:11,980
that sort of stuff at some point we have

525
00:22:09,819 --> 00:22:14,639
to call the operating system to map

526
00:22:11,980 --> 00:22:16,390
memory for us because obviously you know

527
00:22:14,640 --> 00:22:17,530
allocating memory is something a lot of

528
00:22:16,390 --> 00:22:19,090
partners don't think about these days

529
00:22:17,529 --> 00:22:21,190
because they just use garbage collection

530
00:22:19,089 --> 00:22:22,569
or a language that doesn't have that

531
00:22:21,190 --> 00:22:24,190
concept and memory just kind of comes

532
00:22:22,569 --> 00:22:26,529
out of nowhere and goes back to nowhere

533
00:22:24,190 --> 00:22:28,630
and you have no idea what's going on in

534
00:22:26,529 --> 00:22:30,519
Los Osos behind the scenes for us right

535
00:22:28,630 --> 00:22:32,320
we actually are programming the actual

536
00:22:30,519 --> 00:22:35,289
computer here and what that means is

537
00:22:32,319 --> 00:22:37,569
that at some point we need to map into

538
00:22:35,289 --> 00:22:39,639
an address space reserved we have to

539
00:22:37,569 --> 00:22:41,859
reserve some part of the physical memory

540
00:22:39,640 --> 00:22:43,180
and the virtual memory that the

541
00:22:41,859 --> 00:22:46,479
operating system is thinking about as

542
00:22:43,180 --> 00:22:49,240
well we have to have that reserved for

543
00:22:46,480 --> 00:22:51,039
us to use and so the way we do that is

544
00:22:49,240 --> 00:22:52,750
with the win32 calls virtual Alec and

545
00:22:51,039 --> 00:22:54,670
virtual free now the way we would do it

546
00:22:52,750 --> 00:22:56,220
if we were putting the computer 100%

547
00:22:54,670 --> 00:23:00,190
directly is we'd be able to actually

548
00:22:56,220 --> 00:23:02,410
modify the page tables ourselves right

549
00:23:00,190 --> 00:23:04,570
we'd be able to actually create the CPU

550
00:23:02,410 --> 00:23:06,370
page tables that say what the memory is

551
00:23:04,569 --> 00:23:07,960
but we can't do that because we're

552
00:23:06,369 --> 00:23:10,179
running on top of Windows and Windows is

553
00:23:07,960 --> 00:23:11,680
the only person privileged to do that so

554
00:23:10,180 --> 00:23:13,570
we have to ask Windows do it for us

555
00:23:11,680 --> 00:23:16,570
which is fine it's just virtual Alec

556
00:23:13,569 --> 00:23:19,480
virtual free virtual Alec creates a

557
00:23:16,569 --> 00:23:22,329
mapping of pages for us to use virtual

558
00:23:19,480 --> 00:23:27,130
free releases some of those pages back

559
00:23:22,329 --> 00:23:29,879
right now here's the problem that that's

560
00:23:27,130 --> 00:23:32,320
being talked about here on Linux

561
00:23:29,880 --> 00:23:34,900
obviously when you port this thing to

562
00:23:32,319 --> 00:23:37,960
Linux you also have to have a way to do

563
00:23:34,900 --> 00:23:39,340
that same mapping and again even though

564
00:23:37,960 --> 00:23:42,190
it's the same chip

565
00:23:39,339 --> 00:23:43,629
they're both x64 is probably running

566
00:23:42,190 --> 00:23:45,039
this thing I mean you could run it on an

567
00:23:43,630 --> 00:23:46,780
arm or whatever but you know it's

568
00:23:45,039 --> 00:23:50,490
probably the links were isn't probably

569
00:23:46,779 --> 00:23:52,629
run in the next 64 as well that's

570
00:23:50,490 --> 00:23:54,069
because we are not editing the page

571
00:23:52,630 --> 00:23:56,230
tables we have to call the operating

572
00:23:54,069 --> 00:23:58,689
system to do that it means we have to

573
00:23:56,230 --> 00:24:01,539
different ways we have to call the

574
00:23:58,690 --> 00:24:04,240
operating system one for Linux one for

575
00:24:01,539 --> 00:24:05,980
win32 so here's the win32 version

576
00:24:04,240 --> 00:24:08,980
what's the linux version well the linux

577
00:24:05,980 --> 00:24:10,919
version is mem map and mun map I think I

578
00:24:08,980 --> 00:24:16,298
can't member what the unmapped one is

579
00:24:10,919 --> 00:24:18,190
just saying here I don't remember maybe

580
00:24:16,298 --> 00:24:19,589
M map itself kimmm I don't remember what

581
00:24:18,190 --> 00:24:22,808
the Lynx versions are it's been a while

582
00:24:19,589 --> 00:24:24,909
but point being they are basically the

583
00:24:22,808 --> 00:24:27,519
same as virtual rocket virtual free but

584
00:24:24,910 --> 00:24:30,190
like all operating systems each one is a

585
00:24:27,519 --> 00:24:33,279
little bit different and for virtual a

586
00:24:30,190 --> 00:24:35,259
lock Windows doesn't need you to tell it

587
00:24:33,279 --> 00:24:37,389
about the size of the pages anymore

588
00:24:35,259 --> 00:24:39,849
after you do the first time so when you

589
00:24:37,390 --> 00:24:43,870
call virtual a lock and you say I want

590
00:24:39,849 --> 00:24:47,048
to allocate 30 pages of memory 34k pages

591
00:24:43,869 --> 00:24:50,109
right if you ever want to talk about

592
00:24:47,048 --> 00:24:52,539
that memory again you only need the base

593
00:24:50,109 --> 00:24:54,789
pointer because Windows remembers what

594
00:24:52,539 --> 00:24:57,159
the size was and you don't have to tell

595
00:24:54,789 --> 00:24:59,558
it so when you call virtual free you

596
00:24:57,160 --> 00:25:04,210
notice we don't pass the size we just

597
00:24:59,558 --> 00:25:07,480
pass memory now if you look at virtual

598
00:25:04,210 --> 00:25:09,808
free what you can see is the size is

599
00:25:07,480 --> 00:25:14,048
actually there and is actually optional

600
00:25:09,808 --> 00:25:16,269
but if you're not gonna do an operation

601
00:25:14,048 --> 00:25:18,519
that has to do with partial with with

602
00:25:16,269 --> 00:25:21,129
sub working out of pages if you're just

603
00:25:18,519 --> 00:25:22,900
gonna release an entire chunk you can

604
00:25:21,130 --> 00:25:24,190
just pass 0 because it knows what the

605
00:25:22,900 --> 00:25:29,679
size is so it'll just release the whole

606
00:25:24,190 --> 00:25:32,200
size for you right so that doesn't have

607
00:25:29,679 --> 00:25:34,240
an equivalent on Linux on Linux when you

608
00:25:32,200 --> 00:25:36,880
call mem map it doesn't remember the

609
00:25:34,240 --> 00:25:39,339
size it has no idea what the sizes so

610
00:25:36,880 --> 00:25:41,500
when you go to unmapped the size you

611
00:25:39,339 --> 00:25:42,819
have to pass the size again which means

612
00:25:41,500 --> 00:25:46,058
that the people who are porting this

613
00:25:42,819 --> 00:25:48,579
game to linux they don't have a way of

614
00:25:46,058 --> 00:25:50,529
conveniently doing this when virtual

615
00:25:48,579 --> 00:25:53,639
free gets called everywhere it gets

616
00:25:50,529 --> 00:25:56,710
called right so here's another one you

617
00:25:53,640 --> 00:26:00,669
can see all of these they all pass zero

618
00:25:56,710 --> 00:26:03,400
and there's no way for them to make that

619
00:26:00,669 --> 00:26:05,620
call so what we need to do is go through

620
00:26:03,400 --> 00:26:09,009
each place where we call virtual free

621
00:26:05,619 --> 00:26:11,799
and work backwards to make sure

622
00:26:09,009 --> 00:26:14,140
that route from a lock to free always

623
00:26:11,799 --> 00:26:16,509
preserves the size the whole way through

624
00:26:14,140 --> 00:26:19,270
that makes sense so that's what we need

625
00:26:16,509 --> 00:26:23,460
to do now so let's start by looking for

626
00:26:19,269 --> 00:26:23,460
this debug platform reading to our file

627
00:26:24,539 --> 00:26:28,089
are we using this stuff how is this

628
00:26:27,250 --> 00:26:30,519
stuff getting used

629
00:26:28,089 --> 00:26:32,919
I assume it's getting used in the asset

630
00:26:30,519 --> 00:26:37,359
system but I don't really know let's

631
00:26:32,920 --> 00:26:42,490
just find out it's not getting used we

632
00:26:37,359 --> 00:26:45,189
can also just delete it but this is in

633
00:26:42,490 --> 00:26:50,890
our render test code this stuff doesn't

634
00:26:45,190 --> 00:26:58,930
count so at the moment we're not really

635
00:26:50,890 --> 00:27:01,960
using it but I'm disinclined to

636
00:26:58,930 --> 00:27:03,789
eliminate it entirely only because I

637
00:27:01,960 --> 00:27:06,130
don't know we may want to use it again

638
00:27:03,789 --> 00:27:12,789
at some point soon right

639
00:27:06,130 --> 00:27:16,000
because again well I don't know since

640
00:27:12,789 --> 00:27:18,399
we've got these now this maybe should

641
00:27:16,000 --> 00:27:20,200
just go away because maybe I think now

642
00:27:18,400 --> 00:27:21,700
we've got open and closed we've got read

643
00:27:20,200 --> 00:27:24,610
and write I think we should probably

644
00:27:21,700 --> 00:27:27,039
just use these so let's say that this

645
00:27:24,609 --> 00:27:31,569
goes away I'm gonna delete those and see

646
00:27:27,039 --> 00:27:34,740
what happens it looks like we've got it

647
00:27:31,569 --> 00:27:34,740
to do for exactly that

648
00:27:38,619 --> 00:27:43,329
yeah so so those we don't need to change

649
00:27:41,950 --> 00:27:45,038
I think because those should just go

650
00:27:43,329 --> 00:27:48,038
through the regular system now and so I

651
00:27:45,038 --> 00:27:49,028
don't think we really want to yeah I

652
00:27:48,038 --> 00:27:49,538
don't think I want to bother with that

653
00:27:49,028 --> 00:27:53,700
anymore

654
00:27:49,538 --> 00:27:57,038
all right so those are all gone now and

655
00:27:53,700 --> 00:28:02,528
so in the win32 handmade stuff where is

656
00:27:57,038 --> 00:28:06,509
that winter to where is that debug read

657
00:28:02,528 --> 00:28:06,509
entire file I don't want that to go away

658
00:28:11,759 --> 00:28:17,950
here it is so this stuff here where

659
00:28:14,919 --> 00:28:19,480
we've got free file memory read entire

660
00:28:17,950 --> 00:28:21,610
file right trough that stuff just wants

661
00:28:19,480 --> 00:28:23,558
to go away and now I just want to pull

662
00:28:21,609 --> 00:28:27,668
out anything that was previously using

663
00:28:23,558 --> 00:28:30,278
that so this stuff here this read entire

664
00:28:27,669 --> 00:28:31,929
file free file memory yeah so that stuff

665
00:28:30,278 --> 00:28:33,849
can just go away cuz we have real file

666
00:28:31,929 --> 00:28:36,970
reading and writing in there now which

667
00:28:33,849 --> 00:28:40,000
just makes more sense anyway so that all

668
00:28:36,970 --> 00:28:41,558
seems good now we just need to deal with

669
00:28:40,000 --> 00:28:43,869
the other ones that are there so there's

670
00:28:41,558 --> 00:28:45,460
here and there this one we don't really

671
00:28:43,869 --> 00:28:49,058
have to worry about because this one is

672
00:28:45,460 --> 00:28:51,519
only for win32 and also the dibs section

673
00:28:49,058 --> 00:28:56,740
stuff we don't use anymore right so

674
00:28:51,519 --> 00:28:58,148
that's pretty much not a thing in fact

675
00:28:56,740 --> 00:29:01,120
we could probably pull this code out

676
00:28:58,148 --> 00:29:02,709
entirely at this point because right now

677
00:29:01,119 --> 00:29:06,009
the only thing we're doing with that is

678
00:29:02,710 --> 00:29:08,350
changing the off-screen buffer stuff we

679
00:29:06,009 --> 00:29:10,750
could just delete this entirely because

680
00:29:08,349 --> 00:29:12,449
the we always use open jail or whatever

681
00:29:10,750 --> 00:29:15,069
the sub graphics driver is for display

682
00:29:12,450 --> 00:29:17,470
so really it's just the buffer width and

683
00:29:15,069 --> 00:29:20,230
height stuff that we're even using there

684
00:29:17,470 --> 00:29:23,589
so what we might want to do is just say

685
00:29:20,230 --> 00:29:26,349
look global back buffer you know is that

686
00:29:23,589 --> 00:29:29,678
really a thing we should even be doing

687
00:29:26,349 --> 00:29:32,288
at this point because that's kind of old

688
00:29:29,679 --> 00:29:34,000
that's old news right and we're really

689
00:29:32,288 --> 00:29:36,339
just using it for the render width and

690
00:29:34,000 --> 00:29:38,890
height at this point and so I feel like

691
00:29:36,339 --> 00:29:41,918
that kind of just wants to go away right

692
00:29:38,890 --> 00:29:44,620
the this win32 off-screen buffer stuff

693
00:29:41,919 --> 00:29:46,390
that just probably wants to die

694
00:29:44,619 --> 00:29:51,829
so let's take a look at who's actually

695
00:29:46,390 --> 00:29:53,120
using it and we'll just pull that out

696
00:29:51,829 --> 00:29:54,889
because that's just another thing we

697
00:29:53,119 --> 00:29:58,099
should just clean up right it just isn't

698
00:29:54,890 --> 00:30:02,930
isn't really relevant uh so yeah let's

699
00:29:58,099 --> 00:30:06,199
ditch this for starters get that out of

700
00:30:02,930 --> 00:30:08,390
there I where we're actually calling it

701
00:30:06,200 --> 00:30:11,049
we'll get rid of that so in here we'll

702
00:30:08,390 --> 00:30:21,250
just have a thing that's like you know

703
00:30:11,049 --> 00:30:27,619
v2 you render dim you can preserve this

704
00:30:21,250 --> 00:30:33,559
and we can also have like you know all

705
00:30:27,619 --> 00:30:43,849
of these could still come in here right

706
00:30:33,559 --> 00:30:45,919
so if we just go ahead and keep all of

707
00:30:43,849 --> 00:30:47,419
our old test resolutions because we

708
00:30:45,920 --> 00:30:56,690
might want to play with those at some

709
00:30:47,420 --> 00:30:59,150
point as well right

710
00:30:56,690 --> 00:31:01,700
so that should be fine and then our

711
00:30:59,150 --> 00:31:02,960
render dim we can just use later so

712
00:31:01,700 --> 00:31:06,170
there's only a couple places we'd really

713
00:31:02,960 --> 00:31:10,519
have to never I forgot to leave the

714
00:31:06,170 --> 00:31:12,500
global back buffer I'm like we should

715
00:31:10,519 --> 00:31:14,930
have a bunch of errors but we didn't

716
00:31:12,500 --> 00:31:17,119
have any errors I'm like what

717
00:31:14,930 --> 00:31:20,240
so the main thing we're gonna have to

718
00:31:17,119 --> 00:31:23,029
deal with is this so I'm gonna skip that

719
00:31:20,240 --> 00:31:25,579
for a minute we're gonna come down here

720
00:31:23,029 --> 00:31:28,369
we now know that this rendered dim stuff

721
00:31:25,579 --> 00:31:32,210
should be fine so if I just do render

722
00:31:28,369 --> 00:31:35,329
dim X you know render dim I think

723
00:31:32,210 --> 00:31:42,259
actually we can actually do that if we

724
00:31:35,329 --> 00:31:45,919
want right no win32 window dimension I

725
00:31:42,259 --> 00:31:48,170
don't know what that is so this is just

726
00:31:45,920 --> 00:31:50,000
an int Winton I don't know I guess it's

727
00:31:48,170 --> 00:31:52,550
an int so maybe we wouldn't want to

728
00:31:50,000 --> 00:31:54,230
switch that over 2a v to you because but

729
00:31:52,549 --> 00:31:55,970
assuming that they can never really be

730
00:31:54,230 --> 00:31:57,500
negative we should probably just switch

731
00:31:55,970 --> 00:31:59,990
that over to Abby to you as well

732
00:31:57,500 --> 00:32:03,160
again that's just cleanup oops I didn't

733
00:31:59,990 --> 00:32:03,160
mean to that meant to hit the N key

734
00:32:04,420 --> 00:32:12,710
okay can I jump to the next one

735
00:32:08,690 --> 00:32:14,539
2012 so yeah this is all nonsense

736
00:32:12,710 --> 00:32:20,390
because this buffer is not used anymore

737
00:32:14,539 --> 00:32:22,940
so we'll just get rid of that and so

738
00:32:20,390 --> 00:32:24,559
we're really just down to this if you

739
00:32:22,940 --> 00:32:26,539
look at what happens here we've got the

740
00:32:24,558 --> 00:32:29,000
main window callback and when the window

741
00:32:26,539 --> 00:32:33,049
position changes what you can see here

742
00:32:29,000 --> 00:32:34,970
is we've got a like a switch for you

743
00:32:33,049 --> 00:32:39,669
know fullscreen sort of stuff I think is

744
00:32:34,970 --> 00:32:39,670
what's going on here I it looks like

745
00:32:49,480 --> 00:32:58,329
I shall be honest I don't really know

746
00:32:51,910 --> 00:33:03,429
what that's saying if the window

747
00:32:58,329 --> 00:33:07,418
position is changing and the shift key

748
00:33:03,429 --> 00:33:11,740
is down oh you know what this is

749
00:33:07,419 --> 00:33:14,380
probably aspect ratio constrain so are

750
00:33:11,740 --> 00:33:16,480
you allowed to resize our window right

751
00:33:14,380 --> 00:33:17,950
now so we haven't played with this code

752
00:33:16,480 --> 00:33:20,669
in a while let me just take a look at

753
00:33:17,950 --> 00:33:20,669
what's going on there

754
00:33:21,690 --> 00:33:38,190
oops did I delete some important code

755
00:33:31,179 --> 00:33:44,590
there I probably did so my guess is

756
00:33:38,190 --> 00:33:46,950
sorry I probably deleted since this is

757
00:33:44,589 --> 00:33:48,639
the quickest way for me to show you I

758
00:33:46,950 --> 00:33:52,950
accidentally deleted the thing that

759
00:33:48,640 --> 00:33:55,690
calls the renderer to in it so in here

760
00:33:52,950 --> 00:34:01,960
you can guess I could just search for it

761
00:33:55,690 --> 00:34:05,410
this way I suspect we need to call this

762
00:34:01,960 --> 00:34:06,850
still no actually no it's not in there

763
00:34:05,410 --> 00:34:08,619
so I'm not sure why we well I'm not sure

764
00:34:06,849 --> 00:34:09,668
why that was complaining because that

765
00:34:08,619 --> 00:34:11,470
looks fine actually

766
00:34:09,668 --> 00:34:13,599
right it doesn't actually call the

767
00:34:11,469 --> 00:34:19,779
renderer there so what was the problem

768
00:34:13,599 --> 00:34:22,618
why is this complaining show me why you

769
00:34:19,780 --> 00:34:22,619
were complaining sir

770
00:34:23,909 --> 00:34:29,919
the deputy account is set to zero which

771
00:34:26,559 --> 00:34:31,690
means that nobody actually ever inside

772
00:34:29,918 --> 00:34:35,230
the swap buffers here nobody actually

773
00:34:31,690 --> 00:34:39,960
ever called the win32 in it open jail

774
00:34:35,230 --> 00:34:39,960
call properly it looks like

775
00:34:47,760 --> 00:34:55,139
so we're calling the in it here so it

776
00:34:52,000 --> 00:34:57,429
seems like it should be fine

777
00:34:55,139 --> 00:35:02,500
so I'm not really sure what's going on

778
00:34:57,429 --> 00:35:05,108
there oh I see why it's because we only

779
00:35:02,500 --> 00:35:07,179
have a partial rebuild here okay that

780
00:35:05,108 --> 00:35:09,338
does make some sense actually so I'm

781
00:35:07,179 --> 00:35:11,049
gonna hit this with an if zero

782
00:35:09,338 --> 00:35:13,690
temporarily just to make sure we didn't

783
00:35:11,050 --> 00:35:14,560
introduce another bug but I think that

784
00:35:13,690 --> 00:35:16,210
was just because we had a partial

785
00:35:14,559 --> 00:35:17,559
rebuild so these two things didn't agree

786
00:35:16,210 --> 00:35:20,260
that our two pieces of code did not

787
00:35:17,559 --> 00:35:25,029
agree but now they should be fine

788
00:35:20,260 --> 00:35:26,530
yeah and they are alright um so what I

789
00:35:25,030 --> 00:35:28,300
wanted to check was are we actually

790
00:35:26,530 --> 00:35:30,880
allowed to resize this window this

791
00:35:28,300 --> 00:35:34,089
window doesn't seem to be resizable I

792
00:35:30,880 --> 00:35:40,329
don't know why we would have said that

793
00:35:34,088 --> 00:35:51,639
actually that seems weird so if I go

794
00:35:40,329 --> 00:35:55,269
down to where we do create window so

795
00:35:51,639 --> 00:36:00,368
we're creating an overlapped window I'm

796
00:35:55,269 --> 00:36:02,909
not sure why we don't have our size

797
00:36:00,369 --> 00:36:02,910
border

798
00:36:08,929 --> 00:36:29,779
uh so that's really weird isn't it so

799
00:36:21,230 --> 00:36:33,829
here we just say here we say create

800
00:36:29,780 --> 00:36:39,140
window XA we're passing WS overlapped

801
00:36:33,829 --> 00:36:44,200
window we should just get a size border

802
00:36:39,139 --> 00:36:47,088
right we're not actually calling this

803
00:36:44,199 --> 00:36:50,989
because it's only in not handmade

804
00:36:47,088 --> 00:36:52,929
internal so we don't go fullscreen so

805
00:36:50,989 --> 00:36:56,000
what's the problem

806
00:36:52,929 --> 00:37:00,739
how did we not how did we end up not

807
00:36:56,000 --> 00:37:04,039
getting a size border a thick frame am I

808
00:37:00,739 --> 00:37:11,169
miss remembering what happens with WS

809
00:37:04,039 --> 00:37:20,509
overlapped window don't ask me why that

810
00:37:11,170 --> 00:37:23,240
there you see W a thick frame right

811
00:37:20,510 --> 00:37:25,780
there the window is an overlap window

812
00:37:23,239 --> 00:37:28,399
same as the WS tiled window style

813
00:37:25,780 --> 00:37:34,099
overlapped caption system nu thick frame

814
00:37:28,400 --> 00:37:37,010
minimize box maximize box we've got

815
00:37:34,099 --> 00:37:41,660
everything else but we can't size our

816
00:37:37,010 --> 00:37:44,200
window ah so maybe the problem is just

817
00:37:41,659 --> 00:37:47,598
we're not calling set cursor properly

818
00:37:44,199 --> 00:37:50,118
but even so you can see we don't you can

819
00:37:47,599 --> 00:37:56,329
see that there isn't actually room for

820
00:37:50,119 --> 00:37:58,970
the window like like you know oh wow

821
00:37:56,329 --> 00:38:01,280
okay so this is just windows 10 being

822
00:37:58,969 --> 00:38:01,759
dumb so you don't actually see it

823
00:38:01,280 --> 00:38:04,579
anymore

824
00:38:01,760 --> 00:38:06,619
alright so it's there and we can resize

825
00:38:04,579 --> 00:38:07,940
our window the only difference is that

826
00:38:06,619 --> 00:38:09,740
they don't draw it anymore

827
00:38:07,940 --> 00:38:12,019
we must not be calling set cursor

828
00:38:09,739 --> 00:38:14,568
properly because you can see do you see

829
00:38:12,019 --> 00:38:16,579
how we're not getting the size area

830
00:38:14,568 --> 00:38:20,869
there we're not getting it changing to

831
00:38:16,579 --> 00:38:22,700
the size cursor so it is thick frame

832
00:38:20,869 --> 00:38:25,039
it's just not drawn

833
00:38:22,699 --> 00:38:27,019
because you know actually showing the

834
00:38:25,039 --> 00:38:29,000
user that they could drag something

835
00:38:27,019 --> 00:38:32,900
would be a horrible user interface to

836
00:38:29,000 --> 00:38:35,480
say them um so what we want to do here

837
00:38:32,900 --> 00:38:39,200
is look at our get cursor call or sorry

838
00:38:35,480 --> 00:38:43,159
set cursor call and we want to see

839
00:38:39,199 --> 00:38:47,179
what's going on in there hmm so here you

840
00:38:43,159 --> 00:38:52,069
can see what's going on this set cursor

841
00:38:47,179 --> 00:38:54,379
call is well so we can see what the

842
00:38:52,070 --> 00:38:57,109
problem is here we're calling I DC arrow

843
00:38:54,380 --> 00:38:58,820
but I D Sierra wouldn't actually work

844
00:38:57,108 --> 00:38:59,989
properly I feel like we should be doing

845
00:38:58,820 --> 00:39:01,338
result deal separator but we've

846
00:38:59,989 --> 00:39:03,439
commented that out we must have had a

847
00:39:01,338 --> 00:39:06,409
reason to do so I'm not sure what that

848
00:39:03,440 --> 00:39:09,260
reason would have necessarily been but

849
00:39:06,409 --> 00:39:12,139
you can see if I do that you get the the

850
00:39:09,260 --> 00:39:14,990
proper thing I assume the reason we did

851
00:39:12,139 --> 00:39:17,118
that was because of the loading cursor

852
00:39:14,989 --> 00:39:18,709
or something I'm not sure but I would

853
00:39:17,119 --> 00:39:23,390
rather leave it like that so that we can

854
00:39:18,710 --> 00:39:27,470
properly have have that work right I'm

855
00:39:23,389 --> 00:39:32,358
also interested to know keep a global

856
00:39:27,469 --> 00:39:34,879
show cursor so that just yeah that just

857
00:39:32,358 --> 00:39:38,480
has to do with whether or not we're

858
00:39:34,880 --> 00:39:40,579
running in release mode or not so we'll

859
00:39:38,480 --> 00:39:42,740
have to look at that a bit later okay so

860
00:39:40,579 --> 00:39:44,410
that's just gonna be better for us I

861
00:39:42,739 --> 00:39:47,750
think so I think we want to leave that

862
00:39:44,409 --> 00:39:50,000
set cursor there and you can see we get

863
00:39:47,750 --> 00:39:52,159
this loading cursor I don't know why the

864
00:39:50,000 --> 00:39:54,349
loading cursor continues doing that for

865
00:39:52,159 --> 00:39:56,690
a while because we have loaded so I'm

866
00:39:54,349 --> 00:39:58,970
not sure what the problem is I also

867
00:39:56,690 --> 00:40:00,349
don't love like is this our fault I

868
00:39:58,969 --> 00:40:03,919
don't know whose fault this is but like

869
00:40:00,349 --> 00:40:05,900
up there up above the top it's pretty

870
00:40:03,920 --> 00:40:08,599
weird how they decided to make this

871
00:40:05,900 --> 00:40:15,769
thing work like is that how all windows

872
00:40:08,599 --> 00:40:18,769
work or is that just us so basically

873
00:40:15,769 --> 00:40:20,480
they just broke their window manager

874
00:40:18,769 --> 00:40:24,199
their window man has just broken

875
00:40:20,480 --> 00:40:26,719
I mean look so here is where I have to

876
00:40:24,199 --> 00:40:29,868
put the cursor it's my cursors actually

877
00:40:26,719 --> 00:40:32,149
in the title bar so it's where you would

878
00:40:29,869 --> 00:40:34,280
normally drag and instead now it's it's

879
00:40:32,150 --> 00:40:36,230
the up and down and so that means that

880
00:40:34,280 --> 00:40:38,090
you basically don't get a play

881
00:40:36,230 --> 00:40:46,849
to do that up here you have to move down

882
00:40:38,090 --> 00:40:50,150
to the side lovely good job Microsoft

883
00:40:46,849 --> 00:40:51,650
all right so if you just nowadays they

884
00:40:50,150 --> 00:40:53,840
don't actually ship improved version of

885
00:40:51,650 --> 00:40:55,250
Windows they just ship like things that

886
00:40:53,840 --> 00:40:57,829
are worse than the one that came before

887
00:40:55,250 --> 00:41:06,679
them it's like a constant downward

888
00:40:57,829 --> 00:41:07,569
spiral it's like what do they call it c

889
00:41:06,679 --> 00:41:12,169
fi t--

890
00:41:07,570 --> 00:41:14,330
it's this right it's like you know

891
00:41:12,170 --> 00:41:16,280
they're just intentionally driving the

892
00:41:14,329 --> 00:41:17,809
plane that there was no actual failure

893
00:41:16,280 --> 00:41:20,869
it's just the pilot chose to drive it

894
00:41:17,809 --> 00:41:23,500
into a mountain or the ground right

895
00:41:20,869 --> 00:41:28,690
that's this is basically like you know

896
00:41:23,500 --> 00:41:28,690
this is Microsoft this is

897
00:41:39,969 --> 00:41:47,509
right so like you know this is what

898
00:41:45,260 --> 00:41:50,390
we're talking about here that's how they

899
00:41:47,510 --> 00:41:52,220
make their decisions nowadays so let's

900
00:41:50,389 --> 00:41:54,759
go ahead and and finish what we were

901
00:41:52,219 --> 00:41:57,139
doing here so getting rid of that buffer

902
00:41:54,760 --> 00:41:59,060
what we had implemented just here I

903
00:41:57,139 --> 00:42:00,588
think as a request if somebody was if we

904
00:41:59,059 --> 00:42:03,409
want this to maintain the aspect ratio

905
00:42:00,588 --> 00:42:06,710
we could hold down the shift key and so

906
00:42:03,409 --> 00:42:09,858
if we want that to still work then the

907
00:42:06,710 --> 00:42:11,929
problem is that we had in here some code

908
00:42:09,858 --> 00:42:14,420
for that it can't maintain the aspect

909
00:42:11,929 --> 00:42:16,699
ratio if it doesn't know what the aspect

910
00:42:14,420 --> 00:42:19,070
ratio actually is right

911
00:42:16,699 --> 00:42:21,319
so the render width and height here have

912
00:42:19,070 --> 00:42:23,059
to be set to something because if

913
00:42:21,320 --> 00:42:26,510
they're not then you can't actually

914
00:42:23,059 --> 00:42:31,429
figure out what the aspect ratio results

915
00:42:26,510 --> 00:42:35,859
should be in this case so what we want

916
00:42:31,429 --> 00:42:35,858
to do there is say you know well alright

917
00:42:36,369 --> 00:42:46,460
let me do this too so we kind of need

918
00:42:44,809 --> 00:42:48,469
somebody to do this now in a sanely

919
00:42:46,460 --> 00:42:50,389
functioning system I'd just be able to

920
00:42:48,469 --> 00:42:53,389
pass that in but of course Microsoft

921
00:42:50,389 --> 00:42:54,920
uses callbacks so I can't pass it in and

922
00:42:53,389 --> 00:42:56,868
so what I have to do is set a global

923
00:42:54,920 --> 00:42:58,280
variable so that I can pick up this or I

924
00:42:56,869 --> 00:43:01,010
could set it on the window or something

925
00:42:58,280 --> 00:43:03,349
absurd like that but what I need to do

926
00:43:01,010 --> 00:43:07,339
here is just say ok this is going to be

927
00:43:03,349 --> 00:43:12,230
a global render with a little render

928
00:43:07,338 --> 00:43:17,779
height or something like that get to it

929
00:43:12,230 --> 00:43:19,880
this way right and then we can continue

930
00:43:17,780 --> 00:43:21,890
as necessary so in order to get that

931
00:43:19,880 --> 00:43:23,510
straightened out what we need to do is

932
00:43:21,889 --> 00:43:29,420
have a pure be a thing where we're like

933
00:43:23,510 --> 00:43:32,270
a little render Jim and then when I set

934
00:43:29,420 --> 00:43:34,970
the render dimension down below what I

935
00:43:32,269 --> 00:43:36,679
can do is is set the global one as well

936
00:43:34,969 --> 00:43:40,159
so I can say global render Jamie let's

937
00:43:36,679 --> 00:43:40,919
render dim and off we go I you know

938
00:43:40,159 --> 00:43:44,279
that's an

939
00:43:40,920 --> 00:43:46,349
the end of that so now in theory we can

940
00:43:44,280 --> 00:43:49,530
re-enable that code path that involves

941
00:43:46,349 --> 00:43:51,750
the aspect of where resize so here's the

942
00:43:49,530 --> 00:43:53,160
non aspect array resize right but then

943
00:43:51,750 --> 00:43:54,570
if I hold down the shift key what you

944
00:43:53,159 --> 00:43:57,389
can see is we get an aspect of where

945
00:43:54,570 --> 00:44:00,570
resize so now when I scale it always

946
00:43:57,389 --> 00:44:04,529
perfectly fits the back buffer to the

947
00:44:00,570 --> 00:44:06,630
window right and so that just enabled re

948
00:44:04,530 --> 00:44:09,960
enables that code path and that's that's

949
00:44:06,630 --> 00:44:11,160
that ok so that's all good that was

950
00:44:09,960 --> 00:44:13,440
cleanup that we should have done for

951
00:44:11,159 --> 00:44:14,119
sure and so now that's done and that's

952
00:44:13,440 --> 00:44:17,460
good

953
00:44:14,119 --> 00:44:19,109
looking at this win32 window dimension

954
00:44:17,460 --> 00:44:21,150
thing I'm wondering if that can go away

955
00:44:19,110 --> 00:44:22,980
and just be replaced by v2 you because

956
00:44:21,150 --> 00:44:25,470
you can see it doesn't really make a lot

957
00:44:22,980 --> 00:44:29,280
of sense that that's there like we could

958
00:44:25,469 --> 00:44:31,559
just do this right and I think we would

959
00:44:29,280 --> 00:44:34,980
be fine because it's basically the exact

960
00:44:31,559 --> 00:44:37,799
same thing and so I could in theory cast

961
00:44:34,980 --> 00:44:39,750
this to you 32 I possibly should

962
00:44:37,800 --> 00:44:41,580
threshold it but since the right and

963
00:44:39,750 --> 00:44:44,219
left should never switch in that way I

964
00:44:41,579 --> 00:44:46,469
think this is probably fine famous last

965
00:44:44,219 --> 00:44:48,359
words we could check for zero if we

966
00:44:46,469 --> 00:44:50,609
really got worried later but I'm pretty

967
00:44:48,360 --> 00:44:53,460
sure those should never be negative

968
00:44:50,610 --> 00:44:55,019
right so anyway there's a v2 you there

969
00:44:53,460 --> 00:44:56,550
and then I can just get rid of this and

970
00:44:55,019 --> 00:44:59,610
not have this as a thing anymore because

971
00:44:56,550 --> 00:45:01,500
it's dumb so that's good again just

972
00:44:59,610 --> 00:45:03,510
getting rid of code that we don't need

973
00:45:01,500 --> 00:45:06,000
you always want to simplify if you can

974
00:45:03,510 --> 00:45:08,640
we now no longer need win32 off-screen

975
00:45:06,000 --> 00:45:09,929
buffers so I think I can delete that and

976
00:45:08,639 --> 00:45:14,429
we shouldn't have too much of an issue

977
00:45:09,929 --> 00:45:16,980
there either so again just kind of you

978
00:45:14,429 --> 00:45:19,079
know simplifying the code down it's

979
00:45:16,980 --> 00:45:20,880
always good to do some deletions once

980
00:45:19,079 --> 00:45:24,000
you have stuff that you know has

981
00:45:20,880 --> 00:45:26,160
outlived its usefulness so that's all

982
00:45:24,000 --> 00:45:28,380
good let's go back to the to do we were

983
00:45:26,159 --> 00:45:33,179
trying to do there so what we want to do

984
00:45:28,380 --> 00:45:36,660
in here is to in you know virtual free

985
00:45:33,179 --> 00:45:38,789
virtual a lock land again want to go

986
00:45:36,659 --> 00:45:40,379
find the places that we were calling

987
00:45:38,789 --> 00:45:43,259
that so that we can simplify it for

988
00:45:40,380 --> 00:45:45,840
folks on Linux and so now we should have

989
00:45:43,260 --> 00:45:48,780
only one of those so you could see

990
00:45:45,840 --> 00:45:50,880
there's literally only one call to

991
00:45:48,780 --> 00:45:52,530
virtual a lock and only one called a

992
00:45:50,880 --> 00:45:54,360
virtual free I think well this one's not

993
00:45:52,530 --> 00:45:56,700
if that's that's a woman

994
00:45:54,360 --> 00:45:59,400
never freed so it's really only this one

995
00:45:56,699 --> 00:46:02,159
here so inside win32 free memory block

996
00:45:59,400 --> 00:46:03,599
the question is what is the this what

997
00:46:02,159 --> 00:46:06,089
would this parameter be if we had to

998
00:46:03,599 --> 00:46:08,849
pass what's the size does the block know

999
00:46:06,090 --> 00:46:11,100
how big it is and that's what we need to

1000
00:46:08,849 --> 00:46:13,409
know here so let's take a look if it

1001
00:46:11,099 --> 00:46:16,559
does if it does we're done if it doesn't

1002
00:46:13,409 --> 00:46:18,690
we are not done here's the memory block

1003
00:46:16,559 --> 00:46:24,449
and the platform memory block so let's

1004
00:46:18,690 --> 00:46:26,250
look at the platform memory block yeah

1005
00:46:24,449 --> 00:46:29,730
so it looks good it's got the size in

1006
00:46:26,250 --> 00:46:33,659
there feels pretty good right so I think

1007
00:46:29,730 --> 00:46:37,639
we have successfully put them there it

1008
00:46:33,659 --> 00:46:42,829
so note we're reporting to other

1009
00:46:37,639 --> 00:46:49,789
platforms that need the size to unmapped

1010
00:46:42,829 --> 00:46:55,139
pages you can get it from block block

1011
00:46:49,789 --> 00:46:57,119
dot size so I think that's all good

1012
00:46:55,139 --> 00:46:59,099
anything needed it other things that can

1013
00:46:57,119 --> 00:47:00,989
be stored in here right as well meaning

1014
00:46:59,099 --> 00:47:05,130
you would have Linux memory block which

1015
00:47:00,989 --> 00:47:07,889
could have other things as well so I

1016
00:47:05,130 --> 00:47:14,059
think that's all good so I think we can

1017
00:47:07,889 --> 00:47:14,059
safely retire this and see what happens

1018
00:47:39,079 --> 00:47:45,779
right so I think that's all good and

1019
00:47:43,670 --> 00:47:47,309
that takes care of that one which is

1020
00:47:45,780 --> 00:47:49,500
good because I'd like to keep it so that

1021
00:47:47,309 --> 00:47:52,440
people who are porting don't have to

1022
00:47:49,500 --> 00:47:54,059
worry too much about it so I'd like to

1023
00:47:52,440 --> 00:47:55,769
maybe do see if we could get through

1024
00:47:54,059 --> 00:47:57,900
these last two here because then we're

1025
00:47:55,769 --> 00:48:00,659
down to almost nothing this one is a one

1026
00:47:57,900 --> 00:48:02,400
that we want to it's not really a bug so

1027
00:48:00,659 --> 00:48:06,420
much as it's like a feature we need to

1028
00:48:02,400 --> 00:48:09,780
then go actually implement so this is an

1029
00:48:06,420 --> 00:48:12,059
obscure full-screen bug but we may be

1030
00:48:09,780 --> 00:48:13,470
able to well I don't know if we can

1031
00:48:12,059 --> 00:48:13,949
reroute it if it can we might be able to

1032
00:48:13,469 --> 00:48:16,559
fix it

1033
00:48:13,949 --> 00:48:18,779
so we might as well just following what

1034
00:48:16,559 --> 00:48:20,519
is said here open the game hold the

1035
00:48:18,780 --> 00:48:22,230
Windows key and press the left or right

1036
00:48:20,519 --> 00:48:24,900
arrow to place the window on half the

1037
00:48:22,230 --> 00:48:28,409
monitor and so just so you know what's

1038
00:48:24,900 --> 00:48:30,119
going on let me see here so right it's

1039
00:48:28,409 --> 00:48:31,980
this feature I don't know if you've ever

1040
00:48:30,119 --> 00:48:34,019
looked at this you can use the arrow

1041
00:48:31,980 --> 00:48:36,990
keys if that makes sense

1042
00:48:34,019 --> 00:48:39,449
ooh that's okay check that out that's

1043
00:48:36,989 --> 00:48:42,589
another bug we have so minimize looks

1044
00:48:39,449 --> 00:48:46,439
like it breaks here the frame buffer

1045
00:48:42,590 --> 00:48:49,320
breaks somehow probably because the

1046
00:48:46,440 --> 00:48:51,539
sides gets messed up yeah

1047
00:48:49,320 --> 00:48:55,280
so we gonna we're gonna have to do that

1048
00:48:51,539 --> 00:48:55,279
too so I'm gonna create another one here

1049
00:49:24,840 --> 00:49:31,350
so I would also add that to the list

1050
00:49:27,780 --> 00:49:33,830
here so in terms of things that break

1051
00:49:31,349 --> 00:49:37,319
when you're trying to do window standard

1052
00:49:33,829 --> 00:49:38,969
operations that's another one there and

1053
00:49:37,320 --> 00:49:41,130
maybe that was that as bad because

1054
00:49:38,969 --> 00:49:42,899
that's an assertion so technically it

1055
00:49:41,130 --> 00:49:44,369
would go away and you would just not

1056
00:49:42,900 --> 00:49:46,619
draw and presumably it would be fine

1057
00:49:44,369 --> 00:49:49,170
when it came back but I'd rather not hit

1058
00:49:46,619 --> 00:49:51,389
the assertion at all I'd rather like no

1059
00:49:49,170 --> 00:49:54,570
notice that we have a zero by zero case

1060
00:49:51,389 --> 00:49:56,099
happening and and fix it so let's start

1061
00:49:54,570 --> 00:49:57,480
by reproving the bug that we're talking

1062
00:49:56,099 --> 00:50:02,429
about though because we want to do both

1063
00:49:57,480 --> 00:50:04,800
of these now so open the game press the

1064
00:50:02,429 --> 00:50:08,190
opposite air force up to okay so the the

1065
00:50:04,800 --> 00:50:11,340
bug is you force the window use the

1066
00:50:08,190 --> 00:50:16,679
windows subsystem to force it over to

1067
00:50:11,340 --> 00:50:21,480
the other side there right then go

1068
00:50:16,679 --> 00:50:22,949
fullscreen so that's that right then use

1069
00:50:21,480 --> 00:50:26,760
the windows key to force it to the other

1070
00:50:22,949 --> 00:50:30,059
side of the screen so that okay so that

1071
00:50:26,760 --> 00:50:39,720
doesn't do anything anymore so maybe if

1072
00:50:30,059 --> 00:50:41,909
I do this so I can't seem to repro this

1073
00:50:39,719 --> 00:50:44,369
on anything else so I think this might

1074
00:50:41,909 --> 00:50:48,049
be a Windows 7 only thing because they

1075
00:50:44,369 --> 00:50:48,049
said on Windows 7

1076
00:51:04,389 --> 00:51:09,139
so we can't reproduce this bug so we

1077
00:51:07,550 --> 00:51:11,330
wouldn't really know if we'd fixed it

1078
00:51:09,139 --> 00:51:14,869
but we might be able to hypothesize what

1079
00:51:11,329 --> 00:51:16,069
we would do to fix it so if you think

1080
00:51:14,869 --> 00:51:19,219
about what would you know what's

1081
00:51:16,070 --> 00:51:22,000
probably causing that bug is Windows is

1082
00:51:19,219 --> 00:51:25,149
forcing our window to change its size

1083
00:51:22,000 --> 00:51:33,110
which means you know we're getting a

1084
00:51:25,150 --> 00:51:37,280
window pose changing call or a WM size

1085
00:51:33,110 --> 00:51:39,650
call so like somewhere in here right

1086
00:51:37,280 --> 00:51:46,580
where we would we would get notified of

1087
00:51:39,650 --> 00:51:50,389
this and you know we would get this call

1088
00:51:46,579 --> 00:51:53,000
and so we may want to do something where

1089
00:51:50,389 --> 00:51:55,489
if windows forces to us to change our

1090
00:51:53,000 --> 00:52:02,420
size to something else just because it

1091
00:51:55,489 --> 00:52:05,889
does we and we go out of full screen we

1092
00:52:02,420 --> 00:52:09,389
should try to reset our flags probably

1093
00:52:05,889 --> 00:52:12,480
or something right

1094
00:52:09,389 --> 00:52:12,480
[Music]

1095
00:52:22,269 --> 00:52:27,139
so my question mostly is just what's the

1096
00:52:25,400 --> 00:52:28,880
best way to do that and this is why I

1097
00:52:27,139 --> 00:52:30,799
really wish we could repro it because I

1098
00:52:28,880 --> 00:52:32,869
don't really know exactly what stream of

1099
00:52:30,800 --> 00:52:36,019
Windows messages would come in if window

1100
00:52:32,869 --> 00:52:48,679
suppose changes come in that might be

1101
00:52:36,019 --> 00:52:56,449
the one for it you know so let's let's

1102
00:52:48,679 --> 00:52:58,250
go in here to toggle fullscreen and so

1103
00:52:56,449 --> 00:53:02,480
what you can see here is this set window

1104
00:52:58,250 --> 00:53:04,400
long where we do like overlapped window

1105
00:53:02,480 --> 00:53:06,769
versus not so there's another thing that

1106
00:53:04,400 --> 00:53:10,369
we could do there which is like for

1107
00:53:06,769 --> 00:53:13,269
example in here when you hit that we

1108
00:53:10,369 --> 00:53:16,519
could remove our framing as well

1109
00:53:13,269 --> 00:53:19,909
potentially so we could think of it more

1110
00:53:16,519 --> 00:53:23,750
as like the set window long stuff should

1111
00:53:19,909 --> 00:53:26,149
actually it be in this part of the code

1112
00:53:23,750 --> 00:53:32,719
and it's like if the window position is

1113
00:53:26,150 --> 00:53:34,730
going to change based on if the window

1114
00:53:32,719 --> 00:53:37,639
position is going to change if we would

1115
00:53:34,730 --> 00:53:40,880
have ended up such that we will exactly

1116
00:53:37,639 --> 00:53:43,099
in Eclipse the screen change our stuff

1117
00:53:40,880 --> 00:53:46,789
to not have enough to know otherwise

1118
00:53:43,099 --> 00:53:48,409
don't so again not really sure what to

1119
00:53:46,789 --> 00:53:52,750
do about that but let's just I pathi

1120
00:53:48,409 --> 00:53:52,750
size what we would do maybe right

1121
00:53:53,389 --> 00:54:02,900
if becoming fullscreen get rid of it

1122
00:53:57,949 --> 00:54:04,489
else don't you know what I mean I don't

1123
00:54:02,900 --> 00:54:11,570
really know if you can set window long

1124
00:54:04,489 --> 00:54:14,769
in here Raymond helped me Raymond tell

1125
00:54:11,570 --> 00:54:14,769
me the internals of Windows

1126
00:54:24,969 --> 00:54:29,509
all right Google why did you show me

1127
00:54:27,559 --> 00:54:32,380
that if it doesn't have the thing I

1128
00:54:29,509 --> 00:54:32,380
asked for in it

1129
00:54:41,119 --> 00:54:47,549
so I'm not sure whether you can call

1130
00:54:44,940 --> 00:54:49,610
this like I'm doing we can try it and

1131
00:54:47,550 --> 00:54:49,610
see

1132
00:54:49,949 --> 00:54:57,480
so in here if I do set window long on

1133
00:54:54,989 --> 00:54:59,869
that I'm just gonna see if this works

1134
00:54:57,480 --> 00:55:02,400
it probably won't but you know we'll try

1135
00:54:59,869 --> 00:55:04,829
so in terms of becoming fullscreen what

1136
00:55:02,400 --> 00:55:07,440
we need to know is would we

1137
00:55:04,829 --> 00:55:11,309
exactly Eclipse the screen or not right

1138
00:55:07,440 --> 00:55:13,829
and you can see on here where we do the

1139
00:55:11,309 --> 00:55:16,380
get monitor info stuff you know inside

1140
00:55:13,829 --> 00:55:20,159
this call I could ask what that monitor

1141
00:55:16,380 --> 00:55:24,119
size was and see so after we do we could

1142
00:55:20,159 --> 00:55:26,549
say okay get me the monitor info and I'm

1143
00:55:24,119 --> 00:55:29,369
not gonna see whether I'm about to set

1144
00:55:26,550 --> 00:55:34,250
myself to exactly encompass the thing or

1145
00:55:29,369 --> 00:55:37,739
not so we would say excuse me

1146
00:55:34,250 --> 00:55:41,070
get me the monitor info look to see

1147
00:55:37,739 --> 00:55:43,979
whether or not I'm lined up exactly with

1148
00:55:41,070 --> 00:55:48,030
that monitor info so here's where all

1149
00:55:43,980 --> 00:55:50,880
that rect would be and I this new pose

1150
00:55:48,030 --> 00:55:52,920
here is a window put pause window pop

1151
00:55:50,880 --> 00:55:55,950
pose Widow pause have you run pronounced

1152
00:55:52,920 --> 00:55:59,369
that the window pause structure is gonna

1153
00:55:55,949 --> 00:56:03,139
have like the stuff in it that I need to

1154
00:55:59,369 --> 00:56:05,609
know so the width and height and the X&amp;Y

1155
00:56:03,139 --> 00:56:09,210
so what I can do is say look are we

1156
00:56:05,610 --> 00:56:12,360
exactly going to to encompass this thing

1157
00:56:09,210 --> 00:56:15,030
so becoming fullscreen equals false if

1158
00:56:12,360 --> 00:56:19,050
we get the monitor info and we look and

1159
00:56:15,030 --> 00:56:22,980
we see okay becoming fullscreen equals

1160
00:56:19,050 --> 00:56:34,380
this giant test to say does this equal

1161
00:56:22,980 --> 00:56:36,949
the right thing and this here's the

1162
00:56:34,380 --> 00:56:36,950
width and height

1163
00:56:43,639 --> 00:56:49,619
okay so I'm just saying look let's

1164
00:56:46,500 --> 00:56:56,719
compute all this nonsense here find out

1165
00:56:49,619 --> 00:57:00,119
what the width and height are and

1166
00:56:56,719 --> 00:57:04,739
instead of becoming fullscreen to line

1167
00:57:00,119 --> 00:57:10,289
up at that so the new pause it has the

1168
00:57:04,739 --> 00:57:14,639
what is it x and y X Y and then it's got

1169
00:57:10,289 --> 00:57:16,559
the CX CY and so that would just say

1170
00:57:14,639 --> 00:57:18,509
look if we look like we're gonna take up

1171
00:57:16,559 --> 00:57:24,179
the whole screen then do this otherwise

1172
00:57:18,510 --> 00:57:26,520
don't do it right so we'll try that

1173
00:57:24,179 --> 00:57:30,089
we'll see if that gets us anywhere maybe

1174
00:57:26,519 --> 00:57:35,059
it will maybe well okay so what's our

1175
00:57:30,090 --> 00:57:35,059
problem sign downside mismatch okay

1176
00:57:39,139 --> 00:57:46,000
term is not a value to function

1177
00:57:42,989 --> 00:57:48,909
you're right I agree with you because I

1178
00:57:46,000 --> 00:57:51,550
wasn't trying to call function and then

1179
00:57:48,909 --> 00:57:54,309
the style here has to we have to

1180
00:57:51,550 --> 00:57:57,970
actually get our window style like we

1181
00:57:54,309 --> 00:58:13,900
were doing let me take a look here

1182
00:57:57,969 --> 00:58:16,119
toggle full-screen all right so in terms

1183
00:58:13,900 --> 00:58:18,010
of calling set window long we don't

1184
00:58:16,119 --> 00:58:22,119
really need to do it if the style isn't

1185
00:58:18,010 --> 00:58:25,870
going to change so really what we need

1186
00:58:22,119 --> 00:58:31,719
to do is say if the you know we'd have

1187
00:58:25,869 --> 00:58:42,309
like here full screen style and windowed

1188
00:58:31,719 --> 00:58:44,049
style and you know it's those two and so

1189
00:58:42,309 --> 00:58:48,480
you could say is if we're becoming

1190
00:58:44,050 --> 00:58:48,480
fullscreen we could say like you know

1191
00:58:49,619 --> 00:59:01,599
style equals full screen style or it

1192
00:58:55,059 --> 00:59:03,549
should be more like new style right so

1193
00:59:01,599 --> 00:59:07,829
I'm really just turning this if into a

1194
00:59:03,550 --> 00:59:07,830
thing where we specify it more like this

1195
00:59:07,920 --> 00:59:22,119
and then I can just say alright if the

1196
00:59:12,730 --> 00:59:26,139
style changed so now I can see you know

1197
00:59:22,119 --> 00:59:30,250
what happened if the style changed then

1198
00:59:26,139 --> 00:59:32,259
call it otherwise don't bother because I

1199
00:59:30,250 --> 00:59:34,329
don't want to spam a bunch of like set

1200
00:59:32,260 --> 00:59:35,860
window lungs and make the operating

1201
00:59:34,329 --> 00:59:39,489
system think something's happening when

1202
00:59:35,860 --> 00:59:41,370
when we're really not changing it so now

1203
00:59:39,489 --> 00:59:43,599
when we like resize this window

1204
00:59:41,369 --> 00:59:45,819
presumably it should just work fine

1205
00:59:43,599 --> 00:59:47,860
right and nothing should actually change

1206
00:59:45,820 --> 00:59:50,320
in here it should all be good but if I

1207
00:59:47,860 --> 00:59:52,390
do that in theory well and it didn't

1208
00:59:50,320 --> 00:59:54,280
work I was gonna say in theory if we

1209
00:59:52,389 --> 00:59:55,659
compass the whole screen it should do it

1210
00:59:54,280 --> 00:59:56,500
although now I think about it that

1211
00:59:55,659 --> 00:59:58,420
actually doesn't

1212
00:59:56,500 --> 01:00:00,010
so it'd only be if we actually tried to

1213
00:59:58,420 --> 01:00:02,230
go fullscreen you can see it doesn't

1214
01:00:00,010 --> 01:00:04,090
seem to have worked right

1215
01:00:02,230 --> 01:00:08,260
there's fullscreen and it doesn't seem

1216
01:00:04,090 --> 01:00:12,309
to have actually done that done that set

1217
01:00:08,260 --> 01:00:15,520
window long so yeah not one of my not

1218
01:00:12,309 --> 01:00:18,099
one of my finer not one of my finest

1219
01:00:15,519 --> 01:00:27,099
hours there so let's take a look at what

1220
01:00:18,099 --> 01:00:30,880
what did I screw up I'm gonna convert to

1221
01:00:27,099 --> 01:00:35,739
debug mode here and I'm going to go over

1222
01:00:30,880 --> 01:00:39,789
to that actual code not here and I'm

1223
01:00:35,739 --> 01:00:41,409
gonna go ahead and inside that that size

1224
01:00:39,789 --> 01:00:43,329
changing I'm gonna just see what's going

1225
01:00:41,409 --> 01:00:45,969
out that window

1226
01:00:43,329 --> 01:00:49,440
pause changing I'm gonna see what

1227
01:00:45,969 --> 01:00:56,109
happens like do we ever call this at all

1228
01:00:49,440 --> 01:00:57,970
right so we do call it and we look to

1229
01:00:56,110 --> 01:01:01,410
see like what the old style was with the

1230
01:00:57,969 --> 01:01:04,569
new stella's so becoming fullscreen it

1231
01:01:01,409 --> 01:01:09,519
did correctly note that it is becoming

1232
01:01:04,570 --> 01:01:12,610
fullscreen there's the old style there's

1233
01:01:09,519 --> 01:01:14,940
the new style so the fullscreen style is

1234
01:01:12,610 --> 01:01:22,480
the old style without overlapped window

1235
01:01:14,940 --> 01:01:24,420
included right so we do try to do it

1236
01:01:22,480 --> 01:01:29,250
[Music]

1237
01:01:24,420 --> 01:01:32,230
right we do try to set the the new style

1238
01:01:29,250 --> 01:01:34,440
I'm guessing you just can't call it in

1239
01:01:32,230 --> 01:01:34,440
there

1240
01:01:39,230 --> 01:01:43,429
oops it's seven along

1241
01:02:03,789 --> 01:02:09,529
so that returned value will be zero in

1242
01:02:07,309 --> 01:02:11,599
the case where this fails let's see if

1243
01:02:09,530 --> 01:02:14,690
it is I'm gonna go ahead and go to

1244
01:02:11,599 --> 01:02:18,190
disassembly here so after we call it

1245
01:02:14,690 --> 01:02:20,840
it'll probably put the return in EAX so

1246
01:02:18,190 --> 01:02:22,340
we can even though we don't look at the

1247
01:02:20,840 --> 01:02:24,680
return I should be able to just look at

1248
01:02:22,340 --> 01:02:34,720
it here right so it should be in this

1249
01:02:24,679 --> 01:02:34,719
register so it looks fine

1250
01:02:40,500 --> 01:02:45,329
so I'm not sure why that didn't work oh

1251
01:02:46,440 --> 01:02:55,570
I see so it does set it but then it sets

1252
01:02:50,949 --> 01:02:58,589
it back so it looks like my calling set

1253
01:02:55,570 --> 01:03:13,210
window long kind of has the nasty effect

1254
01:02:58,590 --> 01:03:15,539
of undoing what I did I mean that makes

1255
01:03:13,210 --> 01:03:15,539
sense

1256
01:03:24,260 --> 01:03:31,180
so what we might want to do here is say

1257
01:03:26,480 --> 01:03:31,179
okay yeah this is this is kind of nasty

1258
01:03:33,519 --> 01:03:38,568
so in toggle full-screen what we may

1259
01:03:36,048 --> 01:03:51,798
have to do is call that we may have to

1260
01:03:38,568 --> 01:04:23,480
call that set window style anyway we may

1261
01:03:51,798 --> 01:04:25,099
have to change it first so I think we

1262
01:04:23,480 --> 01:04:27,980
may have to do that because I think

1263
01:04:25,099 --> 01:04:30,640
that's just yeah there's really nothing

1264
01:04:27,980 --> 01:04:30,639
we can do about that

1265
01:04:33,460 --> 01:04:42,769
all right so in theory we should be able

1266
01:04:38,778 --> 01:04:46,519
to get this to work without causing it

1267
01:04:42,769 --> 01:04:48,559
to do that code path but it didn't look

1268
01:04:46,519 --> 01:04:50,420
like it did there so I'm not sure why

1269
01:04:48,559 --> 01:04:56,119
so in here like we should be able to get

1270
01:04:50,420 --> 01:05:05,990
it without it should not call the pose

1271
01:04:56,119 --> 01:05:07,940
changing meaning it shouldn't actually

1272
01:05:05,989 --> 01:05:10,729
call this because the new style should

1273
01:05:07,940 --> 01:05:13,369
equal the old style in theory so this

1274
01:05:10,730 --> 01:05:16,639
should only happen when we detect that

1275
01:05:13,369 --> 01:05:19,599
we've changed sizes to something that

1276
01:05:16,639 --> 01:05:19,598
requires this

1277
01:05:32,510 --> 01:05:42,090
but again this is in the vagaries of

1278
01:05:35,159 --> 01:05:45,779
windows which is always nasty so so that

1279
01:05:42,090 --> 01:05:48,920
should set it off and then unfortunately

1280
01:05:45,780 --> 01:05:48,920
this looks like it's setting it back

1281
01:05:54,289 --> 01:05:58,369
right because there's the full screen

1282
01:06:04,650 --> 01:06:13,800
so why is it causing that to get called

1283
01:06:08,889 --> 01:06:13,799
with a wind 'red style

1284
01:06:22,190 --> 01:06:26,929
not really sure

1285
01:06:39,539 --> 01:06:58,079
I suppose we could use wind spy to see

1286
01:06:49,650 --> 01:07:03,450
what we're actually getting past so if I

1287
01:06:58,079 --> 01:07:05,579
open up wind spy here and I run this

1288
01:07:03,449 --> 01:07:10,109
application although let me switch it

1289
01:07:05,579 --> 01:07:13,230
back to what it well let me look at it

1290
01:07:10,110 --> 01:07:16,590
without that first so if I go to win spy

1291
01:07:13,230 --> 01:07:19,619
and say hey man I want to know what's

1292
01:07:16,590 --> 01:07:22,220
going on with this window please are you

1293
01:07:19,619 --> 01:07:22,219
serious right now

1294
01:07:26,130 --> 01:07:31,039
so if I view the messages here

1295
01:07:37,369 --> 01:07:41,799
how can I tell it to show me some

1296
01:07:39,289 --> 01:07:41,800
messages

1297
01:07:47,300 --> 01:07:50,960
show me the messages

1298
01:07:59,159 --> 01:08:03,059
this is supposed to show me all the

1299
01:08:00,659 --> 01:08:05,509
messages how are you not showing me the

1300
01:08:03,059 --> 01:08:05,509
messages

1301
01:08:13,239 --> 01:08:20,920
oh well that's the problem right there

1302
01:08:16,680 --> 01:08:25,270
where is our spy plus plus our our spy

1303
01:08:20,920 --> 01:08:28,710
64 you can see if that was the x86

1304
01:08:25,270 --> 01:08:31,780
version that's not gonna do us any good

1305
01:08:28,710 --> 01:08:34,470
we need the the 64-bit version which

1306
01:08:31,779 --> 01:08:37,989
apparently why wouldn't this launch the

1307
01:08:34,470 --> 01:08:44,550
64-bit version by default is there

1308
01:08:37,989 --> 01:08:44,550
something like how is that not a thing

1309
01:08:44,909 --> 01:08:48,630
hopefully we actually have it let's see

1310
01:08:47,680 --> 01:08:53,490
here

1311
01:08:48,630 --> 01:08:53,489
spy plus plus x64

1312
01:09:01,039 --> 01:09:04,609
[Music]

1313
01:09:11,048 --> 01:09:14,350
here we go

1314
01:09:18,679 --> 01:09:23,730
so this is what we actually want so

1315
01:09:21,600 --> 01:09:26,369
let's just change that because let's

1316
01:09:23,729 --> 01:09:30,689
like why didn't they just put the other

1317
01:09:26,368 --> 01:09:33,198
one here swell it seems like such a lame

1318
01:09:30,689 --> 01:09:33,198
excuse

1319
01:09:48,130 --> 01:09:51,480
I just want to see this

1320
01:09:55,479 --> 01:10:04,619
so is it actually in this location or

1321
01:09:59,710 --> 01:10:09,010
not I don't really know let's find out

1322
01:10:04,619 --> 01:10:11,050
yes it is so I think that should fix it

1323
01:10:09,010 --> 01:10:14,470
like now we should have the ability to

1324
01:10:11,050 --> 01:10:17,500
get the 64-bit version which why you

1325
01:10:14,470 --> 01:10:19,240
wouldn't you know that it's a 64-bit

1326
01:10:17,500 --> 01:10:21,850
executable so why you wouldn't launch

1327
01:10:19,239 --> 01:10:25,689
the 64-bit version of spy don't want to

1328
01:10:21,850 --> 01:10:33,460
know again we'll just bring this back up

1329
01:10:25,689 --> 01:10:36,549
here but let's go ahead and actually see

1330
01:10:33,460 --> 01:10:40,470
if it can capture our messages now right

1331
01:10:36,550 --> 01:10:43,869
here's our window here's my plus plus

1332
01:10:40,470 --> 01:10:46,570
here's our handmade hero window messages

1333
01:10:43,869 --> 01:10:49,989
ah there we go so now we finally got our

1334
01:10:46,569 --> 01:10:53,009
messages so now what I want to know is

1335
01:10:49,989 --> 01:10:59,529
like what happens during this change

1336
01:10:53,010 --> 01:11:04,690
like if I hit alt enter what happens so

1337
01:10:59,529 --> 01:11:07,689
if we look in there we can see looks

1338
01:11:04,689 --> 01:11:11,619
like we've got window pause changed gets

1339
01:11:07,689 --> 01:11:12,939
sent twice right you can see it I don't

1340
01:11:11,619 --> 01:11:15,130
want to move the mouse because then

1341
01:11:12,939 --> 01:11:17,289
we'll lose what we're doing but if you

1342
01:11:15,130 --> 01:11:22,539
look at the top the very top

1343
01:11:17,289 --> 01:11:25,750
it sends like you know window pause

1344
01:11:22,539 --> 01:11:28,390
change with LP WP that's the window

1345
01:11:25,750 --> 01:11:34,930
pause there and then it sends so what

1346
01:11:28,390 --> 01:11:44,650
does s are P SR SR PP SR what are those

1347
01:11:34,930 --> 01:11:46,329
tags oh that's the return value I see

1348
01:11:44,649 --> 01:11:52,329
so we didn't get it twice we only got it

1349
01:11:46,329 --> 01:11:53,979
once let's go ahead in here we don't

1350
01:11:52,329 --> 01:11:55,899
care about mouse moves so I'm gonna

1351
01:11:53,979 --> 01:12:02,429
filter those out so that we don't have

1352
01:11:55,899 --> 01:12:02,429
this problem messages oops

1353
01:12:05,659 --> 01:12:10,609
so let me go ahead and get rid of like

1354
01:12:08,369 --> 01:12:10,609
Mouse

1355
01:12:17,819 --> 01:12:24,420
we'll get rid of em see eh I hit test so

1356
01:12:21,010 --> 01:12:24,420
cuz we don't want any of that either

1357
01:12:29,939 --> 01:12:33,779
well I'll just do it this way

1358
01:12:45,429 --> 01:12:51,460
it's remarkable amount of stuff that

1359
01:12:47,529 --> 01:12:53,738
gets set even when you just do this all

1360
01:12:51,460 --> 01:12:57,840
right so if we clear the log and I click

1361
01:12:53,738 --> 01:13:01,500
on the window we get all of this crap so

1362
01:12:57,840 --> 01:13:07,480
just clicking into the window sends

1363
01:13:01,500 --> 01:13:09,658
window pause changing somehow don't know

1364
01:13:07,479 --> 01:13:09,658
how

1365
01:13:15,449 --> 01:13:28,559
am I wrong about that let's get this

1366
01:13:19,229 --> 01:13:32,609
back to this size and see it looks like

1367
01:13:28,560 --> 01:13:34,770
it mm I always yeah I mean you can see

1368
01:13:32,609 --> 01:13:35,729
window pause changing and window pause

1369
01:13:34,770 --> 01:13:39,900
changed

1370
01:13:35,729 --> 01:13:42,119
I suppose window pause changed maybe the

1371
01:13:39,899 --> 01:13:49,799
only one we actually need there it's

1372
01:13:42,119 --> 01:13:54,619
hard to say but that gets sent even just

1373
01:13:49,800 --> 01:13:54,619
on a click when we go into full screen

1374
01:13:54,859 --> 01:14:02,670
which I can do again by running let's go

1375
01:14:00,569 --> 01:14:04,289
ahead and clear that log does this still

1376
01:14:02,670 --> 01:14:06,119
work or did it have to do I have to

1377
01:14:04,289 --> 01:14:14,180
rehung for the window probably have to

1378
01:14:06,119 --> 01:14:18,239
re hunt for the window yeah alright oh

1379
01:14:14,180 --> 01:14:21,270
my god are you kidding me it resets the

1380
01:14:18,239 --> 01:14:23,449
logging options every time why would it

1381
01:14:21,270 --> 01:14:23,450
do that

1382
01:14:31,350 --> 01:14:34,350
okay

1383
01:14:34,649 --> 01:14:43,719
uh so let's go ahead here and see what

1384
01:14:39,340 --> 01:14:46,449
we could maybe do to fix this right this

1385
01:14:43,719 --> 01:14:48,130
seems to get called a lot and it seems

1386
01:14:46,448 --> 01:14:50,948
like maybe we can't really rely on that

1387
01:14:48,130 --> 01:14:54,760
now why it wouldn't always be reasonable

1388
01:14:50,948 --> 01:14:56,109
though to call this based on whether

1389
01:14:54,760 --> 01:14:58,840
we're becoming fullscreen or not I don't

1390
01:14:56,109 --> 01:15:05,559
really know if we actually change this

1391
01:14:58,840 --> 01:15:10,539
to changed I wonder if that would be

1392
01:15:05,560 --> 01:15:13,090
something that would make sense not to

1393
01:15:10,539 --> 01:15:15,640
do here so meaning we wouldn't actually

1394
01:15:13,090 --> 01:15:18,730
set it during this this just allows it

1395
01:15:15,640 --> 01:15:21,070
to do what its gonna do so meaning this

1396
01:15:18,729 --> 01:15:23,049
will just happen but then after the

1397
01:15:21,069 --> 01:15:27,759
change is done if we want to remove

1398
01:15:23,050 --> 01:15:30,100
those things you know does that do

1399
01:15:27,760 --> 01:15:32,380
anything for us and the problem is I

1400
01:15:30,100 --> 01:15:34,630
don't really know that it would I don't

1401
01:15:32,380 --> 01:15:37,270
really know that that would help but

1402
01:15:34,630 --> 01:15:39,579
basically we could just say in window

1403
01:15:37,270 --> 01:15:41,590
plus changed if you're not fullscreen

1404
01:15:39,579 --> 01:15:49,600
anymore then we would switch it out

1405
01:15:41,590 --> 01:15:52,079
right but let's see so WM actually let's

1406
01:15:49,600 --> 01:15:52,079
leave that up

1407
01:16:03,359 --> 01:16:15,099
fantastic so here's that message the L /

1408
01:16:12,340 --> 01:16:16,390
am looks like it's still the same so in

1409
01:16:15,100 --> 01:16:19,510
theory we should just be able to

1410
01:16:16,390 --> 01:16:22,390
continue doing this and right here we

1411
01:16:19,510 --> 01:16:25,570
can say look give us that thing we

1412
01:16:22,390 --> 01:16:27,280
probably want in here to still call the

1413
01:16:25,569 --> 01:16:29,799
default window caucus we don't actually

1414
01:16:27,279 --> 01:16:33,759
know what it might want to do in that

1415
01:16:29,800 --> 01:16:35,710
case right so let's go ahead and try

1416
01:16:33,760 --> 01:16:38,020
this out I don't think this is gonna

1417
01:16:35,710 --> 01:16:40,750
help but you know with Windows it's

1418
01:16:38,020 --> 01:16:46,620
always just experimentation see if

1419
01:16:40,750 --> 01:16:46,619
anything works right so that's better

1420
01:17:01,649 --> 01:17:06,029
we know that's a bug still

1421
01:17:12,849 --> 01:17:24,710
so that all looks pretty good so I guess

1422
01:17:21,920 --> 01:17:26,719
let's leave it at that

1423
01:17:24,710 --> 01:17:30,500
one thing I would want to test is does

1424
01:17:26,719 --> 01:17:35,989
this create a problem in toggle

1425
01:17:30,500 --> 01:17:41,210
full-screen suppose I get rid of that

1426
01:17:35,988 --> 01:17:44,118
now cuz I assuming I'm assuming I can't

1427
01:17:41,210 --> 01:17:45,679
do that I'm assuming that I that I need

1428
01:17:44,118 --> 01:17:46,939
is to clear that in order to get a

1429
01:17:45,679 --> 01:17:49,550
proper full screen you know but I don't

1430
01:17:46,939 --> 01:17:54,439
actually know so I'm just curious if it

1431
01:17:49,550 --> 01:17:58,119
would magically work right so it looks

1432
01:17:54,439 --> 01:17:58,118
like that actually magically works now

1433
01:18:04,868 --> 01:18:09,308
oops didn't even do that

1434
01:18:10,090 --> 01:18:21,619
so maybe we can just do that and see

1435
01:18:16,479 --> 01:18:24,879
again don't really know if how how

1436
01:18:21,618 --> 01:18:24,880
reasonable that is

1437
01:18:56,630 --> 01:19:03,029
so that's just a way to say look if you

1438
01:18:59,579 --> 01:19:04,680
end up with a window hopefully this will

1439
01:19:03,029 --> 01:19:06,840
always just set the flags based on

1440
01:19:04,680 --> 01:19:09,539
whether we're actually fullscreen or not

1441
01:19:06,840 --> 01:19:12,300
so that it doesn't matter whether window

1442
01:19:09,539 --> 01:19:13,920
sets us full screen or windowed or we

1443
01:19:12,300 --> 01:19:16,350
set ourselves full screen or windowed

1444
01:19:13,920 --> 01:19:18,510
we'll always put our Chrome on or take

1445
01:19:16,350 --> 01:19:21,480
it off depending on the actual state of

1446
01:19:18,510 --> 01:19:23,190
the window that's the hope I think we

1447
01:19:21,479 --> 01:19:25,199
still need a lot of testing other people

1448
01:19:23,189 --> 01:19:27,419
can run it now and see what happens

1449
01:19:25,199 --> 01:19:30,689
because we really don't know across a

1450
01:19:27,420 --> 01:19:34,940
wide setting of when of course a wide

1451
01:19:30,689 --> 01:19:40,559
set of Windows machines we don't really

1452
01:19:34,939 --> 01:19:47,729
okay Wow everything's dead now I can't

1453
01:19:40,560 --> 01:19:50,220
hit alt tab either that was freaky

1454
01:19:47,729 --> 01:19:53,729
wind spy must have worked us pretty hard

1455
01:19:50,220 --> 01:19:57,600
there I couldn't hit alt tab even that's

1456
01:19:53,729 --> 01:20:00,209
my stuff so yeah I think that should be

1457
01:19:57,600 --> 01:20:02,480
fine let me make sure that comment got

1458
01:20:00,210 --> 01:20:02,480
saved

1459
01:20:11,420 --> 01:20:18,149
yeah so I think that's all good and I'll

1460
01:20:15,300 --> 01:20:20,010
just I'll read that bug is finished and

1461
01:20:18,149 --> 01:20:22,879
then asked if they can possibly reopen

1462
01:20:20,010 --> 01:20:22,880
it right

1463
01:21:30,510 --> 01:21:34,630
all right so the only other thing I need

1464
01:21:33,069 --> 01:21:39,189
to do now is take a look at this part

1465
01:21:34,630 --> 01:21:42,788
here which is the the zero zero width

1466
01:21:39,189 --> 01:21:47,169
and height problem and and so looking at

1467
01:21:42,788 --> 01:21:51,509
how that's working I'm not really sure I

1468
01:21:47,170 --> 01:22:04,868
know why we're getting that so when we

1469
01:21:51,510 --> 01:22:07,119
have a settings change I'm not sure I'm

1470
01:22:04,868 --> 01:22:09,698
assuming that that's happening in here

1471
01:22:07,118 --> 01:22:12,519
and the game render settings are what's

1472
01:22:09,698 --> 01:22:14,348
triggering that I'm trying to figure out

1473
01:22:12,520 --> 01:22:16,520
why they would get set to zero in the

1474
01:22:14,349 --> 01:22:19,628
first place

1475
01:22:16,520 --> 01:22:19,629
[Music]

1476
01:22:31,770 --> 01:22:34,770
so

1477
01:22:45,500 --> 01:22:50,569
so I don't think we're ever changing

1478
01:22:48,560 --> 01:22:57,950
that value though right

1479
01:22:50,569 --> 01:23:04,099
like why why is that value ever getting

1480
01:22:57,949 --> 01:23:15,409
reported even in the first place it must

1481
01:23:04,100 --> 01:23:19,870
be here so we're passing this thing down

1482
01:23:15,409 --> 01:23:19,869
where we do render or begin frame I

1483
01:23:25,989 --> 01:23:31,369
think we just screwed this up because

1484
01:23:29,600 --> 01:23:32,870
we're not really supposed to be looking

1485
01:23:31,369 --> 01:23:34,010
at this stuff anyway and that would also

1486
01:23:32,869 --> 01:23:36,380
explain where we were getting those

1487
01:23:34,010 --> 01:23:40,220
weird positioning problems so like if

1488
01:23:36,380 --> 01:23:43,750
you look at what's going on here what

1489
01:23:40,220 --> 01:23:46,699
who is yeah in that begin frame call

1490
01:23:43,750 --> 01:23:51,859
that looks busted so I'm gonna look in

1491
01:23:46,699 --> 01:23:59,389
here what are we doing with window width

1492
01:23:51,859 --> 01:24:02,929
and window height like why are those

1493
01:23:59,390 --> 01:24:07,130
even being used anywhere because we

1494
01:24:02,930 --> 01:24:10,130
don't draw in there right like that

1495
01:24:07,130 --> 01:24:13,460
doesn't actually get placed in there

1496
01:24:10,130 --> 01:24:17,020
anywhere and the draw region is really

1497
01:24:13,460 --> 01:24:17,020
what we're talking about here

1498
01:24:25,539 --> 01:24:30,649
so this stuff is just kind of yet we

1499
01:24:28,789 --> 01:24:32,689
gotta pay more attention to this so who

1500
01:24:30,649 --> 01:24:36,409
is using that window width and window

1501
01:24:32,689 --> 01:24:38,238
height and why does that make sense

1502
01:24:36,409 --> 01:24:40,460
that's what I really need to know more

1503
01:24:38,238 --> 01:24:42,709
about now so I'm gonna go into the

1504
01:24:40,460 --> 01:24:46,250
platform stuff or actually guess that's

1505
01:24:42,710 --> 01:24:47,989
in the renderer I want to know what's

1506
01:24:46,250 --> 01:24:55,880
going on there cuz that that smells

1507
01:24:47,988 --> 01:24:57,589
rotten to me so this window with window

1508
01:24:55,880 --> 01:24:59,090
height soap so who's where is that

1509
01:24:57,590 --> 01:25:05,539
getting used right now I need to see

1510
01:24:59,090 --> 01:25:09,940
who's using that and why so we're using

1511
01:25:05,539 --> 01:25:13,369
it in there yeah so this is wrong and

1512
01:25:09,939 --> 01:25:17,479
this is why our UI was screwed up no one

1513
01:25:13,369 --> 01:25:19,309
should be using that so that should

1514
01:25:17,479 --> 01:25:22,269
really be called something else let's

1515
01:25:19,310 --> 01:25:22,270
let's make this clear

1516
01:26:02,170 --> 01:26:07,069
so drawer region is actually the thing

1517
01:26:05,118 --> 01:26:09,259
that we want to use and anyone who was

1518
01:26:07,069 --> 01:26:14,299
using OS window with an OS window height

1519
01:26:09,260 --> 01:26:18,590
before that's just bad right so this is

1520
01:26:14,300 --> 01:26:22,099
fine you know that's not a problem but

1521
01:26:18,590 --> 01:26:24,849
here for example I don't know if this is

1522
01:26:22,099 --> 01:26:24,849
right let me look

1523
01:26:27,789 --> 01:26:35,179
is that actually getting used and what

1524
01:26:32,059 --> 01:26:43,429
was it getting used for all right so

1525
01:26:35,179 --> 01:26:54,109
that's fine and this is not fine so this

1526
01:26:43,429 --> 01:27:06,789
should be like you know there should be

1527
01:26:54,109 --> 01:27:06,789
like a dim here where we say that

1528
01:27:08,829 --> 01:27:12,659
don't know if we have a get dim on that

1529
01:27:13,020 --> 01:27:20,800
probably not so the actual thing that's

1530
01:27:18,819 --> 01:27:27,269
that's getting passed in there is like

1531
01:27:20,800 --> 01:27:29,860
one of those rectangles right it's this

1532
01:27:27,270 --> 01:27:35,440
so we want something that would give us

1533
01:27:29,859 --> 01:27:38,189
the dimensions of that rectangle but as

1534
01:27:35,439 --> 01:27:41,799
you can see that's really only for

1535
01:27:38,189 --> 01:27:44,859
rectangle rectangle Center float at the

1536
01:27:41,800 --> 01:27:49,600
moment so we want a thing that's like

1537
01:27:44,859 --> 01:27:51,789
gonna do this probably where we can get

1538
01:27:49,600 --> 01:27:53,950
the dim out of it but you know what we

1539
01:27:51,789 --> 01:28:06,000
could do you could also just up convert

1540
01:27:53,949 --> 01:28:06,000
it like this

1541
01:28:19,829 --> 01:28:31,600
something like this oh sorry that

1542
01:28:29,949 --> 01:28:33,399
actually gets the dimensions I'd

1543
01:28:31,600 --> 01:28:48,340
actually want to give it the full thing

1544
01:28:33,399 --> 01:28:49,988
here so that way we could up convert

1545
01:28:48,340 --> 01:28:51,699
those and say look I want the

1546
01:28:49,988 --> 01:28:59,459
floating-point version of this rectangle

1547
01:28:51,699 --> 01:28:59,460
please and that seems good

1548
01:29:08,850 --> 01:29:13,900
then you here where we've got like the

1549
01:29:11,140 --> 01:29:19,289
width and height and stuff right this is

1550
01:29:13,899 --> 01:29:19,289
just a this rectangle this record in

1551
01:29:19,380 --> 01:29:24,640
really that just comes you know we can

1552
01:29:22,029 --> 01:29:30,189
just get the din of well we already have

1553
01:29:24,640 --> 01:29:31,750
its region to him so that should all

1554
01:29:30,189 --> 01:29:34,449
just work fine and then here we just

1555
01:29:31,750 --> 01:29:37,060
need like region gym with and region

1556
01:29:34,449 --> 01:29:47,579
doing with their I think that's all good

1557
01:29:37,060 --> 01:29:47,580
right it's not let's fix that

1558
01:29:52,649 --> 01:29:58,149
so I think that's probably gonna fix

1559
01:29:56,140 --> 01:30:00,760
that problem we were having with with

1560
01:29:58,149 --> 01:30:02,079
the alignment code too so in here I

1561
01:30:00,760 --> 01:30:04,180
don't know if you remember when we went

1562
01:30:02,079 --> 01:30:06,069
to like the editor it was like weirdly

1563
01:30:04,180 --> 01:30:08,920
not aligned to the screen and now it

1564
01:30:06,069 --> 01:30:11,639
should always be right and it is so

1565
01:30:08,920 --> 01:30:14,050
that's a good thing right

1566
01:30:11,640 --> 01:30:15,670
so that fixes that problem we were

1567
01:30:14,050 --> 01:30:18,579
having which is good because I don't

1568
01:30:15,670 --> 01:30:20,680
want to have that problem that's perfect

1569
01:30:18,579 --> 01:30:22,659
now everything's fine

1570
01:30:20,680 --> 01:30:24,460
so that fixes that problem but now we

1571
01:30:22,659 --> 01:30:25,859
still have to go deal with the original

1572
01:30:24,460 --> 01:30:28,630
problem which is that we were getting

1573
01:30:25,859 --> 01:30:31,569
bad behavior in there for when these

1574
01:30:28,630 --> 01:30:33,310
things happen to degenerate to zero and

1575
01:30:31,569 --> 01:30:35,049
I want to find out why that's happening

1576
01:30:33,310 --> 01:30:37,000
because I don't understand why we would

1577
01:30:35,050 --> 01:30:38,619
be getting that I didn't think anyone

1578
01:30:37,000 --> 01:30:41,909
was using the window with their height

1579
01:30:38,619 --> 01:30:45,130
so why when you minimize you get that

1580
01:30:41,909 --> 01:30:46,960
degeneration I don't understand so I'm

1581
01:30:45,130 --> 01:30:49,230
gonna switch to debug mode real quick

1582
01:30:46,960 --> 01:30:55,890
and see if I can't get a bead on that

1583
01:30:49,229 --> 01:30:57,849
mm-hmm let's take a look we'll run this

1584
01:30:55,890 --> 01:31:00,900
and all I should have to do is minimize

1585
01:30:57,850 --> 01:31:03,640
it and that causes the problem right so

1586
01:31:00,899 --> 01:31:05,559
we have a create frame buffer call the

1587
01:31:03,640 --> 01:31:08,320
width and height are zero so let's find

1588
01:31:05,560 --> 01:31:10,300
out who is doing that and why the render

1589
01:31:08,319 --> 01:31:12,009
with render height here are set to the

1590
01:31:10,300 --> 01:31:13,720
settings width and height so that's

1591
01:31:12,010 --> 01:31:16,900
saying that someone's setting our width

1592
01:31:13,720 --> 01:31:19,690
and height in the settings who is doing

1593
01:31:16,899 --> 01:31:26,619
that right I have no idea who's doing

1594
01:31:19,689 --> 01:31:29,309
that or why I just I do not know why

1595
01:31:26,619 --> 01:31:29,309
that's happening

1596
01:31:32,369 --> 01:31:47,250
okay so this so I guess I see what's

1597
01:31:37,470 --> 01:31:49,730
going on here so this is a bit of a mind

1598
01:31:47,250 --> 01:31:49,729
bender

1599
01:31:58,198 --> 01:32:05,789
so it looks like we actually don't do

1600
01:32:03,390 --> 01:32:13,829
what I thought we did which is to render

1601
01:32:05,789 --> 01:32:18,260
to a separate target resolution and then

1602
01:32:13,829 --> 01:32:21,779
change it looks like we actually render

1603
01:32:18,260 --> 01:32:24,289
directly to the resolution that's being

1604
01:32:21,779 --> 01:32:24,289
requested

1605
01:32:31,769 --> 01:32:38,880
so that's not really what we want

1606
01:32:36,099 --> 01:32:42,190
in fact the draw region isn't really

1607
01:32:38,880 --> 01:32:45,489
what we want either we want a separate

1608
01:32:42,189 --> 01:32:51,038
thing for the render width and height

1609
01:32:45,488 --> 01:32:57,488
like it's it should not be set to those

1610
01:32:51,038 --> 01:32:57,908
things that is incorrect does that make

1611
01:32:57,488 --> 01:33:01,118
sense

1612
01:32:57,908 --> 01:33:05,649
so like the draw region that's also

1613
01:33:01,118 --> 01:33:07,799
wrong right like like I actually didn't

1614
01:33:05,649 --> 01:33:12,578
do when I what I should have done there

1615
01:33:07,800 --> 01:33:14,949
if you look at the UI stuff in here it

1616
01:33:12,578 --> 01:33:17,979
should not get that either this is the

1617
01:33:14,948 --> 01:33:20,078
OS draw region so no one should be using

1618
01:33:17,979 --> 01:33:24,908
that draw region the region dim should

1619
01:33:20,078 --> 01:33:28,750
actually just come from the commands

1620
01:33:24,908 --> 01:33:31,538
width and the commands height the render

1621
01:33:28,750 --> 01:33:41,639
version of those right that should

1622
01:33:31,538 --> 01:33:44,859
actually be stated explicitly so in here

1623
01:33:41,639 --> 01:33:47,279
like really this should be OS draw

1624
01:33:44,859 --> 01:33:47,279
region

1625
01:34:00,729 --> 01:34:14,569
and we really want this and that should

1626
01:34:09,020 --> 01:34:17,000
be something that we that should be

1627
01:34:14,569 --> 01:34:19,279
something that we set manually that we

1628
01:34:17,000 --> 01:34:21,439
can set to other things because we may

1629
01:34:19,279 --> 01:34:23,829
want to render and downsample we may

1630
01:34:21,439 --> 01:34:26,388
want to render an up sample and we

1631
01:34:23,829 --> 01:34:28,340
supported all of that correctly but then

1632
01:34:26,389 --> 01:34:31,069
we don't do it for some reason and I

1633
01:34:28,340 --> 01:34:32,569
don't know why that may just been an

1634
01:34:31,069 --> 01:34:34,039
oversight or maybe we had switched it

1635
01:34:32,569 --> 01:34:36,618
that way temporarily and then just

1636
01:34:34,039 --> 01:34:42,099
forgot we should switch it back so I

1637
01:34:36,618 --> 01:34:42,098
feel like we want to do this and this

1638
01:34:42,460 --> 01:35:03,710
like so I so that seems like a much more

1639
01:34:56,779 --> 01:35:08,859
sane way to go so in here I would like I

1640
01:35:03,710 --> 01:35:14,569
don't know if I can do this but that is

1641
01:35:08,859 --> 01:35:18,098
that is what I actually wanted all right

1642
01:35:14,569 --> 01:35:18,099
let's deal with the fallout from that

1643
01:35:22,819 --> 01:35:48,609
so in here

1644
01:35:24,409 --> 01:35:52,460
I want one of these this way I can just

1645
01:35:48,609 --> 01:35:54,710
convert those anytime I want so I want

1646
01:35:52,460 --> 01:35:57,170
to get one of these back for my render

1647
01:35:54,710 --> 01:36:06,590
dimensions and just use that that should

1648
01:35:57,170 --> 01:36:10,039
always be the case oops I had an extra

1649
01:36:06,590 --> 01:36:17,029
period in there in here I want to set

1650
01:36:10,039 --> 01:36:18,229
the OS dim directly to those window

1651
01:36:17,029 --> 01:36:20,509
width and height that's what I would

1652
01:36:18,229 --> 01:36:23,509
expect there too

1653
01:36:20,510 --> 01:36:27,650
oh and if we do have a render within a

1654
01:36:23,510 --> 01:36:39,199
render height it's in the settings okay

1655
01:36:27,649 --> 01:36:41,409
so we did actually have that it's right

1656
01:36:39,199 --> 01:36:41,409
here

1657
01:36:44,250 --> 01:36:49,270
so that's what we actually wanted we

1658
01:36:47,020 --> 01:36:51,010
wanted that render setting there and so

1659
01:36:49,270 --> 01:36:53,440
we want everyone to drive off of that

1660
01:36:51,010 --> 01:36:55,810
now and we don't want this to be set

1661
01:36:53,439 --> 01:36:59,649
here right that is not what should

1662
01:36:55,810 --> 01:37:02,560
happen that is bad and should not occur

1663
01:36:59,649 --> 01:37:03,609
like wrong false incorrect we have to

1664
01:37:02,560 --> 01:37:05,230
set that somewhere else

1665
01:37:03,609 --> 01:37:08,109
because that doesn't change based on the

1666
01:37:05,229 --> 01:37:10,089
window height we could change basically

1667
01:37:08,109 --> 01:37:13,989
not but we don't want to be set to we

1668
01:37:10,090 --> 01:37:16,600
don't want it to be set directly so in

1669
01:37:13,989 --> 01:37:20,199
here now we should have this which will

1670
01:37:16,600 --> 01:37:22,510
give us both of those things in here

1671
01:37:20,199 --> 01:37:24,309
this is the OS draw region and should

1672
01:37:22,510 --> 01:37:25,810
only be used when you know that your

1673
01:37:24,310 --> 01:37:38,560
that's what you're actually trying to do

1674
01:37:25,810 --> 01:37:43,120
oops this is fine and that's all fine so

1675
01:37:38,560 --> 01:37:51,880
that looks good in in here where we get

1676
01:37:43,119 --> 01:37:53,739
the window gym stuff that's fine too in

1677
01:37:51,880 --> 01:37:58,000
here this is going to be the rendered

1678
01:37:53,739 --> 01:38:00,159
gym version so this was like I said this

1679
01:37:58,000 --> 01:38:01,899
is basically setup correctly it just we

1680
01:38:00,159 --> 01:38:04,829
were using it incorrectly and so I just

1681
01:38:01,899 --> 01:38:04,829
want to clean that up

1682
01:38:17,439 --> 01:38:23,698
I'm not sure what this part is for here

1683
01:38:27,149 --> 01:38:47,529
okay let's just set this up nicely there

1684
01:38:46,000 --> 01:38:55,658
we go

1685
01:38:47,529 --> 01:39:06,789
and this can just do it that let's just

1686
01:38:55,658 --> 01:39:11,769
pipe that through all right now one of

1687
01:39:06,789 --> 01:39:15,939
the things I'm not sure about is what

1688
01:39:11,770 --> 01:39:21,580
are we doing with the projection in the

1689
01:39:15,939 --> 01:39:25,599
math like where is the math library

1690
01:39:21,579 --> 01:39:28,719
pulling that from so in renderer when we

1691
01:39:25,600 --> 01:39:34,060
do set camera transform it does the

1692
01:39:28,719 --> 01:39:40,060
perspective projection I guess it just

1693
01:39:34,060 --> 01:39:44,619
assumes like how does that take into

1694
01:39:40,060 --> 01:39:47,500
account the region of the screen that

1695
01:39:44,618 --> 01:39:51,939
it's looking at I guess it doesn't it

1696
01:39:47,500 --> 01:39:56,469
doesn't look like it really does there

1697
01:39:51,939 --> 01:39:59,039
it is okay so this is using the correct

1698
01:39:56,469 --> 01:40:02,679
value as well we already modified that

1699
01:39:59,039 --> 01:40:04,630
so everything now should be fine except

1700
01:40:02,679 --> 01:40:09,250
for the fact that we never actually set

1701
01:40:04,630 --> 01:40:12,368
the render dimension right like we use

1702
01:40:09,250 --> 01:40:15,760
it everywhere we correctly separated it

1703
01:40:12,368 --> 01:40:17,710
from the window dimension and so the

1704
01:40:15,760 --> 01:40:21,550
only thing that we have to do now is

1705
01:40:17,710 --> 01:40:23,349
actually set it somewhere right because

1706
01:40:21,550 --> 01:40:25,659
right now we're not actually ever

1707
01:40:23,349 --> 01:40:29,229
setting that so in the place where we

1708
01:40:25,658 --> 01:40:33,608
set the render settings we need to

1709
01:40:29,229 --> 01:40:39,550
actually have that occur so setting

1710
01:40:33,609 --> 01:40:43,539
those initial values it's like we don't

1711
01:40:39,550 --> 01:40:46,329
really do here unfortunately so here's

1712
01:40:43,538 --> 01:40:48,608
where we do our game commands you can

1713
01:40:46,328 --> 01:40:54,389
see us doing this here where we do a

1714
01:40:48,609 --> 01:41:03,969
begin frame so when we get that out I

1715
01:40:54,389 --> 01:41:09,729
guess you know when you look at what

1716
01:41:03,969 --> 01:41:20,918
we're actually doing here I guess that

1717
01:41:09,729 --> 01:41:28,090
can just be set directly so I think this

1718
01:41:20,918 --> 01:41:35,439
here I think we should be able to just

1719
01:41:28,090 --> 01:41:41,918
set that and be good to go oh and I

1720
01:41:35,439 --> 01:41:43,479
should probably switch to go to mode so

1721
01:41:41,918 --> 01:41:46,148
now we will continue rendering to our

1722
01:41:43,479 --> 01:41:52,619
back buffer at the appropriate size even

1723
01:41:46,149 --> 01:41:55,840
as we you know shrink down right and so

1724
01:41:52,618 --> 01:41:57,608
we may want to like change exactly how

1725
01:41:55,840 --> 01:41:59,559
we're picking that because we may want

1726
01:41:57,609 --> 01:42:02,499
to switch to smaller buffer sizes as we

1727
01:41:59,559 --> 01:42:03,998
go but again that's something we would

1728
01:42:02,498 --> 01:42:06,429
choose to do and that way when we

1729
01:42:03,998 --> 01:42:10,389
minimize we can still be running

1730
01:42:06,429 --> 01:42:12,668
properly and so on and so that's just

1731
01:42:10,389 --> 01:42:14,859
how we want to do that now we may in the

1732
01:42:12,668 --> 01:42:17,260
future again want to change that around

1733
01:42:14,859 --> 01:42:19,119
so that we can use smaller sizes for

1734
01:42:17,260 --> 01:42:21,609
smaller screens or whatever but that's a

1735
01:42:19,118 --> 01:42:27,098
separate issue that will will you know

1736
01:42:21,609 --> 01:42:28,629
sort of play with later on trying to

1737
01:42:27,099 --> 01:42:31,328
think of this anything else I want to do

1738
01:42:28,628 --> 01:42:33,069
here so now we should be able to render

1739
01:42:31,328 --> 01:42:36,880
at a different resolution so if I wanted

1740
01:42:33,069 --> 01:42:40,179
to I could render hoops

1741
01:42:36,880 --> 01:42:42,819
I could render very small so for example

1742
01:42:40,180 --> 01:42:47,140
like really really tiny screen and then

1743
01:42:42,819 --> 01:42:52,889
blow it up and that should work now so

1744
01:42:47,140 --> 01:42:52,890
you can see like super fuzzy game right

1745
01:42:58,770 --> 01:43:04,210
hard to use the interface there uh and

1746
01:43:02,560 --> 01:43:07,030
we may want to fix that part too there's

1747
01:43:04,210 --> 01:43:08,920
things we could do for that as well so

1748
01:43:07,029 --> 01:43:10,409
if we render it a really low resolution

1749
01:43:08,920 --> 01:43:14,350
just to see what happens you can see

1750
01:43:10,409 --> 01:43:24,789
there's no issue there so I think that's

1751
01:43:14,350 --> 01:43:27,360
all good and yeah I think that's all

1752
01:43:24,789 --> 01:43:29,979
good so one thing I would say here is

1753
01:43:27,359 --> 01:43:33,309
you know maybe we take global render Jim

1754
01:43:29,979 --> 01:43:38,379
and Robo rendered them goes away maybe

1755
01:43:33,310 --> 01:43:41,560
what we say is a global enforced aspect

1756
01:43:38,380 --> 01:43:45,220
ratio and that's just always sixteen by

1757
01:43:41,560 --> 01:43:46,660
nine so then we know that when we

1758
01:43:45,220 --> 01:43:50,490
rescale the window if we force the

1759
01:43:46,659 --> 01:43:50,489
aspect ratio it'll force sixteen by nine

1760
01:43:52,199 --> 01:43:59,199
like that and then this won't do this

1761
01:43:55,539 --> 01:44:01,479
and we won't have rendered em because it

1762
01:43:59,199 --> 01:44:03,159
was only getting used here anyway so

1763
01:44:01,479 --> 01:44:04,629
instead we'll just move this down

1764
01:44:03,159 --> 01:44:10,449
because this is something we can do

1765
01:44:04,630 --> 01:44:14,640
later that's something we can do right

1766
01:44:10,449 --> 01:44:14,639
here oops

1767
01:44:17,810 --> 01:44:21,530
so then Global render dim is never a

1768
01:44:19,850 --> 01:44:25,240
thing it's just render dim is the only

1769
01:44:21,529 --> 01:44:27,590
thing that we actually do here and so

1770
01:44:25,239 --> 01:44:31,670
what that means is now when we're

1771
01:44:27,590 --> 01:44:34,640
running we can't always choose to change

1772
01:44:31,670 --> 01:44:37,159
those values if we wanted to write at

1773
01:44:34,640 --> 01:44:39,079
any time and so that's better right we

1774
01:44:37,159 --> 01:44:41,960
only have them in one place

1775
01:44:39,079 --> 01:44:44,659
and so the anime if we want to do some

1776
01:44:41,960 --> 01:44:47,060
other resolution like say you know this

1777
01:44:44,659 --> 01:44:48,170
one so that this would be fine like this

1778
01:44:47,060 --> 01:44:49,700
would probably be a reasonable

1779
01:44:48,170 --> 01:44:53,239
resolution to render to if you have a

1780
01:44:49,699 --> 01:44:55,130
slower GPU you know that looks totally

1781
01:44:53,239 --> 01:44:58,159
fine right that's totally playable and

1782
01:44:55,130 --> 01:45:00,409
so now we're getting a 19 by 1080

1783
01:44:58,159 --> 01:45:02,439
display but we're actually rendering

1784
01:45:00,409 --> 01:45:06,619
much lower than that just to for speed

1785
01:45:02,439 --> 01:45:08,059
right um so we can do that and that's

1786
01:45:06,619 --> 01:45:10,569
just better and we know that that can

1787
01:45:08,060 --> 01:45:18,980
change at any time - so that's good -

1788
01:45:10,569 --> 01:45:20,329
all right so I think that's all done and

1789
01:45:18,979 --> 01:45:22,609
so the only thing left I've got on here

1790
01:45:20,329 --> 01:45:25,189
that's a thing a small thing to look at

1791
01:45:22,609 --> 01:45:30,170
is the fog being broken I think we fixed

1792
01:45:25,189 --> 01:45:33,369
that already right pretty sure I was the

1793
01:45:30,170 --> 01:45:36,859
pre-multiply problem and I fixed it so

1794
01:45:33,369 --> 01:45:38,899
I'm pretty sure that if you fog you

1795
01:45:36,859 --> 01:45:45,639
don't get alpha bugs now of course I

1796
01:45:38,899 --> 01:45:49,149
don't remember actually seeing any fog

1797
01:45:45,640 --> 01:45:49,150
so that seems bad

1798
01:45:55,199 --> 01:45:59,340
although I guess the reason for that is

1799
01:45:56,880 --> 01:46:01,560
because there's nothing you can't the

1800
01:45:59,340 --> 01:46:03,690
fog always gets set based on the hero's

1801
01:46:01,560 --> 01:46:05,960
location so I don't know maybe that's

1802
01:46:03,689 --> 01:46:05,960
not

1803
01:46:18,310 --> 01:46:25,360
so there's the fog again it set the min

1804
01:46:23,680 --> 01:46:29,829
setting though is kind of in a place

1805
01:46:25,359 --> 01:46:31,479
where you know it's set to be the bottom

1806
01:46:29,829 --> 01:46:33,519
of the expected floor there which is

1807
01:46:31,479 --> 01:46:38,709
gonna be nineteen point four which is

1808
01:46:33,520 --> 01:46:41,110
below the hero so I don't really know

1809
01:46:38,710 --> 01:46:46,119
how to I think that's that's the closest

1810
01:46:41,109 --> 01:46:50,380
the fog can get it's like there I need a

1811
01:46:46,119 --> 01:46:52,180
way to like stop the camera but I think

1812
01:46:50,380 --> 01:46:54,159
we fixed it already I guess it's what

1813
01:46:52,180 --> 01:46:57,960
I'm saying I think the Alpha is fixed I

1814
01:46:54,159 --> 01:46:57,960
think it's actually correct

1815
01:47:04,210 --> 01:47:08,430
I just don't have much a way to test

1816
01:47:06,219 --> 01:47:08,430
that

1817
01:47:13,599 --> 01:47:25,270
we need something hopping around down

1818
01:47:15,819 --> 01:47:28,448
there um what time do we have one if I

1819
01:47:25,270 --> 01:47:32,949
count like one minute crap crap crap

1820
01:47:28,448 --> 01:47:34,238
crap a Tipu so what I would have to do

1821
01:47:32,948 --> 01:47:36,729
here is like I don't know can we add a

1822
01:47:34,238 --> 01:47:38,828
snake real quick or something so let's

1823
01:47:36,729 --> 01:47:45,750
suppose that I grab one of these things

1824
01:47:38,828 --> 01:47:45,750
for adding an orphan right and I add a

1825
01:47:46,020 --> 01:47:56,020
hopper snake add snake so if I wanted

1826
01:47:53,859 --> 01:47:59,439
that to be in here actually I guess I

1827
01:47:56,020 --> 01:48:03,099
can just make this thing so add snake

1828
01:47:59,439 --> 01:48:07,029
segment let's grab that make it a real

1829
01:48:03,099 --> 01:48:11,440
entity we can put in the world now at

1830
01:48:07,029 --> 01:48:13,479
snake and so here I wouldn't necessarily

1831
01:48:11,439 --> 01:48:25,210
know which segment index it was supposed

1832
01:48:13,479 --> 01:48:29,138
to be so I probably can't not sure

1833
01:48:25,210 --> 01:48:38,590
exactly what to do about that but I

1834
01:48:29,139 --> 01:48:40,719
guess I'll just for now make it like

1835
01:48:38,590 --> 01:48:43,389
that looking at what we're doing here I

1836
01:48:40,719 --> 01:48:45,760
think you know just looking at the add

1837
01:48:43,389 --> 01:48:48,400
orphan stuff we're gonna do the same

1838
01:48:45,760 --> 01:48:51,250
thing here that we would do all of this

1839
01:48:48,399 --> 01:48:53,679
stuff would stay the same adding these

1840
01:48:51,250 --> 01:48:55,328
pieces in probably needs to get modified

1841
01:48:53,679 --> 01:48:57,099
a little bit it wouldn't have a shadow

1842
01:48:55,328 --> 01:48:58,840
anymore that gets handled by the

1843
01:48:57,099 --> 01:49:01,239
lighting I don't know that we would put

1844
01:48:58,840 --> 01:49:03,849
a light on there but okay so maybe

1845
01:49:01,238 --> 01:49:06,399
there's a light on there who knows then

1846
01:49:03,849 --> 01:49:08,199
we've got the body head stuff and this

1847
01:49:06,399 --> 01:49:11,859
stuff is probably gonna have to be

1848
01:49:08,198 --> 01:49:16,238
changed to something that has tagging on

1849
01:49:11,859 --> 01:49:18,488
it at least in some way and we probably

1850
01:49:16,238 --> 01:49:20,799
need some connect piece to world stuff

1851
01:49:18,488 --> 01:49:23,368
right we would probably need to do

1852
01:49:20,800 --> 01:49:23,369
something like this

1853
01:49:41,619 --> 01:49:50,869
so we just connect it to the world and

1854
01:49:44,840 --> 01:49:53,840
give it its its go seems like it would

1855
01:49:50,869 --> 01:49:55,819
be fine we're not only doing hip points

1856
01:49:53,840 --> 01:50:06,350
at the moment so that you know might

1857
01:49:55,819 --> 01:50:08,659
work for adding a snake maybe I'm not

1858
01:50:06,350 --> 01:50:12,110
sure what the brain ID thing was for

1859
01:50:08,659 --> 01:50:29,000
there I guess the brain ID gets passed

1860
01:50:12,109 --> 01:50:30,559
in so this stuff is gonna have to be for

1861
01:50:29,000 --> 01:50:31,760
creating more complex things which we

1862
01:50:30,560 --> 01:50:34,160
don't have the ability to do at the

1863
01:50:31,760 --> 01:50:36,050
moment inside the generator we'd have to

1864
01:50:34,159 --> 01:50:39,019
add sort of that way of making that work

1865
01:50:36,050 --> 01:50:48,560
place entity it's not necessary right

1866
01:50:39,020 --> 01:50:52,310
just do this and then I think we can we

1867
01:50:48,560 --> 01:50:54,170
can't just add those yeah but so if I

1868
01:50:52,310 --> 01:50:56,030
want to add one of those to the to the

1869
01:50:54,170 --> 01:50:58,460
world now like if I want to have any

1870
01:50:56,029 --> 01:51:00,289
time there's a dungeon tile so because

1871
01:50:58,460 --> 01:51:02,720
we had like you know in the world

1872
01:51:00,289 --> 01:51:05,960
gencode we had like this notion of like

1873
01:51:02,720 --> 01:51:07,760
dungeon tiles in here which we don't

1874
01:51:05,960 --> 01:51:13,159
really do anything with at the moment so

1875
01:51:07,760 --> 01:51:15,770
you know there's create dungeon right

1876
01:51:13,159 --> 01:51:18,470
this thing so if every time we create

1877
01:51:15,770 --> 01:51:21,800
one of these rooms you can sort of see

1878
01:51:18,470 --> 01:51:23,360
in here we're doing like who knows what

1879
01:51:21,800 --> 01:51:27,650
we're doing here we're just doing like

1880
01:51:23,359 --> 01:51:32,689
create dungeon got floor entrance and

1881
01:51:27,649 --> 01:51:36,170
previous room and whatever else right if

1882
01:51:32,689 --> 01:51:37,879
when we create these things we just put

1883
01:51:36,170 --> 01:51:41,420
stuff in them so like all the chain

1884
01:51:37,880 --> 01:51:46,190
rooms for example we just added one of

1885
01:51:41,420 --> 01:51:47,029
those to it so we just said like place

1886
01:51:46,189 --> 01:51:57,038
snake

1887
01:51:47,029 --> 01:52:00,679
we said inside this room like that I

1888
01:51:57,038 --> 01:52:11,538
think that would work so inside the

1889
01:52:00,679 --> 01:52:20,649
orphan stuff we would just do the same

1890
01:52:11,538 --> 01:52:20,649
thing so we just say you know add in the

1891
01:52:23,889 --> 01:52:32,109
add a tag I guess I don't know what our

1892
01:52:32,920 --> 01:52:36,578
tags might want to be

1893
01:52:47,719 --> 01:52:54,380
seems reasonable so it's like a skeleton

1894
01:52:51,670 --> 01:52:58,670
ish thing I don't know if we actually

1895
01:52:54,380 --> 01:53:20,539
imported those yet and then we would

1896
01:52:58,670 --> 01:53:23,000
just place it in the room yeah so yeah

1897
01:53:20,539 --> 01:53:29,810
not sure what we want to do there can't

1898
01:53:23,000 --> 01:53:31,179
can't really say I think that would give

1899
01:53:29,810 --> 01:53:33,199
us one of those little snake guys

1900
01:53:31,179 --> 01:53:36,639
although we'd have to fear how we want

1901
01:53:33,198 --> 01:53:36,638
to add the other parts to it but

1902
01:53:51,880 --> 01:53:59,560
I think all of this stuff wants to go up

1903
01:53:53,800 --> 01:54:01,360
there yeah so let's see

1904
01:53:59,560 --> 01:54:02,710
well I'm jumping the gun here a little

1905
01:54:01,359 --> 01:54:04,299
bit but I don't know how to put any I

1906
01:54:02,710 --> 01:54:05,739
just want to look and see if the fog is

1907
01:54:04,300 --> 01:54:08,970
fixed and I'm not sure how else we would

1908
01:54:05,739 --> 01:54:08,969
do that you know what I mean

1909
01:54:09,300 --> 01:54:12,418
[Music]

1910
01:54:15,300 --> 01:54:21,600
looks like this is having a problem

1911
01:54:17,590 --> 01:54:21,600
figuring out where to put the entity

1912
01:54:35,349 --> 01:54:38,159
sir the

1913
01:54:39,960 --> 01:54:43,739
spirits of the ending there I'm not sure

1914
01:54:42,060 --> 01:54:45,570
why we'd have trouble placing that

1915
01:54:43,738 --> 01:54:47,099
entity let's go ahead and debug this I

1916
01:54:45,569 --> 01:54:49,559
have a little extra time I don't mind if

1917
01:54:47,100 --> 01:54:50,850
I go a little over today it's not a big

1918
01:54:49,560 --> 01:54:51,150
deal when we're the other what time is

1919
01:54:50,850 --> 01:54:55,199
it

1920
01:54:51,149 --> 01:55:00,569
so I 2 o'clock so I'm fine what what is

1921
01:54:55,198 --> 01:55:02,009
it complaining about so we added an

1922
01:55:00,569 --> 01:55:06,658
entity group that doesn't have anything

1923
01:55:02,010 --> 01:55:09,090
in it so why did we do that did I mess

1924
01:55:06,658 --> 01:55:11,839
something up with that placement let me

1925
01:55:09,090 --> 01:55:11,840
just double-check

1926
01:55:18,750 --> 01:55:27,729
add the entity we place the entity in

1927
01:55:22,119 --> 01:55:30,238
the room like so so that should just

1928
01:55:27,729 --> 01:55:30,238
work right

1929
01:55:43,510 --> 01:56:07,659
let's do an assert just in case hmm so

1930
01:55:57,399 --> 01:56:08,949
somehow when are we going here we're

1931
01:56:07,659 --> 01:56:16,269
getting an entity group that doesn't

1932
01:56:08,949 --> 01:56:17,349
have any entities in it and I don't know

1933
01:56:16,270 --> 01:56:18,940
how that's possible

1934
01:56:17,350 --> 01:56:22,840
because the only time we ever add an

1935
01:56:18,939 --> 01:56:29,589
entity group there should be an entity

1936
01:56:22,840 --> 01:56:32,369
in it right so I'm kind of at a loss

1937
01:56:29,590 --> 01:56:32,369
there

1938
01:56:42,599 --> 01:56:47,020
you can see that the only time we

1939
01:56:45,010 --> 01:56:50,559
actually call it is when we call place

1940
01:56:47,020 --> 01:57:13,300
entity and immediately after that we put

1941
01:56:50,559 --> 01:57:18,940
an entity into that group so it's like

1942
01:57:13,300 --> 01:57:27,730
it's getting erased somehow like it was

1943
01:57:18,939 --> 01:57:29,939
there and then it's not so how is that

1944
01:57:27,729 --> 01:57:29,939
happening

1945
01:57:37,560 --> 01:57:46,270
let's look at the call foreplay snake

1946
01:57:41,010 --> 01:57:48,550
which is right here is it possible that

1947
01:57:46,270 --> 01:57:52,950
the room is somehow not correct

1948
01:57:48,550 --> 01:57:52,949
sometimes or something weird like this

1949
01:57:52,979 --> 01:57:59,649
you know we're always generating a room

1950
01:57:56,729 --> 01:58:04,719
I don't think we're doing anything weird

1951
01:57:59,649 --> 01:58:06,159
with the room so here's a question let's

1952
01:58:04,720 --> 01:58:07,780
suppose we didn't do this

1953
01:58:06,159 --> 01:58:09,519
I'm assuming that that's the only

1954
01:58:07,779 --> 01:58:14,500
problem right like it's just we call

1955
01:58:09,520 --> 01:58:17,290
that and we get worked right so let's

1956
01:58:14,500 --> 01:58:19,989
suppose I added it to one of the other

1957
01:58:17,289 --> 01:58:22,720
rooms so in here we just say oh yeah

1958
01:58:19,989 --> 01:58:28,960
like you know the thing is in the heros

1959
01:58:22,720 --> 01:58:30,250
bedroom is it just the snake that causes

1960
01:58:28,960 --> 01:58:37,750
the problem like something about our

1961
01:58:30,250 --> 01:58:44,020
snake call sucks so the snake call seems

1962
01:58:37,750 --> 01:58:47,729
fine although I don't see it oh no there

1963
01:58:44,020 --> 01:58:47,730
it is there it's going

1964
01:59:01,908 --> 01:59:06,638
so it's hopping around out here there it

1965
01:59:04,488 --> 01:59:06,638
is

1966
01:59:16,409 --> 01:59:28,210
all right so if I want to put this body

1967
01:59:25,630 --> 01:59:32,409
piece up a little bit I might just do

1968
01:59:28,210 --> 01:59:34,300
that and I might also make its light a

1969
01:59:32,409 --> 01:59:36,399
little bit brighter I think this is this

1970
01:59:34,300 --> 01:59:49,600
the brightness or the size I don't

1971
01:59:36,399 --> 01:59:59,319
really know let's go ahead and change

1972
01:59:49,600 --> 02:00:01,120
that around all right um so yeah there's

1973
01:59:59,319 --> 02:00:04,299
one of those saucy gentlemen there

1974
02:00:01,119 --> 02:00:07,539
hopping around I may have made that

1975
02:00:04,300 --> 02:00:11,489
light too bright and I admit that so

1976
02:00:07,539 --> 02:00:11,489
maybe that's maybe that's inappropriate

1977
02:00:29,139 --> 02:00:37,300
so now I guess my I really just don't

1978
02:00:31,750 --> 02:00:39,279
understand why you know why I can't seem

1979
02:00:37,300 --> 02:00:43,779
to get that guy to be placed in a

1980
02:00:39,279 --> 02:00:45,939
dungeon so we have a bug in our world

1981
02:00:43,779 --> 02:00:49,448
Jen stuff which admittedly we kind of

1982
02:00:45,939 --> 02:00:52,349
threw a bunch of sort of like shoddily

1983
02:00:49,448 --> 02:00:54,849
constructive things I guess I would say

1984
02:00:52,350 --> 02:00:56,380
in there real quick cuz we wanted to do

1985
02:00:54,850 --> 02:00:58,869
some placement stuff and so I'm not

1986
02:00:56,380 --> 02:01:00,609
surprised but I also don't necessarily

1987
02:00:58,868 --> 02:01:02,738
know what the problem is

1988
02:01:00,609 --> 02:01:05,738
could this stuff be a lot better sure

1989
02:01:02,738 --> 02:01:08,799
but also just don't know why we're

1990
02:01:05,738 --> 02:01:11,948
getting that problem so if we look at

1991
02:01:08,800 --> 02:01:16,630
please snake and we you know we're able

1992
02:01:11,948 --> 02:01:24,279
to place the snake and then we go look

1993
02:01:16,630 --> 02:01:26,949
at why I can't move that around I just I

1994
02:01:24,279 --> 02:01:29,050
don't follow it because inside create

1995
02:01:26,948 --> 02:01:31,750
dungeon where we're making these rooms

1996
02:01:29,050 --> 02:01:33,789
it should be free for us after we create

1997
02:01:31,750 --> 02:01:41,829
one of those we should be able to just

1998
02:01:33,789 --> 02:01:44,859
say like okay you know and put one of

1999
02:01:41,829 --> 02:01:50,829
those into that room and then so we're

2000
02:01:44,859 --> 02:01:56,759
creating this chain and you know we're

2001
02:01:50,829 --> 02:01:56,760
connecting those up and that's fine

2002
02:01:57,899 --> 02:02:08,829
we're connecting things randomly along

2003
02:02:01,479 --> 02:02:11,399
the chain that seems fine too oh why are

2004
02:02:08,829 --> 02:02:11,399
we doing this

2005
02:02:14,439 --> 02:02:26,269
well that's almost certainly our problem

2006
02:02:16,909 --> 02:02:28,539
we can't we can't do this how is this

2007
02:02:26,270 --> 02:02:28,540
working

2008
02:02:30,219 --> 02:02:34,010
that seems super busted because you can

2009
02:02:32,420 --> 02:02:40,279
see us generating a bunch of stuff here

2010
02:02:34,010 --> 02:02:41,780
you can't do a temp memory on that right

2011
02:02:40,279 --> 02:02:44,380
because if you look at what's going on

2012
02:02:41,779 --> 02:02:46,789
there we've got memory and temp memory

2013
02:02:44,380 --> 02:02:47,329
it's ten memory being used where is that

2014
02:02:46,789 --> 02:02:57,289
being used

2015
02:02:47,329 --> 02:02:59,029
do we mess up yeah so that's using

2016
02:02:57,289 --> 02:03:01,039
that's like using that like a stack

2017
02:02:59,029 --> 02:03:03,679
which is really not what we would want

2018
02:03:01,039 --> 02:03:05,210
to do there that's the problem cuz we

2019
02:03:03,680 --> 02:03:08,000
need to use the temp memory to create

2020
02:03:05,210 --> 02:03:10,760
stuff I don't know what our idea was

2021
02:03:08,000 --> 02:03:18,350
here is the idea that the memory like

2022
02:03:10,760 --> 02:03:26,840
when do we use the memory okay so I just

2023
02:03:18,350 --> 02:03:28,910
this was this was my screw-up so we have

2024
02:03:26,840 --> 02:03:30,319
tenth memory and like so for example

2025
02:03:28,909 --> 02:03:32,619
here where we're adding these options

2026
02:03:30,319 --> 02:03:38,479
these should not be temporary memory

2027
02:03:32,619 --> 02:03:42,529
right I feel like these these are all

2028
02:03:38,479 --> 02:03:44,389
supposed to be real memory right so the

2029
02:03:42,529 --> 02:03:47,000
only time we would use the temporary is

2030
02:03:44,390 --> 02:03:50,570
for stacks and stuff that was that was

2031
02:03:47,000 --> 02:03:51,829
just me being dumb so when you add

2032
02:03:50,569 --> 02:03:56,139
entities and stuff those are getting

2033
02:03:51,829 --> 02:03:56,140
added to real memory not temp memory

2034
02:04:14,368 --> 02:04:21,219
so that was that was just dumb I should

2035
02:04:20,170 --> 02:04:23,529
make a note of that so we don't make

2036
02:04:21,219 --> 02:04:25,779
that mistake again the whole point of

2037
02:04:23,529 --> 02:04:27,518
having those two is so that we can flush

2038
02:04:25,779 --> 02:04:33,599
all the stuff away that we just used as

2039
02:04:27,519 --> 02:04:37,869
temporary and yeah I screwed that up

2040
02:04:33,599 --> 02:04:40,739
all right so in theory now there should

2041
02:04:37,868 --> 02:04:51,069
be people hopping around down there

2042
02:04:40,738 --> 02:04:53,968
right and there are I need a way to set

2043
02:04:51,069 --> 02:04:53,969
the fog in here

2044
02:04:57,630 --> 02:05:02,579
see what happens I want to make sure the

2045
02:04:59,770 --> 02:05:02,580
alpha works okay

2046
02:05:14,698 --> 02:05:18,960
so it looks like we still have some

2047
02:05:17,189 --> 02:05:21,869
weird stuff happening with the fog like

2048
02:05:18,960 --> 02:05:24,270
those things that are lit the fog is

2049
02:05:21,869 --> 02:05:28,619
wrong on those for sure right

2050
02:05:24,270 --> 02:05:31,770
so the Alfa's fine we fixed the Alfa but

2051
02:05:28,619 --> 02:05:43,439
the lighting now is not doing the

2052
02:05:31,770 --> 02:05:45,540
premultiplied alpha properly so in here

2053
02:05:43,439 --> 02:05:49,049
where do we compute our lighting because

2054
02:05:45,539 --> 02:05:49,769
that's not coming in properly so here we

2055
02:05:49,050 --> 02:05:52,199
go

2056
02:05:49,770 --> 02:05:56,280
bla bla bla fog amount you can see it

2057
02:05:52,198 --> 02:05:58,439
multiplying it here surface reflect RGB

2058
02:05:56,279 --> 02:06:00,869
multiplies by the lighting value so

2059
02:05:58,439 --> 02:06:05,849
that's this is the problem right here

2060
02:06:00,869 --> 02:06:08,250
this is not acceptable right so you look

2061
02:06:05,850 --> 02:06:10,590
in here we take the mod color that's got

2062
02:06:08,250 --> 02:06:13,319
the appropriate alpha coming in we then

2063
02:06:10,590 --> 02:06:21,329
have this lighting value that's getting

2064
02:06:13,319 --> 02:06:23,069
multiplied in here that is not that is

2065
02:06:21,329 --> 02:06:25,279
not going to affect the Alpha like it

2066
02:06:23,069 --> 02:06:25,279
should

2067
02:06:31,979 --> 02:06:35,309
although to be fair

2068
02:06:39,550 --> 02:06:47,539
right so that can reduce the Alpha calm

2069
02:06:43,389 --> 02:06:53,270
the Alpha addition of those values

2070
02:06:47,539 --> 02:06:56,829
I guess I'm honestly I actually am Not

2071
02:06:53,270 --> 02:06:56,830
sure that that's really correct

2072
02:07:03,840 --> 02:07:10,029
because we should be able to do the

2073
02:07:06,010 --> 02:07:14,250
lighting the lighting is just gonna

2074
02:07:10,029 --> 02:07:17,699
change the color which should be fine

2075
02:07:14,250 --> 02:07:23,220
because it has already been diminished I

2076
02:07:17,699 --> 02:07:23,220
guess if the Alpha value milk I don't I

2077
02:07:24,810 --> 02:07:29,200
can't I honestly don't know why that's

2078
02:07:27,369 --> 02:07:34,210
wrong that seems like that should be

2079
02:07:29,199 --> 02:07:37,420
right because the RGB here you know the

2080
02:07:34,210 --> 02:07:39,460
alpha value is just was already set this

2081
02:07:37,420 --> 02:07:41,500
RGB if it should have faded away to

2082
02:07:39,460 --> 02:07:49,480
nothing this should just I mean this

2083
02:07:41,500 --> 02:07:52,600
can't increase the value and I guess

2084
02:07:49,479 --> 02:07:55,059
maybe it can because when we do the

2085
02:07:52,600 --> 02:08:00,100
maybe the the problem is the L value can

2086
02:07:55,060 --> 02:08:01,780
be increased above one but that isn't I

2087
02:08:00,100 --> 02:08:03,190
really commensurate with what we were

2088
02:08:01,779 --> 02:08:07,649
seeing because we were seeing black

2089
02:08:03,189 --> 02:08:07,649
things that were blackened effectively

2090
02:08:21,828 --> 02:08:24,828
hmm

2091
02:08:30,868 --> 02:08:36,248
so I don't know what's going on there

2092
02:08:34,078 --> 02:08:38,018
right because you can see that this is

2093
02:08:36,248 --> 02:08:41,050
not a question of boosting above one

2094
02:08:38,019 --> 02:08:44,289
really because this this has no lighting

2095
02:08:41,050 --> 02:08:48,159
on it so it couldn't possibly be like

2096
02:08:44,288 --> 02:08:51,099
two or something right so why that is

2097
02:08:48,158 --> 02:08:53,308
not still properly set to zero in the

2098
02:08:51,099 --> 02:08:57,578
lighting region I don't understand

2099
02:08:53,309 --> 02:08:58,809
because multiplying by a value would

2100
02:08:57,578 --> 02:09:01,198
reduce the color that you're

2101
02:08:58,809 --> 02:09:01,199
contributing

2102
02:09:10,319 --> 02:09:14,408
but it should already have been set to

2103
02:09:12,788 --> 02:09:21,578
the Alpha should already have been set

2104
02:09:14,408 --> 02:09:23,888
to zero anyway and so should those

2105
02:09:21,578 --> 02:09:24,788
values that's yeah I don't see it I

2106
02:09:23,889 --> 02:09:26,699
don't see it

2107
02:09:24,788 --> 02:09:29,498
maybe someone else does but I don't

2108
02:09:26,698 --> 02:09:34,268
because you know when you once you get

2109
02:09:29,498 --> 02:09:38,679
into sunlight I guess you know part of

2110
02:09:34,269 --> 02:09:40,119
it is this should really be done I mean

2111
02:09:38,679 --> 02:09:41,590
well even that so that doesn't really

2112
02:09:40,118 --> 02:09:45,399
make sense because you can see that's

2113
02:09:41,590 --> 02:09:49,029
like there's no Alpha left there so why

2114
02:09:45,399 --> 02:09:50,888
I guess because the fog value here you

2115
02:09:49,029 --> 02:09:52,809
would have to check again so I guess

2116
02:09:50,889 --> 02:09:55,630
it's like we did the fog value now the

2117
02:09:52,809 --> 02:10:04,929
Alpha is effectively zero we lurked

2118
02:09:55,630 --> 02:10:06,939
between these two things okay hmm I can

2119
02:10:04,929 --> 02:10:09,998
see I can see I guess what's going on

2120
02:10:06,939 --> 02:10:12,820
there the Alpha value isn't really zero

2121
02:10:09,998 --> 02:10:15,458
at that point right it's like it's just

2122
02:10:12,819 --> 02:10:17,708
been fogged but it's not the alpha

2123
02:10:15,458 --> 02:10:20,769
that's not reducing the alpha the Alpha

2124
02:10:17,708 --> 02:10:25,319
is still full fog is not alpha it

2125
02:10:20,769 --> 02:10:28,719
doesn't fade out it's just coloring it

2126
02:10:25,319 --> 02:10:31,599
so I suppose that makes sense so what we

2127
02:10:28,719 --> 02:10:34,328
want to do is light before we fog I

2128
02:10:31,599 --> 02:10:37,090
think that's really the situation that

2129
02:10:34,328 --> 02:10:44,549
we're dealing with here so instead of

2130
02:10:37,090 --> 02:10:44,550
this I think we want this

2131
02:10:47,829 --> 02:10:56,210
so I think the Alpha is correct the

2132
02:10:51,590 --> 02:11:02,630
problem is the fog was actually not

2133
02:10:56,210 --> 02:11:07,719
correct so we need this to happen second

2134
02:11:02,630 --> 02:11:11,179
so mod color RGB needs to be set up here

2135
02:11:07,719 --> 02:11:13,600
right another way to say this would be

2136
02:11:11,179 --> 02:11:16,969
like surface reflect shouldn't have an a

2137
02:11:13,600 --> 02:11:23,030
right surface reflect should just be in

2138
02:11:16,969 --> 02:11:25,069
RGB so surface reflect does its thing

2139
02:11:23,029 --> 02:11:30,019
and then when we get back right and this

2140
02:11:25,069 --> 02:11:36,439
is just mod color RGB this is just

2141
02:11:30,020 --> 02:11:43,100
surface reflect here and we clamp it out

2142
02:11:36,439 --> 02:11:49,069
I think that's what we supposed to be

2143
02:11:43,100 --> 02:11:50,780
doing again a bit of a mind bender so

2144
02:11:49,069 --> 02:11:54,170
let's go ahead and check that out but we

2145
02:11:50,779 --> 02:11:56,210
were fogging we lit after we fogged but

2146
02:11:54,170 --> 02:11:57,920
fog is supposed to apply after lighting

2147
02:11:56,210 --> 02:11:59,989
like we're supposed to that the

2148
02:11:57,920 --> 02:12:01,929
attenuation from the fog happens after

2149
02:11:59,988 --> 02:12:04,218
the lighting so we were effectively

2150
02:12:01,929 --> 02:12:06,260
lighting our fogged values which of

2151
02:12:04,219 --> 02:12:08,000
course can make them darker so that is

2152
02:12:06,260 --> 02:12:10,880
what we should have expected I was just

2153
02:12:08,000 --> 02:12:12,408
thinking about it wrong so that's

2154
02:12:10,880 --> 02:12:14,449
another bug that isn't even the one we

2155
02:12:12,408 --> 02:12:16,488
wanted to fix so now we can see it

2156
02:12:14,448 --> 02:12:18,198
inside our lighting region here we can

2157
02:12:16,488 --> 02:12:19,669
see the lighting happening so let's play

2158
02:12:18,198 --> 02:12:23,138
with the fog now and we should be able

2159
02:12:19,670 --> 02:12:31,520
to get it to work properly now right

2160
02:12:23,139 --> 02:12:34,929
hopefully so that still looks as bad did

2161
02:12:31,520 --> 02:12:34,929
I still screw up that equation

2162
02:12:36,739 --> 02:12:38,829
Oh

2163
02:12:40,430 --> 02:12:45,970
whoops the compile didn't actually

2164
02:12:42,380 --> 02:12:45,970
compile because we were still running

2165
02:12:53,649 --> 02:13:08,619
oh it didn't like that it did not like

2166
02:12:59,619 --> 02:13:15,579
that all right so we got some swizzle

2167
02:13:08,619 --> 02:13:18,510
mask errors there let's take a look that

2168
02:13:15,579 --> 02:13:18,510
all seems okay

2169
02:13:23,630 --> 02:13:36,029
okay so that's not right does that only

2170
02:13:31,948 --> 02:13:38,039
exists on the mod color let's see if we

2171
02:13:36,029 --> 02:13:40,529
can get that better we should probably

2172
02:13:38,039 --> 02:13:42,149
put this in the hot loading set because

2173
02:13:40,529 --> 02:13:43,139
there's no reason not to hot load the

2174
02:13:42,149 --> 02:13:45,988
renderer

2175
02:13:43,139 --> 02:13:50,940
it's a dll now you should just load it

2176
02:13:45,988 --> 02:13:58,908
when it changes assignment of

2177
02:13:50,939 --> 02:13:58,908
incompatible types you are correct

2178
02:14:09,039 --> 02:14:14,800
alright now let's see if we've got our

2179
02:14:11,869 --> 02:14:14,800
fog solved

2180
02:14:35,609 --> 02:14:43,889
so it's better but we're we're now

2181
02:14:40,560 --> 02:14:46,080
getting the fogging is fogging 2-0 which

2182
02:14:43,890 --> 02:14:48,650
is not what I wanted I want a fog - the

2183
02:14:46,079 --> 02:14:48,649
fog color

2184
02:15:00,239 --> 02:15:11,489
so I think so I'm not I'm not really

2185
02:15:08,770 --> 02:15:11,490
sure

2186
02:15:25,140 --> 02:15:30,869
I'm not really sure why we be getting

2187
02:15:28,000 --> 02:15:37,750
that behavior

2188
02:15:30,869 --> 02:15:40,269
the fog color is a constant color we're

2189
02:15:37,750 --> 02:15:42,479
looping from the surface reflectance to

2190
02:15:40,270 --> 02:15:42,480
it

2191
02:16:08,488 --> 02:16:18,909
yeah and I don't I don't really know why

2192
02:16:11,529 --> 02:16:21,130
that's unhappy I mean you can see pretty

2193
02:16:18,909 --> 02:16:24,010
clearly that's fogging it now fogs

2194
02:16:21,130 --> 02:16:27,119
everything uniformly like it should but

2195
02:16:24,010 --> 02:16:29,650
it's fogging it to zero like it black

2196
02:16:27,119 --> 02:16:33,670
but it shouldn't be fogging it to a grey

2197
02:16:29,649 --> 02:16:37,510
cuz that's the fog color right so

2198
02:16:33,670 --> 02:16:44,019
something's weird there and I'm not sure

2199
02:16:37,510 --> 02:16:46,179
what it is because that lerp should be

2200
02:16:44,019 --> 02:16:49,450
forcing it towards the fog color by fog

2201
02:16:46,179 --> 02:16:52,659
amount no matter what happens and yet it

2202
02:16:49,450 --> 02:16:55,210
doesn't actually seem to do that so it

2203
02:16:52,659 --> 02:16:58,269
grabs the mod color which is the alpha

2204
02:16:55,209 --> 02:17:02,589
and fragment texture stuff right that

2205
02:16:58,269 --> 02:17:04,750
all comes through it looks to see if

2206
02:17:02,590 --> 02:17:09,058
it's going to proceed Smith is gonna

2207
02:17:04,750 --> 02:17:09,058
proceed it starts with that mod color

2208
02:17:16,939 --> 02:17:29,398
it's weird why don't why do we not have

2209
02:17:24,959 --> 02:17:38,669
a right here what's what's going on with

2210
02:17:29,398 --> 02:17:45,920
that why is this here shouldn't this be

2211
02:17:38,670 --> 02:17:48,239
at the end like why is that not there I

2212
02:17:45,920 --> 02:17:49,739
don't know that that has anything to do

2213
02:17:48,239 --> 02:17:52,648
with it but that should be over there

2214
02:17:49,739 --> 02:17:56,340
right because if we're simulating the

2215
02:17:52,648 --> 02:17:58,978
sRGB stuff it should be at the end not

2216
02:17:56,340 --> 02:18:01,728
at the beginning I don't actually know

2217
02:17:58,978 --> 02:18:01,728
for doing that

2218
02:18:12,690 --> 02:18:24,659
so it looks like we're presumably doing

2219
02:18:17,218 --> 02:18:26,459
that because allow oh no we're not so we

2220
02:18:24,659 --> 02:18:32,369
are going down that path so that could

2221
02:18:26,459 --> 02:18:37,049
also be a problem but we got a lot of

2222
02:18:32,370 --> 02:18:39,210
graphic stuff we can clean up yeah so

2223
02:18:37,049 --> 02:18:41,009
we're using this our own square because

2224
02:18:39,209 --> 02:18:44,579
remember we have different values for

2225
02:18:41,010 --> 02:18:47,340
those at the moment we have different

2226
02:18:44,579 --> 02:18:50,149
values for the squares and square roots

2227
02:18:47,340 --> 02:18:50,149
and stuff like that

2228
02:18:59,309 --> 02:19:03,139
all right I'm gonna take a look now

2229
02:19:17,849 --> 02:19:23,790
there we go so that was just a quick

2230
02:19:20,760 --> 02:19:26,939
case of us like we'd we'd like sort of

2231
02:19:23,790 --> 02:19:28,619
futzed with the shader too much and so

2232
02:19:26,939 --> 02:19:29,880
we were doing this square square root

2233
02:19:28,619 --> 02:19:33,840
for srgb

2234
02:19:29,879 --> 02:19:35,278
like our fake srgb we were doing that in

2235
02:19:33,840 --> 02:19:36,988
like the totally wrong places because

2236
02:19:35,279 --> 02:19:38,488
just got moved around so much so we were

2237
02:19:36,988 --> 02:19:41,988
actually just completely throwing off

2238
02:19:38,488 --> 02:19:44,760
our calculations from that so there now

2239
02:19:41,988 --> 02:19:47,638
looks like the Alpha is correct and the

2240
02:19:44,760 --> 02:19:50,670
other fog stuff is correct so if I set

2241
02:19:47,638 --> 02:19:52,829
the fog to a rather extreme thing there

2242
02:19:50,670 --> 02:19:54,029
so there's just a lot of fog we can just

2243
02:19:52,829 --> 02:20:01,559
double-check that it always works

2244
02:19:54,029 --> 02:20:03,658
properly looks fine to me there's like

2245
02:20:01,559 --> 02:20:05,278
our lighting of course still has like

2246
02:20:03,658 --> 02:20:06,750
the little tiny region of lighting so

2247
02:20:05,279 --> 02:20:09,770
we're never going to see that be

2248
02:20:06,750 --> 02:20:09,770
completely correct but

2249
02:20:21,620 --> 02:20:31,910
so that was causing all of our colors to

2250
02:20:23,750 --> 02:20:36,398
be off a little bit right all right

2251
02:20:31,909 --> 02:20:36,398
woof well I'm glad we fixed that and

2252
02:20:54,819 --> 02:20:59,500
with that I think we are down we are

2253
02:20:57,859 --> 02:21:02,000
going to start the new year with

2254
02:20:59,500 --> 02:21:04,040
essentially no to dues on the list this

2255
02:21:02,000 --> 02:21:07,040
one is just one that we want to

2256
02:21:04,040 --> 02:21:09,920
re-enable when we get back to audio so I

2257
02:21:07,040 --> 02:21:12,200
think we're down to no bugs outstanding

2258
02:21:09,920 --> 02:21:14,780
that we wanted to fix in the short term

2259
02:21:12,200 --> 02:21:17,740
there so that's really good all right

2260
02:21:14,780 --> 02:21:17,739
I'll go do a brief Q&amp;A

2261
02:21:24,620 --> 02:21:26,649
Oh

2262
02:21:28,829 --> 02:21:40,780
what happened here mm-hmm

2263
02:21:37,430 --> 02:21:40,780
[Music]

2264
02:21:42,649 --> 02:21:47,659
is twitch messed up

2265
02:21:55,809 --> 02:21:59,869
well alright I guess that may be the end

2266
02:21:58,639 --> 02:22:16,459
of it I don't know if I can looks like

2267
02:21:59,870 --> 02:22:19,720
twitch went down or something so I don't

2268
02:22:16,459 --> 02:22:19,719
know let me ask on the chat

2269
02:22:30,898 --> 02:22:42,898
I'd like to do a QA but no one can hear

2270
02:22:34,209 --> 02:22:42,898
me twitch is dead

2271
02:22:46,069 --> 02:22:50,930
so I don't know I don't know why I can't

2272
02:22:48,409 --> 02:22:53,840
stream to twitch maybe the route to

2273
02:22:50,930 --> 02:22:55,819
twitch got got forked or maybe my

2274
02:22:53,840 --> 02:22:58,450
internet cup work but I can see the chat

2275
02:22:55,819 --> 02:22:58,449
just fine

2276
02:23:15,549 --> 02:23:20,988
hmm so yeah I don't know if we can do a

2277
02:23:18,529 --> 02:23:23,720
QA probably not if that's the situation

2278
02:23:20,988 --> 02:23:32,500
I'll try really briefly to see if I can

2279
02:23:23,719 --> 02:23:35,079
reconnect it but I'm not hopeful OBS I

2280
02:23:32,500 --> 02:23:38,359
don't even know if we can change that

2281
02:23:35,079 --> 02:23:40,658
online it can't yeah they can't change

2282
02:23:38,359 --> 02:23:40,658
that

2283
02:24:07,189 --> 02:24:13,648
well I guess I'll stop streaming and

2284
02:24:10,818 --> 02:24:16,350
we'll just call it a day there cuz I

2285
02:24:13,648 --> 02:24:18,599
can't figure out any way like OBS can't

2286
02:24:16,350 --> 02:24:20,158
switch servers in the middle of

2287
02:24:18,600 --> 02:24:22,738
streaming it doesn't allow you to do

2288
02:24:20,158 --> 02:24:29,068
that as far as I can tell so there's

2289
02:24:22,738 --> 02:24:31,379
really not anything else I can see so oh

2290
02:24:29,068 --> 02:24:32,760
well that may be our last name I don't

2291
02:24:31,379 --> 02:24:34,349
know maybe I could I don't know if I can

2292
02:24:32,760 --> 02:24:36,359
do have time for another one tonight but

2293
02:24:34,350 --> 02:24:38,130
thank you for trying to join me for

2294
02:24:36,359 --> 02:24:39,658
another episode of handmade hero I'm not

2295
02:24:38,129 --> 02:24:42,179
sure why twitch went down but twitch

2296
02:24:39,658 --> 02:24:43,618
sometimes does go down so you'll just

2297
02:24:42,180 --> 02:24:45,329
have to catch up with these on the video

2298
02:24:43,619 --> 02:24:47,569
on demand because it was still recording

2299
02:24:45,329 --> 02:24:51,270
so we have the recording just fine just

2300
02:24:47,568 --> 02:24:53,129
wasn't broadcast live that's it for

2301
02:24:51,270 --> 02:24:55,020
today and probably until we come back

2302
02:24:53,129 --> 02:24:57,839
from winter break so until the new year

2303
02:24:55,020 --> 02:24:58,829
have fun programming everyone and I'll

2304
02:24:57,840 --> 02:25:00,750
see you online

2305
02:24:58,829 --> 02:25:03,658
oh and obviously for those of you who

2306
02:25:00,750 --> 02:25:05,100
are new to the series if you happen to

2307
02:25:03,658 --> 02:25:06,359
want to follow along theories at home

2308
02:25:05,100 --> 02:25:07,770
you could always pre-order the game on

2309
02:25:06,359 --> 02:25:10,380
hand a hero duck we're gonna come to the

2310
02:25:07,770 --> 02:25:11,850
source code so you can follow along and

2311
02:25:10,379 --> 02:25:12,839
do some programming on your winter break

2312
02:25:11,850 --> 02:25:15,899
on and if you want to do some

2313
02:25:12,840 --> 02:25:17,609
experiments so that's it take it easy

2314
02:25:15,898 --> 02:25:19,849
everybody and I'll catch it in the new

2315
02:25:17,609 --> 02:25:19,850
year

