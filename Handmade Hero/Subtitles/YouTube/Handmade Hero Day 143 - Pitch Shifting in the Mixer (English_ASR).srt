1
00:00:02,029 --> 00:00:06,000
ok hello everyone and welcome to hand

2
00:00:04,589 --> 00:00:08,609
made here on the show we code a complete

3
00:00:06,000 --> 00:00:11,269
game live on stream no engines no

4
00:00:08,609 --> 00:00:14,638
libraries we cover at the complete

5
00:00:11,269 --> 00:00:16,379
complete range of game development here

6
00:00:14,638 --> 00:00:18,538
nothing is left out of the process so to

7
00:00:16,379 --> 00:00:21,060
matter what part of game development you

8
00:00:18,539 --> 00:00:24,600
are interested in we will cover it that

9
00:00:21,059 --> 00:00:27,179
is a guarantee that is just how we do

10
00:00:24,600 --> 00:00:28,890
things here and right now we are working

11
00:00:27,179 --> 00:00:31,649
on sound mixing we have already written

12
00:00:28,890 --> 00:00:33,960
our sound mixer we have already written

13
00:00:31,649 --> 00:00:36,750
some features for the sound mixer such

14
00:00:33,960 --> 00:00:38,640
as sound streaming we have already done

15
00:00:36,750 --> 00:00:42,000
volume interpolation we've done a lot of

16
00:00:38,640 --> 00:00:44,759
stuff in the past week it's been it's

17
00:00:42,000 --> 00:00:48,570
been a whirlwind it's true but what we

18
00:00:44,759 --> 00:00:50,519
have not done yet is allowed the person

19
00:00:48,570 --> 00:00:52,920
playing the sound the person requesting

20
00:00:50,520 --> 00:00:58,579
or cueing a sound we played to be able

21
00:00:52,920 --> 00:00:58,579
to set the frequency of that sound right

22
00:00:58,670 --> 00:01:05,010
so what we would like to do is we would

23
00:01:02,308 --> 00:01:07,379
like to have some ability for the

24
00:01:05,010 --> 00:01:09,659
frequency of the sound to be changed

25
00:01:07,379 --> 00:01:13,009
dynamically and let's talk a little bit

26
00:01:09,659 --> 00:01:16,080
about why you might want to do that so

27
00:01:13,010 --> 00:01:19,530
if you think about what happens in a

28
00:01:16,079 --> 00:01:22,650
game right so typically you know this

29
00:01:19,530 --> 00:01:24,689
this is sort of here we are on day 143

30
00:01:22,650 --> 00:01:27,540
so let me just put a little title up on

31
00:01:24,688 --> 00:01:30,000
there so if you think about what happens

32
00:01:27,540 --> 00:01:31,049
in a game a lot of times what we're

33
00:01:30,000 --> 00:01:34,109
talking about when we're talking about

34
00:01:31,049 --> 00:01:38,689
playing with sounds is a lot of times

35
00:01:34,109 --> 00:01:42,090
there are sort of triggers or events or

36
00:01:38,688 --> 00:01:44,849
periodic ambient events even that are

37
00:01:42,090 --> 00:01:48,060
trying to create some kind of an effect

38
00:01:44,849 --> 00:01:50,789
to reinforce an activity or an action

39
00:01:48,060 --> 00:01:52,890
right in a game and so examples of this

40
00:01:50,790 --> 00:01:56,250
might be you know I've got a little dude

41
00:01:52,890 --> 00:01:59,519
you know and the little dude is running

42
00:01:56,250 --> 00:02:01,649
around and whenever he jumps up into the

43
00:01:59,519 --> 00:02:03,658
air you know we want to play a jump

44
00:02:01,649 --> 00:02:05,968
sound or something like this or whenever

45
00:02:03,659 --> 00:02:09,840
his feet touch the ground we want to

46
00:02:05,968 --> 00:02:11,829
play a footstep sound right and so we've

47
00:02:09,840 --> 00:02:14,890
got all of these things that

48
00:02:11,830 --> 00:02:16,480
are being sort of fed into the sound

49
00:02:14,889 --> 00:02:19,029
system and the sound system is supposed

50
00:02:16,479 --> 00:02:20,169
to play sounds that reinforce these

51
00:02:19,030 --> 00:02:22,659
things that are going on and it's true

52
00:02:20,169 --> 00:02:24,489
even in ambient sense maybe you're in a

53
00:02:22,659 --> 00:02:27,310
place you know with with a tree or

54
00:02:24,490 --> 00:02:29,770
something like this right you know kind

55
00:02:27,310 --> 00:02:31,240
of the world's worst tree here all right

56
00:02:29,770 --> 00:02:33,219
don't plate okay you know what just

57
00:02:31,240 --> 00:02:35,320
forget there's not a tree I lied about

58
00:02:33,219 --> 00:02:36,969
that there's some kind of ambient thing

59
00:02:35,319 --> 00:02:38,409
going on I was gonna say like branches

60
00:02:36,969 --> 00:02:39,819
crackling or something but the tree was

61
00:02:38,409 --> 00:02:42,310
so ugly that I felt I had to come back

62
00:02:39,819 --> 00:02:44,829
from that you know what here we go let's

63
00:02:42,310 --> 00:02:47,740
let's let's go with a pine tree that

64
00:02:44,830 --> 00:02:50,920
should be a little easier on the on the

65
00:02:47,740 --> 00:02:52,540
art skills there so you know we've got a

66
00:02:50,919 --> 00:02:54,549
little tree here and the tree is going

67
00:02:52,539 --> 00:02:56,439
to like sway back and forth and so we

68
00:02:54,550 --> 00:02:58,719
want to do is place them like branches

69
00:02:56,439 --> 00:03:00,609
crackling as well right so that's not

70
00:02:58,719 --> 00:03:01,750
really an active thing that's that's

71
00:03:00,610 --> 00:03:03,070
necessary happening but we've got like

72
00:03:01,750 --> 00:03:04,539
sort of this forest theme and there's

73
00:03:03,069 --> 00:03:06,969
going to be some branches crackling

74
00:03:04,539 --> 00:03:08,650
branch and sounds or something right so

75
00:03:06,969 --> 00:03:10,810
all of these things are going into the

76
00:03:08,650 --> 00:03:12,760
sound system and of course in a perfect

77
00:03:10,810 --> 00:03:14,979
world we would just have some way of

78
00:03:12,759 --> 00:03:16,359
generating a footstep sound all the time

79
00:03:14,979 --> 00:03:19,319
that was unique and different and

80
00:03:16,360 --> 00:03:22,110
interesting and all these other things

81
00:03:19,319 --> 00:03:24,489
but the reality of game development is

82
00:03:22,110 --> 00:03:26,800
it often times there's a fixed budget

83
00:03:24,489 --> 00:03:28,150
and that budget may be determined by how

84
00:03:26,800 --> 00:03:29,920
much you can afford to pay to have the

85
00:03:28,150 --> 00:03:31,900
sounds created that budget may be

86
00:03:29,919 --> 00:03:34,719
dictated by how long it takes to process

87
00:03:31,900 --> 00:03:36,459
the sounds and put them into production

88
00:03:34,719 --> 00:03:39,039
use or something like this it may be

89
00:03:36,459 --> 00:03:41,319
based on how much room you have on a

90
00:03:39,039 --> 00:03:42,879
console for storing the sounds it may be

91
00:03:41,319 --> 00:03:45,370
based on your download equipment there's

92
00:03:42,879 --> 00:03:48,810
all kinds of reasons why you can't just

93
00:03:45,370 --> 00:03:50,739
have eight billion footstep sounds

94
00:03:48,810 --> 00:03:52,000
unless of course you're the witness and

95
00:03:50,739 --> 00:03:55,300
dedicate your entire budget footsteps

96
00:03:52,000 --> 00:03:58,150
downs but most of the time you talk

97
00:03:55,300 --> 00:04:01,209
about limited space so maybe you have

98
00:03:58,150 --> 00:04:03,189
five footstep sounds let's say right for

99
00:04:01,209 --> 00:04:06,909
running on a particular thing like grass

100
00:04:03,189 --> 00:04:09,250
right so I have grass footsteps and I

101
00:04:06,909 --> 00:04:12,459
have five grass footsteps well if I have

102
00:04:09,250 --> 00:04:13,840
five graphs footstep sounds and I play

103
00:04:12,459 --> 00:04:16,180
them over and over again so as the guys

104
00:04:13,840 --> 00:04:19,060
running he's taking you know you know at

105
00:04:16,180 --> 00:04:22,600
least two or three steps a second did it

106
00:04:19,060 --> 00:04:25,079
right i am going to hear the same grass

107
00:04:22,600 --> 00:04:28,889
footsteps sound many many

108
00:04:25,079 --> 00:04:31,139
times a minute right and that that sort

109
00:04:28,889 --> 00:04:32,728
of repetitive nature of that sound can

110
00:04:31,139 --> 00:04:33,750
get very grating especially in a

111
00:04:32,728 --> 00:04:36,269
circumstance where you're trying to

112
00:04:33,750 --> 00:04:39,019
create a realistic sounding soundscape

113
00:04:36,269 --> 00:04:40,948
as opposed to perhaps a gamey sounding

114
00:04:39,019 --> 00:04:44,668
soundscape like you know if you were

115
00:04:40,949 --> 00:04:45,900
trying to evoke an old arcade game this

116
00:04:44,668 --> 00:04:47,459
would not be concerned because they were

117
00:04:45,899 --> 00:04:49,408
supposed to have repetitive sounds if

118
00:04:47,459 --> 00:04:51,029
you're trying to evoke a realistic

119
00:04:49,408 --> 00:04:55,319
outdoor scene of some kind or some like

120
00:04:51,029 --> 00:04:56,728
this not so good right and so one of the

121
00:04:55,319 --> 00:04:58,379
things we could vary would be the volume

122
00:04:56,728 --> 00:04:59,639
certainly because our mixer has the

123
00:04:58,379 --> 00:05:01,500
ability to vary the volume so at least

124
00:04:59,639 --> 00:05:03,150
then we add a little more variability as

125
00:05:01,500 --> 00:05:04,620
the footsteps go there's some very

126
00:05:03,149 --> 00:05:05,939
instant volume so addition to five

127
00:05:04,620 --> 00:05:08,098
different footstep sounds that might

128
00:05:05,939 --> 00:05:10,709
trigger on this grass we have some

129
00:05:08,098 --> 00:05:13,439
volume but what would be nice is if we

130
00:05:10,709 --> 00:05:15,359
had a little more range to play with

131
00:05:13,439 --> 00:05:17,278
there and so that's really where

132
00:05:15,360 --> 00:05:19,919
frequency modulation I'm pretty much is

133
00:05:17,278 --> 00:05:22,050
good frequency modification comes in

134
00:05:19,918 --> 00:05:24,180
where we can sort of pitch shift our

135
00:05:22,050 --> 00:05:25,528
footsteps a little bit up you know a

136
00:05:24,180 --> 00:05:28,439
couple half steps or down a couple half

137
00:05:25,528 --> 00:05:30,509
steps or semitones as they're called not

138
00:05:28,439 --> 00:05:32,550
talking about huge frequency shifts here

139
00:05:30,509 --> 00:05:34,560
but we're just talking about if a sound

140
00:05:32,550 --> 00:05:36,000
is a particular pitch maybe pitch

141
00:05:34,560 --> 00:05:39,050
shifting it up a little bit pitch

142
00:05:36,000 --> 00:05:41,728
shifting it down just a little bit right

143
00:05:39,050 --> 00:05:43,918
we'd like to have that in there as

144
00:05:41,728 --> 00:05:45,899
another way to get variability out of

145
00:05:43,918 --> 00:05:48,060
our sound state and in some cases we may

146
00:05:45,899 --> 00:05:49,560
even tie that variability to something

147
00:05:48,060 --> 00:05:51,718
in the game that the player can proceed

148
00:05:49,560 --> 00:05:53,788
so for example maybe you know a boss

149
00:05:51,718 --> 00:05:56,158
monster as you hit them and they take

150
00:05:53,788 --> 00:05:58,709
more damage the frequency of the impact

151
00:05:56,158 --> 00:06:00,598
goes down or up so you can hear a little

152
00:05:58,709 --> 00:06:02,489
bit of feedback as to how you hit them

153
00:06:00,598 --> 00:06:06,240
or who knows right you can think of

154
00:06:02,490 --> 00:06:09,960
reasons why in addition to just creating

155
00:06:06,240 --> 00:06:12,778
a less repetitive soundscape that

156
00:06:09,959 --> 00:06:15,299
frequency can be a nice easy way for you

157
00:06:12,778 --> 00:06:17,009
to put more interactivity into the

158
00:06:15,300 --> 00:06:20,848
soundscape than if all you had was

159
00:06:17,009 --> 00:06:22,379
volume right and so these two things are

160
00:06:20,848 --> 00:06:23,939
pretty nice things to have in a mixer

161
00:06:22,379 --> 00:06:26,729
all told and they're pretty easy things

162
00:06:23,939 --> 00:06:29,158
to add so that's why I focus them on

163
00:06:26,728 --> 00:06:30,838
them as things that I think if you were

164
00:06:29,158 --> 00:06:32,519
talking about a sound system it's

165
00:06:30,838 --> 00:06:33,598
probably worth your while to implement

166
00:06:32,519 --> 00:06:34,978
these because you'll get a lot of

167
00:06:33,598 --> 00:06:37,050
mileage out of them that other things

168
00:06:34,978 --> 00:06:38,709
you might not get very much mileage out

169
00:06:37,050 --> 00:06:40,329
of such as like all kinds of advanced

170
00:06:38,709 --> 00:06:41,829
filters or something like this because

171
00:06:40,329 --> 00:06:43,449
you may just not have a lot of cases to

172
00:06:41,829 --> 00:06:45,550
use them but I think almost every game

173
00:06:43,449 --> 00:06:47,709
pretty much uniformly can get a lot of

174
00:06:45,550 --> 00:06:55,329
mileage out of volume and frequency to

175
00:06:47,709 --> 00:06:57,479
be sure so I guess what I'm saying is

176
00:06:55,329 --> 00:07:01,569
there bang for the buck is pretty high

177
00:06:57,480 --> 00:07:05,140
so okay so if we have a sound right

178
00:07:01,569 --> 00:07:09,129
we've talked about how the distance

179
00:07:05,139 --> 00:07:11,199
between peaks in the sound right so

180
00:07:09,129 --> 00:07:13,329
basically this wavelength here right

181
00:07:11,199 --> 00:07:16,240
this is the wavelength of the sound if

182
00:07:13,329 --> 00:07:18,219
you will this sort of peak to peak

183
00:07:16,240 --> 00:07:19,870
measurement you could also think of a

184
00:07:18,220 --> 00:07:22,630
half wavelength as being like peak to

185
00:07:19,870 --> 00:07:24,670
trough or something the speed at which

186
00:07:22,629 --> 00:07:27,219
that is occurring in time right this is

187
00:07:24,670 --> 00:07:28,569
time determines the pitch of the sound

188
00:07:27,220 --> 00:07:31,480
right so it doesn't really even matter

189
00:07:28,569 --> 00:07:33,909
what the crazy waveform is it's the

190
00:07:31,480 --> 00:07:35,230
speed of the oscillations contained in

191
00:07:33,910 --> 00:07:36,730
that waveform and there may be many of

192
00:07:35,230 --> 00:07:40,950
them overlapping right we discussed the

193
00:07:36,730 --> 00:07:43,180
fact how they add but those overlapping

194
00:07:40,949 --> 00:07:46,209
oscillations are what your ear perceives

195
00:07:43,180 --> 00:07:47,439
as pitches each individual one having

196
00:07:46,209 --> 00:07:50,229
certain pitches and there's pitches that

197
00:07:47,439 --> 00:07:51,850
evolve over time and so on so what we

198
00:07:50,230 --> 00:07:54,340
want to do if we want to change the

199
00:07:51,850 --> 00:07:56,770
pitch of a sound is we want to speed up

200
00:07:54,339 --> 00:07:59,229
or slow down the rate of those

201
00:07:56,769 --> 00:08:01,389
oscillations so the distance between

202
00:07:59,230 --> 00:08:04,930
these two things we want in time to

203
00:08:01,389 --> 00:08:06,930
become shorter right or longer and if it

204
00:08:04,930 --> 00:08:09,519
becomes longer that will shift it down

205
00:08:06,930 --> 00:08:12,189
in pitch and if it becomes shorter that

206
00:08:09,519 --> 00:08:14,439
will shift it up to pitch that's just

207
00:08:12,189 --> 00:08:15,639
fundamentally how the sound worked as we

208
00:08:14,439 --> 00:08:21,969
discussed on the episode where I

209
00:08:15,639 --> 00:08:23,800
introduce sound a couple days ago so as

210
00:08:21,970 --> 00:08:25,960
I said on that episode and I'll just

211
00:08:23,800 --> 00:08:27,639
remind you quickly of it won't belabor

212
00:08:25,959 --> 00:08:29,859
the point here there are a couple

213
00:08:27,639 --> 00:08:31,180
different ways to do this some of them

214
00:08:29,860 --> 00:08:32,919
are very very expensive and they're

215
00:08:31,180 --> 00:08:35,440
designed for purposes where you're

216
00:08:32,919 --> 00:08:37,990
trying to do large-scale pitch changes

217
00:08:35,440 --> 00:08:40,900
without changing the amount of time the

218
00:08:37,990 --> 00:08:43,029
sound actually takes right so you have a

219
00:08:40,899 --> 00:08:45,970
sound that's one second long in duration

220
00:08:43,029 --> 00:08:47,649
when it's a certain pitch and you want

221
00:08:45,970 --> 00:08:49,600
to shift it up in pitch but have it take

222
00:08:47,649 --> 00:08:51,860
the same amount of time okay that's a

223
00:08:49,600 --> 00:08:54,259
fairly complex operation

224
00:08:51,860 --> 00:08:55,759
there's multiple ways of doing it the

225
00:08:54,259 --> 00:08:57,828
traditional signal processing ways and

226
00:08:55,759 --> 00:09:00,679
wavelet ways are kind of crappy there's

227
00:08:57,828 --> 00:09:02,239
newer ways now such as like cylindrical

228
00:09:00,679 --> 00:09:05,689
resampling and stuff like this that are

229
00:09:02,240 --> 00:09:08,180
way way better but sort of less

230
00:09:05,690 --> 00:09:10,100
well-trod but point being they're very

231
00:09:08,179 --> 00:09:12,169
much more complicated they're much more

232
00:09:10,100 --> 00:09:13,490
involved than what we're doing they're

233
00:09:12,169 --> 00:09:15,439
not prohibitively so but they're much

234
00:09:13,490 --> 00:09:17,389
more involved thankfully you don't

235
00:09:15,440 --> 00:09:19,130
actually need any of those for the kinds

236
00:09:17,389 --> 00:09:21,740
of pitch shifts we are talking

237
00:09:19,129 --> 00:09:23,570
about we're talking about just minor

238
00:09:21,740 --> 00:09:25,879
pitch changes and for minor pitch

239
00:09:23,570 --> 00:09:27,200
changes we don't care if the sound gets

240
00:09:25,879 --> 00:09:28,639
a little longer a little shorter because

241
00:09:27,200 --> 00:09:30,709
it'll still be roughly you know if it

242
00:09:28,639 --> 00:09:32,480
took a second now maybe it takes 1.1

243
00:09:30,708 --> 00:09:33,949
seconds we don't really care we'd only

244
00:09:32,480 --> 00:09:36,528
care if the footstep sounds sounds a

245
00:09:33,950 --> 00:09:37,820
little bit longer right because you

246
00:09:36,528 --> 00:09:38,990
really won't perceive that difference in

247
00:09:37,820 --> 00:09:41,709
practice you'll just hear the pitch

248
00:09:38,990 --> 00:09:44,450
being a little bit different so for that

249
00:09:41,708 --> 00:09:46,489
what we're going to do here is totally

250
00:09:44,450 --> 00:09:49,220
fine which is just playing the sound

251
00:09:46,490 --> 00:09:51,139
itself back faster or slower and so

252
00:09:49,220 --> 00:09:53,600
fundamentally the thing that we have to

253
00:09:51,139 --> 00:09:56,208
do is you know we've got a sound that's

254
00:09:53,600 --> 00:09:57,860
represented digitally so you know we're

255
00:09:56,208 --> 00:10:00,018
saying that this move wave form but

256
00:09:57,860 --> 00:10:02,300
actually right we only really know about

257
00:10:00,019 --> 00:10:05,000
the waveform as a series of sample

258
00:10:02,299 --> 00:10:08,328
points where it crosses fixed slices

259
00:10:05,000 --> 00:10:09,769
oops in time right and we're sort of

260
00:10:08,328 --> 00:10:11,359
thinking about it just as these samples

261
00:10:09,769 --> 00:10:12,919
these are the samples of the sound right

262
00:10:11,360 --> 00:10:15,259
we have a sample buffer right it's

263
00:10:12,919 --> 00:10:17,059
filled with in 16s those in six teens

264
00:10:15,259 --> 00:10:20,750
are encoded by thinking about where a

265
00:10:17,059 --> 00:10:22,458
waveform passes through vertical lines

266
00:10:20,750 --> 00:10:25,070
and time instants in time at this

267
00:10:22,458 --> 00:10:27,109
instant in time where would the waveform

268
00:10:25,070 --> 00:10:28,699
be those go into our sound buffer that

269
00:10:27,110 --> 00:10:31,039
is our sound we play back what that

270
00:10:28,698 --> 00:10:32,750
means is that if we want to play back

271
00:10:31,039 --> 00:10:35,179
the sound at a different rate we do not

272
00:10:32,750 --> 00:10:39,009
have the luxury of simply resampling

273
00:10:35,179 --> 00:10:41,838
this curve at whatever rate we want

274
00:10:39,009 --> 00:10:44,929
because we do not know what the curve

275
00:10:41,839 --> 00:10:48,370
actually is we don't have the curve we

276
00:10:44,929 --> 00:10:48,370
just have samples

277
00:10:49,089 --> 00:10:55,259
those samples do not represent an actual

278
00:10:52,360 --> 00:10:58,480
curve they represent just a piecewise

279
00:10:55,259 --> 00:10:59,889
linear sort of approximation of that

280
00:10:58,480 --> 00:11:01,629
curve right if we looked at them this

281
00:10:59,889 --> 00:11:04,058
way it's only once they are

282
00:11:01,629 --> 00:11:06,009
reconstructed by a speaker that they

283
00:11:04,058 --> 00:11:09,759
turn into something that approximates

284
00:11:06,009 --> 00:11:11,470
the actual oscillating sounds and there

285
00:11:09,759 --> 00:11:13,329
are artifacts even that happened when

286
00:11:11,470 --> 00:11:14,620
you do that given the fixed sampling

287
00:11:13,328 --> 00:11:16,359
frequency and that gets into a lot of

288
00:11:14,620 --> 00:11:18,519
signal processing kind of nonsense that

289
00:11:16,360 --> 00:11:19,749
we probably don't need to cover here and

290
00:11:18,519 --> 00:11:21,100
I'm the wrong one to talk about it

291
00:11:19,749 --> 00:11:24,370
anyway because I am far from a signal

292
00:11:21,100 --> 00:11:25,990
processing guy but the point is looking

293
00:11:24,370 --> 00:11:28,959
at this function right all we really

294
00:11:25,990 --> 00:11:31,959
have is this piecewise linear version of

295
00:11:28,958 --> 00:11:33,849
it that's all we know and so you know if

296
00:11:31,958 --> 00:11:35,349
we wanted to do a smooth resampling of

297
00:11:33,850 --> 00:11:37,870
it as if it was a curve we'd have to try

298
00:11:35,350 --> 00:11:39,909
and guess about what that upsampling

299
00:11:37,870 --> 00:11:41,409
might look at and there's actually ways

300
00:11:39,909 --> 00:11:42,999
you can do some things because it is

301
00:11:41,409 --> 00:11:44,919
sound where you can up sample in

302
00:11:42,999 --> 00:11:47,079
slightly better ways but since we are

303
00:11:44,919 --> 00:11:49,149
pitch shifting such a small amount it

304
00:11:47,078 --> 00:11:51,969
actually is fine for our purposes to

305
00:11:49,149 --> 00:11:53,980
assume that we have this piecewise

306
00:11:51,970 --> 00:11:55,778
linear version and just resample at the

307
00:11:53,980 --> 00:11:57,579
peace lies points now I know signal

308
00:11:55,778 --> 00:11:58,778
processing people are probably horrified

309
00:11:57,578 --> 00:12:02,458
at that because it's not really the

310
00:11:58,778 --> 00:12:05,169
signal processing Lee pure way to do it

311
00:12:02,458 --> 00:12:08,558
but again for small pitch shift it works

312
00:12:05,169 --> 00:12:11,139
really well it's very very quick and

313
00:12:08,558 --> 00:12:13,269
easy to write the code for it so it's

314
00:12:11,139 --> 00:12:16,269
good for a real-time mixer that we don't

315
00:12:13,269 --> 00:12:17,889
want to spend a lot of time we don't

316
00:12:16,269 --> 00:12:20,948
want to take a lot of CPU time doing its

317
00:12:17,889 --> 00:12:24,519
work it's pretty handy for that so what

318
00:12:20,948 --> 00:12:26,498
we want to do now in the code is rather

319
00:12:24,519 --> 00:12:28,568
than playing back sounds by just

320
00:12:26,499 --> 00:12:30,639
outputting those fixed slices in time

321
00:12:28,568 --> 00:12:32,198
like we were doing before we would like

322
00:12:30,639 --> 00:12:34,928
to make something where we can actually

323
00:12:32,198 --> 00:12:37,958
do a lot basically the same thing we did

324
00:12:34,928 --> 00:12:42,578
with the bilinear filtering in the end

325
00:12:37,958 --> 00:12:44,378
images like we did for our rasterizer we

326
00:12:42,578 --> 00:12:46,870
want to do the same thing here only

327
00:12:44,379 --> 00:12:48,308
because we only have one dimensional

328
00:12:46,870 --> 00:12:50,528
data instead of two dimensional data

329
00:12:48,308 --> 00:12:52,360
instead of a bilinear filter it's just a

330
00:12:50,528 --> 00:12:54,789
straight linear filter so you remember

331
00:12:52,360 --> 00:12:57,339
for pixels we were trying to interpolate

332
00:12:54,789 --> 00:12:59,198
between four corners right we were

333
00:12:57,339 --> 00:13:01,029
trying to say like we want this and so

334
00:12:59,198 --> 00:13:01,609
what we did is we interpolated to here

335
00:13:01,028 --> 00:13:03,500
and here

336
00:13:01,610 --> 00:13:05,209
first and then we interpolate it between

337
00:13:03,500 --> 00:13:07,278
those two to get this that's why it's

338
00:13:05,208 --> 00:13:09,528
called a bilinear filter right is

339
00:13:07,278 --> 00:13:12,019
because there's two right there's two

340
00:13:09,528 --> 00:13:13,850
steps first we do a filter to produce

341
00:13:12,019 --> 00:13:16,250
new points and then we do a new one

342
00:13:13,850 --> 00:13:18,740
right it's like it's two stages of a

343
00:13:16,250 --> 00:13:21,259
linear filter rather than a single stage

344
00:13:18,740 --> 00:13:22,370
this we only have two things to begin

345
00:13:21,259 --> 00:13:23,958
with so we're just talking about

346
00:13:22,370 --> 00:13:26,240
straight linear filter we're just doing

347
00:13:23,958 --> 00:13:28,129
that first one and you remember I said

348
00:13:26,240 --> 00:13:32,690
at the beginning of the series I'll say

349
00:13:28,129 --> 00:13:39,049
it again that you know p prime equals 1

350
00:13:32,690 --> 00:13:41,180
minus T p0 plus tp1 that Universal blend

351
00:13:39,049 --> 00:13:43,338
linear blend equation that comes up over

352
00:13:41,179 --> 00:13:45,199
and over and over again i think i said

353
00:13:43,339 --> 00:13:47,510
something like if you only had one

354
00:13:45,200 --> 00:13:49,519
equation that you could take with you to

355
00:13:47,509 --> 00:13:51,620
a desert island for programming it is

356
00:13:49,519 --> 00:13:53,419
the one because man it is just the

357
00:13:51,620 --> 00:13:55,879
building block of everything in games

358
00:13:53,419 --> 00:13:57,828
that we do because it is a perceptive

359
00:13:55,879 --> 00:14:00,139
medium and linear blending does so many

360
00:13:57,828 --> 00:14:03,799
important things for people's perception

361
00:14:00,139 --> 00:14:05,838
of what's going on so you know that is

362
00:14:03,799 --> 00:14:07,129
that is really the thing it's going to

363
00:14:05,839 --> 00:14:09,290
come back here because we're doing

364
00:14:07,129 --> 00:14:10,820
exactly that same thing that first step

365
00:14:09,289 --> 00:14:12,708
this blend right here we're just doing

366
00:14:10,820 --> 00:14:15,110
the same exact thing for sound so what

367
00:14:12,708 --> 00:14:19,458
we want to do is be able to produce a

368
00:14:15,110 --> 00:14:21,409
floating-point version of where we

369
00:14:19,458 --> 00:14:22,969
believe ourselves to be in the sound we

370
00:14:21,409 --> 00:14:24,350
want to do the exact same thing we were

371
00:14:22,970 --> 00:14:27,139
doing with the bilinear filter where we

372
00:14:24,350 --> 00:14:30,470
floor and ceiling it to get the two

373
00:14:27,139 --> 00:14:33,289
locations that we would like to talk

374
00:14:30,470 --> 00:14:34,820
about right we will then figure out what

375
00:14:33,289 --> 00:14:37,219
the samples are at those two locations

376
00:14:34,820 --> 00:14:39,890
and interpolate between them based on

377
00:14:37,220 --> 00:14:45,430
the fractional amount that's left over

378
00:14:39,889 --> 00:14:45,429
after doing that that floor operation

379
00:14:46,059 --> 00:14:53,059
okay so that's really what we're talking

380
00:14:49,820 --> 00:14:55,010
about that's all we're trying to do and

381
00:14:53,059 --> 00:14:58,939
so what we want to do is make that

382
00:14:55,009 --> 00:15:02,149
happen and again nothing at like

383
00:14:58,940 --> 00:15:03,589
literally zero nothing that we do here

384
00:15:02,149 --> 00:15:05,480
will be different from what we already

385
00:15:03,589 --> 00:15:07,910
did in the rasterizer it's just a

386
00:15:05,480 --> 00:15:10,159
simpler case because now we're instead

387
00:15:07,909 --> 00:15:12,289
of having to do square blends we're

388
00:15:10,159 --> 00:15:14,969
doing just lying blends

389
00:15:12,289 --> 00:15:16,559
so once we have that once we have the

390
00:15:14,970 --> 00:15:19,350
ability to take a sample at an arbitrary

391
00:15:16,559 --> 00:15:21,059
place in a sound rather than having to

392
00:15:19,350 --> 00:15:23,759
only take samples at these predefined

393
00:15:21,059 --> 00:15:25,649
points then we have the complete freedom

394
00:15:23,759 --> 00:15:27,990
to change the speed at which the sound

395
00:15:25,649 --> 00:15:30,419
plays back because instead of doing

396
00:15:27,990 --> 00:15:33,240
something where like T plus equals one

397
00:15:30,419 --> 00:15:36,059
sample right basically every time we can

398
00:15:33,240 --> 00:15:39,750
just do t plus equals you know X samples

399
00:15:36,059 --> 00:15:42,028
where X is any value like 1.2 0.9

400
00:15:39,750 --> 00:15:43,860
whatever we want right and so that will

401
00:15:42,028 --> 00:15:46,528
allow us to change the pitch of the

402
00:15:43,860 --> 00:15:48,570
sound by changing its duration and again

403
00:15:46,528 --> 00:15:52,350
if we just keep that to a pretty limited

404
00:15:48,570 --> 00:15:54,270
range of pitch bending then we won't

405
00:15:52,350 --> 00:15:56,580
really hear any objectionable problems

406
00:15:54,269 --> 00:15:58,019
to that because the length of the sound

407
00:15:56,580 --> 00:16:05,879
won't be changing appreciative

408
00:15:58,019 --> 00:16:10,019
appreciably all right so let's get

409
00:16:05,879 --> 00:16:11,669
started again today is day 143 so if you

410
00:16:10,019 --> 00:16:13,528
would like to follow along at home with

411
00:16:11,669 --> 00:16:16,319
the source code if you have pre-ordered

412
00:16:13,528 --> 00:16:17,820
the game on handmade hero org you should

413
00:16:16,320 --> 00:16:20,190
be able to download the source zip

414
00:16:17,820 --> 00:16:25,230
inside there is all the days and so day

415
00:16:20,190 --> 00:16:27,690
143 is what we're on today unzip day 142

416
00:16:25,230 --> 00:16:30,089
as the source code and that is what I've

417
00:16:27,690 --> 00:16:33,120
got here so if you want to match up with

418
00:16:30,089 --> 00:16:34,680
me that's what you want to use okay

419
00:16:33,120 --> 00:16:42,740
let's get rid of that let's get a

420
00:16:34,679 --> 00:16:49,859
command prompt up here and all right so

421
00:16:42,740 --> 00:16:52,110
let's go ahead in here and start by yeah

422
00:16:49,860 --> 00:16:56,580
loading up our audio mixer and taking

423
00:16:52,110 --> 00:16:59,430
stock of where we are at so the first

424
00:16:56,580 --> 00:17:02,879
thing we could do right to get started

425
00:16:59,429 --> 00:17:05,428
with this is that if you remember what

426
00:17:02,879 --> 00:17:06,959
we did in the case of the violin you're

427
00:17:05,429 --> 00:17:09,870
blending for rasterization you remember

428
00:17:06,959 --> 00:17:12,000
the first thing we did is just not do it

429
00:17:09,869 --> 00:17:13,828
instead of doing bilinear to make that

430
00:17:12,000 --> 00:17:15,630
nice smooth effect that doesn't so you

431
00:17:13,828 --> 00:17:18,928
don't see the oval crispy little jumpy

432
00:17:15,630 --> 00:17:20,370
lines and stuff we just first started

433
00:17:18,929 --> 00:17:22,140
out with saying you know what doesn't

434
00:17:20,369 --> 00:17:24,719
matter let's just do a point sample

435
00:17:22,140 --> 00:17:25,950
we'll just sample it at the nearest

436
00:17:24,720 --> 00:17:27,269
place

437
00:17:25,950 --> 00:17:29,460
and we'll just use that to get things

438
00:17:27,269 --> 00:17:31,279
started and then we implemented by

439
00:17:29,460 --> 00:17:33,539
linear to make a nice smooth clean

440
00:17:31,279 --> 00:17:35,099
version after that so we can do the

441
00:17:33,539 --> 00:17:37,230
exact same thing here what we can do is

442
00:17:35,099 --> 00:17:39,359
we can start by actually writing it so

443
00:17:37,230 --> 00:17:42,029
that we do use the floating point

444
00:17:39,359 --> 00:17:44,069
location in the sound to pick where we

445
00:17:42,029 --> 00:17:46,289
are reading from so we can change its

446
00:17:44,069 --> 00:17:48,929
speed overall but we will just pick the

447
00:17:46,289 --> 00:17:50,879
closest sample rather than actually

448
00:17:48,930 --> 00:17:53,070
interpolating and that should in theory

449
00:17:50,880 --> 00:17:56,460
anyway lead to some objectionable

450
00:17:53,069 --> 00:17:57,990
artifacts that we could hear you know

451
00:17:56,460 --> 00:17:59,490
maybe it will maybe well it depends on

452
00:17:57,990 --> 00:18:01,289
the sound certainly but hopefully we can

453
00:17:59,490 --> 00:18:02,730
hear them and then we can implement the

454
00:18:01,289 --> 00:18:11,809
linear filtering which will take them

455
00:18:02,730 --> 00:18:15,000
away okay so let's go ahead and do that

456
00:18:11,809 --> 00:18:18,019
let's go ahead and take our handmade

457
00:18:15,000 --> 00:18:20,130
audio here and say that a playing sound

458
00:18:18,019 --> 00:18:23,220
sample played first thing we're going to

459
00:18:20,130 --> 00:18:25,920
do is upgrade that instead of being an

460
00:18:23,220 --> 00:18:28,380
in 32 which is the sample count we are

461
00:18:25,920 --> 00:18:30,360
actually going to make that a real 32 so

462
00:18:28,380 --> 00:18:34,740
it knows kind of where it is in the

463
00:18:30,359 --> 00:18:36,869
samples more specifically right so let's

464
00:18:34,740 --> 00:18:38,970
go ahead and fix sort of the the

465
00:18:36,869 --> 00:18:40,589
warnings that we will get there so in

466
00:18:38,970 --> 00:18:42,690
terms of samples remaining in sound all

467
00:18:40,589 --> 00:18:45,419
we have to do there is do our round real

468
00:18:42,690 --> 00:18:48,990
32 2 in 32 right in this place which

469
00:18:45,420 --> 00:18:52,140
will round out that samples and then the

470
00:18:48,990 --> 00:18:57,059
same thing would be true here right i

471
00:18:52,140 --> 00:18:58,860
drowned it out again there we go and you

472
00:18:57,059 --> 00:19:05,730
know I could do something as well like

473
00:18:58,859 --> 00:19:08,159
first sample oops s32 first sample index

474
00:19:05,730 --> 00:19:13,860
and that sample index I could just take

475
00:19:08,160 --> 00:19:18,480
this way first sample index like so and

476
00:19:13,859 --> 00:19:20,159
then down here first sample index and

477
00:19:18,480 --> 00:19:24,000
since it only gets updated at the very

478
00:19:20,160 --> 00:19:26,700
end right it should not be a problem so

479
00:19:24,000 --> 00:19:29,509
samples played is never touched anywhere

480
00:19:26,700 --> 00:19:31,120
else right so it should be all good

481
00:19:29,509 --> 00:19:34,200
right

482
00:19:31,119 --> 00:19:36,819
and this guy needs to use it as well so

483
00:19:34,200 --> 00:19:39,460
okay so if i do that nothing should

484
00:19:36,819 --> 00:19:52,599
change we should still have the same

485
00:19:39,460 --> 00:19:54,039
thing we had before right oh good so now

486
00:19:52,599 --> 00:19:57,369
what we want to do is say all right

487
00:19:54,039 --> 00:20:04,569
let's allow that to be modified by some

488
00:19:57,369 --> 00:20:08,469
other amount than just one person so if

489
00:20:04,569 --> 00:20:11,019
we do that what we need to do in here

490
00:20:08,470 --> 00:20:14,200
right we can no longer just say sample

491
00:20:11,019 --> 00:20:15,700
index and this for I loop obviously is

492
00:20:14,200 --> 00:20:17,740
going to look a little bit different

493
00:20:15,700 --> 00:20:20,500
right so we actually want to do here is

494
00:20:17,740 --> 00:20:22,960
we want to say that the sample index now

495
00:20:20,500 --> 00:20:25,359
is actually going to be a real 32 right

496
00:20:22,960 --> 00:20:29,679
and what we want to do is just go ahead

497
00:20:25,359 --> 00:20:32,259
and take that out now I guess I probably

498
00:20:29,679 --> 00:20:33,429
should have not actually pulled it out

499
00:20:32,259 --> 00:20:35,440
here I thought I was doing a helpful

500
00:20:33,429 --> 00:20:37,570
thing that doesn't look like I actually

501
00:20:35,440 --> 00:20:39,700
was anyway we have real 32 the sample

502
00:20:37,569 --> 00:20:43,178
index we want to go ahead and make sure

503
00:20:39,700 --> 00:20:44,950
that that stays kind of looking within

504
00:20:43,179 --> 00:20:47,290
bounds there so we're going to still

505
00:20:44,950 --> 00:20:48,910
clamp it that way and then when we do

506
00:20:47,289 --> 00:20:51,940
our sample index what we'd like to do

507
00:20:48,910 --> 00:20:53,650
here is we'd like to do an accumulator

508
00:20:51,940 --> 00:20:54,700
I'm going to move it out of the for loop

509
00:20:53,650 --> 00:20:56,470
just for now I'm going to put it down

510
00:20:54,700 --> 00:21:00,580
here so when we can see that we do

511
00:20:56,470 --> 00:21:03,009
volume we can also do d sample right and

512
00:21:00,579 --> 00:21:04,928
then d sample is something we can just

513
00:21:03,009 --> 00:21:08,140
set for the now to equal to 1 point 0

514
00:21:04,929 --> 00:21:09,730
and that should be good so now what we

515
00:21:08,140 --> 00:21:12,550
need to do is figure out what sample

516
00:21:09,730 --> 00:21:16,360
index were actually on and so this is

517
00:21:12,549 --> 00:21:19,000
going to be something more like this is

518
00:21:16,359 --> 00:21:20,859
like a sample position really right it's

519
00:21:19,000 --> 00:21:23,529
not really a sample index anymore at the

520
00:21:20,859 --> 00:21:26,678
sample position and so the sample index

521
00:21:23,529 --> 00:21:29,500
is actually going to have to come from

522
00:21:26,679 --> 00:21:30,790
doing that round right and then we

523
00:21:29,500 --> 00:21:35,920
actually have a sample enix that we can

524
00:21:30,789 --> 00:21:39,940
use to look things up now oops get that

525
00:21:35,920 --> 00:21:42,539
there so now if I play again hopefully

526
00:21:39,940 --> 00:21:42,539
it's the same

527
00:21:45,159 --> 00:21:50,539
and you know what I wonder if we can I'd

528
00:21:48,169 --> 00:21:51,890
like to have the sound keep playing for

529
00:21:50,538 --> 00:21:53,720
now at least while we're in debug mode

530
00:21:51,890 --> 00:21:55,580
when i switch back to the editor because

531
00:21:53,720 --> 00:21:57,558
since we have live code editing it's

532
00:21:55,579 --> 00:21:59,599
it's I want to be able to hear it when

533
00:21:57,558 --> 00:22:02,690
we change things I wonder if we can just

534
00:21:59,599 --> 00:22:06,709
tell windows into platform layer to not

535
00:22:02,690 --> 00:22:09,528
maybe do that you know as as much I'm

536
00:22:06,710 --> 00:22:13,909
not really sure let's see about the

537
00:22:09,528 --> 00:22:16,159
primary buffer what we what did we say

538
00:22:13,909 --> 00:22:19,640
in there I guess is there some way to

539
00:22:16,159 --> 00:22:21,289
set it to a cooperative level you know

540
00:22:19,640 --> 00:22:23,179
maybe this this could be set to

541
00:22:21,288 --> 00:22:25,759
something else I feel like maybe that

542
00:22:23,179 --> 00:22:28,190
has something to do with it I don't

543
00:22:25,759 --> 00:22:35,210
remember this stuff off hand but let

544
00:22:28,190 --> 00:22:50,960
boobs that's not what we want ah let's

545
00:22:35,210 --> 00:22:55,759
see let's see let's feature so that this

546
00:22:50,960 --> 00:22:57,710
this is not so you'll be muted with this

547
00:22:55,759 --> 00:23:00,278
level sir but yeah so so this is not I

548
00:22:57,710 --> 00:23:04,399
wonder what we can say to just have it

549
00:23:00,278 --> 00:23:06,409
play a little bit more nicely with what

550
00:23:04,398 --> 00:23:10,278
we're doing because I would like it to

551
00:23:06,409 --> 00:23:13,010
to not keep forcing us to shut forcing

552
00:23:10,278 --> 00:23:18,339
our application to not output sound in

553
00:23:13,009 --> 00:23:18,339
the case where you know it wouldn't work

554
00:23:23,259 --> 00:23:35,019
I don't know let's see if we can see

555
00:23:29,200 --> 00:23:54,809
your direct sound output when not

556
00:23:35,019 --> 00:23:57,129
focused let's see let's see yeah yeah

557
00:23:54,809 --> 00:23:58,509
it's looking like it might take a little

558
00:23:57,130 --> 00:23:59,980
bit more while or I could go read some

559
00:23:58,509 --> 00:24:01,809
of my own source code to see what

560
00:23:59,980 --> 00:24:03,730
actually happens in there I guess that's

561
00:24:01,809 --> 00:24:05,319
not to be done right now because I'm

562
00:24:03,730 --> 00:24:07,750
afraid that I'll just be a rat hole that

563
00:24:05,319 --> 00:24:10,480
will go down so maybe what we can do is

564
00:24:07,750 --> 00:24:12,759
let's just say i will try also i'm

565
00:24:10,480 --> 00:24:14,200
wondering if i should try just setting

566
00:24:12,759 --> 00:24:19,119
it to normal for now just to see what

567
00:24:14,200 --> 00:24:22,420
happens nope so it has nothing to do

568
00:24:19,119 --> 00:24:25,659
with that anyway so yeah so we'll have

569
00:24:22,420 --> 00:24:28,259
to take a look in DBS caps global focus

570
00:24:25,660 --> 00:24:30,910
I wonder why we've got it to do on that

571
00:24:28,259 --> 00:24:33,359
was that like a hint to our future

572
00:24:30,910 --> 00:24:33,360
selves

573
00:24:40,710 --> 00:24:46,179
let's see and I'll continue to place

574
00:24:44,648 --> 00:24:47,469
buffers if the user switches focus to

575
00:24:46,179 --> 00:24:49,929
another application even if the new

576
00:24:47,470 --> 00:24:51,519
application uses direct sound so DBS

577
00:24:49,929 --> 00:24:54,070
caps global focus it looks like we did

578
00:24:51,519 --> 00:24:57,370
kind of do a hint to ourselves about

579
00:24:54,069 --> 00:25:04,869
that so I wonder if we want to to do

580
00:24:57,369 --> 00:25:07,709
that well doesn't look like it worked

581
00:25:04,869 --> 00:25:10,869
anyway so that's that doesn't perhaps

582
00:25:07,710 --> 00:25:13,808
matter as much but yeah because this is

583
00:25:10,869 --> 00:25:16,229
a oh this is the d/s buffer oh but

584
00:25:13,808 --> 00:25:16,230
that's not

585
00:25:17,279 --> 00:25:28,019
no it is it is it is that I assume

586
00:25:22,880 --> 00:25:31,470
create some buffer set format just gives

587
00:25:28,019 --> 00:25:35,569
current position so that's but that's a

588
00:25:31,470 --> 00:25:39,210
buffer description so I wonder if maybe

589
00:25:35,569 --> 00:25:41,480
we can take a look at it a little bit

590
00:25:39,210 --> 00:25:53,430
more specifically here let's take a look

591
00:25:41,480 --> 00:25:56,630
at this structure Jamar guess we'll have

592
00:25:53,430 --> 00:25:59,820
to get it off Google servers their flags

593
00:25:56,630 --> 00:26:02,730
yeah so so that should have done it i

594
00:25:59,819 --> 00:26:05,159
guess but it looks like maybe global

595
00:26:02,730 --> 00:26:06,660
focus what does it say here the one

596
00:26:05,160 --> 00:26:08,160
exception is if you switch focus directs

597
00:26:06,660 --> 00:26:10,140
on application that uses the dsl right

598
00:26:08,160 --> 00:26:11,850
primary flag in this case level sounds

599
00:26:10,140 --> 00:26:12,900
for lockers will not be audible so it

600
00:26:11,849 --> 00:26:14,969
sounds like that should have worked

601
00:26:12,900 --> 00:26:17,250
right with this flag set and application

602
00:26:14,970 --> 00:26:19,680
is rex on kitty to play so i feel like

603
00:26:17,250 --> 00:26:22,670
that should have worked maybe we need to

604
00:26:19,680 --> 00:26:25,799
set it on the secondary buffer as well

605
00:26:22,670 --> 00:26:27,810
but I don't that seems a little odd but

606
00:26:25,799 --> 00:26:29,099
I mean we could try that as well and

607
00:26:27,809 --> 00:26:32,599
then I guess we'll just give up for now

608
00:26:29,099 --> 00:26:32,599
and take it offline

609
00:26:33,859 --> 00:26:39,379
aha so I guess setting it on the

610
00:26:37,670 --> 00:26:43,420
secondary buffer works i wonder if i can

611
00:26:39,380 --> 00:26:43,420
remove it from the primary buffer then

612
00:26:45,039 --> 00:26:54,048
we can all right so i'm going to go

613
00:26:49,849 --> 00:26:57,949
ahead and say that right here i'm going

614
00:26:54,048 --> 00:27:02,740
to say to do in release mode should we

615
00:26:57,950 --> 00:27:05,450
not specify that so that we don't play

616
00:27:02,740 --> 00:27:07,880
sounds unnecessarily i wonder if we

617
00:27:05,450 --> 00:27:11,350
should do that in fact what we could do

618
00:27:07,880 --> 00:27:16,700
here is something like pound if a

619
00:27:11,349 --> 00:27:19,250
handmade internal right and in the case

620
00:27:16,700 --> 00:27:21,529
where we know it's an internal build we

621
00:27:19,250 --> 00:27:24,529
will go ahead and order that in so that

622
00:27:21,529 --> 00:27:26,329
we can play sound all the time alright

623
00:27:24,529 --> 00:27:29,119
so that didn't take too long sometimes

624
00:27:26,329 --> 00:27:34,689
windows things could be a bit of a rat

625
00:27:29,119 --> 00:27:34,689
hole certainly but yet

626
00:27:39,950 --> 00:27:44,670
alright so since we have loop live code

627
00:27:43,079 --> 00:27:46,500
editing we can kind of play around with

628
00:27:44,670 --> 00:27:47,970
this stuff I guess since it's sound we

629
00:27:46,500 --> 00:27:49,859
don't even have to see it so maybe

630
00:27:47,970 --> 00:27:53,519
that's fine too I don't even need to

631
00:27:49,859 --> 00:27:56,369
play with the play with be a vmax window

632
00:27:53,519 --> 00:27:59,519
to get into position so let's go ahead

633
00:27:56,369 --> 00:28:02,339
and and take a look at what we need to

634
00:27:59,519 --> 00:28:05,940
do here to be able to change d volume to

635
00:28:02,339 --> 00:28:07,589
something else right so the problem it

636
00:28:05,940 --> 00:28:09,269
here that we have if i want to change

637
00:28:07,589 --> 00:28:12,059
this let's say I want to change us up to

638
00:28:09,269 --> 00:28:13,379
double speed right one of the problems

639
00:28:12,059 --> 00:28:16,649
that we have with changing it for double

640
00:28:13,380 --> 00:28:18,720
speed is samples remaining in sound is

641
00:28:16,650 --> 00:28:25,259
not going to be correct anymore because

642
00:28:18,720 --> 00:28:28,350
this assumes a particular rate right so

643
00:28:25,259 --> 00:28:31,200
what we really want to do is we really

644
00:28:28,349 --> 00:28:34,639
want to do this math in in a little bit

645
00:28:31,200 --> 00:28:37,170
a little bit different way like you know

646
00:28:34,640 --> 00:28:39,509
sample time remaining or something like

647
00:28:37,170 --> 00:28:42,259
or float sample remaining and sound or

648
00:28:39,509 --> 00:28:46,259
something like this right where we first

649
00:28:42,259 --> 00:28:49,109
compute what it would actually be if

650
00:28:46,259 --> 00:28:51,990
they were playing one at a time but then

651
00:28:49,109 --> 00:28:55,769
we take into account the D sample so how

652
00:28:51,990 --> 00:28:58,289
long you know will it take given how

653
00:28:55,769 --> 00:29:00,660
fast we're moving through it to compute

654
00:28:58,289 --> 00:29:03,000
a different amount because this loop

655
00:29:00,660 --> 00:29:04,560
will be incrementing by D sample not by

656
00:29:03,000 --> 00:29:05,849
one so we want to go ahead and divide by

657
00:29:04,559 --> 00:29:08,039
D symbol to find out how long it will

658
00:29:05,849 --> 00:29:10,289
actually take us to go when we get our

659
00:29:08,039 --> 00:29:11,639
sample remaining right and then we can

660
00:29:10,289 --> 00:29:13,319
round that up to figure out what that

661
00:29:11,640 --> 00:29:14,880
would be an actual term sample space now

662
00:29:13,319 --> 00:29:15,960
there's some edge condition stuff that

663
00:29:14,880 --> 00:29:17,880
we're going to happen think about

664
00:29:15,960 --> 00:29:23,750
but after the moment we don't have to

665
00:29:17,880 --> 00:29:26,010
work that too much right define an r32

666
00:29:23,750 --> 00:29:28,589
by the way I'm really digging this new

667
00:29:26,009 --> 00:29:30,990
more concise version I for people who

668
00:29:28,589 --> 00:29:32,279
don't like it I'm afraid it's gonna stay

669
00:29:30,990 --> 00:29:33,599
I think it's going to stay I've been

670
00:29:32,279 --> 00:29:36,059
liking it at work I've been liking it

671
00:29:33,599 --> 00:29:38,429
here this set right here is way better

672
00:29:36,059 --> 00:29:47,460
than my old set so I'm feeling I'm

673
00:29:38,430 --> 00:29:53,789
feeling it that makes sense it's always

674
00:29:47,460 --> 00:30:00,090
so funny uh-oh it didn't like that so I

675
00:29:53,789 --> 00:30:01,349
oh you know what um so here's an

676
00:30:00,089 --> 00:30:03,299
interesting thing that we have not

677
00:30:01,349 --> 00:30:04,679
addressed yet and we should probably put

678
00:30:03,299 --> 00:30:07,289
this on the to do this we really don't

679
00:30:04,680 --> 00:30:10,140
have to worry about it now but I wanted

680
00:30:07,289 --> 00:30:12,599
to mention it so one thing that we

681
00:30:10,140 --> 00:30:14,430
haven't done with the loop live code

682
00:30:12,599 --> 00:30:18,269
editing is now that we have multiple

683
00:30:14,430 --> 00:30:21,810
threads working those threads are in the

684
00:30:18,269 --> 00:30:23,250
dll that's going to get unloaded and so

685
00:30:21,809 --> 00:30:25,440
we have to make sure all the threads

686
00:30:23,250 --> 00:30:27,480
have spun down before we reload our live

687
00:30:25,440 --> 00:30:30,090
code which we are not currently doing

688
00:30:27,480 --> 00:30:31,440
and so that's you know again doesn't

689
00:30:30,089 --> 00:30:33,990
create a problem for the game because

690
00:30:31,440 --> 00:30:35,630
the users will never experience a crash

691
00:30:33,990 --> 00:30:38,819
because of that because they're not

692
00:30:35,630 --> 00:30:41,850
developing the code and live editing it

693
00:30:38,819 --> 00:30:44,579
but we are and so one thing we might

694
00:30:41,849 --> 00:30:48,269
want to do here is put in something like

695
00:30:44,579 --> 00:30:52,919
Mick you know blush all thread queues

696
00:30:48,269 --> 00:30:54,329
before reloading DOL right and that is

697
00:30:52,920 --> 00:30:57,180
the thing that we will hit occasionally

698
00:30:54,329 --> 00:31:00,289
we haven't hit it very often but you

699
00:30:57,180 --> 00:31:00,289
know it's totally plausible

700
00:31:00,839 --> 00:31:09,240
so yeah so let's take a look here and

701
00:31:05,500 --> 00:31:09,240
here my audio let's slow this down a bit

702
00:31:16,289 --> 00:31:22,599
so that sounds a little bit wrong to me

703
00:31:19,299 --> 00:31:24,490
even modulo the artifacts that will come

704
00:31:22,599 --> 00:31:26,439
from not sampling so I think we've got

705
00:31:24,490 --> 00:31:27,759
some bugs in the computation here so I'm

706
00:31:26,440 --> 00:31:29,500
just going to go through this a little

707
00:31:27,759 --> 00:31:35,109
bit carefully before we move on to the

708
00:31:29,500 --> 00:31:37,750
linear blend that's just intuition on my

709
00:31:35,109 --> 00:31:40,059
part it just sounds all more wrong than

710
00:31:37,750 --> 00:31:42,880
I'm expecting it to sound from having

711
00:31:40,059 --> 00:31:45,339
done this sort of thing before so that's

712
00:31:42,880 --> 00:31:46,210
there's really no way otherwise if you

713
00:31:45,339 --> 00:31:47,289
were drinks for the first time you

714
00:31:46,210 --> 00:31:48,819
wouldn't know you could be like well

715
00:31:47,289 --> 00:31:50,139
maybe that's for the linear blend and

716
00:31:48,819 --> 00:31:53,829
then you put in labor and anyway be sure

717
00:31:50,140 --> 00:31:55,300
but uh so if I take a look here we've

718
00:31:53,829 --> 00:31:57,220
got the sample position it starts at

719
00:31:55,299 --> 00:31:59,799
samples played and the sample position

720
00:31:57,220 --> 00:32:03,880
that gets added by D sample every round

721
00:31:59,799 --> 00:32:05,859
right we round it in to figure out we

722
00:32:03,880 --> 00:32:10,180
round what the sound position is there

723
00:32:05,859 --> 00:32:12,459
oh but our update also has to take you

724
00:32:10,180 --> 00:32:15,670
to do the proper thing here for sample

725
00:32:12,460 --> 00:32:20,470
position so samples played should

726
00:32:15,670 --> 00:32:22,539
actually be set to sample position right

727
00:32:20,470 --> 00:32:24,400
at the end of the day so what we

728
00:32:22,539 --> 00:32:26,740
probably want to do here is do something

729
00:32:24,400 --> 00:32:28,480
more like this where this is a while

730
00:32:26,740 --> 00:32:33,579
loop right and they go through the

731
00:32:28,480 --> 00:32:35,620
sample positions like so and now when

732
00:32:33,579 --> 00:32:37,210
we're done with that loop we can just

733
00:32:35,619 --> 00:32:39,589
use sample position directly so that

734
00:32:37,210 --> 00:32:41,650
will be correct

735
00:32:39,589 --> 00:32:41,649
you

736
00:33:08,589 --> 00:33:23,179
so still a little bit odd like it has

737
00:33:20,299 --> 00:33:25,490
that very odd breaking point up around

738
00:33:23,180 --> 00:33:27,470
1.4 where it starts to be more than one

739
00:33:25,490 --> 00:33:31,009
sample so I feel like we've got some

740
00:33:27,470 --> 00:33:36,339
kind of a nasty like I don't think I'm

741
00:33:31,009 --> 00:33:39,740
quite still doing it right right right

742
00:33:36,339 --> 00:33:41,689
around that rounding threshold so we got

743
00:33:39,740 --> 00:33:43,370
the D sample let's let's walk through

744
00:33:41,690 --> 00:33:45,680
the code once and see what I'm missing

745
00:33:43,369 --> 00:33:46,879
and if we can't see anything that we're

746
00:33:45,680 --> 00:33:48,380
missing let's drop down to the bugger

747
00:33:46,880 --> 00:33:52,340
and step through it and see if we can

748
00:33:48,380 --> 00:33:55,040
see what's going on so uh right now we

749
00:33:52,339 --> 00:33:57,169
make sure that samples played has to be

750
00:33:55,039 --> 00:33:59,029
greater than or equal to 0 because we're

751
00:33:57,170 --> 00:34:01,000
not allowing pre queued sounds yet but

752
00:33:59,029 --> 00:34:03,769
like we said in the future maybe we will

753
00:34:01,000 --> 00:34:05,299
first sample index is just something

754
00:34:03,769 --> 00:34:07,460
that we're trying to use to figure out

755
00:34:05,299 --> 00:34:09,019
how many more samples we have to go so

756
00:34:07,460 --> 00:34:11,720
we're taking a sample count- that for a

757
00:34:09,019 --> 00:34:14,360
sample index since that's not a reused

758
00:34:11,719 --> 00:34:16,459
value I can actually go ahead and and

759
00:34:14,360 --> 00:34:20,630
now make that be something that just

760
00:34:16,460 --> 00:34:24,559
happens in line here like so so that's

761
00:34:20,630 --> 00:34:25,910
good get rid of that so we start out

762
00:34:24,559 --> 00:34:27,769
thinking that we're going to mix all the

763
00:34:25,909 --> 00:34:29,149
samples in the buffer we then say how

764
00:34:27,769 --> 00:34:30,349
many samples are there left in the sound

765
00:34:29,150 --> 00:34:33,139
will the number of samples that there

766
00:34:30,349 --> 00:34:36,529
are left in the sound is going to be

767
00:34:33,139 --> 00:34:39,079
however many samples are actually left /

768
00:34:36,530 --> 00:34:41,420
how fast we're going through them right

769
00:34:39,079 --> 00:34:42,799
so you know if it was 2 point 0 that

770
00:34:41,420 --> 00:34:44,170
means we would get through it and twice

771
00:34:42,800 --> 00:34:47,360
the time so there'd be half as many

772
00:34:44,170 --> 00:34:49,970
samples remaining to actually pull from

773
00:34:47,360 --> 00:34:51,829
right we would then round that to figure

774
00:34:49,969 --> 00:34:53,539
out what the actual number is in the

775
00:34:51,829 --> 00:34:54,829
future we'll probably it you know do

776
00:34:53,539 --> 00:34:56,719
something a little more fancy there

777
00:34:54,829 --> 00:34:57,769
because rounding is not really super

778
00:34:56,719 --> 00:34:58,699
appropriate necessary haven't thought

779
00:34:57,769 --> 00:35:00,380
through what happens at the end

780
00:34:58,699 --> 00:35:03,139
condition there but for now it should be

781
00:35:00,380 --> 00:35:04,700
fine we then say if the number of

782
00:35:03,139 --> 00:35:06,889
samples that we were going to mix is

783
00:35:04,699 --> 00:35:07,858
greater than that number we use that

784
00:35:06,889 --> 00:35:12,588
number as the

785
00:35:07,858 --> 00:35:15,358
were to actually try to mix the volume

786
00:35:12,588 --> 00:35:18,558
we're not actually interpolating yet so

787
00:35:15,358 --> 00:35:22,348
this should not be having any effect and

788
00:35:18,559 --> 00:35:24,809
furthermore it is doesn't run on the

789
00:35:22,349 --> 00:35:27,440
sample clock anyway it has its own d

790
00:35:24,809 --> 00:35:30,298
volume so in theory this should not be

791
00:35:27,440 --> 00:35:31,739
really related at all right meaning we

792
00:35:30,298 --> 00:35:35,219
should be able to ignore that loop

793
00:35:31,739 --> 00:35:38,039
pretty much completely we then go ahead

794
00:35:35,219 --> 00:35:39,929
and check the sample position again we

795
00:35:38,039 --> 00:35:42,239
say let's start where we thought we were

796
00:35:39,929 --> 00:35:48,419
going to start let's go until we hit

797
00:35:42,239 --> 00:35:50,749
samples to mix more samples ah that's

798
00:35:48,420 --> 00:35:54,088
not that's not correct though right

799
00:35:50,748 --> 00:35:57,028
because that's the place that we would

800
00:35:54,088 --> 00:35:59,460
get two samples to mix has been pre sort

801
00:35:57,028 --> 00:36:02,730
of determined that's not actually what

802
00:35:59,460 --> 00:36:06,088
we wanted to do right in fact we could

803
00:36:02,730 --> 00:36:07,230
just use the original value there if we

804
00:36:06,088 --> 00:36:09,838
were going to use that what we actually

805
00:36:07,230 --> 00:36:13,858
want to do here right if sample position

806
00:36:09,838 --> 00:36:16,288
is actually getting updated in in its

807
00:36:13,858 --> 00:36:18,150
own space so if we wanted to loop over

808
00:36:16,289 --> 00:36:22,319
the number of samples we were supposed

809
00:36:18,150 --> 00:36:24,568
to fill I would need you know I would

810
00:36:22,318 --> 00:36:26,670
need a different value so it's almost

811
00:36:24,568 --> 00:36:28,349
just a pure loop index at this point

812
00:36:26,670 --> 00:36:30,059
which kind of suggested me maybe I've

813
00:36:28,349 --> 00:36:33,660
architected this loop a little bit wrong

814
00:36:30,059 --> 00:36:37,289
you know what I mean but who knows

815
00:36:33,659 --> 00:36:40,498
alright so let's say we do that plus

816
00:36:37,289 --> 00:36:42,119
plus loop index like so so now we know

817
00:36:40,498 --> 00:36:44,338
we will actually go over the number of

818
00:36:42,119 --> 00:36:45,960
samples to mix and then again we're

819
00:36:44,338 --> 00:36:47,699
still using sample position each time

820
00:36:45,960 --> 00:36:49,650
and we're updating that by d samples so

821
00:36:47,699 --> 00:36:51,629
all that is the same but we're just

822
00:36:49,650 --> 00:36:54,358
controlling the number that we're doing

823
00:36:51,630 --> 00:36:56,369
so then after we get out of that we

824
00:36:54,358 --> 00:36:58,828
update the volume obviously which is

825
00:36:56,369 --> 00:37:00,930
fine and and check to see if we have to

826
00:36:58,829 --> 00:37:03,089
stop any volume ramping then we update

827
00:37:00,929 --> 00:37:04,949
the place that we are in the samples

828
00:37:03,088 --> 00:37:08,190
played by you know using whatever the

829
00:37:04,949 --> 00:37:09,868
samples thing was and we then remove the

830
00:37:08,190 --> 00:37:12,088
number of samples that we mixed from the

831
00:37:09,869 --> 00:37:13,980
total samples and we continue on our way

832
00:37:12,088 --> 00:37:17,808
so let's take a look at that and see if

833
00:37:13,980 --> 00:37:17,809
that's a little bit more sane

834
00:37:41,420 --> 00:38:07,920
right pretty good right alright so again

835
00:38:05,389 --> 00:38:09,900
not particularly complicated allows us

836
00:38:07,920 --> 00:38:11,460
to change the pitch we can't change the

837
00:38:09,900 --> 00:38:13,349
pitch without changing the speed but we

838
00:38:11,460 --> 00:38:14,789
don't really care about that too much so

839
00:38:13,349 --> 00:38:16,679
we're pretty good there there's not

840
00:38:14,789 --> 00:38:19,440
really a lot more that we need to really

841
00:38:16,679 --> 00:38:21,089
address the only thing that I said I

842
00:38:19,440 --> 00:38:23,280
think we might want to do is get the

843
00:38:21,090 --> 00:38:24,900
bilinear filtering in there just in case

844
00:38:23,280 --> 00:38:26,670
I'm sorry the linear filtering in there

845
00:38:24,900 --> 00:38:28,619
just in case that smooths out a bit as

846
00:38:26,670 --> 00:38:30,480
you could hear it really was didn't

847
00:38:28,619 --> 00:38:32,579
sound all that odd even just with the

848
00:38:30,480 --> 00:38:35,159
rounding so we're not really in a

849
00:38:32,579 --> 00:38:38,130
position to be super concerned about

850
00:38:35,159 --> 00:38:39,750
that but since it's pretty easy for us

851
00:38:38,130 --> 00:38:41,970
to implement maybe let's drop it in and

852
00:38:39,750 --> 00:38:45,829
how would we do that we do that exactly

853
00:38:41,969 --> 00:38:45,829
the same way as we were doing it before

854
00:38:46,340 --> 00:38:53,370
right all we're going to do is say when

855
00:38:51,210 --> 00:38:58,500
we actually do this here let's go ahead

856
00:38:53,369 --> 00:39:01,199
and floor assume we have that in our

857
00:38:58,500 --> 00:39:02,610
thing right floor real 32 so what I want

858
00:39:01,199 --> 00:39:05,549
to do is I want to floor that sample

859
00:39:02,610 --> 00:39:07,590
position right to get the sample index

860
00:39:05,550 --> 00:39:10,230
is and then what I want to do is take a

861
00:39:07,590 --> 00:39:11,780
look at that fractional part 2 right so

862
00:39:10,230 --> 00:39:13,920
we've got the fractional sample position

863
00:39:11,780 --> 00:39:16,260
that's going to be whatever the sample

864
00:39:13,920 --> 00:39:18,480
index was that we actually computed out

865
00:39:16,260 --> 00:39:19,950
here it's going to it's going to be the

866
00:39:18,480 --> 00:39:21,630
original sample position minus that so

867
00:39:19,949 --> 00:39:24,149
that'll give me just the fractional part

868
00:39:21,630 --> 00:39:25,500
right that fractional part will now be a

869
00:39:24,150 --> 00:39:27,869
number between zero and one that we can

870
00:39:25,500 --> 00:39:29,579
use to do the bilinear sample so what we

871
00:39:27,869 --> 00:39:32,339
can do is we can take a look at both

872
00:39:29,579 --> 00:39:36,750
sample index and sample index plus 1

873
00:39:32,340 --> 00:39:39,600
right and in order to do that we just

874
00:39:36,750 --> 00:39:42,300
need to say okay you know we've got two

875
00:39:39,599 --> 00:39:45,569
samples they're both s sixteens right so

876
00:39:42,300 --> 00:39:46,340
we've got sample zero and we've got

877
00:39:45,570 --> 00:39:48,650
sample

878
00:39:46,340 --> 00:39:51,740
and which is the exact same thing just

879
00:39:48,650 --> 00:39:54,769
plus one and once we've pulled those two

880
00:39:51,739 --> 00:39:58,549
out really all we have to do is up

881
00:39:54,769 --> 00:39:59,840
convert those two real 32s and then so i

882
00:39:58,550 --> 00:40:02,720
guess i could probably just do it like

883
00:39:59,840 --> 00:40:05,510
this write-up convert them from essex

884
00:40:02,719 --> 00:40:07,099
teens to real 30 tues once I have them I

885
00:40:05,510 --> 00:40:08,600
just need to blend them together by that

886
00:40:07,099 --> 00:40:10,460
fractional position and we've already

887
00:40:08,599 --> 00:40:13,339
we've done this a million times we know

888
00:40:10,460 --> 00:40:16,610
exactly how we would do that right in

889
00:40:13,340 --> 00:40:18,740
fact I think we even have a linear blend

890
00:40:16,610 --> 00:40:21,400
in our math thing that we can use if we

891
00:40:18,739 --> 00:40:25,969
just want to use the exact same thing

892
00:40:21,400 --> 00:40:27,349
lerp right here it is so if we want to

893
00:40:25,969 --> 00:40:31,459
lurk between those things linear

894
00:40:27,349 --> 00:40:35,179
interpolation here we go let's take

895
00:40:31,460 --> 00:40:40,070
sample zero let's go the fractional

896
00:40:35,179 --> 00:40:46,759
distance to sample one and that will

897
00:40:40,070 --> 00:40:49,340
become the sample value right and so we

898
00:40:46,760 --> 00:40:52,730
can even make this be kind of like an a

899
00:40:49,340 --> 00:40:55,309
you know an if sort of thing right we

900
00:40:52,730 --> 00:40:59,090
could do something like this where we

901
00:40:55,309 --> 00:41:01,549
still leave in the old paths as well so

902
00:40:59,090 --> 00:41:02,780
you know if we want to be able to a be

903
00:41:01,550 --> 00:41:05,750
compared them just for our own

904
00:41:02,780 --> 00:41:09,830
edification at any given time we could

905
00:41:05,750 --> 00:41:12,949
do that right so here we are playing

906
00:41:09,829 --> 00:41:15,559
sounds let's say we're going to play the

907
00:41:12,949 --> 00:41:17,539
sounds that some reasonable Delta

908
00:41:15,559 --> 00:41:19,489
something like what we might actually

909
00:41:17,539 --> 00:41:21,639
want to do not something super

910
00:41:19,489 --> 00:41:21,639
ridiculous

911
00:41:35,969 --> 00:41:41,789
of course that's going to rear its ugly

912
00:41:39,099 --> 00:41:41,789
head occasion

913
00:42:00,710 --> 00:42:02,769
you

914
00:42:04,048 --> 00:42:09,538
I'll be honest I can't tell the

915
00:42:05,548 --> 00:42:16,798
difference I cannot tell the difference

916
00:42:09,539 --> 00:42:21,119
between those two uh yeah I don't know

917
00:42:16,798 --> 00:42:22,798
that's uh that's a tough one so you know

918
00:42:21,119 --> 00:42:24,298
we could do it we could not do it I

919
00:42:22,798 --> 00:42:27,028
can't really hear the difference we may

920
00:42:24,298 --> 00:42:28,559
need to get two other sounds at some

921
00:42:27,028 --> 00:42:30,028
point to actually be able to tell the

922
00:42:28,559 --> 00:42:32,459
difference I don't hear really any

923
00:42:30,028 --> 00:42:33,869
artifacts in the other one either so

924
00:42:32,458 --> 00:42:35,728
that's that's kind of rough but it may

925
00:42:33,869 --> 00:42:44,939
just be because it's the wrong sound for

926
00:42:35,728 --> 00:42:52,169
it honestly so there's that but honestly

927
00:42:44,938 --> 00:42:55,170
that's just about it right that is

928
00:42:52,170 --> 00:42:56,608
pretty much the end of it in terms of

929
00:42:55,170 --> 00:42:58,979
capabilities that we really actually

930
00:42:56,608 --> 00:43:03,150
need in the sound mixer this d sample

931
00:42:58,978 --> 00:43:04,468
here we can read right out of our out of

932
00:43:03,150 --> 00:43:06,088
our sound so one of the things we

933
00:43:04,469 --> 00:43:08,219
probably want to do is have the sample

934
00:43:06,088 --> 00:43:11,849
be in here on the sound so that when you

935
00:43:08,219 --> 00:43:13,889
play a sound you set that D sample to

936
00:43:11,849 --> 00:43:16,259
whatever speed you want to actually play

937
00:43:13,889 --> 00:43:18,509
the sound at we could also have that be

938
00:43:16,259 --> 00:43:21,239
something that you know you could pass

939
00:43:18,509 --> 00:43:24,389
in here as well but you know not just

940
00:43:21,239 --> 00:43:27,719
just not a little just really not much

941
00:43:24,389 --> 00:43:32,248
that has to happen there so we've got

942
00:43:27,719 --> 00:43:33,929
change pitch and we've got the audio

943
00:43:32,248 --> 00:43:36,568
state the playing sound it would just be

944
00:43:33,929 --> 00:43:38,278
basically like a deep it d sample or

945
00:43:36,568 --> 00:43:39,869
something like that for now maybe we can

946
00:43:38,278 --> 00:43:43,909
come up with a better way to phrase

947
00:43:39,869 --> 00:43:47,999
those in the future but you know really

948
00:43:43,909 --> 00:43:51,420
they're talking about that right so

949
00:43:47,998 --> 00:43:53,068
that's mostly it like honestly they're

950
00:43:51,420 --> 00:43:54,749
really just isn't a lot more to it

951
00:43:53,068 --> 00:43:55,978
there's maybe some edge case stuff that

952
00:43:54,748 --> 00:43:57,659
we want to look out there when we drop

953
00:43:55,978 --> 00:43:59,909
this down to Cindy and we can like just

954
00:43:57,659 --> 00:44:03,629
make sure the I's are dotted in the T's

955
00:43:59,909 --> 00:44:06,688
are crossed but again that's the code

956
00:44:03,630 --> 00:44:09,959
for a real-time streaming sound mixer

957
00:44:06,688 --> 00:44:14,399
with pitch shifting and volume animated

958
00:44:09,958 --> 00:44:17,639
volume right not a lot of code just not

959
00:44:14,400 --> 00:44:18,090
a lot of code it's a very very simple

960
00:44:17,639 --> 00:44:23,699
thing

961
00:44:18,090 --> 00:44:25,740
so that's really all there is to it yeah

962
00:44:23,699 --> 00:44:27,449
so I don't think there's really anything

963
00:44:25,739 --> 00:44:30,719
else to do there we've got about 10

964
00:44:27,449 --> 00:44:32,869
minutes left so I think maybe you know

965
00:44:30,719 --> 00:44:34,829
let's let's just ute since we were

966
00:44:32,869 --> 00:44:36,299
getting to that point where we want to

967
00:44:34,829 --> 00:44:38,819
use the live code editing and it feels

968
00:44:36,300 --> 00:44:40,590
like the fact that that's going to cause

969
00:44:38,820 --> 00:44:44,280
problems with the threaded reload could

970
00:44:40,590 --> 00:44:46,050
could easily make us grumpy right I'm

971
00:44:44,280 --> 00:44:49,620
wondering if maybe now would be a good

972
00:44:46,050 --> 00:44:52,080
time for us to to make sure that that

973
00:44:49,619 --> 00:44:56,579
flushing stuff actually works right so

974
00:44:52,079 --> 00:44:59,099
if we have the thread props here we know

975
00:44:56,579 --> 00:45:01,739
what the cues actually are so what we

976
00:44:59,099 --> 00:45:04,289
could maybe do is do some kind of a

977
00:45:01,739 --> 00:45:08,059
win32 complete all work to force the

978
00:45:04,289 --> 00:45:12,509
cues to flush themselves out entirely

979
00:45:08,059 --> 00:45:17,549
before we actually do anything else

980
00:45:12,510 --> 00:45:20,760
right let's just take a look at that

981
00:45:17,550 --> 00:45:26,539
really quickly right so when i do the

982
00:45:20,760 --> 00:45:28,980
load the load game code right let's see

983
00:45:26,539 --> 00:45:32,250
and through the low income if compared

984
00:45:28,980 --> 00:45:35,039
file time so win 32 unload game code i'm

985
00:45:32,250 --> 00:45:36,750
just going to go in there to win third

986
00:45:35,039 --> 00:45:40,980
you unload game code and i'm going to

987
00:45:36,750 --> 00:45:43,409
say that maybe when we do the unload

988
00:45:40,980 --> 00:45:44,820
game code we well and I just I don't

989
00:45:43,409 --> 00:45:46,559
know is the right thing to do to do it

990
00:45:44,820 --> 00:45:48,960
in there probably not maybe that's a

991
00:45:46,559 --> 00:45:51,809
stupid idea so maybe what I want to do

992
00:45:48,960 --> 00:45:55,920
here is say okay right here we do the

993
00:45:51,809 --> 00:46:01,110
flush right so we've got the 2 q's right

994
00:45:55,920 --> 00:46:02,670
we've got the Q's right here so maybe

995
00:46:01,110 --> 00:46:04,559
what we want to do is just win through

996
00:46:02,670 --> 00:46:08,840
to complete all work on the high

997
00:46:04,559 --> 00:46:15,539
priority queue win32 complete all work

998
00:46:08,840 --> 00:46:20,240
on the low priority queue and and see if

999
00:46:15,539 --> 00:46:20,239
that helps our situation right

1000
00:46:29,530 --> 00:46:37,700
so here we go I let's go ahead and

1001
00:46:35,570 --> 00:46:42,890
change these values like we're looking

1002
00:46:37,699 --> 00:46:44,598
for okay so that did not help us let's

1003
00:46:42,889 --> 00:46:49,309
take a look at what we're getting here

1004
00:46:44,599 --> 00:46:52,519
as a problem so the problem is that it's

1005
00:46:49,309 --> 00:46:54,588
having trouble okay so this is actually

1006
00:46:52,519 --> 00:46:58,099
just a string this is actually just a

1007
00:46:54,588 --> 00:47:01,400
string problem right this is actually a

1008
00:46:58,099 --> 00:47:03,650
problem that has very little to do with

1009
00:47:01,400 --> 00:47:06,099
with what I was just talking about I

1010
00:47:03,650 --> 00:47:08,809
guess we were being kind of overly

1011
00:47:06,099 --> 00:47:10,550
overly cautious there so the problem

1012
00:47:08,809 --> 00:47:12,230
with that is that file name was invalid

1013
00:47:10,550 --> 00:47:13,490
right and we already talked about this

1014
00:47:12,230 --> 00:47:16,820
when we implemented the LiveCode ending

1015
00:47:13,489 --> 00:47:18,500
we said that file names wouldn't like

1016
00:47:16,820 --> 00:47:21,380
strings that were embedded wouldn't work

1017
00:47:18,500 --> 00:47:23,719
right so when we actually build up this

1018
00:47:21,380 --> 00:47:25,338
asset table normally this wouldn't be a

1019
00:47:23,719 --> 00:47:28,009
problem because that would be loaded in

1020
00:47:25,338 --> 00:47:30,108
as data which would persist it wouldn't

1021
00:47:28,010 --> 00:47:32,960
be part of the code but our test code

1022
00:47:30,108 --> 00:47:36,289
here actually has the problem because

1023
00:47:32,960 --> 00:47:38,420
the test code itself right has the

1024
00:47:36,289 --> 00:47:39,710
strings in it so it's not a problem that

1025
00:47:38,420 --> 00:47:41,780
would actually hit us once we get our

1026
00:47:39,710 --> 00:47:43,880
assets as I'm working but until the

1027
00:47:41,780 --> 00:47:45,710
asset system actually I'm sorry not that

1028
00:47:43,880 --> 00:47:47,358
system obviously asset systems working

1029
00:47:45,710 --> 00:47:51,139
at what everything's going through the

1030
00:47:47,358 --> 00:47:52,730
asset file actually defined and using

1031
00:47:51,139 --> 00:47:55,608
the data from it these strings will be a

1032
00:47:52,730 --> 00:47:58,490
problem so what we can do if we want to

1033
00:47:55,608 --> 00:48:01,190
write is we could just say that those

1034
00:47:58,489 --> 00:48:03,219
things are going to get loaded that are

1035
00:48:01,190 --> 00:48:07,338
going to get copied into our arena right

1036
00:48:03,219 --> 00:48:09,769
so wherever we have a care estar here we

1037
00:48:07,338 --> 00:48:13,099
could just go ahead and and copy it

1038
00:48:09,769 --> 00:48:18,559
because we've got the the two places

1039
00:48:13,099 --> 00:48:22,220
where it's used add sound info and an ad

1040
00:48:18,559 --> 00:48:23,539
bitmap info we those are the only places

1041
00:48:22,219 --> 00:48:26,209
that we would really have to deal with

1042
00:48:23,539 --> 00:48:28,309
it right so when we set the info file

1043
00:48:26,210 --> 00:48:30,769
name we could just have like push string

1044
00:48:28,309 --> 00:48:32,949
right in fact we already write a push

1045
00:48:30,769 --> 00:48:37,940
string

1046
00:48:32,949 --> 00:48:41,118
we did not write a push string so here

1047
00:48:37,940 --> 00:48:45,798
we go beeline void ops are in line Cara

1048
00:48:41,119 --> 00:48:49,009
star push string like so and then note

1049
00:48:45,798 --> 00:48:52,338
Casey this is generally not for

1050
00:48:49,009 --> 00:48:57,469
production use this is probably only

1051
00:48:52,338 --> 00:49:01,548
really something we need during testing

1052
00:48:57,469 --> 00:49:03,708
but who knows and here is the string to

1053
00:49:01,548 --> 00:49:06,858
push and then we just need the memory

1054
00:49:03,708 --> 00:49:10,248
arena that you want it to go into right

1055
00:49:06,858 --> 00:49:12,018
and so what we'll do here is we'll just

1056
00:49:10,248 --> 00:49:14,808
say that you know we've got that assets

1057
00:49:12,018 --> 00:49:16,639
arena right we've got this one here so

1058
00:49:14,809 --> 00:49:19,869
we can we can say that we want to use

1059
00:49:16,639 --> 00:49:22,788
the assets arena to push the file name

1060
00:49:19,869 --> 00:49:24,229
and then that would take care of that

1061
00:49:22,789 --> 00:49:26,420
problem because now they would be stored

1062
00:49:24,228 --> 00:49:28,669
in our datastore rather than in the

1063
00:49:26,420 --> 00:49:31,150
unload of all section that Pat gets

1064
00:49:28,670 --> 00:49:33,619
reloaded so when we do our put string

1065
00:49:31,150 --> 00:49:36,739
the only thing that we need to change

1066
00:49:33,619 --> 00:49:39,410
about the way we were doing things we

1067
00:49:36,739 --> 00:49:41,478
can just do a push size right to get the

1068
00:49:39,409 --> 00:49:44,978
string that we actually wanted so we can

1069
00:49:41,478 --> 00:49:48,169
actually just say okay we want to push

1070
00:49:44,978 --> 00:49:51,618
something of the string length size

1071
00:49:48,170 --> 00:49:53,059
right and then we want to or I shouldn't

1072
00:49:51,619 --> 00:49:55,278
say string length but I should just I'll

1073
00:49:53,059 --> 00:49:57,410
just say sighs and then the alignment

1074
00:49:55,278 --> 00:49:58,608
can remain the default alignment and

1075
00:49:57,409 --> 00:50:00,739
then what we would do is we would just

1076
00:49:58,608 --> 00:50:03,469
copy the characters right so we would

1077
00:50:00,739 --> 00:50:07,940
say like care index equals 0 care index

1078
00:50:03,469 --> 00:50:10,909
is less than string length you know or i

1079
00:50:07,940 --> 00:50:13,338
should say size plus plus care index and

1080
00:50:10,909 --> 00:50:15,618
then we would just do this guy right

1081
00:50:13,338 --> 00:50:19,458
here is the desk string this would be

1082
00:50:15,619 --> 00:50:23,630
the source the desk gets pushed on and

1083
00:50:19,458 --> 00:50:27,198
then we just do desk care index equals

1084
00:50:23,630 --> 00:50:30,318
source / index right so all we need to

1085
00:50:27,199 --> 00:50:32,389
do is determine this size and the size

1086
00:50:30,318 --> 00:50:34,159
obviously is of a null-terminated string

1087
00:50:32,389 --> 00:50:38,858
unfortunately there's no way to get that

1088
00:50:34,159 --> 00:50:38,858
size without looping through it now

1089
00:50:41,840 --> 00:50:50,670
if this were production if I was

1090
00:50:46,500 --> 00:50:52,530
anticipating actually using this guy

1091
00:50:50,670 --> 00:50:55,050
more there's actually a trick you can do

1092
00:50:52,530 --> 00:50:57,780
here to avoid the double loop i'll

1093
00:50:55,050 --> 00:50:59,190
mention it briefly so if you look here

1094
00:50:57,780 --> 00:51:02,280
like we've got this thing passed him we

1095
00:50:59,190 --> 00:51:04,139
want to know how long it would be so

1096
00:51:02,280 --> 00:51:05,790
what I what I would actually typically

1097
00:51:04,139 --> 00:51:09,059
do is you know something like this right

1098
00:51:05,789 --> 00:51:11,190
terraced are at equal source well it's

1099
00:51:09,059 --> 00:51:15,440
not know we loop over and for every

1100
00:51:11,190 --> 00:51:18,240
character there we add size to it and

1101
00:51:15,440 --> 00:51:20,039
and obviously we also want to include

1102
00:51:18,239 --> 00:51:22,379
the null terminator so we would set the

1103
00:51:20,039 --> 00:51:25,559
size to always be one at the start to

1104
00:51:22,380 --> 00:51:28,200
include that in el terminator but what

1105
00:51:25,559 --> 00:51:29,759
you would do if you wanted to be able to

1106
00:51:28,199 --> 00:51:31,859
do this without the two loops because

1107
00:51:29,760 --> 00:51:34,740
you know you're pushing into a memory

1108
00:51:31,860 --> 00:51:36,510
arena in the single threaded context

1109
00:51:34,739 --> 00:51:38,789
what you can do is just start actually

1110
00:51:36,510 --> 00:51:45,690
pushing the characters into the arena

1111
00:51:38,789 --> 00:51:47,039
right um ah what the heck do you want to

1112
00:51:45,690 --> 00:51:50,670
do it I don't know maybe we should just

1113
00:51:47,039 --> 00:51:52,199
do it now it's it's not worth it hey but

1114
00:51:50,670 --> 00:51:53,519
point being the memory Tory sitting

1115
00:51:52,199 --> 00:51:56,609
there so you can just start copying it

1116
00:51:53,519 --> 00:51:58,259
in and then you can avoid the double

1117
00:51:56,610 --> 00:52:00,480
loop that's that's all I was going to

1118
00:51:58,260 --> 00:52:03,330
say right so hopefully you can see why

1119
00:52:00,480 --> 00:52:08,780
that's interesting potentially in some

1120
00:52:03,329 --> 00:52:11,009
circumstances right so yeah so anyway

1121
00:52:08,780 --> 00:52:13,800
that's all we really need to do there I

1122
00:52:11,010 --> 00:52:17,970
think we should probably test that

1123
00:52:13,800 --> 00:52:19,480
routine for spring but when we come in

1124
00:52:17,969 --> 00:52:24,608
here

1125
00:52:19,480 --> 00:52:29,260
hey what oh why did we never call push

1126
00:52:24,608 --> 00:52:31,840
string did I not an asset call it did I

1127
00:52:29,260 --> 00:52:40,330
not it's called right there why is it

1128
00:52:31,840 --> 00:52:48,850
knocked oops I mad I was still thinking

1129
00:52:40,329 --> 00:52:51,159
of the old naming skirts okay let me

1130
00:52:48,849 --> 00:52:53,409
come in here we're doing tests here I

1131
00:52:51,159 --> 00:52:55,449
shot a bitmap right we loop over this

1132
00:52:53,409 --> 00:52:57,129
and we just count what the size is we

1133
00:52:55,449 --> 00:52:59,649
get there we say it's 26 characters long

1134
00:52:57,130 --> 00:53:04,840
so we pushed that is it let me call

1135
00:52:59,650 --> 00:53:06,400
school in 25 characters long correct

1136
00:53:04,840 --> 00:53:07,720
strangling doesn't return the length of

1137
00:53:06,400 --> 00:53:10,000
the null terminator so we have the null

1138
00:53:07,719 --> 00:53:12,639
terminator in there so we go ahead and

1139
00:53:10,000 --> 00:53:15,369
allocate that much we then go over that

1140
00:53:12,639 --> 00:53:17,799
mini and copy it in there and then we

1141
00:53:15,369 --> 00:53:20,890
finish let's take a look at desk make

1142
00:53:17,800 --> 00:53:27,660
sure it's right it is so that is

1143
00:53:20,889 --> 00:53:31,269
basically that and while we are running

1144
00:53:27,659 --> 00:53:34,440
let's go ahead and do a little bit tests

1145
00:53:31,269 --> 00:53:34,440
of changing that right again

1146
00:53:40,440 --> 00:53:42,500
I

1147
00:53:44,760 --> 00:54:11,980
kalari loads in there so hopefully that

1148
00:54:08,739 --> 00:54:14,609
took care of that problem again it's one

1149
00:54:11,980 --> 00:54:16,809
that we said would be with the live code

1150
00:54:14,610 --> 00:54:19,420
loop live code editing stuff is just

1151
00:54:16,809 --> 00:54:22,420
that's one thing you can't do is is have

1152
00:54:19,420 --> 00:54:23,440
data that's in the code block and we

1153
00:54:22,420 --> 00:54:24,970
should be able to avoid that most of

1154
00:54:23,440 --> 00:54:26,260
time because our strings will all come

1155
00:54:24,969 --> 00:54:26,949
from the asset file so we really

1156
00:54:26,260 --> 00:54:28,000
shouldn't have to worry about it too

1157
00:54:26,949 --> 00:54:29,679
much but we have to worry about it

1158
00:54:28,000 --> 00:54:31,630
temporarily while we have test code

1159
00:54:29,679 --> 00:54:33,309
that's just one of the costs of having

1160
00:54:31,630 --> 00:54:36,519
tesco but test code is almost always

1161
00:54:33,309 --> 00:54:38,349
worth it to get things right so it's you

1162
00:54:36,519 --> 00:54:42,039
know better to spend a couple seconds

1163
00:54:38,349 --> 00:54:45,130
debugging some things than to then do

1164
00:54:42,039 --> 00:54:47,230
not do it so let's go ahead and go to

1165
00:54:45,130 --> 00:54:49,780
the question and answer if you have

1166
00:54:47,230 --> 00:54:51,969
questions or answers about the stuff

1167
00:54:49,780 --> 00:54:55,150
that we did acid a stream please put q

1168
00:54:51,969 --> 00:55:01,659
colon in front of it and ask it now so

1169
00:54:55,150 --> 00:55:03,130
that I can answer it abner combrer you

1170
00:55:01,659 --> 00:55:04,779
said there were newcomers in coming

1171
00:55:03,130 --> 00:55:07,240
yesterday but then the questions were

1172
00:55:04,780 --> 00:55:11,550
all pretty normal actually so I don't

1173
00:55:07,239 --> 00:55:14,379
know we'll see see what we get certainly

1174
00:55:11,550 --> 00:55:16,720
maybe the newcomers are all super smart

1175
00:55:14,380 --> 00:55:19,599
and ask really smart questions and they

1176
00:55:16,719 --> 00:55:20,919
just look like they were people who've

1177
00:55:19,599 --> 00:55:22,480
been watching the stream the whole time

1178
00:55:20,920 --> 00:55:23,860
but that's just because they super know

1179
00:55:22,480 --> 00:55:26,369
what they're doing you never know they

1180
00:55:23,860 --> 00:55:26,370
could have fooled us

1181
00:55:28,570 --> 00:55:34,630
how would you pay in a sample slightly

1182
00:55:31,000 --> 00:55:36,130
left or right in volume well when we do

1183
00:55:34,630 --> 00:55:39,400
the change volume right we have our

1184
00:55:36,130 --> 00:55:44,320
change volume call in there you would

1185
00:55:39,400 --> 00:55:49,809
just decide how you wanted your volume

1186
00:55:44,320 --> 00:55:51,580
to behave if that made sense so uh well

1187
00:55:49,809 --> 00:55:53,679
lets you know what let's just let's just

1188
00:55:51,579 --> 00:55:57,579
do it so you can kind of maybe hear it a

1189
00:55:53,679 --> 00:56:01,349
little bit better you know what I could

1190
00:55:57,579 --> 00:56:01,349
also do here is I could maybe

1191
00:56:12,519 --> 00:56:17,710
all right can you guys hear that better

1192
00:56:15,559 --> 00:56:17,710
now

1193
00:56:19,909 --> 00:56:23,509
is that too loud

1194
00:56:28,300 --> 00:56:34,579
I'll let you guys catch up for a second

1195
00:56:31,690 --> 00:56:38,619
but what I was going to say is I think

1196
00:56:34,579 --> 00:56:42,200
we do have a debug mouse position right

1197
00:56:38,619 --> 00:56:45,289
we we passed the debug mouse position to

1198
00:56:42,199 --> 00:56:48,919
the game right so what I was thinking is

1199
00:56:45,289 --> 00:56:51,679
if we went into handmade CPP we could

1200
00:56:48,920 --> 00:56:56,088
start playing with the pan stuff pretty

1201
00:56:51,679 --> 00:57:00,230
easily by doing something like in a you

1202
00:56:56,088 --> 00:57:02,500
know maybe in the game state here where

1203
00:57:00,230 --> 00:57:04,730
we start looking at the input you know

1204
00:57:02,500 --> 00:57:09,159
what we could do and by the way I guess

1205
00:57:04,730 --> 00:57:11,929
we should we could reenable that Thun

1206
00:57:09,159 --> 00:57:15,309
now that our ground buffers recompute on

1207
00:57:11,929 --> 00:57:17,239
the fly it's probably pretty easy to do

1208
00:57:15,309 --> 00:57:18,469
well I guess I don't know because we

1209
00:57:17,239 --> 00:57:20,239
don't want to touch ones they're in

1210
00:57:18,469 --> 00:57:23,980
progress so maybe I won't do that yet

1211
00:57:20,239 --> 00:57:27,858
maybe I'll just leave a note to do re re

1212
00:57:23,980 --> 00:57:31,849
enable this but make sure we don't touch

1213
00:57:27,858 --> 00:57:34,338
ones in flight so when we come in here

1214
00:57:31,849 --> 00:57:36,170
to do all of our controller stuff maybe

1215
00:57:34,338 --> 00:57:39,619
we want to do something well we'll do a

1216
00:57:36,170 --> 00:57:43,309
change volume of that that playing sound

1217
00:57:39,619 --> 00:57:48,140
that music test that we were doing like

1218
00:57:43,309 --> 00:57:54,529
so and what we'll do is we'll just have

1219
00:57:48,139 --> 00:57:57,049
a music volume value that we set so

1220
00:57:54,530 --> 00:57:59,569
let's let's see your game state audio

1221
00:57:57,050 --> 00:58:04,670
state is that the correct call there so

1222
00:57:59,568 --> 00:58:06,920
now music volume what we'll do is we

1223
00:58:04,670 --> 00:58:09,289
will set the music volume to be

1224
00:58:06,920 --> 00:58:12,889
something that pans based on the mouse

1225
00:58:09,289 --> 00:58:18,050
position right so will essentially say

1226
00:58:12,889 --> 00:58:22,039
well you know I I'm going to make a

1227
00:58:18,050 --> 00:58:25,700
music volume I'm going to set the zero

1228
00:58:22,039 --> 00:58:29,269
element of the music volume to be

1229
00:58:25,699 --> 00:58:31,599
whatever the mouse position is and maida

1230
00:58:29,269 --> 00:58:38,949
let's see here

1231
00:58:31,599 --> 00:58:41,889
and made platform mouse mouse X it is

1232
00:58:38,949 --> 00:58:44,259
right so we take a look at the mouse X

1233
00:58:41,889 --> 00:58:49,420
and we'll say that we want to take the

1234
00:58:44,260 --> 00:58:50,980
mouse x / you know the some kind of

1235
00:58:49,420 --> 00:58:53,500
dimension right whatever the dimension

1236
00:58:50,980 --> 00:58:55,599
of the of the drawable buffer is is

1237
00:58:53,500 --> 00:58:59,219
probably what we would want to use I

1238
00:58:55,599 --> 00:59:03,009
would think for that so maybe we'd say

1239
00:58:59,219 --> 00:59:10,989
what is that output buffer called let's

1240
00:59:03,010 --> 00:59:15,610
see see here render where is our render

1241
00:59:10,989 --> 00:59:18,339
render render there we go so we could

1242
00:59:15,610 --> 00:59:21,309
take a look at that that drama for stuff

1243
00:59:18,340 --> 00:59:22,930
the buffer width that's what I want so

1244
00:59:21,309 --> 00:59:25,329
if we were to do it by the buffer with

1245
00:59:22,929 --> 00:59:27,309
and this is just some absolute some temp

1246
00:59:25,329 --> 00:59:29,289
code here will do actually we can do a

1247
00:59:27,309 --> 00:59:31,659
safe ratio zero so to make sure that we

1248
00:59:29,289 --> 00:59:34,269
don't accidentally get anything bad

1249
00:59:31,659 --> 00:59:37,569
happening there so we can just make it

1250
00:59:34,269 --> 00:59:38,889
so that you know the I guess would be

1251
00:59:37,570 --> 00:59:40,480
the right volume the further you move

1252
00:59:38,889 --> 00:59:44,289
the mouse to the right the more right

1253
00:59:40,480 --> 00:59:46,780
volume you get and music volume for the

1254
00:59:44,289 --> 00:59:49,630
left will just be whatever the inverse

1255
00:59:46,780 --> 00:59:51,180
of that is right so it's it's however

1256
00:59:49,630 --> 00:59:54,610
much it would take to add back up to one

1257
00:59:51,179 --> 00:59:56,769
right and so again we can sort of decide

1258
00:59:54,610 --> 00:59:59,530
how we exactly we want that to work but

1259
00:59:56,769 --> 01:00:03,159
so if we do that then we should be able

1260
00:59:59,530 --> 01:00:04,540
to micro pan it around pretty much and

1261
01:00:03,159 --> 01:00:05,889
then we also you decide how fast you

1262
01:00:04,539 --> 01:00:08,860
want that to happen and I guess we want

1263
01:00:05,889 --> 01:00:12,579
that to happen pretty quickly right so

1264
01:00:08,860 --> 01:00:16,710
yeah okay so let's go ahead and what

1265
01:00:12,579 --> 01:00:21,150
does this thing do you have V from v to

1266
01:00:16,710 --> 01:00:24,570
2k so that's good second there we go

1267
01:00:21,150 --> 01:00:24,570
let's play it

1268
01:00:28,980 --> 01:00:32,190
can you hear that

1269
01:00:34,048 --> 01:00:45,818
right so that should give you some idea

1270
01:00:42,068 --> 01:00:48,219
of how you can value slightly if we this

1271
01:00:45,818 --> 01:00:50,409
is using point five point five so half

1272
01:00:48,219 --> 01:00:52,989
volume in either speaker when it's right

1273
01:00:50,409 --> 01:00:55,568
in the middle it's using 1 point 0 in

1274
01:00:52,989 --> 01:00:57,278
the left speaker right or 1 point 0 and

1275
01:00:55,568 --> 01:00:58,808
the right speaker and 0 and the other

1276
01:00:57,278 --> 01:01:00,909
speaker when it moves to the extremes

1277
01:00:58,809 --> 01:01:02,410
and again this is exactly that same

1278
01:01:00,909 --> 01:01:03,639
thing that linear interpolation is

1279
01:01:02,409 --> 01:01:05,828
talking about basically your talk about

1280
01:01:03,639 --> 01:01:09,368
going from 0 to 1 on one speaker this

1281
01:01:05,829 --> 01:01:18,940
way and you know one you know what I'll

1282
01:01:09,369 --> 01:01:20,769
just draw it on the whiteboard huh as I

1283
01:01:18,940 --> 01:01:30,970
draw since we don't check to see if our

1284
01:01:20,769 --> 01:01:32,139
apps active it pans as I draw ah I'm

1285
01:01:30,969 --> 01:01:34,750
gonna leave that on for a sec because

1286
01:01:32,139 --> 01:01:36,730
it's so darn ridiculous so basically

1287
01:01:34,750 --> 01:01:39,039
what I did there right is I said okay

1288
01:01:36,730 --> 01:01:42,969
I've got from zero to width of the

1289
01:01:39,039 --> 01:01:44,980
screen right and i know that i get a

1290
01:01:42,969 --> 01:01:46,419
debug mouse position because we were we

1291
01:01:44,980 --> 01:01:47,889
sent the debug mouth position from the

1292
01:01:46,420 --> 01:01:49,838
platform layer a long time ago saying

1293
01:01:47,889 --> 01:01:52,028
well you know maybe someday we're going

1294
01:01:49,838 --> 01:01:53,980
to want to have some HUD stuff that you

1295
01:01:52,028 --> 01:01:55,778
can click on to the inspector debug mode

1296
01:01:53,980 --> 01:01:57,548
it's a the game is not playable with the

1297
01:01:55,778 --> 01:01:58,750
mass amount of mouse game but we'll just

1298
01:01:57,548 --> 01:01:59,798
shove the mouse in there anyway so i was

1299
01:01:58,750 --> 01:02:02,108
like well it's in there we might as well

1300
01:01:59,798 --> 01:02:04,838
play with it so what i was saying is

1301
01:02:02,108 --> 01:02:07,538
okay i can produce a value between 0 and

1302
01:02:04,838 --> 01:02:10,449
1 by just saying wherever i actually am

1303
01:02:07,539 --> 01:02:12,460
the mouse x-rite divided by the width

1304
01:02:10,449 --> 01:02:13,219
will give me what percentage of the way

1305
01:02:12,460 --> 01:02:15,710
i am there

1306
01:02:13,219 --> 01:02:18,500
so if I a third of the way there it

1307
01:02:15,710 --> 01:02:22,309
would give me point 3 333 right as the

1308
01:02:18,500 --> 01:02:24,619
value so if I set that as essentially

1309
01:02:22,309 --> 01:02:25,759
the right speaker then as I move flush

1310
01:02:24,619 --> 01:02:27,530
with the right speaker it gets closer

1311
01:02:25,760 --> 01:02:29,030
and closer to 1 and becomes full volume

1312
01:02:27,530 --> 01:02:31,340
in the right speaker then what I can

1313
01:02:29,030 --> 01:02:34,760
just say is well 1 minus whatever that

1314
01:02:31,340 --> 01:02:36,559
is is going to fill me back up to a sum

1315
01:02:34,760 --> 01:02:38,570
total of one volume so that would be

1316
01:02:36,559 --> 01:02:41,059
whatever the left speaker should say so

1317
01:02:38,570 --> 01:02:43,250
as it gets you know closer to 0 on the

1318
01:02:41,059 --> 01:02:44,960
right speaker by moving closer here it

1319
01:02:43,250 --> 01:02:47,599
gets closer to one on the left speaker

1320
01:02:44,960 --> 01:02:50,170
right so I basically just did you know a

1321
01:02:47,599 --> 01:02:55,609
standard thing which was right volume

1322
01:02:50,170 --> 01:02:59,840
equals mouse over width and left volume

1323
01:02:55,608 --> 01:03:02,199
equals one minus right right hopefully

1324
01:02:59,840 --> 01:03:02,200
that makes sense

1325
01:03:06,590 --> 01:03:11,670
with this pitch shift be animated as

1326
01:03:09,300 --> 01:03:13,440
well like you enter a time dilated area

1327
01:03:11,670 --> 01:03:16,710
and pitch shift in a second or as you

1328
01:03:13,440 --> 01:03:18,539
cross a barrier I don't think we really

1329
01:03:16,710 --> 01:03:20,460
need that for anything in particular so

1330
01:03:18,539 --> 01:03:23,909
i would say probably best to leave it

1331
01:03:20,460 --> 01:03:25,710
out of the loop in because the pitch

1332
01:03:23,909 --> 01:03:28,679
shifts are fairly subtle that we're

1333
01:03:25,710 --> 01:03:30,720
aiming for we're not set up to do big

1334
01:03:28,679 --> 01:03:33,000
pitch just go like i said the time

1335
01:03:30,719 --> 01:03:34,379
dilation would get you there and so when

1336
01:03:33,000 --> 01:03:36,090
you're talking about subtle pitch shifts

1337
01:03:34,380 --> 01:03:39,450
there's really not a whole lot of point

1338
01:03:36,090 --> 01:03:42,480
in doing the that ramping because you're

1339
01:03:39,449 --> 01:03:45,389
not talking about changing between two

1340
01:03:42,480 --> 01:03:47,280
large things where you get a lot of

1341
01:03:45,389 --> 01:03:49,079
audible payoff from doing like a ramp

1342
01:03:47,280 --> 01:03:50,640
right so typically we're just going to

1343
01:03:49,079 --> 01:03:52,409
play sounds at a pitch and leave them

1344
01:03:50,639 --> 01:03:55,699
there as a way of getting variety but

1345
01:03:52,409 --> 01:03:55,699
we're not going to do a lot of ramping

1346
01:04:01,300 --> 01:04:06,800
if you wanted to pitch if the music

1347
01:04:04,969 --> 01:04:08,629
without changing the speed couldn't you

1348
01:04:06,800 --> 01:04:11,000
just do a quick and dirty linear

1349
01:04:08,630 --> 01:04:14,930
interpolation between the current sample

1350
01:04:11,000 --> 01:04:17,510
and the next sample that is what we are

1351
01:04:14,929 --> 01:04:19,309
doing that still changes the speed

1352
01:04:17,510 --> 01:04:21,290
because the whole reason that it's

1353
01:04:19,309 --> 01:04:23,719
getting faster is because you're moving

1354
01:04:21,289 --> 01:04:25,639
the basically the play cursor at a

1355
01:04:23,719 --> 01:04:29,629
faster rate than one to one with the

1356
01:04:25,639 --> 01:04:31,039
output so it the linear interpolation is

1357
01:04:29,630 --> 01:04:38,450
just to avoid artifacts it doesn't

1358
01:04:31,039 --> 01:04:40,759
really do anything special garland Oh

1359
01:04:38,449 --> 01:04:47,000
bloom can I ban everyone of course you

1360
01:04:40,760 --> 01:04:49,910
can you're a moderator you you have the

1361
01:04:47,000 --> 01:04:52,489
power how many years did it take you to

1362
01:04:49,909 --> 01:04:53,869
learn how to code that's a little

1363
01:04:52,489 --> 01:04:55,339
off-topic let me look to see if there's

1364
01:04:53,869 --> 01:04:56,509
let me go there's a lot of questions

1365
01:04:55,340 --> 01:04:59,210
here I'm going to stick with on topic

1366
01:04:56,510 --> 01:05:11,840
ones until I can't see anywhere on topic

1367
01:04:59,210 --> 01:05:15,530
ones uh let's see let's see me below

1368
01:05:11,840 --> 01:05:18,320
said it clips now meaning when I turn

1369
01:05:15,530 --> 01:05:21,110
the volume up on the audio it was too

1370
01:05:18,320 --> 01:05:27,950
high is that what you're saying what

1371
01:05:21,110 --> 01:05:29,870
what are you saying clips a little loud

1372
01:05:27,949 --> 01:05:32,359
though because I'm quieter than it okay

1373
01:05:29,869 --> 01:05:34,719
so let's let's tone it down a little bit

1374
01:05:32,360 --> 01:05:36,800
from there and maybe find a happy medium

1375
01:05:34,719 --> 01:05:38,480
because since we're working on sound I

1376
01:05:36,800 --> 01:05:40,280
kind of want it to be somewhere there so

1377
01:05:38,480 --> 01:05:42,650
maybe we'll do it at sixty percent or

1378
01:05:40,280 --> 01:05:47,750
something let's see how that is and I'll

1379
01:05:42,650 --> 01:05:50,510
play it back at its normal normal amount

1380
01:05:47,750 --> 01:05:52,360
there so it's playing at D sample oh so

1381
01:05:50,510 --> 01:05:55,360
it is already playing at the right sound

1382
01:05:52,360 --> 01:05:55,360
level

1383
01:06:05,030 --> 01:06:13,650
let's see did you ever cover what would

1384
01:06:12,090 --> 01:06:16,140
make a good test sound file for this

1385
01:06:13,650 --> 01:06:18,720
type of mixing word no but if you really

1386
01:06:16,139 --> 01:06:23,219
if you're trying to do some very serious

1387
01:06:18,719 --> 01:06:25,619
finally of your audio a pure sine waves

1388
01:06:23,219 --> 01:06:27,029
tend to be pretty good actually you can

1389
01:06:25,619 --> 01:06:31,829
you can hear things in pure sine ways

1390
01:06:27,030 --> 01:06:36,210
pretty reasonably do you ever use mem

1391
01:06:31,829 --> 01:06:38,338
copy from the C standard library no

1392
01:06:36,210 --> 01:06:39,329
I mean sometimes on the stream we have

1393
01:06:38,338 --> 01:06:42,869
because we haven't gotten around to

1394
01:06:39,329 --> 01:06:44,969
writing our own CC enter library yet but

1395
01:06:42,869 --> 01:06:55,440
no in my real life no I don't use my

1396
01:06:44,969 --> 01:06:56,639
copy what's the yellow rectangle now the

1397
01:06:55,440 --> 01:06:59,010
yellow rectangle was a placeholder

1398
01:06:56,639 --> 01:07:02,299
because we don't have art for stairs yet

1399
01:06:59,010 --> 01:07:06,089
so we were testing some zooming code

1400
01:07:02,300 --> 01:07:08,550
just it again this is all just was test

1401
01:07:06,088 --> 01:07:10,049
stuff that we were playing with and so I

1402
01:07:08,550 --> 01:07:12,240
don't know why it's a yellow rectangle

1403
01:07:10,050 --> 01:07:13,320
don't don't ask me we've got a bunch of

1404
01:07:12,239 --> 01:07:15,149
stuff we're playing with that we're

1405
01:07:13,320 --> 01:07:16,500
going to wrap up relatively soon so

1406
01:07:15,150 --> 01:07:19,410
there's a bunch of weird test stuff

1407
01:07:16,500 --> 01:07:22,730
floating around in here that you know as

1408
01:07:19,409 --> 01:07:22,730
you can imagine is a bit odd

1409
01:07:29,608 --> 01:07:31,670
you

1410
01:07:40,250 --> 01:07:45,179
what kind of sound options do you plan

1411
01:07:43,050 --> 01:07:47,850
to include the game like will the player

1412
01:07:45,179 --> 01:07:51,210
be able to pause the game and mute the

1413
01:07:47,849 --> 01:07:52,920
music but keep the sound effects or is

1414
01:07:51,210 --> 01:07:56,360
it going to be a fixed thing like before

1415
01:07:52,920 --> 01:08:03,090
settings it'll probably be a fixed thing

1416
01:07:56,360 --> 01:08:06,380
I would imagine but I don't know like I

1417
01:08:03,090 --> 01:08:10,530
don't I don't really like the whole

1418
01:08:06,380 --> 01:08:12,420
customizable thing that much as I've

1419
01:08:10,530 --> 01:08:15,720
said a couple times before because you

1420
01:08:12,420 --> 01:08:17,430
know like you make a movie and you watch

1421
01:08:15,719 --> 01:08:19,679
the movie you don't go I'm gonna replace

1422
01:08:17,430 --> 01:08:21,088
the soundtrack to this movie maybe it'd

1423
01:08:19,680 --> 01:08:22,980
be a better world if you could so I

1424
01:08:21,088 --> 01:08:25,528
don't necessarily want to say that

1425
01:08:22,979 --> 01:08:26,969
that's a bad thing to shoot for but it's

1426
01:08:25,529 --> 01:08:28,950
definitely not my preference I'd like to

1427
01:08:26,970 --> 01:08:31,619
experience the thing that was made and

1428
01:08:28,949 --> 01:08:33,239
so typically you know I kind of feel

1429
01:08:31,619 --> 01:08:35,818
like the music is part of the soundscape

1430
01:08:33,239 --> 01:08:37,318
and should be part of it that said the

1431
01:08:35,819 --> 01:08:39,810
whole point of handmade hero is to hack

1432
01:08:37,319 --> 01:08:41,039
on it so every copy the game will come

1433
01:08:39,810 --> 01:08:42,390
with a source code so for people who

1434
01:08:41,039 --> 01:08:44,189
want to replace the music I've actually

1435
01:08:42,390 --> 01:08:46,319
rather than giving them a menu that does

1436
01:08:44,189 --> 01:08:49,619
it I'd rather encourage them to learn

1437
01:08:46,319 --> 01:08:51,480
enough coding to go in and build the

1438
01:08:49,619 --> 01:08:53,099
game and take out the music because

1439
01:08:51,479 --> 01:08:55,108
that'll be a great project for somebody

1440
01:08:53,100 --> 01:08:58,410
to just want an introduction to

1441
01:08:55,109 --> 01:09:00,539
programming to go in and just just take

1442
01:08:58,409 --> 01:09:02,760
out the one part that plays the music

1443
01:09:00,539 --> 01:09:05,699
that might be kind of fun kind of like

1444
01:09:02,760 --> 01:09:09,029
the controller setting stuff I kind of

1445
01:09:05,699 --> 01:09:10,920
want to give people reasons to to mod

1446
01:09:09,029 --> 01:09:14,299
the game themselves because it's

1447
01:09:10,920 --> 01:09:14,298
supposed to be an educational project

1448
01:09:31,180 --> 01:09:36,048
wouldn't you want to use the alternate

1449
01:09:34,069 --> 01:09:38,030
way of animating the volume for this

1450
01:09:36,048 --> 01:09:40,819
feature by setting a rate not a length

1451
01:09:38,029 --> 01:09:43,338
of time feature meaning that what the

1452
01:09:40,819 --> 01:09:45,770
pan left to right assuming the pan left

1453
01:09:43,338 --> 01:09:49,039
to right know that that's the exact kind

1454
01:09:45,770 --> 01:09:51,350
of thing that I don't want to set a rate

1455
01:09:49,039 --> 01:09:53,479
because what I want it to do is track

1456
01:09:51,350 --> 01:09:56,270
the mouse exactly so I want it to

1457
01:09:53,479 --> 01:09:58,189
basically ensure that on a given frame

1458
01:09:56,270 --> 01:10:01,310
it will go from its current volume to

1459
01:09:58,189 --> 01:10:03,889
its new volume but I don't want it to be

1460
01:10:01,310 --> 01:10:06,170
a pop so I just want to interpolate over

1461
01:10:03,890 --> 01:10:10,600
some reasonable number of samples which

1462
01:10:06,170 --> 01:10:10,600
is what I said to set it to do right

1463
01:10:17,289 --> 01:10:21,010
with a player running would you connect

1464
01:10:19,210 --> 01:10:23,649
speed of the player to pitch or look to

1465
01:10:21,010 --> 01:10:26,590
add more sounds ie more steps in grass I

1466
01:10:23,649 --> 01:10:30,039
would add more sounds for the footsteps

1467
01:10:26,590 --> 01:10:31,840
although the speed that the player is

1468
01:10:30,039 --> 01:10:34,420
moving at depending on the circumstance

1469
01:10:31,840 --> 01:10:35,949
could very well change the pitch as well

1470
01:10:34,420 --> 01:10:38,170
depending on the surface they were

1471
01:10:35,949 --> 01:10:40,059
running on so for example if I run

1472
01:10:38,170 --> 01:10:41,859
faster I'm probably hitting the ground a

1473
01:10:40,060 --> 01:10:44,770
little harder or doing other things so

1474
01:10:41,859 --> 01:10:46,630
pitch could vary with speed as well but

1475
01:10:44,770 --> 01:10:48,640
it wouldn't be the primary thing to vary

1476
01:10:46,630 --> 01:10:49,900
the frequency of actually triggering the

1477
01:10:48,640 --> 01:10:56,440
footstep sounds would be the primary

1478
01:10:49,899 --> 01:10:57,729
thing you'd very first once you release

1479
01:10:56,439 --> 01:10:59,439
the source code this will allow people

1480
01:10:57,729 --> 01:11:03,459
to build upon edit and make their own

1481
01:10:59,439 --> 01:11:04,449
games correct yes so actually the way

1482
01:11:03,460 --> 01:11:06,069
that it works is the source code is

1483
01:11:04,449 --> 01:11:07,510
already available if you pre-order the

1484
01:11:06,069 --> 01:11:09,369
game you can already start hacking on

1485
01:11:07,510 --> 01:11:11,050
the source code you just can't ship it

1486
01:11:09,369 --> 01:11:15,579
you can't like use it to make a

1487
01:11:11,050 --> 01:11:18,130
commercial game because there there's a

1488
01:11:15,579 --> 01:11:19,809
time lock on it bass glaze but that time

1489
01:11:18,130 --> 01:11:22,270
lock expires two years from the ship

1490
01:11:19,810 --> 01:11:25,030
date of this game and at that point it

1491
01:11:22,270 --> 01:11:28,650
will be you can use it for making any

1492
01:11:25,029 --> 01:11:28,649
commercial product that you want

1493
01:11:42,340 --> 01:11:47,650
you may have already covered this but

1494
01:11:44,829 --> 01:11:49,689
does the OS alone allocate threads to

1495
01:11:47,649 --> 01:11:51,848
run on each core so it is impossible to

1496
01:11:49,689 --> 01:11:56,500
force a single thread to run on its own

1497
01:11:51,849 --> 01:12:00,429
unique core actually those are not

1498
01:11:56,500 --> 01:12:04,420
mutually exclusive so yes it is the OS

1499
01:12:00,429 --> 01:12:08,139
alone which decides what core of thread

1500
01:12:04,420 --> 01:12:11,829
runs on so you are correct in thinking

1501
01:12:08,139 --> 01:12:16,300
that you do not get to choose what core

1502
01:12:11,829 --> 01:12:18,250
a thread runs on however because that

1503
01:12:16,300 --> 01:12:20,020
can be important for performance

1504
01:12:18,250 --> 01:12:21,880
oriented programming due to the fact

1505
01:12:20,020 --> 01:12:23,320
that certain caches are local to certain

1506
01:12:21,880 --> 01:12:25,569
core is and other things like this and

1507
01:12:23,319 --> 01:12:28,569
who knows what else right there's lots

1508
01:12:25,569 --> 01:12:30,130
of reasons you might care most operating

1509
01:12:28,569 --> 01:12:33,039
systems and windows is one of them

1510
01:12:30,130 --> 01:12:35,529
provide you with ways of actually

1511
01:12:33,039 --> 01:12:38,289
telling the operating system what Korres

1512
01:12:35,529 --> 01:12:39,698
you want your threads to run on so even

1513
01:12:38,289 --> 01:12:41,139
though if the operating system that's

1514
01:12:39,698 --> 01:12:42,729
doing the deciding and you are not

1515
01:12:41,139 --> 01:12:44,349
writing the code that puts things I

1516
01:12:42,729 --> 01:12:46,928
different course you can actually make

1517
01:12:44,349 --> 01:12:49,179
calls they're called affinity masks and

1518
01:12:46,929 --> 01:12:51,940
things like this where you can call and

1519
01:12:49,179 --> 01:12:55,000
say I want this thread to only run on

1520
01:12:51,939 --> 01:12:57,488
these cores or this one core or whatever

1521
01:12:55,000 --> 01:13:00,849
right and then well I don't actually

1522
01:12:57,488 --> 01:13:02,468
know if it's a hard guarantee meaning I

1523
01:13:00,849 --> 01:13:04,569
don't know if windows actually

1524
01:13:02,469 --> 01:13:07,389
guarantees that it will only run on that

1525
01:13:04,569 --> 01:13:09,609
core it will create a strong preference

1526
01:13:07,389 --> 01:13:14,050
in the scheduler Atlee at the very least

1527
01:13:09,609 --> 01:13:17,589
so that when the operating system is

1528
01:13:14,050 --> 01:13:19,599
scheduling the threads it will try as

1529
01:13:17,590 --> 01:13:22,420
hard as it can to run that thread on

1530
01:13:19,599 --> 01:13:24,719
that core and I'm sorry I just don't

1531
01:13:22,420 --> 01:13:27,158
recall whether windows scheduler

1532
01:13:24,719 --> 01:13:30,010
guarantees you'll never run on the other

1533
01:13:27,158 --> 01:13:32,529
core or whether it just is a strong

1534
01:13:30,010 --> 01:13:35,110
preference but either or the point is

1535
01:13:32,529 --> 01:13:37,988
you do have some control their

1536
01:13:35,109 --> 01:13:41,859
indirectly and that so so you can

1537
01:13:37,988 --> 01:13:44,019
actually maybe not force a single thread

1538
01:13:41,859 --> 01:13:45,848
to run on its own unique core but you

1539
01:13:44,020 --> 01:13:47,500
can certainly try I mean you can

1540
01:13:45,849 --> 01:13:49,840
certainly do something like set all the

1541
01:13:47,500 --> 01:13:52,149
other threads to have affinity to other

1542
01:13:49,840 --> 01:13:54,550
cores and set your thread to have an

1543
01:13:52,149 --> 01:13:56,219
affinity to your core and set the mask

1544
01:13:54,550 --> 01:13:58,510
so that your

1545
01:13:56,220 --> 01:14:00,039
can't run on the other cores or things

1546
01:13:58,510 --> 01:14:01,630
like that you can try to set up the

1547
01:14:00,039 --> 01:14:04,060
circumstance so the scheduler just will

1548
01:14:01,630 --> 01:14:05,949
actually do that thing so so you

1549
01:14:04,060 --> 01:14:07,480
actually can do that and there's other

1550
01:14:05,949 --> 01:14:09,489
things Windows has like a user mode

1551
01:14:07,479 --> 01:14:11,649
scheduling thing and they've added other

1552
01:14:09,489 --> 01:14:13,779
stuff too so you may have even more

1553
01:14:11,649 --> 01:14:16,659
options than that but at the at the very

1554
01:14:13,779 --> 01:14:18,819
least for for all of which you know for

1555
01:14:16,659 --> 01:14:21,639
for quite some time windows has had the

1556
01:14:18,819 --> 01:14:24,340
ability to articulate to the scheduler

1557
01:14:21,640 --> 01:14:26,260
what it was that you expect to happen in

1558
01:14:24,340 --> 01:14:31,170
terms of distribution of your threads on

1559
01:14:26,260 --> 01:14:31,170
the the computers course

1560
01:14:43,319 --> 01:14:48,189
is programming just you remember a whole

1561
01:14:46,750 --> 01:14:52,359
bunch of commands and putting them into

1562
01:14:48,189 --> 01:14:55,629
sequence um I probably wouldn't quite

1563
01:14:52,359 --> 01:14:58,029
describe it that way but it's not far

1564
01:14:55,630 --> 01:15:00,369
from the truth I mean basically what

1565
01:14:58,029 --> 01:15:03,759
happens is more like you build a mental

1566
01:15:00,369 --> 01:15:05,319
model of how computers work based on the

1567
01:15:03,760 --> 01:15:07,750
kinds of computers your programming and

1568
01:15:05,319 --> 01:15:10,239
you know you have a certain set of ways

1569
01:15:07,750 --> 01:15:13,479
you can affect their operation and then

1570
01:15:10,239 --> 01:15:15,130
it's you trying to figure out what set

1571
01:15:13,479 --> 01:15:16,750
of those things you can do will produce

1572
01:15:15,130 --> 01:15:20,710
the outcome you're actually trying to

1573
01:15:16,750 --> 01:15:22,210
produce so you know I mean I don't know

1574
01:15:20,710 --> 01:15:27,539
how you want to phrase that exactly but

1575
01:15:22,210 --> 01:15:27,539
that's that's you know the rough idea

1576
01:15:35,890 --> 01:15:40,850
let's see looks like that's the end of

1577
01:15:39,739 --> 01:15:43,369
the auto question so we're kind of

1578
01:15:40,850 --> 01:15:45,740
getting we're running out of time here

1579
01:15:43,369 --> 01:15:50,989
does anyone else have any top questions

1580
01:15:45,739 --> 01:15:55,329
about sound I should answer before the

1581
01:15:50,989 --> 01:15:55,329
time runs out of the street

1582
01:16:03,170 --> 01:16:12,090
anyone anyone maybe garland abloom

1583
01:16:08,010 --> 01:16:13,350
already banned everyone and so at that

1584
01:16:12,090 --> 01:16:16,279
point it's true that we couldn't get

1585
01:16:13,350 --> 01:16:16,280
very many questions but

1586
01:16:29,529 --> 01:16:38,239
is it too complex to add low and high

1587
01:16:33,229 --> 01:16:39,709
pass filters via code no you know I

1588
01:16:38,239 --> 01:16:41,090
don't have a lot of experience with

1589
01:16:39,710 --> 01:16:44,810
sound coding I'm not really a sound

1590
01:16:41,090 --> 01:16:47,239
coding guy so I suppose I'm the wrong

1591
01:16:44,810 --> 01:16:50,420
one to ask but I believe it's pretty

1592
01:16:47,239 --> 01:16:53,179
simple actually it's just a thing you

1593
01:16:50,420 --> 01:16:56,180
know when we're out putting those sound

1594
01:16:53,180 --> 01:16:58,460
samples it's one of the filters you

1595
01:16:56,180 --> 01:17:01,250
could run that's sort of just a in place

1596
01:16:58,460 --> 01:17:03,260
pretty simple filter that just as you

1597
01:17:01,250 --> 01:17:06,829
output each sample you do a little bit

1598
01:17:03,260 --> 01:17:10,060
of math on it and you use like

1599
01:17:06,829 --> 01:17:12,439
accumulators to keep track of some state

1600
01:17:10,060 --> 01:17:17,780
so there's a little bit of bookkeeping

1601
01:17:12,439 --> 01:17:20,539
involved if I remember correctly because

1602
01:17:17,779 --> 01:17:22,369
you have to sort of know there's sort of

1603
01:17:20,539 --> 01:17:24,170
the concept because it's a filter it

1604
01:17:22,369 --> 01:17:25,640
needs to have a window of samples to

1605
01:17:24,170 --> 01:17:27,890
look at because it needs to know what

1606
01:17:25,640 --> 01:17:29,600
the oscillations are that it's trying to

1607
01:17:27,890 --> 01:17:31,220
filter so there's a little bit more

1608
01:17:29,600 --> 01:17:35,420
bookkeeping that goes on if you try to

1609
01:17:31,220 --> 01:17:38,000
start adding filters that's usually the

1610
01:17:35,420 --> 01:17:40,220
majority of the pain involved in

1611
01:17:38,000 --> 01:17:42,170
imploding filters is okay now you've got

1612
01:17:40,220 --> 01:17:44,360
to have a bunch of extra bookkeeping for

1613
01:17:42,170 --> 01:17:45,949
them but once you do then it's just a

1614
01:17:44,359 --> 01:17:47,839
simple set of math ops that hopper eight

1615
01:17:45,949 --> 01:17:49,939
on the bookkeeping and the new samples

1616
01:17:47,840 --> 01:17:52,039
coming in and it's really that's really

1617
01:17:49,939 --> 01:17:53,359
not that much more than that so if you

1618
01:17:52,039 --> 01:17:56,269
know if you really wanted a low-pass

1619
01:17:53,359 --> 01:17:59,109
filter for some reason it's not a huge

1620
01:17:56,270 --> 01:17:59,110
deal to put it in

1621
01:18:02,750 --> 01:18:07,520
if a tree falls and the hero is not

1622
01:18:05,399 --> 01:18:10,439
there to hear it will it make a sound

1623
01:18:07,520 --> 01:18:11,730
well I guess it really doesn't matter if

1624
01:18:10,439 --> 01:18:13,199
the hero is there or not it matters

1625
01:18:11,729 --> 01:18:14,339
whether the user is there or not right

1626
01:18:13,199 --> 01:18:16,380
because the sound is going to come out

1627
01:18:14,340 --> 01:18:18,510
in their world the hero can't hear any

1628
01:18:16,380 --> 01:18:19,949
sounds because the hero is in a world

1629
01:18:18,510 --> 01:18:22,619
where there is no such thing as sound

1630
01:18:19,949 --> 01:18:24,869
really all of the sound comes out in

1631
01:18:22,619 --> 01:18:29,069
your world even though it's happening in

1632
01:18:24,869 --> 01:18:31,559
his so yeah I would say that the sort of

1633
01:18:29,069 --> 01:18:33,659
the Buddhist conundrum or whatever it is

1634
01:18:31,560 --> 01:18:35,850
is actually very simplified compared to

1635
01:18:33,659 --> 01:18:42,149
what we have here because our cone is

1636
01:18:35,850 --> 01:18:46,800
something like if a sound happens if a

1637
01:18:42,149 --> 01:18:50,539
tree falls in your world and its

1638
01:18:46,800 --> 01:18:53,699
vibration is reproduced in another world

1639
01:18:50,539 --> 01:18:57,409
but no one in that other world is there

1640
01:18:53,699 --> 01:18:57,409
to hear it did it make a sound

1641
01:19:11,710 --> 01:19:15,859
soy sauce the kid asks is the next thing

1642
01:19:14,210 --> 01:19:17,750
you're going to do put the sound code in

1643
01:19:15,859 --> 01:19:19,429
simdi yes I think probably what we'll do

1644
01:19:17,750 --> 01:19:20,840
is we'll just lightly you know we won't

1645
01:19:19,429 --> 01:19:22,639
really spend a lot of time optimizing

1646
01:19:20,840 --> 01:19:24,380
but we'll just translate it to Cindy so

1647
01:19:22,639 --> 01:19:27,380
we can make sure that it works wide and

1648
01:19:24,380 --> 01:19:29,090
then we'll probably call it good and if

1649
01:19:27,380 --> 01:19:30,920
we ever want more sound processing stuff

1650
01:19:29,090 --> 01:19:32,810
we'll revisit it way later in the game

1651
01:19:30,920 --> 01:19:35,000
development cycle when we know exactly

1652
01:19:32,810 --> 01:19:37,340
what sound features we don't have and

1653
01:19:35,000 --> 01:19:38,988
want but these are the the only ones I

1654
01:19:37,340 --> 01:19:43,219
really know that I definitely will make

1655
01:19:38,988 --> 01:19:45,709
any use of so we probably won't go nuts

1656
01:19:43,219 --> 01:19:47,649
on adding sound features beyond what's

1657
01:19:45,710 --> 01:19:49,670
here until we actually have some

1658
01:19:47,649 --> 01:20:01,339
indication of exactly what we would want

1659
01:19:49,670 --> 01:20:03,440
them for so are you going to use complex

1660
01:20:01,340 --> 01:20:07,369
numbers I heard they're useful for sound

1661
01:20:03,439 --> 01:20:11,479
processing uh so yeah I mean the whole

1662
01:20:07,368 --> 01:20:13,399
complex number system thing is if you're

1663
01:20:11,479 --> 01:20:14,868
into digital signal processing which is

1664
01:20:13,399 --> 01:20:18,109
where a lot of sound stuff comes from

1665
01:20:14,868 --> 01:20:20,889
then that all of that the basis of all

1666
01:20:18,109 --> 01:20:23,960
of that ends up being in sort of this

1667
01:20:20,889 --> 01:20:25,849
complex number basis where because of

1668
01:20:23,960 --> 01:20:27,260
the way the Fourier transform works and

1669
01:20:25,849 --> 01:20:29,210
all these are the sorts of things you

1670
01:20:27,260 --> 01:20:31,369
get into places where it becomes

1671
01:20:29,210 --> 01:20:35,439
convenient to think of things in terms

1672
01:20:31,368 --> 01:20:38,149
of complex numbers honestly I don't love

1673
01:20:35,439 --> 01:20:42,500
digital signal processing I feel like

1674
01:20:38,149 --> 01:20:43,789
it's kind of cheesy so you know your

1675
01:20:42,500 --> 01:20:45,979
mileage may vary but if you want to

1676
01:20:43,789 --> 01:20:48,368
implement the traditional sound

1677
01:20:45,979 --> 01:20:51,019
processing code in the traditional way I

1678
01:20:48,368 --> 01:20:53,868
yeah you would want to go read about

1679
01:20:51,020 --> 01:20:56,510
digital signal processing which is based

1680
01:20:53,868 --> 01:20:58,519
on complex number usually uses complex

1681
01:20:56,510 --> 01:21:01,219
numbers to talk about what it's talking

1682
01:20:58,520 --> 01:21:03,679
about that is really mostly for doing

1683
01:21:01,219 --> 01:21:04,639
filtering sorts of stuff you certainly

1684
01:21:03,679 --> 01:21:06,710
don't need it for any of the stuff that

1685
01:21:04,639 --> 01:21:09,078
we just did like unless you're going to

1686
01:21:06,710 --> 01:21:10,099
fourier transform something to do some

1687
01:21:09,078 --> 01:21:14,750
processing you probably don't really

1688
01:21:10,099 --> 01:21:17,150
need to worry about it so all right i

1689
01:21:14,750 --> 01:21:18,670
think i'm going to call it let's see

1690
01:21:17,149 --> 01:21:20,750
here because we're about out of time

1691
01:21:18,670 --> 01:21:28,819
let's go ahead and

1692
01:21:20,750 --> 01:21:34,010
close close it down alrighty clothes

1693
01:21:28,819 --> 01:21:35,090
clothes okay thank you everyone for

1694
01:21:34,010 --> 01:21:36,170
joining me for another episode of

1695
01:21:35,090 --> 01:21:38,690
handmade hero it's been a pleasure

1696
01:21:36,170 --> 01:21:40,010
coding with you as always if you want to

1697
01:21:38,689 --> 01:21:41,899
follow along at home with the source

1698
01:21:40,010 --> 01:21:43,850
code when we are programming on the

1699
01:21:41,899 --> 01:21:45,799
stream here you can do that if you

1700
01:21:43,850 --> 01:21:47,240
pre-order the game on handmade hero org

1701
01:21:45,800 --> 01:21:49,340
it comes with the source code every day

1702
01:21:47,239 --> 01:21:51,380
I update it nightly after we're finished

1703
01:21:49,340 --> 01:21:52,909
coding so if you want to play around

1704
01:21:51,380 --> 01:21:55,279
with it at home and just experiment and

1705
01:21:52,909 --> 01:21:57,139
try to learn from the series it's a good

1706
01:21:55,279 --> 01:21:58,909
way to do that we also have a forum site

1707
01:21:57,140 --> 01:22:00,170
you can go to to ask questions if you

1708
01:21:58,909 --> 01:22:02,059
have questions about working with the

1709
01:22:00,170 --> 01:22:03,619
code and stuff like that it also has the

1710
01:22:02,060 --> 01:22:06,080
annotated episode guide for catching up

1711
01:22:03,619 --> 01:22:07,519
on past episodes things like this it has

1712
01:22:06,079 --> 01:22:08,930
ports to mac and linux as well by

1713
01:22:07,520 --> 01:22:10,340
members of the community that can help

1714
01:22:08,930 --> 01:22:11,780
get you started if you want to work on a

1715
01:22:10,340 --> 01:22:13,610
different platform besides window so

1716
01:22:11,779 --> 01:22:15,170
that's helpful too we have a patreon

1717
01:22:13,609 --> 01:22:17,089
page if you would like to support the

1718
01:22:15,170 --> 01:22:19,399
video series we very much appreciate

1719
01:22:17,090 --> 01:22:21,140
subscriptions and we also have a tweet

1720
01:22:19,399 --> 01:22:22,369
bot which will tweet the schedule at you

1721
01:22:21,140 --> 01:22:24,560
if you want to catch the series live

1722
01:22:22,369 --> 01:22:26,149
that is the best way to find out when

1723
01:22:24,560 --> 01:22:27,740
it's going to be so if you're interested

1724
01:22:26,149 --> 01:22:30,559
in catching more of these dreams that's

1725
01:22:27,739 --> 01:22:32,599
the place to check out for now i am

1726
01:22:30,560 --> 01:22:35,060
going to sign off but i will be back

1727
01:22:32,600 --> 01:22:38,090
here not tomorrow because tomorrow's a

1728
01:22:35,060 --> 01:22:40,190
day off but friday 5 p.m. pacific

1729
01:22:38,090 --> 01:22:43,640
daylight time same time same place on

1730
01:22:40,189 --> 01:22:46,129
friday and i will probably be doing some

1731
01:22:43,640 --> 01:22:48,140
work on changing the code over to Cindy

1732
01:22:46,130 --> 01:22:49,579
so that we can make sure that our that

1733
01:22:48,140 --> 01:22:52,430
nothing that we did with the sound code

1734
01:22:49,579 --> 01:22:53,510
is going to be confusing and Cindy and

1735
01:22:52,430 --> 01:22:55,400
we can make sure everything lines up

1736
01:22:53,510 --> 01:22:57,440
nicely and just you know get everything

1737
01:22:55,399 --> 01:22:58,670
kind of nicely button down and be sure

1738
01:22:57,439 --> 01:23:00,559
that architectural e it all works

1739
01:22:58,670 --> 01:23:03,079
properly so we'll go ahead and do that

1740
01:23:00,560 --> 01:23:05,090
and then we will kind of be able to

1741
01:23:03,079 --> 01:23:07,519
check sound off our system off of our

1742
01:23:05,090 --> 01:23:09,350
to-do list until much later if we decide

1743
01:23:07,520 --> 01:23:11,570
we want additional features so that's

1744
01:23:09,350 --> 01:23:15,140
pretty good pretty excited about that

1745
01:23:11,569 --> 01:23:16,519
and we can go back to buttoning up the

1746
01:23:15,140 --> 01:23:18,020
asset system which is basically just a

1747
01:23:16,520 --> 01:23:19,700
memory man management some of this time

1748
01:23:18,020 --> 01:23:21,140
so we're about to check out some pretty

1749
01:23:19,699 --> 01:23:23,420
big to-do items and that's pretty great

1750
01:23:21,140 --> 01:23:24,740
that would allow us to move on to some

1751
01:23:23,420 --> 01:23:27,380
of the final stuff that we have before

1752
01:23:24,739 --> 01:23:28,489
we can do game coding so pretty excited

1753
01:23:27,380 --> 01:23:31,319
about it things are going pretty well I

1754
01:23:28,489 --> 01:23:33,269
think and yeah

1755
01:23:31,319 --> 01:23:34,920
I'm pretty happy with with the progress

1756
01:23:33,270 --> 01:23:37,650
that we've made so give yourself a pat

1757
01:23:34,920 --> 01:23:39,328
on the back and I will see you guys on

1758
01:23:37,649 --> 01:23:41,729
Friday have a good thursday if I don't

1759
01:23:39,328 --> 01:23:44,509
see on the internet until then happy

1760
01:23:41,729 --> 01:23:44,509
coding everyone

