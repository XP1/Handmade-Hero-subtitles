1
00:00:02,359 --> 00:00:06,179
okay hello everyone and welcome to

2
00:00:04,740 --> 00:00:08,910
handmade here are the show recode a

3
00:00:06,179 --> 00:00:10,830
complete game live on twitch no

4
00:00:08,910 --> 00:00:13,410
library's no engine we got to do

5
00:00:10,830 --> 00:00:15,240
everything ourselves and again the

6
00:00:13,410 --> 00:00:16,829
reason why we do this is two reasons one

7
00:00:15,240 --> 00:00:18,929
so that you can sort of have the

8
00:00:16,829 --> 00:00:20,278
complete freedom to do whatever you want

9
00:00:18,929 --> 00:00:21,509
on a game it's so that by the time

10
00:00:20,278 --> 00:00:22,589
you're done with handmade hero you

11
00:00:21,510 --> 00:00:24,630
pretty much know how absolutely

12
00:00:22,589 --> 00:00:27,000
everything works and that's a pretty

13
00:00:24,629 --> 00:00:28,379
powerful thing to be able to do to know

14
00:00:27,000 --> 00:00:31,259
and to be able to do depending on the

15
00:00:28,379 --> 00:00:32,609
circumstance but also it's it's honestly

16
00:00:31,260 --> 00:00:33,719
it's a lot of fun we get to play with a

17
00:00:32,609 --> 00:00:36,179
lot of stuff that you don't typically

18
00:00:33,719 --> 00:00:38,160
get to do and we kind of try to bring

19
00:00:36,179 --> 00:00:39,509
back that old-school feeling of being

20
00:00:38,159 --> 00:00:40,889
able to sit down at a computer and sort

21
00:00:39,509 --> 00:00:43,019
of start poking if the innards as much

22
00:00:40,890 --> 00:00:44,579
as possible at least to the extent that

23
00:00:43,020 --> 00:00:46,230
windows lets us which is not always as

24
00:00:44,579 --> 00:00:48,600
much as we'd like but you know what are

25
00:00:46,229 --> 00:00:50,849
you gonna do that's the that's the state

26
00:00:48,600 --> 00:00:52,350
of the world these days I'm gonna go

27
00:00:50,850 --> 00:00:54,059
ahead and get started here if you would

28
00:00:52,350 --> 00:00:57,750
like to follow along at home we are on

29
00:00:54,058 --> 00:00:59,698
day 99 so if you have free order of the

30
00:00:57,750 --> 00:01:01,320
game you have X to the source code you

31
00:00:59,698 --> 00:01:02,608
can go ahead and download day 98 source

32
00:01:01,320 --> 00:01:04,558
code and unzip that into directory

33
00:01:02,609 --> 00:01:09,118
you'll be exactly where I am right now

34
00:01:04,558 --> 00:01:12,118
and where I am right now is actually

35
00:01:09,118 --> 00:01:15,239
that's kind of an interesting breaking

36
00:01:12,118 --> 00:01:18,650
point here where we kind of have to we

37
00:01:15,239 --> 00:01:21,359
kind of got to do a bunch of work to to

38
00:01:18,650 --> 00:01:23,250
sort of push forwards we wanted to add

39
00:01:21,359 --> 00:01:25,590
lighting to the game and we did the work

40
00:01:23,250 --> 00:01:27,390
to add normal maps to our pipeline but

41
00:01:25,590 --> 00:01:29,939
what we have not done yet is actually

42
00:01:27,390 --> 00:01:32,460
produced anything that the normal Maps

43
00:01:29,938 --> 00:01:35,339
can sample from we essentially don't

44
00:01:32,459 --> 00:01:37,289
have any kind of a light field and so we

45
00:01:35,340 --> 00:01:39,118
need to do now is we need to figure out

46
00:01:37,290 --> 00:01:42,540
a way that we're gonna be able to get a

47
00:01:39,118 --> 00:01:44,578
light field of some kind and so that's

48
00:01:42,540 --> 00:01:46,170
what we've got to tackle today now we

49
00:01:44,578 --> 00:01:48,509
had to reboot the machine pre stream

50
00:01:46,170 --> 00:01:52,920
because machine is old and it doesn't

51
00:01:48,509 --> 00:01:55,170
really work so well but so I gotta go

52
00:01:52,920 --> 00:01:56,790
ahead and get Visual Studio back into a

53
00:01:55,170 --> 00:01:59,969
state where it's working here it seems

54
00:01:56,790 --> 00:02:00,450
to be relatively good there so that's

55
00:01:59,968 --> 00:02:02,669
fine

56
00:02:00,450 --> 00:02:05,728
I gotta open up our blackboard which

57
00:02:02,670 --> 00:02:08,788
hopefully is saved at the location where

58
00:02:05,728 --> 00:02:15,509
we were last time let's see here

59
00:02:08,788 --> 00:02:17,848
today's there it is okay so yeah let's

60
00:02:15,509 --> 00:02:20,459
just real quick

61
00:02:17,848 --> 00:02:23,039
I'm just gonna say what we kind of need

62
00:02:20,459 --> 00:02:28,170
to do here in order to make forward

63
00:02:23,039 --> 00:02:32,030
progress on our on our lighting so here

64
00:02:28,169 --> 00:02:35,280
on day 99 really what we're looking for

65
00:02:32,030 --> 00:02:35,939
so I gotta move this over here let's try

66
00:02:35,280 --> 00:02:40,890
that again

67
00:02:35,939 --> 00:02:47,280
so here's day 99 so what we have to do

68
00:02:40,889 --> 00:02:51,149
now is we have to make some light fields

69
00:02:47,280 --> 00:02:52,829
and what we want to do here is we

70
00:02:51,150 --> 00:02:54,629
already sort of talked about this what

71
00:02:52,829 --> 00:02:57,299
we were going to do we want to be able

72
00:02:54,628 --> 00:03:00,000
to sample the lighting in the world so

73
00:02:57,299 --> 00:03:02,400
that at any given point we can sort of

74
00:03:00,000 --> 00:03:05,098
get some notion of what's going on

75
00:03:02,400 --> 00:03:06,510
around us in terms of light and so

76
00:03:05,098 --> 00:03:08,969
there's a couple different ways that we

77
00:03:06,509 --> 00:03:10,769
talked about doing that two of which are

78
00:03:08,969 --> 00:03:11,818
relatively straightforward for us to

79
00:03:10,769 --> 00:03:13,799
implement which was the ones we'll try

80
00:03:11,818 --> 00:03:14,878
to do today and one of which is still

81
00:03:13,799 --> 00:03:16,980
kind of a little up in the air because

82
00:03:14,878 --> 00:03:18,959
we're not sure exactly how we're going

83
00:03:16,979 --> 00:03:20,518
to produce that field but what we need

84
00:03:18,959 --> 00:03:23,909
to do is we need to produce three light

85
00:03:20,519 --> 00:03:26,280
fields eventually we kind of talked

86
00:03:23,909 --> 00:03:31,889
about these before we've got you know a

87
00:03:26,280 --> 00:03:34,019
top a middle right and a bottom that we

88
00:03:31,889 --> 00:03:36,120
wanted to produce and these are

89
00:03:34,019 --> 00:03:38,519
basically three different bitmaps that

90
00:03:36,120 --> 00:03:40,859
we want to be able to pull data from in

91
00:03:38,519 --> 00:03:43,530
order to compute the lighting and the

92
00:03:40,859 --> 00:03:45,510
way these work essentially is you can

93
00:03:43,530 --> 00:03:49,199
imagine them all sort of stacked on top

94
00:03:45,509 --> 00:03:51,750
of each other right like so and we're

95
00:03:49,199 --> 00:03:52,949
sort of imagining again because we

96
00:03:51,750 --> 00:03:54,840
really have to come up with

97
00:03:52,949 --> 00:03:57,060
approximations and hacks for lighting in

98
00:03:54,840 --> 00:03:58,408
2d because you know we don't really know

99
00:03:57,060 --> 00:04:01,079
what the full description of the world

100
00:03:58,408 --> 00:04:03,870
is so we can't do any kind of you know

101
00:04:01,079 --> 00:04:05,479
fully real simulation and even in 3d you

102
00:04:03,870 --> 00:04:08,400
can't do real simulation but you can do

103
00:04:05,479 --> 00:04:10,109
closer approximation certainly what

104
00:04:08,400 --> 00:04:12,449
we're kind of pretending is the middle

105
00:04:10,109 --> 00:04:14,370
layer right so this guy here these are

106
00:04:12,449 --> 00:04:16,319
our layers stacked up on top of each

107
00:04:14,370 --> 00:04:18,269
other the middle layer is sort of where

108
00:04:16,319 --> 00:04:21,180
things are in the world you might say

109
00:04:18,269 --> 00:04:22,160
and so we're kind of thinking of this as

110
00:04:21,180 --> 00:04:25,400
being the ground

111
00:04:22,160 --> 00:04:27,439
and this is being the sky and so when we

112
00:04:25,399 --> 00:04:29,810
sample you know when we when we sort of

113
00:04:27,439 --> 00:04:31,399
are looking at lighting essentially what

114
00:04:29,810 --> 00:04:34,339
we're saying is when we want to sort of

115
00:04:31,399 --> 00:04:36,079
look cast out lighting around us to see

116
00:04:34,339 --> 00:04:38,209
what kind of light is incident on a

117
00:04:36,079 --> 00:04:40,129
surface we're sort of saying that all

118
00:04:38,209 --> 00:04:42,379
right we're gonna produce a ground

119
00:04:40,129 --> 00:04:44,569
bitmap that we'll use probably as the

120
00:04:42,379 --> 00:04:46,550
ground as well right we want to produce

121
00:04:44,569 --> 00:04:48,860
a ground bitmap and that we can probably

122
00:04:46,550 --> 00:04:50,870
just use and sample our lighting out of

123
00:04:48,860 --> 00:04:52,670
that right and then we could have a sky

124
00:04:50,870 --> 00:04:54,829
bitmap which is some bitmap that just

125
00:04:52,670 --> 00:04:57,110
represents what's up there in the sky as

126
00:04:54,829 --> 00:04:59,300
well and we could sample from that and

127
00:04:57,110 --> 00:05:03,410
those two would make our top and our

128
00:04:59,300 --> 00:05:04,759
bottom light fields to sample from what

129
00:05:03,410 --> 00:05:07,580
we were calling sort of environment maps

130
00:05:04,759 --> 00:05:09,889
for now and then we've got a middle that

131
00:05:07,579 --> 00:05:11,300
is really like the part that's gonna be

132
00:05:09,889 --> 00:05:14,000
a little more tricky and what we want to

133
00:05:11,300 --> 00:05:16,150
be able to do with the middle map is we

134
00:05:14,000 --> 00:05:19,279
want to be able to sort of use some

135
00:05:16,149 --> 00:05:21,949
amount of occlusion in here so that you

136
00:05:19,279 --> 00:05:23,419
know as a light passes by let's say

137
00:05:21,949 --> 00:05:25,129
there's a moving light source that's

138
00:05:23,420 --> 00:05:27,920
passing by the place that we're sampling

139
00:05:25,129 --> 00:05:29,870
we want to get that sort of passing by

140
00:05:27,920 --> 00:05:32,090
effect so that the light kind of plays

141
00:05:29,870 --> 00:05:34,910
across the surface of whatever we're

142
00:05:32,089 --> 00:05:36,859
sampling and furthermore if there's

143
00:05:34,910 --> 00:05:39,320
large objects like if there's something

144
00:05:36,860 --> 00:05:42,800
big in between these two we want not

145
00:05:39,319 --> 00:05:45,139
very much light to get past to see the

146
00:05:42,800 --> 00:05:46,819
point that we're talking about so this

147
00:05:45,139 --> 00:05:48,709
middle map is really going to be the one

148
00:05:46,819 --> 00:05:50,509
where most of the trickery comes in the

149
00:05:48,709 --> 00:05:52,370
top and the bottom maps are really gonna

150
00:05:50,509 --> 00:05:54,980
be a lot easier they're mostly going to

151
00:05:52,370 --> 00:05:57,980
be more about bookkeeping they're more

152
00:05:54,980 --> 00:06:01,550
about making sure that our renderer can

153
00:05:57,980 --> 00:06:04,069
first save a copy of whatever that base

154
00:06:01,550 --> 00:06:06,410
layer ground is before it starts to

155
00:06:04,069 --> 00:06:08,240
splat stuff on top of it because we need

156
00:06:06,410 --> 00:06:10,730
to be able to sample from the unspotted

157
00:06:08,240 --> 00:06:13,629
version right and that's really all

158
00:06:10,730 --> 00:06:16,460
we're talking about here in terms of

159
00:06:13,629 --> 00:06:17,600
producing these maps the sky map since

160
00:06:16,459 --> 00:06:19,489
that's not something that you ever

161
00:06:17,600 --> 00:06:21,830
direct directly see it's basically

162
00:06:19,490 --> 00:06:24,439
something that is unseen by the player

163
00:06:21,829 --> 00:06:26,750
but that's sort of what's above the

164
00:06:24,439 --> 00:06:29,029
world can really be whatever we want but

165
00:06:26,750 --> 00:06:32,660
we'll probably want to put stuff in

166
00:06:29,029 --> 00:06:33,859
there you know it depends on exactly

167
00:06:32,660 --> 00:06:36,169
what we want to do but you could imagine

168
00:06:33,860 --> 00:06:38,389
if there's things like sort of

169
00:06:36,168 --> 00:06:40,038
above the player like if they're in a

170
00:06:38,389 --> 00:06:42,530
dungeon or something and light is coming

171
00:06:40,038 --> 00:06:44,300
down through there we can stick light in

172
00:06:42,529 --> 00:06:45,918
there so things that are below it up

173
00:06:44,300 --> 00:06:48,199
here to have this extra light

174
00:06:45,918 --> 00:06:51,258
Commandment and it sort of it suggests

175
00:06:48,199 --> 00:06:53,180
what is up here if you will so that's

176
00:06:51,259 --> 00:06:56,360
kind of just some something to think

177
00:06:53,180 --> 00:06:58,218
about so what we need to do today before

178
00:06:56,360 --> 00:06:59,840
we can make any more progress on our

179
00:06:58,218 --> 00:07:01,248
normal mapping stuff which we've sort of

180
00:06:59,839 --> 00:07:03,138
done most of the work for but we haven't

181
00:07:01,249 --> 00:07:06,110
really gone and really finished it up

182
00:07:03,139 --> 00:07:08,990
what we have to do today is now go and

183
00:07:06,110 --> 00:07:10,669
produce some of these maps at least the

184
00:07:08,990 --> 00:07:12,379
top and the bottom map and the middle

185
00:07:10,668 --> 00:07:14,329
one I guess we can sort of leave out for

186
00:07:12,379 --> 00:07:16,310
now but we need to at least produce the

187
00:07:14,329 --> 00:07:19,550
top and the bottom map so that we can

188
00:07:16,310 --> 00:07:22,278
have some semblance of a real you know a

189
00:07:19,550 --> 00:07:23,840
test map to sample from just to see if

190
00:07:22,278 --> 00:07:26,389
our normal map is working and to give us

191
00:07:23,839 --> 00:07:27,318
some idea of what's going on there so we

192
00:07:26,389 --> 00:07:29,028
don't really need to do anything

193
00:07:27,319 --> 00:07:31,158
particularly special with those right

194
00:07:29,028 --> 00:07:34,399
now we can literally make test patterns

195
00:07:31,158 --> 00:07:38,180
in them and then see to it that the test

196
00:07:34,399 --> 00:07:40,310
patterns actually are respected right so

197
00:07:38,180 --> 00:07:43,129
let's go ahead and do that right let's

198
00:07:40,310 --> 00:07:44,750
go ahead and and and start to get that

199
00:07:43,129 --> 00:07:48,588
going because it's really gonna be a

200
00:07:44,750 --> 00:07:50,838
bunch of wiring right so at the moment

201
00:07:48,588 --> 00:07:52,968
we can sort of do that by saying we've

202
00:07:50,838 --> 00:07:55,579
got these environment maps right where

203
00:07:52,968 --> 00:07:58,370
are those guys handmade render group

204
00:07:55,579 --> 00:08:00,378
we've got these environment maps here so

205
00:07:58,370 --> 00:08:02,449
what we'll do is we'll start by creating

206
00:08:00,379 --> 00:08:04,218
some space for those those environment

207
00:08:02,449 --> 00:08:06,199
maps in here and then we'll sort of

208
00:08:04,218 --> 00:08:09,860
progress and push them outwards as we

209
00:08:06,199 --> 00:08:12,080
need to as we sort of like make the

210
00:08:09,860 --> 00:08:13,838
renderer into more and more of a thing

211
00:08:12,079 --> 00:08:16,519
so hmm

212
00:08:13,838 --> 00:08:18,439
I'm just gonna go ahead and drop those I

213
00:08:16,519 --> 00:08:19,668
think those probably should really just

214
00:08:18,439 --> 00:08:21,680
be down here because they're things that

215
00:08:19,668 --> 00:08:23,838
are fairly dynamic so I'm gonna put them

216
00:08:21,680 --> 00:08:25,250
down here in fact I guess these are

217
00:08:23,838 --> 00:08:27,649
really transient things so I guess I'll

218
00:08:25,250 --> 00:08:32,809
put them with the ground buffers so

219
00:08:27,649 --> 00:08:34,698
let's call these our ground or sky I

220
00:08:32,809 --> 00:08:37,549
guess or I guess we could call them our

221
00:08:34,698 --> 00:08:39,528
top or end top and bottom since we don't

222
00:08:37,549 --> 00:08:42,549
really know that sky right it could be

223
00:08:39,528 --> 00:08:42,549
some other thing

224
00:08:44,100 --> 00:08:51,930
and in the middle so what I need to do

225
00:08:50,490 --> 00:08:54,000
now is I need to just allocate some

226
00:08:51,929 --> 00:08:55,169
space for these guys and I guess I don't

227
00:08:54,000 --> 00:08:57,269
really need these to be pointers they

228
00:08:55,169 --> 00:09:00,569
can just be that and then I'll make the

229
00:08:57,269 --> 00:09:02,279
bitmaps in them now the question we have

230
00:09:00,570 --> 00:09:04,800
here there is a kind of an open question

231
00:09:02,279 --> 00:09:07,199
which is just how big should these maps

232
00:09:04,799 --> 00:09:09,240
be and that's a good question right

233
00:09:07,200 --> 00:09:11,790
because this is lighting we don't

234
00:09:09,240 --> 00:09:13,590
necessarily need it to be at the same

235
00:09:11,789 --> 00:09:15,990
resolution as we would do everything

236
00:09:13,590 --> 00:09:17,759
else we could say that's going to be

237
00:09:15,990 --> 00:09:20,009
sort of a sub sampling of that I'm not

238
00:09:17,759 --> 00:09:22,139
sure yet so but that's just something to

239
00:09:20,009 --> 00:09:24,990
think of as we don't really know what we

240
00:09:22,139 --> 00:09:28,259
want these environment maps resolutions

241
00:09:24,990 --> 00:09:31,080
really to be but so I'll just say you

242
00:09:28,259 --> 00:09:32,279
know M map width and nmap height are

243
00:09:31,080 --> 00:09:34,650
going to be things that we'll specify

244
00:09:32,279 --> 00:09:36,870
for now outside and we'll just assume

245
00:09:34,649 --> 00:09:39,269
that we have made these environment maps

246
00:09:36,870 --> 00:09:44,310
to whatever the specification is here

247
00:09:39,269 --> 00:09:46,799
okay so going into handmade CPP where we

248
00:09:44,309 --> 00:09:49,049
actually initiate sort of our transient

249
00:09:46,799 --> 00:09:52,709
stuff when we're when we're doing this

250
00:09:49,049 --> 00:09:55,799
initialization we can also here do our M

251
00:09:52,710 --> 00:09:58,680
top middle and bottom stuff and our M

252
00:09:55,799 --> 00:09:59,929
width and height that sort of thing so

253
00:09:58,679 --> 00:10:03,599
what I'm going to do is I'm going to say

254
00:09:59,929 --> 00:10:05,669
that the trans state right that is going

255
00:10:03,600 --> 00:10:07,860
to initialize the end map with and I'm

256
00:10:05,669 --> 00:10:10,860
just gonna say that the end map width

257
00:10:07,860 --> 00:10:13,320
and height are gonna be let's say five

258
00:10:10,860 --> 00:10:16,169
twelve I'm just pulling these totally

259
00:10:13,320 --> 00:10:19,770
randomly 512 by 256 that's just what

260
00:10:16,169 --> 00:10:21,029
it's going to be you know why not and I

261
00:10:19,769 --> 00:10:23,279
guess what I could do to make this a

262
00:10:21,029 --> 00:10:24,720
little bit easier on us as I could just

263
00:10:23,279 --> 00:10:27,689
make this an erase we could initialize

264
00:10:24,720 --> 00:10:33,509
them in a loop and we'll just know you

265
00:10:27,690 --> 00:10:36,600
know that 0 is top and 2 is bottom all

266
00:10:33,509 --> 00:10:44,189
right once middle that's what those are

267
00:10:36,600 --> 00:10:47,129
going to be set to and you know I think

268
00:10:44,190 --> 00:10:48,450
about it Z going up makes a little more

269
00:10:47,129 --> 00:10:49,679
sense doesn't it that's the way the rest

270
00:10:48,450 --> 00:10:51,420
of our coordinate system works might as

271
00:10:49,679 --> 00:10:54,599
well try to stay a little consistent

272
00:10:51,419 --> 00:10:57,360
there so all right so let's go through

273
00:10:54,600 --> 00:10:59,430
these in the list in a loop rather so

274
00:10:57,360 --> 00:11:02,519
we've got our map index and our map

275
00:10:59,429 --> 00:11:07,528
index is going to run from 0 to however

276
00:11:02,519 --> 00:11:13,259
many of these we have right and then we

277
00:11:07,528 --> 00:11:15,659
are going to take whichever environment

278
00:11:13,259 --> 00:11:20,389
map we're on alright so here is our map

279
00:11:15,659 --> 00:11:25,230
we take it out from the end Maps array

280
00:11:20,389 --> 00:11:28,350
one at a time and we go ahead and

281
00:11:25,230 --> 00:11:30,389
initialize all of the LOD s in there

282
00:11:28,350 --> 00:11:31,950
right and remember what we said these

283
00:11:30,389 --> 00:11:33,990
LEDs were going to be is they were going

284
00:11:31,950 --> 00:11:37,320
to be successively blurrier versions of

285
00:11:33,990 --> 00:11:39,329
the same map right so we start with you

286
00:11:37,320 --> 00:11:41,610
know an LOD that's at the full

287
00:11:39,328 --> 00:11:45,539
resolution of M map with MF height and

288
00:11:41,610 --> 00:11:47,909
each time through we basically have that

289
00:11:45,539 --> 00:11:52,349
size so that it gets smaller and smaller

290
00:11:47,909 --> 00:11:53,879
so okay get rid of that so what we now

291
00:11:52,350 --> 00:11:56,040
want to do is we want to do another loop

292
00:11:53,879 --> 00:11:59,129
inside which is whichever LOD index this

293
00:11:56,039 --> 00:12:02,039
is or LOD index this is and that's going

294
00:11:59,129 --> 00:12:04,049
to go all the way to however many

295
00:12:02,039 --> 00:12:06,569
elements are in that array the moment

296
00:12:04,049 --> 00:12:08,969
we've said there are four and so what we

297
00:12:06,570 --> 00:12:10,769
can do then is say that the map LOD at

298
00:12:08,970 --> 00:12:14,759
that index is going to be one of those

299
00:12:10,769 --> 00:12:17,220
make empty bitmap calls which we already

300
00:12:14,759 --> 00:12:20,309
have which I believe is set up to to

301
00:12:17,220 --> 00:12:22,680
allocate space for us so all we really

302
00:12:20,309 --> 00:12:24,179
have to do is just give it that and it

303
00:12:22,679 --> 00:12:26,879
will it will go ahead and push size on

304
00:12:24,179 --> 00:12:29,099
to our transient arena to store that map

305
00:12:26,879 --> 00:12:32,278
so what we can do there is say all right

306
00:12:29,100 --> 00:12:38,430
let's go ahead and get that done we'll

307
00:12:32,278 --> 00:12:40,799
pass the trans Arena right yeah that's

308
00:12:38,429 --> 00:12:43,109
our transient Arena there we will pass

309
00:12:40,799 --> 00:12:45,208
whatever the width and height is that we

310
00:12:43,110 --> 00:12:46,470
want of this particular thing and then I

311
00:12:45,208 --> 00:12:47,639
guess we might as well clear it to zero

312
00:12:46,470 --> 00:12:50,250
though I guess I don't really know that

313
00:12:47,639 --> 00:12:51,269
we need to do that it's probably to be

314
00:12:50,250 --> 00:12:55,198
honest I guess we don't really need to

315
00:12:51,269 --> 00:12:57,690
because we got to fill it with stuff so

316
00:12:55,198 --> 00:12:59,759
anyway what we want to do is start out

317
00:12:57,690 --> 00:13:01,470
because we want this to be successively

318
00:12:59,759 --> 00:13:03,899
lower levels of detail what we want to

319
00:13:01,470 --> 00:13:06,180
do is start out with that sort of width

320
00:13:03,899 --> 00:13:08,549
and height that we are saying that the

321
00:13:06,179 --> 00:13:10,229
highest level of detail should be and

322
00:13:08,549 --> 00:13:11,759
then each time through

323
00:13:10,230 --> 00:13:13,649
I'm just gonna go ahead and shift that

324
00:13:11,759 --> 00:13:17,399
down by one so that we essentially get

325
00:13:13,649 --> 00:13:19,799
half the size in each dimension which is

326
00:13:17,399 --> 00:13:22,350
a you know a quarter of the size for the

327
00:13:19,799 --> 00:13:24,779
bitmap right so that should produce for

328
00:13:22,350 --> 00:13:26,820
us that sort of cascading level detail

329
00:13:24,779 --> 00:13:28,649
where we have maps that are first you

330
00:13:26,820 --> 00:13:30,180
know the full size then a quarter the

331
00:13:28,649 --> 00:13:30,539
size that a quarter of that size like an

332
00:13:30,179 --> 00:13:34,819
eighth

333
00:13:30,539 --> 00:13:38,009
I'm sorry sixteenth and and so on right

334
00:13:34,820 --> 00:13:39,930
so that should give us the maps then

335
00:13:38,009 --> 00:13:42,840
when we're down here we have to have a

336
00:13:39,929 --> 00:13:45,179
way to actually you know sort of pass

337
00:13:42,840 --> 00:13:47,430
those maps which we've sort of been

338
00:13:45,179 --> 00:13:48,689
passing nothing right so what we're

339
00:13:47,429 --> 00:13:50,759
gonna do is we're gonna stop start

340
00:13:48,690 --> 00:13:52,170
passing those maps really pretty

341
00:13:50,759 --> 00:13:55,470
straightforward right we're just going

342
00:13:52,169 --> 00:13:58,169
to pass the end maps as they come so

343
00:13:55,470 --> 00:14:01,050
we've got the first end map like so

344
00:13:58,169 --> 00:14:04,769
we've got the second oops that's not a

345
00:14:01,049 --> 00:14:07,319
game state that's trans state so and

346
00:14:04,769 --> 00:14:09,480
then that final one now I believe these

347
00:14:07,320 --> 00:14:11,870
go these went in the other order right

348
00:14:09,480 --> 00:14:16,200
but I'm going to look it up first in our

349
00:14:11,870 --> 00:14:19,139
render group so the coordinate system

350
00:14:16,200 --> 00:14:21,750
when we actually push one of those on it

351
00:14:19,139 --> 00:14:24,210
takes the top and the middle and the

352
00:14:21,750 --> 00:14:26,129
bottom like so and that's how we said

353
00:14:24,210 --> 00:14:28,350
that those weren't coded so that's what

354
00:14:26,129 --> 00:14:30,450
those are and if I compile that now I

355
00:14:28,350 --> 00:14:32,460
can just go and clean up anything that

356
00:14:30,450 --> 00:14:36,090
we had there oh of course the render

357
00:14:32,460 --> 00:14:38,730
group that that's a environment map is

358
00:14:36,090 --> 00:14:41,399
this not do we not pound include we

359
00:14:38,730 --> 00:14:42,120
don't pound include any of the render

360
00:14:41,399 --> 00:14:44,250
stuff here

361
00:14:42,120 --> 00:14:45,899
I think that's probably a mistake so

362
00:14:44,250 --> 00:14:48,659
honestly I think what I'd like to do is

363
00:14:45,899 --> 00:14:52,039
go ahead and and pull that out here I'd

364
00:14:48,659 --> 00:14:55,860
like that to be included up here ideally

365
00:14:52,039 --> 00:14:58,889
but oh and of course loaded bitmap is

366
00:14:55,860 --> 00:15:02,909
not there but that should also be moved

367
00:14:58,889 --> 00:15:04,439
out looks like I made that a little bit

368
00:15:02,909 --> 00:15:07,289
too high up as well here's where we're

369
00:15:04,440 --> 00:15:10,410
actually putting this stuff like so but

370
00:15:07,289 --> 00:15:12,029
loaded bitmap I'm gonna actually pull

371
00:15:10,409 --> 00:15:13,139
that out into the render group as well

372
00:15:12,029 --> 00:15:15,659
because that's something that probably

373
00:15:13,139 --> 00:15:21,090
eventually wants to live in some sort of

374
00:15:15,659 --> 00:15:23,889
rendering oriented context so what is

375
00:15:21,090 --> 00:15:25,329
happening here okay so these are

376
00:15:23,889 --> 00:15:27,129
winters and they really should not have

377
00:15:25,328 --> 00:15:29,588
been pointers that was a mistake

378
00:15:27,129 --> 00:15:33,579
so let's get rid of that and then we

379
00:15:29,589 --> 00:15:36,189
should be able to compile and let's see

380
00:15:33,578 --> 00:15:39,488
here sample environment map looks like

381
00:15:36,188 --> 00:15:41,078
everything is kosher now of course these

382
00:15:39,489 --> 00:15:42,220
maps just have garbage in them well

383
00:15:41,078 --> 00:15:44,378
actually guess technically they have

384
00:15:42,220 --> 00:15:45,790
just zero in them at the moment because

385
00:15:44,379 --> 00:15:46,869
they're in the trainer Rita which would

386
00:15:45,789 --> 00:15:50,078
have been cleared when it was initially

387
00:15:46,869 --> 00:15:52,329
passed to us so we should really get

388
00:15:50,078 --> 00:15:53,948
nothing in particular happening here

389
00:15:52,328 --> 00:15:56,769
there should be no lighting contribution

390
00:15:53,948 --> 00:15:59,139
from them which is fine that's totally

391
00:15:56,769 --> 00:16:01,418
what we would have expected so now what

392
00:15:59,139 --> 00:16:03,339
we want to do is we want to actually put

393
00:16:01,418 --> 00:16:05,859
start putting something in there so that

394
00:16:03,339 --> 00:16:08,470
we can start actually sampling from it

395
00:16:05,859 --> 00:16:11,769
so what I would like to do first is I'd

396
00:16:08,470 --> 00:16:15,040
like to actually request that we draw

397
00:16:11,769 --> 00:16:17,769
these maps somewhere so that I can see

398
00:16:15,039 --> 00:16:20,168
that they're actually you know doing

399
00:16:17,769 --> 00:16:22,928
something right I want to actually I

400
00:16:20,168 --> 00:16:25,869
want to be able to verify that these

401
00:16:22,928 --> 00:16:27,399
maps are having something in them that

402
00:16:25,869 --> 00:16:29,350
we think that they have in them right I

403
00:16:27,399 --> 00:16:31,448
don't want to just start trying to

404
00:16:29,350 --> 00:16:32,949
sample them blind so the first thing I'm

405
00:16:31,448 --> 00:16:34,719
going to do is I'm going to in here

406
00:16:32,948 --> 00:16:37,418
where we draw the you know do the

407
00:16:34,720 --> 00:16:39,790
coordinate system call what I'd like to

408
00:16:37,418 --> 00:16:42,369
do is I'd like to go ahead and add some

409
00:16:39,789 --> 00:16:44,738
calls before we do that to draw what is

410
00:16:42,369 --> 00:16:46,480
in at least the top level of the

411
00:16:44,739 --> 00:16:48,040
environment map which I don't actually

412
00:16:46,480 --> 00:16:53,079
know if there's anything else that we're

413
00:16:48,039 --> 00:16:57,129
using at the moment a lot index may or

414
00:16:53,078 --> 00:16:59,019
may not be doing in this so we are

415
00:16:57,129 --> 00:17:02,980
actually using the roughness to

416
00:16:59,019 --> 00:17:10,179
determine what laud index to use so I

417
00:17:02,980 --> 00:17:13,689
guess the question is which roughness

418
00:17:10,179 --> 00:17:16,769
level did we actually put in there when

419
00:17:13,689 --> 00:17:22,470
we did make a sphere normal map

420
00:17:16,769 --> 00:17:24,609
roughness makes P R normal

421
00:17:22,470 --> 00:17:26,799
zero-zero so we're still sampling from

422
00:17:24,609 --> 00:17:29,769
the we're always gonna be sampling from

423
00:17:26,799 --> 00:17:30,879
that most from that topmost LOD right

424
00:17:29,769 --> 00:17:33,069
you can see here that we've got

425
00:17:30,880 --> 00:17:34,600
roughness times whatever that array

426
00:17:33,069 --> 00:17:37,089
count is and we're rounding that so

427
00:17:34,599 --> 00:17:38,980
that's base is going to give us you know

428
00:17:37,089 --> 00:17:40,209
if we're passing zero that's which is

429
00:17:38,980 --> 00:17:40,839
what we said the roughness was

430
00:17:40,210 --> 00:17:43,210
everywhere

431
00:17:40,839 --> 00:17:47,819
that's going to give us always that

432
00:17:43,210 --> 00:17:51,549
top-level LOD so that should be fine so

433
00:17:47,819 --> 00:17:53,500
when we've done this when we've when

434
00:17:51,549 --> 00:17:55,059
we've gone to draw these I really just

435
00:17:53,500 --> 00:17:56,200
need to draw that top level so that we

436
00:17:55,059 --> 00:17:58,059
can take a look at what that looks like

437
00:17:56,200 --> 00:17:59,920
and then at least know what we're

438
00:17:58,059 --> 00:18:02,379
sampling from so I'm gonna go ahead and

439
00:17:59,920 --> 00:18:04,720
take this coordinate system call here

440
00:18:02,380 --> 00:18:09,010
and I'm just gonna make another one of

441
00:18:04,720 --> 00:18:12,160
them like so where I'm going to say all

442
00:18:09,009 --> 00:18:14,980
right ignore the environment Maps ignore

443
00:18:12,160 --> 00:18:19,269
the tree normal map all that stuff let's

444
00:18:14,980 --> 00:18:20,589
just draw somewhere in the world and I'm

445
00:18:19,269 --> 00:18:22,990
not sure where we're gonna put it at the

446
00:18:20,589 --> 00:18:26,439
moment let's just go ahead and draw

447
00:18:22,990 --> 00:18:28,599
though those top-level maps so that's

448
00:18:26,440 --> 00:18:33,970
the Tran State you know the end Maps

449
00:18:28,599 --> 00:18:37,569
right I want to draw zero LOD zero like

450
00:18:33,970 --> 00:18:40,329
so and I want to draw three of these

451
00:18:37,569 --> 00:18:42,579
right I want to draw em from f1 and map

452
00:18:40,329 --> 00:18:44,679
to I just want to draw the top level LOD

453
00:18:42,579 --> 00:18:46,059
and maybe I don't know maybe I'll go

454
00:18:44,680 --> 00:18:47,289
ahead and do this as well in a loop

455
00:18:46,059 --> 00:18:48,789
because this may get a little more

456
00:18:47,289 --> 00:18:51,099
complicated if we want to start drawing

457
00:18:48,789 --> 00:18:52,779
all the LOD levels so let me just go

458
00:18:51,099 --> 00:18:56,169
ahead and say that we're gonna do map

459
00:18:52,779 --> 00:19:03,039
index we'll do it for each of the maps

460
00:18:56,170 --> 00:19:09,180
so there we go and maps and now we

461
00:19:03,039 --> 00:19:12,940
should have a way to draw all of that

462
00:19:09,180 --> 00:19:16,960
now I need to put it somewhere so I

463
00:19:12,940 --> 00:19:20,590
guess I will say let's see the x axis

464
00:19:16,960 --> 00:19:22,990
and the y axis let's let's go ahead and

465
00:19:20,589 --> 00:19:26,859
redefine those here I'm going to say

466
00:19:22,990 --> 00:19:29,349
that the x axis and the y axis are going

467
00:19:26,859 --> 00:19:32,439
to be scaled maybe you know let's let's

468
00:19:29,349 --> 00:19:33,859
say that there's a map scale and the map

469
00:19:32,440 --> 00:19:37,100
scale is going to be like

470
00:19:33,859 --> 00:19:38,750
I don't know 50 it's gonna be 50 and

471
00:19:37,099 --> 00:19:43,250
we'll just say that this is going to be

472
00:19:38,750 --> 00:19:45,679
map scale zero Oh 50 is probably too

473
00:19:43,250 --> 00:19:48,019
much or these are these drawing we're

474
00:19:45,679 --> 00:19:49,548
still in screen spacer aren't we okay so

475
00:19:48,019 --> 00:19:51,470
if we're in screen space that makes it

476
00:19:49,548 --> 00:19:53,779
even easier really what I can do with

477
00:19:51,470 --> 00:19:57,319
the x-axis y-axis stuff is I could

478
00:19:53,779 --> 00:20:01,339
actually just stuff in there what the

479
00:19:57,319 --> 00:20:04,129
the map actual with the actual size of

480
00:20:01,339 --> 00:20:09,409
the LOD of the map is right so I could

481
00:20:04,130 --> 00:20:13,190
just do loaded bitmap LOD equals map la

482
00:20:09,410 --> 00:20:16,910
0 like so and then just say that we're

483
00:20:13,190 --> 00:20:19,580
drawing that and what I can do here is

484
00:20:16,910 --> 00:20:22,970
is make it so that we take out whatever

485
00:20:19,579 --> 00:20:25,668
its width was and whatever its height

486
00:20:22,970 --> 00:20:29,630
was and that's what what will actually

487
00:20:25,669 --> 00:20:31,820
draw it as right so we don't really know

488
00:20:29,630 --> 00:20:35,690
where to draw these yet so I guess I'll

489
00:20:31,819 --> 00:20:39,109
just say map P or something like that

490
00:20:35,690 --> 00:20:43,370
and that looks about right

491
00:20:39,109 --> 00:20:45,798
so there we go map p x-axis y-axis color

492
00:20:43,369 --> 00:20:49,189
LOD the color we don't really care about

493
00:20:45,798 --> 00:20:51,048
that should always be full brightness we

494
00:20:49,190 --> 00:20:53,298
don't want to affect it in any way and

495
00:20:51,048 --> 00:20:56,058
so what I can do here is then say okay

496
00:20:53,298 --> 00:21:00,109
map key plus equals y axis which will

497
00:20:56,058 --> 00:21:02,480
move us down to the next one so we can

498
00:21:00,109 --> 00:21:04,849
draw them and maybe I'll do you know

499
00:21:02,480 --> 00:21:07,130
just a five pixel spacer or something in

500
00:21:04,849 --> 00:21:09,349
here as well right something that can

501
00:21:07,130 --> 00:21:13,460
kind of give us a little bit of a break

502
00:21:09,349 --> 00:21:15,949
between them so we can tell so map key

503
00:21:13,460 --> 00:21:19,548
that will start out I guess will start

504
00:21:15,950 --> 00:21:21,759
out at the at the upper left corner or

505
00:21:19,548 --> 00:21:24,740
the sorry the bottom left corner

506
00:21:21,759 --> 00:21:26,750
assuming that we're we're actually doing

507
00:21:24,740 --> 00:21:30,579
that that we're not doing the Y flip in

508
00:21:26,750 --> 00:21:36,130
here are we yeah

509
00:21:30,579 --> 00:21:43,480
see map LOD cannot convert yes that's

510
00:21:36,130 --> 00:21:45,370
true yeah so let's take a look I

511
00:21:43,480 --> 00:21:46,660
actually think it might still be in the

512
00:21:45,369 --> 00:21:50,369
upper corner now I think about it just

513
00:21:46,660 --> 00:21:55,690
because of the way that that's working

514
00:21:50,369 --> 00:21:58,000
okay what oh oh right

515
00:21:55,690 --> 00:21:59,860
it draws those yellow markers everywhere

516
00:21:58,000 --> 00:22:01,450
so we actually see the yellow markers

517
00:21:59,859 --> 00:22:06,629
for the things we drew I'm actually

518
00:22:01,450 --> 00:22:10,180
gonna I want to draw just one of those

519
00:22:06,630 --> 00:22:11,440
because I also want to know what our

520
00:22:10,180 --> 00:22:12,549
coordinate system is here because we

521
00:22:11,440 --> 00:22:15,519
still haven't finished any of the

522
00:22:12,549 --> 00:22:17,259
renderer coordinate system stuff so all

523
00:22:15,519 --> 00:22:18,549
right so yeah it is it is upper-left

524
00:22:17,259 --> 00:22:20,640
still because these are all actually

525
00:22:18,549 --> 00:22:24,430
screen coordinates that were passing in

526
00:22:20,640 --> 00:22:26,110
so el-oued the end map 0 which is our

527
00:22:24,430 --> 00:22:28,019
bottom map is the one that appears on

528
00:22:26,109 --> 00:22:32,109
the top and then it goes down from there

529
00:22:28,019 --> 00:22:33,490
we might have to scale these by half you

530
00:22:32,109 --> 00:22:35,379
know we might have to do something like

531
00:22:33,490 --> 00:22:37,870
this because otherwise they wouldn't all

532
00:22:35,380 --> 00:22:40,120
fit so if I do that we could actually

533
00:22:37,869 --> 00:22:44,109
probably get all three of them on the

534
00:22:40,119 --> 00:22:46,149
screen you can see them there 1 2 3 and

535
00:22:44,109 --> 00:22:49,119
obviously there's nothing in them right

536
00:22:46,150 --> 00:22:50,530
now the Alpha value is is incorrect

537
00:22:49,119 --> 00:22:51,819
everywhere it's it's going to be zero

538
00:22:50,529 --> 00:22:54,940
everywhere so there's really nothing to

539
00:22:51,819 --> 00:22:57,879
see but we're start to fill them in we

540
00:22:54,940 --> 00:23:03,230
should start to see something so let's

541
00:22:57,880 --> 00:23:07,400
say for starters

542
00:23:03,230 --> 00:23:09,529
I guess every time every frame what we

543
00:23:07,400 --> 00:23:12,769
would want to do is we'll start off by

544
00:23:09,529 --> 00:23:15,230
clearing those guys and drawing some

545
00:23:12,769 --> 00:23:18,679
stuff into them again stuff that we can

546
00:23:15,230 --> 00:23:21,829
test for normal mapping so when we start

547
00:23:18,679 --> 00:23:24,769
off with our rendering I guess what I'll

548
00:23:21,829 --> 00:23:26,359
do is say well I guess I can even do

549
00:23:24,769 --> 00:23:28,759
this down here since this is just test

550
00:23:26,359 --> 00:23:30,949
code at the moment before we start

551
00:23:28,759 --> 00:23:35,750
rendering any of this stuff what I want

552
00:23:30,950 --> 00:23:39,019
to do is actually prepare those Maps so

553
00:23:35,750 --> 00:23:40,819
the easiest thing I could do is I could

554
00:23:39,019 --> 00:23:42,558
actually use the draw rectangle call

555
00:23:40,819 --> 00:23:44,509
from the render group right

556
00:23:42,558 --> 00:23:49,910
I can I can just point the draw

557
00:23:44,509 --> 00:23:53,359
rectangle call at our one of our bitmaps

558
00:23:49,910 --> 00:23:55,340
and I can fill it with a color so the

559
00:23:53,359 --> 00:23:58,219
very first thing that could do is we

560
00:23:55,339 --> 00:24:02,058
could fill say the bottom with red and

561
00:23:58,220 --> 00:24:03,350
the top with blue and then if we do our

562
00:24:02,058 --> 00:24:07,490
normal map lighting we should at least

563
00:24:03,349 --> 00:24:09,558
be able to see red tinge and blue tinges

564
00:24:07,490 --> 00:24:11,599
on the tops and bottoms of our stuff

565
00:24:09,558 --> 00:24:13,668
right so I'm just going to start with

566
00:24:11,599 --> 00:24:15,980
the simplest most simple thing there and

567
00:24:13,669 --> 00:24:17,210
that is what that would be so the first

568
00:24:15,980 --> 00:24:21,769
I'm going to do is I'm just going to

569
00:24:17,210 --> 00:24:24,500
clear our bitmaps here all of the LOD s

570
00:24:21,769 --> 00:24:26,569
I'm going to clear them all so that we

571
00:24:24,500 --> 00:24:30,950
can you know start with that I'm sorry

572
00:24:26,569 --> 00:24:34,039
not all the LED is just that top LED so

573
00:24:30,950 --> 00:24:37,789
if I take the trans date if I take the

574
00:24:34,039 --> 00:24:38,928
zeroth map zero flawed or look you know

575
00:24:37,789 --> 00:24:40,879
I don't even know how you pronounce that

576
00:24:38,929 --> 00:24:44,419
I usually say law and it just sounds so

577
00:24:40,880 --> 00:24:48,470
clunky there doesn't it I don't know so

578
00:24:44,419 --> 00:24:53,630
anyway either way though if we if we go

579
00:24:48,470 --> 00:24:56,660
ahead and and and allow us to say LOD if

580
00:24:53,630 --> 00:24:58,730
I take this guy and I go ahead and and

581
00:24:56,660 --> 00:25:00,860
produce what's essentially a full clear

582
00:24:58,730 --> 00:25:05,720
for him right and so that's just we

583
00:25:00,859 --> 00:25:08,869
translate and map width Tran State and

584
00:25:05,720 --> 00:25:10,910
the map height and you know I really

585
00:25:08,869 --> 00:25:13,039
could just pass some really huge number

586
00:25:10,910 --> 00:25:14,830
here too because it'll clip so that

587
00:25:13,039 --> 00:25:16,659
would be fine as well but you know

588
00:25:14,829 --> 00:25:19,299
whatever

589
00:25:16,660 --> 00:25:24,670
so I'll clear the ground I guess I'll

590
00:25:19,299 --> 00:25:27,970
clear it to pure red and I will clear

591
00:25:24,670 --> 00:25:31,120
the middle to pure green which we're

592
00:25:27,970 --> 00:25:32,710
probably not using at the moment or at

593
00:25:31,119 --> 00:25:33,489
least I don't think we should be I think

594
00:25:32,710 --> 00:25:34,779
we might have some code in there

595
00:25:33,490 --> 00:25:36,220
actually that is using it at the moment

596
00:25:34,779 --> 00:25:37,450
which might be a mistake we should

597
00:25:36,220 --> 00:25:39,579
probably turn that off

598
00:25:37,450 --> 00:25:41,860
for what we're doing at the moment but

599
00:25:39,579 --> 00:25:47,799
anyway then we'll make the sky the sky

600
00:25:41,859 --> 00:25:51,009
will be blue so it's let's see here - no

601
00:25:47,799 --> 00:25:52,960
conversion that's true but I think we

602
00:25:51,009 --> 00:25:56,379
can just use our eye to convert those

603
00:25:52,960 --> 00:25:59,829
from Yuen's to reels and then we've got

604
00:25:56,380 --> 00:26:01,930
to actually do just that should do fine

605
00:25:59,829 --> 00:26:04,059
right we're just using the zero with one

606
00:26:01,930 --> 00:26:05,650
here which all kind of denote even

607
00:26:04,059 --> 00:26:08,859
though it doesn't actually need to

608
00:26:05,650 --> 00:26:11,380
happen so there's our G and B clears and

609
00:26:08,859 --> 00:26:13,449
hey look you can already see that it's

610
00:26:11,380 --> 00:26:15,130
actually sampling from it we can see a

611
00:26:13,450 --> 00:26:18,190
bug already which it looks like I

612
00:26:15,130 --> 00:26:20,350
inverted the sense of the blend that's

613
00:26:18,190 --> 00:26:23,710
happening here I don't know if you can

614
00:26:20,349 --> 00:26:25,929
see that but you know you can see how

615
00:26:23,710 --> 00:26:26,980
the blue properly is sort of feathering

616
00:26:25,930 --> 00:26:28,539
out there I don't know if it's

617
00:26:26,980 --> 00:26:30,789
feathering out entirely correctly but

618
00:26:28,539 --> 00:26:33,399
it's like feathering out so you don't

619
00:26:30,789 --> 00:26:36,369
see a super harsh line but with the red

620
00:26:33,400 --> 00:26:39,060
you do see that really harsh line and

621
00:26:36,369 --> 00:26:42,969
that's not at all what we want right

622
00:26:39,059 --> 00:26:45,519
that's that's that's not good so what I

623
00:26:42,970 --> 00:26:47,740
can do there is I can go in and fix that

624
00:26:45,519 --> 00:26:50,319
which is good we've already kind of

625
00:26:47,740 --> 00:26:53,230
found one thing that we did wrong so

626
00:26:50,319 --> 00:26:55,869
that's in here right and if you see this

627
00:26:53,230 --> 00:26:57,610
is this is the stuff that's actually

628
00:26:55,869 --> 00:27:00,069
supposed to be what's what's a little

629
00:26:57,609 --> 00:27:03,879
bit odd here even also to think about

630
00:27:00,069 --> 00:27:06,399
this the way this is working this was

631
00:27:03,880 --> 00:27:08,560
supposed to be our ground map but we're

632
00:27:06,400 --> 00:27:09,940
actually getting it on top and this was

633
00:27:08,559 --> 00:27:11,289
supposed to be our sky map and we're

634
00:27:09,940 --> 00:27:14,529
actually getting on bottom so we also

635
00:27:11,289 --> 00:27:16,899
have a sort of a flip in the sense of

636
00:27:14,529 --> 00:27:20,069
who is doing what here which is another

637
00:27:16,900 --> 00:27:22,630
thing that we should track down right

638
00:27:20,069 --> 00:27:25,889
alright so we've got plenty of stuff to

639
00:27:22,630 --> 00:27:25,890
work on here let's get started

640
00:27:25,970 --> 00:27:31,759
and again this is exactly why I'm doing

641
00:27:28,609 --> 00:27:33,678
it this way you can imagine that if we

642
00:27:31,759 --> 00:27:35,628
had just actually done some lighting in

643
00:27:33,679 --> 00:27:39,169
here it would have been much harder to

644
00:27:35,628 --> 00:27:41,058
tell what's going wrong and so this is

645
00:27:39,169 --> 00:27:43,370
we've we've done this once before when

646
00:27:41,058 --> 00:27:45,200
we were doing bitmap loading structured

647
00:27:43,369 --> 00:27:47,689
art is a very important way to debug

648
00:27:45,200 --> 00:27:49,308
code because code especially rendering

649
00:27:47,690 --> 00:27:52,548
code is often very complicated and it's

650
00:27:49,308 --> 00:27:54,288
really easy both to have subtle bugs and

651
00:27:52,548 --> 00:27:55,788
also to have hard bugs that are

652
00:27:54,288 --> 00:27:58,308
difficult to debug even if they're not

653
00:27:55,788 --> 00:28:00,109
subtle and structured art is a good way

654
00:27:58,308 --> 00:28:00,648
to help you to guide you through that

655
00:28:00,109 --> 00:28:03,859
process

656
00:28:00,648 --> 00:28:06,288
because there's no sense trying to debug

657
00:28:03,859 --> 00:28:08,990
a subtle situation when you could

658
00:28:06,288 --> 00:28:10,609
instead first make it very pronounced

659
00:28:08,990 --> 00:28:12,620
because then if you make it very

660
00:28:10,609 --> 00:28:14,628
pronounced it's much easier to see

661
00:28:12,619 --> 00:28:16,278
what's going wrong and that helps guide

662
00:28:14,628 --> 00:28:18,378
the debugging process whereas if you

663
00:28:16,278 --> 00:28:21,558
constantly are actually fighting with

664
00:28:18,378 --> 00:28:22,878
always real data then it makes it so

665
00:28:21,558 --> 00:28:24,528
much harder for you to actually see

666
00:28:22,878 --> 00:28:26,658
where the problems are and see what's

667
00:28:24,528 --> 00:28:28,878
going wrong because it's hard to look at

668
00:28:26,659 --> 00:28:30,200
some arbitrary data and say yes that's

669
00:28:28,878 --> 00:28:33,019
wrong yes that's right when we have

670
00:28:30,200 --> 00:28:35,120
something so clear as just like bright

671
00:28:33,019 --> 00:28:36,859
red or bright blue and we can see where

672
00:28:35,119 --> 00:28:38,148
it's going we kind of know that there's

673
00:28:36,859 --> 00:28:40,189
a problem and so the other thing we'll

674
00:28:38,148 --> 00:28:42,678
probably do what I what I might suggest

675
00:28:40,190 --> 00:28:45,409
we do very shortly here is actually just

676
00:28:42,679 --> 00:28:47,210
fill this this with a white debug

677
00:28:45,409 --> 00:28:50,240
texture or something as well so that

678
00:28:47,210 --> 00:28:51,500
we're only looking at that sphere normal

679
00:28:50,240 --> 00:28:53,710
map that we drew in there so that we

680
00:28:51,500 --> 00:28:57,019
don't have to worry about the underlying

681
00:28:53,710 --> 00:28:58,370
tree either but that's not really that

682
00:28:57,019 --> 00:29:00,200
important right now it's not really

683
00:28:58,369 --> 00:29:03,349
getting in our way too much so let's

684
00:29:00,200 --> 00:29:06,590
take a look at this first of all we know

685
00:29:03,349 --> 00:29:09,528
I guess the bottom map whatever the

686
00:29:06,589 --> 00:29:12,528
bottom map that's coming in here I'm

687
00:29:09,528 --> 00:29:14,298
gonna go ahead and say and just just do

688
00:29:12,528 --> 00:29:17,419
this right I'm going to change it to top

689
00:29:14,298 --> 00:29:19,519
so we're just sampling the top map so we

690
00:29:17,419 --> 00:29:21,830
know that the top map is correctly

691
00:29:19,519 --> 00:29:24,079
coming in as blue but we do know that

692
00:29:21,829 --> 00:29:26,119
we're picking it incorrectly and so

693
00:29:24,079 --> 00:29:28,579
we're taking a look at this normal dot y

694
00:29:26,119 --> 00:29:31,278
and we're saying if that is less than

695
00:29:28,579 --> 00:29:33,470
negative 0.5 meaning it's it's pointing

696
00:29:31,278 --> 00:29:35,569
in the negative direction we're saying

697
00:29:33,470 --> 00:29:38,329
that that's going to be bottom and so

698
00:29:35,569 --> 00:29:39,769
what that must mean I feel like probably

699
00:29:38,329 --> 00:29:42,409
suggests

700
00:29:39,769 --> 00:29:44,480
that our normal map is actually sort of

701
00:29:42,410 --> 00:29:49,040
pointing in the wrong direction it would

702
00:29:44,480 --> 00:29:53,029
seem I'm not totally sure about that but

703
00:29:49,039 --> 00:29:57,859
let's go ahead and check right make

704
00:29:53,029 --> 00:30:01,250
spirit normal map so here we are and yet

705
00:29:57,859 --> 00:30:04,669
so we're coming in here we've got our

706
00:30:01,250 --> 00:30:06,019
height as our Y goes it starts off yeah

707
00:30:04,670 --> 00:30:08,539
I mean you can already see that it's

708
00:30:06,019 --> 00:30:12,109
wrong right we're starting with we make

709
00:30:08,539 --> 00:30:17,629
our low Y values so that they encode

710
00:30:12,109 --> 00:30:20,479
that way but our bitmaps is top down at

711
00:30:17,630 --> 00:30:22,160
the moment right currently I believe are

712
00:30:20,480 --> 00:30:24,589
especially the way we were specifying

713
00:30:22,160 --> 00:30:27,140
our bitmaps was was top down right

714
00:30:24,589 --> 00:30:28,609
because the pitch I'm assuming anyway

715
00:30:27,140 --> 00:30:30,380
that that's the way we start with that

716
00:30:28,609 --> 00:30:34,099
we're starting it we could always take a

717
00:30:30,380 --> 00:30:36,260
look here yeah so that's that's a

718
00:30:34,099 --> 00:30:38,359
mistake to be sure I guess we should

719
00:30:36,259 --> 00:30:40,250
think about it a little bit how we want

720
00:30:38,359 --> 00:30:43,750
our bitmaps to be structured do we want

721
00:30:40,250 --> 00:30:43,750
them to be top down and bottom up

722
00:30:50,349 --> 00:30:54,849
because really I think we probably want

723
00:30:52,839 --> 00:30:57,959
our bitmaps to normally actually be

724
00:30:54,849 --> 00:31:00,639
bottom up not

725
00:30:57,960 --> 00:31:03,400
not top down and the reason I say that

726
00:31:00,640 --> 00:31:05,770
is because most graphics API API is like

727
00:31:03,400 --> 00:31:11,530
you know OpenGL and stuff they want the

728
00:31:05,769 --> 00:31:13,299
bitmaps to be bottom up as well so it

729
00:31:11,529 --> 00:31:17,259
seems like that's probably something we

730
00:31:13,299 --> 00:31:18,789
would want to be using mmm I guess we'll

731
00:31:17,259 --> 00:31:20,410
let that sit for a minute but I think

732
00:31:18,789 --> 00:31:22,089
maybe that might be something that we

733
00:31:20,410 --> 00:31:24,370
tackle sooner rather than later

734
00:31:22,089 --> 00:31:25,869
because again while we're here in the

735
00:31:24,369 --> 00:31:27,339
renderer I don't want to get too far

736
00:31:25,869 --> 00:31:29,319
down the path of not having our

737
00:31:27,339 --> 00:31:31,659
coordinate system straightened out and

738
00:31:29,319 --> 00:31:34,389
so maybe what I'll say is maybe let's

739
00:31:31,660 --> 00:31:35,560
let's think about pretty soon going

740
00:31:34,390 --> 00:31:37,840
ahead and straightening up this

741
00:31:35,559 --> 00:31:40,960
coordinate system stuff and so we kind

742
00:31:37,839 --> 00:31:44,439
of did this it's true we just

743
00:31:40,960 --> 00:31:47,289
straight-up did this even before our

744
00:31:44,440 --> 00:31:49,210
architecture excavation was complete but

745
00:31:47,289 --> 00:31:51,430
so we're doing lighting right now and

746
00:31:49,210 --> 00:31:53,920
the other thing we do obviously we need

747
00:31:51,430 --> 00:31:56,980
optimization in here but what we want to

748
00:31:53,920 --> 00:32:01,539
do is straighten out all coordinate

749
00:31:56,980 --> 00:32:06,309
systems coordinate systems that screen

750
00:32:01,539 --> 00:32:09,490
world texture so that we have all of

751
00:32:06,309 --> 00:32:11,889
those consolidated before we go any

752
00:32:09,490 --> 00:32:14,200
further but all right we'll skip that

753
00:32:11,890 --> 00:32:16,270
for now so we'll just allow those to be

754
00:32:14,200 --> 00:32:18,100
wrong we'll have those be wrong for now

755
00:32:16,269 --> 00:32:20,889
because we're not sampling them

756
00:32:18,099 --> 00:32:22,990
incorrectly as it turns out we are

757
00:32:20,890 --> 00:32:28,480
actually sampling them properly so

758
00:32:22,990 --> 00:32:32,759
that's okay so with our sampling what

759
00:32:28,480 --> 00:32:36,519
did we do wrong on our bottom map though

760
00:32:32,759 --> 00:32:39,220
let's see here we have our TM map we are

761
00:32:36,519 --> 00:32:42,609
saying that it's we're going to add one

762
00:32:39,220 --> 00:32:44,559
to it that means that it ranges yes so

763
00:32:42,609 --> 00:32:46,509
the problem here is that we're going the

764
00:32:44,559 --> 00:32:48,639
wrong direction you can actually see

765
00:32:46,509 --> 00:32:50,519
that that's what's happening because TM

766
00:32:48,640 --> 00:32:55,090
maps going to range from negative one

767
00:32:50,519 --> 00:32:59,230
all the way to negative 0.5 and the

768
00:32:55,089 --> 00:33:02,079
problem here is that we're going to at

769
00:32:59,230 --> 00:33:02,829
zero this is going to be zero but at

770
00:33:02,079 --> 00:33:05,199
zero

771
00:33:02,829 --> 00:33:08,408
should actually be one right so this is

772
00:33:05,200 --> 00:33:10,808
actually inverted if you will from what

773
00:33:08,409 --> 00:33:13,929
it should have been and we can probably

774
00:33:10,808 --> 00:33:16,298
go ahead and multiply that through if we

775
00:33:13,929 --> 00:33:17,769
want to simplify things I don't know

776
00:33:16,298 --> 00:33:20,440
that we really care that much about it

777
00:33:17,769 --> 00:33:23,640
but you can actually see in here right

778
00:33:20,440 --> 00:33:26,169
we could have we could have simplified

779
00:33:23,640 --> 00:33:28,538
this guy a little bit more right because

780
00:33:26,169 --> 00:33:30,190
if we multiply the two through so let's

781
00:33:28,538 --> 00:33:34,240
multiply the two through we would just

782
00:33:30,190 --> 00:33:38,470
get that right and so if we do that we

783
00:33:34,240 --> 00:33:41,558
end up with this right and so we can

784
00:33:38,470 --> 00:33:44,850
then move this over here and subtract so

785
00:33:41,558 --> 00:33:51,298
we'd end up with negative 1.0 minus two

786
00:33:44,849 --> 00:33:54,548
times T nmap and yeah in theory that

787
00:33:51,298 --> 00:33:57,609
what wait I can't be right did I do that

788
00:33:54,548 --> 00:33:59,288
wrong I did that wrong what did I what

789
00:33:57,609 --> 00:34:03,178
did I mess up it's a bad math day

790
00:33:59,288 --> 00:34:03,179
obviously let's do that one more time

791
00:34:04,048 --> 00:34:08,769
looked like I did it wrong to me maybe

792
00:34:06,788 --> 00:34:10,838
it didn't look like I did it wrong to

793
00:34:08,769 --> 00:34:13,059
you but we have this guy and he's going

794
00:34:10,838 --> 00:34:14,378
the wrong direction so we've got it we

795
00:34:13,059 --> 00:34:16,029
want to be able to subtract one from it

796
00:34:14,378 --> 00:34:18,009
in fact I can verify first that that's

797
00:34:16,030 --> 00:34:20,290
correct and you can kind of see now how

798
00:34:18,010 --> 00:34:24,849
we get that tapering that we had wanted

799
00:34:20,289 --> 00:34:26,710
to get there right so if I multiply a

800
00:34:24,849 --> 00:34:29,230
negative two through like I saying I

801
00:34:26,710 --> 00:34:32,079
should get that and negative two right

802
00:34:29,230 --> 00:34:38,349
that should be what we're getting and so

803
00:34:32,079 --> 00:34:42,789
that seems and that's still correct so

804
00:34:38,349 --> 00:34:46,450
yeah I guess I actually was correct

805
00:34:42,789 --> 00:34:50,050
there negative two that produces

806
00:34:46,449 --> 00:34:51,658
negative one that looks like why does

807
00:34:50,050 --> 00:34:55,629
that look totally wrong to me

808
00:34:51,659 --> 00:34:57,220
TM map no I guess that's right that's

809
00:34:55,628 --> 00:35:00,429
right because this is always negative

810
00:34:57,219 --> 00:35:05,259
0.5 to negative one so it's always at

811
00:35:00,429 --> 00:35:07,960
least going to add one so hey yeah math

812
00:35:05,260 --> 00:35:10,030
is right even when you're wrong I don't

813
00:35:07,960 --> 00:35:13,030
know if that's a good way to say that

814
00:35:10,030 --> 00:35:15,339
but it's okay so that's fixed now and

815
00:35:13,030 --> 00:35:16,150
we're doing our sampling so that's all

816
00:35:15,338 --> 00:35:18,610
fine

817
00:35:16,150 --> 00:35:20,860
and what we want to do now is probably

818
00:35:18,610 --> 00:35:22,840
take a look at actually computing where

819
00:35:20,860 --> 00:35:24,099
we're sampling from a little more

820
00:35:22,840 --> 00:35:27,100
accurately because we're not really

821
00:35:24,099 --> 00:35:30,250
doing that at the moment and I'm not

822
00:35:27,099 --> 00:35:32,829
exactly sure what the best way to do to

823
00:35:30,250 --> 00:35:35,469
produce a test texture for that is but

824
00:35:32,829 --> 00:35:37,179
I'm guessing that really the best way

825
00:35:35,469 --> 00:35:40,000
might be to put in some kind of a

826
00:35:37,179 --> 00:35:45,399
checker board or something so that we

827
00:35:40,000 --> 00:35:47,139
can you know we can see a pattern a very

828
00:35:45,400 --> 00:35:49,300
clear pattern that we'll be able to

829
00:35:47,139 --> 00:35:50,920
recognize so I'm going to go ahead and

830
00:35:49,300 --> 00:35:54,490
and put that in here

831
00:35:50,920 --> 00:35:59,200
so that we can actually so that we can

832
00:35:54,489 --> 00:36:01,809
actually see something all right so if I

833
00:35:59,199 --> 00:36:04,899
do this we've got I got my map index

834
00:36:01,809 --> 00:36:07,599
that's going to go through each map and

835
00:36:04,900 --> 00:36:10,930
then I'm going to try to do just a

836
00:36:07,599 --> 00:36:17,679
checkerboard here I don't I don't really

837
00:36:10,929 --> 00:36:20,109
know I'm gonna make this up as I go

838
00:36:17,679 --> 00:36:22,899
along let's say we're gonna make a 16

839
00:36:20,110 --> 00:36:24,970
pixel checkerboard oops that's not what

840
00:36:22,900 --> 00:36:28,180
I meant to do so we're just gonna go

841
00:36:24,969 --> 00:36:30,849
through whatever that LOD zwip is and

842
00:36:28,179 --> 00:36:33,969
we're going to just go by by a you know

843
00:36:30,849 --> 00:36:37,289
a checkered checker dim let's do checker

844
00:36:33,969 --> 00:36:40,899
width and height actually oops

845
00:36:37,289 --> 00:36:43,509
height so I'm just gonna go through both

846
00:36:40,900 --> 00:36:49,480
of these and say alright I've got you

847
00:36:43,510 --> 00:36:53,050
know the X and the y and I want to make

848
00:36:49,480 --> 00:36:56,309
a checkerboard right and so I'm gonna go

849
00:36:53,050 --> 00:37:01,180
through here and I'm gonna draw into the

850
00:36:56,309 --> 00:37:05,529
LOD that we're on like so and I want to

851
00:37:01,179 --> 00:37:08,379
draw from you know a min P to a max P

852
00:37:05,530 --> 00:37:12,070
and you know the max piece is always

853
00:37:08,380 --> 00:37:18,210
going to be the min P plus checker width

854
00:37:12,070 --> 00:37:25,289
checker height right and

855
00:37:18,210 --> 00:37:29,579
so max P min P and then in here we want

856
00:37:25,289 --> 00:37:31,769
to be able to set the color essentially

857
00:37:29,579 --> 00:37:35,250
and so what I want to do is I want to

858
00:37:31,769 --> 00:37:37,199
say I wish draw a rectangle in fact I

859
00:37:35,250 --> 00:37:39,619
could fix this right now in fact let's

860
00:37:37,199 --> 00:37:41,909
just go ahead and do that let's fix this

861
00:37:39,619 --> 00:37:44,039
compile that I'm gonna make draw

862
00:37:41,909 --> 00:37:47,849
rectangle take a color value just like

863
00:37:44,039 --> 00:37:51,989
everything else so like that right and

864
00:37:47,849 --> 00:37:57,949
that way we can say that the red is

865
00:37:51,989 --> 00:38:05,929
color are the green is color G the B

866
00:37:57,949 --> 00:38:08,339
blue color B and the a this color a and

867
00:38:05,929 --> 00:38:16,710
then I'll just force everyone else to

868
00:38:08,340 --> 00:38:18,210
use that oops and let's see are you

869
00:38:16,710 --> 00:38:23,789
definition for our color that'll be

870
00:38:18,210 --> 00:38:26,300
color 32 now so and now all of these

871
00:38:23,789 --> 00:38:29,279
draw rectangles oh they actually have

872
00:38:26,300 --> 00:38:31,130
things going going pretty nicely for

873
00:38:29,280 --> 00:38:34,440
them actually because they can just do

874
00:38:31,130 --> 00:38:38,220
you know pass a color there I don't know

875
00:38:34,440 --> 00:38:42,720
if we've written to v4 or not but we

876
00:38:38,219 --> 00:38:54,659
will now looks like the Alpha value is

877
00:38:42,719 --> 00:38:57,329
always same here so yeah and alright

878
00:38:54,659 --> 00:39:00,329
keep going so we have not done two

879
00:38:57,329 --> 00:39:01,949
before yet so there's our color this

880
00:39:00,329 --> 00:39:03,420
this just simplifies this down because

881
00:39:01,949 --> 00:39:06,239
we're already we've already got the

882
00:39:03,420 --> 00:39:11,610
entry color so that's good

883
00:39:06,239 --> 00:39:15,329
looks like this one rectangle was still

884
00:39:11,610 --> 00:39:18,750
storing just an RG and a B is that

885
00:39:15,329 --> 00:39:22,049
correct yeah so these guys should really

886
00:39:18,750 --> 00:39:25,170
just be store in color now this weird

887
00:39:22,050 --> 00:39:27,568
with v4 it up here people

888
00:39:25,170 --> 00:39:33,240
all right there we go so these guys are

889
00:39:27,568 --> 00:39:36,838
going to call entry color like so entry

890
00:39:33,239 --> 00:39:39,269
bitmap well is if zeroed out so I don't

891
00:39:36,838 --> 00:39:44,130
even know what that's doing all right

892
00:39:39,269 --> 00:39:49,588
so color being passed here again that

893
00:39:44,130 --> 00:39:52,289
should all just work theory and these

894
00:39:49,588 --> 00:39:54,088
guys can now be much more simplistic

895
00:39:52,289 --> 00:39:57,000
because they actually could just pass

896
00:39:54,088 --> 00:40:00,630
straight through which is great that's

897
00:39:57,000 --> 00:40:04,409
what we want so that way there's less

898
00:40:00,630 --> 00:40:07,289
shuffling less less fussing and so 2v4

899
00:40:04,409 --> 00:40:09,358
is just a thing that i usually define

900
00:40:07,289 --> 00:40:11,369
math libraries so that you can quickly

901
00:40:09,358 --> 00:40:13,199
get from one to the other really easily

902
00:40:11,369 --> 00:40:16,230
right and they're they're just like you

903
00:40:13,199 --> 00:40:20,129
know if I have a v4 I define two before

904
00:40:16,230 --> 00:40:23,730
which takes a v3 which is like XYZ and

905
00:40:20,130 --> 00:40:26,760
then it takes the W right it's really

906
00:40:23,730 --> 00:40:29,309
really basic right and so the result the

907
00:40:26,760 --> 00:40:31,170
result that X Y Z equals XYZ and it was

908
00:40:29,309 --> 00:40:33,599
all tough W equals W and then it returns

909
00:40:31,170 --> 00:40:38,010
it that's it and I usually just do one

910
00:40:33,599 --> 00:40:39,329
of those for each dimension up and I

911
00:40:38,010 --> 00:40:42,030
guess we only actually have two here

912
00:40:39,329 --> 00:40:44,280
right so if you want to make a v3 it'd

913
00:40:42,030 --> 00:40:47,640
be the same thing right you do something

914
00:40:44,280 --> 00:40:55,790
like this and then it produces that by

915
00:40:47,639 --> 00:40:58,199
by construction and that's it all right

916
00:40:55,789 --> 00:41:00,358
so we're still drawing that there that's

917
00:40:58,199 --> 00:41:03,088
good but now let's go back let's jump

918
00:41:00,358 --> 00:41:08,098
back to our quote-unquote checkerboard

919
00:41:03,088 --> 00:41:10,619
drawing routine so if I draw this guy

920
00:41:08,099 --> 00:41:12,480
here now I can pass a color value to it

921
00:41:10,619 --> 00:41:16,440
and what I want to do is I want to set

922
00:41:12,480 --> 00:41:19,740
the color value equal to this particular

923
00:41:16,440 --> 00:41:21,750
LOD is color right I mean this

924
00:41:19,739 --> 00:41:23,219
particular maps color and what I'll do

925
00:41:21,750 --> 00:41:28,500
there is I'll say all right there's a

926
00:41:23,219 --> 00:41:31,379
map color per index here so we'll just

927
00:41:28,500 --> 00:41:32,579
do map color equals right and we'll

928
00:41:31,380 --> 00:41:36,249
define

929
00:41:32,579 --> 00:41:38,079
three of these map colors so I'm gonna

930
00:41:36,248 --> 00:41:39,009
do before well now we only need three

931
00:41:38,079 --> 00:41:41,170
for the math color

932
00:41:39,009 --> 00:41:43,208
so I'll define it the same way that we

933
00:41:41,170 --> 00:41:47,619
were defining it before where we've got

934
00:41:43,208 --> 00:41:49,929
it red green and blue like so and then

935
00:41:47,619 --> 00:41:53,650
this color will just always be whatever

936
00:41:49,929 --> 00:41:58,358
the map color is initially for the map

937
00:41:53,650 --> 00:42:00,068
index but then once we once we see which

938
00:41:58,358 --> 00:42:03,068
part of the checker we're on we'll

939
00:42:00,068 --> 00:42:06,130
optionally turn it to black right all

940
00:42:03,068 --> 00:42:09,278
right so the min P is also pretty simple

941
00:42:06,130 --> 00:42:11,979
the min P is just the X and the y right

942
00:42:09,278 --> 00:42:13,389
that we have so because this is already

943
00:42:11,978 --> 00:42:15,098
going by the checker with no checker

944
00:42:13,389 --> 00:42:16,538
height so the min pain the max B are

945
00:42:15,099 --> 00:42:18,640
known the color is known so the only

946
00:42:16,539 --> 00:42:20,619
thing that we have to do now is we have

947
00:42:18,639 --> 00:42:23,219
to figure out where we are on the

948
00:42:20,619 --> 00:42:25,298
checkerboard right we have to figure out

949
00:42:23,219 --> 00:42:26,889
essentially which checker we're on I

950
00:42:25,298 --> 00:42:28,809
think I'm gonna instead of doing that by

951
00:42:26,889 --> 00:42:31,748
math in there I think I'm just going to

952
00:42:28,809 --> 00:42:34,900
do it by a toggle so I think I'm to do

953
00:42:31,748 --> 00:42:36,488
it with like checker on right and so

954
00:42:34,900 --> 00:42:39,309
then what I'll say is you know checker

955
00:42:36,489 --> 00:42:40,838
on it'll either be if the checkers on

956
00:42:39,309 --> 00:42:45,459
will be the map color otherwise it will

957
00:42:40,838 --> 00:42:48,458
be black like so and then I'm just going

958
00:42:45,458 --> 00:42:50,828
to set checker on equal to not checker

959
00:42:48,458 --> 00:42:53,228
on like so now in order to do that I

960
00:42:50,829 --> 00:42:55,660
need to alternate on rows as well so

961
00:42:53,228 --> 00:42:58,118
what I'll do there is do it row checker

962
00:42:55,659 --> 00:43:02,288
on like so on and then do checker on

963
00:42:58,119 --> 00:43:05,619
equals row checker on and then Road

964
00:43:02,289 --> 00:43:07,929
checker on excuse me pills not write

965
00:43:05,619 --> 00:43:14,140
checker on I think that should do it

966
00:43:07,929 --> 00:43:17,588
let's see here LOD height sign downside

967
00:43:14,139 --> 00:43:20,828
mismatch so the heights are intz right I

968
00:43:17,588 --> 00:43:22,688
guess so let's take a look here and then

969
00:43:20,829 --> 00:43:25,209
we need to specify what we want our

970
00:43:22,688 --> 00:43:28,028
checker width and height to be and I

971
00:43:25,208 --> 00:43:30,938
guess I'll just call those for now 16 by

972
00:43:28,028 --> 00:43:34,079
16 although I guess our height is less

973
00:43:30,938 --> 00:43:34,078
let's do 8

974
00:43:39,909 --> 00:43:47,710
I agree with you it's getting out the

975
00:43:43,449 --> 00:43:48,549
value in there I don't know what I'm

976
00:43:47,710 --> 00:43:49,030
gonna do there we'll see what we're

977
00:43:48,550 --> 00:43:52,960
gonna do

978
00:43:49,030 --> 00:43:58,000
let's leave the 16 by 16 all right

979
00:43:52,960 --> 00:44:00,099
so there is our checkerboard lovely

980
00:43:58,000 --> 00:44:01,809
isn't it you can actually see our

981
00:44:00,099 --> 00:44:03,280
bilinear filtering in action as well

982
00:44:01,809 --> 00:44:05,469
because I don't know if you can see

983
00:44:03,280 --> 00:44:08,380
there but right in there you've got like

984
00:44:05,469 --> 00:44:10,469
when it's in between two samples it

985
00:44:08,380 --> 00:44:12,730
actually produces the sort of a

986
00:44:10,469 --> 00:44:16,059
different value right it produces an

987
00:44:12,730 --> 00:44:17,349
in-between value so we've reduced our

988
00:44:16,059 --> 00:44:19,539
checkerboard now what's interesting

989
00:44:17,349 --> 00:44:21,700
about this is you'll notice we're not

990
00:44:19,539 --> 00:44:24,338
getting any light anymore on this entire

991
00:44:21,699 --> 00:44:27,189
thing which is particularly interesting

992
00:44:24,338 --> 00:44:29,920
just because I guessing that means that

993
00:44:27,190 --> 00:44:33,280
wherever we're sampling the tree the

994
00:44:29,920 --> 00:44:35,170
tree is is essentially getting into a

995
00:44:33,280 --> 00:44:36,790
situation where it's only picking up

996
00:44:35,170 --> 00:44:39,700
some black texels

997
00:44:36,789 --> 00:44:41,139
I'm guessing that's true and I suspect

998
00:44:39,699 --> 00:44:42,909
that's probably because we haven't also

999
00:44:41,139 --> 00:44:44,079
haven't done any of the stuff for

1000
00:44:42,909 --> 00:44:48,909
actually figure out where we should be

1001
00:44:44,079 --> 00:44:51,219
looking in the texture map so now be

1002
00:44:48,909 --> 00:44:53,799
good time for us to go in there and

1003
00:44:51,219 --> 00:44:55,299
actually start to make that happen what

1004
00:44:53,800 --> 00:44:58,210
I do want to do though just quickly

1005
00:44:55,300 --> 00:45:02,170
before hand is I also want to clear this

1006
00:44:58,210 --> 00:45:04,240
guy out because I'd rather just see like

1007
00:45:02,170 --> 00:45:06,280
just the normal map would be my

1008
00:45:04,239 --> 00:45:08,709
preference so what I want to do is

1009
00:45:06,280 --> 00:45:11,740
instead of using that tree I think what

1010
00:45:08,710 --> 00:45:14,320
I'm going to do instead is we've got

1011
00:45:11,739 --> 00:45:16,059
that tree normal thing here instead of

1012
00:45:14,320 --> 00:45:19,780
that I think I'm gonna just full-on make

1013
00:45:16,059 --> 00:45:24,539
a test thing which is like you know test

1014
00:45:19,780 --> 00:45:24,540
bitmap and test normal map right

1015
00:45:25,599 --> 00:45:29,440
I guess we'd call this the diffuse color

1016
00:45:28,210 --> 00:45:30,789
I don't know what we'll call it yet

1017
00:45:29,440 --> 00:45:32,260
because we're not sure exactly what it

1018
00:45:30,789 --> 00:45:34,269
Act what can what it actually would be

1019
00:45:32,260 --> 00:45:36,120
relative to our lighting equation but

1020
00:45:34,269 --> 00:45:38,530
we'll call this test a fuse and test

1021
00:45:36,119 --> 00:45:43,269
normal and then what we'll do is when we

1022
00:45:38,530 --> 00:45:46,330
make that tree normal map right right

1023
00:45:43,269 --> 00:45:48,670
here instead that's going to be a thing

1024
00:45:46,329 --> 00:45:51,819
which actually makes two here so we'll

1025
00:45:48,670 --> 00:45:54,460
we'll go ahead and take that test defuse

1026
00:45:51,820 --> 00:45:56,650
and say that we want to copy its width

1027
00:45:54,460 --> 00:45:58,929
and height and then we want our test

1028
00:45:56,650 --> 00:46:01,360
normal to be a sphere normal map with

1029
00:45:58,929 --> 00:46:04,179
zero roughness off of that that's the

1030
00:46:01,360 --> 00:46:07,000
test well but what we also want to do

1031
00:46:04,179 --> 00:46:09,789
here is say game state test diffuse

1032
00:46:07,000 --> 00:46:12,280
equals make empty bitmap and that's

1033
00:46:09,789 --> 00:46:13,630
gonna be however big we want this guy to

1034
00:46:12,280 --> 00:46:16,750
be so I don't know what that's gonna be

1035
00:46:13,630 --> 00:46:19,660
for now we'll say that's 256 by 256

1036
00:46:16,750 --> 00:46:22,900
maybe that seems reasonable maybe a

1037
00:46:19,659 --> 00:46:24,369
little bit large we'll see and then we

1038
00:46:22,900 --> 00:46:27,329
will have to fill it with something

1039
00:46:24,369 --> 00:46:28,659
again not particularly troublesome there

1040
00:46:27,329 --> 00:46:30,969
hmm

1041
00:46:28,659 --> 00:46:33,579
I can just do it draw a rectangle call

1042
00:46:30,969 --> 00:46:36,879
for that as well so I can do a draw

1043
00:46:33,579 --> 00:46:40,769
rectangle into this test diffuse I can

1044
00:46:36,880 --> 00:46:45,960
say that I want it to be from zero zero

1045
00:46:40,769 --> 00:46:52,090
to its width height all right like so

1046
00:46:45,960 --> 00:46:54,490
oops and then I can just say the color

1047
00:46:52,090 --> 00:46:58,150
is gonna be like a neutral gray just so

1048
00:46:54,489 --> 00:47:07,329
we can kind of see what what it all is

1049
00:46:58,150 --> 00:47:11,260
right so okay tree normal is not a

1050
00:47:07,329 --> 00:47:15,079
member of game state that's true test

1051
00:47:11,260 --> 00:47:20,570
diffuse test normal

1052
00:47:15,079 --> 00:47:22,159
and what oh right I always forget when I

1053
00:47:20,570 --> 00:47:25,670
change the size of something we don't

1054
00:47:22,159 --> 00:47:28,969
support that in the dynamic reload all

1055
00:47:25,670 --> 00:47:33,760
right so of course I probably should not

1056
00:47:28,969 --> 00:47:37,250
make it the same gray as our background

1057
00:47:33,760 --> 00:47:38,960
okay I admit that that may have been a

1058
00:47:37,250 --> 00:47:40,699
mistake

1059
00:47:38,960 --> 00:47:43,940
because then we can't tell if it's

1060
00:47:40,699 --> 00:47:46,159
drawing or not that yeah okay you know I

1061
00:47:43,940 --> 00:47:47,720
admit that that was that was that was an

1062
00:47:46,159 --> 00:47:49,579
oversight okay

1063
00:47:47,719 --> 00:47:53,449
it was definitely an oversight let's try

1064
00:47:49,579 --> 00:47:54,980
that again okay there we go so now we've

1065
00:47:53,449 --> 00:47:56,569
got that guy in there and now we should

1066
00:47:54,980 --> 00:47:59,030
be able to see if we're actually getting

1067
00:47:56,570 --> 00:48:01,670
lighting contribution in there when we

1068
00:47:59,030 --> 00:48:04,100
start to work with you know the the

1069
00:48:01,670 --> 00:48:06,470
actual bounce stuff okay so how much

1070
00:48:04,099 --> 00:48:10,400
time we got oh not very much five fifty

1071
00:48:06,469 --> 00:48:12,649
four well I guess we won't have time to

1072
00:48:10,400 --> 00:48:14,090
do what we want to do here which is

1073
00:48:12,650 --> 00:48:15,860
actually go through and worked out the

1074
00:48:14,090 --> 00:48:17,960
bounce math but we can do the bounce

1075
00:48:15,860 --> 00:48:19,490
math tomorrow that's fine let's just

1076
00:48:17,960 --> 00:48:22,010
take a look at what we were doing here

1077
00:48:19,489 --> 00:48:23,059
yes so we're not actually doing anything

1078
00:48:22,010 --> 00:48:24,500
in terms of figure out where the

1079
00:48:23,059 --> 00:48:25,880
sampling is so that's why we aren't

1080
00:48:24,500 --> 00:48:27,679
getting a leading contribution it's just

1081
00:48:25,880 --> 00:48:29,090
picking the upper corner of the map so

1082
00:48:27,679 --> 00:48:32,269
we need to do here as we actually need

1083
00:48:29,090 --> 00:48:34,900
to do the work to look up into the map

1084
00:48:32,269 --> 00:48:38,050
and see what is actually where you know

1085
00:48:34,900 --> 00:48:40,460
what is something and that's actually

1086
00:48:38,050 --> 00:48:41,960
figure out some actual value

1087
00:48:40,460 --> 00:48:44,599
now we could act we could do something

1088
00:48:41,960 --> 00:48:47,690
kind of cheesy right we could do

1089
00:48:44,599 --> 00:48:50,269
something where we use like the normal

1090
00:48:47,690 --> 00:48:51,769
for example to pick where we want to be

1091
00:48:50,269 --> 00:48:54,710
in the map right I mean you could

1092
00:48:51,769 --> 00:48:57,469
imagine something that did you know like

1093
00:48:54,710 --> 00:49:01,340
a starts with the width and then moves

1094
00:48:57,469 --> 00:49:07,730
by that you know moves by the width over

1095
00:49:01,340 --> 00:49:10,100
to picking the the normals x-coordinate

1096
00:49:07,730 --> 00:49:12,079
right or something like that I'm just

1097
00:49:10,099 --> 00:49:12,889
totally making this up but you know what

1098
00:49:12,079 --> 00:49:14,179
I mean right

1099
00:49:12,889 --> 00:49:16,819
you could imagine something that was

1100
00:49:14,179 --> 00:49:18,469
doing sort of a more straightforward

1101
00:49:16,820 --> 00:49:19,700
thing here this is not at all what we

1102
00:49:18,469 --> 00:49:22,969
want to do but it's something that will

1103
00:49:19,699 --> 00:49:27,649
at least pick stuff out of it oops

1104
00:49:22,969 --> 00:49:30,019
here we go and hey you can see that it's

1105
00:49:27,650 --> 00:49:31,639
sort of starting to get that reflection

1106
00:49:30,019 --> 00:49:33,259
in there it's we're not really there yet

1107
00:49:31,639 --> 00:49:35,088
because it's it's literally just sort of

1108
00:49:33,260 --> 00:49:36,950
using that as almost a deferred texture

1109
00:49:35,088 --> 00:49:39,349
lookup but at least we kind of know that

1110
00:49:36,949 --> 00:49:44,449
that what we're trying to do is sort of

1111
00:49:39,349 --> 00:49:48,140
working right so that's all good I don't

1112
00:49:44,449 --> 00:49:49,969
know if those are exactly but well no

1113
00:49:48,139 --> 00:49:51,650
those are probably fine bilinear samples

1114
00:49:49,969 --> 00:49:53,989
now to think about it so that's that's

1115
00:49:51,650 --> 00:49:55,760
probably fine too so yeah I mean it all

1116
00:49:53,989 --> 00:49:57,318
looks pretty good I think I just don't

1117
00:49:55,760 --> 00:49:58,819
want to get started on trying to

1118
00:49:57,318 --> 00:50:01,369
actually do the sampling properly here

1119
00:49:58,818 --> 00:50:03,858
because we probably just do not have the

1120
00:50:01,369 --> 00:50:06,318
time to actually do that so I'm guessing

1121
00:50:03,858 --> 00:50:11,539
that probably I should I should call it

1122
00:50:06,318 --> 00:50:13,909
quits and yeah and then we can you know

1123
00:50:11,539 --> 00:50:16,759
we could pick up a little bit later we

1124
00:50:13,909 --> 00:50:18,019
can pick up this this how we do the

1125
00:50:16,760 --> 00:50:20,720
actual math ferret where the sampling

1126
00:50:18,019 --> 00:50:22,309
should be tomorrow and we also kind of

1127
00:50:20,719 --> 00:50:23,509
got a thing cat keep in the back of our

1128
00:50:22,309 --> 00:50:25,279
heads that we got to do something with

1129
00:50:23,510 --> 00:50:27,470
them with the middle range the with the

1130
00:50:25,280 --> 00:50:29,329
green and I have no idea we're gonna do

1131
00:50:27,469 --> 00:50:31,159
with that so we gotta we gotta plan that

1132
00:50:29,329 --> 00:50:32,859
out a little bit that's gonna be a bunch

1133
00:50:31,159 --> 00:50:36,019
of work I think figuring out how that's

1134
00:50:32,858 --> 00:50:41,299
gonna slot in there all right so I guess

1135
00:50:36,019 --> 00:50:44,170
we can go ahead to a Q&amp;A the Q&amp;A now

1136
00:50:41,300 --> 00:50:44,170
like so on

1137
00:50:52,409 --> 00:51:02,308
all right let's do Q&amp;A please prefix

1138
00:51:00,210 --> 00:51:05,099
your questions with Q : so I can see

1139
00:51:02,309 --> 00:51:07,769
them and please try to keep the

1140
00:51:05,099 --> 00:51:09,930
questions on topic I tend to skip

1141
00:51:07,768 --> 00:51:11,098
off-topic questions I do off type of

1142
00:51:09,929 --> 00:51:12,690
questions on the pre stream so if you

1143
00:51:11,099 --> 00:51:17,519
want to ask off-topic questions you can

1144
00:51:12,690 --> 00:51:24,389
you just got to come back tomorrow 15

1145
00:51:17,518 --> 00:51:29,389
minutes for the stream starts looks

1146
00:51:24,389 --> 00:51:29,389
pretty calm though looking pretty calm

1147
00:51:29,719 --> 00:51:34,139
poo shoes in the move entity function

1148
00:51:32,849 --> 00:51:36,000
you have two variables that are never

1149
00:51:34,139 --> 00:51:42,900
used new player play an oboe player P

1150
00:51:36,000 --> 00:51:45,028
will you delete them for me will you

1151
00:51:42,900 --> 00:51:46,380
delete them for me well I don't know are

1152
00:51:45,028 --> 00:51:59,400
they doing anything that we might want

1153
00:51:46,380 --> 00:52:10,259
to use later old player P and new player

1154
00:51:59,400 --> 00:52:12,420
P yeah this is probably gonna get a

1155
00:52:10,259 --> 00:52:14,639
pretty big hatchet take it to it anyway

1156
00:52:12,420 --> 00:52:18,559
so if for some reason you really want

1157
00:52:14,639 --> 00:52:22,098
them to go away we could delete them yes

1158
00:52:18,559 --> 00:52:22,099
that's totally fine

1159
00:52:28,780 --> 00:52:41,710
with this scheme let you have a pool of

1160
00:52:31,539 --> 00:52:47,110
water reflect a starry sky well the

1161
00:52:41,710 --> 00:52:50,829
question is so what would determine that

1162
00:52:47,110 --> 00:52:55,930
would really be mostly what you're going

1163
00:52:50,829 --> 00:52:58,869
to do with the with the resolution of

1164
00:52:55,929 --> 00:53:01,059
these maps I mean yes obviously the

1165
00:52:58,869 --> 00:53:05,109
technique will let you do that

1166
00:53:01,059 --> 00:53:07,000
but we there's there's a bunch of things

1167
00:53:05,110 --> 00:53:09,490
you have to keep in mind in terms of

1168
00:53:07,000 --> 00:53:11,980
sampling and so if you think about

1169
00:53:09,489 --> 00:53:13,479
what's happening in here I can sort of

1170
00:53:11,980 --> 00:53:19,960
give you a little bit of preview of why

1171
00:53:13,480 --> 00:53:24,550
that might be a little bit rough just in

1172
00:53:19,960 --> 00:53:28,599
terms of of keeping things looking good

1173
00:53:24,550 --> 00:53:31,240
so the problem right is that you end up

1174
00:53:28,599 --> 00:53:32,829
with when you when you have something

1175
00:53:31,239 --> 00:53:35,409
that you're sampling like a reflection

1176
00:53:32,829 --> 00:53:38,049
like that right you know you've got

1177
00:53:35,409 --> 00:53:40,059
these sort of normals and you've got

1178
00:53:38,050 --> 00:53:41,920
bounces that are coming in like whatever

1179
00:53:40,059 --> 00:53:44,079
direction are we're looking from we're

1180
00:53:41,920 --> 00:53:45,760
bouncing back up and depending on the

1181
00:53:44,079 --> 00:53:48,340
normal we're sort of getting different

1182
00:53:45,760 --> 00:53:51,630
bounces that may or may not be coherent

1183
00:53:48,340 --> 00:53:55,360
into this you know texture map right and

1184
00:53:51,630 --> 00:54:00,099
what ends up happening is those bounces

1185
00:53:55,360 --> 00:54:02,380
are going to sample this texture map but

1186
00:54:00,099 --> 00:54:04,929
they're going to sample it sparsely so

1187
00:54:02,380 --> 00:54:07,390
there's no guarantee that you won't get

1188
00:54:04,929 --> 00:54:09,489
some really bad artifacting in there

1189
00:54:07,389 --> 00:54:11,710
because of the fact that you might be

1190
00:54:09,489 --> 00:54:14,589
sampling like very far apart like one

1191
00:54:11,710 --> 00:54:16,690
bounce here might sample there and then

1192
00:54:14,590 --> 00:54:20,470
the very next bounce may sample like all

1193
00:54:16,690 --> 00:54:22,869
the way back here and so you just don't

1194
00:54:20,469 --> 00:54:24,669
you don't get the kind of anisotropic

1195
00:54:22,869 --> 00:54:26,529
filtering that you might want for a

1196
00:54:24,670 --> 00:54:29,559
pretty starry sky reflected in a pool of

1197
00:54:26,530 --> 00:54:31,690
water right and so I don't necessarily

1198
00:54:29,559 --> 00:54:33,489
guarantee that we're gonna try and solve

1199
00:54:31,690 --> 00:54:35,380
that problem because what I'm looking

1200
00:54:33,489 --> 00:54:38,319
for here is more lighting and not

1201
00:54:35,380 --> 00:54:39,849
reflections and so it will probably do

1202
00:54:38,320 --> 00:54:42,550
is end up using fairly low resolution

1203
00:54:39,849 --> 00:54:44,650
maps so that you wouldn't really do

1204
00:54:42,550 --> 00:54:48,670
reflections the more be for more like

1205
00:54:44,650 --> 00:54:50,730
glossy or sort of lighting stuff and not

1206
00:54:48,670 --> 00:54:55,000
as much for reflections but I don't know

1207
00:54:50,730 --> 00:54:57,400
so that's really why I would say you you

1208
00:54:55,000 --> 00:55:00,789
have a bit of an issue there to be

1209
00:54:57,400 --> 00:55:03,550
honest with you I don't I'm not really

1210
00:55:00,789 --> 00:55:08,469
sure how people normally try to solve

1211
00:55:03,550 --> 00:55:10,360
that problem in 3d when they do

1212
00:55:08,469 --> 00:55:14,049
typically what they'll do is they'll

1213
00:55:10,360 --> 00:55:15,280
render the scene that they'll do

1214
00:55:14,050 --> 00:55:17,440
something very similar to what we're

1215
00:55:15,280 --> 00:55:19,840
doing they'll render the scene from the

1216
00:55:17,440 --> 00:55:23,380
perspective of the of the plane about

1217
00:55:19,840 --> 00:55:25,809
that it's bouncing and I just don't know

1218
00:55:23,380 --> 00:55:28,030
if they if they do anything fancy to try

1219
00:55:25,809 --> 00:55:30,190
and prevent the sampling from getting

1220
00:55:28,030 --> 00:55:33,630
ugly or whether it just does get ugly

1221
00:55:30,190 --> 00:55:35,980
I'm not sure maybe you turn on like

1222
00:55:33,630 --> 00:55:40,660
anisotropic filtering for those textures

1223
00:55:35,980 --> 00:55:43,990
to try and well know that an isotropic

1224
00:55:40,659 --> 00:55:46,210
filtering is really gonna help I guess

1225
00:55:43,989 --> 00:55:47,919
it would so I don't know I don't really

1226
00:55:46,210 --> 00:55:50,980
know how they try to fight this when

1227
00:55:47,920 --> 00:55:52,389
they're doing a reflection in 3d because

1228
00:55:50,980 --> 00:55:55,300
I think they would have the same problem

1229
00:55:52,389 --> 00:55:56,769
and I'm not sure how they try to correct

1230
00:55:55,300 --> 00:55:58,590
for it it may be that they just don't

1231
00:55:56,769 --> 00:56:02,699
and you get sparkly Ness I'm not sure

1232
00:55:58,590 --> 00:56:02,700
but that's the thing to watch out for

1233
00:56:15,090 --> 00:56:18,870
if you want to see the lighting distort

1234
00:56:17,519 --> 00:56:20,489
according to the spherical shape of the

1235
00:56:18,869 --> 00:56:21,989
normal map would that just be part of

1236
00:56:20,489 --> 00:56:24,929
fixing the math in the section where you

1237
00:56:21,989 --> 00:56:26,250
sample from the end map yeah that is

1238
00:56:24,929 --> 00:56:29,849
literally it like when we do that

1239
00:56:26,250 --> 00:56:31,260
tomorrow it should Bend and then that'll

1240
00:56:29,849 --> 00:56:34,829
be that

1241
00:56:31,260 --> 00:56:37,260
but until we do we're not actually doing

1242
00:56:34,829 --> 00:56:38,250
that so obviously it doesn't behave like

1243
00:56:37,260 --> 00:56:41,610
a reflection because we're not

1244
00:56:38,250 --> 00:56:43,940
calculating a reflection takes big

1245
00:56:41,610 --> 00:56:43,940
surprise right

1246
00:56:52,358 --> 00:56:55,900
what are their benefits to having three

1247
00:56:54,009 --> 00:56:59,858
top middle bottom and mass versus just

1248
00:56:55,900 --> 00:57:02,739
using one nmap for the whole thing uh so

1249
00:56:59,858 --> 00:57:04,619
I don't know how I would use one

1250
00:57:02,739 --> 00:57:09,159
environment map for the whole thing

1251
00:57:04,619 --> 00:57:13,838
because like I don't know how to get

1252
00:57:09,159 --> 00:57:16,179
spacial in this to that right like I

1253
00:57:13,838 --> 00:57:19,509
don't know how to get height involved

1254
00:57:16,179 --> 00:57:20,348
there if I don't make multiple maps if

1255
00:57:19,509 --> 00:57:27,818
that makes sense

1256
00:57:20,349 --> 00:57:29,499
so really that's most of it if I knew

1257
00:57:27,818 --> 00:57:31,960
how to get everything out of one map I

1258
00:57:29,498 --> 00:57:34,389
probably would but I can't think of

1259
00:57:31,960 --> 00:57:35,710
anything offhand so here's like I'll

1260
00:57:34,389 --> 00:57:38,230
just to give you a preview of sort of

1261
00:57:35,710 --> 00:57:40,239
what I've been thinking of what I've

1262
00:57:38,230 --> 00:57:43,809
been thinking of is there's a ground

1263
00:57:40,239 --> 00:57:46,778
right texture which we already made so

1264
00:57:43,809 --> 00:57:49,380
what we would do is we'd splat lights

1265
00:57:46,778 --> 00:57:54,248
into here right

1266
00:57:49,380 --> 00:57:57,130
basically so oh I'll say this the steps

1267
00:57:54,248 --> 00:57:59,528
here so here's our ground so for the

1268
00:57:57,130 --> 00:58:01,150
ground right you'd splat the ground

1269
00:57:59,528 --> 00:58:03,130
texture in there like we were doing

1270
00:58:01,150 --> 00:58:04,119
right so we're already doing that

1271
00:58:03,130 --> 00:58:07,749
because we want to draw that on the

1272
00:58:04,119 --> 00:58:10,358
screen we would then splat the shadows

1273
00:58:07,748 --> 00:58:14,949
for those things this for entities on

1274
00:58:10,358 --> 00:58:16,989
their right and we might even say take

1275
00:58:14,949 --> 00:58:18,939
the shadows and do those in a separate

1276
00:58:16,989 --> 00:58:20,528
bitmap so you might actually have ground

1277
00:58:18,940 --> 00:58:25,960
and shadows as two different bitmaps

1278
00:58:20,528 --> 00:58:27,940
right and then we take the middle map

1279
00:58:25,960 --> 00:58:29,798
which is where the lighting is right so

1280
00:58:27,940 --> 00:58:35,739
there's lights written into that middle

1281
00:58:29,798 --> 00:58:38,440
map right we take that and we draw that

1282
00:58:35,739 --> 00:58:42,028
into the ground map so we like add these

1283
00:58:38,440 --> 00:58:44,858
lights into the ground map right and

1284
00:58:42,028 --> 00:58:46,838
then we've got sort of a ground map that

1285
00:58:44,858 --> 00:58:48,429
has lighting in it that's also got the

1286
00:58:46,838 --> 00:58:49,929
shadowing in the ground texture then we

1287
00:58:48,429 --> 00:58:52,358
have a middle map that just has the

1288
00:58:49,929 --> 00:58:53,949
lighting right and then we have a top

1289
00:58:52,358 --> 00:58:56,170
map that has none of those things like

1290
00:58:53,949 --> 00:58:57,848
the top map just has some sky stuff or

1291
00:58:56,170 --> 00:59:01,269
whatever or like whatever is above us

1292
00:58:57,849 --> 00:59:03,130
right and then when I'm sampling to try

1293
00:59:01,268 --> 00:59:05,979
and get the 3d this out of it I feel

1294
00:59:03,130 --> 00:59:08,410
like that will give me sort of a gray

1295
00:59:05,980 --> 00:59:10,980
found plus lights down here your ground

1296
00:59:08,409 --> 00:59:15,608
plus light bounce basically down here

1297
00:59:10,980 --> 00:59:20,740
light in here just light and occlusion

1298
00:59:15,608 --> 00:59:23,769
and then you know sky up here which is

1299
00:59:20,739 --> 00:59:25,329
what I'm looking for I I don't know how

1300
00:59:23,769 --> 00:59:28,630
else to do that with just one

1301
00:59:25,329 --> 00:59:29,980
environment map with just one map like I

1302
00:59:28,630 --> 00:59:37,829
don't see how that would work

1303
00:59:29,980 --> 00:59:37,829
really hey that's basically it

1304
00:59:47,719 --> 00:59:52,048
I'm not sure I understand the point of

1305
00:59:50,219 --> 00:59:53,608
the bottom map will the ground be

1306
00:59:52,048 --> 00:59:56,099
contributing lighting to objects above

1307
00:59:53,608 --> 00:59:57,869
the ground yes I mean that's that's what

1308
00:59:56,099 --> 01:00:00,028
happens in real life too right like

1309
00:59:57,869 --> 01:00:01,739
bounce off the ground is like a big part

1310
01:00:00,028 --> 01:00:06,088
of what determines the look of things

1311
01:00:01,739 --> 01:00:07,858
that are sitting on the ground and so I

1312
01:00:06,088 --> 01:00:09,778
was just gonna see if we could get some

1313
01:00:07,858 --> 01:00:11,699
of that in there now once we actually

1314
01:00:09,778 --> 01:00:13,829
get all this working if we find that we

1315
01:00:11,699 --> 01:00:15,598
don't use one of these we'll just get

1316
01:00:13,829 --> 01:00:17,339
rid of it right because we can easily

1317
01:00:15,599 --> 01:00:20,249
just save computation by just getting

1318
01:00:17,338 --> 01:00:23,400
rid of it so my goal was first to put in

1319
01:00:20,248 --> 01:00:25,409
all three see how the effects come out

1320
01:00:23,400 --> 01:00:27,900
and anything that we find just isn't

1321
01:00:25,409 --> 01:00:29,190
useful we just nuke it and so we could

1322
01:00:27,900 --> 01:00:31,440
end up with just the middle map if

1323
01:00:29,190 --> 01:00:34,318
that's all we need but if it turns out

1324
01:00:31,440 --> 01:00:36,858
that the other ones do add a nice effect

1325
01:00:34,318 --> 01:00:36,858
we'll keep them

1326
01:00:53,900 --> 01:00:59,599
all righty any other lighting questions

1327
01:01:15,679 --> 01:01:18,579
looks like no

1328
01:01:23,389 --> 01:01:29,909
well you need a set of end maps for each

1329
01:01:25,710 --> 01:01:31,289
level in Z my thinking is yes and I was

1330
01:01:29,909 --> 01:01:34,559
thinking that basically what we do is

1331
01:01:31,289 --> 01:01:39,420
they would just kind of cascade in some

1332
01:01:34,559 --> 01:01:41,159
way right like I'm thinking that we

1333
01:01:39,420 --> 01:01:43,470
would basically like start with the

1334
01:01:41,159 --> 01:01:45,779
lowest level ground right and that's

1335
01:01:43,469 --> 01:01:47,579
gonna get rendered and that would be the

1336
01:01:45,780 --> 01:01:49,800
bottom end map and then we you know

1337
01:01:47,579 --> 01:01:52,049
after we have the sky map which is

1338
01:01:49,800 --> 01:01:57,330
essentially the ground map of the thing

1339
01:01:52,050 --> 01:01:59,340
above us sort of like inverted like so

1340
01:01:57,329 --> 01:02:02,279
we would take what the Alpha is of the

1341
01:01:59,340 --> 01:02:06,120
ground map that we would be using next

1342
01:02:02,280 --> 01:02:07,560
right you know if there's an alpha of

1343
01:02:06,119 --> 01:02:10,500
the ground which basically tells us

1344
01:02:07,559 --> 01:02:14,190
where it is we would use the Alpha map

1345
01:02:10,500 --> 01:02:16,349
of that composited with the middle map

1346
01:02:14,190 --> 01:02:19,920
of the layer above us would tell us

1347
01:02:16,349 --> 01:02:22,349
where the lighting like it's the inverse

1348
01:02:19,920 --> 01:02:25,409
alpha of that composited with the

1349
01:02:22,349 --> 01:02:27,900
lighting above us middle map lighting

1350
01:02:25,409 --> 01:02:31,829
above us would tell us where lights will

1351
01:02:27,900 --> 01:02:34,200
be shining down into us so you know

1352
01:02:31,829 --> 01:02:36,150
that's how in stacked things we would

1353
01:02:34,199 --> 01:02:38,849
get light lights that are moving above

1354
01:02:36,150 --> 01:02:40,260
us to be you know sort of shining down I

1355
01:02:38,849 --> 01:02:48,299
don't know if we want to go that crazy

1356
01:02:40,260 --> 01:02:51,240
but we could right and that just be part

1357
01:02:48,300 --> 01:02:53,430
of that process of peeling Z you know of

1358
01:02:51,239 --> 01:02:56,059
rendering the bottom first and then up

1359
01:02:53,429 --> 01:02:56,059
and up and up

1360
01:03:05,960 --> 01:03:14,960
any plans for doing over brightening on

1361
01:03:08,940 --> 01:03:23,909
the lights or even HDR um I'm not sure

1362
01:03:14,960 --> 01:03:27,028
so I mean basically like I don't think I

1363
01:03:23,909 --> 01:03:29,670
want to do HDR just because I'm not sure

1364
01:03:27,028 --> 01:03:38,880
how we would really get away with it in

1365
01:03:29,670 --> 01:03:40,108
software I mean we could I'm guessing

1366
01:03:38,880 --> 01:03:42,390
that the only thing that we'll really be

1367
01:03:40,108 --> 01:03:44,098
able to do in terms of over brightening

1368
01:03:42,389 --> 01:03:46,259
on the lights is using that middle

1369
01:03:44,099 --> 01:03:48,119
buffer possibly using that as like a

1370
01:03:46,259 --> 01:03:49,108
bloom kind of a filter or something like

1371
01:03:48,119 --> 01:03:51,568
that

1372
01:03:49,108 --> 01:03:54,900
but yeah I don't see us being able to

1373
01:03:51,568 --> 01:04:00,298
really do HDR in a software pipeline

1374
01:03:54,900 --> 01:04:02,489
just because I float16 I don't even know

1375
01:04:00,298 --> 01:04:05,159
yeah I mean I guess we could try this

1376
01:04:02,489 --> 01:04:07,289
yet now I can't honestly I really can't

1377
01:04:05,159 --> 01:04:10,998
think of any way that we would really be

1378
01:04:07,289 --> 01:04:14,759
able to do that you know maybe we try to

1379
01:04:10,998 --> 01:04:17,009
fit in a separate sort of blur buffer at

1380
01:04:14,759 --> 01:04:18,869
some point that that can get a little

1381
01:04:17,009 --> 01:04:21,509
bit of the bloom in there or something

1382
01:04:18,869 --> 01:04:24,180
like that but but I don't I don't really

1383
01:04:21,509 --> 01:04:28,579
see us being able to do much in the way

1384
01:04:24,179 --> 01:04:28,578
of of HDR in the software pipe

1385
01:04:37,500 --> 01:04:44,889
could you contain all lighting

1386
01:04:39,730 --> 01:04:47,349
information in a five byte bitmap 0:25

1387
01:04:44,889 --> 01:04:50,500
absorbance reflectance scale for RGB

1388
01:04:47,349 --> 01:04:52,690
alpha and scattering I want to try it

1389
01:04:50,500 --> 01:04:54,610
but I feel really hesitant because you

1390
01:04:52,690 --> 01:05:05,970
weren't against non 32-bit Alliance

1391
01:04:54,610 --> 01:05:08,860
trucks so I guess I I don't I mean I

1392
01:05:05,969 --> 01:05:11,769
it's it's probably fine I would I

1393
01:05:08,860 --> 01:05:13,930
wouldn't say that non 32-bit Alliance

1394
01:05:11,769 --> 01:05:17,409
trucks are necessarily a problem because

1395
01:05:13,929 --> 01:05:19,210
you're pulling this stuff in sort of as

1396
01:05:17,409 --> 01:05:21,039
pixel values anyway and so you could

1397
01:05:19,210 --> 01:05:22,869
probably get away with a five bitmap

1398
01:05:21,039 --> 01:05:24,940
format I don't know that you'd have too

1399
01:05:22,869 --> 01:05:26,230
much problem with that because even if

1400
01:05:24,940 --> 01:05:29,920
you did have a problem with that you

1401
01:05:26,230 --> 01:05:32,019
could just pack you know a couple of

1402
01:05:29,920 --> 01:05:34,960
them together and and sort of have less

1403
01:05:32,019 --> 01:05:37,659
of a problem with the was sort of the

1404
01:05:34,960 --> 01:05:39,610
unaligned nosov it but I guess what I'd

1405
01:05:37,659 --> 01:05:43,659
ask is where does the normal go in that

1406
01:05:39,610 --> 01:05:46,349
scheme right that seems like kind of a

1407
01:05:43,659 --> 01:05:46,349
kind of the issue

1408
01:05:50,159 --> 01:05:54,519
grumpy giant reduce excessive injustice

1409
01:05:52,420 --> 01:05:58,630
or to to lighting range gets good

1410
01:05:54,519 --> 01:06:00,789
results we could I mean yeah we could do

1411
01:05:58,630 --> 01:06:03,400
something where we say that there's you

1412
01:06:00,789 --> 01:06:05,619
know a zero to 255 actually Maps you

1413
01:06:03,400 --> 01:06:08,349
know 2 to double bright or something

1414
01:06:05,619 --> 01:06:11,019
like that I don't know I'll have to

1415
01:06:08,349 --> 01:06:12,250
think about it I will have to think

1416
01:06:11,019 --> 01:06:19,389
about it I'm not sure how I feel about

1417
01:06:12,250 --> 01:06:22,090
it do you plan on camera level lighting

1418
01:06:19,389 --> 01:06:26,589
effects such as stun grenade for lack of

1419
01:06:22,090 --> 01:06:29,559
a better example I don't know are you

1420
01:06:26,590 --> 01:06:31,660
talking about just taking the screen and

1421
01:06:29,559 --> 01:06:34,210
overlaying stuff on to it or brightening

1422
01:06:31,659 --> 01:06:38,469
it that's pretty easy for us to do

1423
01:06:34,210 --> 01:06:39,849
certainly I don't know how much of that

1424
01:06:38,469 --> 01:06:41,980
we really need to have in this

1425
01:06:39,849 --> 01:06:44,909
particular game but we could totally do

1426
01:06:41,980 --> 01:06:44,909
that it's not very hard

1427
01:06:54,690 --> 01:07:00,690
if you can do without alpha you could

1428
01:06:57,659 --> 01:07:06,299
possibly use RGB e or the e is the

1429
01:07:00,690 --> 01:07:11,250
exponent for all the channels uh I mean

1430
01:07:06,300 --> 01:07:13,380
it's just it complicates things a lot

1431
01:07:11,250 --> 01:07:19,710
through the pipeline if you want to do

1432
01:07:13,380 --> 01:07:21,150
HDR properly like if you do RGB for

1433
01:07:19,710 --> 01:07:25,400
example you're constantly having to deal

1434
01:07:21,150 --> 01:07:33,030
with how you load out and repack that E

1435
01:07:25,400 --> 01:07:38,599
which is a real pain now I mean it's

1436
01:07:33,030 --> 01:07:40,980
possible I don't know if it's plausible

1437
01:07:38,599 --> 01:07:46,650
but it's possible we could do something

1438
01:07:40,980 --> 01:07:48,840
with HDR I don't know I'm I would lean

1439
01:07:46,650 --> 01:07:50,190
towards not trying to put HDR in here

1440
01:07:48,840 --> 01:07:52,620
because I think we have enough stuff to

1441
01:07:50,190 --> 01:07:56,220
worry about I'm not sure that I really

1442
01:07:52,619 --> 01:07:59,190
want to try and do much with HDR but you

1443
01:07:56,219 --> 01:08:01,559
know I mean it's not really the case

1444
01:07:59,190 --> 01:08:04,590
that the renderer is completely locked

1445
01:08:01,559 --> 01:08:07,170
and difficult to change too much once

1446
01:08:04,590 --> 01:08:08,760
you do it I mean you know what's the

1447
01:08:07,170 --> 01:08:10,139
architectures in place a lot of times

1448
01:08:08,760 --> 01:08:11,400
you can make modifications to it so it's

1449
01:08:10,139 --> 01:08:14,159
not out of the question that we could do

1450
01:08:11,400 --> 01:08:19,050
it non HDR and then later on make it

1451
01:08:14,159 --> 01:08:22,019
more HDR right that's not not really out

1452
01:08:19,050 --> 01:08:23,520
of the question but I'm not sure we

1453
01:08:22,020 --> 01:08:24,750
could sort of keep an eye on that and

1454
01:08:23,520 --> 01:08:27,500
make sure that we don't do things that

1455
01:08:24,750 --> 01:08:27,500
will make it really difficult

1456
01:08:31,198 --> 01:08:37,238
is saturation hard to overlay no

1457
01:08:35,529 --> 01:08:42,009
saturation is actually pretty easy to

1458
01:08:37,238 --> 01:08:45,478
overlay if you want to in fact you can

1459
01:08:42,009 --> 01:08:48,670
kind of just just pull to the average

1460
01:08:45,479 --> 01:08:54,548
like I mean a pretty simple example

1461
01:08:48,670 --> 01:08:59,109
right is you know we could we could do a

1462
01:08:54,548 --> 01:09:02,769
pretty a pretty easy example of how that

1463
01:08:59,109 --> 01:09:05,319
works right so you know with our clear

1464
01:09:02,769 --> 01:09:09,248
here where's our clear render entry

1465
01:09:05,319 --> 01:09:13,329
clear so if we had something that was

1466
01:09:09,248 --> 01:09:15,608
like render entry saturation or

1467
01:09:13,328 --> 01:09:17,710
something right

1468
01:09:15,609 --> 01:09:20,440
you could imagine having a thing that's

1469
01:09:17,710 --> 01:09:21,998
like a saturation value work you can

1470
01:09:20,439 --> 01:09:23,588
just do a post pass and change whatever

1471
01:09:21,998 --> 01:09:27,728
the saturation ends up being of the

1472
01:09:23,588 --> 01:09:29,889
final thing that's not too hard to do it

1473
01:09:27,729 --> 01:09:31,479
would basically just be you know I'll

1474
01:09:29,889 --> 01:09:35,788
give you a quick sketch of what that

1475
01:09:31,479 --> 01:09:40,539
would be like so when we have our clear

1476
01:09:35,788 --> 01:09:42,639
we can do a saturation here where it

1477
01:09:40,538 --> 01:09:46,358
just passes whatever that saturation

1478
01:09:42,639 --> 01:09:48,909
level is I guess we'll just say the

1479
01:09:46,359 --> 01:09:54,249
value or the level I don't know what you

1480
01:09:48,908 --> 01:10:01,558
would call that level so we can push on

1481
01:09:54,248 --> 01:10:05,349
a saturation and set that level to level

1482
01:10:01,559 --> 01:10:09,248
and then you know in here when we

1483
01:10:05,349 --> 01:10:13,659
actually do whatever our math is which

1484
01:10:09,248 --> 01:10:20,170
is here we go we're pulling stuff out

1485
01:10:13,658 --> 01:10:23,799
when we grab one of those right render

1486
01:10:20,170 --> 01:10:26,229
entry saturation we can do a thing where

1487
01:10:23,800 --> 01:10:29,469
we just loop over the output target and

1488
01:10:26,229 --> 01:10:34,719
for every pixel that's in there change

1489
01:10:29,469 --> 01:10:37,300
its saturation right and so we could

1490
01:10:34,719 --> 01:10:40,809
just have a change saturation call which

1491
01:10:37,300 --> 01:10:42,779
takes the output target and you know

1492
01:10:40,809 --> 01:10:46,139
just takes that

1493
01:10:42,779 --> 01:10:50,309
level parameter and if I go to draw

1494
01:10:46,139 --> 01:10:55,170
rectangle like so if I take that out

1495
01:10:50,309 --> 01:10:57,960
actually don't want that exactly what

1496
01:10:55,170 --> 01:10:59,489
I'd rather have is draw a bitmap

1497
01:10:57,960 --> 01:11:02,520
probably okay here we go

1498
01:10:59,488 --> 01:11:07,529
so if I take draw bitmaps code and

1499
01:11:02,520 --> 01:11:10,050
change that to change saturation and I

1500
01:11:07,529 --> 01:11:14,118
just say okay I've got the buffer that

1501
01:11:10,050 --> 01:11:17,250
I'm changing and the saturation level

1502
01:11:14,118 --> 01:11:19,710
then what I could do is is force this

1503
01:11:17,250 --> 01:11:27,179
thing to loop over everything right so

1504
01:11:19,710 --> 01:11:28,948
just go ahead and do jestro this and

1505
01:11:27,179 --> 01:11:34,800
just have that loop over everything in

1506
01:11:28,948 --> 01:11:35,848
the buffer so both width and height full

1507
01:11:34,800 --> 01:11:37,529
width and height

1508
01:11:35,849 --> 01:11:39,270
it doesn't read any texels or anything

1509
01:11:37,529 --> 01:11:44,130
like that right but it does read in the

1510
01:11:39,270 --> 01:11:48,619
desc like so and really all that you

1511
01:11:44,130 --> 01:11:52,859
would do here is when you have this this

1512
01:11:48,618 --> 01:11:55,288
destination that comes in instead of of

1513
01:11:52,859 --> 01:11:56,848
actually doing any blending with the

1514
01:11:55,288 --> 01:12:00,238
text or anything that you can just sort

1515
01:11:56,849 --> 01:12:03,000
of desaturate it right and so one way to

1516
01:12:00,238 --> 01:12:04,109
desaturate it pretty easy way in fact I

1517
01:12:03,000 --> 01:12:05,429
guess what I should do is just double

1518
01:12:04,109 --> 01:12:09,118
check that I haven't ruined anything

1519
01:12:05,429 --> 01:12:20,578
here but so let's just go ahead and say

1520
01:12:09,118 --> 01:12:23,880
that result equals D for now yeah so if

1521
01:12:20,578 --> 01:12:26,639
I go in here here's what here's our

1522
01:12:23,880 --> 01:12:29,099
screen as it stands currently if I go in

1523
01:12:26,639 --> 01:12:33,179
here to handmade CPP and I add a

1524
01:12:29,099 --> 01:12:36,300
saturation in like so so we do right

1525
01:12:33,179 --> 01:12:40,949
before our render output I do saturation

1526
01:12:36,300 --> 01:12:42,779
render group zero point zero so that

1527
01:12:40,948 --> 01:12:45,960
would remove like well actually I guess

1528
01:12:42,779 --> 01:12:48,509
well yeah that should give us the same

1529
01:12:45,960 --> 01:12:54,448
screen we had right and so now if I come

1530
01:12:48,510 --> 01:12:56,699
in here and and actually make this do

1531
01:12:54,448 --> 01:13:01,078
something what you can imagine

1532
01:12:56,698 --> 01:13:03,538
you can imagine like the saturation is

1533
01:13:01,078 --> 01:13:07,590
sort of how far from gray something is

1534
01:13:03,538 --> 01:13:10,050
in some sense you might say and so you

1535
01:13:07,590 --> 01:13:11,909
know we could convert to the HSV color

1536
01:13:10,050 --> 01:13:13,019
space and convert back or whatever but

1537
01:13:11,908 --> 01:13:14,339
you know that might be a little

1538
01:13:13,019 --> 01:13:15,958
expensive although there's cheaper ways

1539
01:13:14,340 --> 01:13:17,489
of doing it now so we can look at all

1540
01:13:15,958 --> 01:13:20,939
those but I'll just show you a real

1541
01:13:17,488 --> 01:13:24,089
quick way to do something stupid which

1542
01:13:20,939 --> 01:13:28,049
is you know you can imagine your RG and

1543
01:13:24,090 --> 01:13:30,389
B values right you know we're sort of

1544
01:13:28,050 --> 01:13:32,639
imagining them between zero and one

1545
01:13:30,389 --> 01:13:35,340
right and they're kind of sticking like

1546
01:13:32,639 --> 01:13:37,019
this sort of thing right and what we

1547
01:13:35,340 --> 01:13:39,420
could say is well what if we just

1548
01:13:37,019 --> 01:13:42,599
average them together right so we did

1549
01:13:39,420 --> 01:13:44,458
like R plus G Plus B you know over three

1550
01:13:42,599 --> 01:13:46,619
or something right so we just took

1551
01:13:44,458 --> 01:13:49,649
whatever the average was and then we

1552
01:13:46,618 --> 01:13:52,049
represented these as deltas off of that

1553
01:13:49,649 --> 01:13:54,299
well then we could just multiply the

1554
01:13:52,050 --> 01:13:57,059
deltas by whatever our saturation amount

1555
01:13:54,300 --> 01:14:00,479
is and we'd go further or less away from

1556
01:13:57,059 --> 01:14:03,809
gray right and so it's pretty trivial to

1557
01:14:00,479 --> 01:14:05,458
hack in something like that again

1558
01:14:03,809 --> 01:14:07,079
without having to do a whole HSV

1559
01:14:05,458 --> 01:14:08,849
transformer although people have gotten

1560
01:14:07,078 --> 01:14:10,139
those down really cheap so we you know

1561
01:14:08,849 --> 01:14:11,550
if we really find that we want to do

1562
01:14:10,139 --> 01:14:15,690
this and we want to do it accurately we

1563
01:14:11,550 --> 01:14:17,940
could probably just do a real thing but

1564
01:14:15,689 --> 01:14:20,788
you know so I'm just gonna do that

1565
01:14:17,939 --> 01:14:28,018
average here is going to be one over

1566
01:14:20,788 --> 01:14:30,868
three right times the R plus the G plus

1567
01:14:28,019 --> 01:14:32,760
the B so this is just the average color

1568
01:14:30,868 --> 01:14:33,929
value and you can do better things for

1569
01:14:32,760 --> 01:14:35,309
grace to estimation here because there's

1570
01:14:33,929 --> 01:14:37,288
suck you know there's like your eyes

1571
01:14:35,309 --> 01:14:39,329
more response or the green and that sort

1572
01:14:37,288 --> 01:14:40,800
of stuff so you could do fancier stuff

1573
01:14:39,328 --> 01:14:42,359
here to get the grayscale value really

1574
01:14:40,800 --> 01:14:44,998
just you just want to plug in here

1575
01:14:42,359 --> 01:14:48,118
anything that produces a grayscale value

1576
01:14:44,998 --> 01:14:50,719
from the are the G and the B right and

1577
01:14:48,118 --> 01:14:54,058
so then you've got your your delta is

1578
01:14:50,719 --> 01:14:56,609
just going to be the are the G and the B

1579
01:14:54,059 --> 01:14:58,889
minus that average value right so it's

1580
01:14:56,609 --> 01:15:01,880
whatever you would have to do to get to

1581
01:14:58,889 --> 01:15:04,618
those color values from wherever you are

1582
01:15:01,880 --> 01:15:07,109
you know what I'm saying so once you

1583
01:15:04,618 --> 01:15:10,500
have that delta value then what you can

1584
01:15:07,109 --> 01:15:14,250
do is just reconstruct the new color

1585
01:15:10,500 --> 01:15:16,470
right and or I could just say right I

1586
01:15:14,250 --> 01:15:21,449
have a V for a result and that's just

1587
01:15:16,470 --> 01:15:26,240
going to be you know my average excuse

1588
01:15:21,449 --> 01:15:30,510
me that's just going to be my average

1589
01:15:26,239 --> 01:15:34,199
vector plus whatever that level is times

1590
01:15:30,510 --> 01:15:36,030
my Delta right so if it's 1.0 it adds it

1591
01:15:34,199 --> 01:15:39,510
all back in if it's zero it doesn't have

1592
01:15:36,029 --> 01:15:42,509
any back in right and then I want to

1593
01:15:39,510 --> 01:15:44,610
keep the Alpha value the same because

1594
01:15:42,510 --> 01:15:46,530
we're not we're not changing the you

1595
01:15:44,609 --> 01:15:49,139
know the the brightness the the sort of

1596
01:15:46,529 --> 01:15:51,960
opacity I should say of the thing I

1597
01:15:49,140 --> 01:15:53,670
forgot these are a lowercase now still

1598
01:15:51,960 --> 01:16:05,850
in my hand made hero like oh I gotta be

1599
01:15:53,670 --> 01:16:08,810
uppercase before so you know as you can

1600
01:16:05,850 --> 01:16:11,670
see now it's black and white right and

1601
01:16:08,810 --> 01:16:13,500
what we can do is we could drive that

1602
01:16:11,670 --> 01:16:17,819
off of an animated parameter so you can

1603
01:16:13,500 --> 01:16:21,149
see that it's actually you know doing

1604
01:16:17,819 --> 01:16:24,899
something we have that that gamestate

1605
01:16:21,149 --> 01:16:27,719
time thing in here angle is that getting

1606
01:16:24,899 --> 01:16:29,909
reset yeah angle is getting reset so I

1607
01:16:27,720 --> 01:16:33,000
guess I just want my game state time

1608
01:16:29,909 --> 01:16:37,559
here so I could just do game state time

1609
01:16:33,000 --> 01:16:42,479
0.5 F plus 0.5 times sign game state

1610
01:16:37,560 --> 01:16:44,160
time let's do that and in theory I guess

1611
01:16:42,479 --> 01:16:48,259
that's going to be able to slope times

1612
01:16:44,159 --> 01:16:48,260
Lisa will speed that up a little bit

1613
01:16:49,369 --> 01:16:52,369
yeah

1614
01:16:54,689 --> 01:16:59,309
so our framerate is awful at the moment

1615
01:16:56,939 --> 01:17:01,619
obviously so you know because we're

1616
01:16:59,310 --> 01:17:03,740
still super unoptimized and all that but

1617
01:17:01,619 --> 01:17:08,369
you can kind of see that we're you know

1618
01:17:03,739 --> 01:17:11,149
desaturating and and you know and on

1619
01:17:08,369 --> 01:17:13,559
desaturating how everyone put that but

1620
01:17:11,149 --> 01:17:14,129
again that's not really an accurate way

1621
01:17:13,560 --> 01:17:15,750
to do it

1622
01:17:14,130 --> 01:17:18,119
but that's basically what you would do

1623
01:17:15,750 --> 01:17:20,279
so what you want to do here if you want

1624
01:17:18,119 --> 01:17:22,859
to be a little bit better about that

1625
01:17:20,279 --> 01:17:27,179
right is you can just what you want to

1626
01:17:22,859 --> 01:17:34,229
do is do a fast HSV transform and then

1627
01:17:27,180 --> 01:17:35,579
you know and then do well you know I'm

1628
01:17:34,229 --> 01:17:37,229
not even sure that how much more

1629
01:17:35,579 --> 01:17:39,479
accurate that even is but if you did it

1630
01:17:37,229 --> 01:17:41,219
fast HSV transform and then did a fast

1631
01:17:39,479 --> 01:17:44,339
back that would that would basically be

1632
01:17:41,220 --> 01:17:49,920
what you would need right and so that's

1633
01:17:44,340 --> 01:17:52,460
that's just how that go so hopefully

1634
01:17:49,920 --> 01:17:52,460
that makes some sense

1635
01:17:55,340 --> 01:17:57,400
you

1636
01:18:06,579 --> 01:18:12,109
will like it reflective horizontally

1637
01:18:09,439 --> 01:18:13,849
from walls etc in this scheme so

1638
01:18:12,109 --> 01:18:15,439
potentially that's that's really the

1639
01:18:13,850 --> 01:18:17,989
part that's that's kind of what we're

1640
01:18:15,439 --> 01:18:20,509
talking about with that middle layer and

1641
01:18:17,988 --> 01:18:22,639
like I said we don't really know yet how

1642
01:18:20,510 --> 01:18:24,230
well we're gonna be able to do there but

1643
01:18:22,640 --> 01:18:26,590
that middle layer is what we'll be

1644
01:18:24,229 --> 01:18:29,149
trying to use to get some of that bounce

1645
01:18:26,590 --> 01:18:31,039
that local bounce so I don't know a lot

1646
01:18:29,149 --> 01:18:32,448
of this is just you know like I said I

1647
01:18:31,039 --> 01:18:34,460
don't know how well it's going to work

1648
01:18:32,448 --> 01:18:35,928
it might be awful it might be cool I

1649
01:18:34,460 --> 01:18:38,239
have no idea

1650
01:18:35,929 --> 01:18:42,739
lighting in 2d is always kind of just a

1651
01:18:38,238 --> 01:18:45,109
you know hmm he's always just a hack and

1652
01:18:42,738 --> 01:18:48,589
so it's how well you end up tuning your

1653
01:18:45,109 --> 01:18:50,089
hack to it works or not right and so

1654
01:18:48,590 --> 01:18:55,699
we'll we'll kind of see how much we

1655
01:18:50,090 --> 01:18:57,590
actually can get out of it now we can

1656
01:18:55,698 --> 01:18:59,769
over saturate it's true we can over

1657
01:18:57,590 --> 01:19:04,520
saturate I guess by cranking that value

1658
01:18:59,770 --> 01:19:11,780
so all right no more questions

1659
01:19:04,520 --> 01:19:16,070
seems like all right I'm gonna go ahead

1660
01:19:11,779 --> 01:19:17,539
and close down I guess I'll saturation

1661
01:19:16,069 --> 01:19:22,909
that we'll leave that in there just I

1662
01:19:17,539 --> 01:19:26,350
mean might as well but there we go okay

1663
01:19:22,909 --> 01:19:26,349
save the mischief

1664
01:19:27,899 --> 01:19:32,519
all right thank you everyone for joining

1665
01:19:30,810 --> 01:19:33,840
me for another episode of handmade hero

1666
01:19:32,520 --> 01:19:36,210
it's been a pleasure coding with you as

1667
01:19:33,840 --> 01:19:38,069
always if you would like to follow along

1668
01:19:36,210 --> 01:19:39,779
at home and you want to copy the source

1669
01:19:38,069 --> 01:19:42,329
code you can get that by pre-ordering

1670
01:19:39,779 --> 01:19:43,500
the game and you'll get an email that'll

1671
01:19:42,329 --> 01:19:44,939
give you a link that you can use to

1672
01:19:43,500 --> 01:19:46,710
download the source code every night

1673
01:19:44,939 --> 01:19:48,539
after I'm done I upload it so you can

1674
01:19:46,710 --> 01:19:51,029
check it out and just play around with

1675
01:19:48,539 --> 01:19:52,920
it and learn and you know it's a good

1676
01:19:51,029 --> 01:19:54,989
way to learn to sort of thinker with if

1677
01:19:52,920 --> 01:19:56,069
that makes sense we also have a patreon

1678
01:19:54,989 --> 01:19:57,300
page if you just want to support the

1679
01:19:56,069 --> 01:19:59,519
video series you can subscribe to that

1680
01:19:57,300 --> 01:20:01,199
it's always very appreciated we also

1681
01:19:59,520 --> 01:20:03,060
have a forums page that you can ask

1682
01:20:01,199 --> 01:20:04,409
questions on or look at an annotated

1683
01:20:03,060 --> 01:20:06,150
episode guide the communities put

1684
01:20:04,409 --> 01:20:08,609
together and also look at community

1685
01:20:06,149 --> 01:20:09,420
reports to Mac and Linux which can be

1686
01:20:08,609 --> 01:20:10,799
really helpful if you're trying to

1687
01:20:09,420 --> 01:20:11,880
follow along another platform and you're

1688
01:20:10,800 --> 01:20:13,860
not that familiar with that platform

1689
01:20:11,880 --> 01:20:15,239
people have done a lot of work a lot of

1690
01:20:13,859 --> 01:20:17,279
groundwork there's two and make that

1691
01:20:15,239 --> 01:20:18,569
easy for you there's also a tweet bot

1692
01:20:17,279 --> 01:20:20,579
which treats the schedule so if you want

1693
01:20:18,569 --> 01:20:23,239
to follow along with the live stream

1694
01:20:20,579 --> 01:20:25,949
that's the thing to check out and

1695
01:20:23,239 --> 01:20:29,519
speaking of that we will be back here 5

1696
01:20:25,949 --> 01:20:30,689
p.m. same time same place tomorrow right

1697
01:20:29,520 --> 01:20:32,850
here on Twitch 5:00 p.m. Pacific

1698
01:20:30,689 --> 01:20:35,819
Standard Time hope to see you all here

1699
01:20:32,850 --> 01:20:37,860
when we will do our correct equation for

1700
01:20:35,819 --> 01:20:40,019
bounce lighting which we really do need

1701
01:20:37,859 --> 01:20:41,639
to do because like you saw today we have

1702
01:20:40,020 --> 01:20:42,990
absolutely no curvature to our

1703
01:20:41,640 --> 01:20:45,600
reflection which is not good at all so

1704
01:20:42,989 --> 01:20:47,489
we'll be getting that fixed and then

1705
01:20:45,600 --> 01:20:49,200
we'll sort of be moving on to maybe

1706
01:20:47,489 --> 01:20:51,210
wills take a look at that fixing our

1707
01:20:49,199 --> 01:20:52,859
coordinate systems before we start

1708
01:20:51,210 --> 01:20:55,710
moving on to things like optimization

1709
01:20:52,859 --> 01:20:58,259
and of course trying to fill those light

1710
01:20:55,710 --> 01:21:00,899
fields with something more usable than

1711
01:20:58,260 --> 01:21:02,039
just red green and blue checkerboards so

1712
01:21:00,899 --> 01:21:03,029
thanks for joining us I hope to see you

1713
01:21:02,039 --> 01:21:05,430
tomorrow

1714
01:21:03,029 --> 01:21:07,859
and whether I do or don't please have a

1715
01:21:05,430 --> 01:21:08,310
fabulous Tuesday out there on the

1716
01:21:07,859 --> 01:21:11,029
Internet

1717
01:21:08,310 --> 01:21:11,030
take it easy everyone

