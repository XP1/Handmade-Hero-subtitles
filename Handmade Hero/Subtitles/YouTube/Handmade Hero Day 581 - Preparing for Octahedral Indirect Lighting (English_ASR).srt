1
00:00:03,290 --> 00:00:06,839
hello everyone and welcome to hand made

2
00:00:05,790 --> 00:00:09,449
here oh sure we could a complete-game

3
00:00:06,839 --> 00:00:10,050
live on stream oops i'm a little

4
00:00:09,449 --> 00:00:12,959
off-center

5
00:00:10,050 --> 00:00:16,528
today actually let's get over here like

6
00:00:12,960 --> 00:00:18,570
looking at the side of the screen today

7
00:00:16,528 --> 00:00:19,769
we're going to be pushing the lighting a

8
00:00:18,570 --> 00:00:21,589
little bit forward I think because

9
00:00:19,769 --> 00:00:26,879
yesterday we took a look at the artifact

10
00:00:21,589 --> 00:00:28,050
that I wanted to take a look at that we

11
00:00:26,879 --> 00:00:29,038
weren't sure exactly what it was the

12
00:00:28,050 --> 00:00:30,868
start of the stream but by the end of

13
00:00:29,039 --> 00:00:33,300
the stream we were quite comfortable

14
00:00:30,868 --> 00:00:34,979
with what was actually happening and in

15
00:00:33,299 --> 00:00:36,149
fact it opened up an area that we might

16
00:00:34,979 --> 00:00:36,808
want to poke at a little bit in the

17
00:00:36,149 --> 00:00:39,539
future

18
00:00:36,808 --> 00:00:42,839
effectively we found that the linear

19
00:00:39,539 --> 00:00:44,519
blending of the octahedral light map or

20
00:00:42,840 --> 00:00:48,000
bilinear blendering blending I should

21
00:00:44,520 --> 00:00:50,969
say was not producing particularly good

22
00:00:48,000 --> 00:00:53,189
results it's not the end of the world

23
00:00:50,969 --> 00:00:54,989
like we could totally use them but they

24
00:00:53,189 --> 00:00:56,399
weren't as satisfying as I thought that

25
00:00:54,988 --> 00:00:57,808
they probably could be and they

26
00:00:56,399 --> 00:01:01,710
suggested that we might want to switch

27
00:00:57,808 --> 00:01:03,570
to a higher quality sampling of the

28
00:01:01,710 --> 00:01:06,420
octahedral map now we have a couple

29
00:01:03,570 --> 00:01:08,188
options for doing that and we sort of

30
00:01:06,420 --> 00:01:10,409
played around with one yesterday and we

31
00:01:08,188 --> 00:01:11,908
implemented it and got it working and

32
00:01:10,409 --> 00:01:13,890
that was basically doing sort of a

33
00:01:11,909 --> 00:01:17,219
squared fall-off instead of a linear

34
00:01:13,890 --> 00:01:19,618
fall-off for the various interpolation

35
00:01:17,219 --> 00:01:22,560
points and it definitely looked more

36
00:01:19,618 --> 00:01:25,079
light like to me but it's still probably

37
00:01:22,560 --> 00:01:28,890
not necessarily what we would want it's

38
00:01:25,079 --> 00:01:31,170
hard to say there are ways of doing more

39
00:01:28,890 --> 00:01:33,060
like we could do more taps we get sample

40
00:01:31,170 --> 00:01:35,909
the texture more times so right now

41
00:01:33,060 --> 00:01:38,969
we're pulling for pixels from the

42
00:01:35,909 --> 00:01:42,420
octahedral map we could pull more right

43
00:01:38,969 --> 00:01:46,469
so we could pull a larger number of

44
00:01:42,420 --> 00:01:48,899
samples and get a smoother interpolation

45
00:01:46,469 --> 00:01:52,469
of the lighting and we may want to do

46
00:01:48,899 --> 00:01:53,790
that so we're just I'm not gonna look at

47
00:01:52,469 --> 00:01:58,228
that right now because it's kind of a

48
00:01:53,790 --> 00:01:59,939
second-order effect but basically we we

49
00:01:58,228 --> 00:02:02,250
kind of now know there's there's like a

50
00:01:59,938 --> 00:02:04,919
little tick mark that's like when we get

51
00:02:02,250 --> 00:02:06,420
to the end of this and we take a look at

52
00:02:04,920 --> 00:02:09,330
how the lighting is looking with the

53
00:02:06,420 --> 00:02:11,280
full lighting solution in there if we're

54
00:02:09,330 --> 00:02:12,790
seeing these artifacts because we know

55
00:02:11,280 --> 00:02:16,780
that they're there now

56
00:02:12,789 --> 00:02:18,669
if if they're objectionable at either

57
00:02:16,780 --> 00:02:22,509
the squared version or the linear

58
00:02:18,669 --> 00:02:25,238
version which only uses four pixels or

59
00:02:22,509 --> 00:02:28,060
four texels from the texture map at that

60
00:02:25,239 --> 00:02:30,370
point we may investigate some cubic

61
00:02:28,060 --> 00:02:33,789
interpolation or something else that's

62
00:02:30,370 --> 00:02:37,509
relatively fast but involves more like

63
00:02:33,789 --> 00:02:40,120
nine pixels from the texture map or you

64
00:02:37,509 --> 00:02:42,848
know worse yet 25 pixels from the text

65
00:02:40,120 --> 00:02:46,629
texture map or 16 pixels from the

66
00:02:42,848 --> 00:02:48,339
texture map and again normally I would

67
00:02:46,628 --> 00:02:52,120
sort of bristle at the thought of doing

68
00:02:48,340 --> 00:02:54,628
that but that's kind of an old-school

69
00:02:52,120 --> 00:02:57,340
bristling because nowadays actually

70
00:02:54,628 --> 00:02:59,818
texture samples aren't that expensive if

71
00:02:57,340 --> 00:03:02,979
they're from the same place right

72
00:02:59,818 --> 00:03:05,138
texturing off of modern graphics cards

73
00:03:02,979 --> 00:03:06,699
anyway and again this is a totally

74
00:03:05,139 --> 00:03:08,560
optional feature so the nice part about

75
00:03:06,699 --> 00:03:09,280
it is on low-end hardware we could just

76
00:03:08,560 --> 00:03:10,989
turn it off

77
00:03:09,280 --> 00:03:12,400
and just use the one sample and you just

78
00:03:10,989 --> 00:03:14,739
have more artifacts in the lighting

79
00:03:12,400 --> 00:03:15,969
that's a great place to be because then

80
00:03:14,739 --> 00:03:18,280
we could just say look if this is on a

81
00:03:15,969 --> 00:03:20,348
fast card we know that lots of texture

82
00:03:18,280 --> 00:03:22,598
samples from the same location will all

83
00:03:20,348 --> 00:03:24,759
hit the texture cache very well so we'll

84
00:03:22,598 --> 00:03:26,738
just go ahead and do 25 samples and have

85
00:03:24,759 --> 00:03:30,340
a beautiful lighting solution or

86
00:03:26,739 --> 00:03:34,719
whatever hmm that's a really great place

87
00:03:30,340 --> 00:03:36,969
for us to be because in that scenario we

88
00:03:34,719 --> 00:03:38,408
can just say look how hardcore is the

89
00:03:36,969 --> 00:03:39,669
card we're running on turn on that

90
00:03:38,408 --> 00:03:43,418
feature and now we just get better

91
00:03:39,669 --> 00:03:45,250
results for taking more GPU time right I

92
00:03:43,419 --> 00:03:57,489
got a saucy on my hands here on

93
00:03:45,250 --> 00:04:00,908
second this is Molly beam many of you

94
00:03:57,489 --> 00:04:03,310
know her she's an excellent puss she

95
00:04:00,908 --> 00:04:05,168
likes the microphone she knocked it over

96
00:04:03,310 --> 00:04:07,719
one time and I think that scared her a

97
00:04:05,169 --> 00:04:11,889
little bit you want to say hi to

98
00:04:07,719 --> 00:04:17,139
everybody do you know yeah everyone's

99
00:04:11,889 --> 00:04:19,840
looking they can see you yeah I know

100
00:04:17,139 --> 00:04:21,439
what you're up to today but you can sit

101
00:04:19,839 --> 00:04:22,939
here if you want

102
00:04:21,439 --> 00:04:34,879
just don't knock over the microphone

103
00:04:22,939 --> 00:04:37,189
again alright so we have plenty of

104
00:04:34,879 --> 00:04:40,459
options there and the so the good thing

105
00:04:37,189 --> 00:04:42,139
about that is oh ok plus new are you

106
00:04:40,459 --> 00:04:44,479
good what are you gonna do here what's

107
00:04:42,139 --> 00:04:49,519
going on you're totally gonna knock over

108
00:04:44,480 --> 00:04:51,819
the microphone again aren't you alright

109
00:04:49,519 --> 00:04:55,279
we may have we may have made a mistake

110
00:04:51,819 --> 00:04:59,870
okay plus what do we what are we doing

111
00:04:55,279 --> 00:05:02,509
here alright okay so basically what we

112
00:04:59,870 --> 00:05:03,769
want to do is we want to sort of just

113
00:05:02,509 --> 00:05:05,360
keep that in the back of our minds we

114
00:05:03,769 --> 00:05:07,370
don't really have to deal with it right

115
00:05:05,360 --> 00:05:09,710
now because it's not actually affecting

116
00:05:07,370 --> 00:05:12,009
our ability to see what the lighting

117
00:05:09,709 --> 00:05:16,489
salute

118
00:05:12,009 --> 00:05:20,719
to see what the lighting solution is but

119
00:05:16,490 --> 00:05:23,360
we don't actually need to to do any more

120
00:05:20,720 --> 00:05:25,690
work on it we may need to do some work

121
00:05:23,360 --> 00:05:28,040
to protect our microphone from the cat

122
00:05:25,689 --> 00:05:31,069
but we don't actually need to do any

123
00:05:28,040 --> 00:05:33,020
more work to address that particular

124
00:05:31,069 --> 00:05:34,699
lighting artefact because it's something

125
00:05:33,019 --> 00:05:36,560
that we can just address as late as we

126
00:05:34,699 --> 00:05:39,379
want to in the development cycle and

127
00:05:36,560 --> 00:05:41,720
it's just throwing more GPU blending

128
00:05:39,379 --> 00:05:44,209
time at the problem which is an easy

129
00:05:41,720 --> 00:05:45,950
thing to turn on and off so I'm just

130
00:05:44,209 --> 00:05:47,899
totally satisfied that that's a solved

131
00:05:45,949 --> 00:05:49,610
problem if it needs to be and it can

132
00:05:47,899 --> 00:05:52,250
just be something that gets better with

133
00:05:49,610 --> 00:05:54,759
higher end hardware if that's what we

134
00:05:52,250 --> 00:05:57,110
want so we'll just put that aside so

135
00:05:54,759 --> 00:06:00,289
that leaves us with two things that I

136
00:05:57,110 --> 00:06:02,689
want to do going forward the first one

137
00:06:00,290 --> 00:06:04,100
is I want to get now the real lighting

138
00:06:02,689 --> 00:06:05,870
solution in there because we've got the

139
00:06:04,100 --> 00:06:07,760
ray caster and I want the ray caster to

140
00:06:05,870 --> 00:06:09,470
start I want to start using the Ray

141
00:06:07,759 --> 00:06:11,240
caster in the octahedral Maps and

142
00:06:09,470 --> 00:06:13,700
debugging that I think that's what I

143
00:06:11,240 --> 00:06:16,220
want to do today and then the step after

144
00:06:13,699 --> 00:06:17,810
that is right now we're sort of

145
00:06:16,220 --> 00:06:20,720
maintaining a separate voxel for no

146
00:06:17,810 --> 00:06:22,550
reason that's just because of the way we

147
00:06:20,720 --> 00:06:24,740
were sort of getting things working and

148
00:06:22,550 --> 00:06:27,290
we don't actually need to do that

149
00:06:24,740 --> 00:06:31,819
anymore we could just write directly

150
00:06:27,290 --> 00:06:33,379
into the okay I think puts me start

151
00:06:31,819 --> 00:06:35,408
typing into the chat window that's

152
00:06:33,379 --> 00:06:37,240
probably going to be a problem

153
00:06:35,408 --> 00:06:40,509
don't turn off the stream okay I'm gonna

154
00:06:37,240 --> 00:06:42,210
put you in that window so that all you

155
00:06:40,509 --> 00:06:45,189
can do is type into the chat hopefully

156
00:06:42,209 --> 00:06:47,788
really hoping we don't have it hmm

157
00:06:45,189 --> 00:06:49,839
push shuts down the computer situation I

158
00:06:47,788 --> 00:06:50,889
tried to make sure that none of the

159
00:06:49,839 --> 00:06:53,228
buttons that would shut down the

160
00:06:50,889 --> 00:06:57,610
computer can be pawed with a one paw

161
00:06:53,228 --> 00:07:05,969
click but it's not always it's not

162
00:06:57,610 --> 00:07:09,879
always a perfect system all right so

163
00:07:05,970 --> 00:07:11,800
what we need to do now is say let's

164
00:07:09,879 --> 00:07:15,039
let's wire up the lighting we'll deal

165
00:07:11,800 --> 00:07:16,960
with how to get the with streamlining

166
00:07:15,038 --> 00:07:18,430
the voxel side of things later because

167
00:07:16,959 --> 00:07:20,948
there's a lot of stuff we need to do

168
00:07:18,430 --> 00:07:22,120
there that's just minutia first of all

169
00:07:20,949 --> 00:07:23,829
we don't need to store it as floats

170
00:07:22,120 --> 00:07:25,389
anymore we can encode the lighting in

171
00:07:23,829 --> 00:07:27,699
something much more compact at the very

172
00:07:25,389 --> 00:07:29,620
least we could do 16 bytes per gun we

173
00:07:27,699 --> 00:07:31,300
certainly don't need 32 bytes relic of

174
00:07:29,620 --> 00:07:34,569
doing now we're just doing 32 bytes per

175
00:07:31,300 --> 00:07:37,870
gun because we don't want to have to

176
00:07:34,569 --> 00:07:39,189
debug quantization issues right we want

177
00:07:37,870 --> 00:07:40,810
to see what the solution looks like at

178
00:07:39,189 --> 00:07:43,569
full float before we drop it down to

179
00:07:40,810 --> 00:07:45,968
something less so we've got that we can

180
00:07:43,569 --> 00:07:47,560
do we don't need the voxel intermediate

181
00:07:45,968 --> 00:07:49,478
storage we can just write directly into

182
00:07:47,560 --> 00:07:52,028
voxel so those are things that we're

183
00:07:49,478 --> 00:07:53,918
gonna streamline in a second that'll be

184
00:07:52,028 --> 00:07:56,348
that'll be like you know two weeks from

185
00:07:53,918 --> 00:07:58,120
now or whatever so right now we need to

186
00:07:56,348 --> 00:07:59,589
do is just wire up the ray caster and

187
00:07:58,120 --> 00:08:02,860
get the actual lighting scheme in place

188
00:07:59,589 --> 00:08:04,869
and I'm torn about how I want this to

189
00:08:02,860 --> 00:08:08,680
work I was we built a thing that allows

190
00:08:04,870 --> 00:08:10,959
us to query the lighting and the only

191
00:08:08,680 --> 00:08:12,968
thing I really don't know right now I'm

192
00:08:10,959 --> 00:08:15,430
not sure about is whether we should

193
00:08:12,968 --> 00:08:17,709
query the lighting in some time shoot at

194
00:08:15,430 --> 00:08:20,590
the light which is sort of a a way that

195
00:08:17,709 --> 00:08:22,348
Ray Castor's often improve the ability

196
00:08:20,589 --> 00:08:25,089
for lighting to get out into the scene

197
00:08:22,348 --> 00:08:27,098
or if we just shouldn't do that and we

198
00:08:25,089 --> 00:08:31,269
should always just choose sort of a

199
00:08:27,098 --> 00:08:32,740
regularly uniform sampling and we just

200
00:08:31,269 --> 00:08:34,569
let the light bounce the way it bounces

201
00:08:32,740 --> 00:08:36,668
because we're not trying to buy us

202
00:08:34,570 --> 00:08:38,919
coming from any particular thing like

203
00:08:36,668 --> 00:08:43,639
yes there's lights but no we don't care

204
00:08:38,918 --> 00:08:45,799
because we're just doing sort of

205
00:08:43,639 --> 00:08:48,949
output of these lights into something

206
00:08:45,799 --> 00:08:51,859
regular right and so so I don't know I

207
00:08:48,950 --> 00:08:52,790
really don't we'll we'll have to play

208
00:08:51,860 --> 00:08:56,360
around with that because I'm not sure

209
00:08:52,789 --> 00:08:58,099
how we want to do it so anyway let's go

210
00:08:56,360 --> 00:08:59,870
ahead and get started here I think I

211
00:08:58,100 --> 00:09:03,320
want to do that sort of Ray casting

212
00:08:59,870 --> 00:09:05,720
stuff today get that started and because

213
00:09:03,320 --> 00:09:07,519
that way we'll try to hopefully get us

214
00:09:05,720 --> 00:09:08,750
into a position where next weekend we

215
00:09:07,519 --> 00:09:11,360
can spend all weekend

216
00:09:08,750 --> 00:09:13,549
debugging the Ray caster and the

217
00:09:11,360 --> 00:09:16,370
octahedral map interaction so I'd like

218
00:09:13,549 --> 00:09:19,309
to get that like wired up and working

219
00:09:16,370 --> 00:09:22,250
and just you know buggy right I'd like

220
00:09:19,309 --> 00:09:24,259
to get to a buggy wiring of that today

221
00:09:22,250 --> 00:09:27,289
so that next weekend we can spend all

222
00:09:24,259 --> 00:09:30,649
weekend working on that so you can see

223
00:09:27,289 --> 00:09:33,199
where we left off last time we basically

224
00:09:30,649 --> 00:09:36,649
have the octahedral Maps working pretty

225
00:09:33,200 --> 00:09:38,450
reliably in my opinion there are some

226
00:09:36,649 --> 00:09:40,578
things that we're gonna have to address

227
00:09:38,450 --> 00:09:43,339
going forward that are still artifacts

228
00:09:40,578 --> 00:09:45,229
but that we know what they all are one

229
00:09:43,339 --> 00:09:47,750
is when you move a light directly

230
00:09:45,230 --> 00:09:49,879
through a light probe you get some right

231
00:09:47,750 --> 00:09:51,440
you get some issues there I'm not sure

232
00:09:49,879 --> 00:09:53,720
to what extent that will really cause a

233
00:09:51,440 --> 00:09:55,790
problem in practice because in practice

234
00:09:53,720 --> 00:09:58,480
I think we won't really have this

235
00:09:55,789 --> 00:10:02,000
happening because the light this is a

236
00:09:58,480 --> 00:10:03,550
procedurally done light right now and I

237
00:10:02,000 --> 00:10:06,049
think once you're actually doing

238
00:10:03,549 --> 00:10:08,120
hemispheres or a spherical sampling

239
00:10:06,049 --> 00:10:09,528
you're gonna have so many inputs to that

240
00:10:08,120 --> 00:10:11,389
system that I don't know that you'll get

241
00:10:09,528 --> 00:10:12,769
such a problem when the when you just

242
00:10:11,389 --> 00:10:14,750
have this one function that can move

243
00:10:12,769 --> 00:10:16,009
through a singularity like that so I'm

244
00:10:14,750 --> 00:10:17,539
not sure we'll have to address it but

245
00:10:16,009 --> 00:10:19,250
you can see it sometimes happening we

246
00:10:17,539 --> 00:10:20,599
get a like a little bright flash of the

247
00:10:19,250 --> 00:10:23,120
light and that's what's happening there

248
00:10:20,600 --> 00:10:25,970
we look at that and then of course we

249
00:10:23,120 --> 00:10:28,240
have the sort of the sort of flower

250
00:10:25,970 --> 00:10:30,980
shape here that's the interpolation

251
00:10:28,240 --> 00:10:32,750
right and eventually Ike I said we might

252
00:10:30,980 --> 00:10:34,850
want to try a bicubic to get that more

253
00:10:32,750 --> 00:10:36,919
of a splotch that looks like that so

254
00:10:34,850 --> 00:10:38,480
we'll sort of play with that but those

255
00:10:36,919 --> 00:10:40,370
are the two artifacts that we have right

256
00:10:38,480 --> 00:10:42,949
now but we know what they are and so I

257
00:10:40,370 --> 00:10:45,139
don't really care about them much the

258
00:10:42,948 --> 00:10:47,659
light probes here are being drawn I

259
00:10:45,139 --> 00:10:49,189
don't know that I want to actually draw

260
00:10:47,659 --> 00:10:51,620
them anymore so I'm going to turn those

261
00:10:49,190 --> 00:10:54,680
off for now we may want to turn them on

262
00:10:51,620 --> 00:10:56,810
so we can draw them the octahedral map

263
00:10:54,679 --> 00:10:57,409
for each one of those at the location

264
00:10:56,809 --> 00:10:59,869
where the

265
00:10:57,409 --> 00:11:01,789
is I think we will want to do that in

266
00:10:59,870 --> 00:11:04,220
the future but we probably won't do that

267
00:11:01,789 --> 00:11:06,370
the way we're doing it now so I'm gonna

268
00:11:04,220 --> 00:11:11,000
just gonna go ahead and turn that off

269
00:11:06,370 --> 00:11:17,318
the base of the push debug box for these

270
00:11:11,000 --> 00:11:22,519
we're gonna we're gonna get rid of so in

271
00:11:17,318 --> 00:11:25,039
there or there but here so in here I'm

272
00:11:22,519 --> 00:11:29,990
just gonna nerf this and I'm gonna let

273
00:11:25,039 --> 00:11:31,969
this be a just a turned off path so if

274
00:11:29,990 --> 00:11:33,948
we need it again and that way we're just

275
00:11:31,970 --> 00:11:35,959
gonna look here and we can sort of see

276
00:11:33,948 --> 00:11:37,250
some there's still some debug boxes

277
00:11:35,958 --> 00:11:40,008
being drawn in here for things like

278
00:11:37,250 --> 00:11:41,360
light querying and we can turn those off

279
00:11:40,009 --> 00:11:43,970
eventually as well but for the moment

280
00:11:41,360 --> 00:11:46,100
I'm gonna leave amongst I don't care and

281
00:11:43,970 --> 00:11:48,620
we probably can start to turn these off

282
00:11:46,100 --> 00:11:50,329
a lot of the time too because for a

283
00:11:48,620 --> 00:11:53,028
while we're just gonna be working on the

284
00:11:50,328 --> 00:11:57,349
ray casting and we now know that we can

285
00:11:53,028 --> 00:11:59,688
see the octahedral maps just fine now

286
00:11:57,350 --> 00:12:01,370
like so this like we know we're pretty

287
00:11:59,688 --> 00:12:03,500
much sampling them properly as far as I

288
00:12:01,370 --> 00:12:06,620
can tell and so we don't really need to

289
00:12:03,500 --> 00:12:08,360
see these at the immediate moment so I'm

290
00:12:06,620 --> 00:12:10,009
also gonna go ahead and turn some of

291
00:12:08,360 --> 00:12:14,060
that off so I'll turn off the edge

292
00:12:10,009 --> 00:12:20,028
coloring and I'll turn off the the

293
00:12:14,059 --> 00:12:21,888
actual drawing of those of those as well

294
00:12:20,028 --> 00:12:23,600
I should probably centralize a lot of

295
00:12:21,889 --> 00:12:25,430
these switches so that I'm not like

296
00:12:23,600 --> 00:12:28,220
dancing around with all this stuff each

297
00:12:25,429 --> 00:12:30,559
time but either way so if we look in

298
00:12:28,220 --> 00:12:32,180
here you can see we've got the light

299
00:12:30,559 --> 00:12:37,818
maps being drawn in here we can just

300
00:12:32,179 --> 00:12:43,519
kind of turn that off I'm not sure why

301
00:12:37,818 --> 00:12:44,929
this is happening that doesn't really

302
00:12:43,519 --> 00:12:50,000
make much sense that should probably be

303
00:12:44,929 --> 00:12:53,058
out here there we go not sure why we're

304
00:12:50,000 --> 00:12:55,519
doing that there was alright okay so now

305
00:12:53,058 --> 00:12:58,578
we just switch back and we should have

306
00:12:55,519 --> 00:13:00,860
essentially a fairly clean version of

307
00:12:58,578 --> 00:13:04,489
the of the game lighting here right

308
00:13:00,860 --> 00:13:06,649
and it's time to start making this

309
00:13:04,490 --> 00:13:10,740
actually try to convict some light

310
00:13:06,649 --> 00:13:12,990
around so what I'd like to do is just

311
00:13:10,740 --> 00:13:16,409
switch over to the other routine and

312
00:13:12,990 --> 00:13:20,100
start to try and make that routine you

313
00:13:16,409 --> 00:13:21,779
know do something useful for us so if

314
00:13:20,100 --> 00:13:23,909
you remember the way that we've got this

315
00:13:21,779 --> 00:13:26,669
working is you know we kind of have this

316
00:13:23,909 --> 00:13:29,009
thing set up where we can turn on this

317
00:13:26,669 --> 00:13:32,089
test sphere and then there's also this

318
00:13:29,009 --> 00:13:35,069
like checkerboard thing right and

319
00:13:32,090 --> 00:13:38,100
finally we have this light transfer bit

320
00:13:35,070 --> 00:13:40,020
and all of this stuff is kind of

321
00:13:38,100 --> 00:13:41,370
nonsense now because you know like I

322
00:13:40,019 --> 00:13:44,189
said we kind of want to be writing

323
00:13:41,370 --> 00:13:46,350
directly into this thing instead of

324
00:13:44,190 --> 00:13:48,900
doing what we were doing before but you

325
00:13:46,350 --> 00:13:50,490
know either way it's fine we we can

326
00:13:48,899 --> 00:13:52,620
leave it this way for now and then when

327
00:13:50,490 --> 00:13:55,529
we streamline it will just streamline it

328
00:13:52,620 --> 00:13:57,750
once everything's working and the point

329
00:13:55,529 --> 00:14:00,389
here is this test light transfer the

330
00:13:57,750 --> 00:14:02,490
checkerboard code is is not really still

331
00:14:00,389 --> 00:14:04,919
working I mean we could make it work by

332
00:14:02,490 --> 00:14:06,570
actually assigning to this but we'll do

333
00:14:04,919 --> 00:14:09,179
this if we ever actually care about the

334
00:14:06,570 --> 00:14:10,560
checkerboard the test light transfer

335
00:14:09,179 --> 00:14:12,509
code is the code that we're actually

336
00:14:10,559 --> 00:14:14,069
going to need now because the test light

337
00:14:12,509 --> 00:14:16,889
transfer code is the code that actually

338
00:14:14,070 --> 00:14:20,580
would grab out of the voxel storage

339
00:14:16,889 --> 00:14:23,580
system and write to whatever we've got

340
00:14:20,580 --> 00:14:27,000
here right so we're gonna need this to

341
00:14:23,580 --> 00:14:28,470
be re-enabled and before I do that I

342
00:14:27,000 --> 00:14:30,720
would like to take a look at the light

343
00:14:28,470 --> 00:14:32,820
voxel cell because I think we want to

344
00:14:30,720 --> 00:14:37,470
change the conception of how this is

345
00:14:32,820 --> 00:14:38,490
working so what I realized I was

346
00:14:37,470 --> 00:14:40,110
thinking about this the other day

347
00:14:38,490 --> 00:14:41,879
actually just idly when I was sitting

348
00:14:40,110 --> 00:14:44,460
around and what I realized is I think

349
00:14:41,879 --> 00:14:45,049
we've been thinking about these update

350
00:14:44,460 --> 00:14:47,820
steps

351
00:14:45,049 --> 00:14:49,979
stooop stupid like we've been kind of

352
00:14:47,820 --> 00:14:51,960
been stupid thinking about these

353
00:14:49,980 --> 00:14:55,200
lighting steps because what I was

354
00:14:51,960 --> 00:14:57,660
thinking is we don't really need to do

355
00:14:55,200 --> 00:15:01,220
all this nonsense about total weight

356
00:14:57,659 --> 00:15:04,860
accumulated and all that garbage right

357
00:15:01,220 --> 00:15:09,269
because if you think about it when we go

358
00:15:04,860 --> 00:15:11,370
to sample a location in the world and

359
00:15:09,269 --> 00:15:15,090
we're going to write into one of these

360
00:15:11,370 --> 00:15:17,310
octahedral maps what we could do instead

361
00:15:15,090 --> 00:15:18,750
of any of the stuff that I have been

362
00:15:17,309 --> 00:15:20,849
doing where we track weights and all

363
00:15:18,750 --> 00:15:24,190
that stuff is just say look every time

364
00:15:20,850 --> 00:15:29,139
we write into one just treat that

365
00:15:24,190 --> 00:15:34,750
and update and blend it you know 95% 5%

366
00:15:29,139 --> 00:15:37,179
blend it in right there because we want

367
00:15:34,750 --> 00:15:39,129
the update rate to be based on how much

368
00:15:37,179 --> 00:15:41,620
new information is coming in anyway and

369
00:15:39,129 --> 00:15:43,720
the more rays we cast out of something

370
00:15:41,620 --> 00:15:46,480
the more accurate the solution would be

371
00:15:43,720 --> 00:15:49,060
on this frame anyway so we don't need to

372
00:15:46,480 --> 00:15:51,970
do an accumulation pass and then a fill

373
00:15:49,059 --> 00:15:54,579
we can just accumulate directly in

374
00:15:51,970 --> 00:15:57,580
theirs right there's no reason not to do

375
00:15:54,580 --> 00:16:00,520
that anymore so I'm pretty sure that

376
00:15:57,580 --> 00:16:03,310
this is just stupid like I'm pretty sure

377
00:16:00,519 --> 00:16:06,850
this is just not necessary right we only

378
00:16:03,309 --> 00:16:09,129
actually need that and what we can do is

379
00:16:06,850 --> 00:16:10,810
just update this directly which is great

380
00:16:09,129 --> 00:16:13,240
because then when we want to roll all

381
00:16:10,809 --> 00:16:15,759
this into a nice clean path once we have

382
00:16:13,240 --> 00:16:17,590
it working well we can just do this

383
00:16:15,759 --> 00:16:19,569
directly into the texture right so we

384
00:16:17,590 --> 00:16:21,550
just store the texture and we just

385
00:16:19,570 --> 00:16:23,260
update directly into the texture with a

386
00:16:21,549 --> 00:16:26,139
light update and that's exactly what I

387
00:16:23,259 --> 00:16:29,289
think we want to do so if we take a look

388
00:16:26,139 --> 00:16:30,610
at what's going to happen here once I

389
00:16:29,289 --> 00:16:33,009
start enabling some stuff we're gonna

390
00:16:30,610 --> 00:16:35,350
have to deal with it but for the moment

391
00:16:33,009 --> 00:16:37,870
right here's our test light transfer

392
00:16:35,350 --> 00:16:39,220
pass we're gonna grab a light sell out

393
00:16:37,870 --> 00:16:41,200
of here and then we're gonna do some

394
00:16:39,220 --> 00:16:43,840
stuff well all right we know we need to

395
00:16:41,200 --> 00:16:46,030
do a light C and a light D in this case

396
00:16:43,840 --> 00:16:49,240
we can just grab those directly out of

397
00:16:46,029 --> 00:16:52,870
here right so what we can do is say all

398
00:16:49,240 --> 00:16:54,129
right the light C and the light D are

399
00:16:52,870 --> 00:16:56,200
just gonna be grabbed directly out of

400
00:16:54,129 --> 00:16:58,299
the voxel they're gonna be grabbed out

401
00:16:56,200 --> 00:17:00,430
of the particular location that we're

402
00:16:58,299 --> 00:17:04,088
talking about here

403
00:17:00,429 --> 00:17:09,399
and so we can just do like you know T X

404
00:17:04,088 --> 00:17:12,099
Y dy DX DX or something right and we can

405
00:17:09,400 --> 00:17:14,620
get rid of this and we can write those

406
00:17:12,099 --> 00:17:16,389
here right so we don't really have to do

407
00:17:14,619 --> 00:17:18,909
anything else we'll just get that and

408
00:17:16,390 --> 00:17:21,400
it'll work and everyone will be happy so

409
00:17:18,910 --> 00:17:24,310
we can turn tests light transfer on now

410
00:17:21,400 --> 00:17:27,160
in theory anyway and we should actually

411
00:17:24,309 --> 00:17:28,960
be able to just use that now the problem

412
00:17:27,160 --> 00:17:31,180
is we're not computing anything in it so

413
00:17:28,960 --> 00:17:33,400
it we would just write and you can see

414
00:17:31,180 --> 00:17:37,529
it it's just black right so you can see

415
00:17:33,400 --> 00:17:37,530
we don't have any any actual data here

416
00:17:37,589 --> 00:17:40,919
but all we really need to do now is we

417
00:17:39,240 --> 00:17:43,109
just need to go ahead and say oh okay

418
00:17:40,920 --> 00:17:48,210
let's make sure we actually compute

419
00:17:43,109 --> 00:17:50,549
something here and put something into

420
00:17:48,210 --> 00:17:53,519
these voxel cells right we just need to

421
00:17:50,549 --> 00:17:56,549
put something into the voxel cells so

422
00:17:53,519 --> 00:17:58,410
that we can do our lighting and so in

423
00:17:56,549 --> 00:17:59,879
order to test that working at all in

424
00:17:58,410 --> 00:18:01,440
fact you can also see here like look at

425
00:17:59,880 --> 00:18:03,270
all this work we were doing before that

426
00:18:01,440 --> 00:18:05,670
we just don't need to do like we don't

427
00:18:03,269 --> 00:18:07,799
need to clear this either right we just

428
00:18:05,670 --> 00:18:10,710
update every time we cast array we just

429
00:18:07,799 --> 00:18:12,659
update on the right I don't know why we

430
00:18:10,710 --> 00:18:13,980
weren't doing that before it doesn't

431
00:18:12,660 --> 00:18:16,140
really make sense to me why we weren't

432
00:18:13,980 --> 00:18:19,289
doing that before you know but we

433
00:18:16,140 --> 00:18:22,320
weren't right so I don't know that's

434
00:18:19,289 --> 00:18:25,950
just yeah that's just where we're at so

435
00:18:22,319 --> 00:18:27,299
if we now want to go in and start with

436
00:18:25,950 --> 00:18:29,069
this week it we can literally just get

437
00:18:27,299 --> 00:18:32,809
rid of this like this is just garbage

438
00:18:29,069 --> 00:18:35,519
now it doesn't need to happen at all and

439
00:18:32,809 --> 00:18:37,589
if we want to go in here and do our test

440
00:18:35,519 --> 00:18:42,210
cast we can just we can do that just

441
00:18:37,589 --> 00:18:44,129
fine and we should be able to to use the

442
00:18:42,210 --> 00:18:45,870
test cast case I don't know if we

443
00:18:44,130 --> 00:18:49,680
actually care about running this test or

444
00:18:45,869 --> 00:18:51,539
not but we should be able to do the test

445
00:18:49,680 --> 00:18:56,370
cast case and actually write something

446
00:18:51,539 --> 00:19:01,950
in right so let's see if we run the test

447
00:18:56,369 --> 00:19:04,769
cast and we go to spam voxel this is now

448
00:19:01,950 --> 00:19:07,080
not necessary right we don't have to

449
00:19:04,769 --> 00:19:08,879
really do a spam voxel anymore we can

450
00:19:07,079 --> 00:19:10,649
just do a single write into a single

451
00:19:08,880 --> 00:19:13,260
voxel location and that should be

452
00:19:10,650 --> 00:19:18,420
sufficient I think because we should

453
00:19:13,259 --> 00:19:19,950
always be making sure that we yeah we we

454
00:19:18,420 --> 00:19:21,060
don't need to interpolate outside of

455
00:19:19,950 --> 00:19:23,610
things anymore so I think we should be

456
00:19:21,059 --> 00:19:26,789
okay so if we take a look at the spam

457
00:19:23,609 --> 00:19:29,309
voxel bit you can see here it was doing

458
00:19:26,789 --> 00:19:30,779
the voxel slice and all this nonsense I

459
00:19:29,309 --> 00:19:33,059
think I'm just gonna go ahead and say

460
00:19:30,779 --> 00:19:35,940
that's you know not that's not useful

461
00:19:33,059 --> 00:19:39,779
anymore we don't want to do any of this

462
00:19:35,940 --> 00:19:43,350
right so let's just let's just nuke that

463
00:19:39,779 --> 00:19:45,480
out or although you know what we might

464
00:19:43,349 --> 00:19:48,990
want to preserve a little of this like

465
00:19:45,480 --> 00:19:52,230
so this part here for example we

466
00:19:48,990 --> 00:19:54,929
were computing which voxel were in that

467
00:19:52,230 --> 00:20:01,710
one we might want to do although where

468
00:19:54,929 --> 00:20:04,320
does that actually happen so there's the

469
00:20:01,710 --> 00:20:07,440
vox i/o it's okay so it's just using the

470
00:20:04,319 --> 00:20:09,029
vox i as a direct look up here right so

471
00:20:07,440 --> 00:20:11,130
we might want to do is just keep this

472
00:20:09,029 --> 00:20:15,000
part so we might want to basically say

473
00:20:11,130 --> 00:20:17,940
like look this part here will actually

474
00:20:15,000 --> 00:20:20,670
will actually keep and this spam voxel

475
00:20:17,940 --> 00:20:25,320
part here we don't actually want right

476
00:20:20,670 --> 00:20:27,269
we just want that so we can basically

477
00:20:25,319 --> 00:20:28,889
say where are we trying to write to and

478
00:20:27,269 --> 00:20:30,119
that'll find the location and then we'll

479
00:20:28,890 --> 00:20:35,450
write it in and blah blah blah blah blah

480
00:20:30,119 --> 00:20:38,849
right so let's take this out here and

481
00:20:35,450 --> 00:20:40,289
one thing that I don't really know to be

482
00:20:38,849 --> 00:20:45,419
completely honest I just I'm just not

483
00:20:40,289 --> 00:20:47,460
sure is in the future I don't know if we

484
00:20:45,420 --> 00:20:50,460
want to cast rays from locations that

485
00:20:47,460 --> 00:20:52,259
aren't where the light probe is I mean

486
00:20:50,460 --> 00:20:55,410
that's kind of one of those things that

487
00:20:52,259 --> 00:21:01,650
I mean we might want to look at the

488
00:20:55,410 --> 00:21:03,420
literature a little bit for that but in

489
00:21:01,650 --> 00:21:05,640
order to accurately say what the

490
00:21:03,420 --> 00:21:08,700
octahedral map is any particular

491
00:21:05,640 --> 00:21:12,090
location you need to cast lights from

492
00:21:08,700 --> 00:21:14,610
that location right but since we know

493
00:21:12,089 --> 00:21:16,769
we're only casting that were only

494
00:21:14,609 --> 00:21:19,229
interpolating from fixed locations in

495
00:21:16,769 --> 00:21:21,808
the world and we're producing points

496
00:21:19,230 --> 00:21:24,660
inside you know basically the cage of

497
00:21:21,808 --> 00:21:27,450
eight of these things what I don't know

498
00:21:24,660 --> 00:21:30,179
is do you want to just take samples

499
00:21:27,450 --> 00:21:31,830
throughout that cage and splat them out

500
00:21:30,179 --> 00:21:34,740
to the surrounding voxels as

501
00:21:31,829 --> 00:21:36,659
contributions right so there'd be an

502
00:21:34,740 --> 00:21:40,259
eight wide splat like like we were doing

503
00:21:36,660 --> 00:21:42,300
before you know and I'm saying I don't

504
00:21:40,259 --> 00:21:43,920
know if you want to do that furthermore

505
00:21:42,299 --> 00:21:45,000
let's suppose we don't want to do that

506
00:21:43,920 --> 00:21:46,019
because that's just way too much right

507
00:21:45,000 --> 00:21:47,460
band but we don't want to do that

508
00:21:46,019 --> 00:21:49,190
because it just it just multiplies out

509
00:21:47,460 --> 00:21:51,750
our rights

510
00:21:49,190 --> 00:21:53,720
so suppose we don't want to do that then

511
00:21:51,750 --> 00:21:57,000
what I think we would be in a situation

512
00:21:53,720 --> 00:22:01,829
the situation I think we'd be in would

513
00:21:57,000 --> 00:22:02,859
be that do we still want to take inside

514
00:22:01,829 --> 00:22:04,539
like further

515
00:22:02,859 --> 00:22:06,969
neighborhood of one of these octahedral

516
00:22:04,539 --> 00:22:09,399
maps do we'd want to take samples from

517
00:22:06,970 --> 00:22:12,069
positions that are displaced from it at

518
00:22:09,400 --> 00:22:14,290
least a little bit so that we can see

519
00:22:12,069 --> 00:22:15,428
what other kinds of lights might be

520
00:22:14,289 --> 00:22:17,678
getting there

521
00:22:15,429 --> 00:22:19,179
as a result right and I just don't know

522
00:22:17,679 --> 00:22:21,850
the answer to these questions at all

523
00:22:19,179 --> 00:22:24,610
right I just have no idea so we may just

524
00:22:21,849 --> 00:22:25,839
have to test that but for right now I'm

525
00:22:24,609 --> 00:22:30,069
just gonna say all right we're just

526
00:22:25,839 --> 00:22:31,689
gonna take this this spam voxel bit here

527
00:22:30,069 --> 00:22:35,048
we're gonna say there's just one spam

528
00:22:31,690 --> 00:22:37,058
voxel call we're gonna have like what

529
00:22:35,048 --> 00:22:38,918
the location is that you wanted to spam

530
00:22:37,058 --> 00:22:42,039
for now and we'll make that be a get

531
00:22:38,919 --> 00:22:43,059
voxel index and I don't know that like I

532
00:22:42,039 --> 00:22:44,409
said I don't know that we're really

533
00:22:43,058 --> 00:22:45,789
gonna want to do it this way going

534
00:22:44,410 --> 00:22:49,990
forwards but we'll leave it this way for

535
00:22:45,789 --> 00:22:51,759
now so we have the light position it's

536
00:22:49,990 --> 00:22:54,339
not really necessary anymore we would

537
00:22:51,759 --> 00:22:59,650
just have what the light color is and

538
00:22:54,339 --> 00:23:02,859
the light depth and that would be it

539
00:22:59,650 --> 00:23:04,990
right so we do the spam voxel we'd we'd

540
00:23:02,859 --> 00:23:07,119
do the large rush maybe we keep is test

541
00:23:04,990 --> 00:23:09,039
case here for just for good measure I

542
00:23:07,119 --> 00:23:10,808
don't know but then we would say look if

543
00:23:09,039 --> 00:23:14,139
this where we're trying to spam if it's

544
00:23:10,808 --> 00:23:16,178
inside we'll go ahead and figure out

545
00:23:14,140 --> 00:23:18,429
where this is going to be where the

546
00:23:16,179 --> 00:23:21,460
voxel center would be I guess we don't

547
00:23:18,429 --> 00:23:23,320
even really need that anymore we would

548
00:23:21,460 --> 00:23:25,870
go ahead and say look let's go ahead and

549
00:23:23,319 --> 00:23:28,418
add to the the light see by doing a

550
00:23:25,869 --> 00:23:33,339
blend and like I said we're just gonna

551
00:23:28,419 --> 00:23:34,590
do the light update very directly so

552
00:23:33,339 --> 00:23:37,119
we're gonna do something like this and

553
00:23:34,589 --> 00:23:41,139
the way we're gonna do it is we're gonna

554
00:23:37,119 --> 00:23:43,329
do it with a lerp so I don't think we

555
00:23:41,140 --> 00:23:45,040
have it yet we don't have one so I'm

556
00:23:43,329 --> 00:23:47,500
gonna go ahead and grab this particular

557
00:23:45,039 --> 00:23:52,079
cell so we're gonna do a light voxel

558
00:23:47,500 --> 00:23:56,679
cell I mean oh that was a sad Muse

559
00:23:52,079 --> 00:23:59,349
what's wrong puss I don't know if you

560
00:23:56,679 --> 00:24:01,840
heard heard the push she was upset about

561
00:23:59,349 --> 00:24:03,639
that oh I guess oh you know what it is

562
00:24:01,839 --> 00:24:07,990
she's just new and I I know what she's

563
00:24:03,640 --> 00:24:11,440
mooing about now all right anyway let's

564
00:24:07,990 --> 00:24:13,779
go ahead and update the light see and

565
00:24:11,440 --> 00:24:15,130
light depart to just be lerp based so

566
00:24:13,779 --> 00:24:17,519
what I want to do here is say we're

567
00:24:15,130 --> 00:24:19,620
gonna take the light see and we're

568
00:24:17,519 --> 00:24:22,259
using our lerp factor whatever we decide

569
00:24:19,619 --> 00:24:25,169
that's going to be and the look that

570
00:24:22,259 --> 00:24:28,349
would go in here so we want sort of the

571
00:24:25,170 --> 00:24:30,120
blend factor to be something that we

572
00:24:28,349 --> 00:24:32,069
remember and I and I feel like we did

573
00:24:30,119 --> 00:24:34,709
that I thought that was in here so we

574
00:24:32,069 --> 00:24:38,609
have that here and rather than a blend

575
00:24:34,710 --> 00:24:40,230
you blend V I don't I mean maybe that's

576
00:24:38,609 --> 00:24:42,029
fine because maybe we want to keep those

577
00:24:40,230 --> 00:24:44,789
two coefficients so we don't have to do

578
00:24:42,029 --> 00:24:47,180
the one - I don't know but basically

579
00:24:44,789 --> 00:24:53,659
what we're be doing there is saying look

580
00:24:47,180 --> 00:24:53,660
we want to do a alert either way

581
00:24:54,250 --> 00:25:00,940
so maybe this is just gonna be I think

582
00:24:58,990 --> 00:25:04,180
this is just gonna be a blend blend T

583
00:25:00,940 --> 00:25:08,080
like T frame blend something like that

584
00:25:04,180 --> 00:25:10,240
or a T update blend right I think that's

585
00:25:08,079 --> 00:25:11,859
what we're gonna call that so I'm going

586
00:25:10,240 --> 00:25:13,480
to take that T update blend and I'm

587
00:25:11,859 --> 00:25:16,779
gonna use it here so we're just gonna

588
00:25:13,480 --> 00:25:20,769
say go ahead and update from the

589
00:25:16,779 --> 00:25:26,049
existing one to whichever one we've got

590
00:25:20,769 --> 00:25:30,779
passed and write that back and we're

591
00:25:26,049 --> 00:25:30,779
gonna be the same thing with the light D

592
00:25:34,650 --> 00:25:45,790
and so that will just do those lips over

593
00:25:38,769 --> 00:25:48,460
time right and that'll update that C

594
00:25:45,789 --> 00:25:51,099
it'll update the D we have both of those

595
00:25:48,460 --> 00:25:53,019
now and we can just move from there

596
00:25:51,099 --> 00:25:54,909
right and we have a nice clean thing

597
00:25:53,019 --> 00:25:57,190
where we just say here's where you're

598
00:25:54,910 --> 00:25:58,810
gonna put the light in for now we're

599
00:25:57,190 --> 00:26:01,509
only gonna spam one we don't spam all

600
00:25:58,809 --> 00:26:03,519
eight and we're gonna use that as the

601
00:26:01,509 --> 00:26:06,819
backbone of that least the test case

602
00:26:03,519 --> 00:26:09,069
right so let's go ahead and get this

603
00:26:06,819 --> 00:26:12,119
working this obviously has to be an

604
00:26:09,069 --> 00:26:20,039
address of not sure what this cleaning

605
00:26:12,119 --> 00:26:27,699
about it should have all of these

606
00:26:20,039 --> 00:26:31,359
shouldn't it what's the problem could be

607
00:26:27,700 --> 00:26:34,090
trying to match oh right sorry about

608
00:26:31,359 --> 00:26:36,609
that so you know we forgot one more

609
00:26:34,089 --> 00:26:38,829
thing we need the direction in the

610
00:26:36,609 --> 00:26:44,349
octahedral map that we were going to

611
00:26:38,829 --> 00:26:47,109
write so we in here we also need a txt Y

612
00:26:44,349 --> 00:26:49,990
so we kind of need to say look what

613
00:26:47,109 --> 00:26:54,750
direction were you going if that makes

614
00:26:49,990 --> 00:26:57,519
sense so I guess that would just say

615
00:26:54,750 --> 00:26:59,829
yeah that would just be a v2s right

616
00:26:57,519 --> 00:27:03,490
which I don't I guess we don't have we

617
00:26:59,829 --> 00:27:05,859
have a v3 s but we don't have a v2 s it

618
00:27:03,490 --> 00:27:07,429
looks like we we have a v2 u I guess

619
00:27:05,859 --> 00:27:10,638
which maybe is fine

620
00:27:07,429 --> 00:27:12,528
yeah so if we want to convert this down

621
00:27:10,638 --> 00:27:15,488
I guess then then what we would say is

622
00:27:12,528 --> 00:27:20,088
yet where where are we inside the the

623
00:27:15,489 --> 00:27:22,009
octahedral map at that point right and I

624
00:27:20,088 --> 00:27:24,460
guess I hold on a second I got a wait a

625
00:27:22,009 --> 00:27:24,460
second for that

626
00:27:29,099 --> 00:27:37,230
all right so yeah what we want to do

627
00:27:33,579 --> 00:27:40,509
here is we're gonna need the the

628
00:27:37,230 --> 00:27:43,690
octahedral map lighting location so I'm

629
00:27:40,509 --> 00:27:47,140
not sure exactly how we want to pass

630
00:27:43,690 --> 00:27:50,049
that down v2u seems like maybe the best

631
00:27:47,140 --> 00:27:52,090
idea but in the future I'm thinking so

632
00:27:50,049 --> 00:27:57,069
it's gonna be a location in the actual

633
00:27:52,089 --> 00:27:58,899
map so yeah I don't know it's it's gonna

634
00:27:57,069 --> 00:28:02,889
be hard to say it would basically be

635
00:27:58,900 --> 00:28:05,410
part of the voxel lookup as well so I

636
00:28:02,890 --> 00:28:07,270
really don't know but let's just say

637
00:28:05,410 --> 00:28:09,940
that this is the T offset for now and

638
00:28:07,269 --> 00:28:15,339
then inside here we'll just say look

639
00:28:09,940 --> 00:28:18,429
it's gonna be T offset Y T offset X

640
00:28:15,339 --> 00:28:20,529
right so we'll do it this way for now

641
00:28:18,429 --> 00:28:25,330
because I'm not sure how else we would

642
00:28:20,529 --> 00:28:28,539
want to do that really but we'll see so

643
00:28:25,329 --> 00:28:30,669
off we go and that has to be put that

644
00:28:28,539 --> 00:28:33,279
array index has to be put on both sides

645
00:28:30,670 --> 00:28:35,830
right we need to put it here and here

646
00:28:33,279 --> 00:28:38,079
and that should take care of it I hope

647
00:28:35,829 --> 00:28:40,539
so then what we're doing the spamming we

648
00:28:38,079 --> 00:28:42,819
need to like fill this out properly so

649
00:28:40,539 --> 00:28:46,240
this is an actual light this is in the

650
00:28:42,819 --> 00:28:47,619
actual light propagation and so for this

651
00:28:46,240 --> 00:28:49,269
I'm just gonna go ahead and turn that

652
00:28:47,619 --> 00:28:51,189
off for a second because we want to just

653
00:28:49,269 --> 00:28:52,599
look at the other one this is the one we

654
00:28:51,190 --> 00:28:53,830
want to look at now and then as soon as

655
00:28:52,599 --> 00:28:59,289
we get this one working we'll look at

656
00:28:53,829 --> 00:29:01,750
the one in the actual ray cast code so

657
00:28:59,289 --> 00:29:04,329
here's us doing just the test cast and

658
00:29:01,750 --> 00:29:07,779
so what we need to do here is produce

659
00:29:04,329 --> 00:29:08,529
the octahedral offset for this ray

660
00:29:07,779 --> 00:29:10,599
direction

661
00:29:08,529 --> 00:29:12,670
so whatever the raid erection is we

662
00:29:10,599 --> 00:29:14,230
obviously knew it because we did a cast

663
00:29:12,670 --> 00:29:17,230
d4 on it right

664
00:29:14,230 --> 00:29:19,390
so we already knew that you know it's

665
00:29:17,230 --> 00:29:20,890
this is the direction we're going so

666
00:29:19,390 --> 00:29:23,850
when we know that we hit the light what

667
00:29:20,890 --> 00:29:28,080
we need to do here is do the octahedral

668
00:29:23,849 --> 00:29:31,808
conversion right so we need to take that

669
00:29:28,079 --> 00:29:34,539
get the octahedral conversion and what I

670
00:29:31,808 --> 00:29:37,119
would say here is we need the octahedral

671
00:29:34,539 --> 00:29:40,000
conversion to actually be you know work

672
00:29:37,119 --> 00:29:41,859
with with our bitmap so we kind of want

673
00:29:40,000 --> 00:29:46,450
an additional we

674
00:29:41,859 --> 00:29:48,729
additional layer of conversion here and

675
00:29:46,450 --> 00:29:51,429
so what I think I want to do is take a

676
00:29:48,730 --> 00:29:55,298
look at the one that's in the lighting

677
00:29:51,429 --> 00:29:57,640
computation sphere test which is this

678
00:29:55,298 --> 00:30:00,220
and we want this to be something we can

679
00:29:57,640 --> 00:30:03,700
just call to get back the actual lookups

680
00:30:00,220 --> 00:30:05,798
into the system now it's a little bit

681
00:30:03,700 --> 00:30:08,558
weird here because we're doing this sort

682
00:30:05,798 --> 00:30:10,389
of looping over the place to write in a

683
00:30:08,558 --> 00:30:13,178
weird way and I don't know that I'd

684
00:30:10,390 --> 00:30:15,070
really love that but for the moment

685
00:30:13,179 --> 00:30:17,440
let's just say look it's gonna have to

686
00:30:15,069 --> 00:30:20,740
it's should I have to take care of this

687
00:30:17,440 --> 00:30:24,160
transform anyway so you know blah blah

688
00:30:20,740 --> 00:30:26,798
blah all right so I'm gonna go ahead and

689
00:30:24,160 --> 00:30:29,320
say we need like a utility function here

690
00:30:26,798 --> 00:30:31,779
that's gonna get this for us and that's

691
00:30:29,319 --> 00:30:35,319
gonna return the V to you that's the

692
00:30:31,779 --> 00:30:37,779
offset right so like get octahedral

693
00:30:35,319 --> 00:30:40,990
offset or something like that and we

694
00:30:37,779 --> 00:30:44,558
pass in the Ray direction to figure out

695
00:30:40,990 --> 00:30:47,380
what that is right so that's what I want

696
00:30:44,558 --> 00:30:50,048
to do here and this is gonna require us

697
00:30:47,380 --> 00:30:51,790
doing the inverse lookup right so we're

698
00:30:50,048 --> 00:30:55,389
gonna want to call this function get

699
00:30:51,789 --> 00:31:03,428
octahedral and we're gonna want to throw

700
00:30:55,390 --> 00:31:05,679
that in here we want still the rest of

701
00:31:03,429 --> 00:31:07,750
this stuff we want the well actually do

702
00:31:05,679 --> 00:31:09,820
we don't need the light position

703
00:31:07,750 --> 00:31:11,470
actually do we cuz that's not really

704
00:31:09,819 --> 00:31:14,769
necessary so we just need the cast place

705
00:31:11,470 --> 00:31:18,250
we need the light see the light D we

706
00:31:14,769 --> 00:31:21,819
actually know as well actually

707
00:31:18,250 --> 00:31:23,190
so it's this value right that's the so

708
00:31:21,819 --> 00:31:32,168
we might as well throw it in there I

709
00:31:23,190 --> 00:31:34,000
guess and off we go so I think that's

710
00:31:32,169 --> 00:31:36,700
all we really need for the spam voxel

711
00:31:34,000 --> 00:31:38,980
case right so now we need to do is

712
00:31:36,700 --> 00:31:41,798
implement this actual function we need

713
00:31:38,980 --> 00:31:44,620
it to work and in order to get this to

714
00:31:41,798 --> 00:31:46,450
work what we need to do is take the oh

715
00:31:44,619 --> 00:31:49,149
and you know what I should do one more

716
00:31:46,450 --> 00:31:51,580
thing here where we were previously

717
00:31:49,150 --> 00:31:54,959
doing the herb blend you herb blend V

718
00:31:51,579 --> 00:31:57,458
right we need to set those

719
00:31:54,959 --> 00:31:59,649
we need to change this to setting just

720
00:31:57,459 --> 00:32:02,619
to the irradiance preservation value

721
00:31:59,648 --> 00:32:04,238
right so this is the blend value we

722
00:32:02,618 --> 00:32:08,138
actually want so this is just going to

723
00:32:04,239 --> 00:32:10,179
be the the T update blend here and we

724
00:32:08,138 --> 00:32:13,358
don't need this right that's just the

725
00:32:10,179 --> 00:32:15,759
inverse one and we don't need any of

726
00:32:13,358 --> 00:32:18,939
these either right so we would just do

727
00:32:15,759 --> 00:32:22,929
like okay if we're accumulating we set

728
00:32:18,940 --> 00:32:28,538
the herb blend view value to like you

729
00:32:22,929 --> 00:32:39,219
know one I guess and when we're done

730
00:32:28,538 --> 00:32:42,158
with this we actually I guess we just

731
00:32:39,219 --> 00:32:45,068
set it this way if we're doing

732
00:32:42,159 --> 00:32:48,519
accumulation we would just say look

733
00:32:45,068 --> 00:32:54,098
however many there are the update blend

734
00:32:48,519 --> 00:32:56,138
is just one over that I'm guessing yeah

735
00:32:54,098 --> 00:33:03,788
okay that's what we were already doing

736
00:32:56,138 --> 00:33:05,378
nevermind so it's just this right so if

737
00:33:03,788 --> 00:33:06,940
we wanted to do an accumulation we would

738
00:33:05,378 --> 00:33:08,588
just set the update blend to be one over

739
00:33:06,940 --> 00:33:13,028
the accumulation count and then stop

740
00:33:08,588 --> 00:33:17,739
when we're done right all right so if

741
00:33:13,028 --> 00:33:19,328
we're in here doing the doing the the

742
00:33:17,739 --> 00:33:20,739
rest of the stuff we just we just need

743
00:33:19,328 --> 00:33:22,448
the oxygen offset now I think that's the

744
00:33:20,739 --> 00:33:24,519
only thing we're really messed up on

745
00:33:22,449 --> 00:33:25,899
right so we just need to implement this

746
00:33:24,519 --> 00:33:28,479
function and let's go ahead and do that

747
00:33:25,898 --> 00:33:32,228
so the first thing we want to do

748
00:33:28,479 --> 00:33:35,348
obviously is to get the octahedral from

749
00:33:32,229 --> 00:33:37,719
unit vector so that gives us a v2 right

750
00:33:35,348 --> 00:33:41,168
and the v2 goes from negative one to one

751
00:33:37,719 --> 00:33:44,649
and we just need to map that out into

752
00:33:41,169 --> 00:33:47,799
our actual space so in order to map that

753
00:33:44,648 --> 00:33:49,928
out into the actual offsets we know that

754
00:33:47,798 --> 00:33:51,699
we're only gonna start at like one one

755
00:33:49,929 --> 00:33:53,288
and in fact you know what we kind of

756
00:33:51,699 --> 00:33:55,649
know what this is supposed to be in the

757
00:33:53,288 --> 00:33:57,969
shader as well right

758
00:33:55,648 --> 00:34:00,458
because we actually did this in the Z

759
00:33:57,969 --> 00:34:02,288
bias program and we want these two to

760
00:34:00,459 --> 00:34:03,609
kind of line up probably I mean probably

761
00:34:02,288 --> 00:34:05,138
not exactly because they're probably

762
00:34:03,608 --> 00:34:08,319
gonna be optimized versions of each

763
00:34:05,138 --> 00:34:10,509
other but more or less you know

764
00:34:08,320 --> 00:34:12,130
similar thing so if you take a look at

765
00:34:10,510 --> 00:34:15,910
what we're doing here we're saying like

766
00:34:12,130 --> 00:34:19,420
hey it's the you know 1/2 times the

767
00:34:15,909 --> 00:34:22,179
interior UV dim C times the octahedral

768
00:34:19,420 --> 00:34:23,530
so what we'd want to do here is make

769
00:34:22,179 --> 00:34:35,829
sure that we're sort of looking these up

770
00:34:23,530 --> 00:34:37,750
in a similar way right all right and

771
00:34:35,829 --> 00:34:39,610
again we have to account for the fact

772
00:34:37,750 --> 00:34:42,010
that the texture sampler is gonna have

773
00:34:39,610 --> 00:34:43,690
the 5.5 offsets it's gonna be a little

774
00:34:42,010 --> 00:34:47,550
trickier back to exactly how we want to

775
00:34:43,690 --> 00:34:50,679
do this but you know we'll take it slow

776
00:34:47,550 --> 00:34:52,120
all right so we know that this is going

777
00:34:50,679 --> 00:34:53,589
to come back negative 1 to 1 so the

778
00:34:52,119 --> 00:34:59,529
first thing we're gonna want to do is

779
00:34:53,590 --> 00:35:01,870
we're going to want to so so in like UV

780
00:34:59,530 --> 00:35:04,170
space right we're going to want to take

781
00:35:01,869 --> 00:35:06,849
the UV and we're going to want to

782
00:35:04,170 --> 00:35:08,889
multiply it by 1/2 to reduce the range

783
00:35:06,849 --> 00:35:11,500
because it's spanning 2 now and we

784
00:35:08,889 --> 00:35:15,699
needed to only spend 1 and then we're

785
00:35:11,500 --> 00:35:16,989
gonna have to add to it right so you

786
00:35:15,699 --> 00:35:25,719
know we could do it this way the other

787
00:35:16,989 --> 00:35:29,589
way we can do it is like this six of one

788
00:35:25,719 --> 00:35:31,750
half oops six of one half dozen of the

789
00:35:29,590 --> 00:35:33,280
other right so we can add one to it

790
00:35:31,750 --> 00:35:35,170
first that makes 0 to 2 and then have

791
00:35:33,280 --> 00:35:37,780
the range that gives us 0 to 1 we could

792
00:35:35,170 --> 00:35:39,670
alternatively take 0.5 and add it to 0.5

793
00:35:37,780 --> 00:35:40,810
times the value you know we'll do it

794
00:35:39,670 --> 00:35:45,250
this way for now but it doesn't really

795
00:35:40,809 --> 00:35:47,529
matter so that gives us a 0 to 1 range

796
00:35:45,250 --> 00:35:49,929
and now we need to map it into the

797
00:35:47,530 --> 00:35:53,950
actual range of the light lookup dim

798
00:35:49,929 --> 00:35:57,250
right so we now need this thing to line

799
00:35:53,949 --> 00:35:59,230
up properly for doing an actual indexing

800
00:35:57,250 --> 00:36:01,300
operation and in order to do that we're

801
00:35:59,230 --> 00:36:03,460
going to have to make sure that we know

802
00:36:01,300 --> 00:36:07,840
first of all what the dimension even is

803
00:36:03,460 --> 00:36:09,490
right so we will make an f32 here that's

804
00:36:07,840 --> 00:36:11,470
our dimension and we know that the

805
00:36:09,489 --> 00:36:15,009
dimension is actually minus the pad

806
00:36:11,469 --> 00:36:17,819
right we have a 1 pixel border around it

807
00:36:15,010 --> 00:36:21,300
so we have this problem of needing to

808
00:36:17,820 --> 00:36:22,890
subtract away this padding value

809
00:36:21,300 --> 00:36:24,810
in order to make sure that we have the

810
00:36:22,889 --> 00:36:27,089
right thing and then we also need to add

811
00:36:24,809 --> 00:36:29,159
that offset that padding offset so we're

812
00:36:27,090 --> 00:36:34,680
gonna have to kind of yet work that

813
00:36:29,159 --> 00:36:38,129
through so when we go and start with the

814
00:36:34,679 --> 00:36:40,019
actual UV with the actual index with the

815
00:36:38,130 --> 00:36:43,590
actual I guess what it's call this eye

816
00:36:40,019 --> 00:36:46,800
right we're gonna start by blowing the

817
00:36:43,590 --> 00:36:50,190
UV out to the dimension right so we now

818
00:36:46,800 --> 00:36:52,350
it spans the entire set of pixels but of

819
00:36:50,190 --> 00:36:56,250
course that means that in the case where

820
00:36:52,349 --> 00:36:59,460
the UV was actually one it's gonna be

821
00:36:56,250 --> 00:37:01,409
equal to the dimension itself right so

822
00:36:59,460 --> 00:37:04,380
in other words if we subtract two from

823
00:37:01,409 --> 00:37:06,659
the light lookup square dim and the

824
00:37:04,380 --> 00:37:09,869
light lookup squared dim is 10 that

825
00:37:06,659 --> 00:37:13,079
means that's 8 UV can equal 1 so we're

826
00:37:09,869 --> 00:37:16,500
gonna have 1 times 8 or actually 8 and

827
00:37:13,079 --> 00:37:20,789
that would be 1/4 that would be off the

828
00:37:16,500 --> 00:37:22,590
end right of our of our texture so in

829
00:37:20,789 --> 00:37:24,690
order to figure out where to write we're

830
00:37:22,590 --> 00:37:27,059
actually gonna need to be one more back

831
00:37:24,690 --> 00:37:30,510
right we're going to need to be one more

832
00:37:27,059 --> 00:37:32,730
back and then slid up 1/2 in order to

833
00:37:30,510 --> 00:37:34,380
line us up with the actual pixel centers

834
00:37:32,730 --> 00:37:36,750
I believe that would be where we would

835
00:37:34,380 --> 00:37:42,660
want to be right so we'd want something

836
00:37:36,750 --> 00:37:45,510
like this presumably which now gives us

837
00:37:42,659 --> 00:37:48,629
an actual index but of course remember

838
00:37:45,510 --> 00:37:51,420
the index itself also needs to be one

839
00:37:48,630 --> 00:37:53,869
forward for the pad so we actually want

840
00:37:51,420 --> 00:37:56,849
the half pixel plus the one for the pad

841
00:37:53,869 --> 00:37:59,429
once we have that I think we're down to

842
00:37:56,849 --> 00:38:02,130
more or less where we need to be right

843
00:37:59,429 --> 00:38:05,609
we now know that the result is just

844
00:38:02,130 --> 00:38:09,269
gonna be the rounded version of our eye

845
00:38:05,610 --> 00:38:12,450
right so we're just gonna want to do or

846
00:38:09,269 --> 00:38:13,889
you know what since we slid it up it's

847
00:38:12,449 --> 00:38:17,609
just a truncation so we could either

848
00:38:13,889 --> 00:38:20,069
round yeah if we slide it up then we

849
00:38:17,610 --> 00:38:22,289
actually can just floor it right because

850
00:38:20,070 --> 00:38:25,190
now we know that it already was so we

851
00:38:22,289 --> 00:38:25,190
can just do a floor

852
00:38:28,289 --> 00:38:34,359
we have four floor yeah so we'll do

853
00:38:31,960 --> 00:38:35,740
floor here and I believe that would give

854
00:38:34,358 --> 00:38:36,788
us what we want but we're gonna want to

855
00:38:35,739 --> 00:38:38,608
check this a little more carefully

856
00:38:36,789 --> 00:38:40,770
because I'm kind of just you know

857
00:38:38,608 --> 00:38:43,769
pulling this out

858
00:38:40,769 --> 00:38:43,769
oops

859
00:38:44,318 --> 00:38:47,739
but that should give us in theory what

860
00:38:46,989 --> 00:39:03,578
we're looking for

861
00:38:47,739 --> 00:39:05,439
oh right and so that's the offset value

862
00:39:03,579 --> 00:39:09,490
that we want and you know maybe we've

863
00:39:05,440 --> 00:39:16,088
got some bugs in there oops I don't know

864
00:39:09,489 --> 00:39:17,679
what's going on there oh I know what's

865
00:39:16,088 --> 00:39:21,608
happening there we change the size of

866
00:39:17,679 --> 00:39:23,889
the lighting structure so I think that's

867
00:39:21,608 --> 00:39:25,119
what we want for getting the octahedral

868
00:39:23,889 --> 00:39:28,088
offset that we're going to write to

869
00:39:25,119 --> 00:39:31,329
again that's my argument that that's

870
00:39:28,088 --> 00:39:34,058
roughly what we want so here we would

871
00:39:31,329 --> 00:39:37,568
write that lighting in right here right

872
00:39:34,059 --> 00:39:40,569
and in theory I guess if we didn't mess

873
00:39:37,568 --> 00:39:42,639
any of that up but we probably did this

874
00:39:40,568 --> 00:39:45,250
would actually work which is unlikely

875
00:39:42,639 --> 00:39:46,778
right so let's see what we've actually

876
00:39:45,250 --> 00:39:48,159
got well so actually something is

877
00:39:46,778 --> 00:39:50,858
getting written here which is kind of

878
00:39:48,159 --> 00:39:53,679
surprising actually so it doesn't look

879
00:39:50,858 --> 00:39:58,028
particularly correct that's kind of

880
00:39:53,679 --> 00:39:59,618
weird yeah so I have no idea exactly

881
00:39:58,028 --> 00:40:00,969
what we're seeing there but it's

882
00:39:59,619 --> 00:40:07,420
actually writing something into the

883
00:40:00,969 --> 00:40:09,459
voxel which is kind of surprising all

884
00:40:07,420 --> 00:40:14,710
right so anyway that's what we needed to

885
00:40:09,460 --> 00:40:17,440
bug because basically this case for all

886
00:40:14,710 --> 00:40:20,230
intents and purposes purposes is exactly

887
00:40:17,440 --> 00:40:21,970
the same as the Ray casting case for the

888
00:40:20,230 --> 00:40:26,289
full lighting it's just instead of

889
00:40:21,969 --> 00:40:28,480
actually doing the voxel the octahedral

890
00:40:26,289 --> 00:40:31,809
map sampling in there to do secondary

891
00:40:28,480 --> 00:40:36,608
lighting this just does one straight ray

892
00:40:31,809 --> 00:40:38,680
cast so if we get this working we really

893
00:40:36,608 --> 00:40:40,449
only have one more small step to get the

894
00:40:38,679 --> 00:40:41,269
final thing working and so that'll be

895
00:40:40,449 --> 00:40:42,889
good

896
00:40:41,269 --> 00:40:44,750
well small it's actually pretty big step

897
00:40:42,889 --> 00:40:46,519
so we have one more major step they gave

898
00:40:44,750 --> 00:40:52,369
me make it but that's okay one step we

899
00:40:46,519 --> 00:40:56,750
can handle alright so what we want to do

900
00:40:52,369 --> 00:40:59,450
now is try to actually make this thing

901
00:40:56,750 --> 00:41:03,050
work reasonably debug whatever is going

902
00:40:59,449 --> 00:41:08,809
on in here and make sure you know we're

903
00:41:03,050 --> 00:41:10,070
getting some yeah make sure we're

904
00:41:08,809 --> 00:41:18,460
getting some kind of reasonable lighting

905
00:41:10,070 --> 00:41:18,460
it looks like in here we're just doing

906
00:41:20,260 --> 00:41:28,520
the solution debug light P right so we

907
00:41:25,550 --> 00:41:30,830
should just be casting from I think this

908
00:41:28,519 --> 00:41:38,360
should just be casting from the the

909
00:41:30,829 --> 00:41:39,619
light on the dudes head right I'm pretty

910
00:41:38,360 --> 00:41:42,320
sure it's just casting the light in the

911
00:41:39,619 --> 00:41:45,740
dudes head so what we want to do here is

912
00:41:42,320 --> 00:41:47,480
just we want to go ahead and work on

913
00:41:45,739 --> 00:41:50,149
this test case I think we're all good I

914
00:41:47,480 --> 00:41:51,650
think it's still casting from that

915
00:41:50,150 --> 00:41:53,690
because it looks like this would cast

916
00:41:51,650 --> 00:41:56,119
from the closest light if we turn that

917
00:41:53,690 --> 00:41:58,250
on but because we're not because that's

918
00:41:56,119 --> 00:42:04,960
commented out we're just gonna get

919
00:41:58,250 --> 00:42:04,960
lightly 4p so when we do our spam voxel

920
00:42:05,019 --> 00:42:10,159
this is pretty much what we're passing

921
00:42:07,489 --> 00:42:12,199
this is the hit distance we don't care

922
00:42:10,159 --> 00:42:15,108
about that this is the light color we

923
00:42:12,199 --> 00:42:20,409
want to some in there and here's the get

924
00:42:15,108 --> 00:42:20,409
octahedral offset I'm not sure

925
00:42:27,300 --> 00:42:33,519
so I suppose there's two things that

926
00:42:29,889 --> 00:42:36,940
could be wrong and I'm not sure about

927
00:42:33,519 --> 00:42:38,800
which one to start with so the copy

928
00:42:36,940 --> 00:42:39,099
could actually be wrong which I guess we

929
00:42:38,800 --> 00:42:40,780
should

930
00:42:39,099 --> 00:42:44,650
visually inspect just to make sure we

931
00:42:40,780 --> 00:42:48,280
didn't screw that up already but looking

932
00:42:44,650 --> 00:42:50,340
here you can see us grabbing the cells

933
00:42:48,280 --> 00:42:55,599
out

934
00:42:50,340 --> 00:42:57,280
ZYX here and we're just gonna copy those

935
00:42:55,599 --> 00:42:59,740
directly into the location in the voxel

936
00:42:57,280 --> 00:43:02,980
that we thought they should go right and

937
00:42:59,739 --> 00:43:05,589
I think that should just work I don't

938
00:43:02,980 --> 00:43:11,710
think there's anything weird going on

939
00:43:05,590 --> 00:43:16,690
there so that seems reasonable anyway

940
00:43:11,710 --> 00:43:19,570
I mean don't quote me on that but that

941
00:43:16,690 --> 00:43:22,420
seems fine and so then when we actually

942
00:43:19,570 --> 00:43:24,700
do the spam voxel I'm not sure about

943
00:43:22,420 --> 00:43:28,180
this but yeah again it's it's just doing

944
00:43:24,699 --> 00:43:31,689
ZYX it's getting the voxel index from

945
00:43:28,179 --> 00:43:35,409
the location that is trying to spam and

946
00:43:31,690 --> 00:43:39,539
that all seems again pretty innocuous to

947
00:43:35,409 --> 00:43:39,539
me hmm

948
00:43:39,659 --> 00:43:44,049
so I'm kind of surprised actually I'm

949
00:43:42,159 --> 00:43:46,539
not sure what's going on there what I

950
00:43:44,050 --> 00:43:48,430
might do real quick just to get a better

951
00:43:46,539 --> 00:43:50,409
sense of it since I'm not sure what's

952
00:43:48,429 --> 00:43:58,779
going on is I want to see what happens

953
00:43:50,409 --> 00:44:03,399
when I actually what's the probe test

954
00:43:58,780 --> 00:44:06,760
function here work on test cast from

955
00:44:03,400 --> 00:44:09,730
probes what I might do real quick is

956
00:44:06,760 --> 00:44:12,520
just assume we always hit so let's just

957
00:44:09,730 --> 00:44:17,349
assume we always hit a light I guess or

958
00:44:12,519 --> 00:44:20,469
I should so just spam the voxel no

959
00:44:17,349 --> 00:44:22,000
matter what if that makes sense just so

960
00:44:20,469 --> 00:44:25,230
I can see what that does cuz I'm not

961
00:44:22,000 --> 00:44:25,230
sure what that would look like

962
00:44:31,010 --> 00:44:39,170
so it's really strange like it's like

963
00:44:33,869 --> 00:44:39,170
the writing out to the voxel is somehow

964
00:44:44,599 --> 00:44:48,090
yeah we've got we've got some kind of

965
00:44:46,739 --> 00:44:50,429
weird bug they're like why would it

966
00:44:48,090 --> 00:44:54,240
matter that I was right on top of that

967
00:44:50,429 --> 00:44:56,129
thing it's like I'm only writing to the

968
00:44:54,239 --> 00:44:57,779
one I'm standing on in some cases and

969
00:44:56,130 --> 00:45:01,280
then not always right so I can hop out

970
00:44:57,780 --> 00:45:04,320
here and it doesn't happen and it looks

971
00:45:01,280 --> 00:45:06,300
really weird so we've got some kind of a

972
00:45:04,320 --> 00:45:09,119
bug here that doesn't have to do with

973
00:45:06,300 --> 00:45:10,349
like it probably isn't really I feel

974
00:45:09,119 --> 00:45:11,460
like it's not really related to the

975
00:45:10,349 --> 00:45:15,119
parts that I thought I was going to

976
00:45:11,460 --> 00:45:18,599
debug and it's really just more about

977
00:45:15,119 --> 00:45:31,500
this part here so that's kind of weird

978
00:45:18,599 --> 00:45:33,539
if I go look I mean this does work in

979
00:45:31,500 --> 00:45:36,989
world space which is what I would expect

980
00:45:33,539 --> 00:45:39,900
right so the fact that we're passing

981
00:45:36,989 --> 00:45:41,579
down the Caspi that seems right it

982
00:45:39,900 --> 00:45:45,358
shouldn't it should not be localized

983
00:45:41,579 --> 00:45:50,369
right it's just the it's just the

984
00:45:45,358 --> 00:45:58,469
position and that seems right and we're

985
00:45:50,369 --> 00:46:01,500
just writing in so you know I suppose

986
00:45:58,469 --> 00:46:03,899
that could be the octahedral offset now

987
00:46:01,500 --> 00:46:07,920
that I think about it though because if

988
00:46:03,900 --> 00:46:10,139
it was based it based on the angle to

989
00:46:07,920 --> 00:46:13,829
the light this would actually make a

990
00:46:10,139 --> 00:46:17,879
difference right so if this were

991
00:46:13,829 --> 00:46:24,539
actually borked I suppose that would

992
00:46:17,880 --> 00:46:27,269
present a problem in theory so maybe we

993
00:46:24,539 --> 00:46:31,639
have to maybe we do have to like take a

994
00:46:27,269 --> 00:46:31,639
second to verify that this is okay right

995
00:46:31,940 --> 00:46:40,519
know why this is done backwards here

996
00:46:35,869 --> 00:46:43,339
wouldn't matter but just making sure so

997
00:46:40,519 --> 00:46:48,289
just looking at this doing octahedral

998
00:46:43,340 --> 00:46:52,370
from unit vector I guess one thing

999
00:46:48,289 --> 00:46:53,750
that's a little bit of an issue is we

1000
00:46:52,369 --> 00:46:56,269
don't know what this even does we've

1001
00:46:53,750 --> 00:46:58,760
never tested this I don't think we

1002
00:46:56,269 --> 00:47:01,780
should take a quick check to make sure

1003
00:46:58,760 --> 00:47:01,780
it looks right

1004
00:47:12,820 --> 00:47:27,110
so yeah just making sure this is looking

1005
00:47:23,929 --> 00:47:29,960
up the same way we get the one norm by

1006
00:47:27,110 --> 00:47:31,340
summing up the absolute values of the

1007
00:47:29,960 --> 00:47:34,820
components which is the definition of

1008
00:47:31,340 --> 00:47:38,090
the one norm so that looks good right we

1009
00:47:34,820 --> 00:47:43,600
take the result as one over the one norm

1010
00:47:38,090 --> 00:47:46,850
times the input XY that seems reasonable

1011
00:47:43,599 --> 00:47:51,860
we look at the Z component of the input

1012
00:47:46,849 --> 00:47:54,319
and then we compute Oh X and Oh Y which

1013
00:47:51,860 --> 00:48:00,200
are the sine of the thing we just

1014
00:47:54,320 --> 00:48:02,780
computed which seems right and one minus

1015
00:48:00,199 --> 00:48:05,210
the absolute value of the inverted pair

1016
00:48:02,780 --> 00:48:08,900
so the Y goes into the X the X goes into

1017
00:48:05,210 --> 00:48:11,659
the Y and that seems right as well we

1018
00:48:08,900 --> 00:48:15,559
then assign those two to the result so

1019
00:48:11,659 --> 00:48:19,279
we now have that we overwrite the new

1020
00:48:15,559 --> 00:48:24,159
with the new version and we return that

1021
00:48:19,280 --> 00:48:24,160
so that seems good

1022
00:48:26,199 --> 00:48:34,719
so that part doesn't seem super

1023
00:48:28,909 --> 00:48:34,719
suspicious to me and if we go to

1024
00:48:35,210 --> 00:48:51,240
this part of the code here once we take

1025
00:48:49,139 --> 00:48:56,039
that UV which would be negative one to

1026
00:48:51,239 --> 00:48:58,229
one we immediately say let's offset it

1027
00:48:56,039 --> 00:49:00,389
by one so now it's should be zero to two

1028
00:48:58,230 --> 00:49:04,260
on both axes we have it sewn out zero to

1029
00:49:00,389 --> 00:49:10,859
one on both axes we take the dim of the

1030
00:49:04,260 --> 00:49:13,890
lookup we take the I value as the UV

1031
00:49:10,860 --> 00:49:16,980
blown out to that dimension offset by

1032
00:49:13,889 --> 00:49:25,440
the one pixel plus the pixel centers and

1033
00:49:16,980 --> 00:49:34,920
then we floor it again that looks pretty

1034
00:49:25,440 --> 00:49:38,309
solid right so I guess let's take a look

1035
00:49:34,920 --> 00:49:46,349
at that routine maybe we will do a debug

1036
00:49:38,309 --> 00:49:48,449
builds and just see like if I break it

1037
00:49:46,349 --> 00:49:49,079
up to get octahedral offset like what's

1038
00:49:48,449 --> 00:49:54,869
going on there

1039
00:49:49,079 --> 00:49:57,989
I could also spam some assertions

1040
00:49:54,869 --> 00:49:59,099
because even though it's kind of hard to

1041
00:49:57,989 --> 00:50:01,259
think about what you would necessarily

1042
00:49:59,099 --> 00:50:04,110
assert there are some things I can

1043
00:50:01,260 --> 00:50:07,830
assert so for example I could assert

1044
00:50:04,110 --> 00:50:13,220
things like you should be less than the

1045
00:50:07,829 --> 00:50:15,239
fifth pixel if the X was negative right

1046
00:50:13,219 --> 00:50:16,529
juju no I'm saying like in other words

1047
00:50:15,239 --> 00:50:18,449
we could we could assert that we're in

1048
00:50:16,530 --> 00:50:20,580
the right quadrant you know like stuff

1049
00:50:18,449 --> 00:50:21,719
like that so although we it's hard to

1050
00:50:20,579 --> 00:50:25,049
think about what we would necessarily

1051
00:50:21,719 --> 00:50:28,349
assert here directly we certainly could

1052
00:50:25,050 --> 00:50:30,420
have cert a few things that would make

1053
00:50:28,349 --> 00:50:34,170
sense so maybe we'll spam some of those

1054
00:50:30,420 --> 00:50:36,990
in there as well oops so here's our two

1055
00:50:34,170 --> 00:50:40,860
results and let's take a look at the

1056
00:50:36,989 --> 00:50:43,439
direction blown out as well so if you

1057
00:50:40,860 --> 00:50:47,329
look here right like you've got negative

1058
00:50:43,440 --> 00:50:49,880
x negative Y negative Z

1059
00:50:47,329 --> 00:50:52,609
and that does seem like that's a

1060
00:50:49,880 --> 00:50:54,019
plausible place for that to be I mean I

1061
00:50:52,608 --> 00:51:12,858
couldn't say for sure but it's not

1062
00:50:54,018 --> 00:51:16,698
completely absurd right things you could

1063
00:51:12,858 --> 00:51:17,958
never do with Visual Studio right I'm

1064
00:51:16,699 --> 00:51:19,880
just holding down the f5 key and

1065
00:51:17,958 --> 00:51:23,118
watching the values like Visual Studio

1066
00:51:19,880 --> 00:51:25,818
can't do that even a little bit right I

1067
00:51:23,119 --> 00:51:28,519
don't know if you remember what it was

1068
00:51:25,818 --> 00:51:33,708
like it's pretty pretty terrible it's so

1069
00:51:28,518 --> 00:51:35,238
stupidly slow alright so as the Y's

1070
00:51:33,708 --> 00:51:37,248
getting positive you can see us getting

1071
00:51:35,239 --> 00:51:40,369
onto the fifth pixel now which is right

1072
00:51:37,248 --> 00:51:43,068
because like pixels zero is the pad one

1073
00:51:40,369 --> 00:51:46,399
two three and four are the Y negative

1074
00:51:43,068 --> 00:51:52,548
the y+ are five six seven eight

1075
00:51:46,398 --> 00:51:55,418
right and then nine is the pad on the

1076
00:51:52,548 --> 00:51:55,418
outside oops

1077
00:51:56,498 --> 00:52:02,688
so again these seem sane enough like I

1078
00:52:00,528 --> 00:52:04,278
guess what I would say is it's a little

1079
00:52:02,688 --> 00:52:08,688
bit weird that I'm never seeing positive

1080
00:52:04,278 --> 00:52:12,259
x values because there should be things

1081
00:52:08,688 --> 00:52:13,489
to the right like do you notice oh there

1082
00:52:12,259 --> 00:52:14,599
we go okay I'm like there should be

1083
00:52:13,489 --> 00:52:18,789
things to the right and I wasn't seeing

1084
00:52:14,599 --> 00:52:18,789
any but there was some

1085
00:52:23,090 --> 00:52:30,800
I will say that by and large there

1086
00:52:25,670 --> 00:52:36,289
aren't very many so why am I not seeing

1087
00:52:30,800 --> 00:52:38,360
any positive direction X values I mean I

1088
00:52:36,289 --> 00:52:40,730
saw few but they were really rare there

1089
00:52:38,360 --> 00:52:42,800
should be more or less even like I

1090
00:52:40,730 --> 00:52:47,719
should see a similar number of positive

1091
00:52:42,800 --> 00:52:52,030
X directions unless I'm missing

1092
00:52:47,719 --> 00:52:55,609
something so I'm kind of wondering is

1093
00:52:52,030 --> 00:53:00,290
the cast Direction not what I think it

1094
00:52:55,610 --> 00:53:06,890
is I mean it sure looks like what you

1095
00:53:00,289 --> 00:53:14,900
would expect like is this light in some

1096
00:53:06,889 --> 00:53:18,429
totally random place or something like

1097
00:53:14,900 --> 00:53:18,430
is the light value weird

1098
00:53:26,250 --> 00:53:40,199
let's take a look so that's the light

1099
00:53:30,400 --> 00:53:40,200
position and here's that cast direction

1100
00:53:53,519 --> 00:53:57,690
so that's a little bit more balanced to

1101
00:53:55,380 --> 00:53:59,910
next I guess so I alright alright I mean

1102
00:53:57,690 --> 00:54:02,220
maybe that's fine I don't know I'm a

1103
00:53:59,909 --> 00:54:07,549
little weirded out by that but you know

1104
00:54:02,219 --> 00:54:07,549
a little weirded out is not horrible

1105
00:54:24,909 --> 00:54:30,109
so let's think how are we gonna do bug

1106
00:54:28,099 --> 00:54:33,199
this because we don't really have any

1107
00:54:30,110 --> 00:54:35,210
idea what's going wrong so I think the

1108
00:54:33,199 --> 00:54:39,799
first thing I need to do is make sure

1109
00:54:35,210 --> 00:54:42,050
that the copy can't be busted and so in

1110
00:54:39,800 --> 00:54:46,039
order to do that I suppose what I'd have

1111
00:54:42,050 --> 00:54:51,170
to do is inside here where we're like

1112
00:54:46,039 --> 00:54:55,309
spamming the voxel I would have to put

1113
00:54:51,170 --> 00:54:59,690
something in here that would tell me

1114
00:54:55,309 --> 00:55:02,690
like that would just write to the voxel

1115
00:54:59,690 --> 00:55:05,170
with some kind of known pattern you know

1116
00:55:02,690 --> 00:55:09,320
what I mean just to make sure that the

1117
00:55:05,170 --> 00:55:14,590
the C values and the D values here makes

1118
00:55:09,320 --> 00:55:20,360
sense so what I might say is like

1119
00:55:14,590 --> 00:55:22,789
suppose instead of doing this I was to

1120
00:55:20,360 --> 00:55:25,430
just say whatever the spammy location is

1121
00:55:22,789 --> 00:55:30,980
will translate into the color somehow

1122
00:55:25,429 --> 00:55:33,259
right so if we take this voxel I and I

1123
00:55:30,980 --> 00:55:35,539
said what's the maximum dimension of the

1124
00:55:33,260 --> 00:55:37,790
voxel and then I just set the color to

1125
00:55:35,539 --> 00:55:40,099
that that would be one way to do it

1126
00:55:37,789 --> 00:55:44,380
right I can basically say look take the

1127
00:55:40,099 --> 00:55:47,360
voxel I turn that into a regular v3

1128
00:55:44,380 --> 00:55:50,269
multiply that by a scalar that will

1129
00:55:47,360 --> 00:55:53,059
truncate me down so light lookup voxel

1130
00:55:50,269 --> 00:55:57,679
dim right so this will make it so that I

1131
00:55:53,059 --> 00:56:04,840
I stay inside the total values for

1132
00:55:57,679 --> 00:56:04,839
everything and multiply that down right

1133
00:56:06,489 --> 00:56:12,259
so that would just assign a color to the

1134
00:56:09,860 --> 00:56:14,539
voxel that should just be a gradient

1135
00:56:12,260 --> 00:56:16,580
ramp oh I don't need to be in debug mode

1136
00:56:14,539 --> 00:56:18,940
anymore that's just gonna be slow for no

1137
00:56:16,579 --> 00:56:18,940
reason

1138
00:56:19,119 --> 00:56:24,969
so that'll set that yeah that'll set

1139
00:56:21,590 --> 00:56:24,970
that color here we go

1140
00:56:28,159 --> 00:56:34,909
and let's try and get that working all

1141
00:56:33,230 --> 00:56:37,010
right so this just makes no sense right

1142
00:56:34,909 --> 00:56:45,379
like this isn't even seem to be doing

1143
00:56:37,010 --> 00:56:50,000
what I asked it to at all like that just

1144
00:56:45,380 --> 00:56:52,490
seems totally broken because that that

1145
00:56:50,000 --> 00:56:54,679
should be just setting the voxels as

1146
00:56:52,489 --> 00:56:56,328
they're set like throughout this thing

1147
00:56:54,679 --> 00:56:59,088
it should be spamming all the voxels

1148
00:56:56,329 --> 00:57:00,650
right and it's not doing anything even

1149
00:56:59,088 --> 00:57:01,940
remotely like that so we're not even

1150
00:57:00,650 --> 00:57:03,108
we're not even running what we think

1151
00:57:01,940 --> 00:57:06,889
we're running we're just we're just in

1152
00:57:03,108 --> 00:57:14,509
in no-man's land right now so let me

1153
00:57:06,889 --> 00:57:17,509
just test cast probe or test never

1154
00:57:14,510 --> 00:57:23,000
remember what this thing is called test

1155
00:57:17,510 --> 00:57:34,700
cast from probes so in test cast from

1156
00:57:23,000 --> 00:57:37,750
probes which is called here if we write

1157
00:57:34,699 --> 00:57:37,750
to that voxel

1158
00:57:43,519 --> 00:57:47,809
I would also point out that all of this

1159
00:57:45,710 --> 00:57:49,869
code is like garbage code now we should

1160
00:57:47,809 --> 00:57:53,389
probably delete like a lot of this stuff

1161
00:57:49,869 --> 00:57:54,920
just to clean things up so if we take a

1162
00:57:53,389 --> 00:57:57,170
look at what's happening in here right

1163
00:57:54,920 --> 00:58:00,139
we're writing out to the voxel then we

1164
00:57:57,170 --> 00:58:01,490
come through here and are we doing

1165
00:58:00,139 --> 00:58:08,690
something in here that's bad I don't

1166
00:58:01,489 --> 00:58:13,039
think we are so all we're doing here

1167
00:58:08,690 --> 00:58:15,470
right is taking our voxel and copying it

1168
00:58:13,039 --> 00:58:19,449
into the appropriate place inside the

1169
00:58:15,469 --> 00:58:24,079
actual external lighting voxel right and

1170
00:58:19,449 --> 00:58:26,589
this is just doing the edge copies so

1171
00:58:24,079 --> 00:58:32,329
that should not affect anything either

1172
00:58:26,590 --> 00:58:34,130
and that's it right so I don't know how

1173
00:58:32,329 --> 00:58:39,279
we're seeing what we're seeing here

1174
00:58:34,130 --> 00:58:45,289
because we should be blending this stuff

1175
00:58:39,280 --> 00:58:46,490
pretty directly right I mean I don't I

1176
00:58:45,289 --> 00:58:48,769
don't see how we're getting what we're

1177
00:58:46,489 --> 00:58:50,599
getting here so let me change to another

1178
00:58:48,769 --> 00:58:52,900
thing let's just do this

1179
00:58:50,599 --> 00:58:56,089
let's take the lerp out of this entirely

1180
00:58:52,900 --> 00:58:59,119
I'm just gonna say alright everything's

1181
00:58:56,090 --> 00:59:08,780
read every voxel we spam is just bright

1182
00:58:59,119 --> 00:59:11,450
red and I mean see how weird that is

1183
00:59:08,780 --> 00:59:15,350
it's like we're only spamming voxels we

1184
00:59:11,449 --> 00:59:17,210
land on how is that happening like

1185
00:59:15,349 --> 00:59:20,569
what's going on there why are we not

1186
00:59:17,210 --> 00:59:22,940
calling spam voxel anywhere else because

1187
00:59:20,570 --> 00:59:24,650
we're supposed to be calling it for all

1188
00:59:22,940 --> 00:59:26,929
of the light probes are all the lard

1189
00:59:24,650 --> 00:59:29,420
they're only like light probes right

1190
00:59:26,929 --> 00:59:31,608
next to the dude or something or are we

1191
00:59:29,420 --> 00:59:32,539
interpreting these in the wrong spaces

1192
00:59:31,608 --> 00:59:36,039
or something like that

1193
00:59:32,539 --> 00:59:37,219
is enlarged voxel like returning

1194
00:59:36,039 --> 00:59:40,400
nonsense

1195
00:59:37,219 --> 00:59:42,230
I don't know so we've got some kind of

1196
00:59:40,400 --> 00:59:45,200
nonsense going on here that's totally

1197
00:59:42,230 --> 00:59:51,199
broken and I'm not sure what it actually

1198
00:59:45,199 --> 00:59:53,519
is right so here's another thought let

1199
00:59:51,199 --> 00:59:56,039
me look at get voxel indexed real quick

1200
00:59:53,519 --> 00:59:58,409
I mean yeah that's that looks right to

1201
00:59:56,039 --> 00:59:59,820
me I mean I guess I don't know why that

1202
00:59:58,409 --> 01:00:04,469
would be suspicious at all it seems

1203
00:59:59,820 --> 01:00:07,890
totally fine I'm not sure why that would

1204
01:00:04,469 --> 01:00:11,339
be an error at all but I mean maybe it

1205
01:00:07,889 --> 01:00:13,199
is so it seems like we're not really

1206
01:00:11,340 --> 01:00:16,320
actually getting into this code path

1207
01:00:13,199 --> 01:00:20,489
much at all and that doesn't make a

1208
01:00:16,320 --> 01:00:23,400
whole lot of sense to me so what's

1209
01:00:20,489 --> 01:00:30,868
happening there why is that

1210
01:00:23,400 --> 01:00:33,000
failing let's do one more debug here and

1211
01:00:30,869 --> 01:00:36,180
look at why that's not hitting very

1212
01:00:33,000 --> 01:00:38,130
often or if it is why it seems to only

1213
01:00:36,179 --> 01:00:41,659
write into one of the things which

1214
01:00:38,130 --> 01:00:41,660
doesn't make a lot of sense to me

1215
01:00:49,949 --> 01:00:55,049
all right so we don't care about this

1216
01:00:55,119 --> 01:01:10,619
we mostly care about this here's our Vox

1217
01:00:58,869 --> 01:01:10,619
I I mean right here's our light see

1218
01:01:20,329 --> 01:01:25,929
I mean that sure looks like we're right

1219
01:01:22,820 --> 01:01:25,930
into a lot of oxalá

1220
01:01:35,530 --> 01:01:41,930
so I suppose one thing we're not doing

1221
01:01:38,360 --> 01:01:53,050
though is we're not writing to the rest

1222
01:01:41,929 --> 01:01:53,049
of the octahedral map and I suppose that

1223
01:01:53,710 --> 01:01:59,960
would cause a problem right so maybe

1224
01:01:58,309 --> 01:02:02,119
that's mostly what we're seeing

1225
01:01:59,960 --> 01:02:04,250
we're only writing to the one direction

1226
01:02:02,119 --> 01:02:08,469
in the octahedral map where this

1227
01:02:04,250 --> 01:02:08,469
particular light source happens to be

1228
01:02:17,170 --> 01:02:25,539
so I suppose that would make sense right

1229
01:02:20,429 --> 01:02:27,608
so let's try this just to verify suppose

1230
01:02:25,539 --> 01:02:33,400
in here instead of calling get

1231
01:02:27,608 --> 01:02:45,480
octahedral offset suppose I hard-coded

1232
01:02:33,400 --> 01:02:45,480
this to actually just point upward

1233
01:02:48,329 --> 01:02:53,019
because we know that all of the ground

1234
01:02:50,949 --> 01:02:53,980
surfaces normals are pointing upward so

1235
01:02:53,018 --> 01:02:56,139
that's where they're gonna look for

1236
01:02:53,980 --> 01:03:07,838
their lighting like as close to that

1237
01:02:56,139 --> 01:03:10,768
right when we're looking down close so

1238
01:03:07,838 --> 01:03:10,768
let's try that first

1239
01:03:22,449 --> 01:03:30,639
so now yeah we're totally getting more

1240
01:03:26,480 --> 01:03:30,639
much more what we would expect right

1241
01:03:41,510 --> 01:03:46,850
all right so this seems better let's go

1242
01:03:44,599 --> 01:03:50,389
ahead and change this now to actually

1243
01:03:46,849 --> 01:03:52,159
doing in the spam voxel call let's

1244
01:03:50,389 --> 01:03:58,670
change this to actually using the

1245
01:03:52,159 --> 01:04:03,949
correct value well correct value is a

1246
01:03:58,670 --> 01:04:08,180
bit of a stretch here all right so this

1247
01:04:03,949 --> 01:04:11,000
is moving the light around and as far as

1248
01:04:08,179 --> 01:04:14,108
I can tell moving the light around here

1249
01:04:11,000 --> 01:04:18,500
should change the intensity of that

1250
01:04:14,108 --> 01:04:24,139
light see but it doesn't actually seem

1251
01:04:18,500 --> 01:04:25,969
to well okay I take it back no it

1252
01:04:24,139 --> 01:04:33,019
doesn't because this doesn't actually do

1253
01:04:25,969 --> 01:04:35,839
that it looks like right so I guess this

1254
01:04:33,019 --> 01:04:38,150
doesn't do attenuation here for whatever

1255
01:04:35,840 --> 01:04:41,300
reason because I I think spam voxel may

1256
01:04:38,150 --> 01:04:43,970
be used to do the attenuation so all

1257
01:04:41,300 --> 01:04:47,060
right let's add the attenuation Adam if

1258
01:04:43,969 --> 01:04:51,980
we have the length and the length is

1259
01:04:47,059 --> 01:04:57,199
here right so we want to do a clamp zero

1260
01:04:51,980 --> 01:04:59,780
to one on this thing where we basically

1261
01:04:57,199 --> 01:05:02,029
take the light color and we multiply it

1262
01:04:59,780 --> 01:05:05,840
by whatever value we're going to use

1263
01:05:02,030 --> 01:05:10,730
here for attenuation so we have the T

1264
01:05:05,840 --> 01:05:12,440
Max and the T max I guess arranged to

1265
01:05:10,730 --> 01:05:14,030
something I don't know what I want my

1266
01:05:12,440 --> 01:05:19,358
distance to be there but let's say

1267
01:05:14,030 --> 01:05:19,359
something like that and OH

1268
01:05:25,510 --> 01:05:28,980
that's what I actually want to do there

1269
01:05:30,599 --> 01:05:33,599
okay

1270
01:05:43,769 --> 01:05:53,699
all right so I'm pretty sure we now have

1271
01:05:50,670 --> 01:05:54,869
more or less of a handle on what we're

1272
01:05:53,699 --> 01:05:58,079
supposed to be doing here

1273
01:05:54,869 --> 01:06:02,730
and again we can't really make much use

1274
01:05:58,079 --> 01:06:04,860
of that of the REA Direction stuff

1275
01:06:02,730 --> 01:06:07,590
because we're only casting in one

1276
01:06:04,860 --> 01:06:10,380
direction so if we filled in like this

1277
01:06:07,590 --> 01:06:12,269
is this is not gonna work like with the

1278
01:06:10,380 --> 01:06:14,400
octahedral map much at all because since

1279
01:06:12,269 --> 01:06:16,050
we're only casting in one direction it

1280
01:06:14,400 --> 01:06:17,670
doesn't really help us but we're getting

1281
01:06:16,050 --> 01:06:21,090
okay we're getting there because we can

1282
01:06:17,670 --> 01:06:22,950
see what it would be doing if we were

1283
01:06:21,090 --> 01:06:25,320
only casting up so I'm gonna call that

1284
01:06:22,949 --> 01:06:28,618
roughly correct I think that's good

1285
01:06:25,320 --> 01:06:30,150
enough for now I don't know if we

1286
01:06:28,619 --> 01:06:31,440
actually care about what happens if you

1287
01:06:30,150 --> 01:06:33,450
run the Ray caster because the Ray

1288
01:06:31,440 --> 01:06:36,360
caster should not have broken in some

1289
01:06:33,449 --> 01:06:40,259
way so in theory that would be fine

1290
01:06:36,360 --> 01:06:42,780
still and that would just prevent you

1291
01:06:40,260 --> 01:06:46,080
again from seeing kind of around corners

1292
01:06:42,780 --> 01:06:47,369
so you know like when you are behind

1293
01:06:46,079 --> 01:06:48,809
things I'm guessing you shouldn't be

1294
01:06:47,369 --> 01:06:51,800
able to see it I don't know if that will

1295
01:06:48,809 --> 01:06:51,799
actually happen here though

1296
01:06:57,048 --> 01:07:03,449
yeah so in order to make that disappear

1297
01:07:00,659 --> 01:07:06,509
we would need to do this always so we

1298
01:07:03,449 --> 01:07:08,519
need to spam the voxel either way so in

1299
01:07:06,509 --> 01:07:15,708
here where we do the hid light what this

1300
01:07:08,518 --> 01:07:15,708
actually needs to be is like this right

1301
01:07:18,829 --> 01:07:33,150
so if we hit the light use it otherwise

1302
01:07:22,670 --> 01:07:36,929
dump it right because in order to make

1303
01:07:33,150 --> 01:07:40,019
the light go away we have to sum in zero

1304
01:07:36,929 --> 01:07:41,849
to any place we cast it and didn't find

1305
01:07:40,018 --> 01:07:47,608
the light anymore otherwise it'll just

1306
01:07:41,849 --> 01:07:53,699
stay lit forever right so I think that's

1307
01:07:47,608 --> 01:08:07,318
roughly what we would do I'm not sure

1308
01:07:53,699 --> 01:08:14,269
why that's so fast like the lerp until a

1309
01:08:07,318 --> 01:08:14,268
strip I'm not sure

1310
01:08:15,889 --> 01:08:19,630
that looks more gradual there

1311
01:08:22,319 --> 01:08:26,670
those don't look that gradual I don't

1312
01:08:24,449 --> 01:08:30,210
know let me set it I'm not sure about

1313
01:08:26,670 --> 01:08:33,060
that so I'm gonna set that T update just

1314
01:08:30,210 --> 01:08:36,569
really quickly I want to set that T

1315
01:08:33,060 --> 01:08:39,109
Update blend to be you know a bit

1316
01:08:36,569 --> 01:08:39,109
further down

1317
01:08:48,139 --> 01:09:02,989
and you know it fades out slowly but it

1318
01:08:53,810 --> 01:09:10,400
fades in awfully fast and I guess I

1319
01:09:02,988 --> 01:09:14,408
don't know why that would be is that

1320
01:09:10,399 --> 01:09:14,408
confusing to anyone else or just to me

1321
01:09:33,310 --> 01:09:44,120
hmmm I say so let's set it down even

1322
01:09:41,329 --> 01:09:49,068
more like I'm gonna set it down like way

1323
01:09:44,119 --> 01:09:52,899
down and just see because I don't I

1324
01:09:49,069 --> 01:09:52,900
don't really know what's going on there

1325
01:09:57,819 --> 01:10:06,729
so there is it fading out right I'm

1326
01:10:03,020 --> 01:10:06,730
looking at these two right here

1327
01:10:23,939 --> 01:10:28,590
I guess I don't know I'm a little

1328
01:10:26,639 --> 01:10:32,359
weirded out by that to be completely

1329
01:10:28,590 --> 01:10:37,679
honest with you I don't quite understand

1330
01:10:32,359 --> 01:10:39,839
what is happening there I I don't feel

1331
01:10:37,679 --> 01:10:43,248
like I'm getting the same amount I mean

1332
01:10:39,840 --> 01:10:49,130
I don't feel like I'm getting a uniform

1333
01:10:43,248 --> 01:10:53,069
sort of blend speed between decay and

1334
01:10:49,130 --> 01:10:56,969
attack there and I'm not sure why that

1335
01:10:53,069 --> 01:11:03,418
would be maybe the light is brighter oh

1336
01:10:56,969 --> 01:11:06,448
is that why the light may be much

1337
01:11:03,418 --> 01:11:08,988
brighter than then is is the light like

1338
01:11:06,448 --> 01:11:12,658
10 10 10 or something

1339
01:11:08,988 --> 01:11:17,098
where's the light see yeah okay that's

1340
01:11:12,658 --> 01:11:19,859
that's why right there right that that's

1341
01:11:17,099 --> 01:11:21,449
that's what it is it's it's that I was

1342
01:11:19,859 --> 01:11:23,098
gonna say I knew there's something going

1343
01:11:21,448 --> 01:11:25,618
on there so we were adding like much

1344
01:11:23,099 --> 01:11:27,300
higher values than one and which is fine

1345
01:11:25,618 --> 01:11:28,828
there's nothing wrong with that I just

1346
01:11:27,300 --> 01:11:30,989
wanted to know what was going on there

1347
01:11:28,828 --> 01:11:35,308
so now it should be much more uniform

1348
01:11:30,988 --> 01:11:37,529
between the two I would think let me

1349
01:11:35,309 --> 01:11:39,179
tune that and see if it actually is so

1350
01:11:37,529 --> 01:11:42,090
we are in here we're gonna set the light

1351
01:11:39,179 --> 01:11:45,989
see 2 1 1 1 then down here we're just

1352
01:11:42,090 --> 01:11:51,229
gonna blend it out so now if I set this

1353
01:11:45,988 --> 01:11:51,228
to more of a 10 frame sort of situation

1354
01:12:00,149 --> 01:12:05,550
and remember that's not frames anymore

1355
01:12:02,698 --> 01:12:09,648
it because we have multiple samples per

1356
01:12:05,550 --> 01:12:09,649
so that seems about uniform

1357
01:12:23,429 --> 01:12:28,208
I'll be honest still seems really

1358
01:12:25,719 --> 01:12:30,519
non-uniform to me I wonder if there's

1359
01:12:28,208 --> 01:12:43,658
another non-linearity in the ramp there

1360
01:12:30,519 --> 01:12:48,389
that I'm just not thinking about because

1361
01:12:43,658 --> 01:12:51,158
I don't touch that value anywhere right

1362
01:12:48,389 --> 01:12:57,760
so in theory we should be adding 1 1 1

1363
01:12:51,158 --> 01:13:00,038
or 0 0 0 right and we should be adding

1364
01:12:57,760 --> 01:13:01,809
them the same in each case right we

1365
01:13:00,038 --> 01:13:03,759
should be blending them into the same

1366
01:13:01,809 --> 01:13:06,458
rate whether we're whichever one we're

1367
01:13:03,760 --> 01:13:09,689
doing and I guess maybe you could argue

1368
01:13:06,458 --> 01:13:14,889
that the gamma ramp is what's doing that

1369
01:13:09,689 --> 01:13:23,619
maybe because the gamma ramp is going to

1370
01:13:14,889 --> 01:13:26,260
be nonlinear but no I mean because we

1371
01:13:23,618 --> 01:13:28,299
should still see at that point during

1372
01:13:26,260 --> 01:13:29,829
those darks you can see how slow it

1373
01:13:28,300 --> 01:13:33,418
moves to the darks and then it you don't

1374
01:13:29,828 --> 01:13:33,418
even see those darks when you do that

1375
01:13:44,748 --> 01:13:52,109
so that weirds me out I don't have an

1376
01:13:49,109 --> 01:13:56,069
answer for that I don't have an answer

1377
01:13:52,109 --> 01:13:56,698
for what's going on there I'm interested

1378
01:13:56,069 --> 01:14:01,768
to know

1379
01:13:56,698 --> 01:14:05,578
so do we touch the voxel in any other

1380
01:14:01,769 --> 01:14:09,139
way here like do we do anything else to

1381
01:14:05,578 --> 01:14:13,948
the light see where we like you know

1382
01:14:09,139 --> 01:14:16,440
muck with the value in some kind of way

1383
01:14:13,948 --> 01:14:18,979
per frame that we're not remembering

1384
01:14:16,439 --> 01:14:18,979
that we do

1385
01:14:43,250 --> 01:14:50,689
yeah I'm not seeing it I am not seeing

1386
01:14:48,479 --> 01:14:50,689
it

1387
01:15:02,208 --> 01:15:07,698
am I the only person who's not seeing it

1388
01:15:04,998 --> 01:15:09,498
like do you folks know I don't know

1389
01:15:07,698 --> 01:15:12,799
maybe you've already figured it out but

1390
01:15:09,498 --> 01:15:14,599
I don't know so that's troubling it's

1391
01:15:12,800 --> 01:15:17,840
not the most troubling thing in the

1392
01:15:14,599 --> 01:15:20,420
world but it's really weird and so I

1393
01:15:17,840 --> 01:15:23,748
would have expected those two things to

1394
01:15:20,420 --> 01:15:27,399
be the same and they are really

1395
01:15:23,748 --> 01:15:36,649
definitely a lot not the same at all and

1396
01:15:27,399 --> 01:15:41,920
that is weird right in both of these

1397
01:15:36,649 --> 01:15:41,920
cases we should not be able to have

1398
01:15:42,998 --> 01:15:56,238
really any values we can't these can't

1399
01:15:46,189 --> 01:15:57,679
be negative right because we're doing a

1400
01:15:56,238 --> 01:15:58,638
clamp 0 1 we're striving for 1 the

1401
01:15:57,679 --> 01:16:05,779
multiplying so that's going to be a

1402
01:15:58,639 --> 01:16:08,510
multiplier 50 to 0 in one and you know

1403
01:16:05,779 --> 01:16:10,840
if anything I would think they'll like

1404
01:16:08,510 --> 01:16:16,670
light should get brighter more slowly

1405
01:16:10,840 --> 01:16:17,900
because getting brighter is proportional

1406
01:16:16,670 --> 01:16:19,969
to the distance of the light source

1407
01:16:17,899 --> 01:16:27,198
whereas getting darker is always zero

1408
01:16:19,969 --> 01:16:32,868
zero zero so it seems to me like you

1409
01:16:27,198 --> 01:16:35,419
would think that it would be if anything

1410
01:16:32,868 --> 01:16:38,929
slower to get brighter and faster to get

1411
01:16:35,420 --> 01:16:41,559
darker if I was going to have to push a

1412
01:16:38,929 --> 01:16:41,559
bug in one direction

1413
01:16:49,880 --> 01:16:52,880
mmm

1414
01:16:53,319 --> 01:17:03,099
so I just plain don't know and I'm gonna

1415
01:16:59,569 --> 01:17:38,689
have to put this as it to do because

1416
01:17:03,100 --> 01:17:45,050
something's wrong so there is one way I

1417
01:17:38,689 --> 01:17:50,619
could see there being an argument for

1418
01:17:45,050 --> 01:17:54,829
why the color would I mean there is one

1419
01:17:50,619 --> 01:17:55,340
vague way this could work and not be

1420
01:17:54,829 --> 01:18:07,329
broken

1421
01:17:55,340 --> 01:18:11,119
I guess so since we're casting her probe

1422
01:18:07,329 --> 01:18:13,069
if two of the probes if it's like two of

1423
01:18:11,119 --> 01:18:16,220
the probes are zero and one of the

1424
01:18:13,069 --> 01:18:18,049
probes is not and then two of the probes

1425
01:18:16,220 --> 01:18:20,150
those other two probes switched to one

1426
01:18:18,050 --> 01:18:30,789
but they're all writing into the same

1427
01:18:20,149 --> 01:18:30,789
voxel that would do it gin i'm santi

1428
01:18:35,420 --> 01:18:44,100
so if we just did only the voxels

1429
01:18:38,939 --> 01:18:56,099
themselves or only did one light probe

1430
01:18:44,100 --> 01:19:01,039
per voxel etc etc that might explain it

1431
01:18:56,100 --> 01:19:01,039
so let me go see I mean sure

1432
01:19:03,560 --> 01:19:09,720
so here we're we're doing the light

1433
01:19:05,819 --> 01:19:12,439
probe garbage right let's just suppose I

1434
01:19:09,720 --> 01:19:17,340
knocked out one light probe per tile

1435
01:19:12,439 --> 01:19:22,879
because I can and then I ran it what

1436
01:19:17,340 --> 01:19:22,880
would I see now right I'm just curious

1437
01:19:29,779 --> 01:19:34,029
I mean it still seems totally wrong to

1438
01:19:31,850 --> 01:19:34,030
me

1439
01:20:10,829 --> 01:20:18,970
so not really getting a positive feeling

1440
01:20:15,789 --> 01:20:19,720
about that with new light probes we

1441
01:20:18,970 --> 01:20:24,730
should get nothing

1442
01:20:19,720 --> 01:20:28,990
I guess I'll verify that there should be

1443
01:20:24,729 --> 01:20:30,939
no lighting right and now if I turn on

1444
01:20:28,989 --> 01:20:35,859
one of these light probes let's say that

1445
01:20:30,939 --> 01:20:40,449
one the lighting should magically start

1446
01:20:35,859 --> 01:20:45,130
to appear oh no it shouldn't because we

1447
01:20:40,449 --> 01:20:48,179
haven't run the world jinn so running

1448
01:20:45,130 --> 01:20:48,180
with one light probe

1449
01:20:56,170 --> 01:21:07,489
yeah I don't know I can't think of any

1450
01:21:04,819 --> 01:21:11,149
explanation for that and that's really

1451
01:21:07,489 --> 01:21:13,130
bad I don't even know what we're gonna

1452
01:21:11,149 --> 01:21:16,849
look at to find that I guess what we're

1453
01:21:13,130 --> 01:21:20,420
gonna have to do is put in some test

1454
01:21:16,850 --> 01:21:23,240
code that allows us to like spam all the

1455
01:21:20,420 --> 01:21:25,789
voxels with a particular ramp color then

1456
01:21:23,239 --> 01:21:28,099
spam them back to see what that looks

1457
01:21:25,789 --> 01:21:29,810
like and verify that that looks okay if

1458
01:21:28,100 --> 01:21:32,750
that doesn't look okay then we're living

1459
01:21:29,810 --> 01:21:34,460
in bizarro land where somehow going a

1460
01:21:32,750 --> 01:21:37,149
ramp in one direction versus going a

1461
01:21:34,460 --> 01:21:37,149
ramp in the other direction

1462
01:21:48,100 --> 01:21:55,910
okay so wait a minute maybe I'm

1463
01:21:52,310 --> 01:21:57,469
overreacting though let's use this

1464
01:21:55,909 --> 01:22:01,789
awesome calculator thing that we've been

1465
01:21:57,469 --> 01:22:08,359
using I don't know how to make a new one

1466
01:22:01,789 --> 01:22:11,448
of these things area so here's the

1467
01:22:08,359 --> 01:22:15,649
thought for y'all since we know that the

1468
01:22:11,448 --> 01:22:17,719
ramp is nonlinear right because it's a

1469
01:22:15,649 --> 01:22:20,809
gamma curve that we're looking at at the

1470
01:22:17,719 --> 01:22:25,880
monitor so a linear change is gonna look

1471
01:22:20,810 --> 01:22:30,020
like a nonlinear change right so if the

1472
01:22:25,880 --> 01:22:32,510
curve goes the other way round which it

1473
01:22:30,020 --> 01:22:35,989
will that would explain the difference

1474
01:22:32,510 --> 01:22:36,739
very interesting okay so you know bear

1475
01:22:35,988 --> 01:22:40,399
with me here

1476
01:22:36,738 --> 01:22:44,859
what's our update function right well

1477
01:22:40,399 --> 01:22:49,488
our update function is we're taking

1478
01:22:44,859 --> 01:22:57,799
alert right so we're doing you know 1

1479
01:22:49,488 --> 01:23:01,879
minus T times a plus TB right where a is

1480
01:22:57,800 --> 01:23:05,810
like zero and B is 1 or something like

1481
01:23:01,880 --> 01:23:07,819
this right and so if we think about what

1482
01:23:05,810 --> 01:23:09,620
that's going to do this equations gonna

1483
01:23:07,819 --> 01:23:13,698
look different depending on the

1484
01:23:09,619 --> 01:23:17,929
circumstance what you get back so like

1485
01:23:13,698 --> 01:23:22,579
our final brightness right we'll call

1486
01:23:17,929 --> 01:23:23,719
that linear brightness let's say L if we

1487
01:23:22,579 --> 01:23:27,559
have 0 &amp; 1

1488
01:23:23,719 --> 01:23:35,239
here no I just want one yeah if we have

1489
01:23:27,560 --> 01:23:37,760
0 &amp; 1 here right this T value here is is

1490
01:23:35,238 --> 01:23:39,589
quite low and we're doing this over time

1491
01:23:37,760 --> 01:23:41,510
so it's gonna be a little bit hard for

1492
01:23:39,590 --> 01:23:47,630
us to this is like a recurrence I don't

1493
01:23:41,510 --> 01:23:49,039
know how we can do this easily because

1494
01:23:47,630 --> 01:23:51,109
we want to we want to do like a

1495
01:23:49,039 --> 01:23:53,510
summation of this over time for the same

1496
01:23:51,109 --> 01:23:55,698
value which I don't know again my my

1497
01:23:53,510 --> 01:23:58,730
knowledge of this graphing calculator is

1498
01:23:55,698 --> 01:23:59,469
not particularly good but the point is

1499
01:23:58,729 --> 01:24:00,849
it's

1500
01:23:59,470 --> 01:24:02,020
gonna be a curve that looks two

1501
01:24:00,850 --> 01:24:03,310
different ways it's either gonna look

1502
01:24:02,020 --> 01:24:06,720
that way or that way depending where

1503
01:24:03,310 --> 01:24:06,720
they were going up or down right

1504
01:24:17,788 --> 01:24:21,630
trying to think of how to show you this

1505
01:24:26,368 --> 01:24:29,368
alright

1506
01:24:33,569 --> 01:24:41,559
wait why does it say day 580 did I never

1507
01:24:37,539 --> 01:24:50,399
start the timer it's not day five idiot

1508
01:24:41,560 --> 01:24:50,400
I've bee 581 right Dave 581 anyone

1509
01:24:50,819 --> 01:24:56,859
anyone could someone on the chat verify

1510
01:24:54,670 --> 01:25:03,369
for me it's day 581 I'm pretty sure it

1511
01:24:56,859 --> 01:25:07,319
is yeah so we we never set this value i

1512
01:25:03,369 --> 01:25:17,430
sorry about that so this is just wrong

1513
01:25:07,319 --> 01:25:21,599
here there we go well remember to end 12

1514
01:25:17,430 --> 01:25:21,600
yeah anyway

1515
01:25:28,819 --> 01:25:34,500
so what we're effectively doing here

1516
01:25:31,618 --> 01:25:38,488
right is every frame we're applying the

1517
01:25:34,500 --> 01:25:42,750
linear blend so on a particular frame

1518
01:25:38,488 --> 01:25:46,049
like the value so whatever our you know

1519
01:25:42,750 --> 01:25:51,000
value is on or maybe let's say our value

1520
01:25:46,050 --> 01:25:54,210
is at time T plus one is always going to

1521
01:25:51,000 --> 01:26:00,270
equal a blend towards something so it's

1522
01:25:54,210 --> 01:26:05,868
going to be one - I shouldn't use T we

1523
01:26:00,270 --> 01:26:09,239
use F so on our frame the next frame

1524
01:26:05,868 --> 01:26:14,578
it's going to be equal to one minus T

1525
01:26:09,238 --> 01:26:17,218
times the current frame plus T times the

1526
01:26:14,578 --> 01:26:20,308
target value and this is either going to

1527
01:26:17,219 --> 01:26:21,929
be zero or one depending on whether

1528
01:26:20,309 --> 01:26:23,219
we're going up or down in this case

1529
01:26:21,929 --> 01:26:25,559
right we're either blending into a

1530
01:26:23,219 --> 01:26:26,698
bright light or a dim light so it's

1531
01:26:25,559 --> 01:26:29,190
whatever I mean doesn't really matter

1532
01:26:26,698 --> 01:26:30,750
what these two are right but the point

1533
01:26:29,189 --> 01:26:32,939
is we have the dark version or the light

1534
01:26:30,750 --> 01:26:33,840
version and we want to know the

1535
01:26:32,939 --> 01:26:36,868
difference in behavior of these two

1536
01:26:33,840 --> 01:26:38,429
functions right and obviously they're

1537
01:26:36,868 --> 01:26:39,960
going to do the same kind of a curve

1538
01:26:38,429 --> 01:26:42,059
going from one to the other but the

1539
01:26:39,960 --> 01:26:44,849
point is the actual place in the range

1540
01:26:42,059 --> 01:26:48,329
is going to be different so if we look

1541
01:26:44,849 --> 01:26:54,900
at what happens here on a particular

1542
01:26:48,328 --> 01:26:57,750
update step right excuse me on a

1543
01:26:54,899 --> 01:26:59,670
particular update step this value starts

1544
01:26:57,750 --> 01:27:02,578
off quite low like it's gonna start out

1545
01:26:59,670 --> 01:27:06,179
at zero and go towards one or it's going

1546
01:27:02,578 --> 01:27:08,099
to start at 1 and go towards zero right

1547
01:27:06,179 --> 01:27:11,730
and it's gonna update each individual

1548
01:27:08,099 --> 01:27:16,969
time now unfortunately for us this is

1549
01:27:11,729 --> 01:27:19,109
essentially a this is basically like a

1550
01:27:16,969 --> 01:27:21,439
differential equation right so it's like

1551
01:27:19,109 --> 01:27:27,948
a know de kind of a thing because the

1552
01:27:21,439 --> 01:27:34,198
value of the function you know V of of f

1553
01:27:27,948 --> 01:27:36,569
plus 1 is dependent on something like a

1554
01:27:34,198 --> 01:27:38,069
function of V of F right it's going to

1555
01:27:36,569 --> 01:27:42,359
equal some function here it's like

1556
01:27:38,069 --> 01:27:45,929
something that takes this function as an

1557
01:27:42,359 --> 01:27:47,969
put right so it's it's nasty because

1558
01:27:45,929 --> 01:27:49,889
it's it's if it's a function that

1559
01:27:47,969 --> 01:27:52,649
depends on itself and those are always

1560
01:27:49,889 --> 01:27:58,409
you know kind of unwieldy to deal with

1561
01:27:52,649 --> 01:28:00,149
right but we know that that is going to

1562
01:27:58,408 --> 01:28:01,618
produce if you take a look at what

1563
01:28:00,149 --> 01:28:04,349
actually happens if you look at the

1564
01:28:01,618 --> 01:28:05,339
values over time and again I there's

1565
01:28:04,350 --> 01:28:08,969
probably a way to do this in the

1566
01:28:05,340 --> 01:28:10,770
graphing calculators don't know how but

1567
01:28:08,969 --> 01:28:12,840
if you look at what the values of this

1568
01:28:10,770 --> 01:28:14,460
is going to produce over time what's

1569
01:28:12,840 --> 01:28:17,789
gonna happen is let's suppose that we

1570
01:28:14,460 --> 01:28:20,639
started at zero and we're going towards

1571
01:28:17,789 --> 01:28:23,069
1 what would we expect to see if our T

1572
01:28:20,639 --> 01:28:25,050
value in this case I think is like 1/6

1573
01:28:23,069 --> 01:28:26,130
right so I mean we could make that a

1574
01:28:25,050 --> 01:28:28,079
little easier on ourselves let's just

1575
01:28:26,130 --> 01:28:30,239
say it was point two it's not horrible

1576
01:28:28,079 --> 01:28:33,448
as an approximation but whatever it is

1577
01:28:30,238 --> 01:28:36,029
right so if we wanted to know what VF

1578
01:28:33,448 --> 01:28:38,809
plus 1 was in this case we want to know

1579
01:28:36,029 --> 01:28:44,488
what this part is we know that we've got

1580
01:28:38,810 --> 01:28:50,610
0.8 times in this case 0 right plus 0.2

1581
01:28:44,488 --> 01:28:53,789
times 1 right so that's just gonna be

1582
01:28:50,609 --> 01:28:55,469
point two and then on the next frame you

1583
01:28:53,789 --> 01:28:57,600
know this comes down here so we're gonna

1584
01:28:55,469 --> 01:28:58,739
have 0.8 because this is discrete right

1585
01:28:57,600 --> 01:29:00,810
we're not doing this continuously we're

1586
01:28:58,738 --> 01:29:03,779
doing it per frame as like a you know

1587
01:29:00,810 --> 01:29:05,969
discrete thing so in this case we're

1588
01:29:03,779 --> 01:29:09,479
gonna say all right now we've got point

1589
01:29:05,969 --> 01:29:14,039
eight times whatever was here right plus

1590
01:29:09,479 --> 01:29:18,718
0.2 times 1 again right so in that case

1591
01:29:14,039 --> 01:29:27,090
we've actually got 0.2 times 0.8 so now

1592
01:29:18,719 --> 01:29:30,899
we're at 0.16 right plus our point 2 now

1593
01:29:27,090 --> 01:29:34,619
we're at 0.36 right now what you'll

1594
01:29:30,899 --> 01:29:37,460
notice is the jump here if I did that

1595
01:29:34,618 --> 01:29:37,460
math correctly

1596
01:29:56,710 --> 01:30:02,319
yeah so if I did that math correctly

1597
01:30:00,310 --> 01:30:04,240
what you'll notice is this is not a

1598
01:30:02,319 --> 01:30:05,409
constant derivative right and that's

1599
01:30:04,239 --> 01:30:07,840
what you would expect from a linear

1600
01:30:05,409 --> 01:30:11,260
blend so if you take a look at how far

1601
01:30:07,840 --> 01:30:14,020
we got on this one we actually our Delta

1602
01:30:11,260 --> 01:30:15,190
was point two on this one our Delta was

1603
01:30:14,020 --> 01:30:17,380
not point two

1604
01:30:15,189 --> 01:30:22,199
right we didn't go from point two two

1605
01:30:17,380 --> 01:30:27,190
point four instead we went from point 2

1606
01:30:22,199 --> 01:30:31,840
to point 3 6 for a delta of 0.16 right

1607
01:30:27,189 --> 01:30:34,239
so our Delta's going down over time and

1608
01:30:31,840 --> 01:30:36,510
let's keep going so now we take our

1609
01:30:34,239 --> 01:30:40,269
point three six we put it in here right

1610
01:30:36,510 --> 01:30:43,989
and we have our point two again and now

1611
01:30:40,270 --> 01:30:47,560
what we end up with is 0.8 times 0.36

1612
01:30:43,989 --> 01:30:51,369
plus our point two right now we have

1613
01:30:47,560 --> 01:30:54,030
point four eight and give it the benefit

1614
01:30:51,369 --> 01:30:56,979
the doubt call it point four nine right

1615
01:30:54,029 --> 01:30:59,739
well now if we take point four nine and

1616
01:30:56,979 --> 01:31:09,789
- our point three six now we're even

1617
01:30:59,739 --> 01:31:11,409
less right so what that means is that if

1618
01:31:09,789 --> 01:31:15,760
you look at what this is doing on the

1619
01:31:11,409 --> 01:31:18,159
curve right starting at zero well as we

1620
01:31:15,760 --> 01:31:21,970
went forward over time so here's our

1621
01:31:18,159 --> 01:31:24,819
time axis here our actual value going up

1622
01:31:21,970 --> 01:31:30,130
you know if this was let's let's do this

1623
01:31:24,819 --> 01:31:35,500
so this is one so at point two point

1624
01:31:30,130 --> 01:31:38,140
four point six point eight one yeah so

1625
01:31:35,500 --> 01:31:40,989
we jumped directly up to there on our

1626
01:31:38,140 --> 01:31:43,570
first frame right so here was frame zero

1627
01:31:40,989 --> 01:31:45,069
is frame one hears from two right but

1628
01:31:43,569 --> 01:31:46,869
then in our next frame if we were going

1629
01:31:45,069 --> 01:31:48,969
up linearly we would have it there we

1630
01:31:46,869 --> 01:31:51,220
didn't at all right we were at point

1631
01:31:48,970 --> 01:31:53,199
three six so we were there and then on

1632
01:31:51,220 --> 01:31:55,030
the next one we weren't even at five so

1633
01:31:53,199 --> 01:32:00,970
we were there right so we're kind of

1634
01:31:55,029 --> 01:32:05,489
curving like that right as we go up

1635
01:32:00,970 --> 01:32:08,519
we're curving towards one using a

1636
01:32:05,489 --> 01:32:12,538
gradually decreasing speed of curve

1637
01:32:08,519 --> 01:32:13,980
right now when we do this in Reverse the

1638
01:32:12,538 --> 01:32:16,259
same thing is going to happen because

1639
01:32:13,979 --> 01:32:17,609
this is the same linear combination but

1640
01:32:16,260 --> 01:32:21,659
it's gonna happen the other way round

1641
01:32:17,609 --> 01:32:23,788
right so when we do the other one we're

1642
01:32:21,658 --> 01:32:25,859
gonna get the same kind of curve one

1643
01:32:23,788 --> 01:32:27,210
that starts out fast but then ramps

1644
01:32:25,859 --> 01:32:29,488
right it's just gonna be the flipped

1645
01:32:27,210 --> 01:32:31,880
curve because it's exactly the same with

1646
01:32:29,488 --> 01:32:35,339
just these two numbers slipped right and

1647
01:32:31,880 --> 01:32:38,219
so what happens is we move through this

1648
01:32:35,340 --> 01:32:40,860
part of the ramp quickly in one and

1649
01:32:38,219 --> 01:32:43,349
slowly on another and we move through

1650
01:32:40,859 --> 01:32:47,759
this part of the ramp quickly on one and

1651
01:32:43,349 --> 01:32:51,630
slowly on the other right if this were

1652
01:32:47,760 --> 01:32:53,940
linear perceptually then we would expect

1653
01:32:51,630 --> 01:32:56,849
to see it the same in both cases because

1654
01:32:53,939 --> 01:32:58,288
hey we're just you know it's it's linear

1655
01:32:56,849 --> 01:33:01,170
throughout so it'll appear the same

1656
01:32:58,288 --> 01:33:03,988
speed in either case it's just an ease

1657
01:33:01,170 --> 01:33:06,328
out at a different place right but

1658
01:33:03,988 --> 01:33:08,609
because it's not because this then goes

1659
01:33:06,328 --> 01:33:11,479
through the gamma ramp right which

1660
01:33:08,609 --> 01:33:13,529
raises this to the two point two right

1661
01:33:11,479 --> 01:33:16,078
because this then goes through the gamma

1662
01:33:13,529 --> 01:33:19,319
ramp were actually spending a lot more

1663
01:33:16,078 --> 01:33:21,439
time in one part of the curve on one

1664
01:33:19,319 --> 01:33:25,349
like this will then move this point

1665
01:33:21,439 --> 01:33:27,089
right drastically one way or the other

1666
01:33:25,349 --> 01:33:30,360
to think about which way it actually is

1667
01:33:27,090 --> 01:33:32,670
moving it right so when we actually look

1668
01:33:30,359 --> 01:33:34,319
at these two they should actually look

1669
01:33:32,670 --> 01:33:37,078
quite a bit different because one of

1670
01:33:34,319 --> 01:33:40,618
them is spending a lot more time in a

1671
01:33:37,078 --> 01:33:44,808
much more defined area of the color

1672
01:33:40,618 --> 01:33:44,808
space that we can see than the other one

1673
01:33:45,590 --> 01:33:52,019
I'm still not 100% convinced in that I

1674
01:33:49,340 --> 01:33:53,369
feel like it's a bit of a rat hole to go

1675
01:33:52,019 --> 01:33:57,030
down right now that we don't actually

1676
01:33:53,368 --> 01:33:59,158
need to but this is very interesting and

1677
01:33:57,029 --> 01:34:02,309
probably warrants further study what we

1678
01:33:59,158 --> 01:34:05,368
should probably do is make a few test

1679
01:34:02,309 --> 01:34:09,630
ramps using various things like one with

1680
01:34:05,368 --> 01:34:11,939
gamma 1 without graph their values and

1681
01:34:09,630 --> 01:34:14,309
look at their perceptual values just to

1682
01:34:11,939 --> 01:34:16,379
convince ourselves that we're not

1683
01:34:14,309 --> 01:34:19,469
overlooking a bug right because I don't

1684
01:34:16,380 --> 01:34:23,210
want to like brush it aside but that

1685
01:34:19,469 --> 01:34:23,210
does actually sound fairly convincing

1686
01:34:31,640 --> 01:34:35,539
because you can see like yeah you're

1687
01:34:33,140 --> 01:34:38,240
spending a lot more because you take the

1688
01:34:35,539 --> 01:34:40,850
same amount of time to transit between

1689
01:34:38,239 --> 01:34:44,989
the two values which we know would be

1690
01:34:40,850 --> 01:34:47,950
true in our case because when we're

1691
01:34:44,989 --> 01:34:50,300
doing that transiting the perceptual

1692
01:34:47,949 --> 01:34:52,369
result when you put it through the gamma

1693
01:34:50,300 --> 01:34:55,970
curve we're gonna be spending a lot more

1694
01:34:52,369 --> 01:34:57,769
time on one of them in an area that you

1695
01:34:55,970 --> 01:34:59,840
can perceive the shades of than in the

1696
01:34:57,770 --> 01:35:02,120
other one where you can't right

1697
01:34:59,840 --> 01:35:03,770
I believe that's what will happen but

1698
01:35:02,119 --> 01:35:05,269
again that's a little hand wavy because

1699
01:35:03,770 --> 01:35:06,710
we didn't actually we need to go

1700
01:35:05,270 --> 01:35:07,400
actually verify at some point that

1701
01:35:06,710 --> 01:35:09,800
that's the case

1702
01:35:07,399 --> 01:35:12,979
I don't know when we'll have time to do

1703
01:35:09,800 --> 01:35:14,510
that but we should because I think

1704
01:35:12,979 --> 01:35:16,579
that's a good thing to just understand

1705
01:35:14,510 --> 01:35:18,590
and it kind of eluded me for a second so

1706
01:35:16,579 --> 01:35:22,519
I kind of like would like to go do some

1707
01:35:18,590 --> 01:35:25,970
tests so that would sink in right if

1708
01:35:22,520 --> 01:35:28,490
that makes sense but anyway so I think

1709
01:35:25,970 --> 01:35:33,829
we're okay here I would like a little

1710
01:35:28,489 --> 01:35:37,039
more confirmation on that but we'll see

1711
01:35:33,829 --> 01:35:44,329
I don't know what this thing is that

1712
01:35:37,039 --> 01:35:45,949
we're gonna get rid of it so now we're

1713
01:35:44,329 --> 01:35:49,340
gonna try and get the lighting

1714
01:35:45,949 --> 01:35:50,630
computation actually do something and so

1715
01:35:49,340 --> 01:35:54,079
we need to do a little bit of work to

1716
01:35:50,630 --> 01:35:57,109
make that happen here right and so we

1717
01:35:54,079 --> 01:35:59,840
want something that's going to stop

1718
01:35:57,109 --> 01:36:01,579
calling the test probes version and that

1719
01:35:59,840 --> 01:36:03,650
actually just sends light around and

1720
01:36:01,579 --> 01:36:05,059
we've got a problem the biggest problem

1721
01:36:03,649 --> 01:36:06,799
is we don't know how to sample the

1722
01:36:05,060 --> 01:36:08,990
lighting here we need some way of

1723
01:36:06,800 --> 01:36:11,150
sampling the actual lighting so what I'm

1724
01:36:08,989 --> 01:36:14,029
gonna do is I'm just gonna go ahead and

1725
01:36:11,149 --> 01:36:16,009
turn off the test probe stuff and we'll

1726
01:36:14,029 --> 01:36:21,559
have to put in an actual voxel blending

1727
01:36:16,010 --> 01:36:24,440
call so when we call test casts from

1728
01:36:21,560 --> 01:36:26,900
probes we're gonna actually change to

1729
01:36:24,439 --> 01:36:30,619
compute light propagation which is this

1730
01:36:26,899 --> 01:36:32,629
right here you can see that we've turned

1731
01:36:30,619 --> 01:36:35,210
off the multi thread so we're not

1732
01:36:32,630 --> 01:36:35,750
multi-threading right here we're

1733
01:36:35,210 --> 01:36:37,250
literally

1734
01:36:35,750 --> 01:36:42,609
just you know we're not multi-threading

1735
01:36:37,250 --> 01:36:42,609
we're just doing this updates up here

1736
01:36:47,350 --> 01:36:51,800
and that's because we're gonna have to

1737
01:36:49,430 --> 01:36:53,539
partition our probes into things that

1738
01:36:51,800 --> 01:36:57,470
operate on certain parts of the voxel

1739
01:36:53,539 --> 01:36:58,640
right and so I don't actually know if in

1740
01:36:57,470 --> 01:37:00,829
the future we're even going to need to

1741
01:36:58,640 --> 01:37:04,880
use probes at all we might just be able

1742
01:37:00,829 --> 01:37:09,769
to use make sure our voxels are you know

1743
01:37:04,880 --> 01:37:12,260
sampled in some way that we only sample

1744
01:37:09,770 --> 01:37:14,450
things that are not occluded that are

1745
01:37:12,260 --> 01:37:20,659
not like inside I don't know exactly how

1746
01:37:14,449 --> 01:37:21,979
to say that but we may be able to get

1747
01:37:20,659 --> 01:37:23,449
away with just not using lighting probes

1748
01:37:21,979 --> 01:37:26,119
at all eventually which would kind of be

1749
01:37:23,449 --> 01:37:29,899
nice too but it's a separate issue all

1750
01:37:26,119 --> 01:37:32,239
right so if we go ahead and do the

1751
01:37:29,899 --> 01:37:33,859
platform work you call back stuff here

1752
01:37:32,239 --> 01:37:36,859
if we start looking at how this is

1753
01:37:33,859 --> 01:37:38,839
actually working and we look in here you

1754
01:37:36,859 --> 01:37:41,719
can see we've done the thing where we do

1755
01:37:38,840 --> 01:37:43,819
our ray bundles actually do elect bias

1756
01:37:41,720 --> 01:37:46,100
towards light replacement nonsense thing

1757
01:37:43,819 --> 01:37:47,840
here I'll leave that in for now but I

1758
01:37:46,100 --> 01:37:48,920
think we may eventually want to just do

1759
01:37:47,840 --> 01:37:51,199
completely unbiased

1760
01:37:48,920 --> 01:37:53,420
just regular sampling and leave it at

1761
01:37:51,199 --> 01:37:58,519
that I don't know so don't quote me on

1762
01:37:53,420 --> 01:38:01,909
that but again I'm not gonna rule it out

1763
01:37:58,520 --> 01:38:03,350
so after we do all of our sampling here

1764
01:38:01,909 --> 01:38:03,979
what we really need now is just a way to

1765
01:38:03,350 --> 01:38:06,950
do this

1766
01:38:03,979 --> 01:38:09,379
spam voxel we know that we can call this

1767
01:38:06,949 --> 01:38:12,199
stuff and we can we can use the light

1768
01:38:09,380 --> 01:38:13,940
direction so we know more or less that

1769
01:38:12,199 --> 01:38:17,389
we should be able to literally just do

1770
01:38:13,939 --> 01:38:21,169
this part here right so while this thing

1771
01:38:17,390 --> 01:38:22,340
does its ray bundle index stuff and you

1772
01:38:21,170 --> 01:38:23,630
know what now that I look at it this is

1773
01:38:22,340 --> 01:38:26,779
actually us to move on the inside anyway

1774
01:38:23,630 --> 01:38:28,520
so right here we're not gonna you know

1775
01:38:26,779 --> 01:38:30,139
this this is not gonna be doing it we're

1776
01:38:28,520 --> 01:38:33,710
gonna be writing in two different parts

1777
01:38:30,140 --> 01:38:37,490
so we don't want to do any of this this

1778
01:38:33,710 --> 01:38:39,949
this has to all happen in here right and

1779
01:38:37,489 --> 01:38:41,569
so there's none of this summing this

1780
01:38:39,949 --> 01:38:44,720
this is not happening like this is not

1781
01:38:41,569 --> 01:38:47,288
right at all this stuff here doesn't

1782
01:38:44,720 --> 01:38:49,520
doesn't happen this way right

1783
01:38:47,288 --> 01:38:51,288
so what we want to do in here is say

1784
01:38:49,520 --> 01:38:54,739
alright we've got the Rays coming in

1785
01:38:51,288 --> 01:38:57,229
we're doing a ray cast on this thing and

1786
01:38:54,738 --> 01:38:59,959
we get down here and we're gonna need to

1787
01:38:57,229 --> 01:39:02,598
compute you know whatever the transfer

1788
01:38:59,960 --> 01:39:05,090
photos per second are and all that

1789
01:39:02,599 --> 01:39:06,949
garbage so we do this stuff and I don't

1790
01:39:05,090 --> 01:39:08,690
see so this this looks like we're not

1791
01:39:06,948 --> 01:39:12,649
using this tool here so we we come out

1792
01:39:08,689 --> 01:39:14,328
and we have our transfer PPS right and I

1793
01:39:12,649 --> 01:39:15,679
don't care about any of this look we

1794
01:39:14,328 --> 01:39:17,359
don't care about this even a little bit

1795
01:39:15,679 --> 01:39:19,690
I think we can literally get rid of all

1796
01:39:17,359 --> 01:39:22,069
this so we just have our transfer PPS

1797
01:39:19,689 --> 01:39:23,569
and we have our emission direction as

1798
01:39:22,069 --> 01:39:25,009
well which I don't know exactly how we

1799
01:39:23,569 --> 01:39:29,750
want to use that we'll see in a second I

1800
01:39:25,010 --> 01:39:32,449
suppose but I think all we really want

1801
01:39:29,750 --> 01:39:35,300
to do is say look whatever the Ray

1802
01:39:32,448 --> 01:39:37,788
direction was here for our sub ray we

1803
01:39:35,300 --> 01:39:40,159
need that actual thing I don't know what

1804
01:39:37,788 --> 01:39:43,519
the emission direction part of this well

1805
01:39:40,158 --> 01:39:45,319
anyway so in order to get the octahedral

1806
01:39:43,520 --> 01:39:46,520
offset we would just be using the the

1807
01:39:45,319 --> 01:39:48,469
negative of the emission direction I

1808
01:39:46,520 --> 01:39:49,909
think regular just want the direction we

1809
01:39:48,469 --> 01:39:52,130
were looking at originally which is the

1810
01:39:49,908 --> 01:39:56,019
raid erection why the emission direction

1811
01:39:52,130 --> 01:39:56,020
is inverted here I'm not sure

1812
01:40:06,069 --> 01:40:10,989
oh right cuz it needs to look backwards

1813
01:40:09,729 --> 01:40:12,939
no that's that's fine yeah that seems

1814
01:40:10,989 --> 01:40:14,500
fine so anyway we're gonna need to get

1815
01:40:12,939 --> 01:40:17,949
the direction where we're going to

1816
01:40:14,500 --> 01:40:19,119
encode this actual thing and we can get

1817
01:40:17,949 --> 01:40:20,019
rid of this because we're actually gonna

1818
01:40:19,119 --> 01:40:21,489
be casting in lots of different

1819
01:40:20,020 --> 01:40:23,530
directions now so we should be filling

1820
01:40:21,489 --> 01:40:26,979
in the map a little bit more completely

1821
01:40:23,529 --> 01:40:28,840
hopefully maybe for lucky anyway so then

1822
01:40:26,979 --> 01:40:32,079
we don't need to compute any of this

1823
01:40:28,840 --> 01:40:36,550
stuff I don't think we just have the

1824
01:40:32,079 --> 01:40:38,170
octahedral offset that we want to pass

1825
01:40:36,550 --> 01:40:41,020
and so now we just need to send spam

1826
01:40:38,170 --> 01:40:42,489
voxel the correct information so first

1827
01:40:41,020 --> 01:40:45,070
of all we need to know where we're gonna

1828
01:40:42,489 --> 01:40:47,769
do it and that's here we then need to

1829
01:40:45,069 --> 01:40:49,719
know like what the actual color was and

1830
01:40:47,770 --> 01:40:51,610
I think that's the transfer PPS is all

1831
01:40:49,720 --> 01:40:54,240
we really need to pass there we have the

1832
01:40:51,609 --> 01:40:59,679
light D which is like the distance and

1833
01:40:54,239 --> 01:41:04,689
so to do that to look at that we need to

1834
01:40:59,680 --> 01:41:08,890
know how far away it was right and we

1835
01:41:04,689 --> 01:41:11,559
actually have that information but it

1836
01:41:08,890 --> 01:41:16,060
looks like we never extract it so oh

1837
01:41:11,560 --> 01:41:18,820
well it's this right it's the T hit here

1838
01:41:16,060 --> 01:41:23,460
so if I just do a get component on T hit

1839
01:41:18,819 --> 01:41:26,199
I think we would be fine or sorry T ray

1840
01:41:23,460 --> 01:41:27,819
right so I think we just need to get

1841
01:41:26,199 --> 01:41:30,569
component on that and that's all we

1842
01:41:27,819 --> 01:41:30,569
would really need

1843
01:41:37,300 --> 01:41:42,320
so I think once we get that out we've

1844
01:41:39,739 --> 01:41:44,119
got our light D as well and then the

1845
01:41:42,319 --> 01:41:46,250
test case nonsense we're not really

1846
01:41:44,119 --> 01:41:50,090
using right now but we'll keep spamming

1847
01:41:46,250 --> 01:41:52,220
it to false so I think that should be

1848
01:41:50,090 --> 01:41:55,630
fine let me see what else we got here

1849
01:41:52,220 --> 01:41:58,130
debt component cannot convert argument

1850
01:41:55,630 --> 01:42:00,380
so I guess there isn't a get component

1851
01:41:58,130 --> 01:42:09,829
call for tier a I guess we're just meant

1852
01:42:00,380 --> 01:42:16,940
to do this is that right or just just

1853
01:42:09,829 --> 01:42:19,789
that and then light C in this case was a

1854
01:42:16,939 --> 01:42:23,679
typo cuz we just need the transfer PPS I

1855
01:42:19,789 --> 01:42:28,220
think missing any parameters here

1856
01:42:23,680 --> 01:42:31,340
solution location light C light D oh yes

1857
01:42:28,220 --> 01:42:35,360
and then our octahedral offset there we

1858
01:42:31,340 --> 01:42:37,430
go all right so I think that's all we

1859
01:42:35,359 --> 01:42:39,049
really need there but it's not actually

1860
01:42:37,430 --> 01:42:40,909
gonna work because we don't have any

1861
01:42:39,050 --> 01:42:44,920
blending right now for getting the

1862
01:42:40,909 --> 01:42:48,079
actual like the actual values we need

1863
01:42:44,920 --> 01:42:51,170
for moving the light around we don't

1864
01:42:48,079 --> 01:42:54,079
have a way of actually of making that

1865
01:42:51,170 --> 01:42:55,730
happen right so that part's not done yet

1866
01:42:54,079 --> 01:43:00,409
and so that's I think the only thing

1867
01:42:55,729 --> 01:43:02,089
that we're currently missing and that's

1868
01:43:00,409 --> 01:43:05,210
gonna be the voxel irradiance stuff so

1869
01:43:02,090 --> 01:43:07,520
if we look here here's where this is

1870
01:43:05,210 --> 01:43:09,500
happening compute voxel irradiance at is

1871
01:43:07,520 --> 01:43:13,880
saying I need you to tell me what the

1872
01:43:09,500 --> 01:43:17,060
light is that comes in here so this is

1873
01:43:13,880 --> 01:43:19,220
the actual part we care about and we're

1874
01:43:17,060 --> 01:43:21,950
mostly good but the problem that we have

1875
01:43:19,220 --> 01:43:24,619
here is this part right here this get

1876
01:43:21,949 --> 01:43:27,769
irradiance it doesn't do anything right

1877
01:43:24,619 --> 01:43:30,079
like if we if we put this in we're gonna

1878
01:43:27,770 --> 01:43:32,740
have to like we're kind of screwed here

1879
01:43:30,079 --> 01:43:35,930
right we need we need this thing to

1880
01:43:32,739 --> 01:43:37,880
actually do the lookups and we're gonna

1881
01:43:35,930 --> 01:43:41,570
want to try lerp on the actual lookup

1882
01:43:37,880 --> 01:43:44,180
right so basically what we need to do

1883
01:43:41,569 --> 01:43:47,899
here is find some way of doing these

1884
01:43:44,180 --> 01:43:49,459
lookups for each of these so when we do

1885
01:43:47,899 --> 01:43:52,698
the like cells blah blah blah

1886
01:43:49,458 --> 01:43:53,359
and we have the field here that's not

1887
01:43:52,698 --> 01:43:55,638
gonna cut it

1888
01:43:53,359 --> 01:43:59,238
right so the trailer please to actually

1889
01:43:55,639 --> 01:44:00,859
have this thing welded in and in order

1890
01:43:59,238 --> 01:44:03,649
to do that we're probably going to need

1891
01:44:00,859 --> 01:44:05,839
to like encapsulate that into a function

1892
01:44:03,649 --> 01:44:08,779
right so what we're probably going to

1893
01:44:05,840 --> 01:44:11,659
need to do here is make this trailer

1894
01:44:08,779 --> 01:44:16,158
call actually call something that will

1895
01:44:11,658 --> 01:44:20,839
do a plant that will do like a you know

1896
01:44:16,158 --> 01:44:23,719
that will do the the what's the word I'm

1897
01:44:20,840 --> 01:44:26,479
looking for here it'll actually do like

1898
01:44:23,719 --> 01:44:27,828
the texture sample now I don't think we

1899
01:44:26,479 --> 01:44:29,269
need to actually use this for a macro

1900
01:44:27,828 --> 01:44:33,590
because we can actually just do this in

1901
01:44:29,269 --> 01:44:34,099
v4s and call it a day so I think that'd

1902
01:44:33,590 --> 01:44:37,189
be fine

1903
01:44:34,099 --> 01:44:39,170
so we don't really have to know much we

1904
01:44:37,189 --> 01:44:43,789
can just start with our reflection

1905
01:44:39,170 --> 01:44:44,989
vector I guess although is it do we

1906
01:44:43,788 --> 01:44:48,069
actually care about the reflection

1907
01:44:44,988 --> 01:44:48,069
vector in this case

1908
01:44:55,779 --> 01:45:02,179
so in this case again I think we have a

1909
01:44:59,119 --> 01:45:04,250
problem of we need to sample we don't

1910
01:45:02,179 --> 01:45:06,199
want a sample specular lighting here we

1911
01:45:04,250 --> 01:45:11,510
want a sample diffuse light transmission

1912
01:45:06,198 --> 01:45:14,750
and so we kind of want a sort of a

1913
01:45:11,510 --> 01:45:17,659
smooth value of these things right we

1914
01:45:14,750 --> 01:45:23,029
want to take a look more at at the

1915
01:45:17,659 --> 01:45:28,010
average values in these areas and that's

1916
01:45:23,029 --> 01:45:31,250
gonna be a more confusing puzzle right

1917
01:45:28,010 --> 01:45:32,390
so let's talk about that for a second

1918
01:45:31,250 --> 01:45:34,429
because this is something that I'm not

1919
01:45:32,390 --> 01:45:36,710
sure and we should look at the paper as

1920
01:45:34,429 --> 01:45:37,969
well but let me just explain to you what

1921
01:45:36,710 --> 01:45:40,399
the problem is here

1922
01:45:37,969 --> 01:45:45,460
and maybe we should save this for next

1923
01:45:40,399 --> 01:45:45,460
weekend anyway but oops

1924
01:45:57,539 --> 01:46:02,500
so the problem that we're fundamentally

1925
01:45:59,770 --> 01:46:04,870
going to have here is that we've got an

1926
01:46:02,500 --> 01:46:06,819
octahedral map and I guess I'll use the

1927
01:46:04,869 --> 01:46:08,859
grid to slap that down we've got an

1928
01:46:06,819 --> 01:46:11,380
octahedral map here and it's got a

1929
01:46:08,859 --> 01:46:13,239
border region around it right but if

1930
01:46:11,380 --> 01:46:16,270
fundamentally it's 8 by 8 so it's it's

1931
01:46:13,239 --> 01:46:17,710
it's this grid exactly and what happens

1932
01:46:16,270 --> 01:46:19,180
is when we want to sample the light

1933
01:46:17,710 --> 01:46:20,619
coming from a particular direction well

1934
01:46:19,180 --> 01:46:22,360
we can sample it just by asking like

1935
01:46:20,619 --> 01:46:25,659
what's the light in this direction right

1936
01:46:22,359 --> 01:46:28,149
and what that corresponds to is we we

1937
01:46:25,659 --> 01:46:29,920
know given that this is an 8 by 8 what

1938
01:46:28,149 --> 01:46:33,069
we know is then if we were to look at a

1939
01:46:29,920 --> 01:46:39,430
sphere right so let's take our sphere

1940
01:46:33,069 --> 01:46:41,769
here if we were to look at a sphere we

1941
01:46:39,430 --> 01:46:44,530
know that like this you know

1942
01:46:41,770 --> 01:46:48,250
subsection so an octant of the sphere

1943
01:46:44,529 --> 01:46:52,050
here would map to an octant here right

1944
01:46:48,250 --> 01:46:56,380
so well sorry back to a quadrant here I

1945
01:46:52,050 --> 01:46:58,720
don't have a quadrant I'm not sure how

1946
01:46:56,380 --> 01:47:01,449
to say that but boy basically what I'm

1947
01:46:58,720 --> 01:47:04,630
saying is this right so a triangular

1948
01:47:01,449 --> 01:47:08,829
region here maps to a triangular octant

1949
01:47:04,630 --> 01:47:11,199
here right and so what's gonna happen is

1950
01:47:08,829 --> 01:47:13,269
when we need a sample something that's a

1951
01:47:11,199 --> 01:47:14,739
fairly specular light so something when

1952
01:47:13,270 --> 01:47:17,470
we're looking for just what's coming in

1953
01:47:14,739 --> 01:47:19,179
right at a particular angle right that's

1954
01:47:17,470 --> 01:47:20,560
gonna get we're just gonna look up in

1955
01:47:19,180 --> 01:47:22,869
here and say what's the light and we'll

1956
01:47:20,560 --> 01:47:24,550
just take a sample we're done right but

1957
01:47:22,869 --> 01:47:27,159
what happens when we want to know like

1958
01:47:24,550 --> 01:47:29,320
more more about like this entire region

1959
01:47:27,159 --> 01:47:30,819
of what's coming in because that's we're

1960
01:47:29,319 --> 01:47:32,949
gonna ask for diffuse lighting

1961
01:47:30,819 --> 01:47:35,649
transmission and in order to do that

1962
01:47:32,949 --> 01:47:37,389
we're talking about a huge area here so

1963
01:47:35,649 --> 01:47:41,019
we're really gonna want to do is sample

1964
01:47:37,390 --> 01:47:43,060
like an entire subsection estate we're

1965
01:47:41,020 --> 01:47:46,120
gonna want to take a big sample like

1966
01:47:43,060 --> 01:47:48,550
that and average all of the light that's

1967
01:47:46,119 --> 01:47:52,390
coming in and yeah really a ver Ajit's

1968
01:47:48,550 --> 01:47:54,010
cosine weighted in a sense but otherwise

1969
01:47:52,390 --> 01:47:59,079
more or less we're gonna try and take

1970
01:47:54,010 --> 01:48:01,270
that you know summation and so I don't

1971
01:47:59,079 --> 01:48:02,979
this is the part I'm not sure how they

1972
01:48:01,270 --> 01:48:04,300
intended to it to be done and I don't

1973
01:48:02,979 --> 01:48:08,229
know because we didn't really look at

1974
01:48:04,300 --> 01:48:10,849
the paper for that and so the question

1975
01:48:08,229 --> 01:48:13,308
is what would we do I mean the most

1976
01:48:10,849 --> 01:48:17,179
massive way is to actually step through

1977
01:48:13,309 --> 01:48:18,979
a wide area of this texture taking

1978
01:48:17,179 --> 01:48:21,078
individual samples and multiplying them

1979
01:48:18,979 --> 01:48:24,609
by the cosine fall-off not a

1980
01:48:21,078 --> 01:48:28,398
particularly great way to do it right

1981
01:48:24,609 --> 01:48:29,959
so I'm wondering is there some other way

1982
01:48:28,399 --> 01:48:32,059
that you were supposed to sample it now

1983
01:48:29,958 --> 01:48:34,938
one thing we could do is MIT this down

1984
01:48:32,059 --> 01:48:38,449
so let's suppose that we took our 8 by 8

1985
01:48:34,939 --> 01:48:41,269
and we did a pass every frame that takes

1986
01:48:38,448 --> 01:48:47,328
the 8 by 8 and we then smush it down to

1987
01:48:41,269 --> 01:48:50,510
like you know some tiny texture we're

1988
01:48:47,328 --> 01:48:53,628
now like the entire triangle before like

1989
01:48:50,510 --> 01:48:56,149
one whole quadrant is just this area

1990
01:48:53,628 --> 01:48:59,628
here right or this area here in that

1991
01:48:56,149 --> 01:49:00,949
case so we map that down and then we're

1992
01:48:59,628 --> 01:49:04,729
just saying look now we're just gonna

1993
01:49:00,948 --> 01:49:07,188
take one sample in the smaller map that

1994
01:49:04,729 --> 01:49:09,260
will average together a wide right that

1995
01:49:07,189 --> 01:49:13,969
one thing will bilinear filter a wide

1996
01:49:09,260 --> 01:49:15,498
range of the stuff and yeah it's not

1997
01:49:13,969 --> 01:49:20,059
exactly cosine weighted so it's not

1998
01:49:15,498 --> 01:49:23,029
great but it's something right and again

1999
01:49:20,059 --> 01:49:25,729
don't really know I don't know if that's

2000
01:49:23,029 --> 01:49:28,158
a smart thing to do or a stupid thing to

2001
01:49:25,729 --> 01:49:31,189
do I would say let's take a brief minute

2002
01:49:28,158 --> 01:49:33,819
and see if we take a gander at the paper

2003
01:49:31,189 --> 01:49:36,889
what do they think you should be doing

2004
01:49:33,819 --> 01:49:39,078
when you're sampling that map right and

2005
01:49:36,889 --> 01:49:40,309
hopefully they actually said you know a

2006
01:49:39,078 --> 01:49:42,768
lot of times papers that they'll just

2007
01:49:40,309 --> 01:49:44,809
skip over things sometimes so it's hard

2008
01:49:42,769 --> 01:49:47,510
to say but in this case we'll just hope

2009
01:49:44,809 --> 01:49:49,309
that they maybe documented that part so

2010
01:49:47,510 --> 01:49:50,989
if we take a look at that original paper

2011
01:49:49,309 --> 01:50:00,559
that we were looking at for octahedral

2012
01:49:50,988 --> 01:50:03,098
map diffuse lighting just take a look

2013
01:50:00,559 --> 01:50:03,099
here and see

2014
01:50:05,578 --> 01:50:07,639
you

2015
01:50:22,430 --> 01:50:26,610
let's see we computer a blah blah we can

2016
01:50:25,170 --> 01:50:28,470
also handle a direct illumination from

2017
01:50:26,609 --> 01:50:30,509
extended area light sources all right

2018
01:50:28,470 --> 01:50:38,730
this is not really what I wanted to know

2019
01:50:30,510 --> 01:50:40,409
but here we go we extend the original

2020
01:50:38,729 --> 01:50:42,539
vision we were waiting a scheme of blah

2021
01:50:40,409 --> 01:50:44,880
which we maybe might need to look at

2022
01:50:42,539 --> 01:50:46,199
because who knows if that talks about it

2023
01:50:44,880 --> 01:50:49,560
and they're just importing that here

2024
01:50:46,199 --> 01:50:51,119
right we modulate experience by space is

2025
01:50:49,560 --> 01:50:52,440
bringing diffuse surface albedo in order

2026
01:50:51,119 --> 01:50:54,090
to compute one bounce of indirect

2027
01:50:52,439 --> 01:50:56,579
outgoing to do so radio okay so we might

2028
01:50:54,090 --> 01:50:58,140
need look at that to compensate for the

2029
01:50:56,579 --> 01:50:59,550
fact that the incident abuse irradiance

2030
01:50:58,140 --> 01:51:01,470
at a parable occasion does not account

2031
01:50:59,550 --> 01:51:07,279
for local clusion well that's not really

2032
01:51:01,470 --> 01:51:07,280
what we're talking about I don't think

2033
01:51:34,038 --> 01:51:45,309
yes I don't really see I don't really

2034
01:51:41,658 --> 01:51:45,308
see anything here that talks about that

2035
01:51:45,609 --> 01:51:53,569
to be honest so we may want to look and

2036
01:51:48,800 --> 01:52:06,760
just see what is on one of these two

2037
01:51:53,569 --> 01:52:10,250
right I don't know if any of these are

2038
01:52:06,760 --> 01:52:19,989
more explicit look let's take a look at

2039
01:52:10,250 --> 01:52:19,988
say this one here

2040
01:52:28,859 --> 01:52:32,589
because they may just not bother talking

2041
01:52:31,270 --> 01:52:34,060
about it because hey they talked about

2042
01:52:32,590 --> 01:52:35,380
it in earlier paper so they're like look

2043
01:52:34,060 --> 01:52:37,420
if you want to know how we're sampling

2044
01:52:35,380 --> 01:52:39,460
the light probes for diffuse just look

2045
01:52:37,420 --> 01:52:41,399
at our earlier paper right so I'm gonna

2046
01:52:39,460 --> 01:52:44,310
save this one into our Doc's directory

2047
01:52:41,399 --> 01:52:50,349
in case we need to look at it again and

2048
01:52:44,310 --> 01:52:54,120
we'll see so looking in here let's see

2049
01:52:50,350 --> 01:52:59,710
light probe light field probe structure

2050
01:52:54,119 --> 01:53:04,119
implantation details let's see layer 2d

2051
01:52:59,710 --> 01:53:05,560
texture array for shading applications

2052
01:53:04,119 --> 01:53:07,180
of the pre filter the light field

2053
01:53:05,560 --> 01:53:09,100
radiance additionally storing a cosine

2054
01:53:07,180 --> 01:53:10,960
witness okay well that's literally what

2055
01:53:09,100 --> 01:53:12,700
I was just talking about additionally

2056
01:53:10,960 --> 01:53:14,649
storing a cosine weighted incident

2057
01:53:12,699 --> 01:53:19,000
irradiance probe for all possible

2058
01:53:14,649 --> 01:53:22,259
receiving surfaces at X that seems kind

2059
01:53:19,000 --> 01:53:22,260
of aggressive though

2060
01:53:29,989 --> 01:53:32,050
you

2061
01:53:36,329 --> 01:53:39,689
let's see

2062
01:54:03,750 --> 01:54:15,220
so I'm still not really seeing here we

2063
01:54:11,949 --> 01:54:21,000
go here we go here we go this is what we

2064
01:54:15,220 --> 01:54:23,130
want so let's take a look at this well

2065
01:54:21,000 --> 01:54:25,090
at least I think so

2066
01:54:23,130 --> 01:54:26,500
we're a speciality visual starts to

2067
01:54:25,090 --> 01:54:28,600
compute direct light using shadow maps

2068
01:54:26,500 --> 01:54:30,340
in a pixel shader exactly as we would

2069
01:54:28,600 --> 01:54:32,050
have expected then on the same vegetto

2070
01:54:30,340 --> 01:54:33,489
we're a trace to estimate indirect

2071
01:54:32,050 --> 01:54:35,140
lighting using a monocle integration and

2072
01:54:33,489 --> 01:54:36,340
we trace n random raise according to an

2073
01:54:35,140 --> 01:54:38,020
important sampling distribution each

2074
01:54:36,340 --> 01:54:39,579
returns a sample incident radiance

2075
01:54:38,020 --> 01:54:41,580
they filled with skilled samples and

2076
01:54:39,579 --> 01:54:43,659
neurosurgeon the integral covers right

2077
01:54:41,579 --> 01:54:45,039
name is Cris indirect effects of

2078
01:54:43,659 --> 01:54:46,630
aesthetically a second higher-order

2079
01:54:45,039 --> 01:54:51,460
alright

2080
01:54:46,630 --> 01:54:53,079
this is a more performance issue not

2081
01:54:51,460 --> 01:54:54,609
sure we care about that would reduce an

2082
01:54:53,079 --> 01:54:56,109
opposition suitable for deferred for a

2083
01:54:54,609 --> 01:55:04,929
rescue do you know it's estimate of

2084
01:54:56,109 --> 01:55:07,949
indirect incident all right the limber

2085
01:55:04,930 --> 01:55:07,950
shins the part we're wondering about

2086
01:55:12,529 --> 01:55:17,210
our indirect illumination past traces

2087
01:55:14,869 --> 01:55:19,069
one ray sampled from each of these with

2088
01:55:17,210 --> 01:55:21,250
cosine waiting erase the result to loss

2089
01:55:19,069 --> 01:55:24,619
too noisy Lamberson and glossy incident

2090
01:55:21,250 --> 01:55:27,020
radiance buffers for Lamberson

2091
01:55:24,619 --> 01:55:30,109
reflection uh hmm

2092
01:55:27,020 --> 01:55:33,140
alright we compute in-store integrated

2093
01:55:30,109 --> 01:55:37,609
incident irradiance instead of albedo

2094
01:55:33,140 --> 01:55:39,440
modulated outgoing radiance this allows

2095
01:55:37,609 --> 01:55:41,359
us to denoise our numerical estimate

2096
01:55:39,439 --> 01:55:43,250
without blurring her by saying okay we

2097
01:55:41,359 --> 01:55:45,049
denies the incident radiance in a second

2098
01:55:43,250 --> 01:55:46,550
pass with standard cross without any

2099
01:55:45,050 --> 01:55:47,690
predictive temporal filters okay we

2100
01:55:46,550 --> 01:55:48,110
don't care what that really at the

2101
01:55:47,689 --> 01:55:50,239
moment

2102
01:55:48,109 --> 01:55:51,559
Juvenal is hence the benefits of

2103
01:55:50,239 --> 01:55:52,789
separating Lamberson and glossary terms

2104
01:55:51,560 --> 01:55:55,850
got parents the emission term was often

2105
01:55:52,789 --> 01:55:58,189
noisier sure but also spatially slower

2106
01:55:55,850 --> 01:56:02,270
varying as a result okay yep

2107
01:55:58,189 --> 01:56:09,649
I'm with you so far after I'm practice

2108
01:56:02,270 --> 01:56:10,940
we all do new to okay raise the sample

2109
01:56:09,649 --> 01:56:12,409
umber in reflection capture less

2110
01:56:10,939 --> 01:56:14,359
information per pixel than glossy

2111
01:56:12,409 --> 01:56:15,800
samples ie compare the left side of the

2112
01:56:14,359 --> 01:56:18,799
figure K estimated a function that

2113
01:56:15,800 --> 01:56:20,150
varies more smoothly sure Lambert's are

2114
01:56:18,800 --> 01:56:23,840
more expensive to trace to their

2115
01:56:20,149 --> 01:56:25,429
incoherence okay essentially random

2116
01:56:23,840 --> 01:56:28,539
éclairs note however that complex

2117
01:56:25,430 --> 01:56:28,539
there's ability blah blah blah

2118
01:56:35,329 --> 01:56:40,409
so I mean this is the weird part here so

2119
01:56:38,279 --> 01:56:42,750
I don't really understand the cosine

2120
01:56:40,409 --> 01:56:44,760
filtered irradiance maps part because

2121
01:56:42,750 --> 01:56:47,640
what I'm trying to see how they're doing

2122
01:56:44,760 --> 01:56:49,920
is if I trace an individual ray out into

2123
01:56:47,640 --> 01:56:53,250
the world I only get back what's along

2124
01:56:49,920 --> 01:56:55,680
that Ray and that particular ray should

2125
01:56:53,250 --> 01:56:58,829
contribute to an entire hemispheres

2126
01:56:55,680 --> 01:57:01,409
worth of values in the irradiance map if

2127
01:56:58,829 --> 01:57:04,739
the irradiance map was already supposed

2128
01:57:01,409 --> 01:57:07,829
to capture the lambertian right that the

2129
01:57:04,739 --> 01:57:15,409
smooth hemisphere integral of a diffuse

2130
01:57:07,829 --> 01:57:18,180
you know reflectance and so how are they

2131
01:57:15,409 --> 01:57:21,180
blowing that out like how are they are

2132
01:57:18,180 --> 01:57:22,560
they doing a post pass on it to do that

2133
01:57:21,180 --> 01:57:24,930
or something

2134
01:57:22,560 --> 01:57:28,310
or how are they actually are they

2135
01:57:24,930 --> 01:57:31,860
writing to the entire 8x8 on every ray

2136
01:57:28,310 --> 01:57:35,550
with just whatever the Ray result was we

2137
01:57:31,859 --> 01:57:40,529
write back a splat it's actually

2138
01:57:35,550 --> 01:57:51,270
effectively right that's the part I'm

2139
01:57:40,529 --> 01:57:52,800
not sure I don't understand right so I

2140
01:57:51,270 --> 01:57:54,570
wish they would say that more directly

2141
01:57:52,800 --> 01:57:56,610
but it sounds like that's what they're

2142
01:57:54,569 --> 01:57:58,679
doing meaning on every ray it sounds

2143
01:57:56,609 --> 01:58:00,899
like they actually write back to a you

2144
01:57:58,680 --> 01:58:05,430
know a four by four or possibly even

2145
01:58:00,899 --> 01:58:07,670
larger inside the map which a we could

2146
01:58:05,430 --> 01:58:07,670
do

2147
01:58:18,878 --> 01:58:30,340
I mean it seems like that's what's going

2148
01:58:22,599 --> 01:58:31,538
on and you can see here their counselor

2149
01:58:30,340 --> 01:58:32,859
about so this is glossy sample

2150
01:58:31,538 --> 01:58:34,448
pre-filtering right it is tempting to

2151
01:58:32,859 --> 01:58:36,129
pre-filter the light filled prose by

2152
01:58:34,448 --> 01:58:38,108
constructing bitmap change to enable

2153
01:58:36,128 --> 01:58:39,458
cone tracing so if actually that would

2154
01:58:38,109 --> 01:58:41,709
eliminate the need for post filter and

2155
01:58:39,458 --> 01:58:43,958
glossy term however while it is trivial

2156
01:58:41,708 --> 01:58:45,188
to pre filter radiance maps the optimal

2157
01:58:43,958 --> 01:58:46,898
strategy for altering normal and

2158
01:58:45,189 --> 01:58:49,320
distance maps is not obvious sure that

2159
01:58:46,899 --> 01:58:49,320
makes sense

2160
01:58:54,658 --> 01:59:00,608
interesting here that they're talking

2161
01:58:56,288 --> 01:59:01,599
about the octahedral probes and saying

2162
01:59:00,609 --> 01:59:03,959
that circular monarchs might be

2163
01:59:01,599 --> 01:59:03,958
interesting

2164
01:59:13,319 --> 01:59:17,889
so I don't know I'm not quite sure I

2165
01:59:16,719 --> 01:59:19,809
think we'd have spend a little more time

2166
01:59:17,889 --> 01:59:21,429
reading this to really figure out what

2167
01:59:19,809 --> 01:59:22,630
they were doing there because hopefully

2168
01:59:21,429 --> 01:59:26,288
you can understand where my confusion

2169
01:59:22,630 --> 01:59:29,349
comes in it's just that I want to know

2170
01:59:26,288 --> 01:59:31,719
like I don't understand how they're

2171
01:59:29,349 --> 01:59:33,369
getting from a single race sample to

2172
01:59:31,719 --> 01:59:35,769
something that will actually affect a

2173
01:59:33,368 --> 01:59:39,399
number of directions in the octahedral

2174
01:59:35,769 --> 01:59:42,039
map right and so one way of doing that

2175
01:59:39,399 --> 01:59:43,388
is just producing the octahedral map and

2176
01:59:42,038 --> 01:59:45,340
then filtering it into something you can

2177
01:59:43,389 --> 01:59:48,099
use for that and then another way of

2178
01:59:45,340 --> 01:59:50,260
doing it is the opposite way round where

2179
01:59:48,099 --> 01:59:54,130
every time you cast array you just fill

2180
01:59:50,260 --> 01:59:56,260
it out into the correct place right and

2181
01:59:54,130 --> 02:00:03,279
I don't know I don't know which of those

2182
01:59:56,260 --> 02:00:05,409
two things they are doing it seems to me

2183
02:00:03,279 --> 02:00:11,998
that doing it in a single post Pass is

2184
02:00:05,408 --> 02:00:11,998
the most obvious thing to do to me

2185
02:00:22,149 --> 02:00:26,379
I mean that just seems like the thing

2186
02:00:24,310 --> 02:00:28,030
that would take the least bandwidth you

2187
02:00:26,380 --> 02:00:29,710
know so you'd write to the octahedral

2188
02:00:28,029 --> 02:00:31,779
map and then you'd have something that

2189
02:00:29,710 --> 02:00:34,480
just basically produces one octahedral

2190
02:00:31,779 --> 02:00:38,889
map form from another by basically you

2191
02:00:34,479 --> 02:00:42,149
know doing a read of a row writing it in

2192
02:00:38,890 --> 02:00:49,270
to the other row doing a read of a

2193
02:00:42,149 --> 02:00:55,269
column and writing it in that's the only

2194
02:00:49,270 --> 02:00:57,100
thing I can think of offhand so again

2195
02:00:55,270 --> 02:00:58,450
really not sure but it just seems like

2196
02:00:57,100 --> 02:01:00,789
we would have to do something like that

2197
02:00:58,449 --> 02:01:06,670
it's that that is the one part that to

2198
02:01:00,789 --> 02:01:09,760
me seems like I don't know what we would

2199
02:01:06,670 --> 02:01:12,039
do there and again

2200
02:01:09,760 --> 02:01:18,430
like maybe I'm just missing something

2201
02:01:12,039 --> 02:01:19,810
but it seems like yeah the other problem

2202
02:01:18,430 --> 02:01:22,420
that I think we would have there is

2203
02:01:19,810 --> 02:01:26,110
again if we move the entire thing to the

2204
02:01:22,420 --> 02:01:28,000
GPU which maybe we'll do then it's a

2205
02:01:26,109 --> 02:01:29,710
little bit easier because we have that

2206
02:01:28,000 --> 02:01:32,229
map available so that we can use it

2207
02:01:29,710 --> 02:01:33,189
while we're doing ray tracing but the

2208
02:01:32,229 --> 02:01:34,750
other thing that's a little bit annoying

2209
02:01:33,189 --> 02:01:35,979
is that if we built that map like

2210
02:01:34,750 --> 02:01:37,479
normally the weight place we would want

2211
02:01:35,979 --> 02:01:39,339
to build that down filtered map would be

2212
02:01:37,479 --> 02:01:43,659
on the GPU I'd want to just do the down

2213
02:01:39,340 --> 02:01:45,670
sampling on the actual GPU itself but I

2214
02:01:43,659 --> 02:01:48,550
don't actually know in this case if that

2215
02:01:45,670 --> 02:01:49,720
would work on our scheme because we

2216
02:01:48,550 --> 02:01:52,000
don't have a way to get it back from the

2217
02:01:49,720 --> 02:02:03,699
GPU and we do the ray tracing on the CPU

2218
02:01:52,000 --> 02:02:05,649
side right so again it seems it just

2219
02:02:03,699 --> 02:02:07,899
seems a little dicey I don't know where

2220
02:02:05,649 --> 02:02:11,019
to go with it and the problem too is

2221
02:02:07,899 --> 02:02:13,000
that using the mipmap version seems a

2222
02:02:11,020 --> 02:02:16,000
little dangerous because the mipmap

2223
02:02:13,000 --> 02:02:17,829
version is not cosine weighted it would

2224
02:02:16,000 --> 02:02:20,979
just be because you can't because you

2225
02:02:17,829 --> 02:02:22,750
omit map is the MIT map you can't have

2226
02:02:20,979 --> 02:02:24,039
it be cosine waited for each particular

2227
02:02:22,750 --> 02:02:28,479
direction because it would be a

2228
02:02:24,039 --> 02:02:31,979
different thing in each direction so I'm

2229
02:02:28,479 --> 02:02:54,988
not sure what you do about

2230
02:02:31,979 --> 02:02:56,339
I don't know I'm gonna leave that for

2231
02:02:54,988 --> 02:02:58,319
next weekend we're gonna to think about

2232
02:02:56,340 --> 02:03:01,289
that but that's the biggest problem that

2233
02:02:58,319 --> 02:03:03,809
I see in the scheme so far is it's

2234
02:03:01,289 --> 02:03:06,810
basically how do we produce a map for

2235
02:03:03,810 --> 02:03:09,239
the diffuse because while we can pretty

2236
02:03:06,810 --> 02:03:13,739
easily use what we already have we don't

2237
02:03:09,238 --> 02:03:15,269
have that secondary map right and so you

2238
02:03:13,738 --> 02:03:17,699
know like I said one way to do it would

2239
02:03:15,270 --> 02:03:20,280
be very expensive like if we did the

2240
02:03:17,699 --> 02:03:22,920
full version that that I mean just to

2241
02:03:20,279 --> 02:03:28,559
give an example if we were doing this

2242
02:03:22,920 --> 02:03:35,310
from the actual diffuse map version it

2243
02:03:28,560 --> 02:03:37,550
just seems really dicey right so yeah if

2244
02:03:35,310 --> 02:03:43,260
you imagine like a sample in this thing

2245
02:03:37,550 --> 02:03:53,670
so we do Lightsey you know it just it

2246
02:03:43,260 --> 02:03:55,890
just looked like this right so this

2247
02:03:53,670 --> 02:03:59,539
would not be that bad right it would

2248
02:03:55,890 --> 02:03:59,539
just be something looks like this

2249
02:04:07,350 --> 02:04:11,260
so we would first take ok what's the

2250
02:04:10,060 --> 02:04:13,960
direction we're actually trying to

2251
02:04:11,260 --> 02:04:15,730
sample in and then we would say what

2252
02:04:13,960 --> 02:04:21,789
that actual bounces oops I accidentally

2253
02:04:15,729 --> 02:04:26,049
deleted something I needed there didn't

2254
02:04:21,789 --> 02:04:27,310
mean to do that so this would be pretty

2255
02:04:26,050 --> 02:04:32,340
straightforward right we would just

2256
02:04:27,310 --> 02:04:39,130
compute our txt y-values by doing the

2257
02:04:32,340 --> 02:04:48,100
the octahedral offset right so that's

2258
02:04:39,130 --> 02:04:50,529
the direction we're looking in so here's

2259
02:04:48,100 --> 02:04:52,600
the actual values we want here's where

2260
02:04:50,529 --> 02:04:55,500
we're gonna look them up right so this

2261
02:04:52,600 --> 02:04:58,180
would be it this is all we would need

2262
02:04:55,500 --> 02:05:06,489
right that would just do it that would

2263
02:04:58,180 --> 02:05:08,260
just work move this up a bit though so

2264
02:05:06,489 --> 02:05:08,710
that would be fine and I have no problem

2265
02:05:08,260 --> 02:05:10,960
with that

2266
02:05:08,710 --> 02:05:14,380
the problem again is how do we actually

2267
02:05:10,960 --> 02:05:17,909
look this up right because this thing is

2268
02:05:14,380 --> 02:05:20,890
now the wrong like that's the specular

2269
02:05:17,909 --> 02:05:23,109
that's the specular value right and we

2270
02:05:20,890 --> 02:05:25,539
don't want the specular value we want

2271
02:05:23,109 --> 02:05:27,609
the diffuse value and so what we're

2272
02:05:25,539 --> 02:05:29,470
effectively doing here is is bouncing

2273
02:05:27,609 --> 02:05:31,019
around specular lights and that's not

2274
02:05:29,470 --> 02:05:33,880
going to do anyone any favors

2275
02:05:31,020 --> 02:05:36,010
and we can debug this just fine but it's

2276
02:05:33,880 --> 02:05:38,260
not good like we need the actual diffuse

2277
02:05:36,010 --> 02:05:41,289
light so what we don't have is a way of

2278
02:05:38,260 --> 02:05:43,000
mapping this light C value to a light

2279
02:05:41,289 --> 02:05:46,000
diffusive alyou basically which is a

2280
02:05:43,000 --> 02:05:50,739
blurring a cosine weighted blur of this

2281
02:05:46,000 --> 02:05:52,689
thing and it would depend on direction

2282
02:05:50,739 --> 02:05:56,710
so I don't know I have to think about

2283
02:05:52,689 --> 02:06:01,659
what that entails exactly but that's the

2284
02:05:56,710 --> 02:06:03,489
issue we've got right so we'll have to

2285
02:06:01,659 --> 02:06:05,470
think about that I'm fine with ending

2286
02:06:03,489 --> 02:06:08,559
here for today I'm gonna go ahead and

2287
02:06:05,470 --> 02:06:13,050
close this down but that's that's where

2288
02:06:08,560 --> 02:06:13,050
we're at right which is not horrible

2289
02:06:18,560 --> 02:06:25,380
right it's not it's not that bad but

2290
02:06:22,800 --> 02:06:26,610
it's it's still like a little bit of an

2291
02:06:25,380 --> 02:06:30,900
unknown so let's go ahead and go to a

2292
02:06:26,609 --> 02:06:32,460
brief Q&amp;A and and let's let's just

2293
02:06:30,899 --> 02:06:34,409
assume that next weekend that's our task

2294
02:06:32,460 --> 02:06:36,600
is to figure out a solid answer for that

2295
02:06:34,409 --> 02:06:39,119
and then we can start debugging going

2296
02:06:36,600 --> 02:06:40,410
forward and by the way we could debug

2297
02:06:39,119 --> 02:06:42,059
that using our other stuff as well

2298
02:06:40,409 --> 02:06:44,099
because then we could just change to

2299
02:06:42,060 --> 02:06:46,380
using a diffuse pass there and verify

2300
02:06:44,100 --> 02:06:49,219
that that worked in addition to the

2301
02:06:46,380 --> 02:06:49,219
specular right

2302
02:07:49,630 --> 02:07:54,230
is the diffuse component gonna be

2303
02:07:51,739 --> 02:07:56,529
computed on the GPU of the GPU then well

2304
02:07:54,229 --> 02:07:59,239
we don't know I mean the problem is I

2305
02:07:56,529 --> 02:08:01,009
think it has to compute it on the CPU

2306
02:07:59,239 --> 02:08:02,479
unless we move the whole thing to the

2307
02:08:01,010 --> 02:08:05,989
GPU and the reason for that is because

2308
02:08:02,479 --> 02:08:12,399
in order to do the raycasting we need to

2309
02:08:05,989 --> 02:08:15,199
sample the diffuse component right so

2310
02:08:12,399 --> 02:08:20,179
I'm pretty sure that's really their only

2311
02:08:15,199 --> 02:08:22,460
option because we can't get it back from

2312
02:08:20,180 --> 02:08:33,380
the GPU I mean we could we could start

2313
02:08:22,460 --> 02:08:34,460
round-tripping it but still since

2314
02:08:33,380 --> 02:08:35,840
hardware standards we've quickly had

2315
02:08:34,460 --> 02:08:37,520
considered doing a pass on the code base

2316
02:08:35,840 --> 02:08:40,940
to move to newer versions of OpenGL and

2317
02:08:37,520 --> 02:08:42,440
SSE I don't think there's any newer

2318
02:08:40,939 --> 02:08:46,699
versions of SSE we could actually use

2319
02:08:42,439 --> 02:08:50,059
reliably I mean I guess we could go to

2320
02:08:46,699 --> 02:08:51,529
SSE for but I don't think there's much

2321
02:08:50,060 --> 02:08:52,400
optimization really that I don't think

2322
02:08:51,529 --> 02:08:55,099
there's that much there that we really

2323
02:08:52,399 --> 02:08:56,149
needed it wouldn't really impact our

2324
02:08:55,100 --> 02:08:58,579
code much at all I don't think at the

2325
02:08:56,149 --> 02:09:03,409
moment we certainly can't use avx2

2326
02:08:58,579 --> 02:09:06,260
that's not available everywhere as for

2327
02:09:03,409 --> 02:09:08,269
moving up a version of OpenGL again at

2328
02:09:06,260 --> 02:09:09,980
the moment don't really need it for

2329
02:09:08,270 --> 02:09:12,620
anything in particular so probably not

2330
02:09:09,979 --> 02:09:14,839
but if we had something that we really

2331
02:09:12,619 --> 02:09:16,640
needed we could consider it but again

2332
02:09:14,840 --> 02:09:17,869
pass on the code base not really

2333
02:09:16,640 --> 02:09:19,850
necessary like these are really minor

2334
02:09:17,869 --> 02:09:22,099
issues right they just don't affect

2335
02:09:19,850 --> 02:09:24,500
things that much if we could go to an

2336
02:09:22,100 --> 02:09:26,270
entire other vector with maybe but we

2337
02:09:24,500 --> 02:09:28,659
can't we have to stay with four-wide at

2338
02:09:26,270 --> 02:09:28,660
the moment

2339
02:09:55,838 --> 02:10:00,158
Curnow pineal is like three point

2340
02:09:58,149 --> 02:10:04,088
whatever three point two or something

2341
02:10:00,158 --> 02:10:06,279
like that and so there's there's not

2342
02:10:04,088 --> 02:10:09,729
really like we don't really need very

2343
02:10:06,279 --> 02:10:12,158
much from open jail like it's just not

2344
02:10:09,729 --> 02:10:15,069
super integral to what we're doing

2345
02:10:12,158 --> 02:10:16,418
so we don't really have to use much more

2346
02:10:15,069 --> 02:10:23,139
than the basic programmable shaders

2347
02:10:16,418 --> 02:10:24,760
which we're using right so as for the

2348
02:10:23,139 --> 02:10:26,260
current version that's available I don't

2349
02:10:24,760 --> 02:10:28,739
know if five is available now it

2350
02:10:26,260 --> 02:10:28,739
probably is

2351
02:10:38,059 --> 02:10:42,389
do the papers say they compute a

2352
02:10:40,920 --> 02:10:43,498
separate cosine weighted radiance for

2353
02:10:42,389 --> 02:10:46,229
every probe where do they say that

2354
02:10:43,498 --> 02:10:47,908
information yeah again I think we need

2355
02:10:46,229 --> 02:10:50,690
to go read the paper carefully which

2356
02:10:47,908 --> 02:10:53,549
maybe I'll do in the intervening week

2357
02:10:50,689 --> 02:10:57,268
because it sure sounded like that it

2358
02:10:53,550 --> 02:11:01,458
sounded like they computed two maps one

2359
02:10:57,269 --> 02:11:06,869
that was the octahedral map of the

2360
02:11:01,458 --> 02:11:10,679
glassy so not Lamberson and one that was

2361
02:11:06,868 --> 02:11:15,958
the cosine weighted Lamberson map right

2362
02:11:10,679 --> 02:11:18,090
and at least in the paper we were

2363
02:11:15,958 --> 02:11:18,689
originally reading it only showed two

2364
02:11:18,090 --> 02:11:23,090
maps

2365
02:11:18,689 --> 02:11:31,198
it showed a depth map and a single

2366
02:11:23,090 --> 02:11:33,059
octahedral irradiance map so and again

2367
02:11:31,198 --> 02:11:34,228
this would probably be clearer to us if

2368
02:11:33,059 --> 02:11:35,760
we actually went through and read the

2369
02:11:34,229 --> 02:11:37,949
paper like it normally takes a few hours

2370
02:11:35,760 --> 02:11:40,199
to read through a paper carefully and we

2371
02:11:37,948 --> 02:11:41,518
don't do that on the stream so my

2372
02:11:40,198 --> 02:11:43,348
assumption is this would not be

2373
02:11:41,519 --> 02:11:45,329
confusing to us if we actually sat down

2374
02:11:43,349 --> 02:11:48,029
and read the paper proper like in

2375
02:11:45,328 --> 02:11:49,380
silence together right which maybe we

2376
02:11:48,029 --> 02:11:51,929
should do a stream where we all sit and

2377
02:11:49,380 --> 02:11:54,260
read the paper carefully but you see

2378
02:11:51,929 --> 02:11:54,260
what I mean

2379
02:11:57,960 --> 02:12:00,020
you

2380
02:12:09,649 --> 02:12:14,099
any pointers on reading research papers

2381
02:12:12,029 --> 02:12:16,409
effectively not really I mean just take

2382
02:12:14,100 --> 02:12:18,450
your time and read them carefully and

2383
02:12:16,409 --> 02:12:22,260
slowly work through the equations

2384
02:12:18,449 --> 02:12:24,059
yourself on a separate sheet of paper or

2385
02:12:22,260 --> 02:12:26,310
using a computer algebra system to help

2386
02:12:24,060 --> 02:12:27,660
you because I find that a lot of times

2387
02:12:26,310 --> 02:12:28,770
it's tempting to just blow past the

2388
02:12:27,659 --> 02:12:36,470
equations but then you have no idea what

2389
02:12:28,770 --> 02:12:39,270
the heck it's talking about so and yes

2390
02:12:36,470 --> 02:12:40,829
this is that was a research paper that's

2391
02:12:39,270 --> 02:12:42,960
that would be considered just a research

2392
02:12:40,829 --> 02:12:44,930
paper research paper is just any paper

2393
02:12:42,960 --> 02:12:47,550
by researchers right I mean there's no

2394
02:12:44,930 --> 02:12:49,170
technical definition for it some are

2395
02:12:47,550 --> 02:12:51,630
extremely hardcore and have a lot of

2396
02:12:49,170 --> 02:12:54,029
like technical stuff in them others are

2397
02:12:51,630 --> 02:12:55,739
like super fluffy and are like more just

2398
02:12:54,029 --> 02:13:01,439
like almost an opinion right so there

2399
02:12:55,738 --> 02:13:04,019
isn't like a there isn't like a a real

2400
02:13:01,439 --> 02:13:05,699
metric for does this qualify as a

2401
02:13:04,020 --> 02:13:08,430
research paper like they're all research

2402
02:13:05,699 --> 02:13:10,079
papers that's just a generic term it's a

2403
02:13:08,430 --> 02:13:11,730
paper where somebody's publishing some

2404
02:13:10,079 --> 02:13:14,699
research they did and that research may

2405
02:13:11,729 --> 02:13:17,789
suck or it may be awesome or it may be

2406
02:13:14,699 --> 02:13:19,738
super technical or very basic but it's

2407
02:13:17,789 --> 02:13:21,420
still a research paper it hasn't it's

2408
02:13:19,738 --> 02:13:26,429
not a statement about the quality it is

2409
02:13:21,420 --> 02:13:28,079
a statement about what it is Journal of

2410
02:13:26,430 --> 02:13:32,300
fluffy opinion papers they have those

2411
02:13:28,079 --> 02:13:32,300
it's called a liberal arts journal

2412
02:13:58,208 --> 02:14:05,269
alright let me go ahead and wrap it up

2413
02:14:01,069 --> 02:14:06,228
here alright everyone thank you for

2414
02:14:05,269 --> 02:14:07,429
joining me for this episode I had made

2415
02:14:06,229 --> 02:14:10,130
here oh it's a pleasure coding with you

2416
02:14:07,429 --> 02:14:13,340
as always I think we're down to one

2417
02:14:10,130 --> 02:14:15,498
final unknown thing in the lighting

2418
02:14:13,340 --> 02:14:17,029
system here we've got bugs that we're

2419
02:14:15,498 --> 02:14:18,139
gonna have to do and we got performance

2420
02:14:17,029 --> 02:14:20,748
stuff we're gonna have to do for sure

2421
02:14:18,139 --> 02:14:22,550
but I think we're down to just one more

2422
02:14:20,748 --> 02:14:23,929
thing where we're not quite clear on how

2423
02:14:22,550 --> 02:14:26,389
this would work and that's just how

2424
02:14:23,929 --> 02:14:30,679
we're gonna do the conversion from light

2425
02:14:26,389 --> 02:14:32,779
samples to diffuse which is some kind of

2426
02:14:30,679 --> 02:14:35,118
a down sampling operation basically and

2427
02:14:32,779 --> 02:14:36,590
we'd like to know what we're doing we'd

2428
02:14:35,118 --> 02:14:38,268
like to have some idea of what the

2429
02:14:36,590 --> 02:14:40,639
original intent was behind that paper

2430
02:14:38,269 --> 02:14:42,889
for example before we go do something

2431
02:14:40,639 --> 02:14:44,359
ourselves we could make something up but

2432
02:14:42,889 --> 02:14:46,519
it'd be nice to know what at least was

2433
02:14:44,359 --> 02:14:48,978
intended before we make something up so

2434
02:14:46,519 --> 02:14:50,389
we may do a little investigation there

2435
02:14:48,979 --> 02:14:51,800
but otherwise that's the main thing

2436
02:14:50,389 --> 02:14:53,958
we're gonna have to do next weekend

2437
02:14:51,800 --> 02:14:56,689
that's gonna be our big chore we can do

2438
02:14:53,958 --> 02:14:58,398
that without the ray convection stuff we

2439
02:14:56,689 --> 02:15:00,739
can actually just regress we can turn

2440
02:14:58,399 --> 02:15:04,789
off that go back to our sphere sampling

2441
02:15:00,738 --> 02:15:06,799
even and still do that diffuse pass on

2442
02:15:04,788 --> 02:15:07,938
it so we should have an easy time

2443
02:15:06,800 --> 02:15:10,399
getting ourselves in a test

2444
02:15:07,939 --> 02:15:11,719
configuration for that but yeah that's

2445
02:15:10,399 --> 02:15:13,760
the thing we're gonna have to figure out

2446
02:15:11,719 --> 02:15:14,929
and I'm not sure exactly what that

2447
02:15:13,760 --> 02:15:17,389
should look like so we'll have to take a

2448
02:15:14,929 --> 02:15:18,979
look at that hope you see you back here

2449
02:15:17,389 --> 02:15:20,899
next week for that until then everyone

2450
02:15:18,979 --> 02:15:24,550
have fun programming and I will see you

2451
02:15:20,899 --> 02:15:24,550
on the Internet take it easy everybody

