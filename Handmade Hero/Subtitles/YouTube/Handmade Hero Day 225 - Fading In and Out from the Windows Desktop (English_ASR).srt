1
00:00:01,700 --> 00:00:05,129
hello everyone and welcome to handmade

2
00:00:03,810 --> 00:00:07,439
hero the show we could a complete game

3
00:00:05,129 --> 00:00:10,320
live on stream we are coming off of a

4
00:00:07,440 --> 00:00:11,609
week where we implemented cutscenes we

5
00:00:10,320 --> 00:00:13,620
put basically our intro cutscene

6
00:00:11,609 --> 00:00:15,419
together and it looked pretty darn

7
00:00:13,619 --> 00:00:17,759
snappy i was very happy with it i

8
00:00:15,419 --> 00:00:21,149
thought it was really exciting to see

9
00:00:17,760 --> 00:00:24,840
all of that coming together and at the

10
00:00:21,149 --> 00:00:27,329
very end of last week friday in the Q&amp;A

11
00:00:24,839 --> 00:00:31,528
i think it might have been midlo that

12
00:00:27,329 --> 00:00:33,390
asked the question can we fade out the

13
00:00:31,528 --> 00:00:34,590
desktop and I was sort of throwing

14
00:00:33,390 --> 00:00:36,179
together really quickly a way to make

15
00:00:34,590 --> 00:00:38,250
that happen but I didn't have time to

16
00:00:36,179 --> 00:00:39,479
actually do it so was thinking we might

17
00:00:38,250 --> 00:00:40,710
do today is just quickly take a look at

18
00:00:39,479 --> 00:00:42,509
that and see if I can get that working

19
00:00:40,710 --> 00:00:43,799
for him is not something we will do for

20
00:00:42,509 --> 00:00:46,920
handmade hero but it's just you know

21
00:00:43,799 --> 00:00:48,209
it's a reasonable question and it seems

22
00:00:46,920 --> 00:00:49,500
like the least we can do for someone who

23
00:00:48,210 --> 00:00:54,329
spent so much time making a great

24
00:00:49,500 --> 00:00:58,198
episode guide for handmade hero so let's

25
00:00:54,329 --> 00:01:00,719
take a look today is day 2 25 so if you

26
00:00:58,198 --> 00:01:02,460
pre-order the game on handmade heroic

27
00:01:00,719 --> 00:01:04,019
and downloaded the source code you want

28
00:01:02,460 --> 00:01:07,859
to start with day 2 24's source code

29
00:01:04,019 --> 00:01:12,780
that's where i'm starting today let's go

30
00:01:07,859 --> 00:01:16,438
ahead and bring that up here and see

31
00:01:12,780 --> 00:01:18,689
what we can do all right so here we are

32
00:01:16,438 --> 00:01:22,500
I believe we were in win32 handmade so

33
00:01:18,688 --> 00:01:24,419
that's right here and what we did is we

34
00:01:22,500 --> 00:01:25,590
had a little fade out function i was

35
00:01:24,420 --> 00:01:27,090
going to hack together and again i'm not

36
00:01:25,590 --> 00:01:28,320
trying to do a super industrial-strength

37
00:01:27,090 --> 00:01:31,978
brainless i just want to kind of show

38
00:01:28,319 --> 00:01:33,629
what the idea was now Martin's mosaico

39
00:01:31,978 --> 00:01:36,569
who often answers questions on the

40
00:01:33,629 --> 00:01:39,420
forums he reminded me on Twitter that I

41
00:01:36,569 --> 00:01:42,569
already covered how to do this a little

42
00:01:39,420 --> 00:01:44,509
more simply earlier on and I forgot

43
00:01:42,569 --> 00:01:46,798
about it entirely but but that's true

44
00:01:44,509 --> 00:01:48,930
instead of using update layered window

45
00:01:46,799 --> 00:01:50,759
we can actually use the set layer window

46
00:01:48,930 --> 00:01:53,460
parameters with you remember way back I

47
00:01:50,759 --> 00:01:57,718
showed how to do this let me look it up

48
00:01:53,459 --> 00:02:00,030
here it's like yeah set layered window

49
00:01:57,718 --> 00:02:02,069
attributes this one here I showed how to

50
00:02:00,030 --> 00:02:03,899
use this completely forgot about the

51
00:02:02,069 --> 00:02:05,368
function my brains old I don't use these

52
00:02:03,899 --> 00:02:07,290
functions very often anymore so I was

53
00:02:05,368 --> 00:02:09,479
just like poof apparently i knew it

54
00:02:07,290 --> 00:02:11,640
earlier on but fortunately martin's was

55
00:02:09,479 --> 00:02:12,330
there to remember so thank you very much

56
00:02:11,639 --> 00:02:15,839
for that

57
00:02:12,330 --> 00:02:17,070
other things thank you for basically

58
00:02:15,840 --> 00:02:18,990
answering everyone's questions on the

59
00:02:17,069 --> 00:02:21,989
forums all the time which is actually

60
00:02:18,990 --> 00:02:23,580
what Martin's often does so anyway let's

61
00:02:21,990 --> 00:02:24,659
take a look at this guy and I'm going to

62
00:02:23,580 --> 00:02:26,490
see if I can hack this together and I

63
00:02:24,659 --> 00:02:27,930
remember what we did is we wanted to

64
00:02:26,490 --> 00:02:29,400
fade out the background and what I said

65
00:02:27,930 --> 00:02:30,240
might be the most compatible way to do

66
00:02:29,400 --> 00:02:31,800
it because there's different ways you

67
00:02:30,240 --> 00:02:34,170
could do it I think maybe the most

68
00:02:31,800 --> 00:02:35,640
compatible way to probably do it would

69
00:02:34,169 --> 00:02:39,269
be just create a full screen window

70
00:02:35,639 --> 00:02:42,029
that's transparent but black and then

71
00:02:39,270 --> 00:02:46,350
gradually increase its opacity until the

72
00:02:42,030 --> 00:02:49,080
point where we can actually see it blot

73
00:02:46,349 --> 00:02:50,430
out the background so I'm going to try

74
00:02:49,080 --> 00:02:52,380
that I don't know if it'll work but I'm

75
00:02:50,430 --> 00:02:53,819
just going to try that here to see if

76
00:02:52,379 --> 00:02:56,669
that gives us a reasonable effect and

77
00:02:53,819 --> 00:02:58,169
then we can go from there so I'm going

78
00:02:56,669 --> 00:03:00,989
to skip this part hopefully we don't

79
00:02:58,169 --> 00:03:02,849
have to do it again i'm not sure we may

80
00:03:00,990 --> 00:03:05,040
or may not i'm going to try using set

81
00:03:02,849 --> 00:03:07,229
layered window and see what i can do so

82
00:03:05,039 --> 00:03:08,669
there's our blend function and all that

83
00:03:07,229 --> 00:03:10,259
sort of thing i'm going to call set

84
00:03:08,669 --> 00:03:12,239
layered window you can see that what it

85
00:03:10,259 --> 00:03:15,090
has here is it takes the the H wind

86
00:03:12,240 --> 00:03:16,500
right and that H wind we already know is

87
00:03:15,090 --> 00:03:19,229
the one that we just created for this

88
00:03:16,500 --> 00:03:21,000
specific purpose right then we've got a

89
00:03:19,229 --> 00:03:23,759
CR key which is the color key now

90
00:03:21,000 --> 00:03:25,949
presumably that's not necessary because

91
00:03:23,759 --> 00:03:27,780
again that's not going to be in our

92
00:03:25,949 --> 00:03:30,780
alpha function this this blend function

93
00:03:27,780 --> 00:03:32,250
is presumably not going to actually need

94
00:03:30,780 --> 00:03:34,259
that because you can see we could

95
00:03:32,250 --> 00:03:36,870
specify it right here so we're going to

96
00:03:34,259 --> 00:03:41,359
do lw8 alpha instead of LW a color key

97
00:03:36,870 --> 00:03:45,539
right so I'm going to grab that out lwa

98
00:03:41,360 --> 00:03:47,459
alpha and oops it's no good and then I

99
00:03:45,539 --> 00:03:50,459
just need to specify these this this

100
00:03:47,459 --> 00:03:52,349
this byte alpha value here so this color

101
00:03:50,459 --> 00:03:54,150
rep I think like before it just can be

102
00:03:52,349 --> 00:03:56,400
anything and so really all we need to do

103
00:03:54,150 --> 00:03:59,730
is specify that bite and we'll see how

104
00:03:56,400 --> 00:04:03,269
that goes ok and I'm going to sleep for

105
00:03:59,729 --> 00:04:05,189
less time there ok so what I want to do

106
00:04:03,269 --> 00:04:07,439
here this alpha value that we specify

107
00:04:05,189 --> 00:04:09,659
it's used to describe the opacity right

108
00:04:07,439 --> 00:04:12,030
so when it's zero is transparent when

109
00:04:09,659 --> 00:04:14,459
it's 225 Sr pig so I should be able to

110
00:04:12,030 --> 00:04:16,620
do is just set it to whatever we're

111
00:04:14,459 --> 00:04:18,209
setting the Alpha value here too and

112
00:04:16,620 --> 00:04:20,459
hopefully that will do something

113
00:04:18,209 --> 00:04:21,959
resembling something I don't actually

114
00:04:20,459 --> 00:04:24,600
know if it will but we're going to find

115
00:04:21,959 --> 00:04:25,620
out so let's see what we get here and if

116
00:04:24,600 --> 00:04:28,439
that Abu

117
00:04:25,620 --> 00:04:31,019
I guess I still have the bugger running

118
00:04:28,439 --> 00:04:36,329
or something here let's go ahead and fix

119
00:04:31,019 --> 00:04:41,129
that see oh yeah gotta actually cast

120
00:04:36,329 --> 00:04:42,750
that to a bite there we go okay um so

121
00:04:41,129 --> 00:04:44,279
yeah that looks exactly what I would

122
00:04:42,750 --> 00:04:47,579
have expected so thank you Martin's

123
00:04:44,279 --> 00:04:50,339
reminding me that saved us a ton of time

124
00:04:47,579 --> 00:04:54,629
so yeah so this should do the fade out

125
00:04:50,339 --> 00:04:56,429
now I suspect right although that I

126
00:04:54,629 --> 00:04:58,439
suppose was a little too fast I admit

127
00:04:56,430 --> 00:05:03,569
that so we need a little bit let's do a

128
00:04:58,439 --> 00:05:06,000
sleep one here there we go so that's a

129
00:05:03,569 --> 00:05:09,240
fade out for you and so what all we

130
00:05:06,000 --> 00:05:11,579
really need to do now in order to sort

131
00:05:09,240 --> 00:05:19,069
of have that fade work a little more

132
00:05:11,579 --> 00:05:22,620
appropriately is we're going to want to

133
00:05:19,069 --> 00:05:25,860
like this this sleep right this is not

134
00:05:22,620 --> 00:05:28,379
really a reasonable way to do timing

135
00:05:25,860 --> 00:05:31,259
right because it's very variable it's

136
00:05:28,379 --> 00:05:33,120
not a guaranteed amount of time you know

137
00:05:31,259 --> 00:05:35,699
we can't just put something in there and

138
00:05:33,120 --> 00:05:38,340
say oh I want this as 60 frames a second

139
00:05:35,699 --> 00:05:41,788
so do sleep 16 you know that doesn't

140
00:05:38,339 --> 00:05:44,939
necessarily guarantee the proper amount

141
00:05:41,788 --> 00:05:46,409
of time right that might be how fast it

142
00:05:44,939 --> 00:05:48,598
is on this machine it might be totally

143
00:05:46,410 --> 00:05:50,639
different on some other machine it's

144
00:05:48,598 --> 00:05:52,860
just all kind of it's just not what we

145
00:05:50,639 --> 00:05:54,000
want right so what we would want to do

146
00:05:52,860 --> 00:05:55,500
here if we were going to try and make

147
00:05:54,000 --> 00:05:58,050
this fade-out be a little bit more

148
00:05:55,500 --> 00:05:59,699
reasonable right is we might want to

149
00:05:58,050 --> 00:06:00,660
make it so that this fade out routine is

150
00:05:59,699 --> 00:06:03,389
something that we could call

151
00:06:00,660 --> 00:06:05,099
incrementally as we sort of go through

152
00:06:03,389 --> 00:06:06,840
our game loop or who knows what else

153
00:06:05,098 --> 00:06:11,038
we're doing and have that fade out

154
00:06:06,839 --> 00:06:15,029
happen it sort of like on our main clock

155
00:06:11,038 --> 00:06:17,009
in our in our main kind of timing you

156
00:06:15,029 --> 00:06:19,469
know basically tie it to something a

157
00:06:17,009 --> 00:06:21,478
little more real if that makes sense and

158
00:06:19,470 --> 00:06:24,060
so we can do that that's actually not

159
00:06:21,478 --> 00:06:25,918
that hard and maybe you know if you want

160
00:06:24,060 --> 00:06:27,959
I can do that now since again since you

161
00:06:25,918 --> 00:06:30,029
guys asked you know let's let's take a

162
00:06:27,959 --> 00:06:32,459
look so if we wanted to do that what we

163
00:06:30,029 --> 00:06:34,769
would do is we would probably just make

164
00:06:32,459 --> 00:06:36,209
this window here that we've got we'd

165
00:06:34,769 --> 00:06:39,000
probably make this a more permanent

166
00:06:36,209 --> 00:06:40,739
installation to our game

167
00:06:39,000 --> 00:06:42,959
so for example in here you know we do

168
00:06:40,740 --> 00:06:44,639
this this register of the registering of

169
00:06:42,959 --> 00:06:47,069
the window class what we would probably

170
00:06:44,639 --> 00:06:48,539
do is we'd register a second window

171
00:06:47,069 --> 00:06:51,060
class like we did here and create a

172
00:06:48,540 --> 00:06:53,400
second window and we do that entirely

173
00:06:51,060 --> 00:06:55,379
permanently right so we do something

174
00:06:53,399 --> 00:06:59,609
like you know before we did this stuff

175
00:06:55,379 --> 00:07:02,069
before we did any of this stuff you know

176
00:06:59,610 --> 00:07:04,620
right after we sort of i suppose do some

177
00:07:02,069 --> 00:07:08,399
of these things for start-up we would

178
00:07:04,620 --> 00:07:10,829
probably create that window now I'm just

179
00:07:08,399 --> 00:07:13,139
thinking and do I want to try to catch

180
00:07:10,829 --> 00:07:14,639
myself I don't think so so what I'm

181
00:07:13,139 --> 00:07:16,289
going to do here is I think I'm just

182
00:07:14,639 --> 00:07:19,219
going to do a thing here where we just

183
00:07:16,290 --> 00:07:21,950
kind of do H wind are fade window right

184
00:07:19,220 --> 00:07:24,900
and our fade window is going to be

185
00:07:21,949 --> 00:07:28,019
handled this way so here is all of that

186
00:07:24,899 --> 00:07:29,699
stuff that happens in here and that's

187
00:07:28,019 --> 00:07:31,439
going to do this registration it's going

188
00:07:29,699 --> 00:07:34,229
to do all this stuff that it needs to do

189
00:07:31,439 --> 00:07:36,209
it's going to make it full screen but

190
00:07:34,230 --> 00:07:37,980
it's not going to do any of that it's

191
00:07:36,209 --> 00:07:39,959
just going to make it full screen then

192
00:07:37,980 --> 00:07:43,069
it's going to stop and then everything

193
00:07:39,959 --> 00:07:47,430
else will do separately from that right

194
00:07:43,069 --> 00:07:49,168
so--okay so starting with that we would

195
00:07:47,430 --> 00:07:54,060
then change this function to be like all

196
00:07:49,168 --> 00:07:55,620
right what's the fade window and what's

197
00:07:54,060 --> 00:08:03,720
the actual value that we're trying to

198
00:07:55,620 --> 00:08:05,819
fade too ok and I'm going to say that

199
00:08:03,720 --> 00:08:11,250
we're going to pass it like some kind of

200
00:08:05,819 --> 00:08:13,769
an r32 which is the opacity something

201
00:08:11,250 --> 00:08:15,720
like this or I could just call it the

202
00:08:13,769 --> 00:08:16,949
Alpha value right and then what I'm

203
00:08:15,720 --> 00:08:19,080
going to do is I'm going to go ahead and

204
00:08:16,949 --> 00:08:21,209
convert that down right so I would do

205
00:08:19,079 --> 00:08:23,728
something like say ok the Alpha value x

206
00:08:21,209 --> 00:08:25,680
2 55 and then I would want to convert

207
00:08:23,728 --> 00:08:28,978
that down to a bite after we were done

208
00:08:25,680 --> 00:08:31,908
to sort of get that value into place so

209
00:08:28,978 --> 00:08:37,439
this is the like this is the windows

210
00:08:31,908 --> 00:08:40,649
alpha value something like this so that

211
00:08:37,440 --> 00:08:43,890
would be what we would pass we would no

212
00:08:40,649 --> 00:08:45,689
longer use this loop at all and then

213
00:08:43,889 --> 00:08:50,129
what I do is when we find out what the

214
00:08:45,690 --> 00:08:52,040
window alpha actually is I'd probably do

215
00:08:50,129 --> 00:08:55,600
something like say oh

216
00:08:52,039 --> 00:08:59,059
a you know if the Alpha value is zero

217
00:08:55,600 --> 00:09:03,519
then I want to hide the window otherwise

218
00:08:59,059 --> 00:09:10,879
I want to show the window like that

219
00:09:03,519 --> 00:09:14,539
something like this ok so then what I

220
00:09:10,879 --> 00:09:17,269
could do at least in theory or like I

221
00:09:14,539 --> 00:09:20,000
guess it could say set fade alpha or

222
00:09:17,269 --> 00:09:25,610
something like this right so if i run

223
00:09:20,000 --> 00:09:27,379
this now and that if i run this now what

224
00:09:25,610 --> 00:09:29,810
we should see is it like absolutely

225
00:09:27,379 --> 00:09:32,000
nothing actually happens right because

226
00:09:29,809 --> 00:09:35,929
we're not we haven't tile like sort of

227
00:09:32,000 --> 00:09:39,708
tied it into anything so it's not going

228
00:09:35,929 --> 00:09:41,568
to do anything obviously but we'll take

229
00:09:39,708 --> 00:09:43,369
care of that in one second so you know i

230
00:09:41,568 --> 00:09:45,078
run this thing now and we basically just

231
00:09:43,370 --> 00:09:46,850
get the app exactly the way that we had

232
00:09:45,078 --> 00:09:49,399
it before there's no fade is no nothing

233
00:09:46,850 --> 00:09:50,600
right but what i can do now is I can say

234
00:09:49,399 --> 00:09:52,879
all right like when we're going to go

235
00:09:50,600 --> 00:09:54,319
start this start the party here right

236
00:09:52,879 --> 00:09:56,149
when we do our like global running

237
00:09:54,318 --> 00:10:02,958
situation or whatever else we're doing

238
00:09:56,149 --> 00:10:05,720
um which happens right here right what i

239
00:10:02,958 --> 00:10:08,208
could do is do something like you know

240
00:10:05,720 --> 00:10:10,579
our fade alpha is going to equal zero

241
00:10:08,208 --> 00:10:12,619
zero or something like that and as we

242
00:10:10,578 --> 00:10:15,769
come through here what we could do is

243
00:10:12,620 --> 00:10:17,720
say the fade alpha that's got to go like

244
00:10:15,769 --> 00:10:20,179
up to 1 point 0 before we do like

245
00:10:17,720 --> 00:10:21,440
anything else right before like anything

246
00:10:20,179 --> 00:10:24,289
else happens we got to make sure that

247
00:10:21,440 --> 00:10:27,560
happens right so as we do that what i

248
00:10:24,289 --> 00:10:29,659
could do is say okay you know we've got

249
00:10:27,559 --> 00:10:35,599
this sort of this thing here that does

250
00:10:29,659 --> 00:10:37,009
our show window oops here it is as you

251
00:10:35,600 --> 00:10:39,050
can see here like we do our toggle

252
00:10:37,009 --> 00:10:41,269
window and we do our show window on our

253
00:10:39,049 --> 00:10:43,490
main window what I could do there to say

254
00:10:41,269 --> 00:10:47,169
like let's not do that let's not show

255
00:10:43,490 --> 00:10:50,000
the main window yet let's withhold that

256
00:10:47,169 --> 00:10:51,889
for later and so if I do that right now

257
00:10:50,000 --> 00:10:53,120
when we run the game we won't see

258
00:10:51,889 --> 00:10:54,230
anything now the game's still running in

259
00:10:53,120 --> 00:10:55,818
the background we just won't see

260
00:10:54,230 --> 00:10:58,938
anything right we won't see the game at

261
00:10:55,818 --> 00:11:00,559
all and so what I could do instead is I

262
00:10:58,938 --> 00:11:02,028
can withhold that show window like

263
00:11:00,559 --> 00:11:04,549
prevent our window from actually shown

264
00:11:02,028 --> 00:11:05,730
until we finish that actual fade out

265
00:11:04,549 --> 00:11:07,198
right

266
00:11:05,730 --> 00:11:09,000
and so what i can do is at the top of

267
00:11:07,198 --> 00:11:12,149
global running for example when we

268
00:11:09,000 --> 00:11:13,860
figure out our target amount per frame i

269
00:11:12,149 --> 00:11:17,070
could do a thing here which basically

270
00:11:13,860 --> 00:11:20,009
says okay let's take that fade alpha

271
00:11:17,070 --> 00:11:23,490
value let's go ahead and take whatever

272
00:11:20,009 --> 00:11:25,198
the dt for the frame actually was will

273
00:11:23,490 --> 00:11:28,350
do like sort of an accumulation there on

274
00:11:25,198 --> 00:11:31,019
it right and we'll do something like

275
00:11:28,350 --> 00:11:32,730
okay if they'd alphas less than zero i'm

276
00:11:31,019 --> 00:11:33,810
going to clamp it actually i don't know

277
00:11:32,730 --> 00:11:35,789
if clamps and you're somebody do the

278
00:11:33,809 --> 00:11:39,539
clamp manually so let me do a fade alpha

279
00:11:35,789 --> 00:11:42,299
is less than zero zero fatalities ero 0

280
00:11:39,539 --> 00:11:44,759
and if fade alpha is greater than 1

281
00:11:42,299 --> 00:11:45,958
point 0 fate alpha equals one point out

282
00:11:44,759 --> 00:11:46,980
now we have functions do that in our

283
00:11:45,958 --> 00:11:48,239
math library i don't remember if we

284
00:11:46,980 --> 00:11:50,190
include the math library in the win32

285
00:11:48,240 --> 00:11:56,129
section probably be down I don't really

286
00:11:50,190 --> 00:11:59,220
remember anyway so we've got our fate

287
00:11:56,129 --> 00:12:02,309
alpha there and what I want to do is say

288
00:11:59,220 --> 00:12:04,050
okay we've got the Fate alpha we're

289
00:12:02,309 --> 00:12:06,419
going to go ahead and update the Fate

290
00:12:04,049 --> 00:12:08,429
alpha every time right but what I'm

291
00:12:06,419 --> 00:12:12,809
going to do instead is I'm going to say

292
00:12:08,429 --> 00:12:16,948
all right if the fade alpha equals 1

293
00:12:12,809 --> 00:12:19,559
point 0 then at that point I know that I

294
00:12:16,948 --> 00:12:21,120
can transition over to the other window

295
00:12:19,559 --> 00:12:22,919
I know that like once we've gotten up to

296
00:12:21,120 --> 00:12:24,959
that epatha TI can transition over to

297
00:12:22,919 --> 00:12:30,000
the other window so what I would do at

298
00:12:24,958 --> 00:12:32,879
that time is I'm going to call that set

299
00:12:30,000 --> 00:12:35,669
fate alpha function and i'm going to

300
00:12:32,879 --> 00:12:38,669
call it to basically turn off the window

301
00:12:35,669 --> 00:12:41,519
entirely right so it's going to get rid

302
00:12:38,669 --> 00:12:43,679
of it and i'm going to show our other

303
00:12:41,519 --> 00:12:46,560
window so that will see our other window

304
00:12:43,679 --> 00:12:49,528
instead so once the Fate alpha hits that

305
00:12:46,559 --> 00:12:51,888
I'm going to do it otherwise if the Fate

306
00:12:49,528 --> 00:12:55,740
alpha hasn't hit that I'm going to like

307
00:12:51,889 --> 00:12:57,360
continue to let it go up right something

308
00:12:55,740 --> 00:12:59,159
like this so I'm just going to make the

309
00:12:57,360 --> 00:13:00,899
Fate alpha kind of go up until it's

310
00:12:59,159 --> 00:13:03,000
completely opaque and then I'm going to

311
00:13:00,899 --> 00:13:05,220
switch to the other window and at that

312
00:13:03,000 --> 00:13:07,500
point we can see the game does that make

313
00:13:05,220 --> 00:13:11,060
sense and now we're on a proper timer as

314
00:13:07,500 --> 00:13:11,059
well so hopefully that will be fine

315
00:13:11,789 --> 00:13:16,439
what's going on here yeah so this guy

316
00:13:14,129 --> 00:13:20,639
should be like nothing should be equal

317
00:13:16,440 --> 00:13:22,850
to nothing okay and so that was

318
00:13:20,639 --> 00:13:25,080
spectacularly bad right I admit that

319
00:13:22,850 --> 00:13:25,950
that was not what I expected to look I

320
00:13:25,080 --> 00:13:28,020
at all it should have looked much

321
00:13:25,950 --> 00:13:32,060
smoother than that but what are you

322
00:13:28,019 --> 00:13:35,129
going to do sometimes you mess it up uh

323
00:13:32,059 --> 00:13:39,659
yeah can't say I immediately know why

324
00:13:35,129 --> 00:13:42,299
that happened but we will step into it

325
00:13:39,659 --> 00:13:46,740
and find out and my room that seemed

326
00:13:42,299 --> 00:13:50,219
really abrupt right you saw it didn't

327
00:13:46,740 --> 00:13:51,330
you yeah that seemed really abrupt I

328
00:13:50,220 --> 00:13:54,330
don't feel like we should have been

329
00:13:51,330 --> 00:13:57,300
going that fast although maybe for all I

330
00:13:54,330 --> 00:13:59,370
know we actually were so yeah that could

331
00:13:57,299 --> 00:14:01,559
be true but we probably would need to do

332
00:13:59,370 --> 00:14:03,779
is actually see what the actual time per

333
00:14:01,559 --> 00:14:05,549
frame was or turn back on our actual

334
00:14:03,779 --> 00:14:09,870
loop of timing so I'm gonna maybe maybe

335
00:14:05,549 --> 00:14:11,519
I'll do that just temporarily so that we

336
00:14:09,870 --> 00:14:14,279
have a more sustainable timing loop in

337
00:14:11,519 --> 00:14:16,049
here to see all right there we go so

338
00:14:14,279 --> 00:14:18,089
that's actually quite a bit better so

339
00:14:16,049 --> 00:14:19,529
yeah we're going to have to fix our

340
00:14:18,090 --> 00:14:22,350
frame right either way to make ourselves

341
00:14:19,529 --> 00:14:25,769
get back to a solid 30 Hertz or 60 Hertz

342
00:14:22,350 --> 00:14:28,139
with you know with with actual real

343
00:14:25,769 --> 00:14:29,549
timing in there what I don't know is

344
00:14:28,139 --> 00:14:31,889
we're getting a little bit of a flicker

345
00:14:29,549 --> 00:14:34,049
there so I think that is not what we

346
00:14:31,889 --> 00:14:36,319
want so there's a little bit of a

347
00:14:34,049 --> 00:14:39,539
problem when we hit fade alpha one this

348
00:14:36,320 --> 00:14:42,960
part obviously is not quite working yet

349
00:14:39,539 --> 00:14:46,849
and I'm not like it's the handoff is not

350
00:14:42,960 --> 00:14:49,139
quite looking like I feel like it should

351
00:14:46,850 --> 00:14:51,899
because you can see and maybe it's too

352
00:14:49,139 --> 00:14:54,449
hard to see on the stream at home but

353
00:14:51,899 --> 00:14:57,990
and that time it didn't happen there it

354
00:14:54,450 --> 00:15:00,120
is you see a brief flash sometimes in

355
00:14:57,990 --> 00:15:02,460
the changeover period and so I don't

356
00:15:00,120 --> 00:15:07,500
know III don't know if we need to like

357
00:15:02,460 --> 00:15:09,480
force an update of the window or

358
00:15:07,500 --> 00:15:11,279
something in order to get that to work

359
00:15:09,480 --> 00:15:13,529
properly or something like this and not

360
00:15:11,279 --> 00:15:16,620
quite sure so I'm not sure what's

361
00:15:13,529 --> 00:15:19,589
actually happening there or if maybe

362
00:15:16,620 --> 00:15:21,299
we're going over our

363
00:15:19,590 --> 00:15:23,340
limit or something I don't know I'm

364
00:15:21,299 --> 00:15:24,870
going to step in just real briefly to

365
00:15:23,340 --> 00:15:26,580
see just to make sure that's all working

366
00:15:24,870 --> 00:15:28,379
properly and make sure that it's just a

367
00:15:26,580 --> 00:15:30,389
Windows things that we know that that's

368
00:15:28,379 --> 00:15:33,269
the problem we're trying to solve if

369
00:15:30,389 --> 00:15:34,860
that makes sense oh of course there's a

370
00:15:33,269 --> 00:15:41,549
now there's a full screen window that I

371
00:15:34,860 --> 00:15:42,810
can't get past great great well in order

372
00:15:41,549 --> 00:15:44,939
to debug that that's not such a bad

373
00:15:42,809 --> 00:15:51,179
that's not such a bad thing I can just

374
00:15:44,940 --> 00:15:53,030
take off the top most flag there the

375
00:15:51,179 --> 00:15:56,069
reason I couldn't see that window right

376
00:15:53,029 --> 00:15:57,839
is because we we made a window that's

377
00:15:56,070 --> 00:15:59,400
called topmost it's on top of all the

378
00:15:57,840 --> 00:16:01,470
other window so i couldn't alt tab to

379
00:15:59,399 --> 00:16:02,909
the debugger one of the reasons is nice

380
00:16:01,470 --> 00:16:05,340
to have a second monitor to say the

381
00:16:02,909 --> 00:16:07,110
least right alright so let's go ahead

382
00:16:05,340 --> 00:16:09,990
and see if we can make this happen again

383
00:16:07,110 --> 00:16:11,399
so there we go so at the break point I

384
00:16:09,990 --> 00:16:13,289
know our windows didn't want to set the

385
00:16:11,399 --> 00:16:15,120
breakpoint before so there we go now

386
00:16:13,289 --> 00:16:17,099
we're at show window so what I'm going

387
00:16:15,120 --> 00:16:18,029
to do is this obviously should show the

388
00:16:17,100 --> 00:16:19,830
window I don't think there's anything

389
00:16:18,029 --> 00:16:21,689
weird happening there but I want to see

390
00:16:19,830 --> 00:16:25,139
what happens in fade window what's the

391
00:16:21,690 --> 00:16:27,180
windows alpha value here it's zero so

392
00:16:25,139 --> 00:16:29,069
it's going to call SW hide on that

393
00:16:27,179 --> 00:16:32,399
window which is exactly what I wanted

394
00:16:29,070 --> 00:16:35,850
I'm going to also step in to see if that

395
00:16:32,399 --> 00:16:38,909
ever happened before that so meaning did

396
00:16:35,850 --> 00:16:40,590
we ever try to hide the window before we

397
00:16:38,909 --> 00:16:42,809
got to that point I just want to make

398
00:16:40,590 --> 00:16:44,670
sure that that didn't happen and it

399
00:16:42,809 --> 00:16:47,549
didn't right there's that's the first

400
00:16:44,669 --> 00:16:49,379
time that we ever hit that case so that

401
00:16:47,549 --> 00:16:52,349
looks pretty good to me so I'm not

402
00:16:49,379 --> 00:16:54,990
really sure what the problem is there I

403
00:16:52,350 --> 00:16:56,759
guess one thing i should say is after we

404
00:16:54,990 --> 00:16:58,950
do this once we don't want to keep doing

405
00:16:56,759 --> 00:17:00,450
this again so i do wonder if maybe

406
00:16:58,950 --> 00:17:03,450
that's causing a little bit of a problem

407
00:17:00,450 --> 00:17:05,190
so i may also try to remove that from

408
00:17:03,450 --> 00:17:06,509
happening so I'm going to just do a

409
00:17:05,190 --> 00:17:09,509
thing that's like you know something

410
00:17:06,509 --> 00:17:14,609
like you know fading complete or

411
00:17:09,509 --> 00:17:16,859
something and I'll do or like you know

412
00:17:14,609 --> 00:17:18,659
maybe a fade in progress well now I'll

413
00:17:16,859 --> 00:17:21,419
do fading complete so what I'll do here

414
00:17:18,660 --> 00:17:26,130
is like if the fading is not complete we

415
00:17:21,420 --> 00:17:28,410
do all this stuff otherwise you know we

416
00:17:26,130 --> 00:17:30,780
don't do anything so it's something like

417
00:17:28,410 --> 00:17:33,290
that and so I don't know if that will

418
00:17:30,779 --> 00:17:34,819
help like I said it doesn't I didn't

419
00:17:33,289 --> 00:17:36,289
it would I just wanted to make sure

420
00:17:34,819 --> 00:17:41,000
there wasn't any kind of glitching

421
00:17:36,289 --> 00:17:42,559
happening there just to be sure so all

422
00:17:41,000 --> 00:17:44,200
right so we've got a little bit of a

423
00:17:42,559 --> 00:17:47,389
glitch there and I'm not exactly sure

424
00:17:44,200 --> 00:17:50,600
quite what it comes from like I said I

425
00:17:47,390 --> 00:17:52,790
don't know if what we need to do is is

426
00:17:50,599 --> 00:17:55,359
like prime this thing a little bit more

427
00:17:52,789 --> 00:17:59,509
so we do like a show window like this

428
00:17:55,359 --> 00:18:01,099
and like for example I guess I should

429
00:17:59,509 --> 00:18:02,750
check the seed if we get a glitch just

430
00:18:01,099 --> 00:18:04,339
doing this I don't think we should

431
00:18:02,750 --> 00:18:06,890
because I believe that topmost window

432
00:18:04,339 --> 00:18:08,569
should say topmost right and so that

433
00:18:06,890 --> 00:18:10,160
looks pretty good there let me run it

434
00:18:08,569 --> 00:18:11,990
again because it didn't always do it so

435
00:18:10,160 --> 00:18:13,820
I just want to make sure okay so it's

436
00:18:11,990 --> 00:18:16,339
basically just weird for some reason

437
00:18:13,819 --> 00:18:19,159
when we disappear that when that window

438
00:18:16,339 --> 00:18:22,549
goes away we're not getting our other

439
00:18:19,160 --> 00:18:23,870
window like up there in time and so I

440
00:18:22,549 --> 00:18:25,609
don't know if we need to go through one

441
00:18:23,869 --> 00:18:26,869
round of the message loop or something

442
00:18:25,609 --> 00:18:29,629
to try and make sure that we've

443
00:18:26,869 --> 00:18:31,639
repainted it I there are some things

444
00:18:29,630 --> 00:18:38,720
like could maybe do here I'm not really

445
00:18:31,640 --> 00:18:41,480
sure you know what I could do I think

446
00:18:38,720 --> 00:18:44,779
our toggle full screen I could do

447
00:18:41,480 --> 00:18:46,460
something like this potentially and I'm

448
00:18:44,779 --> 00:18:48,440
not totally sure but let me just take a

449
00:18:46,460 --> 00:18:50,779
look let's see what happens if we do a

450
00:18:48,440 --> 00:18:52,700
toggle full screen after showing it to

451
00:18:50,779 --> 00:18:55,399
force that repaint I just want to see if

452
00:18:52,700 --> 00:18:57,529
that gives us any better success now

453
00:18:55,400 --> 00:19:02,269
that's even worse we get all kinds of

454
00:18:57,529 --> 00:19:03,559
weird stuff happening there alright so

455
00:19:02,269 --> 00:19:04,910
what I'm going to do here as I'm going

456
00:19:03,559 --> 00:19:06,649
to do a show window I'm going to do an

457
00:19:04,910 --> 00:19:08,210
update window and I'm going to force a

458
00:19:06,650 --> 00:19:10,370
repaint I'm just going to force windows

459
00:19:08,210 --> 00:19:11,809
to ibar them a try to force windows to

460
00:19:10,369 --> 00:19:13,989
repaint the way we do that is going to

461
00:19:11,809 --> 00:19:17,210
call function called invalidate wrecked

462
00:19:13,990 --> 00:19:19,609
and what this does is it basically says

463
00:19:17,210 --> 00:19:22,130
hey I want you two to resour to paint

464
00:19:19,609 --> 00:19:25,309
this window right and we'll see if

465
00:19:22,130 --> 00:19:27,140
that's any any any good here so

466
00:19:25,309 --> 00:19:29,779
basically what this says is all right I

467
00:19:27,140 --> 00:19:30,740
want you to take a window and I feel

468
00:19:29,779 --> 00:19:32,329
like this should have just been being

469
00:19:30,740 --> 00:19:33,380
done so again I don't really have high

470
00:19:32,329 --> 00:19:35,119
hopes for this but with windows

471
00:19:33,380 --> 00:19:36,440
programming I'd there's no way to really

472
00:19:35,119 --> 00:19:38,599
know you can't step through the code so

473
00:19:36,440 --> 00:19:39,620
unless you're raymond chen and can step

474
00:19:38,599 --> 00:19:43,519
through the code it's pretty hard to

475
00:19:39,619 --> 00:19:46,189
find out why windows does whatever

476
00:19:43,519 --> 00:19:48,829
random stupid thing it is that it does

477
00:19:46,190 --> 00:19:50,419
so I'm going to go ahead and force it to

478
00:19:48,829 --> 00:19:52,278
repaint there i'm going to call

479
00:19:50,419 --> 00:19:55,190
updatewindow to try and make that paint

480
00:19:52,278 --> 00:19:57,888
happen and i don't know if that'll help

481
00:19:55,190 --> 00:20:02,950
but i'm going to try right so let's take

482
00:19:57,888 --> 00:20:06,199
a look and see what happens invalidate

483
00:20:02,950 --> 00:20:09,319
rent there we go and we'll see if that

484
00:20:06,200 --> 00:20:12,110
gives us any more success on the glitch

485
00:20:09,319 --> 00:20:13,750
still nothing so again I really just

486
00:20:12,109 --> 00:20:16,548
don't know what where that's coming from

487
00:20:13,750 --> 00:20:20,058
it's at the changeover point to be sure

488
00:20:16,548 --> 00:20:22,638
but I just can't I can't tell why we're

489
00:20:20,058 --> 00:20:24,349
getting that I guess I should also

490
00:20:22,638 --> 00:20:28,788
verify again that there's no weirdness

491
00:20:24,349 --> 00:20:30,709
with the alpha values like that this

492
00:20:28,788 --> 00:20:33,158
alpha value doesn't wrap or something

493
00:20:30,710 --> 00:20:34,940
like that I can't see how it would

494
00:20:33,159 --> 00:20:37,250
because that doesn't really make any

495
00:20:34,940 --> 00:20:39,679
sense but let me see let me just make

496
00:20:37,250 --> 00:20:40,849
sure that it doesn't so what I'm going

497
00:20:39,679 --> 00:20:43,309
to do here is I'm going to replace

498
00:20:40,849 --> 00:20:45,378
windows alpha with 255 this way we're

499
00:20:43,308 --> 00:20:47,178
black the whole time to straight up

500
00:20:45,378 --> 00:20:48,769
black we come on black we stay black and

501
00:20:47,179 --> 00:20:51,139
want to see if there's any glitching

502
00:20:48,769 --> 00:20:53,298
when that happens I just want to see

503
00:20:51,138 --> 00:20:55,269
right so I'm going to run that a couple

504
00:20:53,298 --> 00:20:57,589
times and see if we ever get the glitch

505
00:20:55,269 --> 00:21:00,288
so the fact that we don't get the glitch

506
00:20:57,589 --> 00:21:02,720
there is making me think that maybe

507
00:21:00,288 --> 00:21:06,378
we're wrapping up nope there was the

508
00:21:02,720 --> 00:21:09,079
glitch so even if all we do yet there's

509
00:21:06,378 --> 00:21:12,349
a glitch again so even if all we do is

510
00:21:09,079 --> 00:21:14,240
just call it with black it still happens

511
00:21:12,349 --> 00:21:15,829
so what that says to me is that we're

512
00:21:14,240 --> 00:21:17,839
not like screwing up the calculation and

513
00:21:15,829 --> 00:21:20,980
accidentally passing zero at the end a

514
00:21:17,839 --> 00:21:24,319
little bit early or something like that

515
00:21:20,980 --> 00:21:26,480
so yeah so that's good what I also could

516
00:21:24,319 --> 00:21:29,808
do is have us I could have set layered

517
00:21:26,480 --> 00:21:32,750
window attributes actually it's calling

518
00:21:29,808 --> 00:21:35,538
esta me show every time and that's not

519
00:21:32,750 --> 00:21:37,638
really necessary so I could also do

520
00:21:35,538 --> 00:21:39,950
something like where we are a little bit

521
00:21:37,638 --> 00:21:43,428
saner about that sort of thing I could

522
00:21:39,950 --> 00:21:45,679
do where we don't actually call a yeah

523
00:21:43,429 --> 00:21:49,419
where we don't actually call that and

524
00:21:45,679 --> 00:21:49,419
that would look something more like this

525
00:21:49,869 --> 00:21:52,869
right

526
00:21:54,980 --> 00:22:02,849
showwindow window SW so this could

527
00:22:00,450 --> 00:22:07,798
happen only if the window is not visible

528
00:22:02,849 --> 00:22:11,009
and I don't really remember how you

529
00:22:07,798 --> 00:22:12,900
actually do that I don't think there

530
00:22:11,009 --> 00:22:18,359
isn't is visible call but maybe there is

531
00:22:12,900 --> 00:22:20,759
I guess there is alright perfect is

532
00:22:18,359 --> 00:22:25,609
window visible so what we can do is just

533
00:22:20,759 --> 00:22:25,609
say like okay if the window is visible

534
00:22:27,529 --> 00:22:35,548
you know show it the windows visible

535
00:22:33,990 --> 00:22:43,190
hide it if it's not as well show it in

536
00:22:35,548 --> 00:22:45,089
either the two cases right excuse me

537
00:22:43,190 --> 00:22:49,558
alright so let's see if that does any

538
00:22:45,089 --> 00:22:51,058
better again same thing so it's a little

539
00:22:49,558 --> 00:22:52,470
bit cleaner now but doesn't actually

540
00:22:51,058 --> 00:22:54,029
help with our main problem and again

541
00:22:52,470 --> 00:22:59,400
like I said this is really kind of

542
00:22:54,029 --> 00:23:01,259
annoying I you know exactly the kind of

543
00:22:59,400 --> 00:23:04,259
debugging that I don't recommend people

544
00:23:01,259 --> 00:23:05,129
do with their own code because with your

545
00:23:04,259 --> 00:23:07,200
own code you should just step through

546
00:23:05,130 --> 00:23:08,880
and find the actual problem the super

547
00:23:07,200 --> 00:23:11,850
annoying part about Windows is you can't

548
00:23:08,880 --> 00:23:13,380
write you can't step in and figure out

549
00:23:11,849 --> 00:23:14,939
what's wrong because it's someone else's

550
00:23:13,380 --> 00:23:18,090
code and its proprietary you can't see

551
00:23:14,940 --> 00:23:19,590
it so hey that's why a lot of Windows

552
00:23:18,089 --> 00:23:21,359
things are buggy is because when you

553
00:23:19,589 --> 00:23:23,939
write stuff you don't actually have any

554
00:23:21,359 --> 00:23:26,519
idea what's actually going on you have

555
00:23:23,940 --> 00:23:29,070
no idea what could the bug could be etc

556
00:23:26,519 --> 00:23:34,980
etc etc right so I don't know what else

557
00:23:29,069 --> 00:23:37,678
to do here i'm going to try delaying for

558
00:23:34,980 --> 00:23:40,079
one frame i'm going to do another thing

559
00:23:37,679 --> 00:23:41,490
that's like again just making kind of a

560
00:23:40,079 --> 00:23:43,439
little mini finite state machine here

561
00:23:41,490 --> 00:23:46,140
just to see if it changes this is pure

562
00:23:43,440 --> 00:23:47,880
experimentation like I said before so

563
00:23:46,140 --> 00:23:54,210
we'll do if fading complete and then

564
00:23:47,880 --> 00:23:55,679
we'll do if not showing complete so this

565
00:23:54,210 --> 00:23:57,659
will give us one pass through the

566
00:23:55,679 --> 00:24:01,140
message loop to see if that does

567
00:23:57,659 --> 00:24:03,090
anything I don't know that it will but

568
00:24:01,140 --> 00:24:04,259
we'll just see if it does right so

569
00:24:03,089 --> 00:24:07,829
there's our fading ability if not

570
00:24:04,259 --> 00:24:14,579
showing complete then what I'll do is I

571
00:24:07,829 --> 00:24:16,079
will do this part right so we're going

572
00:24:14,579 --> 00:24:17,879
to try and get that other window up

573
00:24:16,079 --> 00:24:20,339
first and see and then we'll give it one

574
00:24:17,880 --> 00:24:21,450
pass through the windows loop so it

575
00:24:20,339 --> 00:24:23,759
didn't do it that time but again it

576
00:24:21,450 --> 00:24:25,890
seems to only do it once in a while so I

577
00:24:23,759 --> 00:24:28,079
just want to test to see and make sure

578
00:24:25,890 --> 00:24:29,880
that that's actually solving it it does

579
00:24:28,079 --> 00:24:31,798
look like giving it one pass through the

580
00:24:29,880 --> 00:24:34,320
message loop maybe gave it time to do

581
00:24:31,798 --> 00:24:35,579
the repaint and like actually process

582
00:24:34,319 --> 00:24:37,408
the paint message which might have been

583
00:24:35,579 --> 00:24:38,939
the problem either gonna don't know I'm

584
00:24:37,409 --> 00:24:41,070
not saying that's actually what it is

585
00:24:38,940 --> 00:24:44,399
but does look like now we've solved that

586
00:24:41,069 --> 00:24:46,500
problem which is kind of nice so that's

587
00:24:44,398 --> 00:24:48,599
good now what I would like to do is that

588
00:24:46,500 --> 00:24:50,490
cursor is still visible not a huge fan

589
00:24:48,599 --> 00:24:52,759
of the cursor being visible so what I

590
00:24:50,490 --> 00:24:56,399
might do is just as a final touch here

591
00:24:52,759 --> 00:24:58,528
again we've kind of have our window proc

592
00:24:56,398 --> 00:25:01,109
right if you remember how did we make

593
00:24:58,528 --> 00:25:03,119
the cursor just disappear right how do

594
00:25:01,109 --> 00:25:05,189
we you know how do we do that originally

595
00:25:03,119 --> 00:25:06,808
well the way that we did that is here in

596
00:25:05,190 --> 00:25:08,880
our window callback for our main window

597
00:25:06,808 --> 00:25:10,829
is when it asks us to set the cursor we

598
00:25:08,880 --> 00:25:12,990
said shut it off don't show the cursor

599
00:25:10,829 --> 00:25:15,720
like get rid of that cursor and so what

600
00:25:12,990 --> 00:25:17,220
I might do here is have a win32 fade

601
00:25:15,720 --> 00:25:18,899
window call back that's our own call

602
00:25:17,220 --> 00:25:21,120
back again it doesn't handle any

603
00:25:18,898 --> 00:25:22,408
messages at all for the most part it's

604
00:25:21,119 --> 00:25:24,388
just going to and in fact it might

605
00:25:22,409 --> 00:25:25,950
actually be resistant to close and

606
00:25:24,388 --> 00:25:28,168
destroy so that people basically can't

607
00:25:25,950 --> 00:25:30,419
get rid of it if that makes sense it'll

608
00:25:28,169 --> 00:25:31,889
just say like hey I don't care what you

609
00:25:30,419 --> 00:25:34,409
think you're doing we are going to like

610
00:25:31,888 --> 00:25:36,058
full-on ignore you i guess destroy

611
00:25:34,409 --> 00:25:37,740
probably you don't want to do but but

612
00:25:36,058 --> 00:25:39,509
close certainly we could just say like

613
00:25:37,740 --> 00:25:41,429
hey man i don't care if you think you're

614
00:25:39,509 --> 00:25:43,470
closing me you ain't closing me i got

615
00:25:41,429 --> 00:25:45,419
news for you pal that's just how this

616
00:25:43,470 --> 00:25:48,240
goes so we could definitely do something

617
00:25:45,419 --> 00:25:51,690
like that and then in here what we would

618
00:25:48,240 --> 00:25:53,429
have is when we call the fade window

619
00:25:51,690 --> 00:25:56,038
call back right the clothes doesn't do

620
00:25:53,429 --> 00:25:57,840
anything the set cursor is definitely

621
00:25:56,038 --> 00:26:00,210
going to just shut it down and say you

622
00:25:57,839 --> 00:26:01,619
know what don't ever show that cursor so

623
00:26:00,210 --> 00:26:04,860
then what we do is when we have def

624
00:26:01,619 --> 00:26:07,048
window proc which we have what was what

625
00:26:04,859 --> 00:26:10,668
which is what we set the fade window to

626
00:26:07,048 --> 00:26:14,369
call right here we could just call our

627
00:26:10,669 --> 00:26:16,200
you know our new function which will get

628
00:26:14,369 --> 00:26:18,298
rid of that cursor that way the instant

629
00:26:16,200 --> 00:26:19,370
you hit f5 the cursor goes away in the

630
00:26:18,298 --> 00:26:20,900
fade-out happened

631
00:26:19,369 --> 00:26:23,959
there now I don't know whether there's

632
00:26:20,900 --> 00:26:25,580
any way to fade out the cursor right I

633
00:26:23,960 --> 00:26:30,170
never tried something like that before

634
00:26:25,579 --> 00:26:33,019
we could certainly investigate and see

635
00:26:30,170 --> 00:26:35,480
but I also want to see here so we do

636
00:26:33,019 --> 00:26:38,690
have a problem which is that that window

637
00:26:35,480 --> 00:26:41,599
is that's that topmost window there we

638
00:26:38,690 --> 00:26:43,250
want that to go away entirely and you

639
00:26:41,599 --> 00:26:44,869
can see that it's still kind of there I

640
00:26:43,250 --> 00:26:47,240
don't really know why because I feel

641
00:26:44,869 --> 00:26:52,250
like SW hide should have gotten rid of

642
00:26:47,240 --> 00:26:53,929
that that should have got rid of it but

643
00:26:52,250 --> 00:26:56,299
you know what i think i think i may have

644
00:26:53,929 --> 00:26:58,040
passed the wrong flag there I I want to

645
00:26:56,299 --> 00:26:59,659
say that I passed the wrong flag there I

646
00:26:58,039 --> 00:27:09,019
don't know that I did I'm just going to

647
00:26:59,660 --> 00:27:13,340
look and see let's take a look let's see

648
00:27:09,019 --> 00:27:15,889
no there it is so why you can still pick

649
00:27:13,339 --> 00:27:19,220
it I'm not sure if the window is visible

650
00:27:15,890 --> 00:27:25,790
hide the window that's what should have

651
00:27:19,220 --> 00:27:27,140
happened on alpha 0 right and it's a top

652
00:27:25,789 --> 00:27:32,960
most window so we shouldn't even have

653
00:27:27,140 --> 00:27:34,250
seen our window so that's pretty weird

654
00:27:32,960 --> 00:27:35,210
I'm going to go ahead and set a

655
00:27:34,250 --> 00:27:39,829
breakpoint throw to make sure that's

656
00:27:35,210 --> 00:27:48,620
getting called right and it's not

657
00:27:39,829 --> 00:27:50,359
getting called okay ah I don't know that

658
00:27:48,619 --> 00:27:55,609
wait no that should that should still

659
00:27:50,359 --> 00:28:02,349
return the right thing right ha so is

660
00:27:55,609 --> 00:28:06,549
window visible apparently returns false

661
00:28:02,349 --> 00:28:06,549
for layered windows

662
00:28:16,700 --> 00:28:26,278
not sure I know why that would be I'm

663
00:28:23,548 --> 00:28:28,319
going to go ahead and see what's pi plus

664
00:28:26,278 --> 00:28:30,089
plus has to say about that again using

665
00:28:28,319 --> 00:28:34,439
the spy tool which is basically let you

666
00:28:30,089 --> 00:28:38,028
inspect windows on Microsoft Windows I'm

667
00:28:34,440 --> 00:28:41,100
just going to go ahead and look and see

668
00:28:38,028 --> 00:28:42,869
what's actually happening there I want

669
00:28:41,099 --> 00:28:44,939
to look and see if this window is marked

670
00:28:42,869 --> 00:28:48,569
visible or not so I'm going to go into

671
00:28:44,940 --> 00:28:50,970
the styles and I'm going to see so it

672
00:28:48,569 --> 00:28:54,589
does not have the visible style set

673
00:28:50,970 --> 00:28:59,278
which is weird because it definitely is

674
00:28:54,589 --> 00:29:03,240
visible like we were seeing it at that

675
00:28:59,278 --> 00:29:06,240
time and I don't really understand how

676
00:29:03,240 --> 00:29:08,159
how it went away so I'm going to

677
00:29:06,240 --> 00:29:11,399
actually set a breakpoint like earlier

678
00:29:08,159 --> 00:29:13,320
on in this process so let's go ahead and

679
00:29:11,398 --> 00:29:15,689
let it fade out a little bit right and

680
00:29:13,319 --> 00:29:17,879
so here we are with an alpha value of 0

681
00:29:15,690 --> 00:29:20,009
point six and then I'm going to go ahead

682
00:29:17,880 --> 00:29:23,070
and say like what's the visible value

683
00:29:20,009 --> 00:29:25,500
here right so let's go ahead and let's

684
00:29:23,069 --> 00:29:27,058
refresh that I'm gonna look at the

685
00:29:25,500 --> 00:29:29,210
handmade here a fade out window class

686
00:29:27,058 --> 00:29:32,369
take a look at the properties there and

687
00:29:29,210 --> 00:29:35,069
go ahead and look at the styles there's

688
00:29:32,369 --> 00:29:37,918
that visible flag right there right and

689
00:29:35,069 --> 00:29:40,069
so I'm not sure how does it get set to

690
00:29:37,919 --> 00:29:42,210
invisible without us ever calling hide

691
00:29:40,069 --> 00:29:44,579
does someone want to give me a little

692
00:29:42,210 --> 00:29:46,710
primer on that situation because I don't

693
00:29:44,579 --> 00:29:50,240
get it did I act forget like something

694
00:29:46,710 --> 00:29:50,240
in here did I leave something in there

695
00:29:53,690 --> 00:30:02,220
deny deny show window window show when

696
00:29:59,849 --> 00:30:05,908
validate wrecked fading complete set

697
00:30:02,220 --> 00:30:07,558
fate alpha yeah I mean we don't touch we

698
00:30:05,909 --> 00:30:12,000
don't touch that window in any other

699
00:30:07,558 --> 00:30:17,308
place so all right so tell me why mr.

700
00:30:12,000 --> 00:30:19,440
thingy tell me why and and that time we

701
00:30:17,308 --> 00:30:21,990
didn't never even hit this case am I

702
00:30:19,440 --> 00:30:27,029
going crazy here people what's going on

703
00:30:21,990 --> 00:30:38,069
what's going on the alpha is 0

704
00:30:27,029 --> 00:30:39,720
oh the first time we call it though so

705
00:30:38,069 --> 00:30:42,899
the very first time we call it it does

706
00:30:39,720 --> 00:30:45,690
have alpha 0 so this time through it's

707
00:30:42,900 --> 00:30:50,780
not visible and that's fine the next

708
00:30:45,690 --> 00:30:54,570
time through it just never gets called

709
00:30:50,779 --> 00:30:57,149
why does it never get cold why does it

710
00:30:54,569 --> 00:30:59,549
never call with alpha 0 it's supposed to

711
00:30:57,150 --> 00:31:02,460
so it's actually just a bug out here

712
00:30:59,549 --> 00:31:09,299
where I'm like set fate alpha 0 if not

713
00:31:02,460 --> 00:31:10,620
showing complete oh wow that was some

714
00:31:09,299 --> 00:31:14,579
pretty great programming there Casey

715
00:31:10,619 --> 00:31:16,529
nice job parenthesis you're fired so

716
00:31:14,579 --> 00:31:18,480
obviously this is just stupid this would

717
00:31:16,529 --> 00:31:20,879
be calling this all the time which

718
00:31:18,480 --> 00:31:22,920
doesn't even make any sense that's not

719
00:31:20,880 --> 00:31:26,010
what I intended at all what I wanted to

720
00:31:22,920 --> 00:31:31,769
do is probably say this if fading

721
00:31:26,009 --> 00:31:33,779
complete right if the fading is complete

722
00:31:31,769 --> 00:31:37,410
then look to see if the showing is not

723
00:31:33,779 --> 00:31:40,079
complete if it is then go ahead and set

724
00:31:37,410 --> 00:31:44,400
that right if it's not then get rid of

725
00:31:40,079 --> 00:31:45,839
that window right so this may bring back

726
00:31:44,400 --> 00:31:48,690
our bug because it may be that we never

727
00:31:45,839 --> 00:31:50,339
actually got rid of it yeah so that's

728
00:31:48,690 --> 00:31:53,100
good this is this is this is not good

729
00:31:50,339 --> 00:31:54,269
this is bad news bears right because

730
00:31:53,099 --> 00:31:56,549
this means we'll probably get our glitch

731
00:31:54,269 --> 00:31:59,599
back I don't know if we will or not but

732
00:31:56,549 --> 00:31:59,599
I feel like that's entirely possible

733
00:32:00,170 --> 00:32:04,039
well so good so far

734
00:32:10,159 --> 00:32:14,730
alright so that's not bad that's

735
00:32:12,630 --> 00:32:16,230
actually not bad so let's just see now

736
00:32:14,730 --> 00:32:18,599
if we successfully got rid of that

737
00:32:16,230 --> 00:32:20,579
window which is what I actually wanted

738
00:32:18,599 --> 00:32:23,189
so now that's good so now we don't see

739
00:32:20,579 --> 00:32:25,829
that window ever which is what we wanted

740
00:32:23,190 --> 00:32:28,080
and so I think we're in good shape now

741
00:32:25,829 --> 00:32:29,939
right I think we're in good shape that's

742
00:32:28,079 --> 00:32:33,829
pretty that's pretty decent I think

743
00:32:29,940 --> 00:32:33,830
everyone's happy and everyone's smiling

744
00:32:34,880 --> 00:32:40,350
so I think the other thing we could do

745
00:32:37,109 --> 00:32:43,009
right if we wanted to is we could do the

746
00:32:40,349 --> 00:32:45,569
reverse process right we could we could

747
00:32:43,009 --> 00:32:48,058
go the other direction if that makes

748
00:32:45,569 --> 00:32:52,619
sense so what i could do is do something

749
00:32:48,058 --> 00:32:55,168
like you know d fate alpha and and i

750
00:32:52,619 --> 00:32:56,788
could make that be something that you

751
00:32:55,169 --> 00:32:58,409
know as we go through the process we

752
00:32:56,788 --> 00:33:00,658
just say oh okay you know we're going to

753
00:32:58,409 --> 00:33:03,600
do d fade alpha times this so initially

754
00:33:00,659 --> 00:33:05,669
what we're doing is we're fading in and

755
00:33:03,599 --> 00:33:07,349
so that as we do this you know the clamp

756
00:33:05,669 --> 00:33:09,570
still works properly all this sort of

757
00:33:07,349 --> 00:33:11,730
stuff happens and so when the fade is

758
00:33:09,569 --> 00:33:14,639
complete and the showing is not complete

759
00:33:11,730 --> 00:33:16,980
instead of say set fate alpha 200 and

760
00:33:14,640 --> 00:33:18,960
the showing complete thing ash I think

761
00:33:16,980 --> 00:33:21,360
that's all that's probably all fine

762
00:33:18,960 --> 00:33:24,240
actually now I think about it that's all

763
00:33:21,359 --> 00:33:26,729
good yeah and so we could also do a

764
00:33:24,240 --> 00:33:31,649
thing that's like new global running or

765
00:33:26,730 --> 00:33:33,269
like quit on fade equals false right I

766
00:33:31,648 --> 00:33:36,629
could also starting to say like if quit

767
00:33:33,269 --> 00:33:37,950
on fade then global running equals false

768
00:33:36,630 --> 00:33:40,860
or something like that I don't actually

769
00:33:37,950 --> 00:33:43,890
know no idea just giving you what the

770
00:33:40,859 --> 00:33:45,629
idea is there this is kind of just janky

771
00:33:43,890 --> 00:33:51,480
code but it's okay it's in the platform

772
00:33:45,630 --> 00:33:52,440
layer whatever so anyway I oops so

773
00:33:51,480 --> 00:33:54,058
anyway we could do something like that

774
00:33:52,440 --> 00:33:55,140
and then that way we could sort of do

775
00:33:54,058 --> 00:33:56,759
something where we're like okay we

776
00:33:55,140 --> 00:34:00,450
settled that stuff up and it does the

777
00:33:56,759 --> 00:34:02,690
thing that it does or whatever I don't

778
00:34:00,450 --> 00:34:05,548
even know so this stuff is like okay

779
00:34:02,690 --> 00:34:07,288
when we come in here if the faith alpha

780
00:34:05,548 --> 00:34:08,789
is 1 point 0 that means this is the end

781
00:34:07,288 --> 00:34:10,800
of the fade or the beginning of the fade

782
00:34:08,789 --> 00:34:11,969
one of the other so we need to do is we

783
00:34:10,800 --> 00:34:14,909
need to know whether we're on the quit

784
00:34:11,969 --> 00:34:17,608
on fade or not right if we're on the

785
00:34:14,909 --> 00:34:19,409
quit on fade then we're going to we're

786
00:34:17,608 --> 00:34:21,318
fading back in to the desktop if

787
00:34:19,409 --> 00:34:23,389
otherwise we're doing the path that we

788
00:34:21,318 --> 00:34:24,739
already did right so what we would want

789
00:34:23,389 --> 00:34:26,389
to do here is go all right if we're

790
00:34:24,739 --> 00:34:29,478
going to quit on fade then what we need

791
00:34:26,389 --> 00:34:32,329
to do is bring that alpha window back up

792
00:34:29,478 --> 00:34:37,098
to speed right so we need to do like

793
00:34:32,329 --> 00:34:44,149
okay do the set fade alpha that set fade

794
00:34:37,099 --> 00:34:47,059
alpha has to how's it going to work

795
00:34:44,148 --> 00:34:50,628
exactly that set fade alpha is going to

796
00:34:47,059 --> 00:34:52,759
have to be set to 0 to start right

797
00:34:50,628 --> 00:34:57,170
because we don't want or sorry is we

798
00:34:52,759 --> 00:35:00,498
good after that's a one-point oh yeah so

799
00:34:57,170 --> 00:35:01,639
by default if the Fate also imported oil

800
00:35:00,498 --> 00:35:05,629
done if we're quitting on favorite to do

801
00:35:01,639 --> 00:35:07,788
that and we want to set the D alpha yeah

802
00:35:05,630 --> 00:35:09,108
we would want to like well that's really

803
00:35:07,789 --> 00:35:11,269
all we would have to do we just have to

804
00:35:09,108 --> 00:35:16,489
make sure that we actually do this step

805
00:35:11,268 --> 00:35:19,149
right yeah so I think that's okay yeah I

806
00:35:16,489 --> 00:35:21,619
think that's okay that should be fine

807
00:35:19,150 --> 00:35:24,079
and that'll let us go down to zero and

808
00:35:21,619 --> 00:35:25,670
then when we get to zero right we should

809
00:35:24,079 --> 00:35:30,499
be fine so here we take something like

810
00:35:25,670 --> 00:35:32,509
your fate alpha equals 0 0 right at that

811
00:35:30,498 --> 00:35:35,598
point then we're going to say like okay

812
00:35:32,509 --> 00:35:37,130
that's the end of this fade so fading

813
00:35:35,599 --> 00:35:40,910
complete is going to be equal to true at

814
00:35:37,130 --> 00:35:43,640
that point and and yeah and that's all

815
00:35:40,909 --> 00:35:46,548
we really need to do so I think that's

816
00:35:43,639 --> 00:35:48,259
sufficient maybe we got some more work

817
00:35:46,548 --> 00:35:50,298
to do but I think that's sufficient so

818
00:35:48,259 --> 00:35:52,880
then what we would do is say okay when

819
00:35:50,298 --> 00:35:56,059
the quit when the game requests a quit

820
00:35:52,880 --> 00:36:00,469
right then what we would do is we'll

821
00:35:56,059 --> 00:36:03,469
show our our window we get rid of right

822
00:36:00,469 --> 00:36:04,880
and then we set our d fate alpha equal

823
00:36:03,469 --> 00:36:06,318
to 1 negative 1 point out so it's going

824
00:36:04,880 --> 00:36:09,680
to go backwards right it's going to it's

825
00:36:06,318 --> 00:36:11,509
going to go from full black down right

826
00:36:09,679 --> 00:36:13,009
we knew our fate alpha should already be

827
00:36:11,509 --> 00:36:14,630
one point oh so that's fine we want our

828
00:36:13,009 --> 00:36:15,769
quit on fade to become true so we knew

829
00:36:14,630 --> 00:36:17,479
like you're going to quit on two and

830
00:36:15,768 --> 00:36:21,728
then instead of quitting we won't quite

831
00:36:17,478 --> 00:36:26,718
quit not at least right away right and

832
00:36:21,728 --> 00:36:28,218
so yeah that's roughly what we want

833
00:36:26,719 --> 00:36:31,009
alright so we got to make all this stuff

834
00:36:28,219 --> 00:36:33,789
work now let's see where we're at so

835
00:36:31,009 --> 00:36:35,949
when we come in here we'd say

836
00:36:33,789 --> 00:36:37,539
a GF 8 alphas one point out of the Fate

837
00:36:35,949 --> 00:36:40,809
alpha is 0 so we come in here would say

838
00:36:37,539 --> 00:36:42,759
okay if it off oh right this has to be

839
00:36:40,809 --> 00:36:44,799
if quit on fade this is only the quit on

840
00:36:42,760 --> 00:36:47,020
fade put on fade and fade alpha there we

841
00:36:44,800 --> 00:36:49,090
go that's what we want then it would be

842
00:36:47,019 --> 00:36:51,309
complete let's see what happens there so

843
00:36:49,090 --> 00:36:55,059
there's our fade out here is our game

844
00:36:51,309 --> 00:36:56,769
ostensibly and then if I quit this well

845
00:36:55,059 --> 00:36:59,019
that didn't work at all so that's fine

846
00:36:56,769 --> 00:37:00,340
it's great don't worry about it fine

847
00:36:59,019 --> 00:37:03,039
don't let anyone tell you that was a

848
00:37:00,340 --> 00:37:04,660
problem it was exactly what I wanted you

849
00:37:03,039 --> 00:37:07,389
know it's just like it's just let it

850
00:37:04,659 --> 00:37:09,909
happen it's totally fine so let's go

851
00:37:07,389 --> 00:37:13,239
over here and see what happens here gay

852
00:37:09,909 --> 00:37:15,369
memory quit requested we do want our

853
00:37:13,239 --> 00:37:17,859
window to go away and then we want our

854
00:37:15,369 --> 00:37:19,929
fade window to come up so we probably

855
00:37:17,860 --> 00:37:25,980
actually here also want to do something

856
00:37:19,929 --> 00:37:25,980
like set window for a set fade alpha

857
00:37:29,789 --> 00:37:37,059
maybe this maybe how do I want to do

858
00:37:35,590 --> 00:37:41,829
this actually let me let me just jump

859
00:37:37,059 --> 00:37:43,719
back here put this over here so yeah in

860
00:37:41,829 --> 00:37:47,170
here okay so that's what we need to do

861
00:37:43,719 --> 00:37:54,579
we need to go fading complete equals

862
00:37:47,170 --> 00:37:57,490
false showing complete equals false that

863
00:37:54,579 --> 00:37:59,980
might be fine and this I think probably

864
00:37:57,489 --> 00:38:02,109
wants to happen up here as well so when

865
00:37:59,980 --> 00:38:04,329
this happens we want to first get our

866
00:38:02,110 --> 00:38:06,309
fate alpha on then we want to do our our

867
00:38:04,329 --> 00:38:08,549
hide our main window something like that

868
00:38:06,309 --> 00:38:08,549
right

869
00:38:12,820 --> 00:38:18,220
well that was anticlimactic this code is

870
00:38:16,150 --> 00:38:19,840
too stringy at this point I kind of want

871
00:38:18,219 --> 00:38:24,579
to pull this out into something a little

872
00:38:19,840 --> 00:38:28,510
bit more good if that makes sense so I

873
00:38:24,579 --> 00:38:31,389
might just do this I feel like at this

874
00:38:28,510 --> 00:38:33,490
point we're sort of in for a penny in

875
00:38:31,389 --> 00:38:37,569
for a pound I don't really know where

876
00:38:33,489 --> 00:38:38,859
that comes from but you know probably

877
00:38:37,570 --> 00:38:40,210
some kind of British thing because if

878
00:38:38,860 --> 00:38:41,349
there's pennies and pounds involved and

879
00:38:40,210 --> 00:38:43,809
not sure how many replace that could be

880
00:38:41,349 --> 00:38:45,130
other than British currency so let's

881
00:38:43,809 --> 00:38:47,710
just assume that that was the case you

882
00:38:45,130 --> 00:38:49,900
know and say like that's just how it

883
00:38:47,710 --> 00:38:52,090
goes sometimes so I'm just going to go

884
00:38:49,900 --> 00:38:53,889
ahead and say like all right cool in

885
00:38:52,090 --> 00:38:55,300
here we've got all our win32 stuff i

886
00:38:53,889 --> 00:38:59,589
might just straight up your luck hey you

887
00:38:55,300 --> 00:39:02,440
know what we've got a win32 fade window

888
00:38:59,590 --> 00:39:05,650
right and that's just the thing here's

889
00:39:02,440 --> 00:39:09,070
the handle to the window here's the fade

890
00:39:05,650 --> 00:39:23,519
alpha and here's like the state or

891
00:39:09,070 --> 00:39:26,019
something something like that right and

892
00:39:23,519 --> 00:39:27,429
I'm going to grab all this code out and

893
00:39:26,019 --> 00:39:29,440
I'm going to make this into like a thing

894
00:39:27,429 --> 00:39:30,940
that actually just kind of understands

895
00:39:29,440 --> 00:39:34,420
at state and doesn't have to have so

896
00:39:30,940 --> 00:39:36,099
much stringing us to it right so like

897
00:39:34,420 --> 00:39:39,280
I'm gonna just do something like update

898
00:39:36,099 --> 00:39:43,150
fade I don't know something like that at

899
00:39:39,280 --> 00:39:44,920
the moment let's say just say that and

900
00:39:43,150 --> 00:39:47,710
then what update fade will do is it's

901
00:39:44,920 --> 00:39:49,360
just going to take a look right at what

902
00:39:47,710 --> 00:39:52,059
the state of this thing actually was and

903
00:39:49,360 --> 00:39:55,090
so we've got a couple states already

904
00:39:52,059 --> 00:40:03,340
right our first date would be like win32

905
00:39:55,090 --> 00:40:07,750
fade fading in 13 to fade showing or

906
00:40:03,340 --> 00:40:11,019
like waiting for show then they'll be 13

907
00:40:07,750 --> 00:40:15,039
to fade inactive basically went through

908
00:40:11,019 --> 00:40:16,690
to fade I guess in this case we would

909
00:40:15,039 --> 00:40:18,639
also have fading in waiting for show

910
00:40:16,690 --> 00:40:24,070
inactive and then we would also have

911
00:40:18,639 --> 00:40:27,359
like fading out right and each of these

912
00:40:24,070 --> 00:40:27,360
would be its own like thing

913
00:40:35,318 --> 00:40:45,768
yeah so if I have a win through to fade

914
00:40:41,059 --> 00:40:48,528
window and this is the window I now call

915
00:40:45,768 --> 00:41:00,379
it fader in fact we might just call it a

916
00:40:48,528 --> 00:41:01,369
win32 fader something like that then I'm

917
00:41:00,380 --> 00:41:05,420
just going to go ahead and implement

918
00:41:01,369 --> 00:41:08,119
this this thing in its entirety so what

919
00:41:05,420 --> 00:41:10,298
we've got here is all of this code that

920
00:41:08,119 --> 00:41:12,380
we had before right like all this stuff

921
00:41:10,298 --> 00:41:13,940
hopefully we can kind of make this a

922
00:41:12,380 --> 00:41:15,318
little bit more explicit and just kind

923
00:41:13,940 --> 00:41:17,088
of transform it into something a little

924
00:41:15,318 --> 00:41:19,969
more reasonable so here's all that code

925
00:41:17,088 --> 00:41:21,558
right and then the parcel it out into

926
00:41:19,969 --> 00:41:23,868
something hopefully a little bit more

927
00:41:21,559 --> 00:41:27,230
reasonable right so we start with this

928
00:41:23,869 --> 00:41:29,630
and let's see what we've got so for

929
00:41:27,230 --> 00:41:31,519
fading in then really what we want to do

930
00:41:29,630 --> 00:41:34,220
is like do something like whatever the

931
00:41:31,518 --> 00:41:37,189
dt is right we're gonna we're going to

932
00:41:34,219 --> 00:41:38,689
fade that in and some of if we're fading

933
00:41:37,190 --> 00:41:41,329
out we're just going to subtract that

934
00:41:38,690 --> 00:41:45,858
right and if the fade alpha goes below

935
00:41:41,329 --> 00:41:48,170
zero zero that's like our edge condition

936
00:41:45,858 --> 00:41:50,358
our transition condition right and so at

937
00:41:48,170 --> 00:41:51,588
that point when we go below zero we're

938
00:41:50,358 --> 00:41:54,078
going to switch to a different state

939
00:41:51,588 --> 00:41:57,018
we're going to say like okay we've got

940
00:41:54,079 --> 00:42:00,170
if we're fading out that would just give

941
00:41:57,018 --> 00:42:01,219
us win32 fade waiting for clothes or

942
00:42:00,170 --> 00:42:08,108
something I guess which would be our

943
00:42:01,219 --> 00:42:08,108
final state yeah okay

944
00:42:10,150 --> 00:42:17,660
alright so when we're in active that

945
00:42:16,400 --> 00:42:20,809
actually doesn't have to do anything

946
00:42:17,659 --> 00:42:22,969
note nothing to do because we're just

947
00:42:20,809 --> 00:42:24,710
not doing anything when we're waiting

948
00:42:22,969 --> 00:42:26,299
for clothes I think that's also nothing

949
00:42:24,710 --> 00:42:29,510
to do that's just a state that we don't

950
00:42:26,300 --> 00:42:30,560
really care about right I saying like

951
00:42:29,510 --> 00:42:34,010
we're just kind of waiting for someone

952
00:42:30,559 --> 00:42:37,400
to shut us down when we're waiting for

953
00:42:34,010 --> 00:42:39,650
show that is just as soon as we do that

954
00:42:37,400 --> 00:42:41,090
the first time it's only we're only

955
00:42:39,650 --> 00:42:43,190
going to wait one time to the message

956
00:42:41,090 --> 00:42:45,710
loop so really all we do in that case is

957
00:42:43,190 --> 00:42:50,450
immediately transition to the inactive

958
00:42:45,710 --> 00:42:59,480
state and then for fading in we're just

959
00:42:50,449 --> 00:43:03,230
going to do this right okay so I think

960
00:42:59,480 --> 00:43:05,030
that's our complete state transition if

961
00:43:03,230 --> 00:43:07,490
you will so now we just have to actually

962
00:43:05,030 --> 00:43:11,019
do whatever it is that we needed to do

963
00:43:07,489 --> 00:43:13,779
right so when we do our plus equals dt

964
00:43:11,019 --> 00:43:18,230
we would essentially say like okay

965
00:43:13,780 --> 00:43:23,690
whatever the actual in fact I guess this

966
00:43:18,230 --> 00:43:26,179
might be like this so if it's greater

967
00:43:23,690 --> 00:43:28,670
than or equal to 1 point 0 what we would

968
00:43:26,179 --> 00:43:30,889
do is we would set the Fate alpha equal

969
00:43:28,670 --> 00:43:32,690
to 1 point 0 and we transition to our

970
00:43:30,889 --> 00:43:35,029
waiting for show state once we get to

971
00:43:32,690 --> 00:43:36,500
our waiting for show state that's where

972
00:43:35,030 --> 00:43:41,150
we need to actually do this whole

973
00:43:36,500 --> 00:43:43,550
nonsense right so when we go to our

974
00:43:41,150 --> 00:43:49,490
waiting for show state we this is what

975
00:43:43,550 --> 00:43:51,350
we actually want to do I otherwise we're

976
00:43:49,489 --> 00:43:53,779
going to do the update same with this

977
00:43:51,349 --> 00:43:55,969
guy I think we want to do something like

978
00:43:53,780 --> 00:43:57,350
this where when we get down to zero

979
00:43:55,969 --> 00:43:59,480
we've got to do whatever the thing is

980
00:43:57,349 --> 00:44:03,199
we're going to do so we do it like our

981
00:43:59,480 --> 00:44:08,000
set fade alpha with zero for example and

982
00:44:03,199 --> 00:44:10,759
then we would go ahead and yeah and two

983
00:44:08,000 --> 00:44:12,139
hour wait for clothes and i think is

984
00:44:10,760 --> 00:44:15,290
there anything else that happened in

985
00:44:12,139 --> 00:44:17,480
here the quit on fade thing so that's

986
00:44:15,289 --> 00:44:20,389
that Fadal fasho window hide that that

987
00:44:17,480 --> 00:44:23,690
whole situation so i think no

988
00:44:20,389 --> 00:44:25,670
that actually needs to occur just yet so

989
00:44:23,690 --> 00:44:27,559
when i get rid of these guys alright so

990
00:44:25,670 --> 00:44:29,480
there's our little state diagram like i

991
00:44:27,559 --> 00:44:32,480
said we haven't really super covered

992
00:44:29,480 --> 00:44:33,980
finite state machines here so this is

993
00:44:32,480 --> 00:44:35,028
kind of a little cursory introduction i

994
00:44:33,980 --> 00:44:36,469
mean basically what we're doing is we're

995
00:44:35,028 --> 00:44:38,000
taking a bunch of code that was based on

996
00:44:36,469 --> 00:44:39,439
several different variables and then

997
00:44:38,000 --> 00:44:42,619
making explicit the different modes

998
00:44:39,440 --> 00:44:44,000
right and each mode gets a name and then

999
00:44:42,619 --> 00:44:48,230
we have transitions between the modes

1000
00:44:44,000 --> 00:44:49,639
right and so that's really all I was

1001
00:44:48,230 --> 00:44:51,500
doing and we'll cover those maybe a

1002
00:44:49,639 --> 00:44:52,578
little bit more in detail later but for

1003
00:44:51,500 --> 00:44:54,260
now you can kind of see what that

1004
00:44:52,579 --> 00:44:55,760
transformation look like and that's just

1005
00:44:54,260 --> 00:44:57,589
to make a code a little more explicit so

1006
00:44:55,760 --> 00:45:00,319
it's not so hard to figure out what gets

1007
00:44:57,588 --> 00:45:01,788
called when so we'll tune that and debug

1008
00:45:00,318 --> 00:45:06,710
that in a minute here but now I just

1009
00:45:01,789 --> 00:45:09,200
have to wire it up but there's one more

1010
00:45:06,710 --> 00:45:13,338
thing I want to do and that is right

1011
00:45:09,199 --> 00:45:16,250
here so when we do our fade in I feel

1012
00:45:13,338 --> 00:45:20,199
like we may also want to do one more

1013
00:45:16,250 --> 00:45:20,199
thing which would be maybe like

1014
00:45:20,739 --> 00:45:34,129
yeah like instead of fading in we might

1015
00:45:24,710 --> 00:45:38,720
do something like you know a fading you

1016
00:45:34,130 --> 00:45:40,579
know fading like game or something I

1017
00:45:38,719 --> 00:45:42,559
don't know we might want to fade the

1018
00:45:40,579 --> 00:45:44,869
game to black and we might want to do

1019
00:45:42,559 --> 00:45:46,579
that the same way it seems better to

1020
00:45:44,869 --> 00:45:48,159
make the game fate itself out to black

1021
00:45:46,579 --> 00:45:53,929
but I'm just going to throw this in here

1022
00:45:48,159 --> 00:45:55,279
anyway because why not right so I'm

1023
00:45:53,929 --> 00:45:56,929
going to have fading gaming here and

1024
00:45:55,280 --> 00:45:59,150
what fading game would do is it would do

1025
00:45:56,929 --> 00:46:00,769
this exact same thing it would say like

1026
00:45:59,150 --> 00:46:02,990
okay if it's greater than one point oh I

1027
00:46:00,769 --> 00:46:04,849
want to do the thing here but instead of

1028
00:46:02,989 --> 00:46:09,709
this stuff what I want to do is get rid

1029
00:46:04,849 --> 00:46:12,289
of the game window right this is all

1030
00:46:09,710 --> 00:46:15,679
game window stuff right I want to get

1031
00:46:12,289 --> 00:46:19,730
rid of the game window so it hides it at

1032
00:46:15,679 --> 00:46:23,299
that point and then I want to switch us

1033
00:46:19,730 --> 00:46:24,679
to fading out which will start so we'll

1034
00:46:23,300 --> 00:46:26,030
go to black will get rid of the game

1035
00:46:24,679 --> 00:46:28,639
window then we'll come back from black

1036
00:46:26,030 --> 00:46:32,540
to show the desktop right that was all

1037
00:46:28,639 --> 00:46:36,500
that I was thinking there so yeah that

1038
00:46:32,539 --> 00:46:39,199
seems that seems reasonable to me uh so

1039
00:46:36,500 --> 00:46:43,280
yeah game window game window game window

1040
00:46:39,199 --> 00:46:44,750
game window game window so you'd pass

1041
00:46:43,280 --> 00:46:48,470
the game window into this thing like

1042
00:46:44,750 --> 00:46:53,679
this probably so in here I just say like

1043
00:46:48,469 --> 00:46:58,189
begin fade in and this would be like

1044
00:46:53,679 --> 00:47:02,199
again fade out something like that and

1045
00:46:58,190 --> 00:47:02,200
this would be like you know in it fader

1046
00:47:06,829 --> 00:47:15,150
right that sort of thing and so when we

1047
00:47:12,119 --> 00:47:18,318
go to do begin fade in we would just say

1048
00:47:15,150 --> 00:47:26,548
all right our state is going to be win32

1049
00:47:18,318 --> 00:47:29,208
fade fading in our you know our fate

1050
00:47:26,548 --> 00:47:36,838
alpha is going to be 00 at the start and

1051
00:47:29,208 --> 00:47:43,440
then the fader our fader state for this

1052
00:47:36,838 --> 00:47:44,670
is going to be fading game probably name

1053
00:47:43,440 --> 00:47:46,858
these states a little bit better in a

1054
00:47:44,670 --> 00:47:50,099
second here once we see them all and the

1055
00:47:46,858 --> 00:47:51,808
alpha is going to be again 00 and that

1056
00:47:50,099 --> 00:47:54,838
would be pretty much all there would be

1057
00:47:51,809 --> 00:47:57,028
to it I would think our anit fader is

1058
00:47:54,838 --> 00:47:59,568
just going to take that construction

1059
00:47:57,028 --> 00:48:01,920
code which I kind of already nicely

1060
00:47:59,568 --> 00:48:10,288
segregated there I'm going to go ahead

1061
00:48:01,920 --> 00:48:11,759
and make that this part right here and

1062
00:48:10,289 --> 00:48:13,380
I'm also going to go ahead and move this

1063
00:48:11,759 --> 00:48:14,759
guy up because he's referenced by these

1064
00:48:13,380 --> 00:48:21,059
guys so we're just going to put them in

1065
00:48:14,759 --> 00:48:22,498
up there as a utility all right so if we

1066
00:48:21,059 --> 00:48:25,709
assume that that's going to work at all

1067
00:48:22,498 --> 00:48:32,088
which we don't know that well let's go

1068
00:48:25,708 --> 00:48:36,419
ahead and make this happen here ah yeah

1069
00:48:32,088 --> 00:48:40,889
there we go hopefully that's all good

1070
00:48:36,420 --> 00:48:44,059
this all looks fine fade window you know

1071
00:48:40,889 --> 00:48:47,639
H min fade window just fader window

1072
00:48:44,059 --> 00:48:55,528
could just replace fade window with

1073
00:48:47,639 --> 00:48:56,940
fader window bat and now when I compile

1074
00:48:55,528 --> 00:48:59,338
we should have most of our stuff working

1075
00:48:56,940 --> 00:49:06,329
okay but there should be some weird

1076
00:48:59,338 --> 00:49:10,048
things here still with that okay uh so

1077
00:49:06,329 --> 00:49:13,170
yeah a couple more things that need to

1078
00:49:10,048 --> 00:49:14,840
happen now in the main loop i think is

1079
00:49:13,170 --> 00:49:18,099
about it

1080
00:49:14,840 --> 00:49:21,710
so we've got to do our fader alpha here

1081
00:49:18,099 --> 00:49:29,179
so fade alpha is going to be fader alpha

1082
00:49:21,710 --> 00:49:35,179
like oops not that way try that one more

1083
00:49:29,179 --> 00:49:40,299
time so there we go yep nope nope yup

1084
00:49:35,179 --> 00:49:46,789
yup yup yup nope nope you up all right

1085
00:49:40,300 --> 00:49:52,820
good good deal okay so that's all good

1086
00:49:46,789 --> 00:49:55,279
and I think now that we should we should

1087
00:49:52,820 --> 00:49:59,390
i'll be able to do this so now what we

1088
00:49:55,280 --> 00:50:08,330
would do is we would say out here begin

1089
00:49:59,389 --> 00:50:12,349
fade out and we would do yeah guess

1090
00:50:08,329 --> 00:50:16,210
those are bad names in fade out i'm

1091
00:50:12,349 --> 00:50:19,880
going to call this begin fade to game

1092
00:50:16,210 --> 00:50:22,550
begin fade to desktop so this is going

1093
00:50:19,880 --> 00:50:24,860
to be begin fade to desktop and this is

1094
00:50:22,550 --> 00:50:28,090
going to take our fader there and this

1095
00:50:24,860 --> 00:50:31,820
stuff is all going to go away right

1096
00:50:28,090 --> 00:50:35,750
that's all good and then what I'm going

1097
00:50:31,820 --> 00:50:38,030
to do up here when we update this guy so

1098
00:50:35,750 --> 00:50:40,190
where we were doing it before after we

1099
00:50:38,030 --> 00:50:42,710
do our target seconds for frame and all

1100
00:50:40,190 --> 00:50:45,889
that stuff what I'm going to do is ahead

1101
00:50:42,710 --> 00:50:47,840
here is say okay update fade we're going

1102
00:50:45,889 --> 00:50:50,119
to update the fader and what that's

1103
00:50:47,840 --> 00:50:53,630
going to do I'm going to have that that

1104
00:50:50,119 --> 00:50:55,969
return what the the new state is if that

1105
00:50:53,630 --> 00:51:00,619
makes sense look what the state that it

1106
00:50:55,969 --> 00:51:02,719
transitions to was like that so it's

1107
00:51:00,619 --> 00:51:05,089
basically going to say like oh yeah you

1108
00:51:02,719 --> 00:51:08,179
know like I'm going to return fader

1109
00:51:05,090 --> 00:51:13,180
state like so I might also go ahead and

1110
00:51:08,179 --> 00:51:13,179
do a little assertion here

1111
00:51:15,539 --> 00:51:25,089
so and so when I do this what I'm trying

1112
00:51:20,440 --> 00:51:29,260
to do now is just say like okay once i

1113
00:51:25,088 --> 00:51:32,078
do my update fade if i needed to take an

1114
00:51:29,260 --> 00:51:34,809
action based on that i will take that

1115
00:51:32,079 --> 00:51:37,059
action so for example for now I'll just

1116
00:51:34,809 --> 00:51:39,250
do the only one I actually care about is

1117
00:51:37,059 --> 00:51:41,589
waiting for clothes so if this thing

1118
00:51:39,250 --> 00:51:43,510
says that I need to close then i'm going

1119
00:51:41,588 --> 00:51:46,269
to say like okay global runnings going

1120
00:51:43,510 --> 00:51:49,210
to get killed here when when the fade

1121
00:51:46,269 --> 00:51:51,730
thing is finished that's the only actual

1122
00:51:49,210 --> 00:51:53,920
state i care about the moment and so I

1123
00:51:51,730 --> 00:51:55,809
think that's all I really need to do now

1124
00:51:53,920 --> 00:51:57,940
I just need to initialize our windows

1125
00:51:55,809 --> 00:51:59,230
properly and that's a real simple matter

1126
00:51:57,940 --> 00:52:01,599
of just saying like here's our win

1127
00:51:59,230 --> 00:52:06,068
through to fader and what I'm going to

1128
00:52:01,599 --> 00:52:08,318
do here just do initialize fader and

1129
00:52:06,068 --> 00:52:10,778
that needs to take our instance but

1130
00:52:08,318 --> 00:52:12,308
that's it and now we're good so hey man

1131
00:52:10,778 --> 00:52:16,989
I probably got some bugs in there it's

1132
00:52:12,309 --> 00:52:19,028
true and oops and I gotta pass the game

1133
00:52:16,989 --> 00:52:22,179
window there but that's at least

1134
00:52:19,028 --> 00:52:23,920
structurally a little more sound now and

1135
00:52:22,179 --> 00:52:25,179
so I can actually like relate to a

1136
00:52:23,920 --> 00:52:26,740
little bit more and hopefully debug it

1137
00:52:25,179 --> 00:52:29,019
more so hey the fade-out worked first

1138
00:52:26,739 --> 00:52:30,909
time that's pretty handy but now we've

1139
00:52:29,019 --> 00:52:34,420
got to work on that fade back to the

1140
00:52:30,909 --> 00:52:36,399
desktop right so yeah first problem is

1141
00:52:34,420 --> 00:52:39,880
alt f4 kind of immediately killed our

1142
00:52:36,400 --> 00:52:41,500
window that's not very reassuring and so

1143
00:52:39,880 --> 00:52:44,528
let's take a look at why that actually

1144
00:52:41,500 --> 00:52:45,699
happened there oh I forgot that actually

1145
00:52:44,528 --> 00:52:47,469
is supposed to immediately kill our

1146
00:52:45,699 --> 00:52:50,019
window its escape that actually exit the

1147
00:52:47,469 --> 00:52:52,028
game now so let's try that and see if

1148
00:52:50,019 --> 00:52:54,489
that does anything that does absolutely

1149
00:52:52,028 --> 00:52:56,559
nothing nothing nothing nothing nothing

1150
00:52:54,489 --> 00:52:58,778
nothing right and if doing absolutely

1151
00:52:56,559 --> 00:53:02,950
nothing is not really what I wanted if I

1152
00:52:58,778 --> 00:53:04,440
wanted to do nothing I would have well I

1153
00:53:02,949 --> 00:53:08,259
don't know why I would have done that

1154
00:53:04,440 --> 00:53:11,710
alright so we've got oh well that would

1155
00:53:08,260 --> 00:53:14,049
do it I think we can see why that's the

1156
00:53:11,710 --> 00:53:16,449
case so begin figure desktop this quit

1157
00:53:14,048 --> 00:53:19,420
requested will presumably stay set to

1158
00:53:16,449 --> 00:53:22,000
true and it'll keep resetting over and

1159
00:53:19,420 --> 00:53:23,139
over again it'll keep for calling begin

1160
00:53:22,000 --> 00:53:24,849
fade to desktop over and over again

1161
00:53:23,139 --> 00:53:26,710
resetting our alpha value so we actually

1162
00:53:24,849 --> 00:53:32,200
want to do is say okay

1163
00:53:26,710 --> 00:53:34,750
if the fader state you know is is if we

1164
00:53:32,199 --> 00:53:37,629
haven't started one of these yet right

1165
00:53:34,750 --> 00:53:40,210
then we would want to do that so it's

1166
00:53:37,630 --> 00:53:41,349
only if the fader state is inactive that

1167
00:53:40,210 --> 00:53:43,119
we actually probably want to let that

1168
00:53:41,349 --> 00:53:44,800
happen so that's a bit of a hacky way to

1169
00:53:43,119 --> 00:53:46,240
do it we should probably make the

1170
00:53:44,800 --> 00:53:50,560
transition a little more explicit there

1171
00:53:46,239 --> 00:53:53,919
but for now that should be fine there's

1172
00:53:50,559 --> 00:53:55,329
that darn window again so we also have a

1173
00:53:53,920 --> 00:53:57,240
problem where we're not hiding that guy

1174
00:53:55,329 --> 00:54:00,088
so let's take a look at that bug first

1175
00:53:57,239 --> 00:54:06,598
so why aren't we hiding that guy uh

1176
00:54:00,088 --> 00:54:09,519
let's see well when we set the window

1177
00:54:06,599 --> 00:54:12,519
set fader alpha when we fade in that's

1178
00:54:09,519 --> 00:54:15,940
supposed to set to zero so that's just a

1179
00:54:12,519 --> 00:54:17,829
mess up isn't it oh no it's not a mess

1180
00:54:15,940 --> 00:54:20,349
up that's supposed to happen here where

1181
00:54:17,829 --> 00:54:22,509
we do waiting for show it's supposed to

1182
00:54:20,349 --> 00:54:24,490
happen here right that's when we're

1183
00:54:22,510 --> 00:54:26,290
supposed to set that that zero to clear

1184
00:54:24,489 --> 00:54:30,879
out the window yeah to avoid the glitch

1185
00:54:26,289 --> 00:54:32,320
right so now we don't have that window

1186
00:54:30,880 --> 00:54:34,990
in the alt tab hierarchy which is what

1187
00:54:32,320 --> 00:54:37,119
we want that's good and now if I hit

1188
00:54:34,989 --> 00:54:38,529
escape there's our fade out and hey

1189
00:54:37,119 --> 00:54:40,180
there's our fade back to the desktop so

1190
00:54:38,530 --> 00:54:44,050
now we're actually working properly fade

1191
00:54:40,179 --> 00:54:46,838
out run the game and we can make that

1192
00:54:44,050 --> 00:54:48,690
fade in if we wanted to write we could

1193
00:54:46,838 --> 00:54:51,909
do that in any number of ways I suppose

1194
00:54:48,690 --> 00:54:54,338
but yet that's all good and then escape

1195
00:54:51,909 --> 00:54:58,000
fades out the game faiths back in the

1196
00:54:54,338 --> 00:55:01,389
desktop and hopefully midlo that is what

1197
00:54:58,000 --> 00:55:05,230
you wanted that's about it not a whole

1198
00:55:01,389 --> 00:55:07,088
lot to say about that other than

1199
00:55:05,230 --> 00:55:10,510
hopefully we did what may blow wanting

1200
00:55:07,088 --> 00:55:12,759
and now you know how to fade the desktop

1201
00:55:10,510 --> 00:55:14,650
in and out happy birthday and again a

1202
00:55:12,760 --> 00:55:16,270
big thank you to Martin's mosaico who

1203
00:55:14,650 --> 00:55:18,358
reminded me of something that I

1204
00:55:16,269 --> 00:55:20,289
ostensibly taught on the stream earlier

1205
00:55:18,358 --> 00:55:23,829
but I guess I didn't teach it very well

1206
00:55:20,289 --> 00:55:25,420
because I myself didn't remember it what

1207
00:55:23,829 --> 00:55:29,739
I'm going to do anyway let's go ahead

1208
00:55:25,420 --> 00:55:33,070
and go to the Q &amp; A in case you have any

1209
00:55:29,739 --> 00:55:36,389
questions about what you just saw we can

1210
00:55:33,070 --> 00:55:36,390
go ahead and answer them now

1211
00:55:43,818 --> 00:55:48,269
midlo says casey you need one more state

1212
00:55:46,260 --> 00:55:51,210
to wait for alpha enabled window to show

1213
00:55:48,269 --> 00:55:53,608
because you might have the same bug when

1214
00:55:51,210 --> 00:55:56,970
you fade to desktop do you think that's

1215
00:55:53,608 --> 00:55:58,318
true because I don't I didn't think that

1216
00:55:56,969 --> 00:56:00,929
would really be the case and I'll

1217
00:55:58,318 --> 00:56:03,119
explain to you why I also don't see it

1218
00:56:00,929 --> 00:56:06,269
happen so I'm assuming I'm I'm right but

1219
00:56:03,119 --> 00:56:07,980
I don't really know so let me explain to

1220
00:56:06,269 --> 00:56:12,869
you why I didn't think I would have that

1221
00:56:07,980 --> 00:56:14,699
bug and here's the reason right so set

1222
00:56:12,869 --> 00:56:16,890
layered window goes through the Alpha

1223
00:56:14,699 --> 00:56:18,989
compositing phase and as soon as you

1224
00:56:16,889 --> 00:56:21,088
call it I believe it goes into the Alpha

1225
00:56:18,989 --> 00:56:24,149
compositing channel of windows which is

1226
00:56:21,088 --> 00:56:26,909
synced properly and does its thing so my

1227
00:56:24,150 --> 00:56:29,639
assumption is in here when you go from

1228
00:56:26,909 --> 00:56:31,889
an active to fading game right as soon

1229
00:56:29,639 --> 00:56:35,519
as we call SW ha as soon as we call set

1230
00:56:31,889 --> 00:56:38,940
fade win fade alpha that layered window

1231
00:56:35,519 --> 00:56:41,969
is active right then it's not going

1232
00:56:38,940 --> 00:56:44,369
through this path which goes through the

1233
00:56:41,969 --> 00:56:46,348
message pump because set layered window

1234
00:56:44,369 --> 00:56:49,048
is actually the call that updates the

1235
00:56:46,349 --> 00:56:50,548
window whereas show window is actually

1236
00:56:49,048 --> 00:56:53,338
just a call that kicks off the whole

1237
00:56:50,548 --> 00:56:55,349
message loop thing so my assumption is

1238
00:56:53,338 --> 00:56:58,380
there actually is no bug between these

1239
00:56:55,349 --> 00:57:00,088
two because this doesn't go through the

1240
00:56:58,380 --> 00:57:04,140
same path right there are different ways

1241
00:57:00,088 --> 00:57:06,779
of working that's my assumption again

1242
00:57:04,139 --> 00:57:08,009
like I said I don't know so until I see

1243
00:57:06,780 --> 00:57:10,680
a bug I'm going to assume that that's

1244
00:57:08,010 --> 00:57:12,630
true but if somebody encounters it doing

1245
00:57:10,679 --> 00:57:14,250
that please let me know and we can try

1246
00:57:12,630 --> 00:57:17,940
and reproduce it but that's my

1247
00:57:14,250 --> 00:57:23,150
assumption that wasn't midlo that was m1

1248
00:57:17,940 --> 00:57:23,150
al sorry didn't mean my blue

1249
00:57:25,119 --> 00:57:29,089
steel golem you're fading setup seems

1250
00:57:27,409 --> 00:57:31,639
overcomplicated me why not just take a

1251
00:57:29,090 --> 00:57:34,250
screenshot blip that to the back buffer

1252
00:57:31,639 --> 00:57:36,409
and fade that what platforms wouldn't

1253
00:57:34,250 --> 00:57:37,340
that work for so there's a number of

1254
00:57:36,409 --> 00:57:39,049
reasons why you wouldn't want to do that

1255
00:57:37,340 --> 00:57:40,970
one is you don't know if you can

1256
00:57:39,050 --> 00:57:44,269
reliably get a copy of the back buffer

1257
00:57:40,969 --> 00:57:48,349
for example suppose that someone is

1258
00:57:44,269 --> 00:57:51,019
playing an hdcp protected movie and has

1259
00:57:48,349 --> 00:57:52,610
paused it in the background well you

1260
00:57:51,019 --> 00:57:54,380
can't get a copy of that from the back

1261
00:57:52,610 --> 00:57:56,329
buffer because windows will prevent you

1262
00:57:54,380 --> 00:57:58,789
from getting copy that prep the black

1263
00:57:56,329 --> 00:58:00,980
buffer and so when you try to fade out

1264
00:57:58,789 --> 00:58:03,079
what you'll actually get is in the

1265
00:58:00,980 --> 00:58:05,090
instant where you transition from your

1266
00:58:03,079 --> 00:58:07,039
from the desktop to your buffer you'll

1267
00:58:05,090 --> 00:58:09,530
just get garbage where that window was

1268
00:58:07,039 --> 00:58:12,409
right number two what if there was an

1269
00:58:09,530 --> 00:58:15,410
alpha overlay right there might be a y

1270
00:58:12,409 --> 00:58:17,149
UV composite overlay that someone was

1271
00:58:15,409 --> 00:58:18,529
using on the graphics card this is like

1272
00:58:17,150 --> 00:58:20,030
an older thing that was often done but

1273
00:58:18,530 --> 00:58:22,100
still you know might be happening to

1274
00:58:20,030 --> 00:58:23,780
this day for all you know where there's

1275
00:58:22,099 --> 00:58:26,239
a color key and the color key is getting

1276
00:58:23,780 --> 00:58:27,890
replaced by the graphics card with a y

1277
00:58:26,239 --> 00:58:30,589
UV overlay that used to happen all the

1278
00:58:27,889 --> 00:58:33,980
time that wouldn't capture properly and

1279
00:58:30,590 --> 00:58:36,470
again you'd get that glitch right you

1280
00:58:33,980 --> 00:58:40,010
get that glitch on the transition next

1281
00:58:36,469 --> 00:58:41,419
one and there's like tons of reasons you

1282
00:58:40,010 --> 00:58:43,820
don't want to do it so I'm just listing

1283
00:58:41,420 --> 00:58:45,110
as many as I could think of so the next

1284
00:58:43,820 --> 00:58:46,940
way you don't really don't reason you

1285
00:58:45,110 --> 00:58:48,230
don't want to do it that way is because

1286
00:58:46,940 --> 00:58:50,300
you don't know what the resolution of

1287
00:58:48,230 --> 00:58:52,010
the desktop is right so what you'd have

1288
00:58:50,300 --> 00:58:53,450
to do first is you have to ask what the

1289
00:58:52,010 --> 00:58:55,190
resolution of the desktop is because if

1290
00:58:53,449 --> 00:58:56,419
you actually just create a back buffer

1291
00:58:55,190 --> 00:59:00,230
that's the resolution that you want to

1292
00:58:56,420 --> 00:59:02,150
run the game at right um and you know

1293
00:59:00,230 --> 00:59:04,730
you either going to change the display

1294
00:59:02,150 --> 00:59:06,530
resolution to your game or you're going

1295
00:59:04,730 --> 00:59:08,119
to just blit at the end do stretch wit

1296
00:59:06,530 --> 00:59:10,160
to put it up there or you've got the

1297
00:59:08,119 --> 00:59:12,139
OpenGL is going to go fullscreen who

1298
00:59:10,159 --> 00:59:13,549
knows what happens right if your

1299
00:59:12,139 --> 00:59:15,349
resolution doesn't match the desktop

1300
00:59:13,550 --> 00:59:17,300
resolution then on that part where

1301
00:59:15,349 --> 00:59:19,519
you're about to fade out everything

1302
00:59:17,300 --> 00:59:21,140
change it you know you get a it all goes

1303
00:59:19,519 --> 00:59:23,659
crunky because like let's say the

1304
00:59:21,139 --> 00:59:25,609
resolution of your game is 1080 x you

1305
00:59:23,659 --> 00:59:30,649
know 1280 by 1024 or something like that

1306
00:59:25,610 --> 00:59:32,840
right and the desktop resolution was you

1307
00:59:30,650 --> 00:59:34,940
know 2400 by whatever 2440 or by

1308
00:59:32,840 --> 00:59:36,559
whatever you're gonna the screen going

1309
00:59:34,940 --> 00:59:38,059
to first down res and then fade out

1310
00:59:36,559 --> 00:59:41,029
right and

1311
00:59:38,059 --> 00:59:42,799
so door to combat that you would have to

1312
00:59:41,030 --> 00:59:45,410
do something where you like you know

1313
00:59:42,800 --> 00:59:48,260
first created a back buffer that was the

1314
00:59:45,409 --> 00:59:51,079
resolution of the desktop copied to that

1315
00:59:48,260 --> 00:59:53,030
faded out in that closed that down

1316
00:59:51,079 --> 00:59:55,159
created a back buffer for your game

1317
00:59:53,030 --> 00:59:57,650
which was their games resolution bring

1318
00:59:55,159 --> 00:59:59,089
that up right and so now who's more

1319
00:59:57,650 --> 01:00:00,530
overcomplicated all of a sudden this

1320
00:59:59,090 --> 01:00:02,059
thing that was like less complicated

1321
01:00:00,530 --> 01:00:04,130
than just having this window is actually

1322
01:00:02,059 --> 01:00:07,759
way more complicated as we more things

1323
01:00:04,130 --> 01:00:09,559
that can go wrong right so really like

1324
01:00:07,760 --> 01:00:10,910
that's just a really bad idea and if you

1325
01:00:09,559 --> 01:00:12,289
can get away without doing that I don't

1326
01:00:10,909 --> 01:00:13,699
think you want to because doing the

1327
01:00:12,289 --> 01:00:15,619
faith this way goes entirely through

1328
01:00:13,699 --> 01:00:17,750
windows composite engine and so as long

1329
01:00:15,619 --> 01:00:27,469
as Windows is able to composite we're

1330
01:00:17,750 --> 01:00:28,760
good right that's what I would say why

1331
01:00:27,469 --> 01:00:30,109
are using a second window for the fade

1332
01:00:28,760 --> 01:00:32,500
in instead of just fading in the main

1333
01:00:30,110 --> 01:00:39,470
window very glad you asked that question

1334
01:00:32,500 --> 01:00:43,550
that is what I would have done a couple

1335
01:00:39,469 --> 01:00:46,009
months ago however I was actually

1336
01:00:43,550 --> 01:00:48,920
playing recently with Laird windows and

1337
01:00:46,010 --> 01:00:51,890
transparency and what I found was that

1338
01:00:48,920 --> 01:00:56,690
if you set the Laird window flag on your

1339
01:00:51,889 --> 01:00:58,339
window your performance goes to I won't

1340
01:00:56,690 --> 01:01:00,409
say the word on the stream because this

1341
01:00:58,340 --> 01:01:01,970
is for children as well we're trying to

1342
01:01:00,409 --> 01:01:02,719
keep this safe for children but point

1343
01:01:01,969 --> 01:01:04,699
being you don't get very good

1344
01:01:02,719 --> 01:01:06,289
performance setting the Laird flag

1345
01:01:04,699 --> 01:01:09,589
actually reduces your performance

1346
01:01:06,289 --> 01:01:12,860
dramatically and I don't know if this is

1347
01:01:09,590 --> 01:01:15,050
necessarily true for stretch blit which

1348
01:01:12,860 --> 01:01:17,030
is what we're using now but it is

1349
01:01:15,050 --> 01:01:19,880
definitely true for OpenGL which is what

1350
01:01:17,030 --> 01:01:22,580
we will use eventually right and so you

1351
01:01:19,880 --> 01:01:25,369
absolutely positively one hundred

1352
01:01:22,579 --> 01:01:29,840
percent in no way ever ever ever ever

1353
01:01:25,369 --> 01:01:32,150
want to set the Laird window flag if you

1354
01:01:29,840 --> 01:01:37,309
are trying to do high performance

1355
01:01:32,150 --> 01:01:39,230
graphics it's just doesn't work it's not

1356
01:01:37,309 --> 01:01:40,820
the fast path for OpenGL so there's just

1357
01:01:39,230 --> 01:01:42,530
problems in the driver I guess where

1358
01:01:40,820 --> 01:01:46,460
whatever it has to negotiate with

1359
01:01:42,530 --> 01:01:48,650
windows just isn't right so yeah I would

1360
01:01:46,460 --> 01:01:52,010
love to actually do it that way that

1361
01:01:48,650 --> 01:01:55,910
would be way more sensical

1362
01:01:52,010 --> 01:01:58,520
but it's just it's it doesn't work in

1363
01:01:55,909 --> 01:02:08,149
windows it's unreliable in terms of

1364
01:01:58,519 --> 01:02:09,559
performance midlo wow thank you for such

1365
01:02:08,150 --> 01:02:10,940
comprehensive answer to my question

1366
01:02:09,559 --> 01:02:12,320
that's exactly what I wanted and they're

1367
01:02:10,940 --> 01:02:14,119
small one would it be possible to make

1368
01:02:12,320 --> 01:02:15,980
bits of the window transparent EG for

1369
01:02:14,119 --> 01:02:17,779
the situation where some monster or

1370
01:02:15,980 --> 01:02:19,420
Monstar as you said has torn a hole in

1371
01:02:17,780 --> 01:02:23,960
the game window revealing to us a leaf

1372
01:02:19,420 --> 01:02:27,139
unfortunately no it is not possible for

1373
01:02:23,960 --> 01:02:32,119
the reason I just said which is to say

1374
01:02:27,139 --> 01:02:34,809
that technically you could totally do

1375
01:02:32,119 --> 01:02:37,429
that with the layered window things but

1376
01:02:34,809 --> 01:02:41,349
performance wise you can't because for

1377
01:02:37,429 --> 01:02:43,730
some reason you get really bad behavior

1378
01:02:41,349 --> 01:02:45,559
when you go through that layered window

1379
01:02:43,730 --> 01:02:48,440
path like I tested this myself and

1380
01:02:45,559 --> 01:02:51,139
literally just setting the flag even if

1381
01:02:48,440 --> 01:02:53,210
you did not use it meaning even if you

1382
01:02:51,139 --> 01:02:55,969
were still at full opacity so there was

1383
01:02:53,210 --> 01:02:57,650
no actual transparency occurring just

1384
01:02:55,969 --> 01:03:00,230
setting the flag reduced OpenGL

1385
01:02:57,650 --> 01:03:03,349
performance dramatically but

1386
01:03:00,230 --> 01:03:07,159
dramatically okay very measurable number

1387
01:03:03,349 --> 01:03:08,659
of milliseconds and again maybe that's

1388
01:03:07,159 --> 01:03:10,549
fixed in you know Windows 10 or

1389
01:03:08,659 --> 01:03:12,230
something so maybe you could do it on

1390
01:03:10,550 --> 01:03:14,900
certain Microsoft platforms but

1391
01:03:12,230 --> 01:03:16,699
definitely on the platform on the

1392
01:03:14,900 --> 01:03:17,930
machine that I was even testing on it I

1393
01:03:16,699 --> 01:03:19,939
didn't have to go test it on like

1394
01:03:17,929 --> 01:03:23,409
hundreds of machines find my dev machine

1395
01:03:19,940 --> 01:03:23,409
it didn't work

1396
01:03:30,690 --> 01:03:34,630
mr. Forrester mentioned suppose your

1397
01:03:32,769 --> 01:03:36,099
Microsoft but instead of wanting all the

1398
01:03:34,630 --> 01:03:37,450
money in the world you just want to make

1399
01:03:36,099 --> 01:03:39,429
a living selling your operating system

1400
01:03:37,449 --> 01:03:41,049
do you think you could do that while

1401
01:03:39,429 --> 01:03:43,149
providing a good way for users of your

1402
01:03:41,050 --> 01:03:46,630
platform to debug the code that uses

1403
01:03:43,150 --> 01:03:48,700
your API yes I strongly suspect that you

1404
01:03:46,630 --> 01:03:51,700
could because I'll be honest I really

1405
01:03:48,699 --> 01:03:53,289
don't think there would be much

1406
01:03:51,699 --> 01:03:55,929
difference to Microsoft's actual

1407
01:03:53,289 --> 01:03:57,670
business model if they just flat-out

1408
01:03:55,929 --> 01:04:00,190
ship the source code to everything but

1409
01:03:57,670 --> 01:04:02,200
like you know the kernel level stuff you

1410
01:04:00,190 --> 01:04:05,590
know like shipping the source code you

1411
01:04:02,199 --> 01:04:08,469
user32 would not change Microsoft sales

1412
01:04:05,590 --> 01:04:09,730
at all at all at all in fact it might

1413
01:04:08,469 --> 01:04:11,409
increase them because people could debug

1414
01:04:09,730 --> 01:04:14,349
it better and security researchers could

1415
01:04:11,409 --> 01:04:18,969
find bugs faster and like help patch the

1416
01:04:14,349 --> 01:04:21,250
OS and all the bugs in it you know so i

1417
01:04:18,969 --> 01:04:22,989
think they absolutely could because no

1418
01:04:21,250 --> 01:04:24,340
one is going to step through kernel code

1419
01:04:22,989 --> 01:04:27,039
anyway unless you're a really really

1420
01:04:24,340 --> 01:04:29,260
hard core and have a kernel debugger set

1421
01:04:27,039 --> 01:04:30,519
up which very very few people do so you

1422
01:04:29,260 --> 01:04:31,510
don't need to ship the source code to

1423
01:04:30,519 --> 01:04:32,769
all the other stuff but you could

1424
01:04:31,510 --> 01:04:34,420
absolutely ship the source code to the

1425
01:04:32,769 --> 01:04:35,530
higher level stuff and like if there are

1426
01:04:34,420 --> 01:04:37,750
certain parts which you don't want ship

1427
01:04:35,530 --> 01:04:39,250
like don't ship those parts but like

1428
01:04:37,750 --> 01:04:40,780
Microsoft off already ships symbol

1429
01:04:39,250 --> 01:04:42,369
server which has like the symbols for

1430
01:04:40,780 --> 01:04:44,590
like stack traces so you do know we're

1431
01:04:42,369 --> 01:04:46,090
in the code you are you just don't get

1432
01:04:44,590 --> 01:04:48,039
any actual source you just only could

1433
01:04:46,090 --> 01:04:49,510
see the like assembly right I think they

1434
01:04:48,039 --> 01:04:53,920
should just ship the source of that just

1435
01:04:49,510 --> 01:04:55,030
forget it just shift the source and and

1436
01:04:53,920 --> 01:04:56,170
then people could just step through it I

1437
01:04:55,030 --> 01:04:57,970
don't think it would affect their

1438
01:04:56,170 --> 01:05:00,659
business model at all if anything have

1439
01:04:57,969 --> 01:05:00,659
to go ahead and prove it

1440
01:05:10,079 --> 01:05:19,719
hmm let's see do have any other

1441
01:05:13,958 --> 01:05:21,639
questions insofar as can you not unset

1442
01:05:19,719 --> 01:05:25,749
the Laird window flag after doing the

1443
01:05:21,639 --> 01:05:29,348
fade so do not 100-percent quote me on

1444
01:05:25,748 --> 01:05:31,838
this but i am ninety-nine point nine

1445
01:05:29,349 --> 01:05:34,229
nine nine nine nine percent positive i

1446
01:05:31,838 --> 01:05:37,869
tried exactly that and the answer is no

1447
01:05:34,228 --> 01:05:39,998
if you like what you might be able to do

1448
01:05:37,869 --> 01:05:42,249
and i don't know because I don't think I

1449
01:05:39,998 --> 01:05:45,568
tried this but what you might be able to

1450
01:05:42,248 --> 01:05:48,278
do is unset the Laird window flag

1451
01:05:45,568 --> 01:05:51,038
destroy the OpenGL context and create a

1452
01:05:48,278 --> 01:05:54,130
new OpenGL context or something like

1453
01:05:51,039 --> 01:05:56,079
that or only create the OpenGL context

1454
01:05:54,130 --> 01:05:58,390
after you unset the Laird window flag or

1455
01:05:56,079 --> 01:06:00,699
something that might work because it

1456
01:05:58,389 --> 01:06:02,558
might be that that it's when you create

1457
01:06:00,699 --> 01:06:06,699
the OpenGL context that it does it I

1458
01:06:02,559 --> 01:06:09,239
don't know right I don't know but simply

1459
01:06:06,699 --> 01:06:14,108
on setting the flag is not sufficient

1460
01:06:09,239 --> 01:06:17,438
right so yeah so if you citizen you

1461
01:06:14,108 --> 01:06:19,328
really cared about a lot right you could

1462
01:06:17,438 --> 01:06:21,338
go do some more testing I did not test

1463
01:06:19,329 --> 01:06:23,499
it extensive I did not like exhaustively

1464
01:06:21,338 --> 01:06:26,768
sit down and see can I make this work

1465
01:06:23,498 --> 01:06:28,838
right I was just like oh whoa didn't

1466
01:06:26,768 --> 01:06:30,308
know that one ok I won't set this

1467
01:06:28,838 --> 01:06:31,688
anymore because it wasn't like critical

1468
01:06:30,309 --> 01:06:33,719
I was doing but if you were like no I've

1469
01:06:31,688 --> 01:06:35,978
got to make the thing that does this

1470
01:06:33,719 --> 01:06:39,548
then you might be able to do something

1471
01:06:35,978 --> 01:06:41,438
like oh I as I I do some rendering and

1472
01:06:39,548 --> 01:06:42,909
it's like slower and less efficient when

1473
01:06:41,438 --> 01:06:44,498
I do the transparent stuff but then as

1474
01:06:42,909 --> 01:06:46,239
soon as I'm untranslated do this other

1475
01:06:44,498 --> 01:06:47,498
stuff I like shut down the consecrate

1476
01:06:46,239 --> 01:06:48,778
new context forever like you might be

1477
01:06:47,498 --> 01:06:51,278
able make something work I don't know

1478
01:06:48,778 --> 01:06:54,039
but the trivial case of just fun saying

1479
01:06:51,278 --> 01:06:55,438
the flag I'm like I pretty much pause I

1480
01:06:54,039 --> 01:06:57,459
tried that and though it doesn't help if

1481
01:06:55,438 --> 01:07:00,538
all you do is on set the flag that

1482
01:06:57,458 --> 01:07:00,538
doesn't restore the performance

1483
01:07:02,090 --> 01:07:04,150
you

1484
01:07:15,358 --> 01:07:21,130
steel column wait why can I alt print

1485
01:07:18,489 --> 01:07:23,168
screen to capture hdcp with Windows but

1486
01:07:21,130 --> 01:07:25,449
I can't take a screen cap manually I

1487
01:07:23,168 --> 01:07:28,268
have lots of screenshots of my ps3

1488
01:07:25,449 --> 01:07:32,709
through the player via print screen so

1489
01:07:28,268 --> 01:07:35,078
it depends entirely on what they like I

1490
01:07:32,708 --> 01:07:37,028
guess who I should say is what the

1491
01:07:35,079 --> 01:07:39,389
content protections actually are is my

1492
01:07:37,028 --> 01:07:47,579
understanding so for example I don't

1493
01:07:39,389 --> 01:07:50,858
really know I don't really know what

1494
01:07:47,579 --> 01:07:54,009
like I don't know the details of the

1495
01:07:50,858 --> 01:07:56,409
hdcp spec if that makes sense and what

1496
01:07:54,009 --> 01:07:58,809
you are not allowed to do all I know is

1497
01:07:56,409 --> 01:08:02,318
that it's definitely possible for it to

1498
01:07:58,809 --> 01:08:05,769
be prevented it for it to be prohibited

1499
01:08:02,318 --> 01:08:07,568
for you to capture video it's like

1500
01:08:05,768 --> 01:08:11,468
full-on not even like you're not even

1501
01:08:07,568 --> 01:08:12,668
allowed to do it right so I don't know

1502
01:08:11,469 --> 01:08:14,108
what the circumstances are where that

1503
01:08:12,668 --> 01:08:18,960
happens but it definitely does happen

1504
01:08:14,108 --> 01:08:22,238
and the ps3 doesn't have hdcp by the way

1505
01:08:18,960 --> 01:08:25,929
by default right the ps3 will only send

1506
01:08:22,238 --> 01:08:28,358
out hdcp as far as I know it only sends

1507
01:08:25,929 --> 01:08:31,088
out a CCP if you're playing actual hdcp

1508
01:08:28,359 --> 01:08:32,409
media I don't think it it's not going to

1509
01:08:31,088 --> 01:08:35,408
turn on the protected flag if you're

1510
01:08:32,408 --> 01:08:36,908
just dreaming a game as far as i know so

1511
01:08:35,408 --> 01:08:39,298
i would say are you absolutely sure that

1512
01:08:36,908 --> 01:08:41,738
you actually use something with HTTP

1513
01:08:39,298 --> 01:08:43,929
actually tried to capture like an actual

1514
01:08:41,738 --> 01:08:47,588
frame of a movie or something that was

1515
01:08:43,929 --> 01:08:55,480
hdcp protected and did it have like no

1516
01:08:47,588 --> 01:08:56,710
screenshot as the thing blah 238 this

1517
01:08:55,479 --> 01:08:58,419
detour was all about startup and

1518
01:08:56,710 --> 01:09:01,029
shutdown fades but how would you fading

1519
01:08:58,420 --> 01:09:03,368
in between in-game scenes this shouldn't

1520
01:09:01,029 --> 01:09:05,409
involve the windows api correct yes so

1521
01:09:03,368 --> 01:09:07,500
once we're in our game so we're only

1522
01:09:05,408 --> 01:09:10,118
talking about fading between our stuff

1523
01:09:07,500 --> 01:09:11,859
that we just can do in our own renderer

1524
01:09:10,118 --> 01:09:14,098
right so that's nice because we don't

1525
01:09:11,859 --> 01:09:16,389
have to do we don't care when is at all

1526
01:09:14,099 --> 01:09:18,219
so feeding in and out to blacks really

1527
01:09:16,389 --> 01:09:20,769
simple that's just a case of modulating

1528
01:09:18,219 --> 01:09:24,880
20 and if you see we've actually already

1529
01:09:20,769 --> 01:09:27,310
got where is our Emacs window there it

1530
01:09:24,880 --> 01:09:30,880
is we've actually already got that in

1531
01:09:27,310 --> 01:09:34,600
I believe in handmade optimized otsuka p

1532
01:09:30,880 --> 01:09:36,100
so when we do drawn out quickly I think

1533
01:09:34,600 --> 01:09:39,670
we've got it yes so you see we've got

1534
01:09:36,100 --> 01:09:43,410
this color modulation happening here so

1535
01:09:39,670 --> 01:09:46,960
if you look at handmade render group and

1536
01:09:43,409 --> 01:09:48,670
who calls this you can see that when we

1537
01:09:46,960 --> 01:09:51,520
when we do this there's an entry color

1538
01:09:48,670 --> 01:09:53,710
parameter right there right and what

1539
01:09:51,520 --> 01:09:55,930
that does right is it modulates the

1540
01:09:53,710 --> 01:09:57,340
bitmap that we're drawing you know

1541
01:09:55,930 --> 01:09:59,409
whatever that texture is it module eight

1542
01:09:57,340 --> 01:10:00,670
sit by particular color so if you wanted

1543
01:09:59,409 --> 01:10:03,340
to fade something to black it'd be

1544
01:10:00,670 --> 01:10:05,529
really pretty easy to do for example

1545
01:10:03,340 --> 01:10:10,239
inside our cut scene that was happening

1546
01:10:05,529 --> 01:10:12,639
here we could do and I'll just sketch it

1547
01:10:10,239 --> 01:10:16,059
out for you if you want to do something

1548
01:10:12,640 --> 01:10:18,430
where you said like okay this particular

1549
01:10:16,060 --> 01:10:21,220
layered scene is going to have a thing

1550
01:10:18,430 --> 01:10:23,770
where it like fades you know from black

1551
01:10:21,220 --> 01:10:24,940
or something right I don't even know so

1552
01:10:23,770 --> 01:10:27,420
we just have a thing that's like fades

1553
01:10:24,939 --> 01:10:29,829
from black that's the thing that you set

1554
01:10:27,420 --> 01:10:33,430
then you could do something and in fact

1555
01:10:29,829 --> 01:10:36,039
I could even do something like a fade in

1556
01:10:33,430 --> 01:10:37,900
you know T fade in I don't know right

1557
01:10:36,039 --> 01:10:39,220
then what you can do is when we create

1558
01:10:37,899 --> 01:10:40,239
these layered scenes right you can kind

1559
01:10:39,220 --> 01:10:41,740
of see that all the Laird scenes

1560
01:10:40,239 --> 01:10:43,119
happening here that I'm like that first

1561
01:10:41,739 --> 01:10:45,579
shot if you want that fateful blackridge

1562
01:10:43,119 --> 01:10:47,710
to say like okay it you know ten percent

1563
01:10:45,579 --> 01:10:49,779
of the way in I want the fade to have

1564
01:10:47,710 --> 01:10:52,359
been completed right and everyone else

1565
01:10:49,779 --> 01:10:53,769
doesn't have it set to anything then

1566
01:10:52,359 --> 01:10:55,089
what we do is when we do render cutting

1567
01:10:53,770 --> 01:10:56,530
the time we go through the shots we

1568
01:10:55,090 --> 01:10:57,670
figure out whether we've got a shot we

1569
01:10:56,529 --> 01:10:59,859
said we're going to render a particular

1570
01:10:57,670 --> 01:11:01,539
layered seen off we come right inside

1571
01:10:59,859 --> 01:11:03,609
rendered layered seen we have teen

1572
01:11:01,539 --> 01:11:05,079
normal okay and what we're going to do

1573
01:11:03,609 --> 01:11:06,789
is we're going to say what's the Alpha

1574
01:11:05,079 --> 01:11:08,439
value for this right what's the Alpha

1575
01:11:06,789 --> 01:11:10,060
value for the global thing right what's

1576
01:11:08,439 --> 01:11:14,199
the or i should say alpha but the global

1577
01:11:10,060 --> 01:11:15,610
fade value right the whole shop whatever

1578
01:11:14,199 --> 01:11:17,769
that shop date is so you know seeing

1579
01:11:15,609 --> 01:11:19,059
fade value so seen fit value is going to

1580
01:11:17,770 --> 01:11:20,320
by default be one which means that

1581
01:11:19,060 --> 01:11:21,880
you're going to see you know the scenes

1582
01:11:20,319 --> 01:11:24,329
just fulbright but what we're going to

1583
01:11:21,880 --> 01:11:27,760
do is say okay if T normal is less than

1584
01:11:24,329 --> 01:11:31,390
whatever the scene says it's t fade in

1585
01:11:27,760 --> 01:11:33,070
is whatever that is if that's the case

1586
01:11:31,390 --> 01:11:36,460
then we're going to set the scene fade

1587
01:11:33,069 --> 01:11:39,729
value equal to the map that like a map

1588
01:11:36,460 --> 01:11:40,630
of smooth 021 based on that whatever

1589
01:11:39,729 --> 01:11:43,419
that time period is

1590
01:11:40,630 --> 01:11:45,130
and we already did that we already know

1591
01:11:43,420 --> 01:11:49,569
exactly how to do this right we did it

1592
01:11:45,130 --> 01:11:51,639
down here where we do right here right

1593
01:11:49,569 --> 01:11:53,529
this this function right here clamp zr1

1594
01:11:51,639 --> 01:11:55,029
map terrain sing between these two and a

1595
01:11:53,529 --> 01:11:56,109
value that lies between these other two

1596
01:11:55,029 --> 01:11:58,359
values I want you to give me a number

1597
01:11:56,109 --> 01:12:01,210
from 0 to 1 that tells me how far

1598
01:11:58,359 --> 01:12:03,369
through there I actually am right so I

1599
01:12:01,210 --> 01:12:05,920
go in here and I say okay give me that

1600
01:12:03,369 --> 01:12:07,960
we know it comes between 0 and whatever

1601
01:12:05,920 --> 01:12:09,819
the fade in value is and I've got mighty

1602
01:12:07,960 --> 01:12:12,189
normal value and so I want you to map

1603
01:12:09,819 --> 01:12:14,619
that out into my fade value now I've

1604
01:12:12,189 --> 01:12:18,369
just got a color right and that color

1605
01:12:14,619 --> 01:12:20,319
can just be the scene fade value every

1606
01:12:18,369 --> 01:12:22,059
time now remember i'm not sitting the

1607
01:12:20,319 --> 01:12:24,069
alpha here this is not an alpha fade i'm

1608
01:12:22,060 --> 01:12:26,020
not making it transparent what i'm doing

1609
01:12:24,069 --> 01:12:27,698
is i'm making it black right i'm

1610
01:12:26,020 --> 01:12:31,449
starting it at black because if i

1611
01:12:27,698 --> 01:12:34,089
multiply every color by 0 r g and b x 0

1612
01:12:31,448 --> 01:12:36,789
i get black if i multiply them by less

1613
01:12:34,090 --> 01:12:39,279
than 0 right I get you know a fade to

1614
01:12:36,789 --> 01:12:40,750
black so one will give me the color 0

1615
01:12:39,279 --> 01:12:43,269
gives me black anywhere in between there

1616
01:12:40,750 --> 01:12:44,800
lets me fade to that black right so now

1617
01:12:43,270 --> 01:12:46,989
all I have to do is every time i render

1618
01:12:44,800 --> 01:12:48,789
a layer I just give it that color right

1619
01:12:46,988 --> 01:12:50,829
so after we get the bitmap out we do

1620
01:12:48,789 --> 01:12:52,750
whatever the thing is we're doing here

1621
01:12:50,829 --> 01:12:54,158
then at the end I just past that color I

1622
01:12:52,750 --> 01:12:57,550
say that's the color I want you to use

1623
01:12:54,158 --> 01:12:59,710
for the bitmap right so now when we do

1624
01:12:57,550 --> 01:13:01,539
it you know we fade out we go to black

1625
01:12:59,710 --> 01:13:04,090
and then we fade back in right and

1626
01:13:01,539 --> 01:13:05,619
that's it and now we can control that

1627
01:13:04,090 --> 01:13:06,579
fade value by using that 0 to 1 look

1628
01:13:05,619 --> 01:13:07,929
maybe you want to fade in a little

1629
01:13:06,579 --> 01:13:09,399
slower me you want it you know let's say

1630
01:13:07,929 --> 01:13:11,619
I want a really slow fade instead of

1631
01:13:09,399 --> 01:13:15,099
that 0.1 value that I stuck in there I'm

1632
01:13:11,619 --> 01:13:17,408
just arbitrarily right I could make it

1633
01:13:15,100 --> 01:13:20,199
take half you know ten seconds to fade

1634
01:13:17,408 --> 01:13:22,569
in if I wanted to and now we fade out

1635
01:13:20,198 --> 01:13:26,109
and then we slowly fade back in again

1636
01:13:22,569 --> 01:13:28,960
right and and and that's how that goes

1637
01:13:26,109 --> 01:13:30,698
now there's a problem with that I think

1638
01:13:28,960 --> 01:13:34,149
I have to think about it which is that

1639
01:13:30,698 --> 01:13:35,888
it's in the wrong alpha space so what we

1640
01:13:34,149 --> 01:13:38,619
probably need to do like if you want to

1641
01:13:35,889 --> 01:13:41,329
be correct about that is like I is we

1642
01:13:38,619 --> 01:13:45,769
need to make sure that alpha

1643
01:13:41,329 --> 01:13:47,539
is is gamma corrected Elsa I think this

1644
01:13:45,770 --> 01:13:48,800
is we're kind of out of time so I really

1645
01:13:47,539 --> 01:13:52,010
don't wanna talk about that right now

1646
01:13:48,800 --> 01:13:53,360
but it's going to be ramped wrong so

1647
01:13:52,010 --> 01:13:57,220
really what has to happen with that

1648
01:13:53,359 --> 01:14:00,739
scene fade value is you have to go like

1649
01:13:57,220 --> 01:14:09,850
and I don't really remember where this

1650
01:14:00,739 --> 01:14:09,849
was probably in math I don't know I

1651
01:14:10,359 --> 01:14:23,329
don't know no no remember no

1652
01:14:15,920 --> 01:14:24,619
recollection whatsoever none yeah I just

1653
01:14:23,329 --> 01:14:37,880
don't know let me let me double-check

1654
01:14:24,619 --> 01:14:39,500
that I'm actually right yeah I mean see

1655
01:14:37,880 --> 01:14:42,529
that just gets that just get straight up

1656
01:14:39,500 --> 01:14:44,539
used right so that's it's going to be

1657
01:14:42,529 --> 01:14:49,840
like the wrong it's going to modulate

1658
01:14:44,539 --> 01:14:49,840
its modulating in linear space I believe

1659
01:14:51,520 --> 01:14:57,230
largely by incoming colored go from srgb

1660
01:14:54,260 --> 01:15:04,210
to linear brightness space oh weird no

1661
01:14:57,229 --> 01:15:09,109
we modulate the textures beforehand well

1662
01:15:04,210 --> 01:15:10,250
that seems really wrong to me so I guess

1663
01:15:09,109 --> 01:15:11,389
I was right we would have put the gamma

1664
01:15:10,250 --> 01:15:15,500
but that's only because of I think we

1665
01:15:11,390 --> 01:15:18,980
did this wrong would you agree with that

1666
01:15:15,500 --> 01:15:24,829
assessment look I feel like that's just

1667
01:15:18,979 --> 01:15:27,079
wrong oh but that's the desk that just

1668
01:15:24,829 --> 01:15:28,279
being loaded out so never mind where do

1669
01:15:27,079 --> 01:15:29,659
we do that that's a desk that I was

1670
01:15:28,279 --> 01:15:32,000
looking out there so where does this

1671
01:15:29,659 --> 01:15:36,430
happen where does this happen when we do

1672
01:15:32,000 --> 01:15:36,430
the mole PS what are those texels in

1673
01:15:37,149 --> 01:15:44,049
when we load those out unpack brother in

1674
01:15:39,829 --> 01:15:48,680
your samples so these all get unpacked

1675
01:15:44,050 --> 01:15:52,340
srl I epi 32 blah blah blah original

1676
01:15:48,680 --> 01:15:54,200
desk here we go convert excerpt from 0

1677
01:15:52,340 --> 01:15:54,949
to 25 that's hard to beat a linear so

1678
01:15:54,199 --> 01:15:57,639
they're in linear

1679
01:15:54,949 --> 01:16:01,250
so I feel like that should be okay I

1680
01:15:57,640 --> 01:16:03,590
feel like that should be okay that's

1681
01:16:01,250 --> 01:16:04,760
think about that because if they're if

1682
01:16:03,590 --> 01:16:07,610
they're in linear and we're multiplying

1683
01:16:04,760 --> 01:16:10,699
by linear that feels like that should

1684
01:16:07,609 --> 01:16:12,409
work so I'm not really sure lets us save

1685
01:16:10,699 --> 01:16:14,750
that because you notice what happened

1686
01:16:12,409 --> 01:16:19,399
when I did that over slow time period at

1687
01:16:14,750 --> 01:16:22,489
right it ramps up in like a very

1688
01:16:19,399 --> 01:16:23,929
nonlinear way to me that at least that's

1689
01:16:22,489 --> 01:16:27,469
what it looked like to me and so that

1690
01:16:23,930 --> 01:16:30,289
looks more like the gamma curve was not

1691
01:16:27,470 --> 01:16:32,659
being applied correctly in some way that

1692
01:16:30,289 --> 01:16:35,090
died am NOT doing like so something is

1693
01:16:32,659 --> 01:16:36,889
not right right something's not right so

1694
01:16:35,090 --> 01:16:37,880
that's something that to look at that

1695
01:16:36,890 --> 01:16:42,079
might be something good to look at

1696
01:16:37,880 --> 01:16:44,810
tomorrow anyway there you go and we're

1697
01:16:42,079 --> 01:16:46,039
on time so that's it so you're just

1698
01:16:44,810 --> 01:16:50,330
going to have to deal with the fact that

1699
01:16:46,039 --> 01:16:54,949
we are out out of time just straight up

1700
01:16:50,329 --> 01:17:00,409
at the time just like out of it all

1701
01:16:54,949 --> 01:17:03,619
right so that's it i will i will wrap it

1702
01:17:00,409 --> 01:17:09,979
up for today and i'm going to say in

1703
01:17:03,619 --> 01:17:14,569
here to do okay see why does this fades

1704
01:17:09,979 --> 01:17:19,089
seem to be wrong it appears nonlinear

1705
01:17:14,569 --> 01:17:23,479
but if it is a linear brightness

1706
01:17:19,090 --> 01:17:24,829
shouldn't get a pure linear and maybe

1707
01:17:23,479 --> 01:17:27,139
that's just we're not understanding it

1708
01:17:24,829 --> 01:17:28,760
properly or i don't know what but i

1709
01:17:27,140 --> 01:17:30,200
would like to know what's going on there

1710
01:17:28,760 --> 01:17:35,960
because i don't really understand so

1711
01:17:30,199 --> 01:17:37,970
leave it that close it down alright

1712
01:17:35,960 --> 01:17:38,960
thank you everyone for joining me for

1713
01:17:37,970 --> 01:17:40,670
another episode of handmade here at some

1714
01:17:38,960 --> 01:17:42,649
Podrick coding with us always if you

1715
01:17:40,670 --> 01:17:45,140
would like to follow along with the

1716
01:17:42,649 --> 01:17:47,149
source code you can always do that by

1717
01:17:45,140 --> 01:17:49,160
pre-ordering the game handmade hero org

1718
01:17:47,149 --> 01:17:50,989
this little handy dandy pre-order button

1719
01:17:49,159 --> 01:17:52,189
it comes with a source code so that you

1720
01:17:50,989 --> 01:17:54,469
can download it and follow along with

1721
01:17:52,189 --> 01:17:55,969
everything I do and it comes to the art

1722
01:17:54,470 --> 01:17:58,520
pack too so if you can play around those

1723
01:17:55,970 --> 01:18:00,320
cutscenes just like I am maybe you can

1724
01:17:58,520 --> 01:18:04,400
figure out why the fade is wrong before

1725
01:18:00,319 --> 01:18:06,710
I do will challenge for you we can go to

1726
01:18:04,399 --> 01:18:08,000
other places to the forum site place to

1727
01:18:06,710 --> 01:18:08,750
answer quick get your questions answered

1728
01:18:08,000 --> 01:18:10,279
ask

1729
01:18:08,750 --> 01:18:12,170
about the series all sorts of good stuff

1730
01:18:10,279 --> 01:18:13,250
like that there's an tied episode guide

1731
01:18:12,170 --> 01:18:15,199
up there you should definitely check out

1732
01:18:13,250 --> 01:18:16,489
there's a patreon page you want support

1733
01:18:15,199 --> 01:18:18,439
the video series you can pledge to that

1734
01:18:16,489 --> 01:18:20,929
very much appreciated we also have a

1735
01:18:18,439 --> 01:18:23,629
tweet bot between schedule at you and

1736
01:18:20,930 --> 01:18:26,030
that tweet bot will tell you that we are

1737
01:18:23,630 --> 01:18:28,760
off tomorrow we are off tomorrow because

1738
01:18:26,029 --> 01:18:31,789
it is the Molly rocket holiday party

1739
01:18:28,760 --> 01:18:33,800
quote unquote but we will be back on

1740
01:18:31,789 --> 01:18:35,899
Wednesday 5 p.m. pacific standard time

1741
01:18:33,800 --> 01:18:38,300
so i will see you guys then when maybe

1742
01:18:35,899 --> 01:18:40,759
we will look at the Alpha problem and

1743
01:18:38,300 --> 01:18:42,590
see why that fade was was it's not later

1744
01:18:40,760 --> 01:18:43,970
who knows maybe we'll figure it out or

1745
01:18:42,590 --> 01:18:45,380
maybe we'll do something else who knows

1746
01:18:43,970 --> 01:18:47,890
only one way to find out and that's to

1747
01:18:45,380 --> 01:18:51,859
come back love to see you until then

1748
01:18:47,890 --> 01:18:53,090
have a good time programming and I'll

1749
01:18:51,859 --> 01:18:55,479
see you guys on the internet take it

1750
01:18:53,090 --> 01:18:55,480
easy everyone

