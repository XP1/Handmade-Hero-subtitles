1
00:00:02,928 --> 00:00:07,080
okay hello everybody and welcome to

2
00:00:05,700 --> 00:00:10,710
handmade hero the show we code a

3
00:00:07,080 --> 00:00:15,210
complete game live on stream we are I

4
00:00:10,710 --> 00:00:18,719
think at this point we're sort of ready

5
00:00:15,210 --> 00:00:20,550
to begin some lighting stuff in earnest

6
00:00:18,719 --> 00:00:22,579
because we kind of debugged all of the

7
00:00:20,550 --> 00:00:25,109
crazy things that we had to deal with

8
00:00:22,579 --> 00:00:26,969
getting GPU stuff to work now there will

9
00:00:25,109 --> 00:00:30,660
still be a little bit more GPU debugging

10
00:00:26,969 --> 00:00:32,250
in our future because we've got to

11
00:00:30,660 --> 00:00:34,590
figure out how we're going to compute

12
00:00:32,250 --> 00:00:37,049
the lighting not on the CPU side of

13
00:00:34,590 --> 00:00:41,910
things so we do have a little bit more

14
00:00:37,049 --> 00:00:44,069
unsavory work to go certainly but we at

15
00:00:41,909 --> 00:00:46,919
least got sort of our our basic

16
00:00:44,070 --> 00:00:50,219
framework stuff for the lighting working

17
00:00:46,920 --> 00:00:54,539
so now when we run lighting code in

18
00:00:50,219 --> 00:00:57,660
theory we can have weight or not

19
00:00:54,539 --> 00:01:02,100
did I leave this not actually rendering

20
00:00:57,659 --> 00:01:05,938
any lighting I thought we left it what's

21
00:01:02,100 --> 00:01:09,478
going on what's happening did I forget

22
00:01:05,938 --> 00:01:15,629
where we left this oh oh I don't know

23
00:01:09,478 --> 00:01:16,319
what this is saying my evaluation period

24
00:01:15,629 --> 00:01:18,810
has expired

25
00:01:16,319 --> 00:01:28,798
I never know I was in an evaluation

26
00:01:18,810 --> 00:01:29,849
period well that's unfortunate anyway

27
00:01:28,799 --> 00:01:33,180
let me continue what I was saying before

28
00:01:29,849 --> 00:01:38,548
we deal with Microsoft's the disaster

29
00:01:33,180 --> 00:01:40,590
there I so I thought we had left this at

30
00:01:38,549 --> 00:01:44,729
normal lighting but it looks like we

31
00:01:40,590 --> 00:01:48,000
didn't do that and I'm not sure why so I

32
00:01:44,728 --> 00:01:53,819
take it back let's go ahead and find out

33
00:01:48,000 --> 00:01:56,090
what's going on with that let me jump in

34
00:01:53,819 --> 00:01:56,089
here

35
00:01:57,269 --> 00:02:05,328
oh I remember what nevermind I do

36
00:02:01,739 --> 00:02:07,739
remember I lied we were trying to add

37
00:02:05,328 --> 00:02:10,409
letting direction that's what was

38
00:02:07,739 --> 00:02:13,280
happening so we stopped we had just done

39
00:02:10,409 --> 00:02:15,900
this D bit here so let me quickly

40
00:02:13,280 --> 00:02:18,390
uncomment that so that you can see what

41
00:02:15,900 --> 00:02:23,340
I was about to try and say lighting wise

42
00:02:18,389 --> 00:02:25,979
and then we can go and do that get it

43
00:02:23,340 --> 00:02:29,519
actually working so in here we've got

44
00:02:25,979 --> 00:02:31,738
this this inner product between the

45
00:02:29,519 --> 00:02:35,250
light Direction RGB in the world and

46
00:02:31,739 --> 00:02:39,060
that's actually the part that we haven't

47
00:02:35,250 --> 00:02:41,610
done yet so that's that was why I guess

48
00:02:39,060 --> 00:02:43,860
we did leave it intentionally that way

49
00:02:41,610 --> 00:02:45,750
so this was where we left the lighting

50
00:02:43,860 --> 00:02:48,390
and we were about to put lighting

51
00:02:45,750 --> 00:02:51,719
direction in there the point of lighting

52
00:02:48,389 --> 00:02:53,068
direction was we're now now that we have

53
00:02:51,719 --> 00:02:54,750
something that you can sort of see is

54
00:02:53,068 --> 00:02:57,539
starting to resemble a lighting solution

55
00:02:54,750 --> 00:03:00,900
although isn't quite there yet you can

56
00:02:57,539 --> 00:03:02,099
kind of see that it's like yeah okay you

57
00:03:00,900 --> 00:03:04,409
know I could believe this will someday

58
00:03:02,099 --> 00:03:06,449
compute some lighting it sort of looks

59
00:03:04,409 --> 00:03:09,030
like it's actually working per pixel and

60
00:03:06,449 --> 00:03:11,459
kind of relevant to where the lights are

61
00:03:09,030 --> 00:03:13,039
and all that good stuff but when you

62
00:03:11,459 --> 00:03:17,370
take a look at it you can kind of see

63
00:03:13,039 --> 00:03:19,349
that the surfaces themselves don't know

64
00:03:17,370 --> 00:03:21,569
where the light is coming from right so

65
00:03:19,349 --> 00:03:23,519
if you see like around here that should

66
00:03:21,568 --> 00:03:26,039
be a hard edge this is two sides of a

67
00:03:23,519 --> 00:03:27,599
cube right so it's this but instead of

68
00:03:26,039 --> 00:03:30,120
being a hard edge it's just sort of this

69
00:03:27,598 --> 00:03:31,979
gradient wash and the reason for that is

70
00:03:30,120 --> 00:03:33,840
because it has no idea where the lights

71
00:03:31,979 --> 00:03:35,759
coming from so it doesn't have the

72
00:03:33,840 --> 00:03:38,250
ability to attenuate lighting reflection

73
00:03:35,759 --> 00:03:41,668
or change lighting reflection in any way

74
00:03:38,250 --> 00:03:43,650
based on the facing direction of the

75
00:03:41,669 --> 00:03:44,790
surface versus the light source because

76
00:03:43,650 --> 00:03:46,439
while it does know the facing direction

77
00:03:44,789 --> 00:03:48,539
of the surface it does not know the

78
00:03:46,439 --> 00:03:50,370
facing direction of the light source so

79
00:03:48,539 --> 00:03:52,469
it can't do the standard reflection

80
00:03:50,370 --> 00:03:53,849
computations that you might want to do

81
00:03:52,469 --> 00:03:56,068
to improve the quality of your lighting

82
00:03:53,848 --> 00:03:58,318
and take into account surface direction

83
00:03:56,068 --> 00:04:01,048
which is a pretty important lighting cue

84
00:03:58,318 --> 00:04:02,219
for people now maybe you want lighting

85
00:04:01,049 --> 00:04:04,079
that looks like this and that's fine

86
00:04:02,219 --> 00:04:05,789
there's nothing wrong with that but it's

87
00:04:04,079 --> 00:04:07,680
just not probably what you want because

88
00:04:05,789 --> 00:04:10,250
it's pretty far from the way lighting

89
00:04:07,680 --> 00:04:12,050
would actually work

90
00:04:10,250 --> 00:04:14,319
so what we were gonna do is we're gonna

91
00:04:12,050 --> 00:04:17,799
go ahead in here and put in a

92
00:04:14,319 --> 00:04:21,319
contribution from the light direction

93
00:04:17,798 --> 00:04:24,439
and that's what we ended with last time

94
00:04:21,319 --> 00:04:27,199
that's why it was black because here we

95
00:04:24,439 --> 00:04:29,209
have doing the dot product with the

96
00:04:27,199 --> 00:04:30,949
lighting direction and the surface

97
00:04:29,209 --> 00:04:33,319
normal of the surface and the problem is

98
00:04:30,949 --> 00:04:36,379
just we have not yet set down the

99
00:04:33,319 --> 00:04:38,300
lighting direction right so what we

100
00:04:36,379 --> 00:04:39,829
wanted to do is now be able to send down

101
00:04:38,300 --> 00:04:41,449
the lighting direction which might sound

102
00:04:39,829 --> 00:04:42,829
easy but it's actually takes a little

103
00:04:41,449 --> 00:04:44,990
bit of work on our part the reason it

104
00:04:42,829 --> 00:04:47,509
takes a little bit of work on our part

105
00:04:44,990 --> 00:04:49,009
is because when we compute our lighting

106
00:04:47,509 --> 00:04:50,930
solution remember we're computing an

107
00:04:49,009 --> 00:04:54,439
aggregate lighting solution for various

108
00:04:50,930 --> 00:04:56,990
places in a voxel right we're using

109
00:04:54,439 --> 00:04:59,329
these light sort of reflectors to

110
00:04:56,990 --> 00:05:01,970
compute an approximate lighting solution

111
00:04:59,329 --> 00:05:03,620
for the scene and we're kind of eyeing

112
00:05:01,970 --> 00:05:05,630
getting that down to the GPU at some

113
00:05:03,620 --> 00:05:06,980
point so we're kind of doing we're

114
00:05:05,629 --> 00:05:08,360
certainly not doing anything like ray

115
00:05:06,980 --> 00:05:10,700
tracing per pixel anything that we're

116
00:05:08,360 --> 00:05:14,540
doing sort of some loose ray tracing for

117
00:05:10,699 --> 00:05:16,579
some sort of sparse elements of the

118
00:05:14,540 --> 00:05:17,780
scene to try and create something we can

119
00:05:16,579 --> 00:05:19,639
use to approximate the lighting

120
00:05:17,779 --> 00:05:24,739
everywhere to sort of a low fidelity

121
00:05:19,639 --> 00:05:26,149
result and in doing so we don't actually

122
00:05:24,740 --> 00:05:27,439
know where the light is coming from

123
00:05:26,149 --> 00:05:30,560
because we're not tracking that

124
00:05:27,439 --> 00:05:33,668
information yet so in here where we pack

125
00:05:30,560 --> 00:05:36,949
these values together you can see this

126
00:05:33,668 --> 00:05:39,560
where we packed down the color we also

127
00:05:36,949 --> 00:05:41,539
want to be able to pack down the normal

128
00:05:39,560 --> 00:05:43,160
and so in order to do that we need to

129
00:05:41,540 --> 00:05:44,629
get it from somewhere you can see us

130
00:05:43,160 --> 00:05:46,160
getting like stuff like the emission

131
00:05:44,629 --> 00:05:48,529
coloring out here what we need to be

132
00:05:46,160 --> 00:05:51,320
able to do here is also get the D value

133
00:05:48,529 --> 00:05:54,939
out and so what I'm gonna do is say I

134
00:05:51,319 --> 00:05:54,939
think we already put it in here actually

135
00:05:59,658 --> 00:06:05,120
here's a lighting element and you can

136
00:06:02,639 --> 00:06:08,370
see that I put in sort of like this

137
00:06:05,120 --> 00:06:12,240
situation here that's sort of what we

138
00:06:08,370 --> 00:06:13,949
want to get out of it we're gonna ignore

139
00:06:12,240 --> 00:06:16,769
incident light for a moment we're just

140
00:06:13,949 --> 00:06:18,288
gonna use average direction to light and

141
00:06:16,769 --> 00:06:21,079
that's the thing that I need to fill out

142
00:06:18,288 --> 00:06:24,779
so for right now we're gonna do that and

143
00:06:21,079 --> 00:06:26,189
we're gonna have to track that value so

144
00:06:24,779 --> 00:06:27,839
as you can see that hasn't actually

145
00:06:26,189 --> 00:06:29,810
helped us at all right we're still gonna

146
00:06:27,839 --> 00:06:33,060
be black because we're not filling out

147
00:06:29,810 --> 00:06:34,829
average direction to light but that is

148
00:06:33,060 --> 00:06:38,490
our goal for today is we want to start

149
00:06:34,829 --> 00:06:40,109
filling that out so here we are in

150
00:06:38,490 --> 00:06:41,579
lighting test I don't know why this

151
00:06:40,110 --> 00:06:42,930
ambient inclusion crap is still in here

152
00:06:41,579 --> 00:06:45,329
because we don't use it anymore and I

153
00:06:42,930 --> 00:06:48,418
don't think we're gonna so I made just

154
00:06:45,329 --> 00:06:50,609
nuke it it's it's just bad it was just

155
00:06:48,418 --> 00:06:58,019
in our way what I could do is just do

156
00:06:50,610 --> 00:07:01,379
this that way it's not in our line of

157
00:06:58,019 --> 00:07:03,240
sight anymore and here's our compute

158
00:07:01,379 --> 00:07:05,009
lighting function you can see us doing

159
00:07:03,240 --> 00:07:07,800
some iterations here we then do ray

160
00:07:05,009 --> 00:07:10,110
casting so on and so forth

161
00:07:07,800 --> 00:07:12,509
and so now we restructured this loop at

162
00:07:10,110 --> 00:07:13,919
the end of last week to not be so weird

163
00:07:12,509 --> 00:07:15,810
it was kind of weird because we came at

164
00:07:13,918 --> 00:07:17,788
it at a weird angle so it wasn't really

165
00:07:15,810 --> 00:07:19,259
written as a straight forward ray cast

166
00:07:17,788 --> 00:07:21,300
now it is written in a straightforward

167
00:07:19,259 --> 00:07:22,680
ray cast you can see that there's some

168
00:07:21,300 --> 00:07:24,360
number of iterations that are gonna be

169
00:07:22,680 --> 00:07:26,430
done in average together there's a

170
00:07:24,360 --> 00:07:28,050
destination index which is to say each

171
00:07:26,430 --> 00:07:29,579
lighting element we're gonna step

172
00:07:28,050 --> 00:07:31,650
through in series and do a bunch of ray

173
00:07:29,579 --> 00:07:33,449
casts together lighting from it again

174
00:07:31,649 --> 00:07:35,158
this is not intended to be a final

175
00:07:33,449 --> 00:07:37,460
starlit style loop it's just intended to

176
00:07:35,158 --> 00:07:39,509
do something that we can practice with

177
00:07:37,459 --> 00:07:41,128
to get our lighting solutions to

178
00:07:39,509 --> 00:07:43,528
someplace we want and then we'll worry

179
00:07:41,129 --> 00:07:46,020
about optimizing them later so then

180
00:07:43,528 --> 00:07:47,699
here's our ray count we're going to cast

181
00:07:46,019 --> 00:07:49,168
a trays at the moment but that's an

182
00:07:47,699 --> 00:07:50,968
arbitrary value can set to whatever you

183
00:07:49,168 --> 00:07:54,028
want just makes it more accurate and

184
00:07:50,968 --> 00:07:56,250
slower as you increase it we then go

185
00:07:54,028 --> 00:07:57,778
ahead and go through it's an N squared

186
00:07:56,250 --> 00:07:58,978
algorithm we go through every that's why

187
00:07:57,778 --> 00:08:00,629
I say we're gonna have to optimize it

188
00:07:58,978 --> 00:08:03,028
eventually it goes N squared is the slow

189
00:08:00,629 --> 00:08:05,460
thing we're gonna go through all of the

190
00:08:03,028 --> 00:08:08,069
sources which are basically the other

191
00:08:05,459 --> 00:08:09,629
lighting elements in the scene and we're

192
00:08:08,069 --> 00:08:12,420
gonna cast rays to see whether or not we

193
00:08:09,629 --> 00:08:13,949
can hit them whether or not we hit them

194
00:08:12,420 --> 00:08:17,610
whatever the closest one is that we get

195
00:08:13,949 --> 00:08:20,339
right we then say that's the one that

196
00:08:17,610 --> 00:08:22,199
would contribute from this ray and so

197
00:08:20,339 --> 00:08:24,269
here is the case where we did hit

198
00:08:22,199 --> 00:08:25,649
something right because you might hit

199
00:08:24,269 --> 00:08:26,849
nothing and we might want to have

200
00:08:25,649 --> 00:08:28,709
something that happens when you hit

201
00:08:26,850 --> 00:08:32,220
nothing as well you might get incident

202
00:08:28,709 --> 00:08:33,689
light from say skylight at that point or

203
00:08:32,220 --> 00:08:41,129
something like that like an ambient

204
00:08:33,690 --> 00:08:43,020
light okay so once we get in here you

205
00:08:41,129 --> 00:08:45,600
can see us taking a look at what the

206
00:08:43,019 --> 00:08:46,829
light is I don't think we really need

207
00:08:45,600 --> 00:08:48,090
this light distance thing but it's fine

208
00:08:46,830 --> 00:08:49,320
to check anyway if two things were right

209
00:08:48,090 --> 00:08:51,470
on top of each other for some reason we

210
00:08:49,320 --> 00:08:54,300
just want to avoid doing anything stupid

211
00:08:51,470 --> 00:08:56,009
so here where we've got all of our

212
00:08:54,299 --> 00:08:58,079
lighting stuff what you can see us doing

213
00:08:56,009 --> 00:08:59,909
here is computing the the lighting and

214
00:08:58,080 --> 00:09:02,160
accumulating the total light

215
00:08:59,909 --> 00:09:08,209
contribution what we really want to do

216
00:09:02,159 --> 00:09:08,209
here is start to expand this tracking to

217
00:09:08,629 --> 00:09:18,899
yeah you can in fact you can kind of see

218
00:09:11,009 --> 00:09:21,360
here you can kind of see here we have

219
00:09:18,899 --> 00:09:22,500
some weird remnants of stuff and like we

220
00:09:21,360 --> 00:09:26,850
should just clean this up a little bit

221
00:09:22,500 --> 00:09:28,379
so that desk visibility isn't really

222
00:09:26,850 --> 00:09:30,120
being used anymore if I remember

223
00:09:28,379 --> 00:09:32,039
correctly so you can kind of see this is

224
00:09:30,120 --> 00:09:34,409
a thing that gets computed in this

225
00:09:32,039 --> 00:09:36,659
ambient occlusion stuff I just don't

226
00:09:34,409 --> 00:09:39,569
like this stuff this is we kind of we're

227
00:09:36,659 --> 00:09:41,069
looking at an old paper and we did some

228
00:09:39,570 --> 00:09:42,780
of the stuffs in there I'm you know it's

229
00:09:41,070 --> 00:09:45,120
just bothered me so it's just gonna go I

230
00:09:42,779 --> 00:09:47,549
mean we have a github and we have the

231
00:09:45,120 --> 00:09:49,620
old source zips if we ever need to grab

232
00:09:47,549 --> 00:09:50,849
it out again we can I don't like that so

233
00:09:49,620 --> 00:09:52,590
I'm gonna just start simplifying this

234
00:09:50,850 --> 00:09:58,769
down cuz I just want to get rid of

235
00:09:52,590 --> 00:10:00,899
things that I don't want in there where

236
00:09:58,769 --> 00:10:02,370
is that there it is so in the lighting

237
00:10:00,899 --> 00:10:04,439
element I'm gonna say we don't have this

238
00:10:02,370 --> 00:10:06,960
anymore this is not there anymore that's

239
00:10:04,440 --> 00:10:08,550
going away the static information is the

240
00:10:06,960 --> 00:10:10,830
stuff that comes in so that's all fine

241
00:10:08,549 --> 00:10:12,799
the reference color the transparency the

242
00:10:10,830 --> 00:10:15,000
radius the position in the normal right

243
00:10:12,799 --> 00:10:16,229
so now let's start to try and work with

244
00:10:15,000 --> 00:10:18,990
this other stuff and let's try to make

245
00:10:16,230 --> 00:10:20,789
something reasonable so we have this

246
00:10:18,990 --> 00:10:21,960
front emit color in the back emit color

247
00:10:20,789 --> 00:10:23,730
at the front emit color and back

248
00:10:21,960 --> 00:10:26,009
macclare are how what kind of light were

249
00:10:23,730 --> 00:10:29,009
shining out on us

250
00:10:26,009 --> 00:10:31,769
and that is all well and good but the

251
00:10:29,009 --> 00:10:33,000
problem is we've sort of got to again

252
00:10:31,769 --> 00:10:34,379
we've got to sort of things and I'm

253
00:10:33,000 --> 00:10:37,500
comment this as well should we do at the

254
00:10:34,379 --> 00:10:40,500
same time we sort of have two different

255
00:10:37,500 --> 00:10:42,179
things that are happening here right one

256
00:10:40,500 --> 00:10:46,589
thing that's happening here is when we

257
00:10:42,179 --> 00:10:48,359
want to we want to collect the light

258
00:10:46,589 --> 00:10:50,670
that's coming into a surface and then we

259
00:10:48,360 --> 00:10:52,889
want to reflect it out on other things

260
00:10:50,669 --> 00:10:56,069
as we do our iterations for a rate for a

261
00:10:52,889 --> 00:10:59,129
ray casting right so we kind of have

262
00:10:56,070 --> 00:11:00,540
this sort of dual problem there's a

263
00:10:59,129 --> 00:11:03,389
couple of different ways we can look at

264
00:11:00,539 --> 00:11:05,849
this one way is we can not convict that

265
00:11:03,389 --> 00:11:06,899
light around you know let me just draw a

266
00:11:05,850 --> 00:11:08,220
diagram because this is this is

267
00:11:06,899 --> 00:11:10,350
complicated enough that I feel like I'm

268
00:11:08,220 --> 00:11:12,920
gonna have trouble explaining it without

269
00:11:10,350 --> 00:11:12,920
a diagram

270
00:11:16,629 --> 00:11:23,559
so we've got a couple of different

271
00:11:18,850 --> 00:11:27,339
things but think about it this way so

272
00:11:23,559 --> 00:11:29,758
let's say this is an emitter so this is

273
00:11:27,339 --> 00:11:31,959
set to actually radiate light outwards

274
00:11:29,759 --> 00:11:33,278
and let's say this is just a standard

275
00:11:31,958 --> 00:11:35,068
reflector so it doesn't have any

276
00:11:33,278 --> 00:11:38,078
emission but it does reflect light and

277
00:11:35,068 --> 00:11:40,059
here's the person we're computing okay

278
00:11:38,078 --> 00:11:41,559
so what's gonna happen here is we're

279
00:11:40,059 --> 00:11:45,849
gonna start casting rays out from this

280
00:11:41,559 --> 00:11:49,239
thing now one of the Rays might hit the

281
00:11:45,850 --> 00:11:51,220
actual emitter and when it hits the

282
00:11:49,240 --> 00:11:53,159
actual admit err that's fine we know

283
00:11:51,220 --> 00:11:55,540
exactly what's gonna happen here right

284
00:11:53,159 --> 00:11:56,980
whatever the emission is of this it's

285
00:11:55,539 --> 00:11:59,198
gonna send that light to this surface

286
00:11:56,980 --> 00:12:01,509
and that lets us know some incident

287
00:11:59,198 --> 00:12:03,909
light so if we wanted to store if that

288
00:12:01,509 --> 00:12:07,560
was the only way we were sending if we

289
00:12:03,909 --> 00:12:11,740
wanted just to store the incident light

290
00:12:07,559 --> 00:12:13,508
and the average direction that that

291
00:12:11,740 --> 00:12:15,730
light was coming from we know exactly

292
00:12:13,509 --> 00:12:17,318
what it is it's however much light this

293
00:12:15,730 --> 00:12:20,819
is emitting and whatever the Ray

294
00:12:17,318 --> 00:12:23,159
direction was right that's all there is

295
00:12:20,818 --> 00:12:26,349
now let's say there's a second emitter

296
00:12:23,159 --> 00:12:29,169
this is emitter - and one of our rays

297
00:12:26,350 --> 00:12:31,600
also hits that so we catch two rays and

298
00:12:29,169 --> 00:12:33,370
we can hit both of them well what we can

299
00:12:31,600 --> 00:12:35,528
do is just add the incident light

300
00:12:33,370 --> 00:12:37,448
together right so we can have incident

301
00:12:35,528 --> 00:12:41,350
light you know from one plus the light

302
00:12:37,448 --> 00:12:44,708
from two right so it'd be like emit one

303
00:12:41,350 --> 00:12:46,629
plus admit two for both of these right

304
00:12:44,708 --> 00:12:49,388
and then we average the two directions

305
00:12:46,629 --> 00:12:51,789
together to get an average incoming

306
00:12:49,389 --> 00:12:53,409
direction and again not a perfect

307
00:12:51,789 --> 00:12:55,269
legging solution but in terms of just

308
00:12:53,409 --> 00:12:57,039
figuring out what the average is there

309
00:12:55,269 --> 00:12:57,789
we go now we could do a little bit

310
00:12:57,039 --> 00:13:00,039
better than this

311
00:12:57,789 --> 00:13:02,500
if we want to because we can take a look

312
00:13:00,039 --> 00:13:04,899
at the magnitude of each of these so if

313
00:13:02,500 --> 00:13:07,778
this was really bright and this was

314
00:13:04,899 --> 00:13:10,448
really dim we could wait the normal

315
00:13:07,778 --> 00:13:12,039
towards the bright one because that's

316
00:13:10,448 --> 00:13:14,169
gonna give a more accurate reflection

317
00:13:12,039 --> 00:13:16,480
since the majority of the light is

318
00:13:14,169 --> 00:13:18,099
coming from emitter one if the normal

319
00:13:16,480 --> 00:13:19,688
was more bent towards emitter one we

320
00:13:18,100 --> 00:13:21,490
would end up with a better approximate

321
00:13:19,688 --> 00:13:23,230
lighting solution by saying that the

322
00:13:21,490 --> 00:13:25,419
average incoming light Direction is

323
00:13:23,230 --> 00:13:27,100
actually that way not halfway in between

324
00:13:25,419 --> 00:13:30,309
them since not very much light is

325
00:13:27,100 --> 00:13:33,370
actually coming from inner - right

326
00:13:30,309 --> 00:13:34,839
again none of this is perfect and again

327
00:13:33,370 --> 00:13:37,899
this is also where people start getting

328
00:13:34,840 --> 00:13:39,639
into a lot of crazy stuff if you want to

329
00:13:37,899 --> 00:13:41,769
try and do better approximations to it

330
00:13:39,639 --> 00:13:47,799
this is where things like spherical

331
00:13:41,769 --> 00:13:49,179
harmonics come in basically there are

332
00:13:47,799 --> 00:13:50,769
other ways I've mentioned this in the

333
00:13:49,179 --> 00:13:52,839
stream before I'll just mention it again

334
00:13:50,769 --> 00:13:55,120
there are other ways of encoding light

335
00:13:52,840 --> 00:13:56,830
that get increasingly more complicated

336
00:13:55,120 --> 00:13:59,200
sometimes they're good sometimes they're

337
00:13:56,830 --> 00:14:00,520
bad they have drawbacks for alarm onyx

338
00:13:59,200 --> 00:14:02,110
in particular has drawbacks of there

339
00:14:00,519 --> 00:14:04,689
being very hard to transform and stuff

340
00:14:02,110 --> 00:14:06,580
but if you become familiar with a

341
00:14:04,690 --> 00:14:07,840
particular representation such as severe

342
00:14:06,580 --> 00:14:10,330
achill harmonics you can get pretty

343
00:14:07,840 --> 00:14:11,980
facile with it and figure out how to do

344
00:14:10,330 --> 00:14:14,200
things that will lead to good results

345
00:14:11,980 --> 00:14:16,240
that aren't too expensive to compute so

346
00:14:14,200 --> 00:14:20,500
there are other ways of trying to encode

347
00:14:16,240 --> 00:14:22,419
more information than just what the

348
00:14:20,500 --> 00:14:24,159
direction is on average you can try to

349
00:14:22,419 --> 00:14:24,789
encode information about how it varied

350
00:14:24,159 --> 00:14:28,360
as well

351
00:14:24,789 --> 00:14:31,269
right so if you want to try and get a

352
00:14:28,360 --> 00:14:34,360
more accurate lighting solution you can

353
00:14:31,269 --> 00:14:36,939
try some of these things so anyway so

354
00:14:34,360 --> 00:14:40,529
that's pretty straightforward and that's

355
00:14:36,940 --> 00:14:40,530
something that we should be able to

356
00:14:41,700 --> 00:14:44,650
that's something that we can mimic

357
00:14:43,419 --> 00:14:47,139
pretty easily right

358
00:14:44,649 --> 00:14:49,240
not much there's not much fanciness

359
00:14:47,139 --> 00:14:51,370
there I think hopefully everyone sees

360
00:14:49,240 --> 00:14:53,440
how we could modify that loop to do that

361
00:14:51,370 --> 00:14:55,539
but the other thing that we might want

362
00:14:53,440 --> 00:14:57,220
to do is do this in an iterative fashion

363
00:14:55,539 --> 00:14:58,480
that's more like radiosity than it is

364
00:14:57,220 --> 00:15:00,129
like ray tracing and what I mean by that

365
00:14:58,480 --> 00:15:02,500
is now let's take into account

366
00:15:00,129 --> 00:15:03,639
reflectors this is pretty

367
00:15:02,500 --> 00:15:06,149
straightforward because it's just ray

368
00:15:03,639 --> 00:15:08,139
casting to admit errs so there isn't any

369
00:15:06,149 --> 00:15:10,240
ambiguity about what we might want to do

370
00:15:08,139 --> 00:15:11,559
once we introduce reflectors which are

371
00:15:10,240 --> 00:15:13,509
things that don't emit which is most

372
00:15:11,559 --> 00:15:15,219
surfaces but that we do want to bounce

373
00:15:13,509 --> 00:15:17,588
light to us so we can have some indirect

374
00:15:15,220 --> 00:15:18,639
lighting which we would like to have

375
00:15:17,589 --> 00:15:20,890
because direct lighting is not

376
00:15:18,639 --> 00:15:22,629
particularly interesting once we want to

377
00:15:20,889 --> 00:15:23,830
have indirect lighting we do have a

378
00:15:22,629 --> 00:15:25,809
problem about how we're going to compute

379
00:15:23,830 --> 00:15:29,440
that so one way to compute that is you

380
00:15:25,809 --> 00:15:32,949
always do the Ray casting again right so

381
00:15:29,440 --> 00:15:35,290
we do a ray cast out to here we find

382
00:15:32,950 --> 00:15:37,570
this reflector and then we say okay well

383
00:15:35,289 --> 00:15:40,000
let's cast another ray and see if we hit

384
00:15:37,570 --> 00:15:41,620
an emitter right the reason that that's

385
00:15:40,000 --> 00:15:43,419
particularly problematic is because it

386
00:15:41,620 --> 00:15:43,870
leads to having to do a lot more ray

387
00:15:43,419 --> 00:15:45,849
cast

388
00:15:43,870 --> 00:15:49,929
than you would like so what we would

389
00:15:45,850 --> 00:15:52,990
rather probably do is allow the emitters

390
00:15:49,929 --> 00:15:56,049
to spread out to the reflectors first

391
00:15:52,990 --> 00:16:01,269
instead and then when we hit a reflector

392
00:15:56,049 --> 00:16:03,819
we know to grab it back right so the

393
00:16:01,269 --> 00:16:05,889
problem here is that it's like we may

394
00:16:03,820 --> 00:16:10,028
want to do some amount of forward

395
00:16:05,889 --> 00:16:14,799
propagation and then do our gather and

396
00:16:10,028 --> 00:16:16,539
so it's just like with anything else

397
00:16:14,799 --> 00:16:18,278
it's just a question of how we want to

398
00:16:16,539 --> 00:16:21,159
do it and I'm not sure exactly what the

399
00:16:18,278 --> 00:16:24,370
right mix is one you know one way to do

400
00:16:21,159 --> 00:16:26,528
it is to always just do ray casting the

401
00:16:24,370 --> 00:16:28,659
entire time that probably will be pretty

402
00:16:26,528 --> 00:16:31,240
expensive for us so the way I was

403
00:16:28,659 --> 00:16:33,490
thinking of doing it is more like where

404
00:16:31,240 --> 00:16:37,060
we spread things out so what I think we

405
00:16:33,490 --> 00:16:39,820
might want to do here is create a simple

406
00:16:37,059 --> 00:16:44,500
final gather loop that literally just

407
00:16:39,820 --> 00:16:46,960
casts out rays from this surface that

408
00:16:44,500 --> 00:16:49,269
we're computing and it just averages the

409
00:16:46,960 --> 00:16:51,670
results it sees probably based on

410
00:16:49,269 --> 00:16:54,189
magnitude so it a ver ajiz the color and

411
00:16:51,669 --> 00:16:57,639
then averages the normal weighted by the

412
00:16:54,190 --> 00:17:00,580
magnitude of the color that is probably

413
00:16:57,639 --> 00:17:03,370
what we should do and then what we'll do

414
00:17:00,580 --> 00:17:05,769
is split instead of having that pass

415
00:17:03,370 --> 00:17:07,689
also be the thing that propagates light

416
00:17:05,769 --> 00:17:10,209
instead what we'll do is we'll make it

417
00:17:07,689 --> 00:17:12,279
so that the emitters we do one phase

418
00:17:10,209 --> 00:17:14,890
where we let emitters spread out two

419
00:17:12,279 --> 00:17:17,889
reflectors and then emit reflectors will

420
00:17:14,890 --> 00:17:21,720
propagate out again so what we'll do is

421
00:17:17,890 --> 00:17:25,449
we're here we've got this iteration

422
00:17:21,720 --> 00:17:27,670
going on we will now have that Globo

423
00:17:25,449 --> 00:17:33,550
rendering lighting iteration count that

424
00:17:27,670 --> 00:17:36,100
will only be for spreading out emission

425
00:17:33,549 --> 00:17:39,519
and then at the end we'll have the final

426
00:17:36,099 --> 00:17:41,769
gather right sue me for one second I

427
00:17:39,519 --> 00:17:42,940
still can I did unlike normally when I

428
00:17:41,769 --> 00:17:44,440
just have screwed over any nose I think

429
00:17:42,940 --> 00:17:45,340
I am coming down with a little bit of a

430
00:17:44,440 --> 00:17:47,440
cold

431
00:17:45,339 --> 00:17:50,220
it doesn't actually bother me much but

432
00:17:47,440 --> 00:17:50,220
does make me stuffy

433
00:18:06,769 --> 00:18:14,910
okay so that's what we want to do and

434
00:18:13,319 --> 00:18:17,399
that's why I say we kind of have some

435
00:18:14,910 --> 00:18:19,080
other stuff here so like incident light

436
00:18:17,400 --> 00:18:20,519
an average direction to light will be

437
00:18:19,079 --> 00:18:22,829
the things that we will actually encode

438
00:18:20,519 --> 00:18:25,559
and then like front emit see and back

439
00:18:22,829 --> 00:18:30,689
emit see would be the things that we

440
00:18:25,559 --> 00:18:32,639
will want to those will be the things

441
00:18:30,690 --> 00:18:39,779
that we'll just use for that propagation

442
00:18:32,640 --> 00:18:41,340
pass now the structure of this is

443
00:18:39,779 --> 00:18:42,869
rapidly turning away from the original

444
00:18:41,339 --> 00:18:45,240
structure that we had but that's okay

445
00:18:42,869 --> 00:18:47,339
like I said we didn't know going into it

446
00:18:45,240 --> 00:18:48,870
how are we gonna do lighting lighting is

447
00:18:47,339 --> 00:18:50,639
one of the worst problems in computer

448
00:18:48,869 --> 00:18:54,419
graphics everyone does it differently

449
00:18:50,640 --> 00:18:56,040
it's always a giant hack and the reason

450
00:18:54,420 --> 00:18:58,950
is because hey it's really really hard

451
00:18:56,039 --> 00:19:02,250
the real world happens to do a really

452
00:18:58,950 --> 00:19:04,680
really good job of lighting by using

453
00:19:02,250 --> 00:19:05,970
massive route force it just sends

454
00:19:04,680 --> 00:19:06,960
billions and billions and billions and

455
00:19:05,970 --> 00:19:10,380
trillions and trillions and quadrillions

456
00:19:06,960 --> 00:19:12,390
of photons all over the place and it's

457
00:19:10,380 --> 00:19:15,630
really hard to match that it's hard to

458
00:19:12,390 --> 00:19:16,650
match it with you know like when

459
00:19:15,630 --> 00:19:19,470
typically when we have something like

460
00:19:16,650 --> 00:19:21,450
that like a situation like this where I

461
00:19:19,470 --> 00:19:23,100
have like a rigid object yes

462
00:19:21,450 --> 00:19:24,809
nature uses billions and billions of

463
00:19:23,099 --> 00:19:26,789
atoms to encode what's happening to this

464
00:19:24,809 --> 00:19:28,679
thing fortunately for us they all stay

465
00:19:26,789 --> 00:19:30,750
in a very rigid lattice structure most

466
00:19:28,680 --> 00:19:32,759
of the time and especially to our eye

467
00:19:30,750 --> 00:19:35,069
just look like they're all moving is one

468
00:19:32,759 --> 00:19:37,200
giant piece or two giant pieces in the

469
00:19:35,069 --> 00:19:38,970
case of the pliers which is why we can

470
00:19:37,200 --> 00:19:42,920
do such a good job approximating those

471
00:19:38,970 --> 00:19:46,289
things lighting not quite so much

472
00:19:42,920 --> 00:19:48,480
lighting actually propagates all that

473
00:19:46,289 --> 00:19:49,529
information all the time using billions

474
00:19:48,480 --> 00:19:52,110
and billions and trillions and trillions

475
00:19:49,529 --> 00:19:55,129
of little pieces and approximating that

476
00:19:52,109 --> 00:19:58,979
is just really hard for us that's why

477
00:19:55,130 --> 00:20:00,390
everything's always a hack so again

478
00:19:58,980 --> 00:20:02,160
moving away a little bit from the scheme

479
00:20:00,390 --> 00:20:03,690
we had before but that's quite okay

480
00:20:02,160 --> 00:20:05,548
because like I said this is

481
00:20:03,690 --> 00:20:07,558
retort process if ever there was one and

482
00:20:05,548 --> 00:20:09,869
we're just kind of flailing around to

483
00:20:07,558 --> 00:20:11,638
try and find something that works well

484
00:20:09,869 --> 00:20:13,489
with what we've got set up that isn't

485
00:20:11,638 --> 00:20:15,148
too expensive and will possibly be

486
00:20:13,490 --> 00:20:17,128
gpu-accelerated

487
00:20:15,148 --> 00:20:18,178
in the future so that we can kind of

488
00:20:17,128 --> 00:20:19,769
move everything down there in a couple

489
00:20:18,179 --> 00:20:22,500
weeks when we have something that we

490
00:20:19,769 --> 00:20:26,878
think looks ok and then we can just sort

491
00:20:22,500 --> 00:20:29,579
of have an okay lighting solution that

492
00:20:26,878 --> 00:20:32,788
our game can run through so all right

493
00:20:29,579 --> 00:20:34,288
what we want to do then is is split into

494
00:20:32,788 --> 00:20:35,669
two phases I think and I'll just

495
00:20:34,288 --> 00:20:38,480
separate these into two functions so we

496
00:20:35,669 --> 00:20:40,950
could see them a little bit clearly here

497
00:20:38,480 --> 00:20:48,079
so what I'm gonna have here is I'm gonna

498
00:20:40,950 --> 00:20:48,080
have like a light propagation function

499
00:20:48,500 --> 00:20:52,759
and then I'm gonna have a final gather

500
00:20:53,148 --> 00:20:58,849
I'll you know I'll stay away from the

501
00:20:55,500 --> 00:20:58,849
turn of art for now I'll just say like

502
00:20:59,929 --> 00:21:06,570
I'll say gather final lighting this is

503
00:21:02,849 --> 00:21:09,928
called a final gather because in in the

504
00:21:06,569 --> 00:21:11,278
rendering literature and maybe not so

505
00:21:09,929 --> 00:21:15,659
much the running literature in rendering

506
00:21:11,278 --> 00:21:17,398
practice I guess I would say that phase

507
00:21:15,659 --> 00:21:20,460
at the end where you say all right I've

508
00:21:17,398 --> 00:21:22,168
done whatever lighting computation I'm

509
00:21:20,460 --> 00:21:24,240
going to do for figuring out the

510
00:21:22,169 --> 00:21:26,490
lighting of the scene but now I actually

511
00:21:24,240 --> 00:21:29,128
want to go back to all of my surface

512
00:21:26,490 --> 00:21:33,058
points that I care about and compute the

513
00:21:29,128 --> 00:21:34,678
actual lighting for output that thing is

514
00:21:33,058 --> 00:21:36,298
typically called a final gather and you

515
00:21:34,679 --> 00:21:38,100
can see why because it's like okay I

516
00:21:36,298 --> 00:21:40,918
push light all through my scene however

517
00:21:38,099 --> 00:21:43,109
I was gonna and now I'm gonna like grab

518
00:21:40,919 --> 00:21:47,490
that lighting in for any given point

519
00:21:43,109 --> 00:21:49,048
gather it up and compute the lighting so

520
00:21:47,490 --> 00:21:51,120
final gather typically is that phrase

521
00:21:49,048 --> 00:21:54,720
I'll stay away from it because it's no

522
00:21:51,119 --> 00:21:56,219
kind of a weird way of saying it so what

523
00:21:54,720 --> 00:21:59,399
we want to do here is we kind of have a

524
00:21:56,220 --> 00:22:05,028
little bit of annoyance we've got

525
00:21:59,398 --> 00:22:05,028
something that essentially is completely

526
00:22:05,538 --> 00:22:09,089
we've got two passes are very similar

527
00:22:08,099 --> 00:22:10,980
they're both going to do that ray

528
00:22:09,089 --> 00:22:13,019
casting and I don't really want to

529
00:22:10,980 --> 00:22:17,490
duplicate the code for it because as we

530
00:22:13,019 --> 00:22:19,799
change these you know as we as we

531
00:22:17,490 --> 00:22:21,900
how these lighting elements are computed

532
00:22:19,799 --> 00:22:24,750
or stored I would have to change both

533
00:22:21,900 --> 00:22:28,910
functions a lot in identical ways which

534
00:22:24,750 --> 00:22:31,140
seems annoying so I also need one more

535
00:22:28,910 --> 00:22:34,170
function here that these will both call

536
00:22:31,140 --> 00:22:36,200
per element that they're computing and

537
00:22:34,170 --> 00:22:40,590
that will probably be the raycast right

538
00:22:36,200 --> 00:22:43,110
so this part here that we've got this

539
00:22:40,589 --> 00:22:49,189
ray index part here something like this

540
00:22:43,109 --> 00:22:51,449
is going to be sort of pulled out right

541
00:22:49,190 --> 00:23:02,160
so we're gonna have a thing here that's

542
00:22:51,450 --> 00:23:03,779
like our ray caster and so what I want

543
00:23:02,160 --> 00:23:05,940
to do here is I want to have a way where

544
00:23:03,779 --> 00:23:09,210
I can just say like all right we've got

545
00:23:05,940 --> 00:23:10,529
some number of rays we're gonna cast at

546
00:23:09,210 --> 00:23:11,819
the moment again that was set to eight

547
00:23:10,529 --> 00:23:13,109
and that's fine for now but that's

548
00:23:11,819 --> 00:23:15,169
something you know a value that will

549
00:23:13,109 --> 00:23:19,199
actually think about a little bit later

550
00:23:15,170 --> 00:23:21,870
and what we need to do here is probably

551
00:23:19,200 --> 00:23:23,519
abstract out this ray Direction bit in

552
00:23:21,869 --> 00:23:27,269
fact we may want to just call this ray

553
00:23:23,519 --> 00:23:28,500
cast multiple times I don't it's a

554
00:23:27,269 --> 00:23:29,639
little bit hard to say but yeah I think

555
00:23:28,500 --> 00:23:31,920
we probably want to call them all the

556
00:23:29,640 --> 00:23:38,030
time so maybe we want to stop it more

557
00:23:31,920 --> 00:23:38,029
like here right

558
00:23:41,618 --> 00:23:45,458
so we're gonna come through here go

559
00:23:43,628 --> 00:23:46,898
through all of our source indices we're

560
00:23:45,459 --> 00:23:47,619
gonna see whether or not we should skip

561
00:23:46,898 --> 00:23:49,238
it

562
00:23:47,618 --> 00:23:54,908
so we'll probably still want that skip

563
00:23:49,239 --> 00:23:56,588
index in here because if you're casting

564
00:23:54,909 --> 00:23:58,570
from a particular element you don't want

565
00:23:56,588 --> 00:24:00,908
to test against that element because

566
00:23:58,569 --> 00:24:03,608
it's there coincident and you may record

567
00:24:00,909 --> 00:24:05,109
a zero interaction that's right there

568
00:24:03,608 --> 00:24:09,128
and so you just want to make sure you

569
00:24:05,108 --> 00:24:10,689
skip that so they don't mm-hmm if we

570
00:24:09,128 --> 00:24:13,718
loop through each of the lighting

571
00:24:10,690 --> 00:24:17,139
elements in series and we get what we

572
00:24:13,719 --> 00:24:18,999
think is the the source normal and we

573
00:24:17,138 --> 00:24:21,548
check to make sure it's actually

574
00:24:18,999 --> 00:24:30,700
pointing back towards us I guess is what

575
00:24:21,548 --> 00:24:32,679
we want to do there yes so that's just

576
00:24:30,700 --> 00:24:34,239
avoiding the case where we wouldn't

577
00:24:32,679 --> 00:24:36,879
intersect and also making it so that

578
00:24:34,239 --> 00:24:39,459
we're not casting against the behind of

579
00:24:36,878 --> 00:24:43,628
things that's not really correct in this

580
00:24:39,459 --> 00:24:45,339
case so what I would point out there is

581
00:24:43,628 --> 00:24:46,988
since we want to use front and back you

582
00:24:45,338 --> 00:24:48,519
meters because we have a lot of things

583
00:24:46,989 --> 00:24:52,298
in the scenes we have a lot of like

584
00:24:48,519 --> 00:24:53,798
cards in the scene so although it's more

585
00:24:52,298 --> 00:25:00,759
expensive I think what we want to do

586
00:24:53,798 --> 00:25:01,959
here is actually have a like I think we

587
00:25:00,759 --> 00:25:05,788
actually want to have something that's

588
00:25:01,959 --> 00:25:05,788
like front or back right

589
00:25:06,538 --> 00:25:11,618
so we'd set it to like one if it's front

590
00:25:09,219 --> 00:25:18,519
and zero if it's back so I think we want

591
00:25:11,618 --> 00:25:24,819
to do here is say something more like we

592
00:25:18,519 --> 00:25:27,669
we will you know we'll return a boolean

593
00:25:24,819 --> 00:25:31,108
that says whether or not we hit will

594
00:25:27,669 --> 00:25:33,190
encode a result that says you know

595
00:25:31,108 --> 00:25:35,048
here's whether or not it was the front

596
00:25:33,190 --> 00:25:38,469
or the back of the thing and here's what

597
00:25:35,048 --> 00:25:39,729
the source was right the other thing we

598
00:25:38,469 --> 00:25:42,278
could do is just put the source

599
00:25:39,729 --> 00:25:43,509
information in here so the other you

600
00:25:42,278 --> 00:25:46,628
know the other thing we could say is

601
00:25:43,509 --> 00:25:50,608
like well here's the like we could copy

602
00:25:46,628 --> 00:25:50,608
the information out right

603
00:25:58,410 --> 00:26:05,130
maybe let's maybe let's do that

604
00:26:01,589 --> 00:26:08,649
so maybe what we'll do there say alright

605
00:26:05,130 --> 00:26:10,780
we've got sort of the the thing that

606
00:26:08,650 --> 00:26:13,269
comes back in fact we could yeah yeah we

607
00:26:10,779 --> 00:26:15,099
could do that so what we could do is any

608
00:26:13,269 --> 00:26:17,289
time we're gonna raycast we could

609
00:26:15,099 --> 00:26:20,349
basically just say look let's just

610
00:26:17,289 --> 00:26:22,089
return whatever the

611
00:26:20,349 --> 00:26:23,769
you know the contributing color and

612
00:26:22,089 --> 00:26:25,720
direction you know the direction that's

613
00:26:23,769 --> 00:26:27,190
the ray direction so maybe we just say

614
00:26:25,720 --> 00:26:28,900
what the contributing color is because

615
00:26:27,190 --> 00:26:31,390
we're only convecting light around here

616
00:26:28,900 --> 00:26:33,490
so we could do is say look there's a v3

617
00:26:31,390 --> 00:26:48,040
that comes back that's the color that's

618
00:26:33,490 --> 00:26:50,620
all we're gonna do right and that seems

619
00:26:48,039 --> 00:26:52,089
reasonable enough because we can

620
00:26:50,619 --> 00:26:54,250
actually yet we can handle everything

621
00:26:52,089 --> 00:27:04,089
else from there I think and it should be

622
00:26:54,250 --> 00:27:06,839
okay I think yeah all right so if we

623
00:27:04,089 --> 00:27:09,039
loop over the source sources we do our

624
00:27:06,839 --> 00:27:09,519
tests we see whether or not we hit

625
00:27:09,039 --> 00:27:11,950
something

626
00:27:09,519 --> 00:27:13,869
so in this case we suite what we want to

627
00:27:11,950 --> 00:27:16,990
do is say did we hit the front or the

628
00:27:13,869 --> 00:27:20,969
back right so what we're looking here is

629
00:27:16,990 --> 00:27:20,970
we're looking to see whether or not

630
00:27:33,940 --> 00:27:43,910
whether or not we hit the front of the

631
00:27:35,900 --> 00:27:47,840
back like so it would look like that

632
00:27:43,910 --> 00:27:50,019
right so we don't need to know whether

633
00:27:47,839 --> 00:27:52,639
we hit the front or the back or nothing

634
00:27:50,019 --> 00:27:54,619
and the way we're doing this is saying

635
00:27:52,640 --> 00:27:57,650
well if the normal is pointing back at

636
00:27:54,619 --> 00:28:02,869
the Ray right so if the normals pointing

637
00:27:57,650 --> 00:28:05,690
back at the Ray here's the Ray here's

638
00:28:02,869 --> 00:28:07,459
the normal if the normals is not

639
00:28:05,690 --> 00:28:09,080
negatively with the Ray we know that

640
00:28:07,460 --> 00:28:11,960
this is a service that's aiming at us

641
00:28:09,079 --> 00:28:14,839
right but if the opposite were true if

642
00:28:11,960 --> 00:28:15,860
it were pointing this way right then we

643
00:28:14,839 --> 00:28:19,639
know we're hitting the back of the

644
00:28:15,859 --> 00:28:21,409
surface so we have both cases and we

645
00:28:19,640 --> 00:28:24,460
need to handle or want to handle both

646
00:28:21,410 --> 00:28:24,460
cases right

647
00:28:26,410 --> 00:28:30,769
so what we need to do here is say all

648
00:28:28,490 --> 00:28:33,019
right if we hit the back of something or

649
00:28:30,769 --> 00:28:34,910
we hit the front of something we need to

650
00:28:33,019 --> 00:28:38,839
know which one we did and we need to

651
00:28:34,910 --> 00:28:42,500
propagate those properly and again we

652
00:28:38,839 --> 00:28:46,730
don't have to use vacuum ition we could

653
00:28:42,500 --> 00:28:53,500
try just using front and I'm just not

654
00:28:46,730 --> 00:28:56,450
sure let's think about this as well so

655
00:28:53,500 --> 00:28:58,730
what we could do is we could say that

656
00:28:56,450 --> 00:29:01,910
when you have a surface that's got two

657
00:28:58,730 --> 00:29:03,950
sides to it we actually put two emitters

658
00:29:01,910 --> 00:29:05,090
in there and the reason I'm thinking

659
00:29:03,950 --> 00:29:06,559
about this and I'm sort of stopping

660
00:29:05,089 --> 00:29:08,599
myself and going hey maybe I want to do

661
00:29:06,559 --> 00:29:11,569
that is because we do have things like

662
00:29:08,599 --> 00:29:13,669
the cubes where the back faces shouldn't

663
00:29:11,569 --> 00:29:15,740
be considered right we only want to

664
00:29:13,670 --> 00:29:17,210
consider the outward ones so I'm

665
00:29:15,740 --> 00:29:19,970
starting to think to myself maybe what

666
00:29:17,210 --> 00:29:23,600
we want to do here is say that we only

667
00:29:19,970 --> 00:29:27,769
have one direction the band One

668
00:29:23,599 --> 00:29:31,819
Direction like I actually want the band

669
00:29:27,769 --> 00:29:35,660
One Direction to be a in the game on

670
00:29:31,819 --> 00:29:38,599
every surface we'll just text your map

671
00:29:35,660 --> 00:29:41,889
like their latest album cover

672
00:29:38,599 --> 00:29:41,888
I don't know what that would look like

673
00:29:42,788 --> 00:29:51,528
so we'll just take this right here this

674
00:29:46,878 --> 00:29:54,678
picture I and and we'll text your map

675
00:29:51,528 --> 00:29:57,679
that on all of the surfaces right in the

676
00:29:54,679 --> 00:30:03,700
game and that'll be that'll be perfect

677
00:29:57,679 --> 00:30:05,899
that'll be great all right so we want to

678
00:30:03,700 --> 00:30:07,730
say that there's just one direction for

679
00:30:05,898 --> 00:30:09,918
lighting element right and we'll put two

680
00:30:07,730 --> 00:30:12,288
elements together if we you know just

681
00:30:09,919 --> 00:30:13,519
sort of slightly separate it if we want

682
00:30:12,288 --> 00:30:15,919
to start simulating things that are

683
00:30:13,519 --> 00:30:17,839
two-sided like the cards as if they

684
00:30:15,919 --> 00:30:19,460
actually are two-sided right which we

685
00:30:17,839 --> 00:30:22,308
may very well want to do like I said

686
00:30:19,460 --> 00:30:24,409
that may become necessary to get some of

687
00:30:22,308 --> 00:30:27,740
the lighting effects that we want in the

688
00:30:24,409 --> 00:30:29,690
game so but I just don't want to

689
00:30:27,740 --> 00:30:31,759
complexify it by saying everything's got

690
00:30:29,690 --> 00:30:33,710
two sides because if I do that then I

691
00:30:31,759 --> 00:30:36,230
have to pay for both sides of lighting

692
00:30:33,710 --> 00:30:38,960
even for all the cubes which there are a

693
00:30:36,230 --> 00:30:41,480
lot of that don't actually have two

694
00:30:38,960 --> 00:30:44,860
sides right and so we don't want to do

695
00:30:41,480 --> 00:30:48,710
that for everything so I'm gonna say

696
00:30:44,859 --> 00:30:51,168
let's keep it like this and that there's

697
00:30:48,710 --> 00:30:54,288
only one you midsi so I'll do it so loop

698
00:30:51,169 --> 00:30:57,409
over the source is gathered them out if

699
00:30:54,288 --> 00:30:59,359
I when I do the raycast if I happen to

700
00:30:57,409 --> 00:31:01,759
be facing this side of it so it could

701
00:30:59,359 --> 00:31:04,519
potentially be a hit I care about do the

702
00:31:01,759 --> 00:31:06,319
actual intersection we want to only

703
00:31:04,519 --> 00:31:10,278
compute this if it's the closest hit

704
00:31:06,319 --> 00:31:14,119
that we got along this ray so this part

705
00:31:10,278 --> 00:31:16,778
should still be in here don't we have an

706
00:31:14,119 --> 00:31:16,778
r32 max

707
00:31:18,308 --> 00:31:24,200
we never changed the name of this did we

708
00:31:21,109 --> 00:31:25,189
oh it's you know what that is the new

709
00:31:24,200 --> 00:31:27,080
name nevermind

710
00:31:25,190 --> 00:31:29,720
they can pick an old-school all right so

711
00:31:27,079 --> 00:31:33,528
we got an f32 max we pick the closest

712
00:31:29,720 --> 00:31:35,870
hit and when we find the closest hit we

713
00:31:33,528 --> 00:31:37,250
just need to store the color right so

714
00:31:35,869 --> 00:31:39,168
all we need to do here is say well

715
00:31:37,250 --> 00:31:43,909
whatever the source was let's store that

716
00:31:39,169 --> 00:31:47,960
color so I'll do results equals source

717
00:31:43,909 --> 00:31:49,759
emit color we don't need to record the

718
00:31:47,960 --> 00:31:51,288
hit the which one we hit anymore at

719
00:31:49,759 --> 00:31:53,929
least not for at the moment

720
00:31:51,288 --> 00:31:55,038
and off we go so that raycast will tell

721
00:31:53,929 --> 00:31:58,460
us what the color is that we're getting

722
00:31:55,038 --> 00:32:01,009
back and that's all fine I don't know if

723
00:31:58,460 --> 00:32:05,058
we need this acumen see anymore we may

724
00:32:01,009 --> 00:32:06,079
not depending on how it looks down below

725
00:32:05,058 --> 00:32:09,980
but I'm pretty sure we can actually

726
00:32:06,079 --> 00:32:11,629
simplify that as well all right so this

727
00:32:09,980 --> 00:32:13,069
recast will take the closest thing and

728
00:32:11,630 --> 00:32:15,049
it will give us whatever the emission

729
00:32:13,069 --> 00:32:18,230
was that was coming back along that Ray

730
00:32:15,048 --> 00:32:20,079
and that's exactly what we wanted so

731
00:32:18,230 --> 00:32:23,450
then we come down here to compute like

732
00:32:20,079 --> 00:32:26,240
propagation and we know we can use this

733
00:32:23,450 --> 00:32:29,240
ray cast to do it now I'm gonna skip it

734
00:32:26,240 --> 00:32:31,038
for now and instead I'm gonna go right

735
00:32:29,240 --> 00:32:32,659
together final lighting reason I'm going

736
00:32:31,038 --> 00:32:34,190
to do that is because gather final

737
00:32:32,659 --> 00:32:39,889
lighting is actually the thing that we

738
00:32:34,190 --> 00:32:41,058
want to is the one that's close to what

739
00:32:39,888 --> 00:32:45,349
we're already doing so I can basically

740
00:32:41,058 --> 00:32:48,168
just take the COBE ad before and and

741
00:32:45,349 --> 00:32:49,939
sort of use the raycast function to just

742
00:32:48,169 --> 00:32:51,909
do exactly what we were doing so this

743
00:32:49,940 --> 00:32:58,070
whole thing here can just come through

744
00:32:51,909 --> 00:32:59,120
and and be done right the other loop is

745
00:32:58,069 --> 00:33:01,369
gonna be a little bit little bit

746
00:32:59,119 --> 00:33:02,359
different well it's not gonna be that

747
00:33:01,369 --> 00:33:05,268
different but it's fine

748
00:33:02,359 --> 00:33:08,859
all right so here's our gather final

749
00:33:05,269 --> 00:33:12,349
lighting code I still would like to do a

750
00:33:08,859 --> 00:33:14,509
ray count here this ray count may go up

751
00:33:12,349 --> 00:33:17,359
because for gathering the final lighting

752
00:33:14,509 --> 00:33:19,548
we may want to cast more Ray's for

753
00:33:17,359 --> 00:33:22,879
gathering final lighting because it will

754
00:33:19,548 --> 00:33:26,028
not have any iterations right so it may

755
00:33:22,880 --> 00:33:28,250
be that like you know compute light

756
00:33:26,028 --> 00:33:30,589
propagation looks like this and casts a

757
00:33:28,250 --> 00:33:32,808
trace for propagation it may be that we

758
00:33:30,589 --> 00:33:34,788
do like double the ones here and there's

759
00:33:32,808 --> 00:33:36,079
no iteration at all because we only want

760
00:33:34,788 --> 00:33:40,038
to go through the lighting Alice wants

761
00:33:36,079 --> 00:33:46,069
to do our final gather right so we'll

762
00:33:40,038 --> 00:33:48,109
come through here so this part again

763
00:33:46,069 --> 00:33:49,038
would only be in here potentially but I

764
00:33:48,109 --> 00:33:53,449
don't even know if it's going to quite

765
00:33:49,038 --> 00:33:55,069
look like that so let me gather the

766
00:33:53,450 --> 00:33:58,730
final lighting we're gonna go through

767
00:33:55,069 --> 00:34:00,500
each of the destination things here what

768
00:33:58,730 --> 00:34:02,700
are we using the two camera for oh

769
00:34:00,500 --> 00:34:04,829
that's the look direction for the action

770
00:34:02,700 --> 00:34:06,690
that's fine that's when we actually

771
00:34:04,829 --> 00:34:14,699
compute the how the light is gonna

772
00:34:06,690 --> 00:34:15,960
bounce back so so yeah and that's we

773
00:34:14,699 --> 00:34:17,578
don't even want that because then

774
00:34:15,960 --> 00:34:18,960
that'll get double counted so we don't

775
00:34:17,579 --> 00:34:21,359
even need I'm pretty sure this is not

776
00:34:18,960 --> 00:34:24,869
necessary because we're only going to

777
00:34:21,358 --> 00:34:26,308
compute what the lighting incident on

778
00:34:24,869 --> 00:34:27,869
the surface is we're not going to

779
00:34:26,309 --> 00:34:29,790
compute the reflection so there's two

780
00:34:27,869 --> 00:34:31,409
camera part where we would be doing

781
00:34:29,789 --> 00:34:33,690
where we're looking at it from that's

782
00:34:31,409 --> 00:34:35,639
gonna happen per pixel later so we don't

783
00:34:33,690 --> 00:34:39,179
even want this anymore right that goes

784
00:34:35,639 --> 00:34:41,909
away all right so we go through our

785
00:34:39,179 --> 00:34:43,769
array indices here we compute the rate

786
00:34:41,909 --> 00:34:46,169
erection by getting a random number

787
00:34:43,769 --> 00:34:48,869
which we want this closest hit stuff

788
00:34:46,168 --> 00:34:50,638
source element nonsense blah blah blah

789
00:34:48,869 --> 00:34:54,629
that all kind of goes away because now

790
00:34:50,639 --> 00:34:58,710
that's in a function right we've got a

791
00:34:54,628 --> 00:35:01,920
compute whoops we've got our raycast

792
00:34:58,710 --> 00:35:03,750
function here now what we can do is say

793
00:35:01,920 --> 00:35:05,568
we could have an actual boolean that

794
00:35:03,750 --> 00:35:07,858
comes back because we actually know

795
00:35:05,568 --> 00:35:10,259
whether or not we hit anything or didn't

796
00:35:07,858 --> 00:35:11,969
hit anything but I'm just going to

797
00:35:10,260 --> 00:35:13,500
assume that we always hit something and

798
00:35:11,969 --> 00:35:15,568
the reason that I'm gonna assume that we

799
00:35:13,500 --> 00:35:17,730
always hit something is because we

800
00:35:15,568 --> 00:35:19,469
always do in the real world we always

801
00:35:17,730 --> 00:35:21,240
will hit something and in theory there

802
00:35:19,469 --> 00:35:22,500
should have been light on it the chances

803
00:35:21,239 --> 00:35:24,779
that the light will be zero somewhere

804
00:35:22,500 --> 00:35:25,920
should be like non-existent so we're

805
00:35:24,780 --> 00:35:28,200
always going to assume that we hit

806
00:35:25,920 --> 00:35:33,150
something even if it's a skybox or a

807
00:35:28,199 --> 00:35:34,199
very dim thing corner of the world most

808
00:35:33,150 --> 00:35:35,700
of the time we hit something so I'm not

809
00:35:34,199 --> 00:35:36,929
gonna try to optimize the case where we

810
00:35:35,699 --> 00:35:38,219
don't because that's a case we actually

811
00:35:36,929 --> 00:35:39,509
don't want we don't want the game to be

812
00:35:38,219 --> 00:35:42,149
pitch-black anywhere unless it's like a

813
00:35:39,510 --> 00:35:43,470
level with no light in it where you're

814
00:35:42,150 --> 00:35:44,400
you know you shouldn't even really be

815
00:35:43,469 --> 00:35:46,108
there because you don't have a light

816
00:35:44,400 --> 00:35:47,280
source yet or something like that that's

817
00:35:46,108 --> 00:35:48,539
not something we need optimize for

818
00:35:47,280 --> 00:35:49,950
because most of our scenes will have

819
00:35:48,539 --> 00:35:51,630
light everywhere so we need it to run

820
00:35:49,949 --> 00:35:53,308
fine when there's light everywhere so

821
00:35:51,630 --> 00:35:55,920
optimizing for that cases is meaningless

822
00:35:53,309 --> 00:35:59,640
right so what I want to do is I want to

823
00:35:55,920 --> 00:36:02,130
call our ray cast and I realized I

824
00:35:59,639 --> 00:36:04,529
didn't actually pass anything to the Ray

825
00:36:02,130 --> 00:36:07,789
class yet so lighting oops

826
00:36:04,530 --> 00:36:07,790
bang solution

827
00:36:08,219 --> 00:36:13,629
what we're gonna skip and then the Ray

828
00:36:10,989 --> 00:36:16,949
direction and the Ray origin I will need

829
00:36:13,630 --> 00:36:23,528
as well what did we call that in here a

830
00:36:16,949 --> 00:36:25,449
relative source key is source P and s P

831
00:36:23,528 --> 00:36:29,500
so okay so we just have to replace death

832
00:36:25,449 --> 00:36:37,868
P right wheezing despi there that's

833
00:36:29,500 --> 00:36:39,548
gonna be ray oops origin so there's our

834
00:36:37,869 --> 00:36:42,579
Ray origin and Ray direction it's gonna

835
00:36:39,548 --> 00:36:43,809
do a light cast from there and that

836
00:36:42,579 --> 00:36:45,818
should be all the information I think

837
00:36:43,809 --> 00:36:49,298
that we need right I don't think there's

838
00:36:45,818 --> 00:36:53,139
anything else so that's the the function

839
00:36:49,298 --> 00:36:55,989
we're gonna call here is compute light

840
00:36:53,139 --> 00:36:59,618
propagation which we're skipping for now

841
00:36:55,989 --> 00:37:02,018
and so then I'll do here is call bar ray

842
00:36:59,619 --> 00:37:04,890
cast I passed the lighting solution to

843
00:37:02,018 --> 00:37:07,149
it we know we're gonna skip destination

844
00:37:04,889 --> 00:37:10,298
index because that's where we're casting

845
00:37:07,150 --> 00:37:12,849
from and we don't want to do that one so

846
00:37:10,298 --> 00:37:16,288
we have our ray direction and our source

847
00:37:12,849 --> 00:37:16,289
location here's the raycast

848
00:37:16,889 --> 00:37:27,699
here's the incident color it's coming in

849
00:37:21,268 --> 00:37:31,838
and what I'd like to do now is go ahead

850
00:37:27,699 --> 00:37:34,629
and do some computations with that

851
00:37:31,838 --> 00:37:38,409
result that we get back and I'm gonna

852
00:37:34,630 --> 00:37:39,818
ignore this accumulator for now so as we

853
00:37:38,409 --> 00:37:41,379
gather the lighting we're going through

854
00:37:39,818 --> 00:37:42,940
we're gonna get a bunch of incident

855
00:37:41,380 --> 00:37:45,039
colors back one for every ray that we

856
00:37:42,940 --> 00:37:46,838
cast we now know two things about it we

857
00:37:45,039 --> 00:37:50,289
know the color that was coming back from

858
00:37:46,838 --> 00:37:53,920
that ray and we know the raider action

859
00:37:50,289 --> 00:37:55,990
itself that we use to gather it right so

860
00:37:53,920 --> 00:37:57,670
now what we want to do we don't need

861
00:37:55,989 --> 00:37:58,959
this in fact I don't even know why we

862
00:37:57,670 --> 00:38:00,099
were calculating it to begin with again

863
00:37:58,960 --> 00:38:01,720
this is just sort of the fact that this

864
00:38:00,099 --> 00:38:04,298
was kind of old code we must sort of

865
00:38:01,719 --> 00:38:08,558
massage it a bunch of times in order to

866
00:38:04,298 --> 00:38:10,900
kind of get like you know in order to

867
00:38:08,559 --> 00:38:12,490
sort of put it into the final form we're

868
00:38:10,900 --> 00:38:14,230
constantly trying things and

869
00:38:12,489 --> 00:38:15,459
experimenting so stuff gets in there

870
00:38:14,230 --> 00:38:16,568
that doesn't really make any sense we

871
00:38:15,460 --> 00:38:18,130
don't need to compute this cuz we know

872
00:38:16,568 --> 00:38:21,518
what this is this is the Ray direction

873
00:38:18,130 --> 00:38:23,710
right we know that this was the

874
00:38:21,518 --> 00:38:26,048
that we were you know gathering light

875
00:38:23,710 --> 00:38:30,539
from so that's really not important to

876
00:38:26,048 --> 00:38:33,699
have there right okay so when we're

877
00:38:30,539 --> 00:38:36,309
gathering this up we don't really need

878
00:38:33,699 --> 00:38:40,379
to know any of this stuff it's just not

879
00:38:36,309 --> 00:38:43,289
important this is what we actually have

880
00:38:40,380 --> 00:38:45,369
so now we've got sort of our light color

881
00:38:43,289 --> 00:38:47,680
this is the incident Co that's coming on

882
00:38:45,369 --> 00:38:50,980
the surface this is multiplied by the

883
00:38:47,679 --> 00:38:54,248
reflector we don't want that right so

884
00:38:50,980 --> 00:38:55,599
that multiplication by the reflection is

885
00:38:54,248 --> 00:38:58,689
something that's going to have to that

886
00:38:55,599 --> 00:38:59,859
wants to happen out here instead right

887
00:38:58,690 --> 00:39:02,710
that's something that's gonna happen on

888
00:38:59,858 --> 00:39:04,690
light propagation not something that's

889
00:39:02,710 --> 00:39:07,269
gonna happen when we're gathering now

890
00:39:04,690 --> 00:39:08,710
why is that again that is because what

891
00:39:07,268 --> 00:39:10,868
we're trying to compute here is the

892
00:39:08,710 --> 00:39:12,338
incident light on the surface because

893
00:39:10,869 --> 00:39:14,769
we're trying to collect information

894
00:39:12,338 --> 00:39:17,498
about incoming light so that per pixel

895
00:39:14,768 --> 00:39:20,288
in the pixel shader later we can compute

896
00:39:17,498 --> 00:39:22,298
what the actual reflected light is from

897
00:39:20,289 --> 00:39:23,710
a particular surface element and in

898
00:39:22,298 --> 00:39:26,498
order to compute the reflected light

899
00:39:23,710 --> 00:39:28,690
from that surface element we need to not

900
00:39:26,498 --> 00:39:32,709
have taken into account any reflection

901
00:39:28,690 --> 00:39:34,028
here because it will be wrong right so

902
00:39:32,710 --> 00:39:35,829
what we're trying to do is just gather

903
00:39:34,028 --> 00:39:38,710
the light that comes in and save just

904
00:39:35,829 --> 00:39:44,559
what came in and then later we'll do the

905
00:39:38,710 --> 00:39:49,659
reflection computation okay so we've got

906
00:39:44,559 --> 00:39:50,710
a distance fall-off here and these are

907
00:39:49,659 --> 00:39:52,028
always the kind of things that are a

908
00:39:50,710 --> 00:39:54,730
little confusing in a since I'm not a

909
00:39:52,028 --> 00:39:58,259
ray tracing guy it's something I always

910
00:39:54,730 --> 00:39:58,259
have that kind of scratch my head about

911
00:40:00,929 --> 00:40:10,690
in general light along array doesn't

912
00:40:05,829 --> 00:40:15,539
diminish right so I don't actually know

913
00:40:10,690 --> 00:40:15,539
if this fall-off really should be here

914
00:40:16,170 --> 00:40:23,499
the inverse square law says that it

915
00:40:19,768 --> 00:40:27,719
should right but the fact that we're

916
00:40:23,498 --> 00:40:32,709
casting Rays as samples into the world

917
00:40:27,719 --> 00:40:34,719
would automatically do that so it's kind

918
00:40:32,710 --> 00:40:37,079
of right it's kind of

919
00:40:34,719 --> 00:40:40,059
difficult to wrap your head around

920
00:40:37,079 --> 00:40:46,409
sometimes for this sort of thing where

921
00:40:40,059 --> 00:40:46,409
the different lighting aspects come from

922
00:40:46,619 --> 00:40:51,539
but if you think about what I'm saying

923
00:40:51,630 --> 00:40:59,950
so let's say I want to know how much the

924
00:40:57,429 --> 00:41:03,339
light from this emitter contributes to

925
00:40:59,949 --> 00:41:06,098
this surface right well we know that the

926
00:41:03,340 --> 00:41:08,019
inverse square law says that as the

927
00:41:06,099 --> 00:41:12,099
light comes in this direction it gets

928
00:41:08,019 --> 00:41:14,920
dimmer proportional to the square for a

929
00:41:12,099 --> 00:41:17,950
diffusive mitr right for I'm sorry for a

930
00:41:14,920 --> 00:41:20,289
diffuse reflector right and the reason

931
00:41:17,949 --> 00:41:23,108
for that is because as you know however

932
00:41:20,289 --> 00:41:25,329
many photons are coming out of here they

933
00:41:23,108 --> 00:41:26,920
get sparser and sparser the further out

934
00:41:25,329 --> 00:41:31,809
they go right if I'm emitting photons

935
00:41:26,920 --> 00:41:34,570
from this thing then these two right

936
00:41:31,809 --> 00:41:36,070
here you know might have hit a surface

937
00:41:34,570 --> 00:41:38,769
that was this far away that was this big

938
00:41:36,070 --> 00:41:40,690
but if I move it this far away all of a

939
00:41:38,769 --> 00:41:44,079
sudden this photon hits and this photon

940
00:41:40,690 --> 00:41:45,789
doesn't right so as you get further from

941
00:41:44,079 --> 00:41:47,469
the light source the number of photons

942
00:41:45,789 --> 00:41:49,449
that are going to be the density of

943
00:41:47,469 --> 00:41:51,459
photons in any given area diminish

944
00:41:49,449 --> 00:41:57,579
because they're getting further apart

945
00:41:51,460 --> 00:41:59,949
they're separating right but we are

946
00:41:57,579 --> 00:42:01,690
casting Rainey's out from the surface

947
00:41:59,949 --> 00:42:05,409
that do exactly that

948
00:42:01,690 --> 00:42:09,519
right the Rays themselves are separating

949
00:42:05,409 --> 00:42:13,299
and are less likely to hit anything out

950
00:42:09,519 --> 00:42:17,619
there that that we encounter so I'm

951
00:42:13,300 --> 00:42:20,230
gonna say in my non render guy way that

952
00:42:17,619 --> 00:42:22,780
may very well be wrong that we don't

953
00:42:20,230 --> 00:42:24,608
want to include a distance modulation

954
00:42:22,780 --> 00:42:29,019
here because the raycast

955
00:42:24,608 --> 00:42:33,460
itself already has that inverse-square

956
00:42:29,019 --> 00:42:37,480
gather built-in and if we were to on top

957
00:42:33,460 --> 00:42:39,730
of the sampling itself including the

958
00:42:37,480 --> 00:42:45,010
fact that it will be less likely to hit

959
00:42:39,730 --> 00:42:47,050
surfaces based on direction if I were to

960
00:42:45,010 --> 00:42:48,180
go ahead and put that lighting distance

961
00:42:47,050 --> 00:42:53,530
consolation in there I might

962
00:42:48,179 --> 00:42:55,299
double-counting right so it's a really

963
00:42:53,530 --> 00:42:57,040
tough thing to call it may be that this

964
00:42:55,300 --> 00:43:03,060
is not enough raised to really

965
00:42:57,039 --> 00:43:06,099
incorporate that effect sufficiently I

966
00:43:03,059 --> 00:43:08,920
don't know so you know this is the kind

967
00:43:06,099 --> 00:43:10,900
of thing that I would go study if I were

968
00:43:08,920 --> 00:43:12,340
doing this for reals reals like if I

969
00:43:10,900 --> 00:43:14,920
really wanted to get to the bottom of it

970
00:43:12,340 --> 00:43:17,230
it's also something that we could ask a

971
00:43:14,920 --> 00:43:19,269
hardcore rendering guy about they would

972
00:43:17,230 --> 00:43:22,179
know the answer to this problem

973
00:43:19,269 --> 00:43:23,530
pretty cold because it's basically a

974
00:43:22,179 --> 00:43:26,649
question of whether you're sampling

975
00:43:23,530 --> 00:43:28,120
already takes into account a lot of fact

976
00:43:26,650 --> 00:43:30,610
of the lighting or whether you need to

977
00:43:28,119 --> 00:43:34,779
take into account it it into account

978
00:43:30,610 --> 00:43:37,390
yourself right so right now I'm gonna

979
00:43:34,780 --> 00:43:42,610
leave it out it may be that it should

980
00:43:37,389 --> 00:43:44,920
have been kept in as this number gets

981
00:43:42,610 --> 00:43:47,590
high enough I'm pretty sure it needs to

982
00:43:44,920 --> 00:43:49,240
be taken out cuz as that number gets

983
00:43:47,590 --> 00:43:52,720
high enough the sampling definitely

984
00:43:49,239 --> 00:43:54,669
includes this information right I mean

985
00:43:52,719 --> 00:43:56,529
at the limit if you imagine casting

986
00:43:54,670 --> 00:43:58,720
billions of rays out from the surface

987
00:43:56,530 --> 00:44:00,850
the inverse square law would then

988
00:43:58,719 --> 00:44:03,099
naturally be applied because the

989
00:44:00,849 --> 00:44:06,039
averaging that occurs over all of those

990
00:44:03,099 --> 00:44:10,029
incident lights will naturally produce

991
00:44:06,039 --> 00:44:12,610
an inverse squared gather from the

992
00:44:10,030 --> 00:44:15,040
surface so my only question is when this

993
00:44:12,610 --> 00:44:16,570
gets down to low is that now the wrong

994
00:44:15,039 --> 00:44:18,400
way to think about it I don't think it

995
00:44:16,570 --> 00:44:19,660
is I think it still is it just means

996
00:44:18,400 --> 00:44:22,750
your lighting solutions kind of been

997
00:44:19,659 --> 00:44:24,969
accurate um but that's just true I mean

998
00:44:22,750 --> 00:44:27,369
what you know oh well so I don't think

999
00:44:24,969 --> 00:44:29,649
adding in a term that would diminish it

1000
00:44:27,369 --> 00:44:31,449
is gonna fix it right I think you just

1001
00:44:29,650 --> 00:44:37,500
need to cast enough razor to make it

1002
00:44:31,449 --> 00:44:40,359
work all right

1003
00:44:37,500 --> 00:44:42,400
so as we go we have our reflection

1004
00:44:40,360 --> 00:44:43,990
normal again that's not important we

1005
00:44:42,400 --> 00:44:45,789
don't need any of this stuff the

1006
00:44:43,989 --> 00:44:47,409
specular power distance fall-off none of

1007
00:44:45,789 --> 00:44:48,969
that stuff is getting included in here

1008
00:44:47,409 --> 00:44:51,399
at all although you know what I should

1009
00:44:48,969 --> 00:44:53,409
probably save a lot of this stuff

1010
00:44:51,400 --> 00:44:55,660
because for the gather stage this stuff

1011
00:44:53,409 --> 00:44:59,369
is possibly important so I'm gonna move

1012
00:44:55,659 --> 00:44:59,369
that stuff out here

1013
00:44:59,630 --> 00:45:06,809
all this stuff like diffuse inner

1014
00:45:01,980 --> 00:45:08,730
diffuse contributes to pull use some of

1015
00:45:06,809 --> 00:45:10,170
it we won't let me just go ahead and cut

1016
00:45:08,730 --> 00:45:11,579
and paste it all up here so that we can

1017
00:45:10,170 --> 00:45:14,010
look at it again final Gallic summits

1018
00:45:11,579 --> 00:45:16,170
gonna go there but most of it is not is

1019
00:45:14,010 --> 00:45:17,550
gonna stay in in the in the propagation

1020
00:45:16,170 --> 00:45:19,650
routine and won't happen the final

1021
00:45:17,550 --> 00:45:21,720
gather so we'll get back an incident

1022
00:45:19,650 --> 00:45:33,720
color that's what's coming in I we still

1023
00:45:21,719 --> 00:45:35,549
probably want to do the cosign so I

1024
00:45:33,719 --> 00:45:37,489
think we even don't want to do that I

1025
00:45:35,550 --> 00:45:39,900
think we just want to do a straight-up

1026
00:45:37,489 --> 00:45:41,669
we just want to straight-up some these

1027
00:45:39,900 --> 00:45:44,309
guys based on their intensity I think

1028
00:45:41,670 --> 00:45:47,430
that's all we really want because stuff

1029
00:45:44,309 --> 00:45:49,889
like this diffuse inner product to

1030
00:45:47,429 --> 00:45:51,989
figure out how much contribution the

1031
00:45:49,889 --> 00:45:53,699
light has to the surface I think we

1032
00:45:51,989 --> 00:45:55,979
actually want to save that again for the

1033
00:45:53,699 --> 00:45:57,989
pixel shader because that's where we

1034
00:45:55,980 --> 00:45:59,340
would use that information based on the

1035
00:45:57,989 --> 00:46:01,889
surface properties of the thing we're

1036
00:45:59,340 --> 00:46:03,780
lighting so I think none of this stuff

1037
00:46:01,889 --> 00:46:05,460
wants to happen I think that's all stuff

1038
00:46:03,780 --> 00:46:09,060
that has to happen up here in the light

1039
00:46:05,460 --> 00:46:11,250
propagation and not mmm I think none of

1040
00:46:09,059 --> 00:46:13,079
that wants to happen in here so I think

1041
00:46:11,250 --> 00:46:16,590
everything is just going to be we get

1042
00:46:13,079 --> 00:46:18,869
back an incident color we do none of

1043
00:46:16,590 --> 00:46:20,760
this all we're going to do is say okay

1044
00:46:18,869 --> 00:46:25,859
when we get back the incident color we

1045
00:46:20,760 --> 00:46:29,420
first want to find out how much incident

1046
00:46:25,860 --> 00:46:32,780
color there is so we want to do like a

1047
00:46:29,420 --> 00:46:32,780
waiting and

1048
00:46:38,250 --> 00:46:42,309
so we want to get back to waiting and

1049
00:46:40,539 --> 00:46:45,759
that's going to be based on how strong

1050
00:46:42,309 --> 00:46:48,340
the light is that comes in we then want

1051
00:46:45,760 --> 00:46:50,560
to accumulate this value so we've got

1052
00:46:48,340 --> 00:46:59,349
two values that we're accumulating we've

1053
00:46:50,559 --> 00:47:01,900
got the incident light and the weight

1054
00:46:59,349 --> 00:47:04,690
and really if we want to we can do these

1055
00:47:01,900 --> 00:47:06,160
in place but I'm not going to so we've

1056
00:47:04,690 --> 00:47:07,780
got an incident that we've got the

1057
00:47:06,159 --> 00:47:11,049
incident light accumulation and we've

1058
00:47:07,780 --> 00:47:15,490
got the weight accumulation so they can

1059
00:47:11,050 --> 00:47:18,640
divide them out well you know what even

1060
00:47:15,489 --> 00:47:22,000
that I guess we don't really have to

1061
00:47:18,639 --> 00:47:25,750
well yeah all right so I'm gonna take

1062
00:47:22,000 --> 00:47:30,309
the incident light that comes in I'm

1063
00:47:25,750 --> 00:47:35,530
gonna multiply it by the weight that we

1064
00:47:30,309 --> 00:47:36,940
compute right oh sorry no I'm not

1065
00:47:35,530 --> 00:47:40,840
that's what okay yeah God will could use

1066
00:47:36,940 --> 00:47:42,490
there it's the incident direction that's

1067
00:47:40,840 --> 00:47:45,510
the one I wanted so I'm going to take

1068
00:47:42,489 --> 00:47:48,519
the incident color and just sum them

1069
00:47:45,510 --> 00:47:52,020
because all of the stuff coming in is

1070
00:47:48,519 --> 00:47:52,019
will count for now

1071
00:48:00,550 --> 00:48:13,670
and I'm not sure how correct that is but

1072
00:48:11,420 --> 00:48:16,039
I think it's roughly correct it's hard

1073
00:48:13,670 --> 00:48:18,409
to say so anyway yeah I take the

1074
00:48:16,039 --> 00:48:20,630
incident color I'm going to accumulate

1075
00:48:18,409 --> 00:48:22,579
that I'm going to take the incident

1076
00:48:20,630 --> 00:48:27,890
direction and I'm accumulating that but

1077
00:48:22,579 --> 00:48:30,619
I'm going to accumulate that based on

1078
00:48:27,889 --> 00:48:32,269
the weight so that the stronger the

1079
00:48:30,619 --> 00:48:35,719
light is the more it contributes to the

1080
00:48:32,269 --> 00:48:37,309
normal and I guess then I think about it

1081
00:48:35,719 --> 00:48:38,449
I don't even need to accumulate the way

1082
00:48:37,309 --> 00:48:40,969
because I'm just going to normalize that

1083
00:48:38,449 --> 00:48:44,119
direction at the end so I think this is

1084
00:48:40,969 --> 00:48:45,139
correct right I think that's really all

1085
00:48:44,119 --> 00:48:46,670
we're doing we're getting back an

1086
00:48:45,139 --> 00:48:49,909
incident color and we're accumulating it

1087
00:48:46,670 --> 00:48:52,220
we're getting back a sort of weight that

1088
00:48:49,909 --> 00:48:53,989
we use from that that we're going to use

1089
00:48:52,219 --> 00:48:56,389
to sum the directions and then when

1090
00:48:53,989 --> 00:48:59,029
we're done we just soar these back so

1091
00:48:56,389 --> 00:49:03,079
then we take the destination I was

1092
00:48:59,030 --> 00:49:13,490
correct in that this is not necessary so

1093
00:49:03,079 --> 00:49:14,619
then we have an incident light here and

1094
00:49:13,489 --> 00:49:18,879
an incident direction

1095
00:49:14,619 --> 00:49:18,880
oops caps lock

1096
00:49:25,119 --> 00:49:31,869
and that's just a normalized version

1097
00:49:27,510 --> 00:49:33,790
right because we know the length since

1098
00:49:31,869 --> 00:49:36,010
we know this normal has to be a normal

1099
00:49:33,789 --> 00:49:37,358
it has to be length 1 normalized

1100
00:49:36,010 --> 00:49:39,880
normally what we do when we sum up

1101
00:49:37,358 --> 00:49:41,858
things that are weighted is we record

1102
00:49:39,880 --> 00:49:48,190
how much weight we had so that we can

1103
00:49:41,858 --> 00:49:49,838
normalize at the end right but in this

1104
00:49:48,190 --> 00:49:51,429
case we don't really have to do that and

1105
00:49:49,838 --> 00:49:52,838
the reason we don't have to do that is

1106
00:49:51,429 --> 00:49:54,669
because we know the normal just has to

1107
00:49:52,838 --> 00:49:56,588
be a length one so at the end whatever

1108
00:49:54,670 --> 00:49:58,720
direction it's pointing we just make it

1109
00:49:56,588 --> 00:50:01,900
be length 1 in that direction and we're

1110
00:49:58,719 --> 00:50:04,149
done so yeah the weight doesn't have to

1111
00:50:01,900 --> 00:50:06,190
be tracked like we normally would so

1112
00:50:04,150 --> 00:50:07,660
this is a pretty concise easy to

1113
00:50:06,190 --> 00:50:09,400
understand loop now I don't know how

1114
00:50:07,659 --> 00:50:11,949
great it is but you know it is what it

1115
00:50:09,400 --> 00:50:13,900
is we're basically just casting out as

1116
00:50:11,949 --> 00:50:18,159
many raises we decide we want to to do

1117
00:50:13,900 --> 00:50:20,108
our our final gather we sum up all of

1118
00:50:18,159 --> 00:50:22,719
the incident colors so that's the total

1119
00:50:20,108 --> 00:50:25,750
amount of light hitting the surface is

1120
00:50:22,719 --> 00:50:28,500
stored in the surface and then we just

1121
00:50:25,750 --> 00:50:31,300
average the normal in a weighted average

1122
00:50:28,500 --> 00:50:33,039
based on how intense the light is and we

1123
00:50:31,300 --> 00:50:36,789
don't know what this value should really

1124
00:50:33,039 --> 00:50:38,409
be right now it's the what's called the

1125
00:50:36,789 --> 00:50:42,279
two norm right it's the length of the

1126
00:50:38,409 --> 00:50:45,009
vector of color which is a reasonable

1127
00:50:42,280 --> 00:50:46,630
approximation but it might not be the

1128
00:50:45,010 --> 00:50:48,520
one we want we may want to use squared

1129
00:50:46,630 --> 00:50:51,700
like length squared we may want to use

1130
00:50:48,519 --> 00:50:54,400
the sum of the lighting values there's a

1131
00:50:51,699 --> 00:50:56,409
lot of ways we could do that right and I

1132
00:50:54,400 --> 00:50:58,030
don't know what the best way to do that

1133
00:50:56,409 --> 00:51:03,000
would be but there you go

1134
00:50:58,030 --> 00:51:03,000
so there's our gather

1135
00:51:05,699 --> 00:51:11,819
I'm pretty sure that all we really want

1136
00:51:08,340 --> 00:51:19,230
to do here is say okay when we do gather

1137
00:51:11,820 --> 00:51:21,000
find the lighting it's like this is

1138
00:51:19,230 --> 00:51:29,579
probably gonna want to do this in both

1139
00:51:21,000 --> 00:51:32,400
cases we're gonna do gather final

1140
00:51:29,579 --> 00:51:34,440
lighting on the solution and that should

1141
00:51:32,400 --> 00:51:36,389
just work so now we just have to focus

1142
00:51:34,440 --> 00:51:49,289
on the propagation phase compute light

1143
00:51:36,389 --> 00:51:51,210
propagation and taking a look at this

1144
00:51:49,289 --> 00:51:53,279
function mostly what we're gonna have to

1145
00:51:51,210 --> 00:51:56,099
do is readapt it and sort of clean it

1146
00:51:53,280 --> 00:51:59,100
out but it's mostly get this this is the

1147
00:51:56,099 --> 00:52:00,809
function that's going to have to do the

1148
00:51:59,099 --> 00:52:02,250
actual light computation to figure out

1149
00:52:00,809 --> 00:52:03,360
how things bounce around the scene right

1150
00:52:02,250 --> 00:52:06,900
so this was gonna have more lighting

1151
00:52:03,360 --> 00:52:09,079
actually in it so compute oh and this no

1152
00:52:06,900 --> 00:52:12,150
longer happens oops

1153
00:52:09,079 --> 00:52:14,190
so we extract our reflectors we compute

1154
00:52:12,150 --> 00:52:15,869
the propagation between those reflectors

1155
00:52:14,190 --> 00:52:18,269
and then we gather the final lighting

1156
00:52:15,869 --> 00:52:22,460
and that is what we will send down to

1157
00:52:18,269 --> 00:52:24,269
the graphs card for use of per pixel

1158
00:52:22,460 --> 00:52:27,750
alright so for computing light

1159
00:52:24,269 --> 00:52:29,219
propagation again same basic idea but

1160
00:52:27,750 --> 00:52:32,699
this time what we're sort of trying to

1161
00:52:29,219 --> 00:52:36,480
do is do some series of iterations that

1162
00:52:32,699 --> 00:52:38,159
bounces light around the scene right and

1163
00:52:36,480 --> 00:52:40,079
this we could do in a number of

1164
00:52:38,159 --> 00:52:42,809
different ways but I think what we want

1165
00:52:40,079 --> 00:52:44,210
to do is kind of switch around how we're

1166
00:52:42,809 --> 00:52:47,288
looking at it

1167
00:52:44,210 --> 00:52:47,289
[Music]

1168
00:52:50,548 --> 00:52:58,088
because I think we can optimize it quite

1169
00:52:53,409 --> 00:53:00,369
a bit by doing it from emitters forward

1170
00:52:58,088 --> 00:53:04,808
instead of doing it from reflectors

1171
00:53:00,369 --> 00:53:09,459
backwards right and here's why so let's

1172
00:53:04,809 --> 00:53:12,239
suppose I do it because there's two ways

1173
00:53:09,458 --> 00:53:12,239
you can do this right

1174
00:53:16,500 --> 00:53:21,269
one way it can do it is I can loop

1175
00:53:18,960 --> 00:53:21,960
through all of the reflectors and do

1176
00:53:21,269 --> 00:53:25,530
raycast

1177
00:53:21,960 --> 00:53:26,849
outwards to find emitters right the

1178
00:53:25,530 --> 00:53:29,790
other way I can do it is loop through

1179
00:53:26,849 --> 00:53:31,590
all the emitters and project outwards to

1180
00:53:29,789 --> 00:53:34,500
generate new emitters with every one I

1181
00:53:31,590 --> 00:53:36,960
hit the reason I like going through the

1182
00:53:34,500 --> 00:53:39,119
emitter is better is because there's

1183
00:53:36,960 --> 00:53:42,869
only very few emitters when we start

1184
00:53:39,119 --> 00:53:45,329
each scene may have like five thousand

1185
00:53:42,869 --> 00:53:46,130
reflectors and only like ten emitters or

1186
00:53:45,329 --> 00:53:48,659
something right

1187
00:53:46,130 --> 00:53:50,099
twenty emitters who knows how many but

1188
00:53:48,659 --> 00:53:52,739
there's a lot less services emitting

1189
00:53:50,099 --> 00:53:56,039
light than reflecting light so on the

1190
00:53:52,739 --> 00:54:00,829
first pass we can just not begin to skip

1191
00:53:56,039 --> 00:54:02,969
anybody who has no emission value right

1192
00:54:00,829 --> 00:54:15,929
so I think that's what we want to do

1193
00:54:02,969 --> 00:54:18,029
there and I guess now that I think we do

1194
00:54:15,929 --> 00:54:19,019
need that a qmc I was premature so we

1195
00:54:18,030 --> 00:54:22,490
are still gonna need that because we

1196
00:54:19,019 --> 00:54:22,489
don't account for it in one pass right

1197
00:54:25,699 --> 00:54:31,889
although I guess we could so here's an

1198
00:54:28,980 --> 00:54:36,750
interesting thing so we could if we

1199
00:54:31,889 --> 00:54:40,440
wanted to allow people to propagate

1200
00:54:36,750 --> 00:54:43,139
within the same frame I shouldn't say

1201
00:54:40,440 --> 00:54:45,838
frame within the same iteration we could

1202
00:54:43,139 --> 00:54:47,519
allow people we write to later to

1203
00:54:45,838 --> 00:54:50,039
actually continue propagating that light

1204
00:54:47,519 --> 00:54:51,239
onwards I'm not going to do that and the

1205
00:54:50,039 --> 00:54:52,980
reason that I'm not going to do that is

1206
00:54:51,239 --> 00:54:56,909
I'm gonna say that we want to prepare

1207
00:54:52,980 --> 00:54:59,429
this sort of to think about we're it

1208
00:54:56,909 --> 00:55:02,429
working in a very parallelized way and

1209
00:54:59,429 --> 00:55:05,909
so what I don't want to do is ever write

1210
00:55:02,429 --> 00:55:08,429
to any value I'm reading right I want to

1211
00:55:05,909 --> 00:55:11,460
have like a strict input output buffer

1212
00:55:08,429 --> 00:55:13,649
kind of a thing so I want to be reading

1213
00:55:11,460 --> 00:55:16,440
from the emission color and outputting

1214
00:55:13,650 --> 00:55:19,920
to the accumulation color and then

1215
00:55:16,440 --> 00:55:26,608
swapping the two who basically is what I

1216
00:55:19,920 --> 00:55:28,588
want to have happen right so maybe like

1217
00:55:26,608 --> 00:55:30,719
you know we could even call this like

1218
00:55:28,588 --> 00:55:33,838
send color and receive color or

1219
00:55:30,719 --> 00:55:35,250
something like this or you know this is

1220
00:55:33,838 --> 00:55:37,019
the color that's emitting now and this

1221
00:55:35,250 --> 00:55:42,630
is the next emission color or whatever

1222
00:55:37,019 --> 00:55:46,588
so it just kind of gathers them up as it

1223
00:55:42,630 --> 00:55:49,079
goes all right and so yeah I mean I

1224
00:55:46,588 --> 00:55:51,659
don't know right like but that's that's

1225
00:55:49,079 --> 00:55:52,588
the idea so as we come through here

1226
00:55:51,659 --> 00:55:55,348
we're going to do compute light

1227
00:55:52,588 --> 00:55:59,608
propagation I'm gonna say like okay you

1228
00:55:55,349 --> 00:56:03,720
know let's let's leave through each of

1229
00:55:59,608 --> 00:56:07,019
these saucy gentlemen here and what

1230
00:56:03,719 --> 00:56:07,409
we're gonna do is say much like we did

1231
00:56:07,019 --> 00:56:12,750
before

1232
00:56:07,409 --> 00:56:14,730
oops we're gonna raycast this so for

1233
00:56:12,750 --> 00:56:17,699
each of these destinations we're gonna

1234
00:56:14,730 --> 00:56:19,349
do a bunch of raycast here I don't know

1235
00:56:17,699 --> 00:56:22,219
how many we're gonna do but a couple

1236
00:56:19,349 --> 00:56:22,220
right

1237
00:56:28,090 --> 00:56:33,130
previously we were doing eight so maybe

1238
00:56:30,309 --> 00:56:35,559
that's how many we're still doing or

1239
00:56:33,130 --> 00:56:37,090
maybe maybe reduce that because we want

1240
00:56:35,559 --> 00:56:38,590
to have more iterations and less raise

1241
00:56:37,090 --> 00:56:40,750
or who knows what but something like

1242
00:56:38,590 --> 00:56:42,820
that's gonna happen right so we're gonna

1243
00:56:40,750 --> 00:56:44,829
go through and we're gonna say instead

1244
00:56:42,820 --> 00:56:48,280
of dest index here I'm going to change

1245
00:56:44,829 --> 00:56:49,420
this to emitter index because that's oh

1246
00:56:48,280 --> 00:56:57,310
I said I kind of want to loop over the

1247
00:56:49,420 --> 00:57:02,470
emitters here's the emitter and what I

1248
00:56:57,309 --> 00:57:06,159
want to do is say you know if the

1249
00:57:02,469 --> 00:57:08,019
emitters emit color is greater than zero

1250
00:57:06,159 --> 00:57:10,779
then it's something that we will

1251
00:57:08,019 --> 00:57:12,849
actually raycast from otherwise not and

1252
00:57:10,780 --> 00:57:22,450
the other thing we can do here is this

1253
00:57:12,849 --> 00:57:24,670
could be a you know another value so if

1254
00:57:22,449 --> 00:57:28,419
we wanted to we could say look if you

1255
00:57:24,670 --> 00:57:29,650
don't have at least you know a little

1256
00:57:28,420 --> 00:57:31,180
bit of light coming out of you we're not

1257
00:57:29,650 --> 00:57:33,280
gonna we're gonna assume you can't

1258
00:57:31,179 --> 00:57:45,519
really contribute to a propagation phase

1259
00:57:33,280 --> 00:57:48,580
so that value is tunable right I you

1260
00:57:45,519 --> 00:57:49,659
know down the line so when we come

1261
00:57:48,579 --> 00:57:52,329
through these emitters we're gonna say

1262
00:57:49,659 --> 00:57:53,769
if this is somebody who needed to emit

1263
00:57:52,329 --> 00:57:57,730
we will raycast

1264
00:57:53,769 --> 00:57:59,559
at that point and we'll say that you

1265
00:57:57,730 --> 00:58:00,820
know we want to skip the emitter itself

1266
00:57:59,559 --> 00:58:03,969
because obviously we don't want to hit

1267
00:58:00,820 --> 00:58:05,230
that but we want to recast and we want

1268
00:58:03,969 --> 00:58:06,669
to see who we hit now we do have a

1269
00:58:05,230 --> 00:58:10,240
problem here which is that we didn't

1270
00:58:06,670 --> 00:58:15,400
actually we want to write to that person

1271
00:58:10,239 --> 00:58:18,189
who were who were targeting and our rate

1272
00:58:15,400 --> 00:58:21,510
cast again like because it's nice and

1273
00:58:18,190 --> 00:58:25,599
simple for the final gather

1274
00:58:21,510 --> 00:58:28,740
unfortunately we don't have the ability

1275
00:58:25,599 --> 00:58:31,509
here to know who we actually hit right

1276
00:58:28,739 --> 00:58:34,689
so we would need to expand this to

1277
00:58:31,510 --> 00:58:37,170
include that as much as I didn't want to

1278
00:58:34,690 --> 00:58:37,170
have to do that

1279
00:58:37,530 --> 00:58:57,750
we do need that right so we'll send the

1280
00:58:43,710 --> 00:59:02,480
index and the color back I so we'll set

1281
00:58:57,750 --> 00:59:05,969
the color to zero we'll set the index to

1282
00:59:02,480 --> 00:59:13,619
element count and then off we go

1283
00:59:05,969 --> 00:59:16,199
so in here that's all we really needed

1284
00:59:13,619 --> 00:59:18,389
right is just to remember that then when

1285
00:59:16,199 --> 00:59:21,119
it comes back both of these guys get

1286
00:59:18,389 --> 00:59:22,949
what they want so cure when we have this

1287
00:59:21,119 --> 00:59:28,409
rate cast we don't care what the index

1288
00:59:22,949 --> 00:59:31,439
is so we just use the color in here we

1289
00:59:28,409 --> 00:59:36,239
care about the index so we just use the

1290
00:59:31,440 --> 00:59:38,700
index and off to go so here in this rate

1291
00:59:36,239 --> 00:59:41,839
cast we want to take a look at what the

1292
00:59:38,699 --> 00:59:45,929
index is so here's our hid index like so

1293
00:59:41,840 --> 00:59:52,490
if the hit index is less than the

1294
00:59:45,929 --> 00:59:52,489
element count value right here

1295
00:59:53,750 --> 01:00:06,780
we know it's valid and so what we want

1296
01:00:02,519 --> 01:00:10,639
to do here is just take this and add the

1297
01:00:06,780 --> 01:00:10,640
light that we are trying to send

1298
01:00:12,469 --> 01:00:19,199
basically we're the emitter we've found

1299
01:00:16,110 --> 01:00:24,780
somebody we should transfer light to so

1300
01:00:19,199 --> 01:00:28,250
let's transfer that light and that's all

1301
01:00:24,780 --> 01:00:28,250
we're doing so

1302
01:00:30,139 --> 01:00:33,670
I believe

1303
01:00:41,659 --> 01:00:45,038
to think about this now

1304
01:00:51,449 --> 01:00:58,079
I believe this is the place where we

1305
01:00:55,050 --> 01:00:59,700
should in theory be able to take into

1306
01:00:58,079 --> 01:01:01,500
account the inverse square law more

1307
01:00:59,699 --> 01:01:04,519
directly so we can we're just looking at

1308
01:01:01,500 --> 01:01:14,070
the transference of surfaces here

1309
01:01:04,519 --> 01:01:16,110
surface to surface so I believe this one

1310
01:01:14,070 --> 01:01:18,059
would work the only thing I'm not sure

1311
01:01:16,110 --> 01:01:25,120
about is we can hit the same surface

1312
01:01:18,059 --> 01:01:28,159
twice and we don't really want that

1313
01:01:25,119 --> 01:01:28,159
[Music]

1314
01:01:36,190 --> 01:01:40,519
so the kind of convoluted way we had it

1315
01:01:38,690 --> 01:01:42,889
before we actually looked at each

1316
01:01:40,519 --> 01:01:45,259
individual surface to see whether it

1317
01:01:42,889 --> 01:01:47,719
could see it so in this case what we

1318
01:01:45,260 --> 01:01:51,799
want to do is sort of prohibit ourselves

1319
01:01:47,719 --> 01:01:55,068
from writing to the same person twice if

1320
01:01:51,798 --> 01:01:58,730
we happen to hit them more than once and

1321
01:01:55,068 --> 01:02:02,509
I don't really know the best way to do

1322
01:01:58,730 --> 01:02:05,389
that right which suggests that maybe the

1323
01:02:02,510 --> 01:02:11,599
emission process also wants to just be

1324
01:02:05,389 --> 01:02:14,719
kind of stochastic and not take into

1325
01:02:11,599 --> 01:02:19,838
account things like light distance

1326
01:02:14,719 --> 01:02:19,838
fall-off and so on honestly

1327
01:02:33,420 --> 01:02:36,309
yeah so I'm not really sure about that

1328
01:02:35,949 --> 01:02:40,079
one

1329
01:02:36,309 --> 01:02:41,980
that's a little bit tricky because

1330
01:02:40,079 --> 01:02:44,319
essentially there's two ways we can look

1331
01:02:41,980 --> 01:02:48,760
at this one way is we can look at this

1332
01:02:44,320 --> 01:02:55,000
as a complete N squared problem where we

1333
01:02:48,760 --> 01:02:59,110
want to consider every emitter and every

1334
01:02:55,000 --> 01:03:01,329
receiver and see whether or not we can

1335
01:02:59,110 --> 01:03:03,940
see each one from each other and do one

1336
01:03:01,329 --> 01:03:07,630
light transfer per round the problem

1337
01:03:03,940 --> 01:03:10,450
with that is assuming that our raycast

1338
01:03:07,630 --> 01:03:11,619
we start optimizing the raycast part

1339
01:03:10,449 --> 01:03:14,259
because that's the expensive part of

1340
01:03:11,619 --> 01:03:15,639
both of these we really don't want to be

1341
01:03:14,260 --> 01:03:17,530
in squared anymore we want to just be

1342
01:03:15,639 --> 01:03:19,509
able to do a quick rate cast that uses

1343
01:03:17,530 --> 01:03:28,690
some kind of acceleration and then

1344
01:03:19,510 --> 01:03:30,760
determines who we hit so it almost makes

1345
01:03:28,690 --> 01:03:32,679
me feel like we really just want to do

1346
01:03:30,760 --> 01:03:34,510
this maybe we really don't want to do

1347
01:03:32,679 --> 01:03:38,259
the emitter-base thing at all maybe we

1348
01:03:34,510 --> 01:03:43,510
just want to do stochastic samples

1349
01:03:38,260 --> 01:03:45,930
always I and that's and we just run them

1350
01:03:43,510 --> 01:03:45,930
repeatedly

1351
01:03:55,250 --> 01:04:08,900
I don't have a strong opinion one way or

1352
01:04:06,320 --> 01:04:10,700
the other but just thinking about this

1353
01:04:08,900 --> 01:04:15,170
it really does kind of seem to me like

1354
01:04:10,699 --> 01:04:20,989
we want to you know we we want to have

1355
01:04:15,170 --> 01:04:22,639
some we really I think we really do want

1356
01:04:20,989 --> 01:04:25,250
to stay stochastic and accelerate the

1357
01:04:22,639 --> 01:04:27,949
rate count you know just try to be able

1358
01:04:25,250 --> 01:04:32,079
to increase the rate count and so on so

1359
01:04:27,949 --> 01:04:32,079
yeah I'm gonna say I'm just gonna say

1360
01:04:32,559 --> 01:04:42,949
that that's what we want so there'll be

1361
01:04:39,800 --> 01:04:44,480
a weight and a color here so as we go

1362
01:04:42,949 --> 01:04:49,119
over these when we find an element we

1363
01:04:44,480 --> 01:04:49,119
hit like we'll take the next emit color

1364
01:04:56,289 --> 01:05:01,279
and we'll basically compute whatever the

1365
01:04:59,780 --> 01:05:03,920
lighting transfer is gonna be from the

1366
01:05:01,280 --> 01:05:05,570
hit and then we'll wait it up and at the

1367
01:05:03,920 --> 01:05:10,099
end we'll normalize those weights into

1368
01:05:05,570 --> 01:05:15,470
the final value I think that's what we

1369
01:05:10,099 --> 01:05:18,039
want to do all right so now we actually

1370
01:05:15,469 --> 01:05:21,109
have to figure some of this stuff out

1371
01:05:18,039 --> 01:05:22,429
how much the emission how much you know

1372
01:05:21,110 --> 01:05:25,160
emitted light there's going to be and

1373
01:05:22,429 --> 01:05:28,339
that sort of stuff right so we're

1374
01:05:25,159 --> 01:05:31,309
turning this this surface into sort of a

1375
01:05:28,340 --> 01:05:32,780
virtual emitter if that makes sense and

1376
01:05:31,309 --> 01:05:34,549
again this isn't accurate

1377
01:05:32,780 --> 01:05:37,490
because we're not doing full scene ray

1378
01:05:34,550 --> 01:05:39,530
tracing so per pixel we just have to

1379
01:05:37,489 --> 01:05:41,359
have an idea of how things are sort of

1380
01:05:39,530 --> 01:05:44,269
bouncing around the scene so everything

1381
01:05:41,360 --> 01:05:46,030
is kind of a chalky reflector for

1382
01:05:44,269 --> 01:05:48,259
purposes of this propagation pass

1383
01:05:46,030 --> 01:05:50,120
there's not going to be a lot of like

1384
01:05:48,260 --> 01:05:51,140
focused light reflection and caustics or

1385
01:05:50,119 --> 01:05:52,880
any that stuff we're not going to

1386
01:05:51,139 --> 01:05:55,549
capture right

1387
01:05:52,880 --> 01:05:58,340
so specular surfaces at render time we

1388
01:05:55,550 --> 01:06:03,050
can do but at bounce time we're not

1389
01:05:58,340 --> 01:06:04,280
going to be supporting really okay so

1390
01:06:03,050 --> 01:06:08,870
now what we need to do is figure out

1391
01:06:04,280 --> 01:06:09,080
alright how much light is going to come

1392
01:06:08,869 --> 01:06:15,500
in

1393
01:06:09,079 --> 01:06:17,960
here and so what we know is we're

1394
01:06:15,500 --> 01:06:20,900
starting we have our emitter and we know

1395
01:06:17,960 --> 01:06:23,510
what its emission color was right so

1396
01:06:20,900 --> 01:06:27,470
we're starting with that now we do want

1397
01:06:23,510 --> 01:06:29,000
the incoming direction to vary by the

1398
01:06:27,469 --> 01:06:30,500
cosine because we're storing up the

1399
01:06:29,000 --> 01:06:34,039
amount of light that hits the surface

1400
01:06:30,500 --> 01:06:37,869
that we're going to then send back so we

1401
01:06:34,039 --> 01:06:40,639
do have an inner product in here right

1402
01:06:37,869 --> 01:06:45,319
so we do want to take the inner product

1403
01:06:40,639 --> 01:06:47,750
of the REA direction so the direction

1404
01:06:45,320 --> 01:07:01,970
we're casting out which again we're

1405
01:06:47,750 --> 01:07:06,429
gonna have to yeah what you're gonna

1406
01:07:01,969 --> 01:07:06,429
have to compute here so from the emitter

1407
01:07:11,230 --> 01:07:16,699
for each ray we have to take the

1408
01:07:13,789 --> 01:07:18,110
emission normal and we're gonna take the

1409
01:07:16,699 --> 01:07:21,079
Ray direction-- here that's gonna come

1410
01:07:18,110 --> 01:07:22,340
out from the emitter right we could call

1411
01:07:21,079 --> 01:07:28,610
this more specifically the emission

1412
01:07:22,340 --> 01:07:31,430
direction and of course we know it's

1413
01:07:28,610 --> 01:07:36,019
coming from the emitter origin there we

1414
01:07:31,429 --> 01:07:38,539
go so we do that ray cast out when we

1415
01:07:36,019 --> 01:07:41,349
compute the light color we take the

1416
01:07:38,539 --> 01:07:45,400
inner product of that emission direction

1417
01:07:41,349 --> 01:07:45,400
and we need to clamp it

1418
01:07:47,418 --> 01:07:54,558
with the surface normal that we hit

1419
01:07:50,108 --> 01:07:57,978
right now we want this to be one when

1420
01:07:54,559 --> 01:07:59,798
the emitter direction was directly when

1421
01:07:57,978 --> 01:08:02,598
the emitter could be seen directly above

1422
01:07:59,798 --> 01:08:04,548
the normal exactly and remember the

1423
01:08:02,599 --> 01:08:06,650
emission direction is coming out of the

1424
01:08:04,548 --> 01:08:12,199
emitter so we actually need to negate

1425
01:08:06,650 --> 01:08:13,579
these right because what they're facing

1426
01:08:12,199 --> 01:08:15,168
opposite each other right now the

1427
01:08:13,579 --> 01:08:17,029
emission direction and the receiving

1428
01:08:15,168 --> 01:08:19,908
normal are facing opposite each other we

1429
01:08:17,029 --> 01:08:21,739
would get a negative one in the K in

1430
01:08:19,908 --> 01:08:23,598
that case and we want the opposite

1431
01:08:21,738 --> 01:08:25,789
Dmitri we want one in that case we have

1432
01:08:23,599 --> 01:08:27,889
to flip the sign of that around so that

1433
01:08:25,789 --> 01:08:32,689
it the cosine fall-off works properly

1434
01:08:27,889 --> 01:08:36,048
right so that's the amount that's going

1435
01:08:32,689 --> 01:08:38,719
to come in here but then we also want to

1436
01:08:36,048 --> 01:08:42,460
take the Hadamard product let me I'll

1437
01:08:38,719 --> 01:08:42,460
pull this out here so that we can

1438
01:08:46,000 --> 01:08:58,460
alright I guess we'll call this angle

1439
01:08:48,948 --> 01:09:01,879
and Euler attenuation okay so there's

1440
01:08:58,460 --> 01:09:04,069
the angular and attenuation and then we

1441
01:09:01,880 --> 01:09:06,259
also want to take the Hadamard product

1442
01:09:04,069 --> 01:09:08,509
here with the reflection color because

1443
01:09:06,259 --> 01:09:12,889
whatever the thing is that I hit its R

1444
01:09:08,509 --> 01:09:16,399
if it's gonna reflect that light out by

1445
01:09:12,889 --> 01:09:19,699
multiplying here now what you can see is

1446
01:09:16,399 --> 01:09:21,318
that's wasted work because this

1447
01:09:19,698 --> 01:09:24,858
reflected color is going to multiply

1448
01:09:21,319 --> 01:09:31,489
every attenuated incoming light so what

1449
01:09:24,859 --> 01:09:35,059
I can do is instead wait till the end so

1450
01:09:31,488 --> 01:09:41,909
after we've done everything wait to the

1451
01:09:35,059 --> 01:09:47,170
end to do this right

1452
01:09:41,909 --> 01:09:50,409
so if I sum up all of these only using

1453
01:09:47,170 --> 01:09:53,440
the angular attenuation then at the end

1454
01:09:50,409 --> 01:09:54,789
what I can do is I can loop over and I

1455
01:09:53,439 --> 01:09:59,799
guess to start this needs to be inside

1456
01:09:54,789 --> 01:10:08,829
the iteration obviously is when I run

1457
01:09:59,800 --> 01:10:12,850
through everybody again at the end I

1458
01:10:08,829 --> 01:10:14,739
will look at all of the reflectors and

1459
01:10:12,850 --> 01:10:16,180
again this is really just nominator of

1460
01:10:14,739 --> 01:10:17,289
how I'm thinking of them I'm thinking of

1461
01:10:16,180 --> 01:10:21,180
emitters here I'm thinking reflectors

1462
01:10:17,289 --> 01:10:21,180
here but they're the same elements right

1463
01:10:21,479 --> 01:10:26,469
when I come through here what I want to

1464
01:10:24,189 --> 01:10:35,079
do is I want to say all right the emit

1465
01:10:26,470 --> 01:10:37,810
color is going to now have whatever that

1466
01:10:35,079 --> 01:10:40,359
summation was it's going to be

1467
01:10:37,810 --> 01:10:41,950
multiplied by the reflected color to

1468
01:10:40,359 --> 01:10:44,319
sort of take all of the incident light

1469
01:10:41,949 --> 01:10:45,670
we summed up there was in this that was

1470
01:10:44,319 --> 01:10:47,469
going to bounce off the surface it's

1471
01:10:45,670 --> 01:10:48,609
gonna get modulated by the reflected

1472
01:10:47,470 --> 01:10:50,409
color because you know if this is only a

1473
01:10:48,609 --> 01:10:51,639
red surface we should knock out all the

1474
01:10:50,409 --> 01:10:53,920
green and blue light there or whatever

1475
01:10:51,640 --> 01:10:55,329
right but again I just pulled out that

1476
01:10:53,920 --> 01:10:57,880
would have been a common term across the

1477
01:10:55,329 --> 01:11:00,100
entire summation and then I also want to

1478
01:10:57,880 --> 01:11:02,739
average over the number of samples that

1479
01:11:00,100 --> 01:11:06,730
got hit here so I want to say okay in

1480
01:11:02,739 --> 01:11:09,579
addition to that I need to take whatever

1481
01:11:06,729 --> 01:11:11,469
that lighting cap was there and I need

1482
01:11:09,579 --> 01:11:16,600
to do one over the lightning camp right

1483
01:11:11,470 --> 01:11:21,909
so I need to also multiply it by that

1484
01:11:16,600 --> 01:11:24,910
next limit C needs to take the next emit

1485
01:11:21,909 --> 01:11:29,849
W and multiply it over it's alright so

1486
01:11:24,909 --> 01:11:29,849
one over get next emit W

1487
01:11:33,300 --> 01:11:41,880
like so now we don't need to do that in

1488
01:11:38,729 --> 01:11:45,269
the case where there is no no hits were

1489
01:11:41,880 --> 01:11:49,560
recorded right so we can do that

1490
01:11:45,270 --> 01:11:51,060
comparison continue so that's fine and

1491
01:11:49,560 --> 01:11:53,700
we may want to store this as an integer

1492
01:11:51,060 --> 01:12:09,750
for that purpose in that case because

1493
01:11:53,699 --> 01:12:11,309
we're just sort of counting up but

1494
01:12:09,750 --> 01:12:12,720
that's neither that's not super

1495
01:12:11,310 --> 01:12:14,850
important that's like a fiddly detail at

1496
01:12:12,720 --> 01:12:16,440
this point so after we do all of these

1497
01:12:14,850 --> 01:12:18,950
we know how many hit each individual

1498
01:12:16,439 --> 01:12:21,689
reflector we're gonna go ahead and

1499
01:12:18,949 --> 01:12:25,260
correct for that weighting factor there

1500
01:12:21,689 --> 01:12:27,029
right so each sample that came in we're

1501
01:12:25,260 --> 01:12:28,949
gonna correct for that and then we're

1502
01:12:27,029 --> 01:12:34,939
also going to knock out the using the

1503
01:12:28,949 --> 01:12:34,939
reflection color we then need to clear

1504
01:12:40,909 --> 01:12:45,539
everything out right so this clears

1505
01:12:44,100 --> 01:12:47,460
everything out so that we can then do a

1506
01:12:45,539 --> 01:12:50,100
summation another pass a summation and

1507
01:12:47,460 --> 01:12:52,340
this stuff I think we don't really want

1508
01:12:50,100 --> 01:12:54,780
any more right we just don't need this

1509
01:12:52,340 --> 01:12:59,100
this is stuff for computing the final

1510
01:12:54,779 --> 01:13:01,259
lighting and it's just not something we

1511
01:12:59,100 --> 01:13:07,079
need so if we go back and look at the

1512
01:13:01,260 --> 01:13:09,329
OpenGL code right dumi and look at all

1513
01:13:07,079 --> 01:13:11,609
of this stuff this is stuff that we then

1514
01:13:09,329 --> 01:13:17,039
eventually want to put in there right

1515
01:13:11,609 --> 01:13:19,289
like all of this stuff right here is

1516
01:13:17,039 --> 01:13:21,859
sort of stuff we want to put into the

1517
01:13:19,289 --> 01:13:21,859
fragment code

1518
01:13:27,899 --> 01:13:35,469
in the future this summation is not

1519
01:13:33,939 --> 01:13:38,619
necessary anymore because we're kind of

1520
01:13:35,470 --> 01:13:40,119
doing it here so I think that's really

1521
01:13:38,619 --> 01:13:41,710
all we need

1522
01:13:40,119 --> 01:13:52,930
that's the mote that's that's pretty

1523
01:13:41,710 --> 01:13:55,869
much it right and here honestly we could

1524
01:13:52,930 --> 01:13:58,720
just do this per channel as well we

1525
01:13:55,869 --> 01:14:16,989
could just say if emits c RM @ cg m @ CB

1526
01:13:58,720 --> 01:14:18,579
right you know something like this right

1527
01:14:16,989 --> 01:14:20,679
we don't really need a length squared we

1528
01:14:18,579 --> 01:14:25,989
just need to know if any of the channels

1529
01:14:20,680 --> 01:14:27,820
summed up to it right so I think that's

1530
01:14:25,989 --> 01:14:30,279
roughly what we want there we now need

1531
01:14:27,819 --> 01:14:34,269
to set sort of our initial stuff where

1532
01:14:30,279 --> 01:14:35,769
we do our extraction because we have to

1533
01:14:34,270 --> 01:14:38,260
clear this stuff properly and make sure

1534
01:14:35,770 --> 01:14:39,700
everything's set right so when we do our

1535
01:14:38,260 --> 01:14:41,800
extraction you can see I would set these

1536
01:14:39,699 --> 01:14:44,769
things here we've got front emit C and

1537
01:14:41,800 --> 01:14:45,909
vacuum it C and nonsense like that so we

1538
01:14:44,770 --> 01:14:46,570
kind of know we're not doing that

1539
01:14:45,909 --> 01:14:48,489
anymore

1540
01:14:46,569 --> 01:14:53,439
right we're not doing a back emit see

1541
01:14:48,489 --> 01:14:55,989
we're just doing a regular emit C and I

1542
01:14:53,439 --> 01:14:59,469
think do we clear these normally I don't

1543
01:14:55,989 --> 01:15:04,329
know if we actually clear these yeah we

1544
01:14:59,470 --> 01:15:06,760
need to actually clear these in here so

1545
01:15:04,329 --> 01:15:10,210
we need to take these two values and set

1546
01:15:06,760 --> 01:15:19,810
them properly right so we need to say

1547
01:15:10,210 --> 01:15:22,770
like next emit see oh no y-you set those

1548
01:15:19,810 --> 01:15:22,770
both there we go

1549
01:15:24,609 --> 01:15:29,389
right so it looks like we want it like

1550
01:15:26,989 --> 01:15:36,619
that so we have our omit see our next to

1551
01:15:29,390 --> 01:15:39,530
Mitzi and our next omit W like so so we

1552
01:15:36,619 --> 01:15:41,180
just get those set properly I don't

1553
01:15:39,529 --> 01:15:43,849
think we need incident later average

1554
01:15:41,180 --> 01:15:48,500
direction to light because those will

1555
01:15:43,850 --> 01:15:51,260
get set directly and they don't need to

1556
01:15:48,500 --> 01:15:52,609
be cleared to anything in particular so

1557
01:15:51,260 --> 01:15:55,400
the same thing has to be true in this

1558
01:15:52,609 --> 01:15:56,359
function as well because we have two

1559
01:15:55,399 --> 01:15:57,979
different ways you can strike their

1560
01:15:56,359 --> 01:16:01,659
vertices right now

1561
01:15:57,979 --> 01:16:07,149
so again looks like this is not relevant

1562
01:16:01,659 --> 01:16:15,710
so we have an omission here we have a

1563
01:16:07,149 --> 01:16:21,439
next limit C 0 and a next image W at 0

1564
01:16:15,710 --> 01:16:24,170
as well right and those two are just you

1565
01:16:21,439 --> 01:16:29,989
know sort of ad hoc extractions that we

1566
01:16:24,170 --> 01:16:31,699
were doing um I don't know why we pulled

1567
01:16:29,989 --> 01:16:35,649
elements out there doesn't look like we

1568
01:16:31,699 --> 01:16:35,649
really need to so may be able to do this

1569
01:16:37,220 --> 01:16:52,140
no no no I like it up let's do it

1570
01:16:40,409 --> 01:16:55,050
let's let's get down all right so this

1571
01:16:52,140 --> 01:16:57,180
has to actually return a raycast result

1572
01:16:55,050 --> 01:16:59,039
now I didn't actually change their turn

1573
01:16:57,180 --> 01:17:09,240
value even though I read in the function

1574
01:16:59,039 --> 01:17:22,439
to have it it's just a weird typo there

1575
01:17:09,239 --> 01:17:25,019
no I did that okay and let's see here so

1576
01:17:22,439 --> 01:17:28,109
now we've got sort of these old output

1577
01:17:25,020 --> 01:17:30,660
letting quad stuff so we don't really

1578
01:17:28,109 --> 01:17:32,359
have this visibility value anymore so

1579
01:17:30,659 --> 01:17:37,380
I'm just gonna get rid of that entirely

1580
01:17:32,359 --> 01:17:40,079
and these are just gonna be our omit C's

1581
01:17:37,380 --> 01:17:42,300
I think what we really want to draw now

1582
01:17:40,079 --> 01:17:45,659
is that incident color but we can leave

1583
01:17:42,300 --> 01:17:49,619
this as a Mitzi's for now we probably

1584
01:17:45,659 --> 01:17:51,149
want to be able to drop both of them but

1585
01:17:49,619 --> 01:17:52,859
the emit C's are the colors that we

1586
01:17:51,149 --> 01:17:55,559
actually were sending out from those

1587
01:17:52,859 --> 01:18:00,000
surfaces which is the information that

1588
01:17:55,560 --> 01:18:01,590
we probably want to draw but we really

1589
01:18:00,000 --> 01:18:04,170
want to see both we want to be able to

1590
01:18:01,590 --> 01:18:07,590
see both the emission color and the

1591
01:18:04,170 --> 01:18:11,730
incident light summation because both of

1592
01:18:07,590 --> 01:18:13,920
them are relevant so all right so now

1593
01:18:11,729 --> 01:18:18,859
when we're packing things down again

1594
01:18:13,920 --> 01:18:18,859
that color now wants to be the incident

1595
01:18:19,340 --> 01:18:24,710
what is the average direction to light

1596
01:18:27,529 --> 01:18:32,840
oops that's d sorry I was just this is

1597
01:18:34,239 --> 01:18:50,269
incident-light so this wants to take the

1598
01:18:38,960 --> 01:18:51,680
incident light not the front emit and

1599
01:18:50,270 --> 01:18:53,510
that's gonna pack that down so now we're

1600
01:18:51,680 --> 01:18:56,510
storing the incident light in C and

1601
01:18:53,510 --> 01:18:59,119
restoring the average direction to the

1602
01:18:56,510 --> 01:19:02,750
light in D which is the information we

1603
01:18:59,119 --> 01:19:04,609
wanted this is just some debug code but

1604
01:19:02,750 --> 01:19:10,479
we'll keep it working for now because

1605
01:19:04,609 --> 01:19:10,479
why not and then inside the shader now

1606
01:19:11,979 --> 01:19:16,819
so this is actually now more correctly

1607
01:19:14,720 --> 01:19:18,440
stated so this is this is the light

1608
01:19:16,819 --> 01:19:24,259
color and this is the light direction

1609
01:19:18,439 --> 01:19:28,629
right and we're sort of taking a look at

1610
01:19:24,260 --> 01:19:28,630
all right so how what is this code doing

1611
01:19:32,439 --> 01:19:43,380
so that's a distance fall-off which

1612
01:19:40,630 --> 01:19:46,118
seems okay

1613
01:19:43,380 --> 01:19:51,130
because we're not sampling multiple rays

1614
01:19:46,118 --> 01:19:56,049
so we kind of have to do that and then

1615
01:19:51,130 --> 01:20:01,389
we've got a inner product between the

1616
01:19:56,050 --> 01:20:06,429
light direction which we want and the

1617
01:20:01,389 --> 01:20:09,939
world normal seems correct so I think

1618
01:20:06,429 --> 01:20:13,059
that's all correct now we just did a ton

1619
01:20:09,939 --> 01:20:15,630
of new code there so we're gonna have to

1620
01:20:13,059 --> 01:20:17,559
do some debugging which means probably

1621
01:20:15,630 --> 01:20:20,458
how much time we have left in the stream

1622
01:20:17,559 --> 01:20:22,659
probably I will leave it for next time

1623
01:20:20,458 --> 01:20:26,019
because this ain't gonna produce much

1624
01:20:22,658 --> 01:20:28,138
wow that was actually better than I was

1625
01:20:26,019 --> 01:20:28,139
expecting

1626
01:20:29,158 --> 01:20:36,418
doesn't look correct but I was expecting

1627
01:20:32,708 --> 01:20:36,418
just like complete garbage or something

1628
01:20:37,050 --> 01:20:46,529
yeah all right well that was more than I

1629
01:20:40,090 --> 01:20:50,828
had hope for it it's kind of trippy and

1630
01:20:46,529 --> 01:20:56,859
kind of cool actually and pretty fast

1631
01:20:50,828 --> 01:20:58,569
oddly enough as well so yeah that means

1632
01:20:56,859 --> 01:21:00,269
a lot closer to done than I was

1633
01:20:58,569 --> 01:21:01,498
expecting

1634
01:21:00,270 --> 01:21:05,530
[Music]

1635
01:21:01,498 --> 01:21:07,658
we're getting there folks the long slow

1636
01:21:05,529 --> 01:21:09,849
struggle of lighting but yeah it's not

1637
01:21:07,658 --> 01:21:11,469
great yet I also don't know why we're

1638
01:21:09,849 --> 01:21:13,840
not getting any yellow light

1639
01:21:11,469 --> 01:21:17,618
transmission here so something bad is

1640
01:21:13,840 --> 01:21:19,449
happening they're like why why there's

1641
01:21:17,618 --> 01:21:21,759
no pickup from the yellow light on this

1642
01:21:19,448 --> 01:21:23,168
I don't know I don't know if it's

1643
01:21:21,760 --> 01:21:27,998
because there's some too much shadowing

1644
01:21:23,168 --> 01:21:30,340
happening or something and also like the

1645
01:21:27,998 --> 01:21:33,309
red blue light transmission here is kind

1646
01:21:30,340 --> 01:21:37,719
of out of control so we've got a bunch

1647
01:21:33,309 --> 01:21:41,880
of stuff to work on but I'm pretty happy

1648
01:21:37,719 --> 01:21:44,529
with that what I would like to maybe do

1649
01:21:41,880 --> 01:21:49,050
is take out

1650
01:21:44,529 --> 01:21:55,750
some of the additional emitters here so

1651
01:21:49,050 --> 01:21:58,210
if I go into for example world's mode

1652
01:21:55,750 --> 01:22:01,359
I don't remember how we were setting

1653
01:21:58,210 --> 01:22:07,409
these emitters here but like snake

1654
01:22:01,359 --> 01:22:07,409
segments for example and piece of light

1655
01:22:10,619 --> 01:22:18,909
so if I were to take out the ad piece

1656
01:22:14,529 --> 01:22:23,529
light for the snake I think we're

1657
01:22:18,909 --> 01:22:26,829
probably gonna want just this one light

1658
01:22:23,529 --> 01:22:35,949
source in here right so that way we can

1659
01:22:26,829 --> 01:22:37,989
sort of see man that is just getting

1660
01:22:35,949 --> 01:22:40,269
this is starting to be kind of cool like

1661
01:22:37,989 --> 01:22:44,289
as the as you move around and the

1662
01:22:40,270 --> 01:22:45,790
lighting changes on you like it's kind

1663
01:22:44,289 --> 01:22:48,310
of all busted right now so it's not

1664
01:22:45,789 --> 01:22:49,779
really good but it's like it's just fun

1665
01:22:48,310 --> 01:22:52,150
when you get into those sorts of

1666
01:22:49,779 --> 01:22:53,590
situations right like when you can see

1667
01:22:52,149 --> 01:22:55,539
the lighting sort of start to change in

1668
01:22:53,590 --> 01:22:57,069
or whatever I don't know starting to

1669
01:22:55,539 --> 01:23:04,680
have sort of almost a real render not

1670
01:22:57,069 --> 01:23:04,679
quite but almost um so yeah like I

1671
01:23:07,380 --> 01:23:17,109
wanted to take out the I wanted to take

1672
01:23:15,520 --> 01:23:18,670
out those additional yellow lights

1673
01:23:17,109 --> 01:23:20,289
because when we first start debugging

1674
01:23:18,670 --> 01:23:22,630
this we're gonna want to look at just

1675
01:23:20,289 --> 01:23:24,399
what happens with one light source so we

1676
01:23:22,630 --> 01:23:24,940
can have a better feel for what's going

1677
01:23:24,399 --> 01:23:28,659
on there

1678
01:23:24,939 --> 01:23:30,879
right so that's what we'll start working

1679
01:23:28,659 --> 01:23:32,949
on next time and I'll try to get visual

1680
01:23:30,880 --> 01:23:34,930
Studios registration stuff straightened

1681
01:23:32,949 --> 01:23:40,679
out so we can debug I'll go to some q

1682
01:23:34,930 --> 01:23:40,680
and a's now as well

1683
01:23:49,929 --> 01:23:53,329
please increase the fontsize individual

1684
01:23:52,310 --> 01:23:54,139
City for debugging the font size is

1685
01:23:53,329 --> 01:23:55,750
pretty small

1686
01:23:54,139 --> 01:23:57,679
it's not the same as for it uses uh

1687
01:23:55,750 --> 01:24:04,310
problem is of course I can't do that

1688
01:23:57,679 --> 01:24:04,849
today because Visual Studio is doing its

1689
01:24:04,310 --> 01:24:12,610
thing

1690
01:24:04,849 --> 01:24:12,610
I wonder free to just make an account

1691
01:24:13,750 --> 01:24:20,899
try to remind me next time tomorrow I

1692
01:24:18,590 --> 01:24:34,279
could try to make a note of it too here

1693
01:24:20,899 --> 01:24:36,908
I suppose I don't know if I spelled

1694
01:24:34,279 --> 01:24:36,908
commensurate right

1695
01:24:45,420 --> 01:24:53,470
we're visual to do yeah uh so I don't

1696
01:24:48,909 --> 01:24:55,029
really I don't use the I don't use the

1697
01:24:53,470 --> 01:24:58,210
shareware version of Idul studio I still

1698
01:24:55,029 --> 01:25:02,469
use I bought the professional one that I

1699
01:24:58,210 --> 01:25:05,199
use at work I still use 2012 but I used

1700
01:25:02,470 --> 01:25:07,270
the shareware version on the stream

1701
01:25:05,199 --> 01:25:08,859
because that's what everyone else is

1702
01:25:07,270 --> 01:25:10,990
gonna have to like I don't want people

1703
01:25:08,859 --> 01:25:12,369
who are trying to learn to program to

1704
01:25:10,989 --> 01:25:16,119
have to go by the professional version

1705
01:25:12,369 --> 01:25:22,689
of Visual Studio especially cuz it's not

1706
01:25:16,119 --> 01:25:24,430
worth the price yeah I do have an

1707
01:25:22,689 --> 01:25:26,859
account I just don't I got to go look up

1708
01:25:24,430 --> 01:25:28,480
what the password is I don't know what

1709
01:25:26,859 --> 01:25:33,210
it is so I'll go look it up and then

1710
01:25:28,479 --> 01:25:33,209
I'll sign it in after the stream is done

1711
01:25:37,220 --> 01:25:41,130
and yeah and the reason I didn't use for

1712
01:25:39,449 --> 01:25:42,239
our coder I ran notepad detecting them

1713
01:25:41,130 --> 01:25:44,010
to do is because I want it to be a

1714
01:25:42,239 --> 01:25:47,130
window like a separate window that I

1715
01:25:44,010 --> 01:25:48,539
have that I won't close right I cuz I'm

1716
01:25:47,130 --> 01:25:53,010
gonna close for a coder in a second and

1717
01:25:48,539 --> 01:25:56,060
it's gonna be you know I want some myths

1718
01:25:53,010 --> 01:25:56,060
stuck up there

1719
01:26:18,550 --> 01:26:21,489
yeah no malicious intent understatement

1720
01:26:20,260 --> 01:26:22,539
I just find it funny how expires are

1721
01:26:21,489 --> 01:26:24,219
three days without your giving them

1722
01:26:22,539 --> 01:26:25,420
customer did it yeah so there's a couple

1723
01:26:24,220 --> 01:26:26,800
of different things about it right that

1724
01:26:25,420 --> 01:26:30,310
I don't like about the visuals of your

1725
01:26:26,800 --> 01:26:34,029
thing first of all like I think it I'm

1726
01:26:30,310 --> 01:26:37,630
happy to pay for software you know I

1727
01:26:34,029 --> 01:26:39,880
like paying for software actually and I

1728
01:26:37,630 --> 01:26:41,890
miss it and so when I when a piece of

1729
01:26:39,880 --> 01:26:46,300
software package has two things going

1730
01:26:41,890 --> 01:26:50,410
for it I'm pretty happy one it does not

1731
01:26:46,300 --> 01:26:53,020
have DRM so I can just take the

1732
01:26:50,409 --> 01:26:56,789
executable package and whatever check it

1733
01:26:53,020 --> 01:27:01,150
into source code control pay my money

1734
01:26:56,789 --> 01:27:09,609
whatever the price is and be good that's

1735
01:27:01,149 --> 01:27:11,500
thing one and thing two is that it the

1736
01:27:09,609 --> 01:27:15,159
price of the software is roughly

1737
01:27:11,500 --> 01:27:17,680
commensurate with what it does and that

1738
01:27:15,159 --> 01:27:19,210
it does the thing that I want right so a

1739
01:27:17,680 --> 01:27:21,610
Visual Studio kind of fails on both

1740
01:27:19,210 --> 01:27:23,050
accounts to a large extent I don't use

1741
01:27:21,609 --> 01:27:25,449
Visual Studio because it's good or that

1742
01:27:23,050 --> 01:27:27,460
they even are attempting to have me as a

1743
01:27:25,449 --> 01:27:29,050
customer I just use it because there is

1744
01:27:27,460 --> 01:27:32,949
no really other debuggers right now

1745
01:27:29,050 --> 01:27:36,010
right there's really almost no

1746
01:27:32,949 --> 01:27:37,359
competition in that space there's

1747
01:27:36,010 --> 01:27:38,980
competition in like the reverse

1748
01:27:37,359 --> 01:27:40,539
engineering space like there's AI 2 Pro

1749
01:27:38,979 --> 01:27:42,159
and stuff like that but you know not

1750
01:27:40,539 --> 01:27:43,810
really in the just regular source level

1751
01:27:42,159 --> 01:27:45,789
of debuggers for people who wrote their

1752
01:27:43,810 --> 01:27:48,580
own program not who are you know trying

1753
01:27:45,789 --> 01:27:50,109
to inspect some else's program so like

1754
01:27:48,579 --> 01:27:53,079
good examples of software packages that

1755
01:27:50,109 --> 01:27:56,319
I love paying for Reaper the audio

1756
01:27:53,079 --> 01:27:59,109
package priced very reasonably for what

1757
01:27:56,319 --> 01:28:00,309
it does did no DRM at all you can just

1758
01:27:59,109 --> 01:28:02,139
check it into your source code control

1759
01:28:00,310 --> 01:28:03,340
there's just a registration key you just

1760
01:28:02,140 --> 01:28:08,260
save the registration key and you're

1761
01:28:03,340 --> 01:28:10,210
good to go it's targeted at the people

1762
01:28:08,260 --> 01:28:11,730
who is targeted at like that's like hey

1763
01:28:10,210 --> 01:28:14,140
this is for recording professionals

1764
01:28:11,729 --> 01:28:18,250
every change they make is for recording

1765
01:28:14,140 --> 01:28:19,590
professionals like I it's great it's a

1766
01:28:18,250 --> 01:28:21,880
great software purchasing experience

1767
01:28:19,590 --> 01:28:24,420
example of the worst possible starving

1768
01:28:21,880 --> 01:28:26,829
experience anything from Autodesk right

1769
01:28:24,420 --> 01:28:29,020
massively more expensive than the value

1770
01:28:26,829 --> 01:28:30,489
it gives you because usually they're

1771
01:28:29,020 --> 01:28:31,900
targeting like thousands of different

1772
01:28:30,489 --> 01:28:33,130
use cases only one of what

1773
01:28:31,899 --> 01:28:36,099
is relevant to you and you're paying for

1774
01:28:33,130 --> 01:28:39,400
all the rest of them extremely intrusive

1775
01:28:36,100 --> 01:28:44,170
DRM even installs like rootkits on your

1776
01:28:39,399 --> 01:28:46,239
machine more or less right cannot be

1777
01:28:44,170 --> 01:28:47,680
checked into source code control right

1778
01:28:46,239 --> 01:28:50,939
cannot be efficiently distributed

1779
01:28:47,680 --> 01:28:54,039
throughout your team it just and

1780
01:28:50,939 --> 01:28:55,569
Microsoft has sort of gone from being in

1781
01:28:54,039 --> 01:28:56,979
the first camp when you used to buy

1782
01:28:55,569 --> 01:28:58,389
Visual Studio you just got a CD you can

1783
01:28:56,979 --> 01:28:59,469
install it on computer there was no DRM

1784
01:28:58,390 --> 01:29:01,780
you could check it in the source code

1785
01:28:59,470 --> 01:29:03,640
control it just worked you paid your

1786
01:29:01,779 --> 01:29:05,380
money you had it all the features were

1787
01:29:03,640 --> 01:29:07,450
geared towards you right professional

1788
01:29:05,380 --> 01:29:10,770
developer programming and see now

1789
01:29:07,449 --> 01:29:13,269
they've gone well 100 percent Autodesk

1790
01:29:10,770 --> 01:29:15,130
tons of features for everyone in their

1791
01:29:13,270 --> 01:29:16,780
grandmother most of them are relevant to

1792
01:29:15,130 --> 01:29:21,100
you last time they cared about game

1793
01:29:16,779 --> 01:29:24,329
developers was you know 1983 that's a

1794
01:29:21,100 --> 01:29:27,789
joke obviously it was more like 1995 and

1795
01:29:24,329 --> 01:29:29,319
you know the price is astronomical

1796
01:29:27,789 --> 01:29:32,439
compared to what you're getting for it

1797
01:29:29,319 --> 01:29:34,539
there's it's DRM all over the place even

1798
01:29:32,439 --> 01:29:35,739
the parts that aren't dear m'd you can't

1799
01:29:34,539 --> 01:29:37,239
even check in the source control Chris

1800
01:29:35,739 --> 01:29:39,039
are 8 million weird like side-by-side

1801
01:29:37,239 --> 01:29:42,429
assemblies installs and blah blah blah

1802
01:29:39,039 --> 01:29:43,840
so you know nowadays I tried to purchase

1803
01:29:42,430 --> 01:29:46,900
as little as possible from Microsoft

1804
01:29:43,840 --> 01:29:49,569
because they went you know they

1805
01:29:46,899 --> 01:29:52,000
basically went from selling software the

1806
01:29:49,569 --> 01:29:54,130
way that I purchase software and and the

1807
01:29:52,000 --> 01:29:55,600
way it makes me effective to selling

1808
01:29:54,130 --> 01:29:57,989
software the way that just makes my life

1809
01:29:55,600 --> 01:29:57,990
miserable

1810
01:30:05,659 --> 01:30:10,170
did you try Connie moon instead of stock

1811
01:30:08,279 --> 01:30:12,269
command prompt I loved quake console

1812
01:30:10,170 --> 01:30:14,430
effective deliveries I don't spend much

1813
01:30:12,270 --> 01:30:18,210
time in the command console so I don't

1814
01:30:14,430 --> 01:30:21,539
go I don't complexify my install by

1815
01:30:18,210 --> 01:30:24,560
using custom one if you're someone who

1816
01:30:21,539 --> 01:30:27,989
spends a lot of time in the console and

1817
01:30:24,560 --> 01:30:34,590
writes lots of stuff there then you know

1818
01:30:27,989 --> 01:30:36,090
that that may be a good idea final space

1819
01:30:34,590 --> 01:30:37,829
is the good times for paying software

1820
01:30:36,090 --> 01:30:40,380
and our hat for paying for suffering are

1821
01:30:37,829 --> 01:30:42,239
happier totally over yes there's like a

1822
01:30:40,380 --> 01:30:44,970
few very specific software packages

1823
01:30:42,239 --> 01:30:47,279
where you still pay your money and good

1824
01:30:44,970 --> 01:30:50,190
service in return there vanishingly

1825
01:30:47,279 --> 01:30:53,329
small Reaper is like one of the last

1826
01:30:50,189 --> 01:30:53,329
remaining examples right

1827
01:31:03,520 --> 01:31:05,620
couldn't thought for long time you've

1828
01:31:04,630 --> 01:31:07,329
done something with automated unit

1829
01:31:05,619 --> 01:31:08,979
testing are you playing - no we don't

1830
01:31:07,329 --> 01:31:13,140
really have much that needs unit testing

1831
01:31:08,979 --> 01:31:16,209
in this package in the in this program

1832
01:31:13,140 --> 01:31:18,789
so there probably won't be any automated

1833
01:31:16,210 --> 01:31:21,430
unit testing there might if we want to

1834
01:31:18,789 --> 01:31:25,569
get saucy we might do the game industry

1835
01:31:21,430 --> 01:31:28,210
version of unit testing which is because

1836
01:31:25,569 --> 01:31:29,500
generally except for some core systems

1837
01:31:28,210 --> 01:31:30,670
unit testing doesn't really buy you

1838
01:31:29,500 --> 01:31:34,630
anything in game development because it

1839
01:31:30,670 --> 01:31:37,149
only finds your really easy bugs the

1840
01:31:34,630 --> 01:31:38,739
really hard bugs are the ones that come

1841
01:31:37,149 --> 01:31:40,689
from things that evolve over time in the

1842
01:31:38,738 --> 01:31:42,429
game but there is sort of a game

1843
01:31:40,689 --> 01:31:45,069
development equipment that and that is

1844
01:31:42,430 --> 01:31:48,520
sort of like randomized input testing or

1845
01:31:45,069 --> 01:31:51,039
even structured Impa testing where you

1846
01:31:48,520 --> 01:31:54,400
basically write sort of a bot almost

1847
01:31:51,039 --> 01:31:57,210
that tries to run your game in various

1848
01:31:54,399 --> 01:32:03,849
ways and sees if it can break it right

1849
01:31:57,210 --> 01:32:05,500
and this is great like this it is sort

1850
01:32:03,850 --> 01:32:07,960
of the equivalent of unit testing for

1851
01:32:05,500 --> 01:32:11,319
like web stuff unit testing is good at

1852
01:32:07,960 --> 01:32:12,730
finding like server bugs because servers

1853
01:32:11,319 --> 01:32:15,039
have well-defined inputs and outputs

1854
01:32:12,729 --> 01:32:16,779
that you can run unit tests against unit

1855
01:32:15,039 --> 01:32:18,189
testing is crappy for finding game bug

1856
01:32:16,779 --> 01:32:19,659
because it can only find the easy game

1857
01:32:18,189 --> 01:32:22,960
bugs like bugs in your memory allocator

1858
01:32:19,659 --> 01:32:27,369
bugs in your asset loader like okay

1859
01:32:22,960 --> 01:32:28,539
great like yeah maybe that's worth a

1860
01:32:27,369 --> 01:32:30,159
little bit something and if you have a

1861
01:32:28,539 --> 01:32:31,810
summer intern have them write them great

1862
01:32:30,159 --> 01:32:33,488
go for it but the problem is they're

1863
01:32:31,810 --> 01:32:35,620
really hard bugs in game development are

1864
01:32:33,488 --> 01:32:38,139
the ones that come from odd interactions

1865
01:32:35,619 --> 01:32:41,710
of the game over time and unit testing

1866
01:32:38,140 --> 01:32:43,510
does zero for this so but that doesn't

1867
01:32:41,710 --> 01:32:45,909
mean that automated testing is is a bad

1868
01:32:43,510 --> 01:32:47,860
idea for games it just means that you

1869
01:32:45,909 --> 01:32:50,198
gotta use it's not unit testing it's

1870
01:32:47,859 --> 01:32:53,710
it's actually sort of more constructed

1871
01:32:50,198 --> 01:32:57,069
randomized input testing and it and it

1872
01:32:53,710 --> 01:32:58,869
works very well so so we may if we get

1873
01:32:57,069 --> 01:33:00,969
saucy at the end of the project we may

1874
01:32:58,869 --> 01:33:02,829
try to do that because you do find a lot

1875
01:33:00,969 --> 01:33:06,510
of bugs you would not have found if you

1876
01:33:02,829 --> 01:33:06,510
do put stuff like that in there

1877
01:33:07,350 --> 01:33:17,970
all right um I'll just quickly answer

1878
01:33:16,619 --> 01:33:19,289
this last question how do you keep your

1879
01:33:17,970 --> 01:33:21,630
motivation grand long-running products I

1880
01:33:19,289 --> 01:33:23,939
don't really have a lot of troubles

1881
01:33:21,630 --> 01:33:27,690
keeping mood keeping motivated to work

1882
01:33:23,939 --> 01:33:30,149
on stuff what I do have the two problems

1883
01:33:27,689 --> 01:33:32,759
I tend to face are just a getting too

1884
01:33:30,149 --> 01:33:34,170
stressed out because I'm fine like I

1885
01:33:32,760 --> 01:33:36,449
could spend ten years working on a

1886
01:33:34,170 --> 01:33:39,510
project but nobody wants to pay for that

1887
01:33:36,449 --> 01:33:40,800
right and so I get really stressed

1888
01:33:39,510 --> 01:33:42,090
because I always behind because I'm

1889
01:33:40,800 --> 01:33:43,140
always like looking into things or

1890
01:33:42,090 --> 01:33:44,550
experimenting with things when I

1891
01:33:43,140 --> 01:33:45,710
probably should just do something stupid

1892
01:33:44,550 --> 01:33:48,690
and move on

1893
01:33:45,710 --> 01:33:49,619
so that's more a problem I have I don't

1894
01:33:48,689 --> 01:33:51,539
really have the problem of the

1895
01:33:49,619 --> 01:33:52,890
motivation I'm I'm like usually my

1896
01:33:51,539 --> 01:33:55,319
problem is the opposite I'm too

1897
01:33:52,890 --> 01:33:56,880
motivated to go solve some problem that

1898
01:33:55,319 --> 01:33:59,489
really probably shouldn't be looked into

1899
01:33:56,880 --> 01:34:01,560
at this point right that's why I'm kind

1900
01:33:59,489 --> 01:34:02,880
of more of a research coder than a

1901
01:34:01,560 --> 01:34:05,580
production coder I'm like on the

1902
01:34:02,880 --> 01:34:08,430
research side of production is where I

1903
01:34:05,579 --> 01:34:09,779
tend to be more successful and straight

1904
01:34:08,430 --> 01:34:12,060
production I'm actually much worse

1905
01:34:09,779 --> 01:34:14,909
because I want to go look I want to go

1906
01:34:12,060 --> 01:34:18,539
look for new ways to do things I'm too

1907
01:34:14,909 --> 01:34:20,189
motivated to do that and what I almost

1908
01:34:18,539 --> 01:34:22,920
need is a decrease in motivation I

1909
01:34:20,189 --> 01:34:24,449
almost need to like I would be better

1910
01:34:22,920 --> 01:34:27,210
off if I just wanted to get things done

1911
01:34:24,449 --> 01:34:29,609
quickly sometimes and just wasn't

1912
01:34:27,210 --> 01:34:33,720
motivated to go do more work on

1913
01:34:29,609 --> 01:34:37,279
something right so there's that and the

1914
01:34:33,720 --> 01:34:37,280
other problem that I tend to have is

1915
01:34:38,720 --> 01:34:42,140
what was I going to say

1916
01:34:45,760 --> 01:34:51,000
all right I don't know what it was sorry

1917
01:34:51,300 --> 01:34:55,050
what was the other problem

1918
01:35:03,380 --> 01:35:14,328
I don't know yeah I don't know but yeah

1919
01:35:12,560 --> 01:35:16,730
that's typically the problem I'm the

1920
01:35:14,328 --> 01:35:17,899
main program problem I have is wanting

1921
01:35:16,729 --> 01:35:20,448
to go solve problems that don't need to

1922
01:35:17,899 --> 01:35:22,039
be solved right now and I don't really

1923
01:35:20,448 --> 01:35:27,198
think of that as that much of a problem

1924
01:35:22,039 --> 01:35:31,519
as a requirement right it's like that

1925
01:35:27,198 --> 01:35:33,529
basically means that when I'm taking on

1926
01:35:31,520 --> 01:35:36,860
stuff I need to do stuff that benefits

1927
01:35:33,529 --> 01:35:38,389
from research focus because otherwise

1928
01:35:36,859 --> 01:35:42,380
I'm just going to take way too long to

1929
01:35:38,389 --> 01:35:43,880
do something that doesn't need you know

1930
01:35:42,380 --> 01:35:47,449
I'm gonna spend time improving something

1931
01:35:43,880 --> 01:35:56,539
that nobody wanted improved right all

1932
01:35:47,448 --> 01:35:59,049
right I'm gonna wrap it up close down

1933
01:35:56,539 --> 01:35:59,050
everything

1934
01:35:59,859 --> 01:36:02,750
thank you everyone for joining me from

1935
01:36:01,729 --> 01:36:03,979
UPS on a handmade Hira

1936
01:36:02,750 --> 01:36:06,319
it's been a pleasure coding with you as

1937
01:36:03,979 --> 01:36:07,459
always if you would like to follow along

1938
01:36:06,319 --> 01:36:11,719
with a series you can always go to

1939
01:36:07,460 --> 01:36:13,730
handmade hero org and if you pre-order

1940
01:36:11,719 --> 01:36:14,719
the game on hand me here org it comes

1941
01:36:13,729 --> 01:36:17,509
with a source code so you can play

1942
01:36:14,719 --> 01:36:19,039
around with everything yourself and do

1943
01:36:17,510 --> 01:36:21,469
your own experimentation with the source

1944
01:36:19,039 --> 01:36:23,719
base as it is maybe you can fix the

1945
01:36:21,469 --> 01:36:27,020
lighting before tomorrow and you know

1946
01:36:23,719 --> 01:36:27,980
you can debug it before I do I we also a

1947
01:36:27,020 --> 01:36:29,420
forum site and go to forum I ask

1948
01:36:27,979 --> 01:36:30,769
questions a patreon page you want to

1949
01:36:29,420 --> 01:36:32,690
support the video series and mostly that

1950
01:36:30,770 --> 01:36:33,770
patreon actually goes I dispersed it out

1951
01:36:32,689 --> 01:36:35,329
to people who are making stuff that

1952
01:36:33,770 --> 01:36:36,980
support the stream such as the fabulous

1953
01:36:35,329 --> 01:36:39,079
annotations done by mid low or the

1954
01:36:36,979 --> 01:36:42,259
handmade network that runs the forums

1955
01:36:39,079 --> 01:36:43,639
among other things so really that's for

1956
01:36:42,260 --> 01:36:44,900
us the whole community we've got a

1957
01:36:43,639 --> 01:36:46,369
schedule bot which tells you are going

1958
01:36:44,899 --> 01:36:47,569
to be live if you want to subscribe to

1959
01:36:46,369 --> 01:36:48,649
that such as a Twitter bot that will

1960
01:36:47,569 --> 01:36:50,059
tell you when we're gonna be lives you

1961
01:36:48,649 --> 01:36:51,589
can find out when episodes going and we

1962
01:36:50,060 --> 01:36:53,719
also have an episode guide you can go to

1963
01:36:51,590 --> 01:36:56,060
if you want to catch up on old episodes

1964
01:36:53,719 --> 01:36:57,170
of this series that's about it I will be

1965
01:36:56,060 --> 01:36:58,789
back here tomorrow when we'll start

1966
01:36:57,170 --> 01:37:01,010
debugging the lighting and trying to get

1967
01:36:58,789 --> 01:37:02,869
it to produce good lighting results it's

1968
01:37:01,010 --> 01:37:03,619
starting to look kind of useful so that

1969
01:37:02,869 --> 01:37:05,300
should be fun

1970
01:37:03,619 --> 01:37:07,908
hope see you everyone back here for that

1971
01:37:05,300 --> 01:37:09,320
until then have fun programming I'll see

1972
01:37:07,908 --> 01:37:11,408
everyone on the Internet take it easy

1973
01:37:09,319 --> 01:37:11,408
everybody

