1
00:00:00,620 --> 00:00:05,068
hello everyone and welcome to handmade

2
00:00:03,480 --> 00:00:08,009
Hero the show we code a complete game

3
00:00:05,068 --> 00:00:09,629
live on stream we are going to play with

4
00:00:08,009 --> 00:00:12,300
the lighting a bit today and see if we

5
00:00:09,630 --> 00:00:15,360
can't make some progress on you know

6
00:00:12,300 --> 00:00:19,920
just something that we like is I guess

7
00:00:15,359 --> 00:00:22,858
all I guess to say about it we're not

8
00:00:19,920 --> 00:00:24,779
trying to do anything fancy here we're

9
00:00:22,859 --> 00:00:26,250
just trying to come up with something

10
00:00:24,778 --> 00:00:27,899
that spreads light around the scene in a

11
00:00:26,250 --> 00:00:33,390
way that we feel like makes some sense

12
00:00:27,899 --> 00:00:35,429
right and that's really about it so I

13
00:00:33,390 --> 00:00:37,649
don't know again if we're on the right

14
00:00:35,429 --> 00:00:39,570
path we may have to substantially change

15
00:00:37,649 --> 00:00:42,469
some things but we have a nice path

16
00:00:39,570 --> 00:00:44,369
working right now where we can

17
00:00:42,469 --> 00:00:46,050
essentially generate some lighting

18
00:00:44,369 --> 00:00:47,788
information that we can then iterate on

19
00:00:46,049 --> 00:00:50,640
and we can play around with what we're

20
00:00:47,789 --> 00:00:52,050
storing and how and what sort of

21
00:00:50,640 --> 00:00:54,509
iteration passes we're doing on it

22
00:00:52,049 --> 00:00:57,299
without having to like redo everything

23
00:00:54,509 --> 00:00:59,878
so we're in a reasonable spot I think to

24
00:00:57,299 --> 00:01:02,488
experiment and hopefully find something

25
00:00:59,878 --> 00:01:04,048
good again it's one of those things

26
00:01:02,488 --> 00:01:05,640
where you never really know when you

27
00:01:04,049 --> 00:01:07,380
head down if you're not if you don't

28
00:01:05,640 --> 00:01:09,299
have a particular item than mine when

29
00:01:07,379 --> 00:01:10,709
you head into something experimenting

30
00:01:09,299 --> 00:01:13,290
you have no idea what you're going to

31
00:01:10,709 --> 00:01:15,179
find when you do it however you know I

32
00:01:13,290 --> 00:01:17,210
was somewhat emboldened by the fact that

33
00:01:15,180 --> 00:01:19,860
our deaf peel render ended up working so

34
00:01:17,209 --> 00:01:22,319
charmingly I kind of feel like you know

35
00:01:19,859 --> 00:01:24,030
that maybe led me to being a little more

36
00:01:22,319 --> 00:01:25,739
foolhardy than I would normally be so

37
00:01:24,030 --> 00:01:28,530
we're kind of going for broke here with

38
00:01:25,739 --> 00:01:29,879
the lighting and we're just playing

39
00:01:28,530 --> 00:01:31,290
around with a lot more lighting than

40
00:01:29,879 --> 00:01:32,879
probably ever should have been warranted

41
00:01:31,290 --> 00:01:34,500
on handmade hero since this is an

42
00:01:32,879 --> 00:01:38,489
educational stream and we're not trying

43
00:01:34,500 --> 00:01:41,310
to you know come up with any kind of new

44
00:01:38,489 --> 00:01:44,000
algorithms or anything like that but you

45
00:01:41,310 --> 00:01:47,100
know sometimes you just get carried away

46
00:01:44,000 --> 00:01:48,688
so anyway where we left off last time is

47
00:01:47,099 --> 00:01:51,359
we have some lighting visualizations

48
00:01:48,688 --> 00:01:53,758
here and we can sort of look at a couple

49
00:01:51,359 --> 00:01:55,649
of those but what we essentially did was

50
00:01:53,759 --> 00:01:57,569
we've got our lighting renderings so

51
00:01:55,649 --> 00:01:59,640
that we have a few different planes of

52
00:01:57,569 --> 00:02:01,379
information that we can look at we have

53
00:01:59,640 --> 00:02:05,909
the surface reflectance color which is

54
00:02:01,379 --> 00:02:09,598
this we've got the inbound lighting

55
00:02:05,909 --> 00:02:11,080
we've got this right here is a term we

56
00:02:09,598 --> 00:02:13,090
were analyzing and we don't

57
00:02:11,080 --> 00:02:15,280
about talking about right now we have

58
00:02:13,090 --> 00:02:17,680
the surface normals which we're showing

59
00:02:15,280 --> 00:02:20,110
here and essentially what we're trying

60
00:02:17,680 --> 00:02:22,090
to do is is iterate over these in some

61
00:02:20,110 --> 00:02:25,060
way as to produce some good lighting

62
00:02:22,090 --> 00:02:26,710
bounce around the scene now what we

63
00:02:25,060 --> 00:02:30,129
determine and I think it's pretty

64
00:02:26,710 --> 00:02:34,990
reasonable what we saw happening here is

65
00:02:30,129 --> 00:02:36,219
that when we look at what was happening

66
00:02:34,990 --> 00:02:40,450
in the scene

67
00:02:36,219 --> 00:02:42,639
unfortunately our our scenes just tend

68
00:02:40,449 --> 00:02:45,579
to have a lot of they're just just

69
00:02:42,639 --> 00:02:47,709
basically a flat ground with some some

70
00:02:45,580 --> 00:02:51,430
slight height differential that's really

71
00:02:47,710 --> 00:02:53,050
all we do right and although on the

72
00:02:51,430 --> 00:02:55,510
interiors will probably have some

73
00:02:53,050 --> 00:03:00,130
dungeon wall kind of stuff we just don't

74
00:02:55,509 --> 00:03:02,079
have a lot of reflectors so one of the

75
00:03:00,129 --> 00:03:03,969
problems you were seeing is that if we

76
00:03:02,080 --> 00:03:07,420
do a system that relies heavily on

77
00:03:03,969 --> 00:03:10,000
transmission angle we're going to be in

78
00:03:07,419 --> 00:03:12,250
trouble because we just don't have a

79
00:03:10,000 --> 00:03:13,900
good coherent way of figuring out how

80
00:03:12,250 --> 00:03:16,360
that's really going to work we would

81
00:03:13,900 --> 00:03:19,269
probably have to add a synthetic ceiling

82
00:03:16,360 --> 00:03:20,560
into the scene in order to sort of have

83
00:03:19,269 --> 00:03:23,289
there be something that reflects light

84
00:03:20,560 --> 00:03:25,120
back downwards and again that starts to

85
00:03:23,289 --> 00:03:27,219
get into things that complicate the

86
00:03:25,120 --> 00:03:28,750
renderer quite a bit because figuring

87
00:03:27,219 --> 00:03:31,030
out where that ceiling is would

88
00:03:28,750 --> 00:03:34,090
essentially require us rendering one

89
00:03:31,030 --> 00:03:36,669
more layer above the layer we're

90
00:03:34,090 --> 00:03:38,200
currently on and while we could try to

91
00:03:36,669 --> 00:03:40,629
do something like that and while we do

92
00:03:38,199 --> 00:03:45,219
get that for the layers below us because

93
00:03:40,629 --> 00:03:48,370
we do have this layer on top right I'm

94
00:03:45,219 --> 00:03:51,459
not sure what we can really do there

95
00:03:48,370 --> 00:03:54,129
reliably you know and and maybe I'm

96
00:03:51,459 --> 00:03:56,379
dismissing this out of hand I'm not sure

97
00:03:54,129 --> 00:03:58,539
but I definitely feel like there's a

98
00:03:56,379 --> 00:04:00,669
there's a big question mark hanging

99
00:03:58,539 --> 00:04:03,159
there about what we would do in terms of

100
00:04:00,669 --> 00:04:07,268
getting reflectors that would push light

101
00:04:03,159 --> 00:04:08,769
back downward so I don't know that's

102
00:04:07,269 --> 00:04:10,390
that's kind of one of those things where

103
00:04:08,769 --> 00:04:12,519
I really don't have a good solution to

104
00:04:10,389 --> 00:04:14,738
that part of me is tempted to try and

105
00:04:12,519 --> 00:04:16,239
figure out a way to put in the upper

106
00:04:14,739 --> 00:04:19,389
ceiling which would be basically a

107
00:04:16,238 --> 00:04:22,269
skylight in the outer world and it would

108
00:04:19,389 --> 00:04:25,329
be the dungeon ceiling inside sort of

109
00:04:22,269 --> 00:04:27,549
the dungeon areas or whatever else

110
00:04:25,329 --> 00:04:29,318
when somebody's in tourists but you know

111
00:04:27,550 --> 00:04:30,759
you can see why I'm a little hesitant to

112
00:04:29,319 --> 00:04:34,150
do that because I'm just not sure how to

113
00:04:30,759 --> 00:04:36,038
get that in there in a reliable way I I

114
00:04:34,149 --> 00:04:37,899
really just don't know and it would

115
00:04:36,038 --> 00:04:39,968
complete it would add a certain level of

116
00:04:37,899 --> 00:04:42,788
complexity as well because in order to

117
00:04:39,968 --> 00:04:45,430
do that we would have to sort of render

118
00:04:42,788 --> 00:04:48,399
one more depth peel above the current

119
00:04:45,430 --> 00:04:50,620
depth peel right so I don't know but at

120
00:04:48,399 --> 00:04:52,149
the same time is it that hard to do not

121
00:04:50,620 --> 00:04:54,399
really since we already have a depth

122
00:04:52,149 --> 00:04:56,859
keel renderer if all we wanted to do was

123
00:04:54,399 --> 00:04:59,799
produce where that top level was it's

124
00:04:56,860 --> 00:05:02,650
not the end of the world because what we

125
00:04:59,800 --> 00:05:06,278
could do I suppose is just turn off the

126
00:05:02,649 --> 00:05:09,250
front clip plane well turn it off is not

127
00:05:06,278 --> 00:05:16,300
feasible but push it back right push

128
00:05:09,250 --> 00:05:20,348
back the front clip plane and render

129
00:05:16,300 --> 00:05:24,759
into another buffer the furthest away

130
00:05:20,348 --> 00:05:28,360
depth layer that is above the depth we

131
00:05:24,759 --> 00:05:30,699
have in the highest depth feel right

132
00:05:28,360 --> 00:05:32,968
so we basically be taking the like in

133
00:05:30,699 --> 00:05:35,949
fact what we're looking at right here

134
00:05:32,968 --> 00:05:38,439
right this this scene what we're looking

135
00:05:35,949 --> 00:05:40,990
at we would take the depth of everything

136
00:05:38,439 --> 00:05:45,610
in this scene we would render the next

137
00:05:40,990 --> 00:05:48,158
layer on top of that and we would then

138
00:05:45,610 --> 00:05:50,110
take all of those and those would be you

139
00:05:48,158 --> 00:05:55,709
know our downward reflectors those would

140
00:05:50,110 --> 00:05:55,710
be our ceiling right so that's you know

141
00:05:57,060 --> 00:06:00,778
that's what we're looking at

142
00:06:00,810 --> 00:06:05,019
unfortunately I don't really know how

143
00:06:02,949 --> 00:06:06,400
sane of an idea that is and that's the

144
00:06:05,019 --> 00:06:08,680
problem whenever you're playing around

145
00:06:06,399 --> 00:06:10,269
with new rendering techniques if you

146
00:06:08,680 --> 00:06:11,978
never really know what's going to work

147
00:06:10,269 --> 00:06:13,508
ahead of time you're really in a trial

148
00:06:11,978 --> 00:06:15,550
and error land you can use your best

149
00:06:13,509 --> 00:06:18,218
judgment but your best judgment is not

150
00:06:15,550 --> 00:06:19,838
always good enough and you may end up

151
00:06:18,218 --> 00:06:21,338
deciding not to go down a path that

152
00:06:19,838 --> 00:06:22,689
actually would have turned out to be

153
00:06:21,338 --> 00:06:24,939
fruitful and later on you'll read about

154
00:06:22,689 --> 00:06:26,770
somebody who did follow it through and

155
00:06:24,939 --> 00:06:28,270
arrives at a great algorithm and you're

156
00:06:26,769 --> 00:06:31,088
kicking yourself for going on I could

157
00:06:28,269 --> 00:06:32,859
have done something better there in

158
00:06:31,088 --> 00:06:34,300
other times you'll go down a path it

159
00:06:32,860 --> 00:06:36,770
just turns out to be completely useless

160
00:06:34,300 --> 00:06:38,840
and you've wasted a bunch of time on it

161
00:06:36,769 --> 00:06:41,149
there you know there's plenty of risk in

162
00:06:38,839 --> 00:06:42,769
both directions and it's really it's

163
00:06:41,149 --> 00:06:46,959
just tough right there's no other ways

164
00:06:42,769 --> 00:06:50,240
saying it is a difficult situation but

165
00:06:46,959 --> 00:06:51,769
that's just the the nature of the beast

166
00:06:50,240 --> 00:06:53,509
so you got to just get over it and plow

167
00:06:51,769 --> 00:06:57,439
forward so the question is what do we do

168
00:06:53,509 --> 00:06:59,750
now well we've got two possibilities

169
00:06:57,439 --> 00:07:02,689
right one is we try to push the

170
00:06:59,750 --> 00:07:04,819
reflector stuff forward and the other is

171
00:07:02,689 --> 00:07:07,069
we try to do something a little more

172
00:07:04,819 --> 00:07:09,050
localized so one of the things that is

173
00:07:07,069 --> 00:07:11,030
true about the way this lighting was

174
00:07:09,050 --> 00:07:13,310
working is that if we were to turn off

175
00:07:11,029 --> 00:07:17,779
the part of this that really deals with

176
00:07:13,310 --> 00:07:19,848
angles which we did try the on the

177
00:07:17,779 --> 00:07:22,008
screen before we have the facing

178
00:07:19,848 --> 00:07:24,139
Direction turn here and if we wanted to

179
00:07:22,009 --> 00:07:25,669
turn off the facing direction term so

180
00:07:24,139 --> 00:07:27,978
that it doesn't attenuate based on

181
00:07:25,668 --> 00:07:31,639
facing direction and when said we just

182
00:07:27,978 --> 00:07:34,579
accumulate based on fall-off then one of

183
00:07:31,639 --> 00:07:37,610
the things we can see right is we can

184
00:07:34,579 --> 00:07:40,038
see the light does spread around in a

185
00:07:37,610 --> 00:07:41,689
somewhat interesting way right and we do

186
00:07:40,038 --> 00:07:43,490
have some sampling artifacts those are

187
00:07:41,689 --> 00:07:45,408
due to the way that we are down sampling

188
00:07:43,490 --> 00:07:46,759
which I think we can fix and that's just

189
00:07:45,408 --> 00:07:49,339
you see how the light kind of shrinks

190
00:07:46,759 --> 00:07:54,020
and grows that shrinking and growing of

191
00:07:49,339 --> 00:07:57,799
the light is is just a an artifact of

192
00:07:54,019 --> 00:08:01,728
that particular problem right of that

193
00:07:57,800 --> 00:08:04,240
sort of what's what's the word looking

194
00:08:01,728 --> 00:08:09,860
for that's basically just an artifact of

195
00:08:04,240 --> 00:08:11,870
the degree to which the sampling lines

196
00:08:09,860 --> 00:08:14,060
up on the square boundaries Advocates

197
00:08:11,870 --> 00:08:15,680
downsampled right and so we can fix some

198
00:08:14,060 --> 00:08:17,750
of that by improving our down sampling

199
00:08:15,680 --> 00:08:19,968
so that doesn't that shrinking and

200
00:08:17,750 --> 00:08:21,620
growing doesn't concern me too much we

201
00:08:19,968 --> 00:08:23,168
can at least pretend for now that we can

202
00:08:21,620 --> 00:08:25,340
fix it because I'm pretty sure we can

203
00:08:23,168 --> 00:08:26,778
that's not the biggest problem the

204
00:08:25,339 --> 00:08:29,388
biggest problem that we would have here

205
00:08:26,778 --> 00:08:30,680
is the shadowing of these things but if

206
00:08:29,389 --> 00:08:32,120
you just look at how this light is

207
00:08:30,680 --> 00:08:34,639
playing around right you could imagine

208
00:08:32,120 --> 00:08:36,979
if we go ahead and did some lighting on

209
00:08:34,639 --> 00:08:39,259
this maybe we could make this work just

210
00:08:36,979 --> 00:08:41,570
by itself and leave the facing Direction

211
00:08:39,259 --> 00:08:46,669
stuff out of the equation for now right

212
00:08:41,570 --> 00:08:49,320
it's possible so maybe add some

213
00:08:46,669 --> 00:08:52,439
shadowing in here

214
00:08:49,320 --> 00:08:54,990
and then use it to do our lighting and

215
00:08:52,440 --> 00:08:57,510
who knows maybe that sufficient right

216
00:08:54,990 --> 00:09:00,419
but we don't really know so what I'm

217
00:08:57,509 --> 00:09:03,019
interested to do is I think what I'd

218
00:09:00,419 --> 00:09:05,759
like to do today just as a first step is

219
00:09:03,019 --> 00:09:08,340
before we go any further I'd like to go

220
00:09:05,759 --> 00:09:10,889
in and add the final step of producing

221
00:09:08,340 --> 00:09:12,180
an actual output image that grabs the

222
00:09:10,889 --> 00:09:15,210
lighting data from the lighting

223
00:09:12,179 --> 00:09:19,439
information that we have produced and

224
00:09:15,210 --> 00:09:21,720
then goes ahead and renders that image

225
00:09:19,440 --> 00:09:24,180
out to the screen so we can see what we

226
00:09:21,720 --> 00:09:26,310
would be looking at if we use this light

227
00:09:24,179 --> 00:09:28,439
propagation to produce our final image

228
00:09:26,309 --> 00:09:30,750
that way we'll know whether this is

229
00:09:28,440 --> 00:09:33,930
close enough or whether we need to

230
00:09:30,750 --> 00:09:36,480
really worry about that basic facing

231
00:09:33,929 --> 00:09:38,250
Direction information because it may be

232
00:09:36,480 --> 00:09:40,440
that the normals just aren't that

233
00:09:38,250 --> 00:09:42,210
interesting in our particular game and

234
00:09:40,440 --> 00:09:43,620
we don't need to worry about them when

235
00:09:42,210 --> 00:09:45,120
we're convicting the light around and

236
00:09:43,620 --> 00:09:47,129
instead what we should do is just

237
00:09:45,120 --> 00:09:49,830
transport the light around as if there

238
00:09:47,129 --> 00:09:52,590
were no facing directions and then when

239
00:09:49,830 --> 00:09:54,840
we're done use the facing directions to

240
00:09:52,590 --> 00:10:00,480
attenuate the light only when we go to

241
00:09:54,840 --> 00:10:02,250
do our final sort of gather if you will

242
00:10:00,480 --> 00:10:04,080
when we when we just take it and and

243
00:10:02,250 --> 00:10:07,649
look at what that actually looks like

244
00:10:04,080 --> 00:10:10,620
right so I don't know there's there's

245
00:10:07,649 --> 00:10:13,740
like a thought for you it may be really

246
00:10:10,620 --> 00:10:15,960
stupid and crappy thought but we'll play

247
00:10:13,740 --> 00:10:17,039
around with it and see how it goes so

248
00:10:15,960 --> 00:10:19,290
what I'm going to do is just introduce

249
00:10:17,039 --> 00:10:22,139
our final shader which in theory I think

250
00:10:19,289 --> 00:10:24,209
would be the last one we have because

251
00:10:22,139 --> 00:10:25,679
you know unless we decide to do some

252
00:10:24,210 --> 00:10:27,000
special effects in the future we might

253
00:10:25,679 --> 00:10:29,549
have some traders that do special

254
00:10:27,000 --> 00:10:31,710
effects but what that is is our final

255
00:10:29,549 --> 00:10:34,169
result now needs to get a little bit

256
00:10:31,710 --> 00:10:36,120
more fancy what we can probably do is

257
00:10:34,169 --> 00:10:38,399
not actually write a whole new shader

258
00:10:36,120 --> 00:10:42,470
what we can probably do is just tack

259
00:10:38,399 --> 00:10:45,059
this on to our one of our final ones so

260
00:10:42,470 --> 00:10:47,580
if you take a look at how our program is

261
00:10:45,059 --> 00:10:49,229
currently working what you can see is

262
00:10:47,580 --> 00:10:52,830
that we do this final stretch at the end

263
00:10:49,230 --> 00:10:55,289
for example right and we also do this

264
00:10:52,830 --> 00:10:57,360
this peel composite step at the end so

265
00:10:55,289 --> 00:11:00,480
either one of these steps could grab the

266
00:10:57,360 --> 00:11:01,680
lighting information and use it so what

267
00:11:00,480 --> 00:11:03,839
I might suggest

268
00:11:01,679 --> 00:11:05,338
is this peel composite which kind of is

269
00:11:03,839 --> 00:11:08,190
the thing that right now takes all the

270
00:11:05,339 --> 00:11:10,470
def peels and smushes them together what

271
00:11:08,190 --> 00:11:13,020
we could do is take that peel composite

272
00:11:10,470 --> 00:11:15,420
and instead of treating it as something

273
00:11:13,019 --> 00:11:17,730
that's just designed to composite the

274
00:11:15,419 --> 00:11:20,009
multi sample the the multiple samples of

275
00:11:17,730 --> 00:11:21,480
depth together we could have that

276
00:11:20,009 --> 00:11:23,129
compute the lighting at the same time

277
00:11:21,480 --> 00:11:24,778
now there's number of benefits of doing

278
00:11:23,129 --> 00:11:27,208
this one is that this gives us the

279
00:11:24,778 --> 00:11:29,220
freedom to actually apply the lighting

280
00:11:27,208 --> 00:11:31,319
differently depending on which depth

281
00:11:29,220 --> 00:11:32,790
your app if we want to do that we can

282
00:11:31,320 --> 00:11:34,440
and that's kind of powerful because it

283
00:11:32,789 --> 00:11:36,599
means that we can spend more processor

284
00:11:34,440 --> 00:11:38,250
time the GPU to get better lighting

285
00:11:36,600 --> 00:11:39,389
results to take into account the depth

286
00:11:38,250 --> 00:11:41,370
of the thing that we're lighting at the

287
00:11:39,389 --> 00:11:44,309
time that we actually could posit it

288
00:11:41,370 --> 00:11:46,649
that seems like a positive to me the

289
00:11:44,309 --> 00:11:48,059
other thing that I like about that is

290
00:11:46,649 --> 00:11:50,339
that since we're already in there and we

291
00:11:48,059 --> 00:11:52,649
pull in all the data we can now just

292
00:11:50,339 --> 00:11:55,500
pull in the extra lighting data as well

293
00:11:52,649 --> 00:11:57,539
and at that point we're not doing a

294
00:11:55,500 --> 00:12:00,330
whole nother path of grabbing everything

295
00:11:57,539 --> 00:12:01,679
in to go ahead and compute that lighting

296
00:12:00,330 --> 00:12:03,899
we're just pulling everything in once we

297
00:12:01,679 --> 00:12:04,259
do it and we just put it forth and we're

298
00:12:03,899 --> 00:12:06,809
done

299
00:12:04,259 --> 00:12:09,720
and so I think then that is probably the

300
00:12:06,809 --> 00:12:11,519
the more preferable way to approach the

301
00:12:09,720 --> 00:12:15,680
problem it's the stuff everything into

302
00:12:11,519 --> 00:12:17,789
the peeled composite and do it there so

303
00:12:15,679 --> 00:12:18,870
with that in mind I think what I'm going

304
00:12:17,789 --> 00:12:20,639
to do is take a look at that peel

305
00:12:18,870 --> 00:12:23,610
composite and just see if I can extend

306
00:12:20,639 --> 00:12:29,028
it to pull in the lighting data that it

307
00:12:23,610 --> 00:12:32,278
will use to produce the results right so

308
00:12:29,028 --> 00:12:34,230
if you take a look at we've got here we

309
00:12:32,278 --> 00:12:36,809
have these the peel sampler one two

310
00:12:34,230 --> 00:12:38,850
three now one of the things that I think

311
00:12:36,809 --> 00:12:41,729
probably was a little bit of a mistake

312
00:12:38,850 --> 00:12:43,379
if we're being honest with ourselves is

313
00:12:41,730 --> 00:12:47,278
that probably what I should have done is

314
00:12:43,379 --> 00:12:50,338
use a texture array for these samplers

315
00:12:47,278 --> 00:12:52,049
because if I use a texture array then

316
00:12:50,339 --> 00:12:54,750
what I could have done is picked out

317
00:12:52,049 --> 00:12:58,319
either have appeals go on the texture

318
00:12:54,750 --> 00:13:00,299
array each each array would be a each

319
00:12:58,320 --> 00:13:03,750
array element would be a separate peel

320
00:13:00,299 --> 00:13:07,019
or I could have had the array be the

321
00:13:03,750 --> 00:13:10,620
information about the different pieces

322
00:13:07,019 --> 00:13:12,659
right like the array slices Eero could

323
00:13:10,620 --> 00:13:14,490
have been the color array slice one

324
00:13:12,659 --> 00:13:15,600
would have been the immittance

325
00:13:14,490 --> 00:13:16,740
array slice to

326
00:13:15,600 --> 00:13:19,879
would have been the normal something

327
00:13:16,740 --> 00:13:23,279
like this and so that is you know

328
00:13:19,879 --> 00:13:24,840
something that I think maybe we could

329
00:13:23,279 --> 00:13:26,399
have done a little bit better there I'm

330
00:13:24,840 --> 00:13:27,660
not going to do that now and the reason

331
00:13:26,399 --> 00:13:29,490
is because introducing a new thing like

332
00:13:27,659 --> 00:13:30,750
texture raise leads to the bugging I

333
00:13:29,490 --> 00:13:32,190
don't really want to be doing debugging

334
00:13:30,750 --> 00:13:33,090
right now I'm just trying experiment so

335
00:13:32,190 --> 00:13:34,530
what I'm going to do is I'm going to

336
00:13:33,090 --> 00:13:36,750
expand these out for us just to have

337
00:13:34,529 --> 00:13:38,189
more samplers because I think that's a

338
00:13:36,750 --> 00:13:40,440
quicker way to do the experiment later

339
00:13:38,190 --> 00:13:42,180
on we can try to turn that that crank

340
00:13:40,440 --> 00:13:43,260
and optimize it down a bit

341
00:13:42,179 --> 00:13:44,789
figure out where we could introduce

342
00:13:43,259 --> 00:13:47,370
something like a texture arrays to

343
00:13:44,789 --> 00:13:48,809
reduce the number of samplers to make

344
00:13:47,370 --> 00:13:50,490
things less complex for the graphics

345
00:13:48,809 --> 00:13:52,679
card for graphics cards that don't deal

346
00:13:50,490 --> 00:13:54,060
well with things like that Intel

347
00:13:52,679 --> 00:13:56,099
integrated graphics for example I think

348
00:13:54,059 --> 00:13:58,169
has a little more heavyweight stuff

349
00:13:56,100 --> 00:13:59,970
associated with samplers it's not like

350
00:13:58,169 --> 00:14:04,529
in Nvidia cards where it's kind of just

351
00:13:59,970 --> 00:14:05,670
a pointer and you know on video cards

352
00:14:04,529 --> 00:14:08,490
it's not so clear to me that there's

353
00:14:05,669 --> 00:14:10,379
that much of a win to doing stuff like

354
00:14:08,490 --> 00:14:12,180
switching from multiple samplers to

355
00:14:10,379 --> 00:14:14,039
texture arrays there probably is a

356
00:14:12,179 --> 00:14:15,719
little bit but it's a lot less drastic

357
00:14:14,039 --> 00:14:18,149
whereas I think there are certain cars

358
00:14:15,720 --> 00:14:19,800
where that wind can be substantial don't

359
00:14:18,149 --> 00:14:22,439
take my word for it I'm not a graphics

360
00:14:19,799 --> 00:14:25,709
guy at all so that may be old news but

361
00:14:22,440 --> 00:14:29,520
that's just my kind of thing with my

362
00:14:25,710 --> 00:14:32,009
little like inclination my gut tingles

363
00:14:29,519 --> 00:14:35,429
that sounds kind of gross but there you

364
00:14:32,009 --> 00:14:36,840
go anyway so what I'd like to do here is

365
00:14:35,429 --> 00:14:38,099
I just like to look at what we want to

366
00:14:36,840 --> 00:14:39,450
pull in so what we're going to be

367
00:14:38,100 --> 00:14:41,040
getting by default in these Keele

368
00:14:39,450 --> 00:14:42,270
samplers is we're going to be getting

369
00:14:41,039 --> 00:14:43,500
the surface reflectance which we

370
00:14:42,269 --> 00:14:45,059
definitely want the best thing we're

371
00:14:43,500 --> 00:14:46,500
going to be compositing but what I'd

372
00:14:45,059 --> 00:14:48,239
also like to pull in at that point it's

373
00:14:46,500 --> 00:14:49,289
probably been normal because the normal

374
00:14:48,240 --> 00:14:50,669
is the thing that we're going to use for

375
00:14:49,289 --> 00:14:53,610
the lighting is so we probably want to

376
00:14:50,669 --> 00:14:55,679
pull in the OpenGL NPL value there right

377
00:14:53,610 --> 00:15:00,330
this one right here so what I'd like to

378
00:14:55,679 --> 00:15:02,969
do is take these and just augment them

379
00:15:00,330 --> 00:15:05,009
to pull in the NPL for each of these as

380
00:15:02,970 --> 00:15:08,580
well right

381
00:15:05,009 --> 00:15:10,679
so we basically have an NPL sampler for

382
00:15:08,580 --> 00:15:13,889
each of the of the things we previously

383
00:15:10,679 --> 00:15:15,750
only had the peel sampler for so

384
00:15:13,889 --> 00:15:18,659
something like this so we've got PL n PL

385
00:15:15,750 --> 00:15:21,330
PL n PL PL PL p.m. PL right so we're

386
00:15:18,659 --> 00:15:23,579
pulling each of those in and the other

387
00:15:21,330 --> 00:15:26,759
thing we want to pull in is that that

388
00:15:23,580 --> 00:15:27,889
lighting information right so we also

389
00:15:26,759 --> 00:15:29,928
have that

390
00:15:27,889 --> 00:15:31,519
to think about so anyway we've got each

391
00:15:29,928 --> 00:15:32,869
of these peel samplers and now we've got

392
00:15:31,519 --> 00:15:35,209
to compute the lighting information for

393
00:15:32,869 --> 00:15:38,149
those what we want to do here is take a

394
00:15:35,208 --> 00:15:39,798
look and see okay so we've got each of

395
00:15:38,149 --> 00:15:41,178
these texture samples for the peel is

396
00:15:39,798 --> 00:15:44,208
now going to become something that

397
00:15:41,178 --> 00:15:46,608
lights each of these basically all of

398
00:15:44,208 --> 00:15:50,808
this stuff here is fine but when we do

399
00:15:46,609 --> 00:15:52,759
the actual after we we pull the lighting

400
00:15:50,808 --> 00:15:55,879
in we've adjusted the RGB of it we're

401
00:15:52,759 --> 00:15:58,720
going to want to do the operation to

402
00:15:55,879 --> 00:16:02,058
produce the lighting somehow here right

403
00:15:58,720 --> 00:16:04,790
so after we've done all of this stuff

404
00:16:02,058 --> 00:16:07,269
right before we start using these peel

405
00:16:04,789 --> 00:16:10,458
our GPS what I'd like to do is is

406
00:16:07,269 --> 00:16:14,808
augment them all so we basically want to

407
00:16:10,458 --> 00:16:17,659
do like a lighting operation on our peel

408
00:16:14,808 --> 00:16:23,418
where we pass you know actually I guess

409
00:16:17,659 --> 00:16:30,828
that's the MPL sampler I I could I guess

410
00:16:23,418 --> 00:16:38,928
just take the samples here as well like

411
00:16:30,828 --> 00:16:41,269
so so that samples from everything and

412
00:16:38,928 --> 00:16:45,019
now we have our peel and our NPL from

413
00:16:41,269 --> 00:16:46,578
each of those when we take this these

414
00:16:45,019 --> 00:16:49,278
samples what I want to do after we've

415
00:16:46,578 --> 00:16:53,328
adjusted their RGB is basically modify

416
00:16:49,278 --> 00:16:55,369
them using the NPL value and the

417
00:16:53,328 --> 00:16:57,498
lighting value right so we're going to

418
00:16:55,369 --> 00:16:59,959
pass the NPL value we're going to pass

419
00:16:57,499 --> 00:17:05,778
the peel value and we're going to pass

420
00:16:59,958 --> 00:17:07,308
the light so we're going to have

421
00:17:05,778 --> 00:17:12,230
something that looks like this which

422
00:17:07,308 --> 00:17:15,168
adjusts each of the peels lighting like

423
00:17:12,230 --> 00:17:17,599
so now we don't have to do it this way

424
00:17:15,169 --> 00:17:19,579
we could instead try to composite and

425
00:17:17,599 --> 00:17:20,928
then do the lighting but I'm just going

426
00:17:19,578 --> 00:17:24,078
to do lighting on each of them first

427
00:17:20,929 --> 00:17:26,870
instead because we might as well spend

428
00:17:24,078 --> 00:17:28,220
more GPU time than less at first because

429
00:17:26,869 --> 00:17:30,199
we can always go in and try to optimize

430
00:17:28,220 --> 00:17:32,480
things later but we don't want to do

431
00:17:30,200 --> 00:17:34,399
that at the outset because we won't know

432
00:17:32,480 --> 00:17:35,630
if our optimizations are causing our

433
00:17:34,398 --> 00:17:37,369
lighting to have artifacts that it

434
00:17:35,630 --> 00:17:39,710
wouldn't otherwise have so we'd rather

435
00:17:37,369 --> 00:17:41,329
try to do it as well as possible and

436
00:17:39,710 --> 00:17:42,769
just slow first and

437
00:17:41,329 --> 00:17:44,538
we can optimize it by removing things

438
00:17:42,769 --> 00:17:45,919
and see whether they materially affect

439
00:17:44,538 --> 00:17:47,179
the quality of the lighting that's

440
00:17:45,919 --> 00:17:50,929
usually a better way to go when you're

441
00:17:47,179 --> 00:17:52,190
trying to velop on your technique so we

442
00:17:50,929 --> 00:17:54,528
need a couple things to happen here

443
00:17:52,190 --> 00:17:57,110
first thing we need to happen here is we

444
00:17:54,528 --> 00:17:58,960
obviously have the the light peel that's

445
00:17:57,109 --> 00:18:01,939
going to happen here I guess this the

446
00:17:58,960 --> 00:18:04,880
RGB does the Alpha value the Alpha

447
00:18:01,940 --> 00:18:09,399
values are not used at all in this so I

448
00:18:04,880 --> 00:18:24,019
suppose we could just use the the RGB

449
00:18:09,398 --> 00:18:26,089
only here like so because again the

450
00:18:24,019 --> 00:18:28,159
lighting is only operating on the color

451
00:18:26,089 --> 00:18:30,709
it's not going to change the Alpha of

452
00:18:28,159 --> 00:18:32,090
anything at least not at the moment so

453
00:18:30,710 --> 00:18:34,610
when we do our light peel we're going to

454
00:18:32,089 --> 00:18:36,019
do that operation

455
00:18:34,609 --> 00:18:38,329
maybe I should pass the whole thing I

456
00:18:36,019 --> 00:18:40,190
don't know it's hard to say but we're

457
00:18:38,329 --> 00:18:44,869
going to take in a v3 and return of III

458
00:18:40,190 --> 00:18:46,700
and the NPL value itself is that packed

459
00:18:44,869 --> 00:18:48,288
before and then we're going to have a

460
00:18:46,700 --> 00:18:49,370
lighting sample of some kind which is

461
00:18:48,288 --> 00:18:52,129
some information that we're going to

462
00:18:49,369 --> 00:18:53,209
need so I'm assuming the lighting sample

463
00:18:52,130 --> 00:18:54,649
is going to need a couple different

464
00:18:53,210 --> 00:18:56,149
things I probably shouldn't call it

465
00:18:54,648 --> 00:18:57,648
light sample we're probably going to

466
00:18:56,148 --> 00:19:02,538
have a little bit something more like

467
00:18:57,648 --> 00:19:05,859
light P light Direction right so as the

468
00:19:02,538 --> 00:19:07,700
light the light position of the light

469
00:19:05,859 --> 00:19:12,558
normal are the two things we're probably

470
00:19:07,700 --> 00:19:14,298
in half come to think of the light

471
00:19:12,558 --> 00:19:15,918
positions kind of already factored out

472
00:19:14,298 --> 00:19:19,009
so it's probably only just going to be

473
00:19:15,919 --> 00:19:22,009
the light color and the light normal

474
00:19:19,009 --> 00:19:22,879
right I'm guessing that's about it so

475
00:19:22,009 --> 00:19:25,099
those are the two things we're probably

476
00:19:22,880 --> 00:19:30,639
going to be taking in here so we'll go

477
00:19:25,099 --> 00:19:33,199
ahead and just pass those along like so

478
00:19:30,638 --> 00:19:40,548
and so what we're going to have for a

479
00:19:33,200 --> 00:19:42,409
light normal and the light colors are

480
00:19:40,548 --> 00:19:44,690
coming in here and then what we need to

481
00:19:42,409 --> 00:19:47,510
do is we need to do a mapping so we've

482
00:19:44,690 --> 00:19:50,808
basically got a you know I've got to

483
00:19:47,509 --> 00:19:53,720
unpack the NPL data obviously to start

484
00:19:50,808 --> 00:19:54,769
and in order to do that we have to do

485
00:19:53,720 --> 00:19:57,410
our unpack

486
00:19:54,769 --> 00:19:59,329
the unpack of course is pretty

487
00:19:57,410 --> 00:20:01,850
straightforward it's this right here

488
00:19:59,329 --> 00:20:04,970
what we might want to do is standardize

489
00:20:01,849 --> 00:20:06,500
on this unpack because since multiple

490
00:20:04,970 --> 00:20:10,789
people are unpacking at this point it

491
00:20:06,500 --> 00:20:13,819
may be better to unpack it in a sane

492
00:20:10,789 --> 00:20:15,259
single way because that way if we decide

493
00:20:13,819 --> 00:20:18,439
to change it in the future we don't have

494
00:20:15,259 --> 00:20:19,460
to worry about it at all week if we

495
00:20:18,440 --> 00:20:22,539
could just know that's being done

496
00:20:19,460 --> 00:20:28,640
correctly so what we could do here is

497
00:20:22,539 --> 00:20:30,889
basically say you know V two and equal

498
00:20:28,640 --> 00:20:32,360
something and have that unpack happen of

499
00:20:30,890 --> 00:20:35,480
course I guess now that I think about it

500
00:20:32,359 --> 00:20:36,589
we've got sort of two ways but I guess

501
00:20:35,480 --> 00:20:41,140
it's something like this

502
00:20:36,589 --> 00:20:42,949
unpack normal to something like this I

503
00:20:41,140 --> 00:20:44,540
don't know what we really want to call

504
00:20:42,950 --> 00:20:46,850
this but unpack

505
00:20:44,539 --> 00:20:48,649
I think unpack normal two is probably

506
00:20:46,849 --> 00:20:50,599
all I'm going to really get so

507
00:20:48,650 --> 00:20:53,720
completely on it that so we'll do world

508
00:20:50,599 --> 00:20:55,279
nxy and unpack normal two will just be

509
00:20:53,720 --> 00:20:59,630
this thing and what we can do is we can

510
00:20:55,279 --> 00:21:01,309
put that in our sort of global shader

511
00:20:59,630 --> 00:21:04,040
header code which is this stuff right

512
00:21:01,309 --> 00:21:05,990
here and everyone can use it so we can

513
00:21:04,039 --> 00:21:08,809
have a v2 which is like unpack normal -

514
00:21:05,990 --> 00:21:13,940
and we can take the incoming normal like

515
00:21:08,809 --> 00:21:20,480
so and what I can do here is just say

516
00:21:13,940 --> 00:21:23,690
well yeah the result X or better result

517
00:21:20,480 --> 00:21:28,430
here and result Y are going to be equal

518
00:21:23,690 --> 00:21:30,380
to these inputs scaled like so and then

519
00:21:28,430 --> 00:21:33,039
we'll return that so now we can call

520
00:21:30,380 --> 00:21:35,270
that unpack normal and what we can do is

521
00:21:33,039 --> 00:21:36,769
furthermore we could have an unpack

522
00:21:35,269 --> 00:21:40,549
normal three if we want to actually

523
00:21:36,769 --> 00:21:42,559
generate the entire normal we could say

524
00:21:40,549 --> 00:21:48,339
well if we want to do an unpack normal

525
00:21:42,559 --> 00:21:51,710
three we pass the v2 we can get back the

526
00:21:48,339 --> 00:21:55,189
the n2 from from the unpack here by

527
00:21:51,710 --> 00:21:59,329
passing it this way and then what we can

528
00:21:55,190 --> 00:22:02,539
do is generate that final value right so

529
00:21:59,329 --> 00:22:06,039
we can say results equals N two and then

530
00:22:02,539 --> 00:22:07,788
we just have the equation again for the

531
00:22:06,039 --> 00:22:13,038
renormalized part so we can

532
00:22:07,788 --> 00:22:17,658
just say em 2x times n 2x minus n 2y

533
00:22:13,038 --> 00:22:20,358
times n 3y and that way we can get back

534
00:22:17,659 --> 00:22:23,809
a full normal if we want to as well by

535
00:22:20,358 --> 00:22:26,298
calling unpack normal 3 so we have a way

536
00:22:23,808 --> 00:22:28,519
of getting either of those back when we

537
00:22:26,298 --> 00:22:30,589
get back this normal like I said this is

538
00:22:28,519 --> 00:22:34,249
just saying this is the same equation we

539
00:22:30,589 --> 00:22:35,720
had before I see if I can find it for

540
00:22:34,249 --> 00:22:37,519
you so here right

541
00:22:35,720 --> 00:22:40,278
remember when we kind of solved this one

542
00:22:37,519 --> 00:22:42,950
right oh it's got my square root glad I

543
00:22:40,278 --> 00:22:44,749
just looked at that it's the same one

544
00:22:42,950 --> 00:22:47,359
here only this one is reconstructing the

545
00:22:44,749 --> 00:22:49,700
normal from to regular components if

546
00:22:47,358 --> 00:22:52,878
that makes sense so I guess actually we

547
00:22:49,700 --> 00:22:54,679
could we could actually keep this this

548
00:22:52,878 --> 00:22:57,348
function could actually sort of be made

549
00:22:54,679 --> 00:22:59,479
in it's doing almost exactly the same

550
00:22:57,348 --> 00:23:02,628
thing right so we could in theory have

551
00:22:59,479 --> 00:23:04,819
this one be reused as well because that

552
00:23:02,628 --> 00:23:06,259
unpack normal 3 is almost the same code

553
00:23:04,819 --> 00:23:07,700
I don't know that I really care about

554
00:23:06,259 --> 00:23:12,079
doing that right now synaptically

555
00:23:07,700 --> 00:23:14,950
complicated code but point being I just

556
00:23:12,079 --> 00:23:18,499
want to at least for the most part have

557
00:23:14,950 --> 00:23:20,058
everything in here be systematized so I

558
00:23:18,499 --> 00:23:21,319
know that it's happening in one place

559
00:23:20,058 --> 00:23:22,908
and happening the same way everywhere

560
00:23:21,319 --> 00:23:25,700
and there aren't multiple people

561
00:23:22,909 --> 00:23:26,989
unpacking normals in lots of different

562
00:23:25,700 --> 00:23:29,389
ways right

563
00:23:26,989 --> 00:23:31,970
so now when we actually go to pack this

564
00:23:29,388 --> 00:23:33,738
put this into you know the floating

565
00:23:31,970 --> 00:23:35,839
point buffer what we gotta actually have

566
00:23:33,739 --> 00:23:38,149
the n2 which is the thing that actually

567
00:23:35,839 --> 00:23:39,858
holds it now so if I want to do the

568
00:23:38,148 --> 00:23:42,678
unpack here now I can actually do that

569
00:23:39,858 --> 00:23:44,960
rather directly and since we want to

570
00:23:42,679 --> 00:23:47,599
probably unpack that once what I'll

571
00:23:44,960 --> 00:23:49,788
probably do there is just say we'll get

572
00:23:47,598 --> 00:23:52,729
that when we actually do the the initial

573
00:23:49,788 --> 00:23:53,720
sample oh I guess that the NPL is

574
00:23:52,729 --> 00:23:55,429
actually the thing that we need to

575
00:23:53,720 --> 00:23:59,389
unpack nevermind so we have to do that

576
00:23:55,429 --> 00:24:02,570
every time in the light feel so here is

577
00:23:59,388 --> 00:24:05,209
our like reflect normal that comes out

578
00:24:02,569 --> 00:24:07,098
of the MPLS XY so in this case what we

579
00:24:05,210 --> 00:24:11,739
want to do is say unpack normal 3

580
00:24:07,098 --> 00:24:15,048
because I want the full like real normal

581
00:24:11,739 --> 00:24:18,108
so after we unpack the normal we also

582
00:24:15,048 --> 00:24:20,639
have to take our two lighting values so

583
00:24:18,108 --> 00:24:24,210
we have our LT 0 with

584
00:24:20,640 --> 00:24:27,300
cheese comes from the Z and our lp1

585
00:24:24,210 --> 00:24:29,700
which comes from the W neither of those

586
00:24:27,299 --> 00:24:31,799
is really going to use but we could then

587
00:24:29,700 --> 00:24:34,920
use those for specular at some point in

588
00:24:31,799 --> 00:24:36,690
the future right and so once we've got

589
00:24:34,920 --> 00:24:39,150
that we're ready to compute an actual

590
00:24:36,690 --> 00:24:41,160
lighting equation here and what we can

591
00:24:39,150 --> 00:24:43,140
do to up to produce that letting

592
00:24:41,160 --> 00:24:44,700
equation is just use the lighting we

593
00:24:43,140 --> 00:24:48,060
were using before the kind of poopy

594
00:24:44,700 --> 00:24:50,069
lighting we were using before so let's

595
00:24:48,059 --> 00:24:52,519
go ahead and grab that I saved it it's

596
00:24:50,069 --> 00:24:52,519
right here

597
00:24:53,609 --> 00:25:00,619
so let's go ahead and drop that in good

598
00:25:01,490 --> 00:25:05,640
and we essentially want to do that right

599
00:25:04,109 --> 00:25:12,389
here after we've gotten the information

600
00:25:05,640 --> 00:25:14,370
out right like that so in this case we

601
00:25:12,390 --> 00:25:16,290
don't anymore have any of this sort of

602
00:25:14,369 --> 00:25:18,599
like to camera from camera can of stuff

603
00:25:16,289 --> 00:25:20,250
that's happening and the light strength

604
00:25:18,599 --> 00:25:21,659
and light distance that's all the stuff

605
00:25:20,250 --> 00:25:24,180
that's now handled by the lighting

606
00:25:21,660 --> 00:25:28,710
system so really what we have now is

607
00:25:24,180 --> 00:25:30,930
just the the sort of the dot product to

608
00:25:28,710 --> 00:25:34,620
figure out how much the light and the

609
00:25:30,930 --> 00:25:36,410
and the surface are aligned with each

610
00:25:34,619 --> 00:25:42,119
other

611
00:25:36,410 --> 00:25:44,370
and then of course we do have the

612
00:25:42,119 --> 00:25:47,579
reflects the reflection vector kind of

613
00:25:44,369 --> 00:25:49,469
stuff we still do have that computation

614
00:25:47,579 --> 00:25:50,909
to do for the for the specular lighting

615
00:25:49,470 --> 00:25:53,730
if that makes sense

616
00:25:50,910 --> 00:25:55,590
but what we can do now as well is since

617
00:25:53,730 --> 00:25:57,690
we have a diffuse coefficient and a

618
00:25:55,589 --> 00:25:59,250
specular coefficient that we were using

619
00:25:57,690 --> 00:26:02,340
for our lighting what we can do now is

620
00:25:59,250 --> 00:26:05,009
take our LP zero and our LP one and we

621
00:26:02,339 --> 00:26:06,529
can actually use those now as the

622
00:26:05,009 --> 00:26:09,240
diffuse light specular light for example

623
00:26:06,529 --> 00:26:10,619
so like I said the reason I wanted to

624
00:26:09,240 --> 00:26:12,240
get some parameters in there and

625
00:26:10,619 --> 00:26:14,369
actually is have a four-wide texture

626
00:26:12,240 --> 00:26:16,190
that encodes the normal plus that it so

627
00:26:14,369 --> 00:26:19,079
they knew we use it for something right

628
00:26:16,190 --> 00:26:21,750
and so what I figured we do is just use

629
00:26:19,079 --> 00:26:24,599
it for lighting framers right now since

630
00:26:21,750 --> 00:26:26,819
we have a simple Phong thing here we can

631
00:26:24,599 --> 00:26:29,819
just have diffuse and specular as the

632
00:26:26,819 --> 00:26:31,889
two coefficients and off we go so if we

633
00:26:29,819 --> 00:26:34,619
were to say that the fuse coefficient

634
00:26:31,890 --> 00:26:37,530
was the Z and the specular coefficient

635
00:26:34,619 --> 00:26:40,439
was the W then we can just get rid of

636
00:26:37,529 --> 00:26:42,960
these and actually do this equation as

637
00:26:40,440 --> 00:26:46,049
is so we'd have the diffuse coefficient

638
00:26:42,960 --> 00:26:47,759
times the cosine of the angle times the

639
00:26:46,049 --> 00:26:49,139
light strength and the spectral

640
00:26:47,759 --> 00:26:52,019
coefficient times the reflection angle

641
00:26:49,140 --> 00:26:53,850
in the light strength so that's all you

642
00:26:52,019 --> 00:26:55,440
know exactly what we would want we sum

643
00:26:53,849 --> 00:26:59,009
those two together and that's the light

644
00:26:55,440 --> 00:27:00,690
that we transmit now technically the

645
00:26:59,009 --> 00:27:02,640
diffuse and specular should not be

646
00:27:00,690 --> 00:27:04,200
separate components so my guess is what

647
00:27:02,640 --> 00:27:06,420
we'll do in the future is make these two

648
00:27:04,200 --> 00:27:09,779
parameters be something else probably

649
00:27:06,420 --> 00:27:11,670
one of them should really be like

650
00:27:09,779 --> 00:27:13,889
because because in general you can't

651
00:27:11,670 --> 00:27:15,779
just reflect out an arbitrary amount of

652
00:27:13,890 --> 00:27:17,009
light the amount of light total amount

653
00:27:15,779 --> 00:27:18,599
of light you reflect out should be

654
00:27:17,009 --> 00:27:20,308
proportional to the light you take in

655
00:27:18,599 --> 00:27:21,750
and it should be somewhat less than the

656
00:27:20,308 --> 00:27:24,329
light you take in right no surface

657
00:27:21,750 --> 00:27:26,670
reflects 100% of the light it takes n so

658
00:27:24,329 --> 00:27:28,589
in general you know you can't just

659
00:27:26,670 --> 00:27:30,360
arbitrarily set a diffuse and specular

660
00:27:28,589 --> 00:27:32,220
coefficient it doesn't make any sense

661
00:27:30,359 --> 00:27:33,928
so in the future we may want to play

662
00:27:32,220 --> 00:27:36,029
around with that a little bit but let's

663
00:27:33,929 --> 00:27:38,090
not get bogged down in that just yet

664
00:27:36,029 --> 00:27:40,160
once we actually have better lighting

665
00:27:38,089 --> 00:27:42,269
transport going then we can worry about

666
00:27:40,160 --> 00:27:47,190
fine-tuning the lighting equation of the

667
00:27:42,269 --> 00:27:48,960
final gathered so anyway what we need to

668
00:27:47,190 --> 00:27:50,610
do now is tune these equations that we

669
00:27:48,960 --> 00:27:51,900
have before to use the information that

670
00:27:50,609 --> 00:27:54,689
we probably think we'll actually have

671
00:27:51,900 --> 00:27:57,540
from the light transport which is not as

672
00:27:54,690 --> 00:27:59,490
straightforward as what we had in the

673
00:27:57,539 --> 00:28:00,599
past so in this case we're going to have

674
00:27:59,490 --> 00:28:02,160
a thing that's basically like what

675
00:28:00,599 --> 00:28:03,689
direction is the light coming from at

676
00:28:02,160 --> 00:28:06,870
this point like what's the overriding

677
00:28:03,690 --> 00:28:09,509
direction and so when we were doing that

678
00:28:06,869 --> 00:28:11,519
before we have the two light thing here

679
00:28:09,509 --> 00:28:13,410
and so what we're going to have is two

680
00:28:11,519 --> 00:28:19,079
light is going to be this light end now

681
00:28:13,410 --> 00:28:24,420
right like so and our reflection normal

682
00:28:19,079 --> 00:28:25,769
is going to be this now why we were

683
00:28:24,420 --> 00:28:27,630
doing this multiple times are not

684
00:28:25,769 --> 00:28:30,799
entirely sure if we want to replicate

685
00:28:27,630 --> 00:28:34,140
that out so we probably want to do

686
00:28:30,799 --> 00:28:36,089
something here where we take yeah like

687
00:28:34,140 --> 00:28:38,309
this this looks just kind of busted what

688
00:28:36,089 --> 00:28:42,599
we really want to do is the like dot

689
00:28:38,308 --> 00:28:44,379
term so the reflection dot term right we

690
00:28:42,599 --> 00:28:54,798
do is in your product here

691
00:28:44,380 --> 00:28:58,700
let's do this so the inbound lighting

692
00:28:54,798 --> 00:29:02,240
direction in our reflection direction we

693
00:28:58,700 --> 00:29:04,250
want to negate that because the way this

694
00:29:02,240 --> 00:29:05,870
was phrase originally was the direction

695
00:29:04,250 --> 00:29:07,069
that goes out to the light source and in

696
00:29:05,869 --> 00:29:08,778
this case we're probably going to end up

697
00:29:07,069 --> 00:29:11,928
with a thing that says where the light

698
00:29:08,778 --> 00:29:12,710
source is pointing towards us right so

699
00:29:11,929 --> 00:29:14,570
we're probably gonna have to use a

700
00:29:12,710 --> 00:29:17,120
negative in terms of the light normal at

701
00:29:14,569 --> 00:29:19,129
this point and then we're going to have

702
00:29:17,119 --> 00:29:20,569
the reflection direction that's actually

703
00:29:19,130 --> 00:29:23,028
just correct we're going to adopt those

704
00:29:20,569 --> 00:29:25,308
two together to see how coincident those

705
00:29:23,028 --> 00:29:28,369
two are and that's the information that

706
00:29:25,308 --> 00:29:29,990
we actually need for our rest in ER at

707
00:29:28,369 --> 00:29:34,849
that point we're going to clamp this

708
00:29:29,990 --> 00:29:37,099
because obviously we don't want to split

709
00:29:34,849 --> 00:29:37,638
that here we don't want this to go

710
00:29:37,099 --> 00:29:41,209
negative

711
00:29:37,638 --> 00:29:42,829
you can't have negative light well you

712
00:29:41,210 --> 00:29:44,480
probably could in the real world

713
00:29:42,829 --> 00:29:45,439
some scientists summer probably has

714
00:29:44,480 --> 00:29:47,509
figured out how to create negative

715
00:29:45,440 --> 00:29:50,120
negative light but in most things we

716
00:29:47,509 --> 00:29:51,769
observe there is no negative light so we

717
00:29:50,119 --> 00:29:54,319
want to clamp that to zero so that we

718
00:29:51,769 --> 00:29:56,388
don't contribute a negative value so

719
00:29:54,319 --> 00:29:57,678
here's our cosine angle term and it'll

720
00:29:56,388 --> 00:30:00,229
be used down here in the diffuse

721
00:29:57,679 --> 00:30:01,669
lighting we could if we want to sort of

722
00:30:00,230 --> 00:30:03,639
make this a little bit clearer by there

723
00:30:01,669 --> 00:30:07,519
having the diffuse like computation

724
00:30:03,638 --> 00:30:09,469
interior specular like computation so

725
00:30:07,519 --> 00:30:10,788
here we go so now we've got our total

726
00:30:09,470 --> 00:30:12,980
light that's the sum there so now we

727
00:30:10,788 --> 00:30:16,099
have to figure out here in our specular

728
00:30:12,980 --> 00:30:18,880
light we've got to figure out how to get

729
00:30:16,099 --> 00:30:21,980
the two camera right so that's that's

730
00:30:18,880 --> 00:30:23,720
how do we get the world P out of this

731
00:30:21,980 --> 00:30:25,099
basically and that's probably something

732
00:30:23,720 --> 00:30:26,929
that's going to be half - that's going

733
00:30:25,099 --> 00:30:27,859
to have to be passed in here right so

734
00:30:26,929 --> 00:30:32,019
this is going to be something that's

735
00:30:27,859 --> 00:30:32,019
going to have to be passed to the actual

736
00:30:32,409 --> 00:30:37,899
light peel itself because there's really

737
00:30:35,028 --> 00:30:40,849
no way to get that information without

738
00:30:37,898 --> 00:30:42,439
being outside and knowing more having

739
00:30:40,849 --> 00:30:43,969
more inputs than this so we're going to

740
00:30:42,440 --> 00:30:46,070
have to pass that in and so here's our

741
00:30:43,970 --> 00:30:48,079
reflection vector the negative two

742
00:30:46,069 --> 00:30:50,210
camera plus two times the dot I don't

743
00:30:48,079 --> 00:30:51,798
know why I was typing dot set of our

744
00:30:50,210 --> 00:30:54,139
inner they're the same thing but I

745
00:30:51,798 --> 00:30:55,970
usually use my own terminology so then

746
00:30:54,138 --> 00:30:57,388
we've got our world normal which in this

747
00:30:55,970 --> 00:30:59,129
case is just the reflection

748
00:30:57,388 --> 00:31:00,508
remote we've got the two camera which is

749
00:30:59,128 --> 00:31:03,838
getting passed in and again we've got

750
00:31:00,509 --> 00:31:06,118
that reflection normal here we've then

751
00:31:03,838 --> 00:31:09,569
got our cosine reflection angle this is

752
00:31:06,118 --> 00:31:13,678
the reflective exit the reflection

753
00:31:09,569 --> 00:31:17,519
vector which is basically the reflection

754
00:31:13,679 --> 00:31:20,339
of the of the camera out so then we take

755
00:31:17,519 --> 00:31:22,259
a look at the the dot product of that

756
00:31:20,338 --> 00:31:28,499
one again I don't know why we phrased it

757
00:31:22,259 --> 00:31:31,348
that way so this is the the ref BEC dot

758
00:31:28,499 --> 00:31:52,108
here and maybe what I'll call this is

759
00:31:31,348 --> 00:31:53,458
speck inner and this diffuse inner so

760
00:31:52,108 --> 00:31:55,308
that's really all we're talking about

761
00:31:53,459 --> 00:31:58,979
here again we've got sort of a negative

762
00:31:55,308 --> 00:32:02,989
light end maybe I should just go ahead

763
00:31:58,979 --> 00:32:06,269
and say to light equals negative light N

764
00:32:02,989 --> 00:32:12,569
and then I can leave these phrase

765
00:32:06,269 --> 00:32:14,278
without the negative like so probably

766
00:32:12,569 --> 00:32:15,808
not worth it like probably what I should

767
00:32:14,278 --> 00:32:17,429
do is just a negate the inner product

768
00:32:15,808 --> 00:32:20,548
because that's what's coming in and it

769
00:32:17,429 --> 00:32:22,469
saves some computations but what are

770
00:32:20,548 --> 00:32:24,868
going to do I'm going for cleanliness at

771
00:32:22,469 --> 00:32:27,058
this point and ease of readability later

772
00:32:24,868 --> 00:32:28,678
on we can talk about if we need to do

773
00:32:27,058 --> 00:32:32,298
anything that the compiler can't itself

774
00:32:28,679 --> 00:32:35,339
do in the shader to make things faster

775
00:32:32,298 --> 00:32:37,048
all right so here's us computing the

776
00:32:35,338 --> 00:32:40,158
reflection vector you can see it's

777
00:32:37,048 --> 00:32:42,569
fairly straightforward we've got the

778
00:32:40,159 --> 00:32:51,119
spectacular inner term now and we can

779
00:32:42,569 --> 00:32:54,718
now create our vector of that and then

780
00:32:51,118 --> 00:32:57,558
at the end we don't need to clamp this

781
00:32:54,719 --> 00:33:00,659
because we already did that right here

782
00:32:57,558 --> 00:33:02,759
we've got our power write our specular

783
00:33:00,659 --> 00:33:05,849
power now this is something that we're

784
00:33:02,759 --> 00:33:09,709
probably going to want to I think

785
00:33:05,848 --> 00:33:09,708
there's a pal basically

786
00:33:10,140 --> 00:33:14,850
for doing specular you can see it right

787
00:33:12,960 --> 00:33:16,940
here so you can basically say you want

788
00:33:14,849 --> 00:33:19,230
to raise this thing to this power

789
00:33:16,940 --> 00:33:21,390
instead what I think we probably want to

790
00:33:19,230 --> 00:33:23,269
do here is actually do something like

791
00:33:21,390 --> 00:33:24,720
Coast rectangle equals pal

792
00:33:23,269 --> 00:33:28,139
[Applause]

793
00:33:24,720 --> 00:33:30,960
where we can take in the coast ref angle

794
00:33:28,140 --> 00:33:33,480
and put in a power so in this case it

795
00:33:30,960 --> 00:33:35,179
was one two three four five six seven

796
00:33:33,480 --> 00:33:37,620
eight nine something like that right so

797
00:33:35,179 --> 00:33:39,750
eight or nine power we can just put that

798
00:33:37,619 --> 00:33:41,459
in there and the reason that we want to

799
00:33:39,750 --> 00:33:42,990
do that is this is probably going to be

800
00:33:41,460 --> 00:33:45,120
the way we're going to do our lighting

801
00:33:42,990 --> 00:33:46,890
parameters in the future right so

802
00:33:45,119 --> 00:33:50,279
probably in fact let's just do it that

803
00:33:46,890 --> 00:33:52,919
way right now so let's say we have a

804
00:33:50,279 --> 00:33:54,750
specular power that's going to be MP LW

805
00:33:52,919 --> 00:33:56,790
and let's say that our specular

806
00:33:54,750 --> 00:33:58,349
coefficient is just 1 minus the diffuse

807
00:33:56,789 --> 00:34:09,779
coefficient now that's probably not

808
00:33:58,349 --> 00:34:11,699
correct love to think about that so

809
00:34:09,780 --> 00:34:13,169
we'll think about that a little bit more

810
00:34:11,699 --> 00:34:14,939
but let's just say that this is a

811
00:34:13,168 --> 00:34:16,559
diffusive ount so the specular amount is

812
00:34:14,940 --> 00:34:21,050
just the inverse of actually you know

813
00:34:16,559 --> 00:34:24,418
it's basically a complimentary amount

814
00:34:21,050 --> 00:34:26,100
and so at that point you know we're just

815
00:34:24,418 --> 00:34:27,809
sort of producing the the diffuse color

816
00:34:26,099 --> 00:34:31,980
the specular color as a linear blend

817
00:34:27,809 --> 00:34:33,628
basically right and we can even phrase

818
00:34:31,980 --> 00:34:36,599
it that way if we wanted to add Zoeller

819
00:34:33,628 --> 00:34:38,368
p-- but here's it a few slight and the

820
00:34:36,599 --> 00:34:40,199
specular light coefficients together and

821
00:34:38,369 --> 00:34:42,329
now the co thrift angle instead we can

822
00:34:40,199 --> 00:34:43,799
put in the secular power as an actual

823
00:34:42,329 --> 00:34:46,019
function which means we can have

824
00:34:43,800 --> 00:34:48,539
services that get tighter or wider

825
00:34:46,019 --> 00:34:50,489
reflections coming on them right

826
00:34:48,539 --> 00:34:52,949
so we'll you know we'll sort of deal

827
00:34:50,489 --> 00:34:54,719
with that a little bit later on so once

828
00:34:52,949 --> 00:34:56,878
we have the total light we need to

829
00:34:54,719 --> 00:34:59,069
compute an actual result color so the

830
00:34:56,878 --> 00:35:01,349
peel cord that comes in what we're going

831
00:34:59,070 --> 00:35:03,300
to do is modulate the total lighting

832
00:35:01,349 --> 00:35:04,739
amount by that however we have to

833
00:35:03,300 --> 00:35:07,710
remember that the total lighting value

834
00:35:04,739 --> 00:35:10,529
at this point is actually not quite a

835
00:35:07,710 --> 00:35:12,090
same value because we're saying that

836
00:35:10,530 --> 00:35:17,369
lighting is going to kind of have a

837
00:35:12,090 --> 00:35:20,100
maximum and I believe we said max light

838
00:35:17,369 --> 00:35:22,590
power here I want to sort of define this

839
00:35:20,099 --> 00:35:23,360
as a global variable that we can tune

840
00:35:22,590 --> 00:35:25,370
however

841
00:35:23,360 --> 00:35:26,599
we want and the way this is going to

842
00:35:25,369 --> 00:35:31,819
work is we're going to say what the

843
00:35:26,599 --> 00:35:38,119
MaxLite power is and I guess we'll call

844
00:35:31,820 --> 00:35:40,760
it max light intensity maybe and so what

845
00:35:38,119 --> 00:35:42,440
I want to do here is the max light

846
00:35:40,760 --> 00:35:44,030
intensity is going to be something that

847
00:35:42,440 --> 00:35:46,429
we're going to divide out now what this

848
00:35:44,030 --> 00:35:47,990
basically is and because we haven't

849
00:35:46,429 --> 00:35:49,279
gotten to this point yet and maybe in

850
00:35:47,989 --> 00:35:51,979
the future we'll play around with it a

851
00:35:49,280 --> 00:35:53,930
little bit I don't know but essentially

852
00:35:51,980 --> 00:35:58,849
what we're doing here is like a poor

853
00:35:53,929 --> 00:36:00,109
person's tone mapping right so typically

854
00:35:58,849 --> 00:36:01,819
what happens in systems when you're

855
00:36:00,110 --> 00:36:03,170
dealing with any kind of realistic

856
00:36:01,820 --> 00:36:04,550
lighting at all which we're not really

857
00:36:03,170 --> 00:36:06,380
even doing but we're just taking it

858
00:36:04,550 --> 00:36:08,030
we're taking it far enough that we're

859
00:36:06,380 --> 00:36:10,369
sort of stepping into this realm where

860
00:36:08,030 --> 00:36:12,260
it becomes relevant what we need to do

861
00:36:10,369 --> 00:36:15,920
is the total lighting value at this

862
00:36:12,260 --> 00:36:17,990
point needs to be adjusted to the fact

863
00:36:15,920 --> 00:36:23,210
that it was a much higher range than it

864
00:36:17,989 --> 00:36:25,279
was when then the zero to one range we

865
00:36:23,210 --> 00:36:26,840
actually render so at some point when

866
00:36:25,280 --> 00:36:28,880
we're done we have to take these

867
00:36:26,840 --> 00:36:32,539
lighting values that may be like eight

868
00:36:28,880 --> 00:36:34,970
or nine nine point six might be a light

869
00:36:32,539 --> 00:36:37,279
value right we have to shrink those down

870
00:36:34,969 --> 00:36:39,169
to the zero to one range so we want to

871
00:36:37,280 --> 00:36:41,480
do is take that total lighting amounts

872
00:36:39,170 --> 00:36:43,369
and map it in some way that makes some

873
00:36:41,480 --> 00:36:45,769
kind of sense now there's a lot of ways

874
00:36:43,369 --> 00:36:47,659
that we could do that but we have to be

875
00:36:45,769 --> 00:36:50,360
careful because if all we did is a

876
00:36:47,659 --> 00:36:53,079
linear mapping what you can see if we do

877
00:36:50,360 --> 00:36:55,519
a linear mapping let me try to

878
00:36:53,079 --> 00:37:00,349
demonstrate the problem here note that

879
00:36:55,519 --> 00:37:06,829
the web browser okay there we go um so

880
00:37:00,349 --> 00:37:15,159
what we get let's see here ah go back we

881
00:37:06,829 --> 00:37:15,159
go nope Milton Milton

882
00:37:17,159 --> 00:37:25,440
bring me your there we go alright so gay

883
00:37:25,590 --> 00:37:42,240
398 light about you mapping so what

884
00:37:36,190 --> 00:37:45,130
we're going to have is in our system

885
00:37:42,239 --> 00:37:48,279
we're just going to have something which

886
00:37:45,130 --> 00:37:51,820
it has to map sort of these linear light

887
00:37:48,280 --> 00:37:53,470
values to alpha values right so what

888
00:37:51,820 --> 00:37:59,860
we're going to have is something that

889
00:37:53,469 --> 00:38:02,230
takes you know our output value we know

890
00:37:59,860 --> 00:38:04,690
that it is constrained between 0 and 1

891
00:38:02,230 --> 00:38:06,429
because even if you have a high dynamic

892
00:38:04,690 --> 00:38:09,490
range monitor you're still talking about

893
00:38:06,429 --> 00:38:11,559
some range that can display where 0 is

894
00:38:09,489 --> 00:38:13,779
the darkest thing can put on the screen

895
00:38:11,559 --> 00:38:16,420
and 1 is the brightest thing can put on

896
00:38:13,780 --> 00:38:18,430
the screen but nothing you can pass it

897
00:38:16,420 --> 00:38:20,349
an arbitrarily high value to this

898
00:38:18,429 --> 00:38:22,899
monitor it's never going to get any

899
00:38:20,349 --> 00:38:25,480
brighter than the brightest value right

900
00:38:22,900 --> 00:38:27,309
so when the deck when you finally get to

901
00:38:25,480 --> 00:38:28,990
the point okay it's not back anymore

902
00:38:27,309 --> 00:38:30,610
right it's all digital when you get to

903
00:38:28,989 --> 00:38:34,089
the point where you're actually driving

904
00:38:30,610 --> 00:38:36,820
the o LED right there's some maximum on

905
00:38:34,090 --> 00:38:39,640
and maximum off signals if you can send

906
00:38:36,820 --> 00:38:43,000
to adjust what the element what the

907
00:38:39,639 --> 00:38:44,739
actual element is putting out so when we

908
00:38:43,000 --> 00:38:46,179
talk to that monitor we're just talking

909
00:38:44,739 --> 00:38:47,379
about a range of 0 to 1 where zero is

910
00:38:46,179 --> 00:38:49,449
the darkest and 1 is the brightest

911
00:38:47,380 --> 00:38:51,220
that's all we can do so we don't have

912
00:38:49,449 --> 00:38:54,699
infinite levels of brightness like the

913
00:38:51,219 --> 00:38:56,889
universe sort of does the Sun versus a

914
00:38:54,699 --> 00:38:59,349
lamp in my room the difference between

915
00:38:56,889 --> 00:39:01,960
these two things is so incredibly vast

916
00:38:59,349 --> 00:39:05,319
and really there's not a lot of limits

917
00:39:01,960 --> 00:39:07,480
on how much photons can be flowing per

918
00:39:05,320 --> 00:39:08,680
unit time in a given area now in

919
00:39:07,480 --> 00:39:10,119
theoretical physics I'm sure they

920
00:39:08,679 --> 00:39:11,739
figured out that there is some limit

921
00:39:10,119 --> 00:39:13,119
like there probably you can't have an

922
00:39:11,739 --> 00:39:17,529
infinite number of photons in an

923
00:39:13,119 --> 00:39:18,969
infinitely small space I'm guessing but

924
00:39:17,530 --> 00:39:21,190
what do I know I'm a programmer I don't

925
00:39:18,969 --> 00:39:23,109
study physics I have no idea maybe you

926
00:39:21,190 --> 00:39:24,220
can but what we definitely know is our

927
00:39:23,110 --> 00:39:25,930
monitors definitely can't

928
00:39:24,219 --> 00:39:26,919
so our monitors are only producing

929
00:39:25,929 --> 00:39:28,239
illuminate out of photon

930
00:39:26,920 --> 00:39:29,409
and this is the maximum amount that they

931
00:39:28,239 --> 00:39:31,899
can produce and this is when they

932
00:39:29,409 --> 00:39:33,730
produce the minimum amount so what we

933
00:39:31,900 --> 00:39:35,619
need to do is take our conceptually

934
00:39:33,730 --> 00:39:36,940
infinite values because we can set a

935
00:39:35,619 --> 00:39:39,818
floating point value to things that are

936
00:39:36,940 --> 00:39:41,440
absurdly high right and so we need to

937
00:39:39,818 --> 00:39:43,719
figure out a range our floating point

938
00:39:41,440 --> 00:39:47,650
values and so that's in our case zero to

939
00:39:43,719 --> 00:39:49,959
whatever MaxLite power is it's just an

940
00:39:47,650 --> 00:39:51,700
arbitrary value right and then what we

941
00:39:49,960 --> 00:39:53,710
need to do is we need to take whatever

942
00:39:51,699 --> 00:39:55,719
this MaxLite power is and we need to map

943
00:39:53,710 --> 00:39:58,119
it to the zero to one range in some way

944
00:39:55,719 --> 00:39:59,618
that makes sense and typically what we

945
00:39:58,119 --> 00:40:01,539
want to do is we don't want this to be a

946
00:39:59,619 --> 00:40:03,220
straight linear mapping because our

947
00:40:01,539 --> 00:40:04,869
light power is something that makes

948
00:40:03,219 --> 00:40:06,969
sense only in the units of our light

949
00:40:04,869 --> 00:40:08,349
simulation in the game in our case is

950
00:40:06,969 --> 00:40:11,169
completely arbitrary because we're doing

951
00:40:08,349 --> 00:40:12,490
purely artistic lighting but even in a

952
00:40:11,170 --> 00:40:14,048
game where you were doing physically

953
00:40:12,489 --> 00:40:16,959
accurate lighting it's going to be in

954
00:40:14,048 --> 00:40:18,460
something like lumens or photons or

955
00:40:16,960 --> 00:40:21,338
something you're going to have a number

956
00:40:18,460 --> 00:40:22,960
that has nothing to do with the monitors

957
00:40:21,338 --> 00:40:24,849
brightness level it's not going to be

958
00:40:22,960 --> 00:40:28,030
zero to one it's going to be some other

959
00:40:24,849 --> 00:40:29,650
value that doesn't relate at all to

960
00:40:28,030 --> 00:40:31,540
monitor gamma or any of these other

961
00:40:29,650 --> 00:40:33,519
sorts of things so what you need to do

962
00:40:31,539 --> 00:40:35,318
is then take that you need to map it

963
00:40:33,519 --> 00:40:38,048
into the visible range of the monitor

964
00:40:35,318 --> 00:40:40,239
using something that gets you an image

965
00:40:38,048 --> 00:40:42,699
that you want and so typically what you

966
00:40:40,239 --> 00:40:45,789
want to do is do something that looks

967
00:40:42,699 --> 00:40:48,279
maybe you know here is like the linear

968
00:40:45,789 --> 00:40:50,139
mapping this mapping is not going to be

969
00:40:48,280 --> 00:40:52,359
very good the reason it's not going to

970
00:40:50,139 --> 00:40:55,568
be very good is because if you imagine

971
00:40:52,358 --> 00:40:59,019
that lighting fall-off is nonlinear and

972
00:40:55,568 --> 00:41:00,730
you're going to get these sort of very

973
00:40:59,019 --> 00:41:02,588
very high values in the locus of a

974
00:41:00,730 --> 00:41:03,730
bright light and then anything that

975
00:41:02,588 --> 00:41:05,739
reflects that light is going to be

976
00:41:03,730 --> 00:41:07,269
drastically lower you end up with a

977
00:41:05,739 --> 00:41:09,669
scene where you can't see anything other

978
00:41:07,269 --> 00:41:11,500
than the lights right because reflected

979
00:41:09,670 --> 00:41:13,930
light is down here thanks to the inverse

980
00:41:11,500 --> 00:41:17,019
square law and emitted light values are

981
00:41:13,929 --> 00:41:19,568
up here right and you don't want to have

982
00:41:17,019 --> 00:41:21,250
a scene where the lights are infinitely

983
00:41:19,568 --> 00:41:22,960
brighter than everything else around

984
00:41:21,250 --> 00:41:24,400
them that's not artistically satisfying

985
00:41:22,960 --> 00:41:26,019
is not going to produce a very

986
00:41:24,400 --> 00:41:28,000
interesting game that may be an accurate

987
00:41:26,019 --> 00:41:29,289
representation of how much light is

988
00:41:28,000 --> 00:41:31,690
somewhere if you're doing physical light

989
00:41:29,289 --> 00:41:33,279
simulate you may even be right it's just

990
00:41:31,690 --> 00:41:35,619
not satisfying it's why people pick

991
00:41:33,280 --> 00:41:37,569
different types of film it's why CCD

992
00:41:35,619 --> 00:41:39,470
sensors on cameras are adjust in certain

993
00:41:37,568 --> 00:41:41,029
ways it's why we have tone mapping

994
00:41:39,469 --> 00:41:43,789
in saturation and all these other sorts

995
00:41:41,030 --> 00:41:45,830
of adjustments we do so you want here

996
00:41:43,789 --> 00:41:50,449
some kind of what's called a response

997
00:41:45,829 --> 00:41:51,710
curve and what you're doing here is

998
00:41:50,449 --> 00:41:53,449
you're sort of simulating filmic

999
00:41:51,710 --> 00:41:55,099
response or something else if you're

1000
00:41:53,449 --> 00:41:56,899
putting video camera at something or

1001
00:41:55,099 --> 00:41:59,330
your eyes response curve the way your

1002
00:41:56,900 --> 00:42:02,000
brain maps the number of photons that

1003
00:41:59,329 --> 00:42:03,679
hit something in your cells right those

1004
00:42:02,000 --> 00:42:05,480
sorts of things you want to come up with

1005
00:42:03,679 --> 00:42:07,339
a mapping tier that makes them sense and

1006
00:42:05,480 --> 00:42:10,550
typically that mapping probably looks

1007
00:42:07,340 --> 00:42:13,430
something like this right which is to

1008
00:42:10,550 --> 00:42:15,740
say that you know somewhere inside where

1009
00:42:13,429 --> 00:42:18,739
we expect the reflected light to largely

1010
00:42:15,739 --> 00:42:21,379
be we're going to have that take up most

1011
00:42:18,739 --> 00:42:23,389
of the 0 to 1 range and then just the

1012
00:42:21,380 --> 00:42:27,500
top end of it is going to account for

1013
00:42:23,389 --> 00:42:30,759
the rest just you know 0.92 1 is going

1014
00:42:27,500 --> 00:42:33,858
to like account for all the rest of that

1015
00:42:30,760 --> 00:42:35,720
that that area like you know from 2 to

1016
00:42:33,858 --> 00:42:39,380
max power or something something like

1017
00:42:35,719 --> 00:42:41,509
this right and so in order to do

1018
00:42:39,380 --> 00:42:45,320
something like that like we want a curve

1019
00:42:41,510 --> 00:42:47,690
that's very bowed out right so we want a

1020
00:42:45,320 --> 00:42:49,430
curve that's more of like a square root

1021
00:42:47,690 --> 00:42:51,409
curve or something like this or a

1022
00:42:49,429 --> 00:42:53,690
multiple square root curve to do that

1023
00:42:51,409 --> 00:42:55,848
mapping to kind of flatten it out now if

1024
00:42:53,690 --> 00:42:57,289
you're really doing this stuff seriously

1025
00:42:55,849 --> 00:42:58,730
right and not we're just going to hack

1026
00:42:57,289 --> 00:43:01,039
one in now maybe we'll do a better one

1027
00:42:58,730 --> 00:43:02,690
later I don't know but if you're doing

1028
00:43:01,039 --> 00:43:04,159
this stuff more seriously then typically

1029
00:43:02,690 --> 00:43:06,588
what you end up doing here is you end up

1030
00:43:04,159 --> 00:43:08,480
studying other plastic response curves

1031
00:43:06,588 --> 00:43:10,608
to construct something that's a good

1032
00:43:08,480 --> 00:43:12,980
approximation to one of those so for

1033
00:43:10,608 --> 00:43:15,409
example one thing you might do is study

1034
00:43:12,980 --> 00:43:18,530
the filmic response curves of classic

1035
00:43:15,409 --> 00:43:21,679
Kodak film stocks used to film great

1036
00:43:18,530 --> 00:43:23,540
movies right because there is a whole

1037
00:43:21,679 --> 00:43:24,889
industry that spent all of its time

1038
00:43:23,539 --> 00:43:27,739
trying to come up with chemical

1039
00:43:24,889 --> 00:43:30,319
prophecies that would produce good

1040
00:43:27,739 --> 00:43:32,209
looking images for cinema that's very

1041
00:43:30,320 --> 00:43:33,619
similar to what we want to do so taking

1042
00:43:32,210 --> 00:43:36,588
a look at their response curves is a

1043
00:43:33,619 --> 00:43:40,700
great way to figure out a curve that

1044
00:43:36,588 --> 00:43:41,719
will map lighting simulation that might

1045
00:43:40,699 --> 00:43:44,419
have something to do with the real world

1046
00:43:41,719 --> 00:43:46,549
into something artistically Pleasant so

1047
00:43:44,420 --> 00:43:47,869
what you'll do you know if you're

1048
00:43:46,550 --> 00:43:49,460
looking at the responses you'll take a

1049
00:43:47,869 --> 00:43:51,289
look at what the actual measured

1050
00:43:49,460 --> 00:43:53,780
physical physical response curves were

1051
00:43:51,289 --> 00:43:55,880
of real Kodak film stock or other kinds

1052
00:43:53,780 --> 00:43:58,430
of great film stock and you'll piecewise

1053
00:43:55,880 --> 00:44:00,200
fit polynomials to them to approximate

1054
00:43:58,429 --> 00:44:02,449
them just classic functional

1055
00:44:00,199 --> 00:44:05,509
approximation Theory nothing fancy just

1056
00:44:02,449 --> 00:44:07,848
basic fitting of a polynomial to some

1057
00:44:05,510 --> 00:44:09,830
data points kind of a thing and then

1058
00:44:07,849 --> 00:44:12,050
you'll use that to translate your

1059
00:44:09,829 --> 00:44:14,779
incoming values we're not going to do

1060
00:44:12,050 --> 00:44:15,859
that obviously because again like I said

1061
00:44:14,780 --> 00:44:17,330
that's getting a little bit out of the

1062
00:44:15,858 --> 00:44:18,500
scope of what we might want to do here

1063
00:44:17,329 --> 00:44:20,269
on handmade Hiro but just so you know

1064
00:44:18,500 --> 00:44:24,289
that's something you can do that's what

1065
00:44:20,269 --> 00:44:25,670
high-end rendering does and furthermore

1066
00:44:24,289 --> 00:44:28,699
it often gives the artist the ability to

1067
00:44:25,670 --> 00:44:29,450
tweak those curves to their liking what

1068
00:44:28,699 --> 00:44:30,559
we're going to do instead is just

1069
00:44:29,449 --> 00:44:31,848
something approximate I'm just going to

1070
00:44:30,559 --> 00:44:33,349
use probably a simple square root curve

1071
00:44:31,849 --> 00:44:35,570
that's not great we may want to do

1072
00:44:33,349 --> 00:44:37,130
something a little better later on but

1073
00:44:35,570 --> 00:44:38,720
we're going to do something like that so

1074
00:44:37,130 --> 00:44:40,130
I'm going to first divide by the MaxLite

1075
00:44:38,719 --> 00:44:41,779
power to put it in the zero to one range

1076
00:44:40,130 --> 00:44:43,400
and then I'm going to bump that curve up

1077
00:44:41,780 --> 00:44:44,720
by like gamma inge it up a bit like

1078
00:44:43,400 --> 00:44:46,519
square rooting it up a little bit or

1079
00:44:44,719 --> 00:44:49,009
something like this and we can play with

1080
00:44:46,519 --> 00:44:51,619
that curve all we want to produce

1081
00:44:49,010 --> 00:44:54,380
something more reasonable later if it's

1082
00:44:51,619 --> 00:44:58,190
so su stuff so here what I'm going to do

1083
00:44:54,380 --> 00:45:00,230
is going to take that light in and

1084
00:44:58,190 --> 00:45:02,650
whenever we get the light end what I'm

1085
00:45:00,230 --> 00:45:05,690
going to do is I'm going to take light n

1086
00:45:02,650 --> 00:45:08,180
divided by max light power for light

1087
00:45:05,690 --> 00:45:10,639
intensity rather which that fails us to

1088
00:45:08,179 --> 00:45:13,789
the zero to one range or at least you

1089
00:45:10,639 --> 00:45:18,079
know it presumably does we we will then

1090
00:45:13,789 --> 00:45:20,719
do a clamp 0 1 on that to produce a

1091
00:45:18,079 --> 00:45:24,259
value that's reasonable this should have

1092
00:45:20,719 --> 00:45:28,969
been a clamp here one as well I don't

1093
00:45:24,260 --> 00:45:31,099
know why it isn't so we're doing clamp 0

1094
00:45:28,969 --> 00:45:32,929
1 on that value seconds the value

1095
00:45:31,099 --> 00:45:34,640
between 0 and 1 and then what we want to

1096
00:45:32,929 --> 00:45:36,079
do again like I said is just just adjust

1097
00:45:34,639 --> 00:45:38,480
it a little bit here I'll put that as a

1098
00:45:36,079 --> 00:45:41,809
separate thing let's say we do a squirt

1099
00:45:38,480 --> 00:45:43,940
of the light end here and like I said we

1100
00:45:41,809 --> 00:45:45,679
can do that as many times as we want if

1101
00:45:43,940 --> 00:45:47,210
we want to bump that curve up or down if

1102
00:45:45,679 --> 00:45:48,469
you want to flatten the curve to do it

1103
00:45:47,210 --> 00:45:51,159
the other way around which I don't think

1104
00:45:48,469 --> 00:45:56,209
we do but if we did we could swear it

1105
00:45:51,159 --> 00:45:58,099
such and so forth alright so assuming

1106
00:45:56,210 --> 00:45:59,780
that we're doing that right and we

1107
00:45:58,099 --> 00:46:01,250
figure out something's good here again

1108
00:45:59,780 --> 00:46:03,440
this might have to be really flattened

1109
00:46:01,250 --> 00:46:04,820
out and what you can do you know you can

1110
00:46:03,440 --> 00:46:05,900
imagine this like let's say we go to

1111
00:46:04,820 --> 00:46:07,850
Wolfram al

1112
00:46:05,900 --> 00:46:10,510
or we could even just I think Google

1113
00:46:07,849 --> 00:46:14,059
will do this if we just say graph X

1114
00:46:10,510 --> 00:46:15,650
graph square root of x I think it'll

1115
00:46:14,059 --> 00:46:20,049
just draw it for us so you can see that

1116
00:46:15,650 --> 00:46:20,050
curve there if we double square root it

1117
00:46:21,849 --> 00:46:25,969
that's probably more what we're looking

1118
00:46:24,079 --> 00:46:28,940
for right like something that has a

1119
00:46:25,969 --> 00:46:31,489
pretty steep curve like that you know

1120
00:46:28,940 --> 00:46:33,349
but again probably what we really want

1121
00:46:31,489 --> 00:46:35,479
is is more let's make sure we're looking

1122
00:46:33,349 --> 00:46:38,539
at the the right range so here's the

1123
00:46:35,480 --> 00:46:43,449
zero to one part of this right I don't

1124
00:46:38,539 --> 00:46:43,449
know how to there we go

1125
00:46:48,889 --> 00:46:53,150
so yet you know is that is that really

1126
00:46:51,980 --> 00:46:55,639
what we want probably not like we

1127
00:46:53,150 --> 00:46:58,269
probably want this part here to be a

1128
00:46:55,639 --> 00:47:00,920
little more linear and not so attenuated

1129
00:46:58,269 --> 00:47:04,670
so I don't know but we do like this kind

1130
00:47:00,920 --> 00:47:07,700
of long curve here so yeah like can we

1131
00:47:04,670 --> 00:47:10,608
do better than this absolutely I'm just

1132
00:47:07,699 --> 00:47:14,329
not 100% sure what the quick and easy

1133
00:47:10,608 --> 00:47:16,250
way would be to do so but again we're

1134
00:47:14,329 --> 00:47:19,608
just going to leave that for the moment

1135
00:47:16,250 --> 00:47:21,829
and we will come back to that later when

1136
00:47:19,608 --> 00:47:23,750
we need to right when we need to sort of

1137
00:47:21,829 --> 00:47:27,799
make that a little bit more reasonable

1138
00:47:23,750 --> 00:47:32,300
right okay oops that's that's white n I

1139
00:47:27,800 --> 00:47:35,780
want white see I don't want to do that

1140
00:47:32,300 --> 00:47:40,460
to the normal image that to the color I

1141
00:47:35,780 --> 00:47:43,730
so we need to sample light see and light

1142
00:47:40,460 --> 00:47:51,019
in here those are values I'd say we need

1143
00:47:43,730 --> 00:47:53,150
to grab and they're both view threes and

1144
00:47:51,019 --> 00:47:55,599
so those will be texture samples from

1145
00:47:53,150 --> 00:47:59,570
the lighting information that we have

1146
00:47:55,599 --> 00:48:03,670
when we sample the light n we will be

1147
00:47:59,570 --> 00:48:05,450
getting that pretty much from the the

1148
00:48:03,670 --> 00:48:11,289
bezel mostly coming from different

1149
00:48:05,449 --> 00:48:11,289
textures let's see here

1150
00:48:12,199 --> 00:48:16,068
and really because we have

1151
00:48:13,909 --> 00:48:18,469
front-and-back admission at the moment I

1152
00:48:16,068 --> 00:48:21,079
suppose we technically could sample to

1153
00:48:18,469 --> 00:48:23,449
light values here if you wanted to I'm

1154
00:48:21,079 --> 00:48:27,500
not sure that we need to just yet but

1155
00:48:23,449 --> 00:48:30,730
it's yeah maybe we should right let's

1156
00:48:27,500 --> 00:48:30,730
see what the

1157
00:48:37,920 --> 00:48:44,440
let's think about this so when we do

1158
00:48:40,778 --> 00:48:49,318
light peel here we essentially have to

1159
00:48:44,440 --> 00:48:49,318
compute sort of to this equation twice

1160
00:48:49,380 --> 00:48:55,000
one for each light if that makes sense

1161
00:48:53,048 --> 00:48:57,489
so what we could do is just add those

1162
00:48:55,000 --> 00:49:01,420
two together fairly straightforwardly

1163
00:48:57,489 --> 00:49:06,298
actually so if we wanted to here we

1164
00:49:01,420 --> 00:49:06,298
could do something where we did this

1165
00:49:07,920 --> 00:49:14,829
where we actually took the two lights

1166
00:49:12,518 --> 00:49:20,308
the front and the back that the two the

1167
00:49:14,829 --> 00:49:24,150
two lights that we were getting and and

1168
00:49:20,309 --> 00:49:24,150
combined them together right

1169
00:49:31,789 --> 00:49:38,179
I'm going to hold off on that because we

1170
00:49:36,800 --> 00:49:39,350
need to keep thinking this through and I

1171
00:49:38,179 --> 00:49:40,609
feel like we're going to progress the

1172
00:49:39,349 --> 00:49:42,769
letting couple of our times over the

1173
00:49:40,610 --> 00:49:44,180
next few weeks so I'm going to hold off

1174
00:49:42,769 --> 00:49:45,710
on that just yet

1175
00:49:44,179 --> 00:49:47,210
because I think we've got a ways to go

1176
00:49:45,710 --> 00:49:49,039
and I don't want to overdo it so I'm

1177
00:49:47,210 --> 00:49:50,449
just going to stick with one first and

1178
00:49:49,039 --> 00:49:51,829
then we'll kind of start pushing that

1179
00:49:50,449 --> 00:49:55,039
stuff a little bit further later as we

1180
00:49:51,829 --> 00:50:03,199
go right so here's our light peel we

1181
00:49:55,039 --> 00:50:07,699
know we need to pass to camera here like

1182
00:50:03,199 --> 00:50:10,460
so and actually this reminds me of

1183
00:50:07,699 --> 00:50:12,289
something I wanted to try so let me go

1184
00:50:10,460 --> 00:50:15,679
ahead and compile this I wanted to know

1185
00:50:12,289 --> 00:50:16,969
something about these here Docs one of

1186
00:50:15,679 --> 00:50:19,009
the problems that we have as you've

1187
00:50:16,969 --> 00:50:20,779
noticed is we don't get any indentation

1188
00:50:19,010 --> 00:50:22,340
on these because for coder thinks

1189
00:50:20,780 --> 00:50:25,490
they're strings because hey guess what

1190
00:50:22,340 --> 00:50:29,180
they are strings I was wondering if

1191
00:50:25,489 --> 00:50:32,419
there might be some way to fix that

1192
00:50:29,179 --> 00:50:34,039
and I I just kind of had this

1193
00:50:32,420 --> 00:50:35,240
harebrained idea and I don't know if it

1194
00:50:34,039 --> 00:50:37,190
actually works so I don't know much

1195
00:50:35,239 --> 00:50:39,459
about the these aren't actually sweet

1196
00:50:37,190 --> 00:50:41,450
bustled tear ducts they're actually the

1197
00:50:39,460 --> 00:50:43,460
other kind of string

1198
00:50:41,449 --> 00:50:44,899
there's two things in people's plus

1199
00:50:43,460 --> 00:50:46,190
there's the here doc ones which are

1200
00:50:44,900 --> 00:50:49,490
actual here docs and then there's the

1201
00:50:46,190 --> 00:50:52,450
c++ extended string thing I don't know

1202
00:50:49,489 --> 00:50:54,829
why they have both exactly but they do

1203
00:50:52,449 --> 00:50:56,359
there maybe was a reason forward it may

1204
00:50:54,829 --> 00:50:57,590
just be one of those C++ things that

1205
00:50:56,360 --> 00:50:58,400
they messed it up the first time and

1206
00:50:57,590 --> 00:50:59,780
then they made another one that's

1207
00:50:58,400 --> 00:51:01,610
probably also messed up it's and I got

1208
00:50:59,780 --> 00:51:04,640
too messed up versions now there which

1209
00:51:01,610 --> 00:51:06,230
works but either way that's what we've

1210
00:51:04,639 --> 00:51:08,839
got right now and I was wondering could

1211
00:51:06,230 --> 00:51:10,849
you do a pound to find that contained as

1212
00:51:08,840 --> 00:51:12,289
a shared occupation in it or sorry not

1213
00:51:10,849 --> 00:51:14,329
the here doc whatever you want to call

1214
00:51:12,289 --> 00:51:17,389
it right like could you do something

1215
00:51:14,329 --> 00:51:24,409
that included that in the pound define

1216
00:51:17,389 --> 00:51:31,219
like so like open string or like shader

1217
00:51:24,409 --> 00:51:33,199
string and then it was like or I guess

1218
00:51:31,219 --> 00:51:35,569
even we don't even really need the name

1219
00:51:33,199 --> 00:51:39,129
I guess we'd do it like this

1220
00:51:35,570 --> 00:51:44,950
begin shader string annotator string

1221
00:51:39,130 --> 00:51:44,950
something like that um it's

1222
00:51:48,389 --> 00:51:53,009
and I don't know it looks like for kotor

1223
00:51:50,309 --> 00:51:53,940
has a lot of trouble with that I don't

1224
00:51:53,010 --> 00:51:55,830
know if this is the correct

1225
00:51:53,940 --> 00:51:57,389
interpretation of this maybe that the

1226
00:51:55,829 --> 00:51:59,849
problem is that you can't put this in a

1227
00:51:57,389 --> 00:52:01,549
pound defying but I would say like if

1228
00:51:59,849 --> 00:52:03,868
you could put it in the pound to find

1229
00:52:01,550 --> 00:52:05,280
then what you could do is you could use

1230
00:52:03,869 --> 00:52:06,660
the pound to find instead of this so

1231
00:52:05,280 --> 00:52:12,990
that this would still have indentation

1232
00:52:06,659 --> 00:52:15,179
right I was just curious if that would

1233
00:52:12,989 --> 00:52:16,559
be possible I don't know if it is or not

1234
00:52:15,179 --> 00:52:32,759
though let's let's just find out if I

1235
00:52:16,559 --> 00:52:35,610
can even compile it nope what I'm not

1236
00:52:32,760 --> 00:52:38,010
sure what exactly that practice could

1237
00:52:35,610 --> 00:52:41,090
undeclared in the FIR I'm assuming that

1238
00:52:38,010 --> 00:52:47,190
basically what happened here is that

1239
00:52:41,090 --> 00:52:48,539
this just gets skipped out on so I'm

1240
00:52:47,190 --> 00:52:52,250
assuming what happens here is that you

1241
00:52:48,539 --> 00:52:54,449
can't put it into a macro so oh well

1242
00:52:52,250 --> 00:52:55,530
right I don't think there's anything you

1243
00:52:54,449 --> 00:52:58,379
can do about it if you can't put into a

1244
00:52:55,530 --> 00:53:00,210
macro I would just have this faint

1245
00:52:58,380 --> 00:53:04,079
feeling I was like I wonder if there's

1246
00:53:00,210 --> 00:53:05,760
some way we could do something there but

1247
00:53:04,079 --> 00:53:06,809
it doesn't look like we can the other

1248
00:53:05,760 --> 00:53:08,250
thing I was thinking is could you put a

1249
00:53:06,809 --> 00:53:09,539
pound in clued in if it has like no bit

1250
00:53:08,250 --> 00:53:12,300
of the panic that would be part of the

1251
00:53:09,539 --> 00:53:14,608
string so you can't even import stuff

1252
00:53:12,300 --> 00:53:16,019
into it so unfortunately the only way

1253
00:53:14,608 --> 00:53:18,799
we'll ever get it is if we decide to

1254
00:53:16,019 --> 00:53:23,340
load these out of a file separately

1255
00:53:18,800 --> 00:53:26,039
essentially so ask for reps which we

1256
00:53:23,340 --> 00:53:30,930
could do it's not it not the end of the

1257
00:53:26,039 --> 00:53:33,090
world anyway so off we go we've got the

1258
00:53:30,929 --> 00:53:34,949
light peel competition in here

1259
00:53:33,090 --> 00:53:40,650
we need to sample these from somewhere

1260
00:53:34,949 --> 00:53:44,819
so what we need is our light sampler

1261
00:53:40,650 --> 00:53:48,079
like our light color in our contemporary

1262
00:53:44,820 --> 00:53:48,080
Lechem sampler

1263
00:53:48,139 --> 00:53:55,358
[Applause]

1264
00:53:50,039 --> 00:53:57,249
and that so the color sampler and the

1265
00:53:55,358 --> 00:53:59,588
normal sampler are both going to just

1266
00:53:57,248 --> 00:54:04,509
sample from the lighting computation

1267
00:53:59,588 --> 00:54:08,858
that we had and the light normal is

1268
00:54:04,509 --> 00:54:14,139
actually is going to be the NPL texture

1269
00:54:08,858 --> 00:54:16,778
for the lighting which again this one

1270
00:54:14,139 --> 00:54:21,699
right here with the depth so this is

1271
00:54:16,778 --> 00:54:25,478
really the light NP so and I guess this

1272
00:54:21,699 --> 00:54:27,849
is the emit sampler like so so to get

1273
00:54:25,478 --> 00:54:33,458
the light see out of that we have to do

1274
00:54:27,849 --> 00:54:35,709
an unpack of of these values right and

1275
00:54:33,458 --> 00:54:39,938
in order to do that again we need to do

1276
00:54:35,708 --> 00:54:42,068
a like sort of an extend of V extend and

1277
00:54:39,938 --> 00:54:43,418
again we can just make this this is

1278
00:54:42,068 --> 00:54:46,509
probably the part where it's good to

1279
00:54:43,418 --> 00:54:53,739
pull this out pops oops so light N

1280
00:54:46,509 --> 00:54:55,719
equals like extend or a send one will be

1281
00:54:53,739 --> 00:54:58,659
something like that where I can

1282
00:54:55,719 --> 00:55:01,358
basically pass in the X Y and get back

1283
00:54:58,659 --> 00:55:03,669
the version with the Z being the 1 minus

1284
00:55:01,358 --> 00:55:05,498
square root so if I do something like

1285
00:55:03,668 --> 00:55:08,199
that then that also gives me the way to

1286
00:55:05,498 --> 00:55:10,958
do the thing I wanted to do before which

1287
00:55:08,199 --> 00:55:13,269
is make all of these be things that

1288
00:55:10,958 --> 00:55:16,868
operate that way so here's the v2 n in

1289
00:55:13,268 --> 00:55:18,698
this case and basically what we're

1290
00:55:16,869 --> 00:55:24,309
talking about here is you don't have to

1291
00:55:18,699 --> 00:55:26,709
do the unpack you just do this because

1292
00:55:24,309 --> 00:55:31,469
the other two values are correct and so

1293
00:55:26,708 --> 00:55:31,469
at that point this function becomes

1294
00:55:31,858 --> 00:55:44,438
extends normal V of unpack normal 3 or 2

1295
00:55:36,338 --> 00:55:47,969
rather of n right so that way we can do

1296
00:55:44,438 --> 00:55:47,969
all the different versions of it

1297
00:55:54,469 --> 00:56:00,419
so here we do reconstruct normal for the

1298
00:55:58,139 --> 00:56:03,690
v3 really all we're doing when we pass

1299
00:56:00,420 --> 00:56:07,680
the NP there is this is just that normal

1300
00:56:03,690 --> 00:56:11,400
extent so this is just going to be via T

1301
00:56:07,679 --> 00:56:14,568
result equals extend normal Z and P XY

1302
00:56:11,400 --> 00:56:18,750
and then that's it so now that

1303
00:56:14,568 --> 00:56:23,460
computation has been pulled out which is

1304
00:56:18,750 --> 00:56:25,889
good now thankfully last time we did a

1305
00:56:23,460 --> 00:56:30,568
thing where we we took out the sort of

1306
00:56:25,889 --> 00:56:31,980
the sampling stuff and made it automatic

1307
00:56:30,568 --> 00:56:33,358
so that we don't really have to do too

1308
00:56:31,980 --> 00:56:35,190
much work to extend the fact that we've

1309
00:56:33,358 --> 00:56:39,239
got a bazillion samplers in this

1310
00:56:35,190 --> 00:56:42,420
particular situation here so what I want

1311
00:56:39,239 --> 00:56:46,500
to do inside this is I want to get my

1312
00:56:42,420 --> 00:56:50,280
light emits sampler and my light and

1313
00:56:46,500 --> 00:56:53,760
piece ampler and I also need to do these

1314
00:56:50,280 --> 00:56:58,589
peel and peak NPL samplers so just want

1315
00:56:53,760 --> 00:57:18,660
to get all of those assigned here so

1316
00:56:58,588 --> 00:57:20,788
it's like this sort of a thing and then

1317
00:57:18,659 --> 00:57:22,679
we've got a light emit sampler and the

1318
00:57:20,789 --> 00:57:24,480
light in P sampler and so all of those

1319
00:57:22,679 --> 00:57:26,038
samplers will now get linked up in

1320
00:57:24,480 --> 00:57:27,900
theory automatically for us which is

1321
00:57:26,039 --> 00:57:29,309
nice because again it was a pain in the

1322
00:57:27,900 --> 00:57:30,829
butt to do those all the time so it's

1323
00:57:29,309 --> 00:57:33,240
nice that we kind of made it automatic

1324
00:57:30,829 --> 00:57:35,609
and so what we need to do at that point

1325
00:57:33,239 --> 00:57:37,979
is we need to actually load it all up

1326
00:57:35,608 --> 00:57:39,389
because yeah we got them bound now but

1327
00:57:37,980 --> 00:57:41,389
that doesn't really help us because we

1328
00:57:39,389 --> 00:57:42,598
have to actually put them in here

1329
00:57:41,389 --> 00:57:45,719
somewhere

1330
00:57:42,599 --> 00:57:47,460
right so what we're going to end up with

1331
00:57:45,719 --> 00:57:50,909
here is we're going to end up with a

1332
00:57:47,460 --> 00:57:57,179
double bind if you will so we've kind of

1333
00:57:50,909 --> 00:58:00,598
got got this situation where we need to

1334
00:57:57,179 --> 00:58:03,419
do two binds for each of these so we're

1335
00:58:00,599 --> 00:58:05,010
going to actually bind two textures for

1336
00:58:03,420 --> 00:58:08,450
every peel

1337
00:58:05,010 --> 00:58:11,579
like so we're going to have to bind the

1338
00:58:08,449 --> 00:58:14,129
basic surface color 1 but then we're

1339
00:58:11,579 --> 00:58:26,609
also going to have to bind the end the

1340
00:58:14,130 --> 00:58:28,289
the NPL one right so once we read those

1341
00:58:26,608 --> 00:58:32,750
two things now we've got all of those

1342
00:58:28,289 --> 00:58:32,750
bound we still have to bind at the end

1343
00:58:32,780 --> 00:58:39,269
two more textures we've got to bind the

1344
00:58:36,690 --> 00:58:45,900
two textures from the lighting solution

1345
00:58:39,269 --> 00:58:46,829
so we're going to have to do something

1346
00:58:45,900 --> 00:58:50,130
like this

1347
00:58:46,829 --> 00:58:52,230
and at some point that becomes a little

1348
00:58:50,130 --> 00:59:00,660
bit ownerís so maybe we even just want

1349
00:58:52,230 --> 00:59:07,530
to do something like that where every

1350
00:59:00,659 --> 00:59:17,539
time through here we just say the heck

1351
00:59:07,530 --> 00:59:17,540
with it find them all right

1352
00:59:22,230 --> 00:59:28,800
and so yeah I don't think we actually

1353
00:59:26,309 --> 00:59:31,199
need to unbind these the way that we

1354
00:59:28,800 --> 00:59:36,390
were doing those before so I'm going to

1355
00:59:31,199 --> 00:59:38,848
actually get rid of those so what we

1356
00:59:36,389 --> 00:59:40,799
need to do here is we just need to make

1357
00:59:38,849 --> 00:59:43,530
sure that we're binding the light

1358
00:59:40,800 --> 00:59:53,039
solution here so that's going to be from

1359
00:59:43,530 --> 00:59:54,660
the OpenGL light buffers and so the

1360
00:59:53,039 --> 00:59:56,579
OpenGL light buffers we're going to take

1361
00:59:54,659 --> 00:59:58,469
that base level solution that we you

1362
00:59:56,579 --> 01:00:00,960
know quote-unquote created which we

1363
00:59:58,469 --> 01:00:02,068
really haven't created yet but which we

1364
01:00:00,960 --> 01:00:04,230
have sort of a dummy

1365
01:00:02,068 --> 01:00:06,088
you know crappy thing in right now and

1366
01:00:04,230 --> 01:00:08,099
we're just going to take the front emit

1367
01:00:06,088 --> 01:00:15,049
for the emission and we're going to take

1368
01:00:08,099 --> 01:00:15,050
the NP for the NP right and that's it

1369
01:00:19,530 --> 01:00:27,040
all right now we probably have a ton of

1370
01:00:23,440 --> 01:00:28,720
stuff to deal with error wise so let's

1371
01:00:27,039 --> 01:00:31,690
get started

1372
01:00:28,719 --> 01:00:39,848
that's not helpful but we can take a

1373
01:00:31,690 --> 01:00:44,019
look at the actual error here skip over

1374
01:00:39,849 --> 01:00:49,769
that statement let's take a look yes I

1375
01:00:44,019 --> 01:00:53,108
know okay under pending for a light F

1376
01:00:49,769 --> 01:00:56,619
that is not good there should not be an

1377
01:00:53,108 --> 01:01:00,568
undercard NFI are obviously light weight

1378
01:00:56,619 --> 01:01:03,608
F so that's the light strength there and

1379
01:01:00,568 --> 01:01:12,730
the light strength in this case is just

1380
01:01:03,608 --> 01:01:14,289
the light C all right let's recompile

1381
01:01:12,730 --> 01:01:16,389
that there I'll go see if there's

1382
01:01:14,289 --> 01:01:20,769
anything else I don't know another to

1383
01:01:16,389 --> 01:01:24,730
camera so in this case we have to have

1384
01:01:20,769 --> 01:01:29,588
two camera in here and that we haven't

1385
01:01:24,730 --> 01:01:31,869
determined yet so at the moment we'll

1386
01:01:29,588 --> 01:01:35,920
need to compute this based on the camera

1387
01:01:31,869 --> 01:01:38,318
and the fragment UV coordinate which we

1388
01:01:35,920 --> 01:01:39,940
don't actually know yet so what we'll do

1389
01:01:38,318 --> 01:01:43,480
here is we'll just because we need to

1390
01:01:39,940 --> 01:01:46,269
use the depth value at each individual

1391
01:01:43,480 --> 01:01:48,608
point to determine that to determine how

1392
01:01:46,269 --> 01:01:51,068
far away the thing is I suppose although

1393
01:01:48,608 --> 01:01:52,900
well I guess no we don't actually care

1394
01:01:51,068 --> 01:01:56,259
because this two camera is a normal

1395
01:01:52,900 --> 01:02:01,030
vector so actually we know just from the

1396
01:01:56,260 --> 01:02:02,849
UV what it actually is so that we don't

1397
01:02:01,030 --> 01:02:06,700
actually need the depth to compute that

1398
01:02:02,849 --> 01:02:10,410
so we know that it's you know the

1399
01:02:06,699 --> 01:02:13,598
normalized version of like the frag UV

1400
01:02:10,409 --> 01:02:16,868
and we just need to know the fov in

1401
01:02:13,599 --> 01:02:20,680
order to compute it so for right now

1402
01:02:16,869 --> 01:02:24,039
I'll I'll pretend that it's just the Z

1403
01:02:20,679 --> 01:02:27,449
vector pointing upward but we will be

1404
01:02:24,039 --> 01:02:27,449
able to generate that

1405
01:02:29,619 --> 01:02:34,460
in the future for real and we won't need

1406
01:02:33,289 --> 01:02:36,849
to read from the depth buffer to do it

1407
01:02:34,460 --> 01:02:36,849
out thing

1408
01:02:38,170 --> 01:02:46,730
let's see cannot convert a high GP

1409
01:02:42,260 --> 01:02:50,540
vector of float this is new new matching

1410
01:02:46,730 --> 01:02:54,559
overloaded function found for PAL okay

1411
01:02:50,539 --> 01:02:57,920
oh yes that's right

1412
01:02:54,559 --> 01:03:04,329
that Pao I think I accidentally put it

1413
01:02:57,920 --> 01:03:15,559
after the VM yeah this is supposed to be

1414
01:03:04,329 --> 01:03:23,779
on the spec in ER that was good good

1415
01:03:15,559 --> 01:03:25,309
let's grew up so let's see connecting

1416
01:03:23,780 --> 01:03:26,990
for work to float to high through so

1417
01:03:25,309 --> 01:03:30,529
we've got a four to three down sample

1418
01:03:26,989 --> 01:03:32,359
problem there I don't know where but we

1419
01:03:30,530 --> 01:03:33,050
will try to figure it out probably right

1420
01:03:32,360 --> 01:03:36,239
here

1421
01:03:33,050 --> 01:03:36,239
[Applause]

1422
01:03:42,108 --> 01:03:46,518
and so now we have to go ahead and

1423
01:03:44,028 --> 01:03:47,750
actually see what this does in order to

1424
01:03:46,518 --> 01:03:50,118
see what it does we're going to need a

1425
01:03:47,750 --> 01:03:52,278
way to look at the actual output of the

1426
01:03:50,119 --> 01:03:56,210
game but I probably want to do is have

1427
01:03:52,278 --> 01:04:00,318
some way of looking at the debug light

1428
01:03:56,210 --> 01:04:02,059
buffers as a parameter so like we can

1429
01:04:00,318 --> 01:04:04,608
switch between viewing the debug buffers

1430
01:04:02,059 --> 01:04:06,140
and not doing the debug buffers you can

1431
01:04:04,608 --> 01:04:09,250
see not particularly impressive here

1432
01:04:06,139 --> 01:04:13,368
this is not a good result say the least

1433
01:04:09,250 --> 01:04:15,018
that is a pure black screen but so let's

1434
01:04:13,369 --> 01:04:16,730
debug that first but then it would be

1435
01:04:15,018 --> 01:04:18,828
nice to switch between those so let's

1436
01:04:16,730 --> 01:04:20,449
put in something that we can use to

1437
01:04:18,829 --> 01:04:23,630
switch between them so here's compiled

1438
01:04:20,449 --> 01:04:24,798
FPL lighting the compiled FQ lighting

1439
01:04:23,630 --> 01:04:26,960
path

1440
01:04:24,798 --> 01:04:28,309
I'm sorry not compute to feel lighting

1441
01:04:26,960 --> 01:04:35,059
that's not actually what I want I want

1442
01:04:28,309 --> 01:04:37,160
the peel compiled peeled composite I so

1443
01:04:35,059 --> 01:04:38,630
the compiled peel composite we have to

1444
01:04:37,159 --> 01:04:42,828
make sure that this is actually doing

1445
01:04:38,630 --> 01:04:44,510
something vaguely vaguely correct in

1446
01:04:42,829 --> 01:04:46,250
order to do that the first thing I want

1447
01:04:44,510 --> 01:04:47,960
to do is figure out am I getting are all

1448
01:04:46,250 --> 01:04:50,000
of these samplers actually getting bound

1449
01:04:47,960 --> 01:04:53,690
properly because I have no idea they are

1450
01:04:50,000 --> 01:04:56,150
right I have no idea so the first thing

1451
01:04:53,690 --> 01:04:58,789
I would like to do is turn off any

1452
01:04:56,150 --> 01:05:01,220
computation whatsoever so let's just see

1453
01:04:58,789 --> 01:05:04,309
whether we're even sampling these peel

1454
01:05:01,219 --> 01:05:07,818
values correctly at all

1455
01:05:04,309 --> 01:05:10,700
so okay so that looks right so at least

1456
01:05:07,818 --> 01:05:14,058
we know that the peel compositing is

1457
01:05:10,699 --> 01:05:16,818
working just fine so it's just the other

1458
01:05:14,059 --> 01:05:19,670
part of our sampling that aren't working

1459
01:05:16,818 --> 01:05:21,588
so let's go ahead and get rid of this

1460
01:05:19,670 --> 01:05:23,480
and go up and work on the light peel

1461
01:05:21,588 --> 01:05:25,369
function I'm going to start with the

1462
01:05:23,480 --> 01:05:27,440
simplest possible thing just to make

1463
01:05:25,369 --> 01:05:29,838
sure there isn't anything too stupid

1464
01:05:27,440 --> 01:05:34,278
going on which is I'm just going to have

1465
01:05:29,838 --> 01:05:38,599
a total light set to one so I should see

1466
01:05:34,278 --> 01:05:42,528
the same result here that I saw before

1467
01:05:38,599 --> 01:05:44,240
and I do so that's all we really need to

1468
01:05:42,528 --> 01:05:46,909
know now we we know that we've got

1469
01:05:44,239 --> 01:05:50,689
problems in here so let's start working

1470
01:05:46,909 --> 01:05:53,268
on making those correct so first thing

1471
01:05:50,690 --> 01:05:54,170
I'm going to do is I'm going to go ahead

1472
01:05:53,268 --> 01:06:00,139
and say

1473
01:05:54,170 --> 01:06:03,710
that we will just light based on the the

1474
01:06:00,139 --> 01:06:08,449
normal and we won't try to do any other

1475
01:06:03,710 --> 01:06:14,030
part of the lighting equation right so

1476
01:06:08,449 --> 01:06:17,329
let's take the lighting coefficient out

1477
01:06:14,030 --> 01:06:19,670
of the equation so let's just say we

1478
01:06:17,329 --> 01:06:20,659
have a light C or actually you know we

1479
01:06:19,670 --> 01:06:23,780
can double it up

1480
01:06:20,659 --> 01:06:25,789
we can even say let's assume that the

1481
01:06:23,780 --> 01:06:28,340
light normal is just pointing straight

1482
01:06:25,789 --> 01:06:31,159
down and let's assume that the light is

1483
01:06:28,340 --> 01:06:34,880
fulbright so what we should see here is

1484
01:06:31,159 --> 01:06:38,719
we should see a fairly consistent image

1485
01:06:34,880 --> 01:06:40,519
now that doesn't have any real problems

1486
01:06:38,719 --> 01:06:42,500
to it right it should look roughly

1487
01:06:40,519 --> 01:06:46,489
correct that the same as what we had it

1488
01:06:42,500 --> 01:06:48,949
does right now there is a little bit of

1489
01:06:46,489 --> 01:06:50,149
weirdness there something that doesn't

1490
01:06:48,949 --> 01:06:55,219
make a whole lot sense to me

1491
01:06:50,150 --> 01:06:58,220
the normals for the reflection for the

1492
01:06:55,219 --> 01:07:00,169
peel itself should have been doing some

1493
01:06:58,219 --> 01:07:04,039
kind of attenuation there but they

1494
01:07:00,170 --> 01:07:06,289
didn't and I'm not sure why because

1495
01:07:04,039 --> 01:07:09,349
again eat regardless of whether we're

1496
01:07:06,289 --> 01:07:12,139
doing specular or diffuse we should have

1497
01:07:09,349 --> 01:07:15,889
had oh well you know what if we would

1498
01:07:12,139 --> 01:07:19,309
know but either way the reflectance

1499
01:07:15,889 --> 01:07:21,670
normal is going to vary in this case and

1500
01:07:19,309 --> 01:07:24,769
we should have seen that variance

1501
01:07:21,670 --> 01:07:26,869
occurring but we didn't so what I'd like

1502
01:07:24,769 --> 01:07:29,019
to do is let's actually try something

1503
01:07:26,869 --> 01:07:33,769
else first before we go any further

1504
01:07:29,019 --> 01:07:36,070
let's try taking the result and let's

1505
01:07:33,769 --> 01:07:41,050
just write out what the normal is at all

1506
01:07:36,070 --> 01:07:45,370
right so let's take say the NPL and

1507
01:07:41,050 --> 01:07:45,370
write out the NPL directly

1508
01:07:48,980 --> 01:07:56,130
right so here's our NPL and so this

1509
01:07:53,010 --> 01:08:00,150
obviously is varying which is what we

1510
01:07:56,130 --> 01:08:08,220
expect and which is good right so now

1511
01:08:00,150 --> 01:08:10,139
let's try taking the dot product and

1512
01:08:08,219 --> 01:08:12,569
doing something there so let's suppose

1513
01:08:10,139 --> 01:08:16,500
we took our to light which is just the

1514
01:08:12,570 --> 01:08:18,869
negative of the light end and let's

1515
01:08:16,500 --> 01:08:21,390
inner product that with the ref normal

1516
01:08:18,869 --> 01:08:27,210
that we got back from unpack normal

1517
01:08:21,390 --> 01:08:28,800
three and I guess the other well you

1518
01:08:27,210 --> 01:08:32,810
know what let's do this let's actually

1519
01:08:28,800 --> 01:08:39,989
do ref N and see what that looks like

1520
01:08:32,810 --> 01:08:41,460
maybe that functions busted parse error

1521
01:08:39,989 --> 01:08:52,309
what's that typo there

1522
01:08:41,460 --> 01:08:55,369
yeah so this is there the ref n this

1523
01:08:52,310 --> 01:08:57,810
does not look good

1524
01:08:55,369 --> 01:09:00,569
so I think we've got a problem there

1525
01:08:57,810 --> 01:09:04,800
here's the NPL we called unpack normal

1526
01:09:00,569 --> 01:09:09,119
three on the NPL the NPL should have

1527
01:09:04,800 --> 01:09:13,529
been more sane in that so let's take a

1528
01:09:09,119 --> 01:09:15,409
look at what we're getting here let's

1529
01:09:13,529 --> 01:09:17,489
take a look at unpack normal three and

1530
01:09:15,409 --> 01:09:19,979
see what the issue is

1531
01:09:17,489 --> 01:09:23,279
so unpack normal three calls unpack

1532
01:09:19,979 --> 01:09:29,689
normal to unpack normal two takes that n

1533
01:09:23,279 --> 01:09:29,689
in and does the unpack on it

1534
01:09:30,109 --> 01:09:40,159
that's the pack so this is just a

1535
01:09:35,880 --> 01:09:40,159
straight-up bug on my part

1536
01:09:46,229 --> 01:09:51,759
yeah this is the pack this is just be

1537
01:09:49,600 --> 01:10:04,350
pack normal - I don't know what I was

1538
01:09:51,760 --> 01:10:05,500
thinking this is the unpack so I'm just

1539
01:10:04,350 --> 01:10:06,700
stupid

1540
01:10:05,500 --> 01:10:10,000
it's basically what this boils down to

1541
01:10:06,699 --> 01:10:12,819
so let's try that one more time so in

1542
01:10:10,000 --> 01:10:21,010
this this right here should be the the

1543
01:10:12,819 --> 01:10:25,299
pack from the unpack rather it's that

1544
01:10:21,010 --> 01:10:42,010
code right there and where are we doing

1545
01:10:25,300 --> 01:10:44,289
that nxny or whoops so I think that's

1546
01:10:42,010 --> 01:10:47,590
all we want to do they're sort of the

1547
01:10:44,289 --> 01:10:50,439
nxny and there is no in in here so that

1548
01:10:47,590 --> 01:10:52,630
shouldn't conflict so now we actually

1549
01:10:50,439 --> 01:10:55,919
have the actual unpack normal - which is

1550
01:10:52,630 --> 01:10:59,829
what I actually wanted right

1551
01:10:55,920 --> 01:11:02,579
these actually pack normal - and this is

1552
01:10:59,829 --> 01:11:02,579
unpack novelty

1553
01:11:07,539 --> 01:11:10,930
[Applause]

1554
01:11:12,819 --> 01:11:19,090
so unpack normal - it actually does this

1555
01:11:17,170 --> 01:11:21,940
operation pack normal - does this our

1556
01:11:19,090 --> 01:11:25,170
operation so that should now be more

1557
01:11:21,939 --> 01:11:32,409
what we were expecting

1558
01:11:25,170 --> 01:11:41,829
unclear infer NPL right you are here we

1559
01:11:32,409 --> 01:11:48,449
go cannot go right from float to - can

1560
01:11:41,829 --> 01:11:48,449
picture of floats unpack normal -

1561
01:11:57,369 --> 01:12:07,430
also correct that quite an XY all right

1562
01:12:03,100 --> 01:12:11,900
there we go now we're looking much more

1563
01:12:07,430 --> 01:12:14,270
sane that's more what I wanted to see

1564
01:12:11,899 --> 01:12:17,829
all right so now our normals are looking

1565
01:12:14,270 --> 01:12:22,430
what we looking more like what we want

1566
01:12:17,829 --> 01:12:23,539
so I can take go back to taking the

1567
01:12:22,430 --> 01:12:29,360
lighting Craig in there let's take a

1568
01:12:23,539 --> 01:12:35,060
look okay so let's take a look at what

1569
01:12:29,359 --> 01:12:40,219
happens if we well I guess what I can do

1570
01:12:35,060 --> 01:12:42,620
now is let's see what we're looking at

1571
01:12:40,220 --> 01:12:45,170
for the actual equation now with the

1572
01:12:42,619 --> 01:12:49,609
light normal and the light color like

1573
01:12:45,170 --> 01:12:52,010
locked in so that still doesn't seem to

1574
01:12:49,609 --> 01:12:55,219
vary by the normal at all which is a

1575
01:12:52,010 --> 01:12:56,930
little weird so let's keep going let's

1576
01:12:55,220 --> 01:12:59,539
take the result and we'll make the

1577
01:12:56,930 --> 01:13:03,560
result be equal to the diffused inner

1578
01:12:59,539 --> 01:13:06,859
product and what we should see here is

1579
01:13:03,560 --> 01:13:18,680
that the you know when things are tilted

1580
01:13:06,859 --> 01:13:22,039
we should see when things are tilted we

1581
01:13:18,680 --> 01:13:28,869
should see them have a difference right

1582
01:13:22,039 --> 01:13:28,869
and that looks roughly correct

1583
01:13:28,909 --> 01:13:32,039
[Music]

1584
01:13:37,600 --> 01:13:40,650
at least I think it does

1585
01:13:59,889 --> 01:14:05,029
I'm really happy with it at least so

1586
01:14:03,469 --> 01:14:06,618
let's take a look at what happens here

1587
01:14:05,029 --> 01:14:21,889
we also I guess have to look at the

1588
01:14:06,618 --> 01:14:26,598
specular and remember the specular has

1589
01:14:21,889 --> 01:14:28,429
been raised to a power as well alright

1590
01:14:26,599 --> 01:14:30,800
well that answers that question so it's

1591
01:14:28,429 --> 01:14:32,750
the second er we probably have the

1592
01:14:30,800 --> 01:14:36,230
diffuse coefficient set to zero right

1593
01:14:32,750 --> 01:14:40,670
now because lt0 is not such anything in

1594
01:14:36,229 --> 01:14:42,768
particular we could reverse these and it

1595
01:14:40,670 --> 01:14:46,868
has the diffuse but for now let's let's

1596
01:14:42,769 --> 01:14:50,269
just take a look at why the specular is

1597
01:14:46,868 --> 01:14:51,500
sort of in the state to depend what

1598
01:14:50,269 --> 01:14:54,289
happens if I don't raise it to the power

1599
01:14:51,500 --> 01:14:57,099
if it's just the power part yeah so it's

1600
01:14:54,288 --> 01:15:00,800
just the power part that's that's

1601
01:14:57,099 --> 01:15:03,559
operating in an unusual fashion I'm not

1602
01:15:00,800 --> 01:15:07,630
sure why that would be the case

1603
01:15:03,559 --> 01:15:13,760
probably because maybe specular power is

1604
01:15:07,630 --> 01:15:16,578
zero in this case so we probably want

1605
01:15:13,760 --> 01:15:19,280
specular power as W is going to range

1606
01:15:16,578 --> 01:15:21,198
from zero to one so we need the specular

1607
01:15:19,279 --> 01:15:23,149
power to mean something else you

1608
01:15:21,198 --> 01:15:27,138
probably want the specular power to be

1609
01:15:23,149 --> 01:15:34,308
something like you know oh well you know

1610
01:15:27,139 --> 01:15:36,469
it's it's anything from 1 up to 16 or

1611
01:15:34,309 --> 01:15:49,369
something like this right or in this

1612
01:15:36,469 --> 01:15:51,050
case 17 let's try 16 right and in this

1613
01:15:49,368 --> 01:15:52,069
case 2 we sort of have a situation where

1614
01:15:51,050 --> 01:15:53,210
I don't even know why it would bother

1615
01:15:52,069 --> 01:15:56,538
with these because if you want the

1616
01:15:53,210 --> 01:15:59,359
surface to be diffuse you could just set

1617
01:15:56,538 --> 01:16:01,880
the specular power to zero and get that

1618
01:15:59,359 --> 01:16:06,819
oh no you could because it's still

1619
01:16:01,880 --> 01:16:09,500
directional again right um that's fine

1620
01:16:06,819 --> 01:16:11,838
all right so now I think we're at least

1621
01:16:09,500 --> 01:16:17,599
closing in on something

1622
01:16:11,838 --> 01:16:19,998
semi saying barely so here we go

1623
01:16:17,599 --> 01:16:24,139
so now at least we're getting you know

1624
01:16:19,998 --> 01:16:26,958
quote-unquote lighting from a fake light

1625
01:16:24,139 --> 01:16:29,179
source not any real light source so

1626
01:16:26,958 --> 01:16:33,948
let's go ahead and take the light color

1627
01:16:29,179 --> 01:16:37,069
out of out of it and see what we get

1628
01:16:33,948 --> 01:16:41,779
here by having the the regular light

1629
01:16:37,069 --> 01:16:43,999
color and we get nothing so that is less

1630
01:16:41,779 --> 01:16:47,509
than inspiring to say that to say the

1631
01:16:43,998 --> 01:16:49,368
least and I'm not sure exactly why we're

1632
01:16:47,510 --> 01:16:58,569
not getting anything there we're

1633
01:16:49,368 --> 01:16:58,568
sampling from the emission I guess

1634
01:16:58,599 --> 01:17:03,378
here's a question have I made sure I

1635
01:17:01,760 --> 01:17:08,769
actually computed those buffers yet

1636
01:17:03,378 --> 01:17:11,809
because I may not have ah yeah so

1637
01:17:08,769 --> 01:17:14,899
obviously we have to compute the light

1638
01:17:11,809 --> 01:17:18,229
transport that has to happen and we

1639
01:17:14,899 --> 01:17:19,939
weren't doing that so we can get rid of

1640
01:17:18,229 --> 01:17:21,859
fake seed lighting now because that's

1641
01:17:19,939 --> 01:17:22,389
not actually something that needs to

1642
01:17:21,859 --> 01:17:30,649
occur

1643
01:17:22,389 --> 01:17:36,050
so we can get rid of that okay I guess

1644
01:17:30,649 --> 01:17:37,909
it's just just that like so and compute

1645
01:17:36,050 --> 01:17:39,859
light transport just needs to happen

1646
01:17:37,908 --> 01:17:43,549
higher up the pipeline right so before

1647
01:17:39,859 --> 01:17:48,379
we do anything further when we're going

1648
01:17:43,550 --> 01:17:50,989
to do this result here we need to have

1649
01:17:48,378 --> 01:17:54,408
computed the lighting prior to this

1650
01:17:50,988 --> 01:17:56,148
operation you know I'm saying so like

1651
01:17:54,408 --> 01:18:00,228
right here before anything else happens

1652
01:17:56,149 --> 01:18:06,429
the light transport has to be handled at

1653
01:18:00,229 --> 01:18:06,429
that time all right

1654
01:18:08,829 --> 01:18:18,260
so now you can see we at least have some

1655
01:18:12,890 --> 01:18:19,640
of you know we have something happening

1656
01:18:18,260 --> 01:18:23,060
right

1657
01:18:19,640 --> 01:18:30,140
but it's not obviously anything that we

1658
01:18:23,060 --> 01:18:31,880
would want to choose yet and I guess one

1659
01:18:30,140 --> 01:18:34,760
of the other problems we have with this

1660
01:18:31,880 --> 01:18:40,880
just looking at it is the lighting

1661
01:18:34,760 --> 01:18:43,159
artifacts come through in like the in

1662
01:18:40,880 --> 01:18:49,279
the actual final image which is a little

1663
01:18:43,159 --> 01:18:50,329
bit of a bummer as well so I'd have to

1664
01:18:49,279 --> 01:18:51,679
think about how we're going to address

1665
01:18:50,329 --> 01:18:54,739
that that's obviously going to be

1666
01:18:51,680 --> 01:18:56,840
something we need to figure out but

1667
01:18:54,739 --> 01:18:58,880
anyway let's go ahead and finish this

1668
01:18:56,840 --> 01:19:00,890
off by taking the light normal as well

1669
01:18:58,880 --> 01:19:02,539
which I don't think is going to really

1670
01:19:00,890 --> 01:19:03,980
do anything but we might as well get to

1671
01:19:02,539 --> 01:19:05,359
the point like I said where everything

1672
01:19:03,979 --> 01:19:07,549
is sort of floating improperly and then

1673
01:19:05,359 --> 01:19:08,899
we can talk about how to start improving

1674
01:19:07,550 --> 01:19:13,640
this to make it look like something we

1675
01:19:08,899 --> 01:19:16,670
actually want so let's see here on steel

1676
01:19:13,640 --> 01:19:18,200
composite when we come through here I'm

1677
01:19:16,670 --> 01:19:18,800
not going to nerf the light normal

1678
01:19:18,199 --> 01:19:21,260
anymore

1679
01:19:18,800 --> 01:19:23,960
so will will actually have the light

1680
01:19:21,260 --> 01:19:28,750
normal be meaningful or at least semi

1681
01:19:23,960 --> 01:19:32,980
meaningful that does not look reassuring

1682
01:19:28,750 --> 01:19:32,979
what is wrong with our light normal

1683
01:19:36,538 --> 01:19:41,788
oh well part of the problem with our

1684
01:19:39,179 --> 01:19:43,469
light normal yeah at this point is that

1685
01:19:41,788 --> 01:19:44,550
the lighting calculation just doesn't do

1686
01:19:43,469 --> 01:19:46,889
anything interesting that the direction

1687
01:19:44,550 --> 01:19:48,538
the light is actually pointing so now

1688
01:19:46,889 --> 01:19:51,510
that I think about that that's really

1689
01:19:48,538 --> 01:19:53,670
not super useful either right because

1690
01:19:51,510 --> 01:19:58,920
really the light is always going to be

1691
01:19:53,670 --> 01:20:03,090
coming in from for any given pixel the

1692
01:19:58,920 --> 01:20:07,590
normals going to be the same because we

1693
01:20:03,090 --> 01:20:08,969
don't currently wait the normals when we

1694
01:20:07,590 --> 01:20:10,500
average them together so that's not

1695
01:20:08,969 --> 01:20:12,899
going to be helpful at all right so

1696
01:20:10,500 --> 01:20:18,630
that's that is a non that is a non

1697
01:20:12,899 --> 01:20:20,549
useful thing at the moment yeah so we

1698
01:20:18,630 --> 01:20:24,599
have to kind of nurse this if we want

1699
01:20:20,550 --> 01:20:26,630
anything to happen there does that make

1700
01:20:24,599 --> 01:20:26,630
sense

1701
01:20:31,930 --> 01:20:35,109
[Applause]

1702
01:20:37,039 --> 01:20:43,590
all right so but we did do what we

1703
01:20:41,520 --> 01:20:49,530
wanted to do which is to say that we

1704
01:20:43,590 --> 01:20:52,110
have a way of now mapping the letting

1705
01:20:49,529 --> 01:20:57,539
results out into the actual game render

1706
01:20:52,109 --> 01:21:00,269
we just don't have a way of doing it in

1707
01:20:57,539 --> 01:21:02,519
anything that looks nice right so our

1708
01:21:00,270 --> 01:21:04,940
next job is to sort of start to try and

1709
01:21:02,520 --> 01:21:08,699
improve what we're actually computing

1710
01:21:04,939 --> 01:21:10,049
for lighting in this case so what we

1711
01:21:08,698 --> 01:21:11,638
want to do now is have a way we can

1712
01:21:10,050 --> 01:21:12,750
switch to our lighting buffers so that

1713
01:21:11,639 --> 01:21:17,429
we can see what they're actually

1714
01:21:12,750 --> 01:21:20,279
computing at any given time and a in

1715
01:21:17,429 --> 01:21:23,699
order to do that let's go ahead and make

1716
01:21:20,279 --> 01:21:26,729
it so that the code at the end here

1717
01:21:23,698 --> 01:21:31,669
which sort of copies things to the frame

1718
01:21:26,729 --> 01:21:39,079
buffer let's go ahead and make that be

1719
01:21:31,670 --> 01:21:45,989
predicated on the debug light buffer

1720
01:21:39,079 --> 01:21:49,408
text index so the debug life by protect

1721
01:21:45,988 --> 01:21:53,158
index thing we just want there to be in

1722
01:21:49,408 --> 01:21:57,809
the win32 where we where we sort of have

1723
01:21:53,158 --> 01:22:04,069
this light buffer tech index up and down

1724
01:21:57,810 --> 01:22:11,940
bit I don't really know at the moment

1725
01:22:04,069 --> 01:22:14,579
how we're restricting that oh here we

1726
01:22:11,939 --> 01:22:16,259
are this is the clamp right here so what

1727
01:22:14,579 --> 01:22:19,559
I'd like to do there is I'd like to say

1728
01:22:16,260 --> 01:22:22,289
okay get the OpenGL debug light buffer

1729
01:22:19,560 --> 01:22:24,360
index is greater than zero then we'll go

1730
01:22:22,289 --> 01:22:28,908
through this path and when we go through

1731
01:22:24,359 --> 01:22:28,908
this path we'll clamp it to

1732
01:22:34,020 --> 01:22:42,030
I guess it's really honestly this one

1733
01:22:39,960 --> 01:22:43,949
it's the it's the debug light buffer

1734
01:22:42,029 --> 01:22:48,300
text index is really the what we want if

1735
01:22:43,949 --> 01:22:49,590
that's greater than zero then yet then

1736
01:22:48,300 --> 01:22:51,119
what we will do is we'll come through

1737
01:22:49,590 --> 01:22:53,039
here we'll clamp these and we'll say

1738
01:22:51,119 --> 01:22:56,159
that this goes from zero to four instead

1739
01:22:53,039 --> 01:23:00,060
of from zero to three and then when we

1740
01:22:56,159 --> 01:23:03,109
actually use the light buffer tech index

1741
01:23:00,060 --> 01:23:06,539
here we will just subtract one from it

1742
01:23:03,109 --> 01:23:13,439
so that zero now means we're not viewing

1743
01:23:06,539 --> 01:23:14,789
any of them so I think then at that

1744
01:23:13,439 --> 01:23:17,239
point what we can do

1745
01:23:14,789 --> 01:23:17,239
oops

1746
01:23:37,038 --> 01:23:43,679
so the problem here is the clamp

1747
01:23:39,748 --> 01:23:47,090
if the clamp we need to do the clamp

1748
01:23:43,679 --> 01:23:48,269
first because if it's out of range value

1749
01:23:47,090 --> 01:23:49,650
yeah

1750
01:23:48,269 --> 01:23:54,179
then we need to make sure that we don't

1751
01:23:49,649 --> 01:23:57,268
get into that routine but why is it

1752
01:23:54,179 --> 01:23:59,489
saying it's an invalid enum how do we we

1753
01:23:57,269 --> 01:24:02,130
shouldn't ever be able to pass anything

1754
01:23:59,488 --> 01:24:04,618
that we weren't passing before because

1755
01:24:02,130 --> 01:24:08,400
debug like buffer tech index in this

1756
01:24:04,618 --> 01:24:10,618
case it has to be greater than zero to

1757
01:24:08,399 --> 01:24:12,268
get in here to begin with so the fact

1758
01:24:10,618 --> 01:24:13,978
that I'm subtracting one from it should

1759
01:24:12,269 --> 01:24:18,389
not produce any values that it wasn't

1760
01:24:13,979 --> 01:24:23,130
previously producing I should think and

1761
01:24:18,389 --> 01:24:26,179
then at the end the GL REE buffer call

1762
01:24:23,130 --> 01:24:29,090
of GL or attachment zero should never

1763
01:24:26,179 --> 01:24:31,920
like that should always be legal so

1764
01:24:29,090 --> 01:24:38,869
where are we when this happens what's

1765
01:24:31,920 --> 01:24:38,868
what's happening here it's this one

1766
01:24:42,630 --> 01:24:56,190
I take it let's double check so we come

1767
01:24:54,149 --> 01:25:04,679
in here yes so it's actually just this

1768
01:24:56,189 --> 01:25:10,979
call the GL Reid buffer call so I guess

1769
01:25:04,680 --> 01:25:13,200
we just can't call that if we haven't

1770
01:25:10,979 --> 01:25:16,289
downed a frame buffer yet I don't know

1771
01:25:13,199 --> 01:25:18,809
I'm just I thought we already were doing

1772
01:25:16,289 --> 01:25:21,899
that but I guess not

1773
01:25:18,810 --> 01:25:23,820
so here we can switch between our

1774
01:25:21,899 --> 01:25:36,779
Lighting's I'm going to switch which one

1775
01:25:23,819 --> 01:25:39,809
is shifted and which ones not so now

1776
01:25:36,779 --> 01:25:41,309
shift plus and minus axis goes up the

1777
01:25:39,810 --> 01:25:44,940
levels of detail but here you can see

1778
01:25:41,310 --> 01:25:47,490
the different buffers now right so

1779
01:25:44,939 --> 01:25:51,589
there's like the lighting buffer and

1780
01:25:47,489 --> 01:25:56,819
there's the final buffer that we produce

1781
01:25:51,590 --> 01:26:02,699
and you can see in here like I don't

1782
01:25:56,819 --> 01:26:04,739
know what is happening with that that

1783
01:26:02,699 --> 01:26:07,859
showing through there that that's sort

1784
01:26:04,739 --> 01:26:11,069
of artifacting I can't quite tell

1785
01:26:07,859 --> 01:26:13,969
exactly what is causing that that which

1786
01:26:11,069 --> 01:26:13,969
is a little concerning

1787
01:26:23,569 --> 01:26:29,209
my guess is it's an overflow issue but I

1788
01:26:26,448 --> 01:26:32,028
just now I think I can't really think of

1789
01:26:29,208 --> 01:26:34,010
how it is an overflow issue because in

1790
01:26:32,029 --> 01:26:39,859
theory the peel composite is always

1791
01:26:34,010 --> 01:26:41,329
clamping everything so I'm not sure how

1792
01:26:39,859 --> 01:26:46,159
it could actually do that unless the

1793
01:26:41,328 --> 01:26:48,498
diffuse plus specular light equation

1794
01:26:46,158 --> 01:26:54,918
actually blows out to higher than it

1795
01:26:48,498 --> 01:26:56,958
should we could try just to see but I

1796
01:26:54,918 --> 01:27:03,338
don't I'm not optimistic that that has

1797
01:26:56,958 --> 01:27:03,338
anything to do with it yeah it doesn't

1798
01:27:04,208 --> 01:27:08,918
so in theory let's just verify that this

1799
01:27:07,338 --> 01:27:13,849
is correct because I want to make sure

1800
01:27:08,918 --> 01:27:18,889
so in theory if I was cannot call any of

1801
01:27:13,849 --> 01:27:21,588
the lighting code I should get a

1802
01:27:18,889 --> 01:27:23,599
correctly composited pretty image right

1803
01:27:21,588 --> 01:27:25,458
with no none of those artifacts and I do

1804
01:27:23,599 --> 01:27:27,949
I just want to make sure it's strictly

1805
01:27:25,458 --> 01:27:30,288
in the lighting and it looks like it is

1806
01:27:27,948 --> 01:27:31,698
so that's all I really need to know and

1807
01:27:30,288 --> 01:27:33,198
then we're okay moving forward because

1808
01:27:31,698 --> 01:27:40,518
the lighting has is the thing that we're

1809
01:27:33,198 --> 01:27:42,888
working on anyway right however I do see

1810
01:27:40,519 --> 01:27:44,418
some Sparkle ease like I see some

1811
01:27:42,889 --> 01:27:47,719
Sparkle ease in here that I don't

1812
01:27:44,418 --> 01:27:50,059
remember seeing much of in the past that

1813
01:27:47,719 --> 01:27:52,689
might just be because of the down

1814
01:27:50,059 --> 01:27:52,689
sampling

1815
01:28:15,250 --> 01:28:20,969
but anyway so as long as I know that all

1816
01:28:19,000 --> 01:28:22,779
this stuff is based on the the

1817
01:28:20,969 --> 01:28:23,980
delighting then that's okay because

1818
01:28:22,779 --> 01:28:25,329
that's the thing that we're working on

1819
01:28:23,979 --> 01:28:28,178
anyway so I don't mind too much about

1820
01:28:25,329 --> 01:28:30,279
that so what we need to do now is take a

1821
01:28:28,179 --> 01:28:33,969
look at this equation and see right with

1822
01:28:30,279 --> 01:28:37,800
what we want a sample in this case so a

1823
01:28:33,969 --> 01:28:39,730
couple things come to mind here right

1824
01:28:37,800 --> 01:28:41,800
when we take a look at what we're

1825
01:28:39,729 --> 01:28:45,428
sampling for something like the specular

1826
01:28:41,800 --> 01:28:52,500
coefficient the specular coefficient

1827
01:28:45,429 --> 01:28:55,750
really wants to sample directly from the

1828
01:28:52,500 --> 01:28:59,409
like the actual reflection to a certain

1829
01:28:55,750 --> 01:29:02,020
extent right and the degree to which

1830
01:28:59,409 --> 01:29:06,698
it's going to sample the width sort of

1831
01:29:02,020 --> 01:29:11,500
that sampling is going to be based on

1832
01:29:06,698 --> 01:29:12,939
the power so let's just talk about that

1833
01:29:11,500 --> 01:29:15,640
a little bit here in terms of what we

1834
01:29:12,939 --> 01:29:17,919
want to have going forwards also I don't

1835
01:29:15,640 --> 01:29:19,210
remember what time do will we be ending

1836
01:29:17,920 --> 01:29:21,670
it like 15 minutes

1837
01:29:19,210 --> 01:29:23,140
is that correct I want to say we'll be

1838
01:29:21,670 --> 01:29:25,119
ending and picking this then this thing

1839
01:29:23,140 --> 01:29:33,340
I have a way to tell me that you guys

1840
01:29:25,119 --> 01:29:40,779
have fancy stuff that you've made 31

1841
01:29:33,340 --> 01:29:46,150
minutes until Q&amp;A so I actually have

1842
01:29:40,779 --> 01:29:48,639
half an hour okay good all right so what

1843
01:29:46,149 --> 01:29:53,349
I was trying to say there was I so in

1844
01:29:48,640 --> 01:29:56,110
terms of diffuse mapping we want to

1845
01:29:53,350 --> 01:30:01,630
sample the whole hemisphere of incoming

1846
01:29:56,109 --> 01:30:03,819
light right and the only thing we really

1847
01:30:01,630 --> 01:30:06,279
need to do to that hemisphere is we need

1848
01:30:03,819 --> 01:30:13,000
to attenuate it based on the facing

1849
01:30:06,279 --> 01:30:15,429
angle so like you know the amount of

1850
01:30:13,000 --> 01:30:17,170
light we get from something here in

1851
01:30:15,429 --> 01:30:19,210
terms of its ability to diffuse outwards

1852
01:30:17,170 --> 01:30:20,980
is going to be modulated by the cosine

1853
01:30:19,210 --> 01:30:24,810
of the angle which diminishes is close

1854
01:30:20,979 --> 01:30:24,809
to zero at this point right

1855
01:30:25,000 --> 01:30:30,069
but we are trying to take in all of this

1856
01:30:27,460 --> 01:30:33,789
nonetheless so even though things out on

1857
01:30:30,069 --> 01:30:34,659
the very fringe contribute less light

1858
01:30:33,789 --> 01:30:37,510
than they would otherwise

1859
01:30:34,659 --> 01:30:40,359
we definitely still want a sample pretty

1860
01:30:37,510 --> 01:30:41,619
much everything whereas a specular we're

1861
01:30:40,359 --> 01:30:44,380
talking about something where we're

1862
01:30:41,619 --> 01:30:51,309
sampling only within a cone that's kind

1863
01:30:44,380 --> 01:30:54,400
of going out into that into that

1864
01:30:51,310 --> 01:30:56,200
learning Hemisphere so in the best of

1865
01:30:54,399 --> 01:30:59,250
all possible worlds what we would be

1866
01:30:56,199 --> 01:31:02,559
able to do is we'd be able to sample

1867
01:30:59,250 --> 01:31:04,779
different resolutions of stuff so what

1868
01:31:02,560 --> 01:31:06,400
we'd want to sample in this case is we'd

1869
01:31:04,779 --> 01:31:09,969
want to be able to take the direction

1870
01:31:06,399 --> 01:31:12,609
that we want to look in and we'd want to

1871
01:31:09,970 --> 01:31:14,170
be able to take a sample that was all of

1872
01:31:12,609 --> 01:31:16,329
the incoming light across the whole

1873
01:31:14,170 --> 01:31:18,789
Hemisphere and somehow modulate it right

1874
01:31:16,329 --> 01:31:20,350
by the cosine incidence term which you

1875
01:31:18,789 --> 01:31:26,800
know maybe that's pie in the sky forget

1876
01:31:20,350 --> 01:31:31,270
it whatever but that's what we would

1877
01:31:26,800 --> 01:31:35,020
want in an ideal world so when we go to

1878
01:31:31,270 --> 01:31:38,470
do something like this we want to take a

1879
01:31:35,020 --> 01:31:40,150
very average sample and the tricky part

1880
01:31:38,470 --> 01:31:41,860
about this the reason that it's so

1881
01:31:40,149 --> 01:31:44,859
annoying to try and figure out how to do

1882
01:31:41,859 --> 01:31:46,929
it is in at every location that we might

1883
01:31:44,859 --> 01:31:48,759
want to sample it we then are therefore

1884
01:31:46,930 --> 01:31:52,210
responsible for coming up with some

1885
01:31:48,760 --> 01:31:59,650
measure of how the light is flowing

1886
01:31:52,210 --> 01:32:04,779
through in all directions right that's

1887
01:31:59,649 --> 01:32:07,119
the tricky part of the problem so we end

1888
01:32:04,779 --> 01:32:09,639
up it yet in a situation where we are

1889
01:32:07,119 --> 01:32:11,289
trying to find a lighting direction at

1890
01:32:09,640 --> 01:32:12,850
any given point we're trying to find

1891
01:32:11,289 --> 01:32:14,920
like which directions the light is

1892
01:32:12,850 --> 01:32:17,500
coming from and how much light is coming

1893
01:32:14,920 --> 01:32:19,239
from each of those directions and we

1894
01:32:17,500 --> 01:32:20,859
don't really have like I said we haven't

1895
01:32:19,239 --> 01:32:21,939
really quite cracked the problem of how

1896
01:32:20,859 --> 01:32:23,799
we're going to do that I kind of played

1897
01:32:21,939 --> 01:32:25,210
around with some ways that we might do

1898
01:32:23,800 --> 01:32:29,710
it but we don't really have it quite yet

1899
01:32:25,210 --> 01:32:31,630
and and furthermore for the specular we

1900
01:32:29,710 --> 01:32:34,630
want to do a similar query but we want

1901
01:32:31,630 --> 01:32:35,409
to restrict the range so you know if you

1902
01:32:34,630 --> 01:32:38,460
imagined

1903
01:32:35,409 --> 01:32:38,460
we had a cube map

1904
01:32:40,590 --> 01:32:45,610
at every pixel right like magically we

1905
01:32:44,198 --> 01:32:49,000
just had a cube map at every pixel

1906
01:32:45,609 --> 01:32:52,479
somehow then what we would be doing is

1907
01:32:49,000 --> 01:32:56,969
for this case for the specular case we

1908
01:32:52,479 --> 01:32:59,529
would take the N Smith level right

1909
01:32:56,969 --> 01:33:02,760
whatever the int mist level of that cube

1910
01:32:59,529 --> 01:33:05,019
map was averaged down down down down we

1911
01:33:02,760 --> 01:33:07,300
would take the intimus level of that

1912
01:33:05,020 --> 01:33:09,730
cube map and we sample it and the N

1913
01:33:07,300 --> 01:33:12,789
would be based on the specular power so

1914
01:33:09,729 --> 01:33:15,189
the wider the specular power the further

1915
01:33:12,789 --> 01:33:17,560
end we would take and for the diffuse we

1916
01:33:15,189 --> 01:33:19,178
would take the final MIT map the one

1917
01:33:17,560 --> 01:33:24,610
where each of these is basically just a

1918
01:33:19,179 --> 01:33:31,020
solid color right and that's effectively

1919
01:33:24,609 --> 01:33:33,908
what we would do and I don't really

1920
01:33:31,020 --> 01:33:38,560
quite yet know how we're going to get to

1921
01:33:33,908 --> 01:33:40,479
that level of lighting simulation what I

1922
01:33:38,560 --> 01:33:43,090
do know is that we need to start

1923
01:33:40,479 --> 01:33:44,559
treating our inner light simulation we

1924
01:33:43,090 --> 01:33:46,719
need to start treating the direction the

1925
01:33:44,560 --> 01:33:49,179
light is coming from as something that

1926
01:33:46,719 --> 01:33:51,689
we're properly aware of because right

1927
01:33:49,179 --> 01:33:54,190
now we're really not quite doing that

1928
01:33:51,689 --> 01:33:56,859
we're just kind of averaging things

1929
01:33:54,189 --> 01:33:59,908
together in a haphazard way and we're

1930
01:33:56,859 --> 01:34:02,589
not even weighting the average by the

1931
01:33:59,908 --> 01:34:07,988
contribution the immittance the e

1932
01:34:02,590 --> 01:34:10,630
mittens at all so the first thing that I

1933
01:34:07,988 --> 01:34:14,069
would probably say is let's let's just

1934
01:34:10,630 --> 01:34:15,940
take a brief look at how that would work

1935
01:34:14,069 --> 01:34:18,698
I'm just going to start playing with

1936
01:34:15,939 --> 01:34:20,979
this again I have no plan here I'm

1937
01:34:18,698 --> 01:34:22,928
literally just experimenting to see

1938
01:34:20,979 --> 01:34:26,379
where we can go with this I don't have

1939
01:34:22,929 --> 01:34:32,100
any plan whatsoever so let's let's look

1940
01:34:26,380 --> 01:34:32,100
at the the multi grid up

1941
01:34:39,498 --> 01:34:43,158
so here you can see how we're doing

1942
01:34:41,059 --> 01:34:44,989
multi light up the way that multi light

1943
01:34:43,158 --> 01:34:49,399
up works is it just takes a texture

1944
01:34:44,988 --> 01:34:51,799
sample from each of the locations and by

1945
01:34:49,399 --> 01:34:54,078
Linear's them together right so this

1946
01:34:51,800 --> 01:34:57,199
texture call right here will take the

1947
01:34:54,078 --> 01:35:01,099
four neighboring textiles from whichever

1948
01:34:57,198 --> 01:35:03,198
sample it is and it will it'll just go

1949
01:35:01,099 --> 01:35:06,739
ahead and and give you back that value

1950
01:35:03,198 --> 01:35:08,988
right now that isn't really what we want

1951
01:35:06,738 --> 01:35:10,578
to do in this case right what we want to

1952
01:35:08,988 --> 01:35:13,098
do is something smarter here where we're

1953
01:35:10,578 --> 01:35:15,319
actually talking a little bit more about

1954
01:35:13,099 --> 01:35:18,980
how the admittance is flowing through

1955
01:35:15,319 --> 01:35:21,529
and so we have a couple different ways

1956
01:35:18,979 --> 01:35:23,928
we could do this like I was saying for

1957
01:35:21,529 --> 01:35:26,809
and I'm not sure which of them is really

1958
01:35:23,929 --> 01:35:29,949
the right way to go I kind of started

1959
01:35:26,809 --> 01:35:34,070
down the route of doing the sort of

1960
01:35:29,948 --> 01:35:37,518
imaginary occlude imaginary like disks

1961
01:35:34,069 --> 01:35:41,929
that reflect and shadow but I just don't

1962
01:35:37,519 --> 01:35:46,420
know if that's a plausible way to

1963
01:35:41,929 --> 01:35:46,420
continue through it especially because

1964
01:35:48,158 --> 01:35:58,038
we sort of don't have a very 3d scene

1965
01:35:52,849 --> 01:36:00,769
and we have that sealing problem where

1966
01:35:58,038 --> 01:36:03,800
the reflect we would need at least a

1967
01:36:00,769 --> 01:36:05,570
sandwich layer of things to reflect down

1968
01:36:03,800 --> 01:36:07,429
because otherwise we just have a ground

1969
01:36:05,569 --> 01:36:09,259
and no light will ever bounce around so

1970
01:36:07,429 --> 01:36:12,859
that it can't bounce off of anything

1971
01:36:09,260 --> 01:36:16,489
right so we kind of have a nasty problem

1972
01:36:12,859 --> 01:36:18,859
in that sense and I don't know so I feel

1973
01:36:16,488 --> 01:36:20,839
like we need something happier we need

1974
01:36:18,859 --> 01:36:25,939
something that treats the light more

1975
01:36:20,840 --> 01:36:28,219
like a fluid than a then real light in a

1976
01:36:25,939 --> 01:36:32,268
way so that it kind of just flows out

1977
01:36:28,219 --> 01:36:34,578
from things and we just want to kind of

1978
01:36:32,269 --> 01:36:37,099
stop it from flowing in areas where

1979
01:36:34,578 --> 01:36:39,109
there's tall stuff and let it flow in

1980
01:36:37,099 --> 01:36:41,840
areas where there's not or something

1981
01:36:39,109 --> 01:36:45,308
like this and I'm just not sure exactly

1982
01:36:41,840 --> 01:36:48,360
what that wants to look like but what I

1983
01:36:45,309 --> 01:36:52,800
would say here is

1984
01:36:48,359 --> 01:36:55,529
that we obviously want I think to start

1985
01:36:52,800 --> 01:36:57,779
having the downsample be more controlled

1986
01:36:55,529 --> 01:37:03,079
than this and the problem with doing

1987
01:36:57,779 --> 01:37:03,079
that is right now we are not really

1988
01:37:05,868 --> 01:37:15,599
we're not power of two at all and that's

1989
01:37:14,639 --> 01:37:18,329
not great

1990
01:37:15,600 --> 01:37:20,159
so I don't know if maybe we should try

1991
01:37:18,329 --> 01:37:21,779
to force to a power of two I'm not sure

1992
01:37:20,158 --> 01:37:22,170
how effectively we could do that right

1993
01:37:21,779 --> 01:37:23,759
now

1994
01:37:22,170 --> 01:37:25,770
let's take a look at what it would take

1995
01:37:23,760 --> 01:37:27,659
to do that and then see if we can do a

1996
01:37:25,770 --> 01:37:31,290
straight power of two down sample so we

1997
01:37:27,658 --> 01:37:33,448
can reliably just pick of four and and

1998
01:37:31,289 --> 01:37:35,069
move move down by forest although we may

1999
01:37:33,448 --> 01:37:37,919
need to do something a little fancier

2000
01:37:35,069 --> 01:37:41,789
but I'm just curious so if the texture

2001
01:37:37,920 --> 01:37:53,130
with and the texture height for our

2002
01:37:41,789 --> 01:37:54,810
light buffers were not we're not the

2003
01:37:53,130 --> 01:37:57,868
base on the render with the render

2004
01:37:54,810 --> 01:37:59,940
height in this case what would it look

2005
01:37:57,868 --> 01:38:02,670
like there so let's suppose that what we

2006
01:37:59,939 --> 01:38:06,479
did instead was say okay we're going to

2007
01:38:02,670 --> 01:38:10,679
take the next power of two down so we're

2008
01:38:06,479 --> 01:38:13,919
going to say that we we want to

2009
01:38:10,679 --> 01:38:15,630
basically bits can thing and take

2010
01:38:13,920 --> 01:38:21,889
whatever the highest bit is that set

2011
01:38:15,630 --> 01:38:21,889
that's with all zeros is going to be the

2012
01:38:23,630 --> 01:38:28,969
that's going to be the the accuracy with

2013
01:38:27,389 --> 01:38:31,440
which we're computing the lighting so

2014
01:38:28,969 --> 01:38:40,819
taking a look at that let's say we did

2015
01:38:31,439 --> 01:38:40,819
that we had a bit skin

2016
01:38:45,679 --> 01:39:00,748
maybe not so we do we have fine least

2017
01:38:55,408 --> 01:39:08,578
significant bits that I don't really

2018
01:39:00,748 --> 01:39:22,918
remember why we were using it what did

2019
01:39:08,578 --> 01:39:24,359
we use this for ah okay so we just

2020
01:39:22,918 --> 01:39:28,168
wanted to fight when we were looking at

2021
01:39:24,359 --> 01:39:30,299
the thing for reading in a BMP that's

2022
01:39:28,168 --> 01:39:32,219
that's what we were doing all right well

2023
01:39:30,300 --> 01:39:35,189
there you go

2024
01:39:32,219 --> 01:39:38,069
so what we really want to do is do the

2025
01:39:35,189 --> 01:39:41,149
bit the opposite of this right so you

2026
01:39:38,069 --> 01:39:41,148
want to do something like this

2027
01:39:42,130 --> 01:39:46,920
[Applause]

2028
01:39:50,810 --> 01:39:53,989
[Applause]

2029
01:40:13,659 --> 01:40:18,210
I'm assuming there is a bit scan back

2030
01:40:18,550 --> 01:40:25,440
[Applause]

2031
01:40:21,180 --> 01:40:31,150
and here I'd guess it eventually so

2032
01:40:25,439 --> 01:40:34,059
there we go I believe this will work

2033
01:40:31,149 --> 01:40:36,689
correctly testicle 31 well you know what

2034
01:40:34,060 --> 01:40:36,690
looks good this way

2035
01:40:56,170 --> 01:41:02,420
all right so assuming that we can call

2036
01:41:00,050 --> 01:41:05,860
this now we should be able to do what I

2037
01:41:02,420 --> 01:41:10,819
wanted to do which is find the power to

2038
01:41:05,859 --> 01:41:13,279
that's you know and the most related

2039
01:41:10,819 --> 01:41:15,109
here and instead of setting the light

2040
01:41:13,279 --> 01:41:17,090
buffer count at the outset we could just

2041
01:41:15,109 --> 01:41:19,309
set the light buffer count based on that

2042
01:41:17,090 --> 01:41:21,940
so what I could say is and in fact let's

2043
01:41:19,310 --> 01:41:24,200
do that first let's not do this yet

2044
01:41:21,939 --> 01:41:26,089
let's go ahead and take light buffer

2045
01:41:24,199 --> 01:41:28,659
count and make that equal to zero and

2046
01:41:26,090 --> 01:41:32,360
then each time through here we'll just

2047
01:41:28,659 --> 01:41:34,699
take right instead of doing this we'll

2048
01:41:32,359 --> 01:41:36,799
just assume that it's true we'll loop

2049
01:41:34,699 --> 01:41:40,250
through the light indices in fact we

2050
01:41:36,800 --> 01:41:42,980
don't really even need to do that we can

2051
01:41:40,250 --> 01:41:44,930
just say because light in the light

2052
01:41:42,979 --> 01:41:48,529
index in this case I believe is only is

2053
01:41:44,930 --> 01:41:55,670
there what we could do is just do a for

2054
01:41:48,529 --> 01:41:57,800
loop that keeps on going in each time we

2055
01:41:55,670 --> 01:42:00,319
do one of these we do like OpenGL light

2056
01:41:57,800 --> 01:42:05,390
over count plus plus so we keep going

2057
01:42:00,319 --> 01:42:06,710
and then down here we do in fact I could

2058
01:42:05,390 --> 01:42:09,710
just make this a while loop that

2059
01:42:06,710 --> 01:42:16,670
basically says like while text width is

2060
01:42:09,710 --> 01:42:19,250
greater than one and text height is

2061
01:42:16,670 --> 01:42:22,159
greater than one so once we collapse

2062
01:42:19,250 --> 01:42:25,399
down to and we probably like I said in

2063
01:42:22,159 --> 01:42:27,939
the end want this to be like no less

2064
01:42:25,399 --> 01:42:30,349
than a two by two or something right

2065
01:42:27,939 --> 01:42:32,239
because we probably don't want the

2066
01:42:30,350 --> 01:42:34,220
lighting to collapse down quite that far

2067
01:42:32,239 --> 01:42:36,199
I don't know but for now all right we'll

2068
01:42:34,220 --> 01:42:39,560
just say we'll go all the way to the one

2069
01:42:36,199 --> 01:42:41,659
by one so let's see if that works at the

2070
01:42:39,560 --> 01:42:43,030
moment again I think this would just

2071
01:42:41,659 --> 01:42:44,720
produce the same results we had before

2072
01:42:43,029 --> 01:42:46,219
so that's all good

2073
01:42:44,720 --> 01:42:48,320
and so then what I want to do is I want

2074
01:42:46,220 --> 01:42:56,350
to say all right when we do this let's

2075
01:42:48,319 --> 01:42:56,349
go ahead and move to just having

2076
01:43:00,359 --> 01:43:08,029
[Applause]

2077
01:43:02,859 --> 01:43:11,238
this be based on the render within the

2078
01:43:08,029 --> 01:43:13,670
render height and so we'll just

2079
01:43:11,238 --> 01:43:15,649
reconstruct whatever that power of two

2080
01:43:13,670 --> 01:43:19,190
would have been right so I'm just

2081
01:43:15,649 --> 01:43:24,379
looking and saying we're going to take

2082
01:43:19,189 --> 01:43:27,500
the next closest power of two I don't

2083
01:43:24,380 --> 01:43:28,430
remember what the actual index that's

2084
01:43:27,500 --> 01:43:31,520
what it is

2085
01:43:28,430 --> 01:43:31,520
[Applause]

2086
01:43:33,800 --> 01:43:39,829
and so now in theory we should be able

2087
01:43:37,010 --> 01:43:42,849
to make this make some sense now that

2088
01:43:39,829 --> 01:43:45,170
doesn't look promising to say believed

2089
01:43:42,849 --> 01:43:48,020
because I have no idea why we're so

2090
01:43:45,170 --> 01:43:50,679
squat and weird for all of our lighting

2091
01:43:48,020 --> 01:43:54,679
buffers but we'll find out in a second

2092
01:43:50,679 --> 01:43:57,949
so let's take a look at what it decided

2093
01:43:54,679 --> 01:44:01,730
to do for text width and text height and

2094
01:43:57,948 --> 01:44:03,589
why it didn't draw the whole thing I

2095
01:44:01,729 --> 01:44:05,479
wonder if one of our passes doesn't

2096
01:44:03,590 --> 01:44:08,020
really Center things properly that that

2097
01:44:05,479 --> 01:44:08,019
may be the case

2098
01:44:19,988 --> 01:44:26,629
yeah let's just let me take a quick look

2099
01:44:23,300 --> 01:44:29,930
at that so when we do Def feel to

2100
01:44:26,630 --> 01:44:31,940
lighting yes so the problem is depth

2101
01:44:29,930 --> 01:44:34,850
field to lighting needs to actually take

2102
01:44:31,939 --> 01:44:36,199
the froggy of ease now that's I think

2103
01:44:34,850 --> 01:44:38,180
the only thing that really needs to

2104
01:44:36,199 --> 01:44:40,939
happen here so instead of textile

2105
01:44:38,180 --> 01:44:43,220
fetching we need to actually do the

2106
01:44:40,939 --> 01:44:47,569
bilinear too like down sample the

2107
01:44:43,220 --> 01:45:00,860
results into the lighting buffer for

2108
01:44:47,569 --> 01:45:12,259
processing so yeah in this case we just

2109
01:45:00,859 --> 01:45:18,019
need frog UV out like so and then we can

2110
01:45:12,260 --> 01:45:20,480
take froggy be in and so then in that

2111
01:45:18,020 --> 01:45:22,820
case when we're taking these textile

2112
01:45:20,479 --> 01:45:26,109
fetches those textile fetches here would

2113
01:45:22,819 --> 01:45:29,059
just instead the texture samples right

2114
01:45:26,109 --> 01:45:31,670
so instead of the textile fetch here

2115
01:45:29,060 --> 01:45:37,940
here and here they'll just be texture

2116
01:45:31,670 --> 01:45:41,149
samples and we won't do it that way now

2117
01:45:37,939 --> 01:45:44,559
I believe I could make this actually be

2118
01:45:41,149 --> 01:45:44,559
something that was switchable

2119
01:45:45,159 --> 01:45:57,309
[Applause]

2120
01:45:53,918 --> 01:45:59,349
so here's the alternate path where each

2121
01:45:57,309 --> 01:46:03,369
of these is actually doing down sampling

2122
01:45:59,349 --> 01:46:30,550
just blending together

2123
01:46:03,368 --> 01:46:32,198
oh wait got a little over is up that's

2124
01:46:30,550 --> 01:46:34,479
the past that I'm just going to preserve

2125
01:46:32,198 --> 01:46:40,268
kids in case we wanted to not do that

2126
01:46:34,479 --> 01:46:42,789
right so this is going to be doing

2127
01:46:40,269 --> 01:46:43,958
regular bilinear assuming the pedaling

2128
01:46:42,788 --> 01:46:46,719
years turned on for these I don't

2129
01:46:43,958 --> 01:46:47,198
remember for those but we'll find out in

2130
01:46:46,719 --> 01:46:48,340
a second

2131
01:46:47,198 --> 01:46:49,688
either that or I'll do nearest-neighbor

2132
01:46:48,340 --> 01:46:53,340
sampling which is not really what we

2133
01:46:49,689 --> 01:46:57,780
want but we can always turn bilinear on

2134
01:46:53,340 --> 01:46:57,779
let's go ahead and see if that's correct

2135
01:47:03,229 --> 01:47:14,448
vert UV that is true we need a smooth we

2136
01:47:08,510 --> 01:47:16,929
need in / QV for the v2 normal yes in

2137
01:47:14,448 --> 01:47:16,928
yeah

2138
01:47:26,979 --> 01:47:32,839
so let's see here there we go so now I

2139
01:47:31,130 --> 01:47:36,739
think we're in better shape there

2140
01:47:32,840 --> 01:47:40,760
obviously so let's take a look here is

2141
01:47:36,738 --> 01:47:42,589
the game in its downsampled form which

2142
01:47:40,760 --> 01:47:48,110
is just using the closest power of 2

2143
01:47:42,590 --> 01:47:51,440
right so here's the power of 2 version

2144
01:47:48,109 --> 01:47:54,079
of the lighting and you can actually

2145
01:47:51,439 --> 01:47:55,639
already see that there's a little bit

2146
01:47:54,079 --> 01:47:57,529
less of the problem you're having for

2147
01:47:55,640 --> 01:48:00,199
although it's still there so as we go up

2148
01:47:57,529 --> 01:48:09,979
the lighting scale you can see sort of

2149
01:48:00,198 --> 01:48:12,079
how that plays itself out right so what

2150
01:48:09,979 --> 01:48:14,089
we want to do now is actually do some

2151
01:48:12,079 --> 01:48:16,550
more intelligent things with the normal

2152
01:48:14,090 --> 01:48:19,489
here so there's the normal of where the

2153
01:48:16,550 --> 01:48:22,010
light is coming from and these in in

2154
01:48:19,488 --> 01:48:25,639
this situation right and I think what we

2155
01:48:22,010 --> 01:48:27,350
want to do is set that normal the

2156
01:48:25,640 --> 01:48:30,079
lighting normal to be a little bit more

2157
01:48:27,350 --> 01:48:32,690
sane so that we can actually play with

2158
01:48:30,079 --> 01:48:34,340
that a little bit so for example I want

2159
01:48:32,689 --> 01:48:36,049
something where the where the lighting

2160
01:48:34,340 --> 01:48:39,050
actually is I'd like to set the normal

2161
01:48:36,050 --> 01:48:44,840
to point somewhere specific so for

2162
01:48:39,050 --> 01:48:47,150
example let's suppose that in the let's

2163
01:48:44,840 --> 01:48:49,480
see here compiled device program where

2164
01:48:47,149 --> 01:48:49,479
we

2165
01:48:55,640 --> 01:49:00,420
I'll do not think about it maybe I don't

2166
01:48:57,689 --> 01:49:04,500
care about that maybe it's just the flux

2167
01:49:00,420 --> 01:49:06,810
that matters it was just a direction

2168
01:49:04,500 --> 01:49:09,180
that matters so the place the light was

2169
01:49:06,810 --> 01:49:14,160
coming from is really all that we care

2170
01:49:09,180 --> 01:49:20,010
about yeah so I guess here's what I'm

2171
01:49:14,159 --> 01:49:25,738
sort of thinking vaguely right so

2172
01:49:20,010 --> 01:49:29,579
previously what we had right is we we

2173
01:49:25,738 --> 01:49:32,459
were taking the actual normals of all

2174
01:49:29,579 --> 01:49:35,279
the surfaces themselves and using that

2175
01:49:32,460 --> 01:49:38,399
as something that we do in our lighting

2176
01:49:35,279 --> 01:49:40,079
like so you know if we look here you can

2177
01:49:38,399 --> 01:49:43,529
see like these are the resolutions this

2178
01:49:40,079 --> 01:49:45,090
is the normal information and what I'm

2179
01:49:43,529 --> 01:49:48,300
thinking is that we might want to do

2180
01:49:45,090 --> 01:49:51,480
instead of that is we might want to have

2181
01:49:48,300 --> 01:49:54,329
the lighting be something where we're

2182
01:49:51,479 --> 01:49:58,319
actually just slowing out the actual

2183
01:49:54,329 --> 01:49:59,850
light itself and the directional values

2184
01:49:58,319 --> 01:50:03,719
are just based on where the light came

2185
01:49:59,850 --> 01:50:07,200
from not on what was there ever in the

2186
01:50:03,720 --> 01:50:10,680
first place so there would really be no

2187
01:50:07,199 --> 01:50:14,670
normals anywhere else they right it

2188
01:50:10,680 --> 01:50:22,320
would just be what would be in this

2189
01:50:14,670 --> 01:50:25,319
buffer would just be the direction the

2190
01:50:22,319 --> 01:50:33,719
light came from as it propagated if that

2191
01:50:25,319 --> 01:50:35,819
makes sense yeah so as an as lights come

2192
01:50:33,720 --> 01:50:38,130
together as their direction and their

2193
01:50:35,819 --> 01:50:41,429
color would average together right so it

2194
01:50:38,130 --> 01:50:43,409
would be very much like a light fluid if

2195
01:50:41,430 --> 01:50:45,000
that makes sense and again I'm just

2196
01:50:43,409 --> 01:50:47,069
trying to figure out ways that I can

2197
01:50:45,000 --> 01:50:51,750
make it so that this will work without

2198
01:50:47,069 --> 01:50:54,479
the fact without the problem that we

2199
01:50:51,750 --> 01:50:56,399
have which is we don't really have a 3d

2200
01:50:54,479 --> 01:50:59,339
enclosure we can really bounce the light

2201
01:50:56,399 --> 01:51:00,750
around although I guess before I go down

2202
01:50:59,340 --> 01:51:02,039
that route we should because we're sort

2203
01:51:00,750 --> 01:51:04,199
of coming to the end of the stream here

2204
01:51:02,039 --> 01:51:05,930
too I should also say that there's a

2205
01:51:04,199 --> 01:51:07,039
different thing we could consider doing

2206
01:51:05,930 --> 01:51:08,810
with

2207
01:51:07,039 --> 01:51:10,789
we could consider seeing the light pass

2208
01:51:08,810 --> 01:51:13,880
itself with completely separate

2209
01:51:10,789 --> 01:51:16,100
information which we could also do right

2210
01:51:13,880 --> 01:51:21,350
like we could have it so that we just

2211
01:51:16,100 --> 01:51:25,100
send down all the reflectors in a

2212
01:51:21,350 --> 01:51:28,480
separate pass because we know what they

2213
01:51:25,100 --> 01:51:28,480
all are right

2214
01:51:41,170 --> 01:51:47,369
and that would mean that that would be a

2215
01:51:48,239 --> 01:51:51,909
that would be a slightly different

2216
01:51:50,109 --> 01:51:53,739
situation right that would be one where

2217
01:51:51,909 --> 01:51:55,149
we'd sort of just be doing vertex to

2218
01:51:53,739 --> 01:51:58,090
vertex left for processing and we

2219
01:51:55,149 --> 01:52:04,809
wouldn't really be doing much with

2220
01:51:58,090 --> 01:52:14,529
respect to the incoming pixel values so

2221
01:52:04,810 --> 01:52:16,210
for example if you imagined us because

2222
01:52:14,529 --> 01:52:18,809
we're sending down you know if we're

2223
01:52:16,210 --> 01:52:23,409
sending down like these cubes right and

2224
01:52:18,810 --> 01:52:26,289
these sprites we could instead just send

2225
01:52:23,409 --> 01:52:28,960
down when we send these down we could

2226
01:52:26,289 --> 01:52:33,189
just send down the plates themselves

2227
01:52:28,960 --> 01:52:35,680
these these these plates that we get we

2228
01:52:33,189 --> 01:52:49,029
could just record the plate information

2229
01:52:35,680 --> 01:52:55,780
into the buffer directly meaning we

2230
01:52:49,029 --> 01:52:59,949
wouldn't even really treat it so much

2231
01:52:55,779 --> 01:53:01,149
like pixels I know this is a little bit

2232
01:52:59,949 --> 01:53:02,920
weird I'm sort of thinking this on the

2233
01:53:01,149 --> 01:53:04,210
slide but if we want to implement the

2234
01:53:02,920 --> 01:53:05,680
original algorithm a little more

2235
01:53:04,210 --> 01:53:08,289
carefully and actually try to get to

2236
01:53:05,680 --> 01:53:10,600
work you could imagine us saying well

2237
01:53:08,289 --> 01:53:13,569
okay when we have these plates coming in

2238
01:53:10,600 --> 01:53:18,039
here and we want to do the lighting

2239
01:53:13,569 --> 01:53:20,949
versus you know the the old-school way

2240
01:53:18,039 --> 01:53:22,949
of just to disc transmittance what we

2241
01:53:20,949 --> 01:53:25,179
could do is just say well if we just

2242
01:53:22,949 --> 01:53:27,220
recorded what all of these were we don't

2243
01:53:25,180 --> 01:53:28,510
have that many of them we could actually

2244
01:53:27,220 --> 01:53:30,610
do the algorithm a little bit more

2245
01:53:28,510 --> 01:53:37,869
faithfully than it used than it was

2246
01:53:30,609 --> 01:53:41,619
originally which is to say we just build

2247
01:53:37,869 --> 01:53:44,220
a vertex buffer of these things that

2248
01:53:41,619 --> 01:53:44,220
gets traversed

2249
01:53:55,159 --> 01:53:58,318
[Music]

2250
01:54:12,529 --> 01:54:19,769
kasing is thinking for example I'm just

2251
01:54:18,060 --> 01:54:23,160
going to try to throw you for instance

2252
01:54:19,770 --> 01:54:25,050
here so for instance I said something

2253
01:54:23,159 --> 01:54:27,869
like okay

2254
01:54:25,050 --> 01:54:30,600
into the light buffers what we're

2255
01:54:27,869 --> 01:54:32,069
actually going to store here is they are

2256
01:54:30,600 --> 01:54:33,690
literally going to be the tree of

2257
01:54:32,069 --> 01:54:35,519
reflectors and the reflectors are just

2258
01:54:33,689 --> 01:54:41,309
going to be stored as the X Y Z position

2259
01:54:35,520 --> 01:54:44,610
of the reflector its radius like how big

2260
01:54:41,310 --> 01:54:57,180
it was right and then the emit front

2261
01:54:44,609 --> 01:54:59,639
back and the normal so basically we have

2262
01:54:57,180 --> 01:55:04,020
exactly we have now but instead of

2263
01:54:59,640 --> 01:55:09,960
writing into that buffer instead of

2264
01:55:04,020 --> 01:55:14,660
writing the anything based on the pixels

2265
01:55:09,960 --> 01:55:17,850
that buffer just gets written with

2266
01:55:14,659 --> 01:55:24,050
reflector value with actual like records

2267
01:55:17,850 --> 01:55:24,050
of these reflectors right

2268
01:55:27,750 --> 01:55:32,189
and so what we would need there is we

2269
01:55:30,420 --> 01:55:34,409
need a spatially coherent way of

2270
01:55:32,189 --> 01:55:37,259
stuffing the reflectors into the buffer

2271
01:55:34,409 --> 01:55:39,269
but that's really it right and then when

2272
01:55:37,260 --> 01:55:42,869
we do that averaging up we do the

2273
01:55:39,270 --> 01:55:45,150
averaging just on the actual reflector

2274
01:55:42,869 --> 01:55:54,539
information itself that was sort of what

2275
01:55:45,149 --> 01:55:56,399
I wanted to do originally but we kind of

2276
01:55:54,539 --> 01:55:59,340
stopped short of it if we could do

2277
01:55:56,399 --> 01:56:01,500
something like this where it wasn't

2278
01:55:59,340 --> 01:56:03,480
based on the pixels anymore then we

2279
01:56:01,500 --> 01:56:05,550
would have the ability to still bounce

2280
01:56:03,479 --> 01:56:07,079
with the feeling or a skylight or

2281
01:56:05,550 --> 01:56:09,260
whatever else is in there like if either

2282
01:56:07,079 --> 01:56:17,550
emit through skylight or bounce off a

2283
01:56:09,260 --> 01:56:21,230
ceiling which is more what I wanted so

2284
01:56:17,550 --> 01:56:32,100
the tricky part about it is really just

2285
01:56:21,229 --> 01:56:35,519
the is really just the problem of not

2286
01:56:32,100 --> 01:56:39,539
having any way of placing them into a

2287
01:56:35,520 --> 01:56:41,370
pixel buffer in the first place so

2288
01:56:39,539 --> 01:56:43,680
that's why I like the original algorithm

2289
01:56:41,369 --> 01:56:52,670
how to do the weird like tree creation

2290
01:56:43,680 --> 01:56:52,670
step which you know is pretty janky

2291
01:56:59,038 --> 01:57:03,038
so I really wanted to avoid that if we

2292
01:57:01,389 --> 01:57:07,449
could and it would be nice to be able to

2293
01:57:03,038 --> 01:57:11,139
do it in some other way but I'm just not

2294
01:57:07,448 --> 01:57:13,268
sure what that other way would be if we

2295
01:57:11,139 --> 01:57:15,550
you know we could use a computer which

2296
01:57:13,269 --> 01:57:17,769
would have unordered rights but that

2297
01:57:15,550 --> 01:57:19,869
starts to get a little bit questionable

2298
01:57:17,769 --> 01:57:21,309
as well so I'm just trying to think if

2299
01:57:19,868 --> 01:57:22,988
there's I don't want to like totally

2300
01:57:21,309 --> 01:57:24,610
abandon this particular way of doing

2301
01:57:22,988 --> 01:57:26,319
things until I'm absolutely sure that

2302
01:57:24,609 --> 01:57:28,868
there isn't some clever thing we could

2303
01:57:26,319 --> 01:57:37,109
do here and I'm just talking about some

2304
01:57:28,868 --> 01:57:39,969
way of actually putting the the

2305
01:57:37,109 --> 01:57:42,729
reflector data in such that we wouldn't

2306
01:57:39,969 --> 01:57:44,920
lose any of the ones we sent down just

2307
01:57:42,729 --> 01:57:48,658
because they happen to be on the wrong

2308
01:57:44,920 --> 01:57:48,658
side of like a plane like that

2309
01:58:18,118 --> 01:58:26,339
and to be honest it does seem like this

2310
01:58:21,840 --> 01:58:32,449
could work I'm worried about the

2311
01:58:26,340 --> 01:58:35,819
artifact as you move through space but

2312
01:58:32,448 --> 01:58:38,908
it does seem like we could make that

2313
01:58:35,819 --> 01:58:41,579
work like if you did just double down on

2314
01:58:38,908 --> 01:58:44,339
it and say okay instead of using the

2315
01:58:41,579 --> 01:58:48,988
depth feel pass you just have one pass

2316
01:58:44,340 --> 01:58:50,940
where you write directly into some kind

2317
01:58:48,988 --> 01:58:55,319
of three-dimensional texture which is

2318
01:58:50,939 --> 01:59:00,299
not very deep so you know it's maybe 16

2319
01:58:55,319 --> 01:59:03,509
high but is fairly dense the other way

2320
01:59:00,300 --> 01:59:06,090
so you know it's like a 256 by 256 by 16

2321
01:59:03,510 --> 01:59:10,739
or something if you did write the

2322
01:59:06,090 --> 01:59:21,210
reflectors into that then you could

2323
01:59:10,738 --> 01:59:24,379
imagine down sampling that and running

2324
01:59:21,210 --> 01:59:24,380
the procedure on it

2325
01:59:27,609 --> 01:59:31,869
and what that would look like it would

2326
01:59:29,770 --> 01:59:33,520
literally just average them the first

2327
01:59:31,869 --> 01:59:35,739
time through it would just average them

2328
01:59:33,520 --> 01:59:38,890
in right so you just set the mode to

2329
01:59:35,739 --> 01:59:43,300
additive you run through and what you

2330
01:59:38,890 --> 01:59:46,329
write to the location is you just write

2331
01:59:43,300 --> 01:59:50,890
to that location in the Texel that is

2332
01:59:46,329 --> 01:59:55,210
the point you're looking for you you

2333
01:59:50,890 --> 01:59:58,930
just write the value of the reflector

2334
01:59:55,210 --> 02:00:01,539
that's coming in right and so if you get

2335
01:59:58,930 --> 02:00:04,470
more than one they averaged together in

2336
02:00:01,539 --> 02:00:04,470
an area

2337
02:00:33,050 --> 02:00:41,150
a Catalan try that I'm going to go to

2338
02:00:39,470 --> 02:00:44,270
the QA and here's what we're going to do

2339
02:00:41,149 --> 02:00:46,609
this is what I've decided because I kind

2340
02:00:44,270 --> 02:00:49,010
of like this experimentation right and I

2341
02:00:46,609 --> 02:00:53,809
feel like I want to give this a full try

2342
02:00:49,010 --> 02:00:56,210
so I want to like see if we can I I want

2343
02:00:53,810 --> 02:00:59,750
to give this a full try before I say it

2344
02:00:56,210 --> 02:01:02,359
needs to go so I feel like what I want

2345
02:00:59,750 --> 02:01:04,970
to do is just because I can't quite

2346
02:01:02,359 --> 02:01:08,059
figure out any way to get that feeling

2347
02:01:04,970 --> 02:01:18,140
in I want to try one more time to get

2348
02:01:08,060 --> 02:01:25,100
that to happen so so yeah I think I

2349
02:01:18,140 --> 02:01:26,660
might try it but this week this week I'm

2350
02:01:25,100 --> 02:01:27,920
going to think about this over the

2351
02:01:26,659 --> 02:01:29,210
course of the week and just decide

2352
02:01:27,920 --> 02:01:31,960
whether I want to do it or not I think

2353
02:01:29,210 --> 02:01:31,960
I'm leaning towards it

2354
02:01:46,909 --> 02:01:51,260
trickster Zorua I would like to ask me

2355
02:01:49,699 --> 02:01:52,880
any advice for a beginner it's most

2356
02:01:51,260 --> 02:01:54,170
likely asked for but I just heard about

2357
02:01:52,880 --> 02:01:55,550
this and while I'm interested in game

2358
02:01:54,170 --> 02:01:59,329
programming I never managed to learn a

2359
02:01:55,550 --> 02:02:03,079
language I don't have a lot of advice

2360
02:01:59,329 --> 02:02:05,420
for that at the moment this stream

2361
02:02:03,079 --> 02:02:07,460
pretty much only focuses on people who

2362
02:02:05,420 --> 02:02:09,649
already know how to program and wanted

2363
02:02:07,460 --> 02:02:14,210
to see some game programming stuff low

2364
02:02:09,649 --> 02:02:17,719
level game programming stuff and I don't

2365
02:02:14,210 --> 02:02:20,329
really have much in the way of pointers

2366
02:02:17,720 --> 02:02:24,039
for like when people are very first

2367
02:02:20,329 --> 02:02:26,210
starting so yeah I apologize for that

2368
02:02:24,039 --> 02:02:28,850
that is something that's pretty

2369
02:02:26,210 --> 02:02:30,680
important and it's I don't know that

2370
02:02:28,850 --> 02:02:37,100
there's a lot of really great resources

2371
02:02:30,680 --> 02:02:38,539
out there but you know SS Gartner is

2372
02:02:37,100 --> 02:02:40,310
there going to be a top level that

2373
02:02:38,539 --> 02:02:43,609
doesn't have a ceiling and instead would

2374
02:02:40,310 --> 02:02:45,830
have direct sunlight yes but again it

2375
02:02:43,609 --> 02:02:47,299
would have a skylight so we would still

2376
02:02:45,829 --> 02:02:50,659
have a ceiling there which are just

2377
02:02:47,300 --> 02:02:53,230
emitters that are like in a flat plane

2378
02:02:50,659 --> 02:02:57,260
emitting downward kind of a thing right

2379
02:02:53,229 --> 02:03:00,549
so so we would still have a feeling at

2380
02:02:57,260 --> 02:03:00,550
all times more or less

2381
02:03:39,539 --> 02:03:45,220
kad's 97 when you said does no library

2382
02:03:42,399 --> 02:03:46,599
include no standard library not quite

2383
02:03:45,220 --> 02:03:51,130
yet

2384
02:03:46,600 --> 02:03:53,079
we did reimplemented we don't use like

2385
02:03:51,130 --> 02:03:55,270
for example any standard library io we

2386
02:03:53,079 --> 02:03:57,729
don't use printf we have our own print

2387
02:03:55,270 --> 02:03:59,830
death not stuff so there but there is

2388
02:03:57,729 --> 02:04:02,079
like one or two standard library calls

2389
02:03:59,829 --> 02:04:05,079
we are using right now a cosine and sine

2390
02:04:02,079 --> 02:04:06,460
and square root because we haven't

2391
02:04:05,079 --> 02:04:07,689
gotten to the point on the stream where

2392
02:04:06,460 --> 02:04:09,609
I show how to do numerical

2393
02:04:07,689 --> 02:04:13,059
approximations to those functions in

2394
02:04:09,609 --> 02:04:14,889
Cindy but eventually yeah no library

2395
02:04:13,060 --> 02:04:16,720
does include the standard library we

2396
02:04:14,890 --> 02:04:18,940
almost don't use any of it now and

2397
02:04:16,720 --> 02:04:23,100
eventually we won't use any of it at all

2398
02:04:18,939 --> 02:04:23,099
and we don't use any other libraries

2399
02:04:43,579 --> 02:04:47,449
so that's the kid to do smooth edges do

2400
02:04:45,770 --> 02:04:51,830
you need to do the multi sampling on all

2401
02:04:47,449 --> 02:04:54,529
the buffers normal diffuse etc so no we

2402
02:04:51,829 --> 02:04:56,029
don't really need that and again we're

2403
02:04:54,529 --> 02:04:57,649
going to have to make a path after we

2404
02:04:56,029 --> 02:05:00,199
get everything working to a certain

2405
02:04:57,649 --> 02:05:02,199
degree to like take out any inefficiency

2406
02:05:00,199 --> 02:05:05,779
that there is there at the moment

2407
02:05:02,199 --> 02:05:08,059
because right now we're probably doing a

2408
02:05:05,779 --> 02:05:09,500
bunch of things we don't have to do what

2409
02:05:08,060 --> 02:05:11,390
I would like for the lighting is for it

2410
02:05:09,500 --> 02:05:14,529
to be approximate and somewhat blurry

2411
02:05:11,390 --> 02:05:16,850
lighting so that we don't have to have

2412
02:05:14,529 --> 02:05:22,899
things like multi sampling happening on

2413
02:05:16,850 --> 02:05:22,900
the lighting right

2414
02:05:27,479 --> 02:05:33,299
so that'd be my hope does my hope anyway

2415
02:05:31,369 --> 02:05:35,630
until it's all said and done we don't

2416
02:05:33,300 --> 02:05:35,630
really know

2417
02:05:41,810 --> 02:05:47,010
kylo possess to which I don't know to

2418
02:05:44,729 --> 02:05:50,939
pronounce that but any advice to working

2419
02:05:47,010 --> 02:05:55,350
with all loop and cost programmers not

2420
02:05:50,939 --> 02:05:56,789
really I you know if you're not an open

2421
02:05:55,350 --> 02:05:58,110
tops kind of person and you have to

2422
02:05:56,789 --> 02:06:01,680
program with a lot of open counts

2423
02:05:58,109 --> 02:06:05,369
programmers it's it it's not great it's

2424
02:06:01,680 --> 02:06:08,190
not a happy experience so usually I just

2425
02:06:05,369 --> 02:06:09,809
tell people to hang in there and find a

2426
02:06:08,189 --> 02:06:12,719
better place to work at some point if

2427
02:06:09,810 --> 02:06:17,250
you can but there's not a lot you can do

2428
02:06:12,720 --> 02:06:19,230
about that the dogma in the C++

2429
02:06:17,250 --> 02:06:21,600
programming world is really strong and

2430
02:06:19,229 --> 02:06:24,299
is not based on you know any kind of

2431
02:06:21,600 --> 02:06:26,370
solid evidence so there's not really a

2432
02:06:24,300 --> 02:06:28,619
lot you can do it's very hard to argue

2433
02:06:26,369 --> 02:06:30,899
with people who have a particular

2434
02:06:28,619 --> 02:06:33,329
dogmatic approach to programming this

2435
02:06:30,899 --> 02:06:36,599
you know not based on any data because

2436
02:06:33,329 --> 02:06:38,130
you know it's close to a religion in

2437
02:06:36,600 --> 02:06:40,320
that way it's just based on people's

2438
02:06:38,130 --> 02:06:41,670
beliefs and their feelings and it's hard

2439
02:06:40,319 --> 02:06:46,949
to argue with people about their

2440
02:06:41,670 --> 02:06:54,149
feelings right so it's usually better

2441
02:06:46,949 --> 02:06:55,380
just not to try because I you know yeah

2442
02:06:54,149 --> 02:06:57,329
I mean I I don't know any other way to

2443
02:06:55,380 --> 02:06:59,659
say other than it's very hard to argue

2444
02:06:57,329 --> 02:07:02,640
with someone else about their feelings

2445
02:06:59,659 --> 02:07:06,420
they feel like object-oriented

2446
02:07:02,640 --> 02:07:09,090
programming is good and so when you're

2447
02:07:06,420 --> 02:07:11,220
arguing with them about using it you're

2448
02:07:09,090 --> 02:07:15,180
effectively arguing with them it's like

2449
02:07:11,220 --> 02:07:17,460
telling them you know that you shouldn't

2450
02:07:15,180 --> 02:07:21,420
go to church on Sunday or something it's

2451
02:07:17,460 --> 02:07:23,730
like if you believe a bunch of things

2452
02:07:21,420 --> 02:07:25,560
that aren't based on any evidence you

2453
02:07:23,729 --> 02:07:27,629
can go to to try to look you know

2454
02:07:25,560 --> 02:07:29,370
whether it's true or not there's not a

2455
02:07:27,630 --> 02:07:31,920
lot of ways that you can really have a

2456
02:07:29,369 --> 02:07:33,659
constructive argument so I try to

2457
02:07:31,920 --> 02:07:35,460
discourage people from doing that if

2458
02:07:33,659 --> 02:07:37,439
possible and to just try to find

2459
02:07:35,460 --> 02:07:40,880
programmers to program similar to you

2460
02:07:37,439 --> 02:07:45,289
that you can work with eventually is

2461
02:07:40,880 --> 02:07:51,810
usually the best way to go just because

2462
02:07:45,289 --> 02:07:54,630
you know until there are really good

2463
02:07:51,810 --> 02:07:55,110
hard metrics in programming that you can

2464
02:07:54,630 --> 02:07:56,850
actually

2465
02:07:55,109 --> 02:07:59,429
to show people like no this is a bad

2466
02:07:56,850 --> 02:08:03,270
idea because you can actually measure if

2467
02:07:59,429 --> 02:08:05,850
it's problematic effects then really

2468
02:08:03,270 --> 02:08:07,320
it's always just it's always just an

2469
02:08:05,850 --> 02:08:09,869
emotional argument and emotional

2470
02:08:07,319 --> 02:08:13,639
arguments don't have any predictable

2471
02:08:09,868 --> 02:08:17,279
resolution you might convince somebody

2472
02:08:13,639 --> 02:08:19,789
or you might not and you might just piss

2473
02:08:17,279 --> 02:08:19,789
people off

2474
02:08:33,529 --> 02:08:40,099
Stephen laughs if GL have support for

2475
02:08:35,939 --> 02:08:43,379
fully 3d textures yeah sure

2476
02:08:40,100 --> 02:08:48,030
textures in OpenGL can have au of V and

2477
02:08:43,380 --> 02:08:51,359
W in the lookup so if you want to you

2478
02:08:48,029 --> 02:08:55,679
can have say a 256 by 256 by 256 texture

2479
02:08:51,359 --> 02:08:57,960
and when you do a Texel fetch you can

2480
02:08:55,680 --> 02:09:04,909
pass three parameters and fetch a Texel

2481
02:08:57,960 --> 02:09:09,350
or you can pass a text uvw and fetch

2482
02:09:04,909 --> 02:09:13,550
trilinear sample from from one as well

2483
02:09:09,350 --> 02:09:13,550
if you want to blend them together

2484
02:09:24,389 --> 02:09:29,590
Mavericks as someone who is taught and

2485
02:09:26,828 --> 02:09:34,328
always worked with programming how does

2486
02:09:29,590 --> 02:09:39,610
one enlighten themselves well I guess

2487
02:09:34,328 --> 02:09:42,519
what I would say is that the best way to

2488
02:09:39,609 --> 02:09:46,059
sort of analyze any kind of programming

2489
02:09:42,520 --> 02:09:47,770
is to see how much work you're doing to

2490
02:09:46,060 --> 02:09:56,409
get the processor to do a particular

2491
02:09:47,770 --> 02:09:59,170
thing right and you might say that the

2492
02:09:56,408 --> 02:10:01,888
global metric for programming is for any

2493
02:09:59,170 --> 02:10:06,190
given series of operations that the

2494
02:10:01,889 --> 02:10:08,440
processor ends up doing how much work

2495
02:10:06,189 --> 02:10:11,109
was it for the programmer to produce the

2496
02:10:08,439 --> 02:10:14,078
corresponding code in their language

2497
02:10:11,109 --> 02:10:15,519
bug-free or you know as close to

2498
02:10:14,078 --> 02:10:17,529
bug-free as we know how to make it right

2499
02:10:15,520 --> 02:10:20,710
like you know we analyze it and don't

2500
02:10:17,529 --> 02:10:25,599
know of any bugs in it right so for a

2501
02:10:20,710 --> 02:10:28,539
specific and I guess I can say for a

2502
02:10:25,599 --> 02:10:31,409
specific bug free set of CPU

2503
02:10:28,539 --> 02:10:33,760
instructions what is the code that

2504
02:10:31,408 --> 02:10:35,799
produces that with the least effort on

2505
02:10:33,760 --> 02:10:40,000
the part of the programmer right they

2506
02:10:35,800 --> 02:10:41,440
must in the shortest amount of time in

2507
02:10:40,000 --> 02:10:43,840
the problem that I have with with

2508
02:10:41,439 --> 02:10:46,658
object-oriented programming is I've

2509
02:10:43,840 --> 02:10:51,730
never found really any circumstances

2510
02:10:46,658 --> 02:10:55,799
where it helps with that and so a lot of

2511
02:10:51,729 --> 02:10:59,379
the things that people say it helps with

2512
02:10:55,800 --> 02:11:04,869
they usually can't actually demonstrate

2513
02:10:59,380 --> 02:11:07,690
that it did they think that it does I

2514
02:11:04,868 --> 02:11:11,799
don't deny that they feel like it helps

2515
02:11:07,689 --> 02:11:16,509
them but I am unable to myself reproduce

2516
02:11:11,800 --> 02:11:23,529
or have them show me how they were able

2517
02:11:16,510 --> 02:11:27,010
to actually achieve that thing and so

2518
02:11:23,529 --> 02:11:30,578
that's usually the first step to looking

2519
02:11:27,010 --> 02:11:32,230
past in grains and in grayned opinion

2520
02:11:30,578 --> 02:11:37,929
that object-oriented programming is

2521
02:11:32,229 --> 02:11:41,469
awesome or effective is going

2522
02:11:37,930 --> 02:11:44,200
and I produce real-world examples of how

2523
02:11:41,470 --> 02:11:46,420
it was more efficient to write this code

2524
02:11:44,199 --> 02:11:51,369
in object-oriented versus just writing

2525
02:11:46,420 --> 02:11:54,279
the procedural version and you may find

2526
02:11:51,369 --> 02:11:56,229
that when you do that you actually do

2527
02:11:54,279 --> 02:11:58,899
find that object-oriented program is

2528
02:11:56,229 --> 02:12:04,389
better and if you do you should stick

2529
02:11:58,899 --> 02:12:07,179
with it right I did not find that when I

2530
02:12:04,390 --> 02:12:12,100
did that experiment and I did it for

2531
02:12:07,180 --> 02:12:14,500
awhile I was never really able to find

2532
02:12:12,100 --> 02:12:18,130
an object-oriented paradigm that saved

2533
02:12:14,500 --> 02:12:22,090
time consistently across real-world

2534
02:12:18,130 --> 02:12:24,369
programming examples it always was

2535
02:12:22,090 --> 02:12:28,260
inferior to the procedural version it

2536
02:12:24,369 --> 02:12:31,809
involved more typing more unnecessary

2537
02:12:28,260 --> 02:12:34,210
structure to the program it was less

2538
02:12:31,810 --> 02:12:36,520
flexible because it typically involves

2539
02:12:34,210 --> 02:12:39,039
more constraints you end up having to do

2540
02:12:36,520 --> 02:12:41,080
things like having these crazy things

2541
02:12:39,039 --> 02:12:43,449
like friend and stuff in your language

2542
02:12:41,079 --> 02:12:44,890
just to enable programmers to do things

2543
02:12:43,449 --> 02:12:47,559
they would have ordinarily just been

2544
02:12:44,890 --> 02:12:49,960
able to do in the procedural version it

2545
02:12:47,560 --> 02:12:51,730
changes the mental focus from the

2546
02:12:49,960 --> 02:12:54,220
procedure which is the thing that a CPU

2547
02:12:51,729 --> 02:12:55,569
actually does to an object which is not

2548
02:12:54,220 --> 02:12:58,960
something that really exists in a

2549
02:12:55,569 --> 02:13:05,319
computer in any way and so on and so

2550
02:12:58,960 --> 02:13:07,000
forth right and so typically I guess

2551
02:13:05,319 --> 02:13:08,979
that's what I would say and again you

2552
02:13:07,000 --> 02:13:10,630
know I'm not going to argue with you to

2553
02:13:08,979 --> 02:13:11,799
come to a different conclusion because

2554
02:13:10,630 --> 02:13:15,550
like I said it to be in the priest

2555
02:13:11,800 --> 02:13:16,989
amount of you're here for that I don't

2556
02:13:15,550 --> 02:13:19,239
really like trying to force other people

2557
02:13:16,989 --> 02:13:21,250
to program the way that I think is

2558
02:13:19,239 --> 02:13:22,659
sensible to program if they want to

2559
02:13:21,250 --> 02:13:28,390
program in a different way than they

2560
02:13:22,659 --> 02:13:30,819
should program in a different way and I

2561
02:13:28,390 --> 02:13:33,039
also think that there's a lot of ways to

2562
02:13:30,819 --> 02:13:34,869
program object-oriented is one of the

2563
02:13:33,039 --> 02:13:39,909
few I've ever seen that I don't think is

2564
02:13:34,869 --> 02:13:42,399
ever useful so I don't really use it but

2565
02:13:39,909 --> 02:13:44,859
you know there's a lot of different ways

2566
02:13:42,399 --> 02:13:48,879
you can program and you it's good to be

2567
02:13:44,859 --> 02:13:50,079
versatile and be able to program to

2568
02:13:48,880 --> 02:13:51,118
think in terms of functional programming

2569
02:13:50,079 --> 02:13:53,519
versus

2570
02:13:51,118 --> 02:13:54,898
usual programming to think in terms of

2571
02:13:53,519 --> 02:13:58,800
metaprogramming versus direct

2572
02:13:54,899 --> 02:14:01,729
programming all sorts of things can help

2573
02:13:58,800 --> 02:14:03,570
you be an effective programmer

2574
02:14:01,729 --> 02:14:08,249
object-orientation is just one that I've

2575
02:14:03,569 --> 02:14:14,219
never found useful I just haven't been

2576
02:14:08,248 --> 02:14:16,738
able to find the concepts behind it to

2577
02:14:14,219 --> 02:14:19,078
really come together to produce

2578
02:14:16,738 --> 02:14:22,609
effective programs in a more efficient

2579
02:14:19,078 --> 02:14:22,609
way than the procedural version

2580
02:14:46,738 --> 02:14:51,459
Emma Krantz

2581
02:14:48,960 --> 02:14:53,020
could you overlay inedited grading on

2582
02:14:51,460 --> 02:14:54,880
top of the car geometry to make them

2583
02:14:53,020 --> 02:14:58,270
seem to have more depth to emulate more

2584
02:14:54,880 --> 02:15:02,199
of a cone shape you could do a bunch of

2585
02:14:58,270 --> 02:15:06,550
things if you want to go all out you

2586
02:15:02,198 --> 02:15:09,969
could actually have depth maps or you

2587
02:15:06,550 --> 02:15:12,909
know normal maps for the sprites so I

2588
02:15:09,969 --> 02:15:14,800
guess what I'd say is you know you've

2589
02:15:12,909 --> 02:15:16,869
got a lot of options there you can

2590
02:15:14,800 --> 02:15:20,140
definitely cheat and just map a sphere

2591
02:15:16,869 --> 02:15:23,920
or a cube or I'm not an active a

2592
02:15:20,140 --> 02:15:26,590
cylinder to get more variance to the

2593
02:15:23,920 --> 02:15:29,380
reflection across the surface and you

2594
02:15:26,590 --> 02:15:32,940
know depending on how close the geometry

2595
02:15:29,380 --> 02:15:35,980
of the underlying thing that got drawn

2596
02:15:32,939 --> 02:15:38,559
vince's that you will get a better and

2597
02:15:35,979 --> 02:15:42,629
worse result the full-on way to do it is

2598
02:15:38,560 --> 02:15:45,010
to actually have the art paths have

2599
02:15:42,630 --> 02:15:49,719
normal maps in it because then it's

2600
02:15:45,010 --> 02:15:51,659
exact in a sense but you know that

2601
02:15:49,719 --> 02:15:54,250
depends on whether you have access to

2602
02:15:51,659 --> 02:15:56,519
artists who can do that or want to spend

2603
02:15:54,250 --> 02:15:56,520
the time and

2604
02:16:10,170 --> 02:16:15,699
Cubert Caleb said wouldn't trilinear

2605
02:16:12,760 --> 02:16:18,429
sampling for a 2d texture imply sampling

2606
02:16:15,698 --> 02:16:21,009
across different myth levels if so what

2607
02:16:18,429 --> 02:16:25,029
p-value does the GPU use to interpolate

2608
02:16:21,010 --> 02:16:27,730
between the layers so first of all your

2609
02:16:25,029 --> 02:16:29,800
hypothesis is correct trilinear sampling

2610
02:16:27,729 --> 02:16:32,260
for a 2d texture does imply sampling

2611
02:16:29,800 --> 02:16:34,299
across different myth levels and in

2612
02:16:32,260 --> 02:16:39,579
terms of what the p-value is it's based

2613
02:16:34,299 --> 02:16:47,228
on the grid the texture gradient I that

2614
02:16:39,579 --> 02:16:50,920
is C so what generally happens is try to

2615
02:16:47,228 --> 02:17:00,608
explain this so if you imagine here is

2616
02:16:50,920 --> 02:17:02,409
the pixel grid then you can imagine if

2617
02:17:00,609 --> 02:17:06,010
I'm talking about how to pick a mid

2618
02:17:02,409 --> 02:17:08,829
level well if I was to say that I'm

2619
02:17:06,010 --> 02:17:11,439
going to talk about texels that happen

2620
02:17:08,829 --> 02:17:14,228
to line up so that the distance between

2621
02:17:11,439 --> 02:17:16,269
one texel Center let's say this is a

2622
02:17:14,228 --> 02:17:21,398
Texel here it happens to be off-center

2623
02:17:16,269 --> 02:17:23,530
but who cares the distance between one

2624
02:17:21,398 --> 02:17:27,209
textile sample let's say this and the

2625
02:17:23,530 --> 02:17:31,059
next one is exactly the same width as

2626
02:17:27,209 --> 02:17:33,789
the pixel grid that is rendering too

2627
02:17:31,058 --> 02:17:37,599
then you might say that it's one-to-one

2628
02:17:33,790 --> 02:17:40,750
in terms of size right and at that point

2629
02:17:37,599 --> 02:17:42,880
the mid level is plainly zero because

2630
02:17:40,750 --> 02:17:45,879
the thing that we're drawing is the same

2631
02:17:42,879 --> 02:17:47,739
size in pixels as the screen is in pixel

2632
02:17:45,879 --> 02:17:51,699
the Texel size of the pixel size are the

2633
02:17:47,739 --> 02:17:53,949
same so we don't need a subsample it now

2634
02:17:51,700 --> 02:17:58,809
let's say instead we have something that

2635
02:17:53,950 --> 02:18:01,420
looked more like this so now you can see

2636
02:17:58,808 --> 02:18:05,529
that I've got my texels are a quarter of

2637
02:18:01,420 --> 02:18:08,620
the size right so here's textile a

2638
02:18:05,530 --> 02:18:11,979
before now we have textile a is here and

2639
02:18:08,620 --> 02:18:14,559
here's D and C and D right well now

2640
02:18:11,978 --> 02:18:17,558
we're basically saying it's 2 to 1 in

2641
02:18:14,558 --> 02:18:20,539
both directions right because the the

2642
02:18:17,558 --> 02:18:23,119
width is 1/2

2643
02:18:20,540 --> 02:18:26,990
the width of a textile on the screen is

2644
02:18:23,120 --> 02:18:29,059
half a pixel so optimally what we'd like

2645
02:18:26,989 --> 02:18:32,629
to do there is we'd like the sample from

2646
02:18:29,058 --> 02:18:34,129
myth level one right because we'd like

2647
02:18:32,629 --> 02:18:36,968
everything that has been averaged down

2648
02:18:34,129 --> 02:18:40,339
by one so that now we're back to having

2649
02:18:36,968 --> 02:18:42,768
ABC and D merged together into another

2650
02:18:40,340 --> 02:18:46,010
tech so we'll call that e right which is

2651
02:18:42,769 --> 02:18:48,170
a plus B plus C plus D divided by four

2652
02:18:46,010 --> 02:18:51,200
right or some other way of computing a

2653
02:18:48,170 --> 02:18:53,659
nip level so that when we sample it we

2654
02:18:51,200 --> 02:18:55,819
are sampling properly the average of all

2655
02:18:53,659 --> 02:18:57,468
of these which again is important

2656
02:18:55,818 --> 02:18:59,599
because since we're going to take a

2657
02:18:57,468 --> 02:19:02,959
bilinear sample since this is off-center

2658
02:18:59,599 --> 02:19:05,719
our bilinear sample wants to average the

2659
02:19:02,959 --> 02:19:07,308
averages right so that's why we have the

2660
02:19:05,718 --> 02:19:09,619
myth so that we can take into account

2661
02:19:07,308 --> 02:19:13,879
everything that would have been in that

2662
02:19:09,620 --> 02:19:16,639
subsection so then you might ask

2663
02:19:13,879 --> 02:19:18,228
yourself well what happens in between so

2664
02:19:16,638 --> 02:19:20,179
what happens that the actual distance

2665
02:19:18,228 --> 02:19:22,278
between them is like some odd numbers so

2666
02:19:20,179 --> 02:19:24,888
here would have been exactly one to one

2667
02:19:22,279 --> 02:19:26,840
and here would have been one to two what

2668
02:19:24,888 --> 02:19:30,379
happens when we're in between well

2669
02:19:26,840 --> 02:19:33,409
that's your T value for trilinear so

2670
02:19:30,379 --> 02:19:37,968
however much the width is between half

2671
02:19:33,409 --> 02:19:39,679
and whole that's what you get so

2672
02:19:37,968 --> 02:19:41,388
typically the miss level if you think

2673
02:19:39,679 --> 02:19:44,388
about it the LOD level is actually

2674
02:19:41,388 --> 02:19:47,119
continuous value zero means one two one

2675
02:19:44,388 --> 02:19:50,750
one means one two two or however you

2676
02:19:47,120 --> 02:19:54,290
want to think about this right along any

2677
02:19:50,750 --> 02:19:57,770
dimension and what you get when you do

2678
02:19:54,290 --> 02:20:00,790
this is an actual continuous value you

2679
02:19:57,770 --> 02:20:03,710
might end up with like 0.75 or you know

2680
02:20:00,790 --> 02:20:06,560
0.53 or who knows what right and that's

2681
02:20:03,709 --> 02:20:09,409
how far in between the two MIT maps you

2682
02:20:06,559 --> 02:20:11,568
would be and furthermore as you go up

2683
02:20:09,409 --> 02:20:13,250
and up and up if it's like one point two

2684
02:20:11,568 --> 02:20:16,359
seven then we're part of the way in

2685
02:20:13,250 --> 02:20:19,790
between MIPS one and two and so on

2686
02:20:16,359 --> 02:20:21,770
now this also if you have an inverse

2687
02:20:19,790 --> 02:20:24,020
before this is also if you want to

2688
02:20:21,770 --> 02:20:26,120
understand anisotropic filtering you can

2689
02:20:24,020 --> 02:20:29,390
see why anisotropic filtering becomes

2690
02:20:26,120 --> 02:20:31,760
important because you don't know that

2691
02:20:29,389 --> 02:20:34,189
these values are the same in either

2692
02:20:31,760 --> 02:20:35,658
dimension right so it's

2693
02:20:34,189 --> 02:20:39,078
could be that my thing is very long and

2694
02:20:35,658 --> 02:20:41,059
skinny and so that I'm at a very high

2695
02:20:39,078 --> 02:20:43,158
nip level this way but a very low myth

2696
02:20:41,059 --> 02:20:45,889
level this way right

2697
02:20:43,158 --> 02:20:47,898
and so anisotropic filtering are things

2698
02:20:45,889 --> 02:20:49,519
that take more than one tap down the

2699
02:20:47,898 --> 02:20:54,799
myth chain or do other things like this

2700
02:20:49,520 --> 02:20:56,689
are ways of trying to reconstruct what

2701
02:20:54,799 --> 02:20:59,269
the value should be given that you don't

2702
02:20:56,689 --> 02:20:59,779
have the right set of NIT maps for every

2703
02:20:59,270 --> 02:21:02,390
occasion

2704
02:20:59,779 --> 02:21:05,238
right ideally you would have the MIPS

2705
02:21:02,389 --> 02:21:10,728
every permutation of MIT so if you

2706
02:21:05,238 --> 02:21:15,969
imagine that you had let's say a 256 by

2707
02:21:10,728 --> 02:21:20,148
256 texture well that's 2 to the 8th

2708
02:21:15,969 --> 02:21:26,049
right by 2 to the 8th so really we

2709
02:21:20,148 --> 02:21:29,269
should have like 8 laud levels there ok

2710
02:21:26,049 --> 02:21:33,049
and when we make a Miss chain that's how

2711
02:21:29,270 --> 02:21:35,119
many we have but what if we wanted to

2712
02:21:33,049 --> 02:21:37,969
sample from a Miss that was really all

2713
02:21:35,119 --> 02:21:40,998
the way in X still there so that it's

2714
02:21:37,969 --> 02:21:44,448
full width but was not that wide and why

2715
02:21:40,998 --> 02:21:46,609
right so we shrunk the thing down

2716
02:21:44,449 --> 02:21:48,350
because you know like we're shrinking it

2717
02:21:46,609 --> 02:21:51,559
this way but not shrinking it this way

2718
02:21:48,350 --> 02:21:53,119
or something or vice versa in this case

2719
02:21:51,559 --> 02:21:57,198
we're sinking the Y down leaving the X

2720
02:21:53,119 --> 02:21:59,659
wide right well if we do that we really

2721
02:21:57,199 --> 02:22:01,880
need am it level that didn't get shrunk

2722
02:21:59,658 --> 02:22:03,109
in Y in the did get shrunk I didn't get

2723
02:22:01,879 --> 02:22:04,698
something extra dickish shrunk and white

2724
02:22:03,109 --> 02:22:06,318
and we don't have that in a standard MIT

2725
02:22:04,699 --> 02:22:07,850
chain so if you were going to produce

2726
02:22:06,318 --> 02:22:10,578
all the myths you would actually need

2727
02:22:07,850 --> 02:22:11,988
for precomputed for sampling what you'd

2728
02:22:10,578 --> 02:22:14,840
actually have to do is instead of having

2729
02:22:11,988 --> 02:22:17,270
8 MIPS for this right you would actually

2730
02:22:14,840 --> 02:22:20,559
have to have 64 MIPS you'd have to have

2731
02:22:17,270 --> 02:22:24,229
every X level have every Y level in it

2732
02:22:20,559 --> 02:22:26,719
so you'd have a - 8 - 8 by 2 by 2 and a

2733
02:22:24,228 --> 02:22:27,920
- 8 by 2 by 3 and a 2 2 by 2 8 and a

2734
02:22:26,719 --> 02:22:30,590
tooth you know blah blah blah blah blah

2735
02:22:27,920 --> 02:22:33,799
and then you would sample based on the

2736
02:22:30,590 --> 02:22:39,728
gradients for both x and y into the

2737
02:22:33,799 --> 02:22:39,728
correct myth right

2738
02:22:40,478 --> 02:22:48,129
and by the way if you have a small

2739
02:22:43,450 --> 02:22:50,140
number of these and you wanted to do

2740
02:22:48,129 --> 02:22:52,059
this you could so if you wanted to do

2741
02:22:50,139 --> 02:22:54,670
really good down sampling you could

2742
02:22:52,059 --> 02:22:56,769
produce a number of MIT maps far more

2743
02:22:54,670 --> 02:22:59,200
than then eight four three two five

2744
02:22:56,770 --> 02:23:02,110
three six that are all based on giving

2745
02:22:59,200 --> 02:23:06,329
you fast ways to do good sampling at

2746
02:23:02,110 --> 02:23:15,970
arbitrary different angles and stretches

2747
02:23:06,329 --> 02:23:18,039
right I think I'm basically out of time

2748
02:23:15,969 --> 02:23:20,789
let me just double check what we have if

2749
02:23:18,040 --> 02:23:20,790
any more questions

2750
02:23:26,579 --> 02:23:30,209
what are your opinions on DRM I'm

2751
02:23:28,379 --> 02:23:34,979
against it

2752
02:23:30,209 --> 02:23:36,389
let's see I'm working on an AI to play a

2753
02:23:34,979 --> 02:23:38,159
game and I'm wondering if you're having

2754
02:23:36,389 --> 02:23:40,349
general tips for it more civically the

2755
02:23:38,159 --> 02:23:42,450
game is World of Warcraft

2756
02:23:40,350 --> 02:23:43,739
right now I'm only at basic functions to

2757
02:23:42,450 --> 02:23:47,610
work in an image processing pipeline

2758
02:23:43,739 --> 02:23:49,289
nice I don't really I'm not really an AI

2759
02:23:47,610 --> 02:23:52,170
program or I don't spend any time doing

2760
02:23:49,290 --> 02:23:59,880
much of that so I don't have much in the

2761
02:23:52,170 --> 02:24:01,590
way of BOTS advice I've never even

2762
02:23:59,879 --> 02:24:03,089
written a bot for anything it's not

2763
02:24:01,590 --> 02:24:07,860
something that's ever appealed to me for

2764
02:24:03,090 --> 02:24:10,250
some reason so alright let's wind it

2765
02:24:07,860 --> 02:24:10,250
down here

2766
02:24:21,101 --> 02:24:24,530
all right thank you everyone for joining

2767
02:24:23,030 --> 02:24:25,700
me for them so two hand baits here it's

2768
02:24:24,530 --> 02:24:27,561
been a pleasure coding with you as

2769
02:24:25,700 --> 02:24:29,421
always if you would like to follow along

2770
02:24:27,560 --> 02:24:30,860
with the series at home you can always

2771
02:24:29,421 --> 02:24:32,569
peer to the game it comes with the

2772
02:24:30,860 --> 02:24:34,551
source code so you can play around with

2773
02:24:32,569 --> 02:24:36,949
it yourself we also have a forum site

2774
02:24:34,550 --> 02:24:38,630
you go to to ask questions about this

2775
02:24:36,950 --> 02:24:40,761
what we've done with Sirius we have a

2776
02:24:38,630 --> 02:24:43,399
patreon page you want to support us in

2777
02:24:40,761 --> 02:24:44,899
the videos we have a schedule but you

2778
02:24:43,399 --> 02:24:46,640
can use to find out when we're going to

2779
02:24:44,899 --> 02:24:49,489
be live if you want to join us live and

2780
02:24:46,640 --> 02:24:51,380
an episode guide you can use if you want

2781
02:24:49,489 --> 02:24:52,729
to catch up on old episodes that may

2782
02:24:51,380 --> 02:24:54,859
have covered something you're interested

2783
02:24:52,729 --> 02:24:56,449
in there's also a great search feature

2784
02:24:54,860 --> 02:24:58,581
that was implemented by the community

2785
02:24:56,450 --> 02:25:00,409
that's really pretty darn cool so you

2786
02:24:58,581 --> 02:25:03,319
can quickly find the episodes you're

2787
02:25:00,409 --> 02:25:06,409
looking for that's about it for today I

2788
02:25:03,319 --> 02:25:09,890
will be back I think next week I might

2789
02:25:06,409 --> 02:25:11,841
take some time up coming up here I'm not

2790
02:25:09,890 --> 02:25:14,440
sure there may be some summer a summer

2791
02:25:11,841 --> 02:25:16,761
vacation on handmade here oh so I'll

2792
02:25:14,440 --> 02:25:18,021
keep you posted on that as it goes

2793
02:25:16,761 --> 02:25:19,371
definitely always look at the schedule

2794
02:25:18,021 --> 02:25:21,320
bot to find out but I think I'll be back

2795
02:25:19,370 --> 02:25:22,699
next weekend for playing around the

2796
02:25:21,319 --> 02:25:25,101
lighting a little bit more until then

2797
02:25:22,700 --> 02:25:26,211
have fun programming and I'll see you

2798
02:25:25,101 --> 02:25:28,421
all on the Internet take it easy

2799
02:25:26,210 --> 02:25:28,420
everybody

