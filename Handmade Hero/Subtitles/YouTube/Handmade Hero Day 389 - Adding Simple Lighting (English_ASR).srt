1
00:00:00,030 --> 00:00:06,660
and start grating hello everyone welcome

2
00:00:05,129 --> 00:00:10,469
to handmade Hero the show we towed a

3
00:00:06,660 --> 00:00:14,280
complete game live on stream we I don't

4
00:00:10,468 --> 00:00:16,469
actually remember having anything

5
00:00:14,279 --> 00:00:21,679
outstanding at the end of last week in

6
00:00:16,469 --> 00:00:26,189
some very odd turn of events that is

7
00:00:21,679 --> 00:00:27,868
somewhat inexplicable despite kind of

8
00:00:26,189 --> 00:00:33,600
fighting with multi sampling and death

9
00:00:27,868 --> 00:00:37,679
feeling for two or three sessions at the

10
00:00:33,600 --> 00:00:39,539
last minute MTS MOX happened to find a

11
00:00:37,679 --> 00:00:42,149
problem we had with our you know depth

12
00:00:39,539 --> 00:00:45,359
and able and reenable and we fix it and

13
00:00:42,149 --> 00:00:47,489
that kind of gave me new impetus to go

14
00:00:45,359 --> 00:00:50,009
look to see if we can get multi sample

15
00:00:47,488 --> 00:00:52,439
definitely working and I randomly try

16
00:00:50,009 --> 00:00:55,229
the technique that seems to work

17
00:00:52,439 --> 00:01:01,349
incredibly well for us it's splitting

18
00:00:55,229 --> 00:01:05,640
the depth the total depth Delta on a

19
00:01:01,350 --> 00:01:08,040
multi sample pixel and so just to recap

20
00:01:05,640 --> 00:01:12,200
I guess I'll I'll sort of show you on

21
00:01:08,040 --> 00:01:15,118
the blackboard what it was but I was not

22
00:01:12,200 --> 00:01:19,969
expecting this to be anything special it

23
00:01:15,118 --> 00:01:19,969
looks like I got a restart my Milton's

24
00:01:21,319 --> 00:01:27,029
let's see here no handmade comms that's

25
00:01:25,200 --> 00:01:29,340
the drive oh man I don't even want to

26
00:01:27,030 --> 00:01:31,200
tell you it has been a month I found

27
00:01:29,340 --> 00:01:34,618
someone to do the rest of the handmade

28
00:01:31,200 --> 00:01:38,900
con videos and editor and I've been

29
00:01:34,618 --> 00:01:41,280
trying to make a hard drive with the

30
00:01:38,900 --> 00:01:44,250
with the videos on it for them to edit

31
00:01:41,280 --> 00:01:45,810
and it has been seriously four week

32
00:01:44,250 --> 00:01:47,700
straight of me trying to get Google

33
00:01:45,810 --> 00:01:49,500
Drive to successfully download the files

34
00:01:47,700 --> 00:01:52,649
and it has failed for four weeks

35
00:01:49,500 --> 00:01:56,430
straight and it's been a complete

36
00:01:52,649 --> 00:01:57,810
nightmare Google Drive is incredibly bad

37
00:01:56,430 --> 00:01:59,070
I'm glad the only thing I've ever used

38
00:01:57,810 --> 00:02:01,618
it for is like basically those

39
00:01:59,069 --> 00:02:03,599
transferring those videos because man if

40
00:02:01,618 --> 00:02:06,718
you actually had to use Google Drive as

41
00:02:03,599 --> 00:02:10,049
an actual drive solution heaven help you

42
00:02:06,718 --> 00:02:10,679
anyway let's go ahead and restart Milton

43
00:02:10,050 --> 00:02:23,480
pear

44
00:02:10,679 --> 00:02:34,530
earth go and we are day 389 and this is

45
00:02:23,479 --> 00:02:37,679
multi sampled depth P Lang so what

46
00:02:34,530 --> 00:02:40,468
happened here was we were getting you

47
00:02:37,680 --> 00:02:41,250
know we have done our depth feeling and

48
00:02:40,468 --> 00:02:44,158
that was great

49
00:02:41,250 --> 00:02:46,169
I really like the death feeling but then

50
00:02:44,158 --> 00:02:50,429
we wanted to try and smooth out the

51
00:02:46,169 --> 00:02:52,769
edges of geometry on the screen which we

52
00:02:50,430 --> 00:02:54,209
don't have much of but we we only have

53
00:02:52,769 --> 00:02:56,519
that one cube primitive it's really the

54
00:02:54,209 --> 00:02:59,218
only thing I needed you know I don't I

55
00:02:56,519 --> 00:03:01,379
don't the games mostly sprites but I

56
00:02:59,218 --> 00:03:05,908
wanted the ground and walls to be made

57
00:03:01,378 --> 00:03:08,090
up of actual geometry and so that was

58
00:03:05,908 --> 00:03:11,729
still you know really crispy and and

59
00:03:08,090 --> 00:03:13,019
sparkly it didn't look nice right and so

60
00:03:11,729 --> 00:03:15,840
we wanted something that would smooth it

61
00:03:13,019 --> 00:03:17,010
out so the question was could we get

62
00:03:15,840 --> 00:03:18,479
death feeling working with multi

63
00:03:17,009 --> 00:03:21,239
sampling and the problem with that is

64
00:03:18,479 --> 00:03:23,510
that multi sampling is definitely don't

65
00:03:21,239 --> 00:03:25,469
play very nicely together since

66
00:03:23,509 --> 00:03:27,478
typically the way multi sampling works

67
00:03:25,469 --> 00:03:29,128
is it only operates on the edges which

68
00:03:27,479 --> 00:03:32,189
means that when you're filling a sprite

69
00:03:29,128 --> 00:03:34,560
if you're on the interior of the sprite

70
00:03:32,188 --> 00:03:36,870
right you're just going to be filling

71
00:03:34,560 --> 00:03:38,489
that one pixel essentially that one

72
00:03:36,870 --> 00:03:40,799
sample and it's just going to replicate

73
00:03:38,489 --> 00:03:42,989
to all the samples right that's how

74
00:03:40,799 --> 00:03:45,389
multi sampling works if the if the edge

75
00:03:42,989 --> 00:03:47,579
of the primitives that you're working

76
00:03:45,389 --> 00:03:48,750
with like let's say you know this is the

77
00:03:47,579 --> 00:03:50,819
primitive I'm working but this is the

78
00:03:48,750 --> 00:03:52,139
triangle out here if the pixel is

79
00:03:50,818 --> 00:03:54,539
entirely encompassed in that primitive

80
00:03:52,139 --> 00:03:56,219
multi sampling is not active so what

81
00:03:54,539 --> 00:03:58,608
it'll do is they'll just do one sample

82
00:03:56,219 --> 00:04:00,840
and it will write them all the samples

83
00:03:58,609 --> 00:04:01,500
it'll write to all the samples as a

84
00:04:00,840 --> 00:04:03,719
splat

85
00:04:01,500 --> 00:04:07,560
I'll just say we set all the samples to

86
00:04:03,719 --> 00:04:10,169
be this value right so what ends up

87
00:04:07,560 --> 00:04:11,878
happening is you can't really use depth

88
00:04:10,169 --> 00:04:13,620
feeling very effectively with this at

89
00:04:11,878 --> 00:04:16,079
least not with the shader levels where

90
00:04:13,620 --> 00:04:18,298
you think because you don't have any way

91
00:04:16,079 --> 00:04:21,028
of really taking that and doing anything

92
00:04:18,298 --> 00:04:23,310
with this right what you have to do is

93
00:04:21,028 --> 00:04:25,680
you'd have to do a for loop over

94
00:04:23,310 --> 00:04:27,480
the samples and effectively compare it

95
00:04:25,680 --> 00:04:30,090
to each sample and you more or less

96
00:04:27,480 --> 00:04:31,500
would lose all the benefits of monthly

97
00:04:30,089 --> 00:04:34,138
sampling like you might as well just

98
00:04:31,500 --> 00:04:36,660
start rendering at 8 X the resolution

99
00:04:34,139 --> 00:04:39,800
because now you're processing every

100
00:04:36,660 --> 00:04:42,360
sample every pixel every time right

101
00:04:39,800 --> 00:04:47,400
every Texel I should say because you

102
00:04:42,360 --> 00:04:50,610
know with overdraw so basically we don't

103
00:04:47,399 --> 00:04:52,500
really have any wind from multi sampling

104
00:04:50,610 --> 00:04:54,030
if we were to do that so the question is

105
00:04:52,500 --> 00:04:56,310
could we do something that worked

106
00:04:54,029 --> 00:04:58,799
properly with multi sampling where

107
00:04:56,310 --> 00:05:00,540
instead of actually having multi

108
00:04:58,800 --> 00:05:04,110
sampling persist all the way through the

109
00:05:00,540 --> 00:05:06,569
depriming process could we do one just

110
00:05:04,110 --> 00:05:11,009
the you know one def peel with multi

111
00:05:06,569 --> 00:05:14,430
sampling then like sort of reduce or

112
00:05:11,009 --> 00:05:17,909
resolve then to produce a regular you

113
00:05:14,430 --> 00:05:20,189
know one pixel one sample per pixel

114
00:05:17,910 --> 00:05:22,860
version of that texture passed that to

115
00:05:20,189 --> 00:05:25,168
the next page of the process and

116
00:05:22,860 --> 00:05:27,120
effectively just get the actual

117
00:05:25,168 --> 00:05:29,810
acceleration we want from multi sampling

118
00:05:27,120 --> 00:05:32,788
you know I'm saying

119
00:05:29,810 --> 00:05:35,970
and the answer seemed elusive but then

120
00:05:32,788 --> 00:05:38,038
it turned out for whatever reason if you

121
00:05:35,970 --> 00:05:40,950
take a look at all of these samples and

122
00:05:38,038 --> 00:05:43,740
produce a min and Max range so if this

123
00:05:40,949 --> 00:05:45,149
was our camera looking down and we

124
00:05:43,740 --> 00:05:48,449
looked at all these samples you know and

125
00:05:45,149 --> 00:05:50,969
they kind of fell in you know the depth

126
00:05:48,449 --> 00:05:53,728
from the camera like this if you take

127
00:05:50,970 --> 00:05:55,500
the minimum and maximum of them and then

128
00:05:53,728 --> 00:05:59,610
you just split the difference so you

129
00:05:55,500 --> 00:06:04,288
take half the the the way in between

130
00:05:59,610 --> 00:06:06,629
these two that actually produces in the

131
00:06:04,288 --> 00:06:09,750
vast majority of cases that I was able

132
00:06:06,629 --> 00:06:14,490
to find where my get the command prompt

133
00:06:09,750 --> 00:06:17,449
back here let me go ahead and run the

134
00:06:14,490 --> 00:06:20,660
game here so you can take a look at it

135
00:06:17,449 --> 00:06:20,659
[Applause]

136
00:06:20,728 --> 00:06:41,769
there we go Kyle come on Visual

137
00:06:30,310 --> 00:06:46,149
Studio you can boot on now oh boy I got

138
00:06:41,769 --> 00:06:48,658
to uninstall that that code excel thing

139
00:06:46,149 --> 00:06:53,399
ever since we installed code excel

140
00:06:48,658 --> 00:06:53,399
Visual Studio takes like years to boot

141
00:06:54,629 --> 00:07:01,300
like years it's nuts

142
00:06:59,468 --> 00:07:12,418
I don't even want to know what was

143
00:07:01,300 --> 00:07:12,418
having on there alright

144
00:07:21,168 --> 00:07:32,120
all right there we go so here you can

145
00:07:25,788 --> 00:07:37,459
see it running right and there's really

146
00:07:32,120 --> 00:07:39,620
no artifacts you can get smoothing on

147
00:07:37,459 --> 00:07:43,278
all of the geometry even where two

148
00:07:39,620 --> 00:07:45,050
pieces intersect which we couldn't do

149
00:07:43,278 --> 00:07:50,538
when we were trying to do the centroid

150
00:07:45,050 --> 00:07:52,249
sampling version of this but even if I

151
00:07:50,538 --> 00:07:54,680
switch through the debug camera and

152
00:07:52,249 --> 00:07:57,110
really just kind of stressed it out

153
00:07:54,680 --> 00:07:59,959
you don't get many artifacts there's a

154
00:07:57,110 --> 00:08:03,770
couple in in a few places you can see a

155
00:07:59,959 --> 00:08:06,649
little bit like right in there when you

156
00:08:03,769 --> 00:08:10,248
get really low to it you can kind of see

157
00:08:06,649 --> 00:08:13,399
a little bit in there but for the most

158
00:08:10,249 --> 00:08:15,259
part it looks pretty good and I'm

159
00:08:13,399 --> 00:08:19,788
totally willing to kind of go forward

160
00:08:15,259 --> 00:08:21,430
with that so far we may have to do a

161
00:08:19,788 --> 00:08:25,009
little more tweaking to it later

162
00:08:21,430 --> 00:08:26,930
but it's pretty good as it stands and

163
00:08:25,009 --> 00:08:29,240
the only place that we really saw

164
00:08:26,930 --> 00:08:31,459
artifacts that we might want to try and

165
00:08:29,240 --> 00:08:36,889
fix at some point is here you can kind

166
00:08:31,459 --> 00:08:39,078
of see when it when it fades in you get

167
00:08:36,889 --> 00:08:41,689
a problem where the depth peel is a

168
00:08:39,078 --> 00:08:45,139
little too aggressive on the cubes so

169
00:08:41,690 --> 00:08:48,610
you end up in a situation where you have

170
00:08:45,139 --> 00:08:51,198
you have precluded some of the depth

171
00:08:48,610 --> 00:08:53,240
some of the lower stuff from showing

172
00:08:51,198 --> 00:08:59,870
through so you end up with effectively

173
00:08:53,240 --> 00:09:01,070
like a like a bigger beveled edge that

174
00:08:59,870 --> 00:09:03,169
kind of goes through there you can see

175
00:09:01,070 --> 00:09:07,370
it right along there and that's not

176
00:09:03,169 --> 00:09:09,860
correct obviously but mostly I'm pretty

177
00:09:07,370 --> 00:09:14,240
happy with it so it's a little early to

178
00:09:09,860 --> 00:09:17,269
declare victory certainly because we

179
00:09:14,240 --> 00:09:20,740
don't have you know a full game running

180
00:09:17,269 --> 00:09:23,778
where we've tried all the things that

181
00:09:20,740 --> 00:09:26,209
you know we don't know what geometry we

182
00:09:23,778 --> 00:09:29,328
might have in the actual game but or

183
00:09:26,208 --> 00:09:31,009
sprites that might stress this harder in

184
00:09:29,328 --> 00:09:31,759
some way because you know since it's

185
00:09:31,009 --> 00:09:33,649
kind of a

186
00:09:31,759 --> 00:09:35,778
weird hacky technique that we just kind

187
00:09:33,649 --> 00:09:37,850
of came up with to solve a problem it's

188
00:09:35,778 --> 00:09:39,919
hard to predict necessarily without

189
00:09:37,850 --> 00:09:43,459
having more experience or thinking it

190
00:09:39,919 --> 00:09:44,778
through a lot trying to figure out what

191
00:09:43,458 --> 00:09:47,838
all the cases are where it might fail

192
00:09:44,778 --> 00:09:50,870
it's hard to know if anything we might

193
00:09:47,839 --> 00:09:54,529
do in the future could break it in a bad

194
00:09:50,870 --> 00:09:56,120
way but at the moment I would say I'm

195
00:09:54,528 --> 00:09:59,179
pretty I'm happy certainly happy enough

196
00:09:56,120 --> 00:10:01,490
with it with the render quality we're

197
00:09:59,179 --> 00:10:08,059
getting here to just go ahead and move

198
00:10:01,490 --> 00:10:11,480
on to something else right and again

199
00:10:08,059 --> 00:10:12,979
that's all I did at the last minute to

200
00:10:11,480 --> 00:10:14,750
just I was playing around some things to

201
00:10:12,980 --> 00:10:17,659
see if any would work all I did was just

202
00:10:14,750 --> 00:10:20,028
take in a custom resolved path that

203
00:10:17,659 --> 00:10:24,169
would split them in in the max and say

204
00:10:20,028 --> 00:10:32,208
that's the value to pick and that just

205
00:10:24,169 --> 00:10:33,500
worked well I mean I had a reason for

206
00:10:32,208 --> 00:10:36,439
doing it it's not like it was completely

207
00:10:33,500 --> 00:10:38,750
blind the idea was simply that well that

208
00:10:36,440 --> 00:10:41,089
would say that you know if we had

209
00:10:38,750 --> 00:10:45,379
samples from two different pieces of

210
00:10:41,089 --> 00:10:48,860
geometry like let's say I had in here

211
00:10:45,379 --> 00:10:51,379
the tree you know covers these samples

212
00:10:48,860 --> 00:10:53,720
and the ground covers these samples my

213
00:10:51,379 --> 00:10:56,328
thought was well we want to depth

214
00:10:53,720 --> 00:10:59,540
peel away the tree but we want to leave

215
00:10:56,328 --> 00:11:01,609
the ground in place so if those were at

216
00:10:59,539 --> 00:11:04,338
had any substantial difference in their

217
00:11:01,610 --> 00:11:06,470
Z at all then picking the Midway should

218
00:11:04,339 --> 00:11:08,329
hopefully land most of these samples on

219
00:11:06,470 --> 00:11:11,600
this side of it and most of these

220
00:11:08,328 --> 00:11:17,028
samples on that side of it so off you go

221
00:11:11,600 --> 00:11:20,600
right and I don't like I said I don't

222
00:11:17,028 --> 00:11:23,299
really claim that that's any kind of

223
00:11:20,600 --> 00:11:25,579
rigorous solution to the problem but it

224
00:11:23,299 --> 00:11:28,838
does seem to be surprisingly effective

225
00:11:25,578 --> 00:11:28,838
in a large number of cases

226
00:11:32,600 --> 00:11:42,940
so yeah that's that's the renderer I

227
00:11:40,120 --> 00:11:47,149
guess what I would say at this point is

228
00:11:42,940 --> 00:11:49,190
I don't actually think we have anything

229
00:11:47,149 --> 00:11:56,600
in particular I want to do to the

230
00:11:49,190 --> 00:11:59,960
renderer now from where it is and so one

231
00:11:56,600 --> 00:12:05,389
thing that I thought we might do perhaps

232
00:11:59,960 --> 00:12:07,220
is just say well you know now that we

233
00:12:05,389 --> 00:12:10,009
finish all that stuff maybe let's go

234
00:12:07,220 --> 00:12:14,180
ahead and and just kind of add in some

235
00:12:10,009 --> 00:12:15,799
lighting to the renderer this weekend

236
00:12:14,179 --> 00:12:17,719
because you know that's the one thing

237
00:12:15,799 --> 00:12:20,629
that we don't really have at the moment

238
00:12:17,720 --> 00:12:23,060
and it looks like our image quality is

239
00:12:20,629 --> 00:12:25,490
good and the graphics we we accomplished

240
00:12:23,059 --> 00:12:27,919
what we wanted everything is in real 3d

241
00:12:25,490 --> 00:12:30,409
now it runs through the z-buffer so

242
00:12:27,919 --> 00:12:33,049
there is no sorting you can dump as much

243
00:12:30,409 --> 00:12:35,120
stuff in as you want and really the only

244
00:12:33,049 --> 00:12:37,579
thing that I think we might do in the

245
00:12:35,120 --> 00:12:41,529
future to it from a structure that's

246
00:12:37,580 --> 00:12:44,900
there now is when I shift the art pack

247
00:12:41,529 --> 00:12:46,850
to update to new artwork I may make it

248
00:12:44,899 --> 00:12:50,720
so that our artwork is all kind of

249
00:12:46,850 --> 00:12:55,120
pre-processed to be in tiles that can

250
00:12:50,720 --> 00:13:02,690
can all be the same resolution roughly

251
00:12:55,120 --> 00:13:06,500
so that we can use like a texture array

252
00:13:02,690 --> 00:13:08,210
because right now you know we on cards

253
00:13:06,500 --> 00:13:11,570
that aren't fast at this on NVIDIA you

254
00:13:08,210 --> 00:13:13,910
don't see this at all but we take a long

255
00:13:11,570 --> 00:13:16,550
time in OpenGL renderer commands right

256
00:13:13,909 --> 00:13:20,629
now and the reason for that is we have

257
00:13:16,549 --> 00:13:25,779
to change texture handle every single

258
00:13:20,629 --> 00:13:30,529
sprite right which is just way too much

259
00:13:25,779 --> 00:13:32,929
a lot of modern cards can elide those

260
00:13:30,529 --> 00:13:35,539
changes like Nvidia drivers just eat

261
00:13:32,929 --> 00:13:38,029
those for breakfast and that I assume is

262
00:13:35,539 --> 00:13:41,029
because the texture handle is just a

263
00:13:38,029 --> 00:13:43,429
pointer basically and you don't actually

264
00:13:41,029 --> 00:13:46,009
need to

265
00:13:43,429 --> 00:13:49,429
we start anything you can just inline it

266
00:13:46,009 --> 00:13:52,069
in the stream and if the dispatches can

267
00:13:49,429 --> 00:13:54,769
just go very quickly there isn't it's

268
00:13:52,070 --> 00:13:56,750
not a whole state change that happens

269
00:13:54,769 --> 00:13:58,819
whereas on old cards that's not true the

270
00:13:56,750 --> 00:14:00,590
texture unit have to be reproduced up

271
00:13:58,820 --> 00:14:02,840
and it really like slows things down so

272
00:14:00,590 --> 00:14:04,460
on older cards like this you pay a huge

273
00:14:02,840 --> 00:14:07,430
penalty for it on modern cars working

274
00:14:04,460 --> 00:14:09,290
video you don't even really see it I was

275
00:14:07,429 --> 00:14:14,419
noticing that when I ran this on a more

276
00:14:09,289 --> 00:14:16,189
modern GPU the other day so we you know

277
00:14:14,419 --> 00:14:17,750
it's not super clear that that's

278
00:14:16,190 --> 00:14:20,030
something that we want to do for sure

279
00:14:17,750 --> 00:14:22,789
but I do think it's something that we

280
00:14:20,029 --> 00:14:28,370
probably want to do and when you take a

281
00:14:22,789 --> 00:14:30,439
look at how things are at the moment you

282
00:14:28,370 --> 00:14:33,500
know it sure seems like that would be

283
00:14:30,440 --> 00:14:35,990
fine you know basically we could just

284
00:14:33,500 --> 00:14:38,659
have most of our stuff have it you know

285
00:14:35,990 --> 00:14:40,730
lives in a 256 by 256 bitmap or whatever

286
00:14:38,659 --> 00:14:43,069
and off we go

287
00:14:40,730 --> 00:14:44,659
and I'll just you know resize things to

288
00:14:43,070 --> 00:14:47,810
fit that properly or something so we can

289
00:14:44,659 --> 00:14:50,929
do a pretty simple texture Atlas pink

290
00:14:47,809 --> 00:14:52,759
scheme or texture array scheme we could

291
00:14:50,929 --> 00:14:57,519
do a pretty simple one of those without

292
00:14:52,759 --> 00:15:01,580
a lot of headache and maybe we should

293
00:14:57,519 --> 00:15:04,819
right so we can certainly take a look at

294
00:15:01,580 --> 00:15:06,980
that and and so I might do some of that

295
00:15:04,820 --> 00:15:10,160
but that's the that's literally it and

296
00:15:06,980 --> 00:15:13,250
all that would be is a slight change in

297
00:15:10,159 --> 00:15:15,469
how we're submitting our textures and

298
00:15:13,250 --> 00:15:17,720
then getting that loop to not change

299
00:15:15,470 --> 00:15:19,399
textures every frame every sprite it

300
00:15:17,720 --> 00:15:22,550
would just change the texture once and

301
00:15:19,399 --> 00:15:24,860
go so that's you know something we might

302
00:15:22,549 --> 00:15:27,319
do other than that I think now we're

303
00:15:24,860 --> 00:15:29,330
down to optional features right we're

304
00:15:27,320 --> 00:15:31,610
getting good render quality everything's

305
00:15:29,330 --> 00:15:36,410
in 3d I don't see sorting problems

306
00:15:31,610 --> 00:15:39,470
really I don't see artefacts that I'm

307
00:15:36,409 --> 00:15:42,949
not willing to live with so it's really

308
00:15:39,470 --> 00:15:44,889
pretty clean and I'm going to go forward

309
00:15:42,950 --> 00:15:47,810
there so what I was thinking is like

310
00:15:44,889 --> 00:15:49,399
maybe just get some some basic lighting

311
00:15:47,809 --> 00:15:53,469
for us because I feel like we're going

312
00:15:49,399 --> 00:15:57,049
to want a little bit of lighting in here

313
00:15:53,470 --> 00:16:03,019
something where we can

314
00:15:57,049 --> 00:16:03,019
you know put down some light sources and

315
00:16:05,210 --> 00:16:12,750
you know probably do something with some

316
00:16:10,200 --> 00:16:15,629
some normals with the shading we have

317
00:16:12,750 --> 00:16:18,690
the option of having our sprites have

318
00:16:15,629 --> 00:16:21,000
normal maps on them and I don't know to

319
00:16:18,690 --> 00:16:24,060
what extent we really want to do that

320
00:16:21,000 --> 00:16:25,440
because it's a question of you know

321
00:16:24,059 --> 00:16:28,259
whether that's going to work with the

322
00:16:25,440 --> 00:16:30,360
art style or not sometimes it can be a

323
00:16:28,259 --> 00:16:33,929
little bit difficult to figure out if

324
00:16:30,360 --> 00:16:35,700
that's going to be good or bad but we

325
00:16:33,929 --> 00:16:37,559
basically have a situation where we want

326
00:16:35,700 --> 00:16:39,240
at least some lighting so even if we

327
00:16:37,559 --> 00:16:42,359
were going to just do very basic

328
00:16:39,240 --> 00:16:47,220
lighting that didn't even have any

329
00:16:42,360 --> 00:16:49,950
normals it was just you know regional we

330
00:16:47,220 --> 00:16:51,930
at least want that in there somewhere

331
00:16:49,950 --> 00:16:56,280
right we want some regional lighting to

332
00:16:51,929 --> 00:16:58,469
to exist somewhere so what I want to do

333
00:16:56,279 --> 00:17:02,850
is just basically throw a little bit of

334
00:16:58,470 --> 00:17:06,150
that in and and you know get ourselves

335
00:17:02,850 --> 00:17:08,009
something that can have lights happen I

336
00:17:06,150 --> 00:17:09,709
so what's the way I want to do this at

337
00:17:08,009 --> 00:17:13,019
the moment

338
00:17:09,709 --> 00:17:15,509
is is not particularly interesting all I

339
00:17:13,019 --> 00:17:18,059
really want to do is say well let's

340
00:17:15,509 --> 00:17:20,338
let's go ahead and just do the simplest

341
00:17:18,059 --> 00:17:23,609
like stupidest possible thing and we'll

342
00:17:20,338 --> 00:17:26,429
start there right so I'm going to go

343
00:17:23,609 --> 00:17:30,089
into our shaders here and you know we've

344
00:17:26,430 --> 00:17:31,769
got this one shader that does

345
00:17:30,089 --> 00:17:37,769
essentially everything so this is our

346
00:17:31,769 --> 00:17:39,869
compiled v bias program right and this

347
00:17:37,769 --> 00:17:43,559
is the thing that draws subsequently

348
00:17:39,869 --> 00:17:47,429
everything so if we put lighting into

349
00:17:43,559 --> 00:17:49,679
this shader in some way everything that

350
00:17:47,430 --> 00:17:53,670
we drew would be lit by that algorithm

351
00:17:49,680 --> 00:17:57,029
whatever it is so what I'd like to do is

352
00:17:53,670 --> 00:18:01,050
start by saying well let's suppose that

353
00:17:57,029 --> 00:18:04,950
we had some light source what could we

354
00:18:01,049 --> 00:18:09,210
do to put in some sort of really basic

355
00:18:04,950 --> 00:18:10,929
you know not good just simple simple

356
00:18:09,210 --> 00:18:12,970
lighting

357
00:18:10,929 --> 00:18:15,580
so let's start with something really

358
00:18:12,970 --> 00:18:20,669
straightforward let's start with sort of

359
00:18:15,579 --> 00:18:26,288
a well I'll mention a few things for you

360
00:18:20,669 --> 00:18:27,669
all right so if we were going to do real

361
00:18:26,288 --> 00:18:31,808
lighting there's a number of things that

362
00:18:27,669 --> 00:18:33,460
you have to take count of right and the

363
00:18:31,808 --> 00:18:35,230
problem with real lighting is that you

364
00:18:33,460 --> 00:18:38,048
kind of sometimes have to go all the way

365
00:18:35,230 --> 00:18:41,019
with real lighting otherwise you're in a

366
00:18:38,048 --> 00:18:42,250
bit of a pickle so first let me say

367
00:18:41,019 --> 00:18:47,048
something about real lighting that's

368
00:18:42,250 --> 00:18:48,369
kind of difficult to understand trying

369
00:18:47,048 --> 00:18:49,619
to get how in-depth I want to go with

370
00:18:48,369 --> 00:18:52,779
this but here we go

371
00:18:49,619 --> 00:18:56,408
so let's suppose that I have a source of

372
00:18:52,779 --> 00:18:59,649
photons right because what is light you

373
00:18:56,409 --> 00:19:01,750
know light equals photons for our

374
00:18:59,650 --> 00:19:04,210
purposes now I'm not trying to make a

375
00:19:01,750 --> 00:19:07,329
statement about quantum mechanics or

376
00:19:04,210 --> 00:19:11,169
anything here so this is you know

377
00:19:07,329 --> 00:19:12,819
graphics that we're talking about and in

378
00:19:11,169 --> 00:19:15,580
terms of graphics all we really care

379
00:19:12,819 --> 00:19:18,700
about in the real world most of the time

380
00:19:15,579 --> 00:19:22,168
is that we've got essentially light

381
00:19:18,700 --> 00:19:25,450
sources that emit photons from them

382
00:19:22,169 --> 00:19:27,880
those photons travel in straight lines

383
00:19:25,450 --> 00:19:29,319
so when a when a photon is emitted from

384
00:19:27,880 --> 00:19:31,870
a light source it travels in a straight

385
00:19:29,319 --> 00:19:35,859
line until it hits something when it

386
00:19:31,869 --> 00:19:37,509
hits something some of it some there's a

387
00:19:35,859 --> 00:19:40,389
percentage chance that that photon will

388
00:19:37,509 --> 00:19:42,759
be absorbed and there's a percentage

389
00:19:40,390 --> 00:19:47,080
chance that that photon will be bounced

390
00:19:42,759 --> 00:19:48,129
out right and again this is not trying

391
00:19:47,079 --> 00:19:49,538
to make a statement about quantum

392
00:19:48,130 --> 00:19:51,940
mechanics it's just trying to make a

393
00:19:49,538 --> 00:19:54,970
statement about the parts we think need

394
00:19:51,940 --> 00:19:57,480
to think about for graphics so typically

395
00:19:54,970 --> 00:20:02,679
what happens is we have a light right

396
00:19:57,480 --> 00:20:06,579
and we have an eye and what we want to

397
00:20:02,679 --> 00:20:09,759
know is photons that came out of a light

398
00:20:06,579 --> 00:20:12,189
source they hit something right they

399
00:20:09,759 --> 00:20:15,009
bounced off and they hit our eyes we are

400
00:20:12,190 --> 00:20:18,308
trying to sort of say with lighting we

401
00:20:15,009 --> 00:20:22,269
want to accumulate all of that right the

402
00:20:18,308 --> 00:20:23,569
ideal goal in a graphics you know in a

403
00:20:22,269 --> 00:20:27,109
lighting algorithm in a

404
00:20:23,569 --> 00:20:28,970
realistic lighting algorithm would be to

405
00:20:27,109 --> 00:20:31,339
take all of the photons that were

406
00:20:28,970 --> 00:20:33,110
emitted over you know whatever the frame

407
00:20:31,339 --> 00:20:35,720
time is a sixtieth of a second let's say

408
00:20:33,109 --> 00:20:38,209
take all of the photons emitted by a

409
00:20:35,720 --> 00:20:40,610
light source bounce them all around see

410
00:20:38,210 --> 00:20:44,509
which one of them hit the eye and that

411
00:20:40,609 --> 00:20:46,729
is the the lighting right and you can

412
00:20:44,509 --> 00:20:48,440
imagine this is per pixel right every

413
00:20:46,730 --> 00:20:51,019
pixel it's whether a photon would have

414
00:20:48,440 --> 00:20:53,029
come in at that point in the CCD if it's

415
00:20:51,019 --> 00:20:54,920
your camera or your retina is it's your

416
00:20:53,029 --> 00:20:57,769
eye right if it would have hit that

417
00:20:54,920 --> 00:20:59,120
settle of the retina we sum all of the

418
00:20:57,769 --> 00:21:01,220
photons that would have hit it and after

419
00:20:59,119 --> 00:21:05,269
we get and furthermore these photons

420
00:21:01,220 --> 00:21:07,610
they have a wavelength right a photon is

421
00:21:05,269 --> 00:21:10,940
a you know is a thing that sort of

422
00:21:07,609 --> 00:21:12,829
oscillates and that's the color right so

423
00:21:10,940 --> 00:21:16,910
by tracking the color of those photons

424
00:21:12,829 --> 00:21:18,559
we would also know what color that pixel

425
00:21:16,910 --> 00:21:23,660
should be by summing up all of those

426
00:21:18,559 --> 00:21:25,279
wavelengths right now obviously if you

427
00:21:23,660 --> 00:21:27,410
haven't gotten a sense already this is

428
00:21:25,279 --> 00:21:30,559
just the idealized model of the lighting

429
00:21:27,410 --> 00:21:32,720
process nobody actually does this why

430
00:21:30,559 --> 00:21:35,440
don't they do this because even the most

431
00:21:32,720 --> 00:21:37,940
basic scene with like one light in it is

432
00:21:35,440 --> 00:21:40,430
billions and billions of photons and

433
00:21:37,940 --> 00:21:43,009
there's no way to simulate billions and

434
00:21:40,430 --> 00:21:44,870
billions of photons in a sixtieth of a

435
00:21:43,009 --> 00:21:47,000
second so for a game is totally

436
00:21:44,869 --> 00:21:54,109
unacceptable even for offline rendering

437
00:21:47,000 --> 00:21:56,000
it's usually too slow to do that so what

438
00:21:54,109 --> 00:22:00,669
we typically try to do with lighting is

439
00:21:56,000 --> 00:22:03,289
we try to do one of two things in the

440
00:22:00,670 --> 00:22:07,160
pre-rendered world we try to come up

441
00:22:03,289 --> 00:22:09,680
with essentially ways of sampling this

442
00:22:07,160 --> 00:22:14,630
process so so you know if you're you

443
00:22:09,680 --> 00:22:16,730
know Pixar right or your next limit and

444
00:22:14,630 --> 00:22:21,580
you make max well you know the renderer

445
00:22:16,730 --> 00:22:24,920
for architecture and stuff or whatever

446
00:22:21,579 --> 00:22:27,289
so you can take a long time and lots of

447
00:22:24,920 --> 00:22:29,570
computing power to produce an image what

448
00:22:27,289 --> 00:22:32,210
you typically do with lighting is you

449
00:22:29,569 --> 00:22:36,799
try to come up with ways of sampling

450
00:22:32,210 --> 00:22:39,860
this process in ways that do not

451
00:22:36,799 --> 00:22:43,399
to simulate all billion billion trillion

452
00:22:39,859 --> 00:22:47,359
quadrillion mozillian photons to get a

453
00:22:43,400 --> 00:22:49,300
good result right and so they do things

454
00:22:47,359 --> 00:22:51,139
like metropolis light transport

455
00:22:49,299 --> 00:22:53,930
transport and bi-directional path

456
00:22:51,140 --> 00:22:56,570
tracing and blah blah blah blah which

457
00:22:53,930 --> 00:22:59,870
are all these sort of ways of saying we

458
00:22:56,569 --> 00:23:02,450
have this tremendous number of photon

459
00:22:59,869 --> 00:23:04,819
paths in the world we have no way of

460
00:23:02,450 --> 00:23:06,620
simulating them all how do we sort of go

461
00:23:04,819 --> 00:23:08,980
about picking which ones might be

462
00:23:06,619 --> 00:23:12,589
relative relevant to simulate and

463
00:23:08,980 --> 00:23:14,650
approximating from those what the rest

464
00:23:12,589 --> 00:23:19,579
of the lighting should look like right

465
00:23:14,650 --> 00:23:20,660
so again you can kind of imagine I don't

466
00:23:19,579 --> 00:23:22,460
want to go into too much detail cuz

467
00:23:20,660 --> 00:23:23,750
they're not relevant here but you can't

468
00:23:22,460 --> 00:23:26,029
imagine how these techniques work

469
00:23:23,750 --> 00:23:28,849
because if you think about it there's

470
00:23:26,029 --> 00:23:31,309
first of all a ton of photons never hit

471
00:23:28,849 --> 00:23:33,139
the eye right if you think about the

472
00:23:31,309 --> 00:23:34,819
photons look around your room if you

473
00:23:33,140 --> 00:23:36,920
think about all the photons that are

474
00:23:34,819 --> 00:23:38,899
bouncing around your room right now most

475
00:23:36,920 --> 00:23:41,150
of them don't go into your eye so for

476
00:23:38,900 --> 00:23:44,630
starters typically what you do is you

477
00:23:41,150 --> 00:23:47,269
trace outward from the eye right to look

478
00:23:44,630 --> 00:23:48,890
for lights as if the photons were

479
00:23:47,269 --> 00:23:51,200
traveling backwards right

480
00:23:48,890 --> 00:23:53,180
so just from there that first initial

481
00:23:51,200 --> 00:23:55,100
transform is a good way of starting to

482
00:23:53,180 --> 00:23:57,710
say let's cut out a bunch of photons we

483
00:23:55,099 --> 00:23:59,089
don't care about furthermore when you

484
00:23:57,710 --> 00:24:00,860
start to look at surfaces and stuff you

485
00:23:59,089 --> 00:24:02,329
can say well you know I know this

486
00:24:00,859 --> 00:24:04,519
surface has certain reflectance

487
00:24:02,329 --> 00:24:07,189
properties so I know that photons that

488
00:24:04,519 --> 00:24:08,869
come in you know about here almost never

489
00:24:07,190 --> 00:24:11,240
they almost always get absorbed and

490
00:24:08,869 --> 00:24:12,079
photons that come in here always bounce

491
00:24:11,240 --> 00:24:13,970
out that way

492
00:24:12,079 --> 00:24:15,079
so if I'm looking at it this way I know

493
00:24:13,970 --> 00:24:16,490
I don't have to look in this direction

494
00:24:15,079 --> 00:24:19,369
and I know I don't have to look in this

495
00:24:16,490 --> 00:24:20,930
direction roughly because those photons

496
00:24:19,369 --> 00:24:22,669
almost could never bounced out to the

497
00:24:20,930 --> 00:24:25,840
eye from that point so I can concentrate

498
00:24:22,670 --> 00:24:28,670
my search in like this direction right

499
00:24:25,839 --> 00:24:31,730
so you do a bunch of stuff based on

500
00:24:28,670 --> 00:24:33,710
probabilities essentially to start to

501
00:24:31,730 --> 00:24:35,240
try and reconstruct what it is and some

502
00:24:33,710 --> 00:24:37,779
of this really fascinating work in this

503
00:24:35,240 --> 00:24:37,779
direction

504
00:24:38,380 --> 00:24:43,310
specifically the sort of the chain of

505
00:24:40,700 --> 00:24:44,509
work this that started by Eric beech

506
00:24:43,309 --> 00:24:47,119
when you wrote metropolis light

507
00:24:44,509 --> 00:24:48,980
transport and everything that followed

508
00:24:47,119 --> 00:24:50,699
thereafter is really interesting a lot

509
00:24:48,980 --> 00:24:53,368
of it has to do with basically saying

510
00:24:50,700 --> 00:24:54,840
we can reduce the number of samples we

511
00:24:53,368 --> 00:24:56,939
need to take and the number of passed we

512
00:24:54,839 --> 00:24:58,439
need to compute rather dramatically just

513
00:24:56,940 --> 00:25:01,190
by looking at this problem as a

514
00:24:58,440 --> 00:25:04,470
probabilistic problem and focusing

515
00:25:01,190 --> 00:25:06,808
understanding how to take samples in the

516
00:25:04,470 --> 00:25:09,108
places they are most useful and how to

517
00:25:06,808 --> 00:25:11,759
weight them properly to produce results

518
00:25:09,108 --> 00:25:18,798
that on average produce the correct

519
00:25:11,759 --> 00:25:22,679
result as quickly as possible right so

520
00:25:18,798 --> 00:25:25,048
the offline world does things that way

521
00:25:22,679 --> 00:25:28,320
and the reason for that is again they're

522
00:25:25,048 --> 00:25:30,509
trying to produce very realistic results

523
00:25:28,319 --> 00:25:38,730
and they can spend 12 hours a frame

524
00:25:30,509 --> 00:25:42,960
doing so if they want to right not so

525
00:25:38,730 --> 00:25:44,940
for handmade hero and handmade hero

526
00:25:42,960 --> 00:25:47,489
isn't even supposed to require a super

527
00:25:44,940 --> 00:25:49,619
high-end graphics card to run

528
00:25:47,489 --> 00:25:51,840
it's a 2-d game so we don't even have

529
00:25:49,618 --> 00:25:52,888
the geometry we would need to do a lot

530
00:25:51,839 --> 00:25:55,408
of the stuff that we're talking about

531
00:25:52,888 --> 00:25:58,168
there we would have to approximate it so

532
00:25:55,409 --> 00:26:00,269
we're not trying to do that what we're

533
00:25:58,169 --> 00:26:02,009
trying to do is we're trying to come up

534
00:26:00,269 --> 00:26:04,169
with something that will be artistically

535
00:26:02,009 --> 00:26:05,579
pleasing right we basically are trying

536
00:26:04,169 --> 00:26:10,679
to come up with something that has to do

537
00:26:05,579 --> 00:26:12,839
with life that will be reasonable that

538
00:26:10,679 --> 00:26:15,869
will make you feel like there is some

539
00:26:12,839 --> 00:26:22,048
lighting without costing a huge amount

540
00:26:15,868 --> 00:26:24,118
of computation now let's talk about some

541
00:26:22,048 --> 00:26:27,648
properties of light that have an effect

542
00:26:24,118 --> 00:26:31,459
here so first of all let's talk about

543
00:26:27,648 --> 00:26:31,459
the concept of fall-off

544
00:26:32,388 --> 00:26:39,418
now one of the myths of light that you

545
00:26:37,378 --> 00:26:42,178
know a lot of people intuitively thinks

546
00:26:39,419 --> 00:26:44,028
but it's not actually true is that light

547
00:26:42,179 --> 00:26:46,528
gets dimmer as it gets further away

548
00:26:44,028 --> 00:26:49,769
right and we'll talk about why that is

549
00:26:46,528 --> 00:26:52,398
in a second and in fact it actually will

550
00:26:49,769 --> 00:26:55,349
for certain things that we are

551
00:26:52,398 --> 00:26:57,959
interested in so I don't mean to tell

552
00:26:55,349 --> 00:26:59,668
you that it doesn't at all but it's

553
00:26:57,960 --> 00:27:01,649
important to understand that that's

554
00:26:59,669 --> 00:27:03,090
actually kind of a wrong way to think

555
00:27:01,648 --> 00:27:05,508
about light

556
00:27:03,089 --> 00:27:07,949
it's more of a property of the

557
00:27:05,509 --> 00:27:09,360
integration of light and we'll see that

558
00:27:07,950 --> 00:27:11,819
in a second

559
00:27:09,359 --> 00:27:14,158
so let's talk about that let's talk

560
00:27:11,819 --> 00:27:16,678
about some of the pro the properties of

561
00:27:14,159 --> 00:27:18,419
these protons that we care about so

562
00:27:16,679 --> 00:27:24,919
let's say that there is a distant light

563
00:27:18,419 --> 00:27:28,110
source right let's say that there is a

564
00:27:24,919 --> 00:27:38,309
street lamp maybe right so let's say

565
00:27:28,109 --> 00:27:46,319
I've got like a street lamp here and I

566
00:27:38,308 --> 00:27:51,509
am looking at the street lamp the street

567
00:27:46,319 --> 00:27:55,109
lamp is lit up my light bulb I am seeing

568
00:27:51,509 --> 00:28:00,778
a photon that comes out and it hits my

569
00:27:55,109 --> 00:28:05,158
eye right and furthermore let's say that

570
00:28:00,778 --> 00:28:07,548
I have walked backwards and there's a

571
00:28:05,159 --> 00:28:12,210
photon that comes back and hits my eye

572
00:28:07,548 --> 00:28:14,579
here the crucial thing to start your

573
00:28:12,210 --> 00:28:19,110
understanding of light with is that that

574
00:28:14,579 --> 00:28:24,359
photon does not get dimmer as it travels

575
00:28:19,109 --> 00:28:27,359
further away photons do not dim along a

576
00:28:24,359 --> 00:28:31,498
line when a photon comes out of a light

577
00:28:27,359 --> 00:28:34,469
source and travels a mile and hits your

578
00:28:31,499 --> 00:28:37,139
eye it is as bright as if you were

579
00:28:34,470 --> 00:28:39,929
standing with your eye right up next to

580
00:28:37,138 --> 00:28:42,829
the light there is no difference in the

581
00:28:39,929 --> 00:28:46,830
photons perceived brightness to your eye

582
00:28:42,829 --> 00:28:49,980
okay so this is crucial light does not

583
00:28:46,829 --> 00:28:51,658
diminish along a line ever under any

584
00:28:49,980 --> 00:28:55,710
circumstances that I know of

585
00:28:51,659 --> 00:28:57,330
period now again I'm not a quantum

586
00:28:55,710 --> 00:28:59,970
physicist so maybe if you're going to

587
00:28:57,329 --> 00:29:02,999
physically be like ah yes it does in if

588
00:28:59,970 --> 00:29:05,368
you go many millennia

589
00:29:02,999 --> 00:29:07,980
you know like years away and you're

590
00:29:05,368 --> 00:29:11,579
talking about the relativistic spinning

591
00:29:07,980 --> 00:29:13,589
of the bubble right so you know I don't

592
00:29:11,579 --> 00:29:14,418
know maybe there is some way for a

593
00:29:13,589 --> 00:29:16,388
photon

594
00:29:14,419 --> 00:29:18,259
somehow be dimmer or brighter in

595
00:29:16,388 --> 00:29:21,168
relativistic terms there's only I have

596
00:29:18,259 --> 00:29:24,139
no idea like the energy that it that it

597
00:29:21,169 --> 00:29:26,570
has will shift and that would seem

598
00:29:24,138 --> 00:29:29,439
logical because you know the wavelength

599
00:29:26,569 --> 00:29:34,519
of a light but again in terms of

600
00:29:29,440 --> 00:29:36,470
brightness there's there's the

601
00:29:34,519 --> 00:29:38,269
wavelength of the light is its color

602
00:29:36,470 --> 00:29:39,858
it's not as brightness right if energy

603
00:29:38,269 --> 00:29:43,249
is its color is this color not its

604
00:29:39,858 --> 00:29:45,048
brightness and so what do I mean when I

605
00:29:43,249 --> 00:29:46,909
say this you know and why do things look

606
00:29:45,048 --> 00:29:50,868
brighter and dimmer well the thing to

607
00:29:46,909 --> 00:29:54,230
remember is what's happening when you

608
00:29:50,868 --> 00:29:56,749
see a brightness is you are seeing the

609
00:29:54,230 --> 00:30:02,179
amount of photons that hit your eye

610
00:29:56,749 --> 00:30:03,649
right it's effectively account so when

611
00:30:02,179 --> 00:30:06,528
you look at something in sight is it

612
00:30:03,648 --> 00:30:12,229
brighter or dimmer what you're actually

613
00:30:06,528 --> 00:30:16,308
asking is how many photons have hit your

614
00:30:12,230 --> 00:30:18,829
eye from this light source okay so a

615
00:30:16,308 --> 00:30:20,808
single beam of light a photon that goes

616
00:30:18,829 --> 00:30:24,319
out of the light source and hits your I

617
00:30:20,808 --> 00:30:27,499
can never get stronger or weaker for

618
00:30:24,319 --> 00:30:29,808
that individual photon so when a light

619
00:30:27,499 --> 00:30:31,159
looks brighter or dimmer to you the only

620
00:30:29,808 --> 00:30:35,658
thing that can be happening there is

621
00:30:31,159 --> 00:30:37,759
less photons or more photons are hitting

622
00:30:35,659 --> 00:30:39,619
your eye from that light source that's

623
00:30:37,759 --> 00:30:41,269
the only thing that can change your

624
00:30:39,618 --> 00:30:44,749
perceived brightness of that light

625
00:30:41,269 --> 00:30:48,829
source the photon itself that goes along

626
00:30:44,749 --> 00:30:53,419
the line doesn't get weaker as it comes

627
00:30:48,829 --> 00:30:58,548
to you okay again really important to

628
00:30:53,419 --> 00:31:05,919
understand that so now let's take it one

629
00:30:58,548 --> 00:31:10,690
step forward so given that brightness is

630
00:31:05,919 --> 00:31:10,690
the count of photons

631
00:31:11,490 --> 00:31:19,190
if I were to ask how many photons would

632
00:31:16,648 --> 00:31:24,689
be hitting my eye at these two distances

633
00:31:19,190 --> 00:31:27,690
right if I were to ask how many I would

634
00:31:24,690 --> 00:31:30,509
be able to ascertain the brightness so

635
00:31:27,690 --> 00:31:34,590
let's ask that question how they need

636
00:31:30,509 --> 00:31:37,099
photons proportionally speaking will hit

637
00:31:34,589 --> 00:31:44,250
my eye at say one mile away

638
00:31:37,099 --> 00:31:48,538
right versus two miles away it's a

639
00:31:44,250 --> 00:31:50,159
legitimate question right well it's a

640
00:31:48,538 --> 00:31:51,720
little difficult to answer without

641
00:31:50,159 --> 00:31:54,480
thinking a little bit more about how

642
00:31:51,720 --> 00:31:57,000
this is emitting photons if this were a

643
00:31:54,480 --> 00:31:58,679
laser meaning it's a highly correlated

644
00:31:57,000 --> 00:31:59,869
stream of light where all the photons

645
00:31:58,679 --> 00:32:02,548
are shot in a very specific direction

646
00:31:59,869 --> 00:32:04,619
the answer is probably the roughly the

647
00:32:02,548 --> 00:32:07,168
same number right because remember

648
00:32:04,619 --> 00:32:08,729
photons do not diminish along a line and

649
00:32:07,169 --> 00:32:12,600
if I were shooting all of those photons

650
00:32:08,730 --> 00:32:13,440
out directly in a line then they would

651
00:32:12,599 --> 00:32:16,439
just all hit my eye

652
00:32:13,440 --> 00:32:18,450
in both cases right and yeah lasers

653
00:32:16,440 --> 00:32:19,649
aren't perfect so eventually I get far

654
00:32:18,450 --> 00:32:22,700
enough away that maybe that wouldn't be

655
00:32:19,648 --> 00:32:25,109
true but for the vast majority of that

656
00:32:22,700 --> 00:32:29,909
relevant distance it would just all the

657
00:32:25,109 --> 00:32:32,849
hotels would hit right so let's talk

658
00:32:29,909 --> 00:32:34,230
about something that's not a laser since

659
00:32:32,849 --> 00:32:36,178
lasers are usually not only care about

660
00:32:34,230 --> 00:32:37,649
right a laser pointer is not the thing

661
00:32:36,179 --> 00:32:39,990
that we're lighting both most our scenes

662
00:32:37,648 --> 00:32:41,819
with so what is the light like a street

663
00:32:39,990 --> 00:32:43,558
lamp - well what it does is it's

664
00:32:41,819 --> 00:32:45,389
outputting a certain number of photons

665
00:32:43,558 --> 00:32:48,750
per second right but it's outputting

666
00:32:45,390 --> 00:32:52,500
them in every which way right so if I

667
00:32:48,750 --> 00:32:55,288
were to take what angle my eye can see

668
00:32:52,500 --> 00:32:58,679
right I've got a very different set up

669
00:32:55,288 --> 00:33:00,869
than a laser so let's take a look at

670
00:32:58,679 --> 00:33:02,149
what that looks like here is my light

671
00:33:00,869 --> 00:33:06,839
bulb

672
00:33:02,148 --> 00:33:10,500
- here's my light bulb and here is my

673
00:33:06,839 --> 00:33:13,798
eye now we know the eye is a lens so

674
00:33:10,500 --> 00:33:16,679
it's going to focus a cone of light onto

675
00:33:13,798 --> 00:33:18,558
a point right a particular retinal cell

676
00:33:16,679 --> 00:33:20,370
in the back let's say here is that cell

677
00:33:18,558 --> 00:33:22,940
we're talking about that particular

678
00:33:20,369 --> 00:33:24,869
retinal cell so one point of your vision

679
00:33:22,940 --> 00:33:29,430
well this lens

680
00:33:24,869 --> 00:33:31,199
is going to focus basically a and we'll

681
00:33:29,430 --> 00:33:33,960
say this is a point light source for now

682
00:33:31,200 --> 00:33:36,269
it's really well I don't have to so it's

683
00:33:33,960 --> 00:33:39,390
a spherical light source so it's going

684
00:33:36,269 --> 00:33:42,180
to take all of the light that can be

685
00:33:39,390 --> 00:33:44,580
shot in this direction right and it's

686
00:33:42,180 --> 00:33:46,500
going to focus it like that so it's

687
00:33:44,579 --> 00:33:47,879
effectively it's not really a cone it

688
00:33:46,500 --> 00:33:49,680
would be a cone if we were talking about

689
00:33:47,880 --> 00:33:51,930
a point light source right it would be a

690
00:33:49,680 --> 00:33:54,990
cone it was like a cone that map's down

691
00:33:51,930 --> 00:34:01,170
to a point via the lens this is the eye

692
00:33:54,990 --> 00:34:02,970
lens right but we're you know even if

693
00:34:01,170 --> 00:34:04,440
the light source has some area to it

694
00:34:02,970 --> 00:34:06,089
we're still talking about a cone that's

695
00:34:04,440 --> 00:34:09,389
just kind of a little fatter at the end

696
00:34:06,089 --> 00:34:12,329
and inside this cone right it's shooting

697
00:34:09,389 --> 00:34:14,250
out all these photons in this direction

698
00:34:12,329 --> 00:34:16,378
and all of those photons that are shot

699
00:34:14,250 --> 00:34:18,418
out in that direction they will come and

700
00:34:16,378 --> 00:34:21,869
kick this lens and be focused onto the

701
00:34:18,418 --> 00:34:24,148
eye right that's what a lens does that's

702
00:34:21,869 --> 00:34:26,279
why you use a lens by the way the idea

703
00:34:24,148 --> 00:34:29,730
behind the lens is to take a cone of

704
00:34:26,280 --> 00:34:32,580
light instead of a point of light right

705
00:34:29,730 --> 00:34:36,349
it helps you get a brighter image when

706
00:34:32,579 --> 00:34:40,679
you're looking at something as inside

707
00:34:36,349 --> 00:34:44,639
all right so what does this mean well

708
00:34:40,679 --> 00:34:47,309
this lens from our eye it does not get

709
00:34:44,639 --> 00:34:49,260
bigger when we get further away right so

710
00:34:47,309 --> 00:34:51,960
if we were to take what would happen if

711
00:34:49,260 --> 00:34:54,060
I was to put the lens back here back

712
00:34:51,960 --> 00:34:57,599
here further it's still the same size

713
00:34:54,059 --> 00:35:03,259
right so what ends up happening is let's

714
00:34:57,599 --> 00:35:06,000
say for sake of argument this is a very

715
00:35:03,260 --> 00:35:08,430
weak light source so it's not emitting

716
00:35:06,000 --> 00:35:11,880
very many photons per second and let's

717
00:35:08,429 --> 00:35:14,309
say that there's only a few that will

718
00:35:11,880 --> 00:35:16,559
actually hit there's only three that it

719
00:35:14,309 --> 00:35:22,309
emitted that will actually hit the lens

720
00:35:16,559 --> 00:35:22,309
and here they are okay

721
00:35:23,989 --> 00:35:30,979
so those photons hit the lens they focus

722
00:35:27,829 --> 00:35:33,348
on to this point right and that's how

723
00:35:30,980 --> 00:35:35,358
much energy I proceeded how much

724
00:35:33,349 --> 00:35:41,980
brightness I proceeded I proceeded three

725
00:35:35,358 --> 00:35:44,869
photons well now if I go back really far

726
00:35:41,980 --> 00:35:47,960
what happens now well if we continue

727
00:35:44,869 --> 00:35:57,349
these lines you will see they miss the

728
00:35:47,960 --> 00:36:01,099
lens right so only one photon will now

729
00:35:57,349 --> 00:36:06,050
be focused right only one photon will

730
00:36:01,099 --> 00:36:08,539
now be focused on to my retinal cell so

731
00:36:06,050 --> 00:36:11,990
as you move a lens further away from a

732
00:36:08,539 --> 00:36:16,519
light source it absolutely collects less

733
00:36:11,989 --> 00:36:20,868
photons from an emitter right that is

734
00:36:16,519 --> 00:36:22,130
100% true and this is before talking

735
00:36:20,869 --> 00:36:24,349
about any of the other things we need to

736
00:36:22,130 --> 00:36:27,380
talk about like participating media pays

737
00:36:24,349 --> 00:36:28,910
that sort of thing right so you can see

738
00:36:27,380 --> 00:36:34,070
very clear to the diagram as I move

739
00:36:28,909 --> 00:36:37,338
further away I collect less photons but

740
00:36:34,070 --> 00:36:39,849
and so now you're going to say well okay

741
00:36:37,338 --> 00:36:42,619
Casey you just told me that the light

742
00:36:39,849 --> 00:36:44,030
will not I just won't but so now based

743
00:36:42,619 --> 00:36:44,990
on what you told me Casey I'm going to

744
00:36:44,030 --> 00:36:46,670
go ahead and say that all right

745
00:36:44,989 --> 00:36:47,929
so lights look dimmer when I get further

746
00:36:46,670 --> 00:36:50,680
away right because they collected

747
00:36:47,929 --> 00:36:54,379
photons not so fast

748
00:36:50,679 --> 00:36:56,029
so given that this is the case you now

749
00:36:54,380 --> 00:36:58,039
have to think about this in three

750
00:36:56,030 --> 00:37:02,839
dimensions what does this actually look

751
00:36:58,039 --> 00:37:05,809
like right well a light source is there

752
00:37:02,838 --> 00:37:11,059
for emitting right and a lens is there

753
00:37:05,809 --> 00:37:14,179
for collecting stuff effectively as an

754
00:37:11,059 --> 00:37:17,719
area right if I took a solid angle right

755
00:37:14,179 --> 00:37:20,088
that I said okay how much photons are

756
00:37:17,719 --> 00:37:22,779
emitted there they kick this lens and

757
00:37:20,088 --> 00:37:25,670
they focus you know down onto a point

758
00:37:22,780 --> 00:37:27,740
everything in that assembly is an area

759
00:37:25,670 --> 00:37:29,720
we're measuring an area of photons that

760
00:37:27,739 --> 00:37:31,429
are emitted right a solid angle it's

761
00:37:29,719 --> 00:37:32,338
like a bundle it's a surface area of

762
00:37:31,429 --> 00:37:33,808
photons that are

763
00:37:32,338 --> 00:37:38,518
coming out and then hitting the lens

764
00:37:33,809 --> 00:37:40,650
then bouncing back right that area as it

765
00:37:38,518 --> 00:37:43,108
gets further from the light source right

766
00:37:40,650 --> 00:37:45,599
gets bigger and bigger proportional to

767
00:37:43,108 --> 00:37:47,998
the distance so if I were to look at it

768
00:37:45,599 --> 00:37:50,460
again from the side as I emit outwards

769
00:37:47,998 --> 00:37:53,699
right what I'm going to end up doing is

770
00:37:50,460 --> 00:37:56,728
as I get further away the spread of

771
00:37:53,699 --> 00:37:58,978
those photons is going to increase with

772
00:37:56,728 --> 00:38:02,998
the distance proportional again to this

773
00:37:58,978 --> 00:38:05,669
triangle right it's get the the the size

774
00:38:02,998 --> 00:38:07,259
of this effectively right the size of

775
00:38:05,670 --> 00:38:09,028
that area is going to be exactly

776
00:38:07,259 --> 00:38:11,068
proportional to the distance right

777
00:38:09,028 --> 00:38:13,048
whatever the distance is as this

778
00:38:11,068 --> 00:38:15,119
distance goes up so to will did it's a

779
00:38:13,048 --> 00:38:17,880
similar triangles relationship just like

780
00:38:15,119 --> 00:38:20,400
the projection equation right and we

781
00:38:17,880 --> 00:38:21,979
know that you know this is just going to

782
00:38:20,400 --> 00:38:23,969
be proportional to the cosine

783
00:38:21,978 --> 00:38:26,068
effectively of the hypotenuse right

784
00:38:23,969 --> 00:38:27,539
which is proportional to distance right

785
00:38:26,068 --> 00:38:30,808
and these two are proportional to each

786
00:38:27,539 --> 00:38:32,670
other as well right so basically the

787
00:38:30,809 --> 00:38:35,400
area is going to be proportional to the

788
00:38:32,670 --> 00:38:38,130
distance but remember there's two

789
00:38:35,400 --> 00:38:44,009
dimensions right we're talking about

790
00:38:38,130 --> 00:38:48,210
area squared so the same amount of

791
00:38:44,009 --> 00:38:52,170
photons as I get further away is going

792
00:38:48,210 --> 00:38:54,630
to fall on an area that's a square of

793
00:38:52,170 --> 00:38:58,818
the distance and this gives rise to

794
00:38:54,630 --> 00:39:01,950
what's called the inverse square law

795
00:38:58,818 --> 00:39:03,389
right why is it called the inverse

796
00:39:01,949 --> 00:39:05,728
square law and what does it mean

797
00:39:03,389 --> 00:39:08,969
well the inverse square law says that

798
00:39:05,728 --> 00:39:11,788
light essentially diminishes with the

799
00:39:08,969 --> 00:39:15,119
square of the distance it travels right

800
00:39:11,789 --> 00:39:18,778
and the reason for that is not just the

801
00:39:15,119 --> 00:39:20,759
photons get any less bright it's because

802
00:39:18,778 --> 00:39:23,909
the photons are spread over an

803
00:39:20,759 --> 00:39:26,670
increasingly wide area so the chance

804
00:39:23,909 --> 00:39:29,879
that you will get something will get hit

805
00:39:26,670 --> 00:39:33,329
with a photon is 1 over the distance

806
00:39:29,880 --> 00:39:35,309
squared right why because as the

807
00:39:33,329 --> 00:39:37,079
distance increases a increases and we

808
00:39:35,309 --> 00:39:38,609
know the if you know this is the side

809
00:39:37,079 --> 00:39:40,318
here I shouldn't say a it is a sounds

810
00:39:38,608 --> 00:39:43,048
like area I don't know why I picked that

811
00:39:40,318 --> 00:39:44,000
let's just say that's you know width or

812
00:39:43,048 --> 00:39:46,190
something right

813
00:39:44,000 --> 00:39:47,690
there's width so it's you know the area

814
00:39:46,190 --> 00:39:50,990
equals the width squared here in this

815
00:39:47,690 --> 00:39:53,030
case right cuz it's the square and since

816
00:39:50,989 --> 00:39:54,919
width is proportional to distance what

817
00:39:53,030 --> 00:39:57,950
that means is 1 over the distance

818
00:39:54,920 --> 00:40:00,289
squared is the chance that a particular

819
00:39:57,949 --> 00:40:02,239
photon will hit you as you get further

820
00:40:00,289 --> 00:40:04,550
away if you're right at the light source

821
00:40:02,239 --> 00:40:07,189
obviously it will always hit you as you

822
00:40:04,550 --> 00:40:18,530
get further away it diminishes with the

823
00:40:07,190 --> 00:40:20,990
distance squared right make sense ok so

824
00:40:18,530 --> 00:40:23,540
now you ask me well okay so if that's

825
00:40:20,989 --> 00:40:25,669
the case then surely what happens is as

826
00:40:23,539 --> 00:40:27,469
I get further away from a light source

827
00:40:25,670 --> 00:40:34,340
as I'm walking further away from a light

828
00:40:27,469 --> 00:40:40,659
source I it's gonna look you know if I

829
00:40:34,340 --> 00:40:44,090
were to draw its brightness curve and

830
00:40:40,659 --> 00:40:45,829
addition you know it's gonna look like

831
00:40:44,090 --> 00:40:48,860
that right it's going to look like an

832
00:40:45,829 --> 00:40:50,389
inverse squared curve or something well

833
00:40:48,860 --> 00:40:55,329
it could look like one over the you know

834
00:40:50,389 --> 00:40:59,029
1 over a square nope I that

835
00:40:55,329 --> 00:41:00,949
unfortunately is taking much too

836
00:40:59,030 --> 00:41:04,820
simplistic of view of what's happening

837
00:41:00,949 --> 00:41:07,309
here yes this is 100% correct and yes as

838
00:41:04,820 --> 00:41:09,309
I get further away the number of photons

839
00:41:07,309 --> 00:41:13,659
that are going to be hitting my eye is

840
00:41:09,309 --> 00:41:17,150
is exactly proportional to this but and

841
00:41:13,659 --> 00:41:19,309
and I should mention the actual

842
00:41:17,150 --> 00:41:21,230
brightness of the light is actually

843
00:41:19,309 --> 00:41:24,199
diminished to 1 over d squared it's

844
00:41:21,230 --> 00:41:27,170
actually happening but that is not what

845
00:41:24,199 --> 00:41:30,019
you will say and you can prove this to

846
00:41:27,170 --> 00:41:31,340
yourself right now if you want to take a

847
00:41:30,019 --> 00:41:33,440
light source in your room

848
00:41:31,340 --> 00:41:35,780
whatever your lamp is and look at it and

849
00:41:33,440 --> 00:41:36,440
walk away from it does it look like it's

850
00:41:35,780 --> 00:41:38,990
getting any dimmer

851
00:41:36,440 --> 00:41:40,909
it should 1 over d squared is a very

852
00:41:38,989 --> 00:41:43,279
steep fall-off curve right it should be

853
00:41:40,909 --> 00:41:45,049
looking crazy amounts to dimmer as you

854
00:41:43,280 --> 00:41:46,850
walk away from right up close to it to

855
00:41:45,050 --> 00:41:50,330
further away but it doesn't look any

856
00:41:46,849 --> 00:41:53,500
dinner does it right so the question is

857
00:41:50,329 --> 00:41:56,389
why the answer is because that is not

858
00:41:53,500 --> 00:41:57,659
what we're actually talking about when

859
00:41:56,389 --> 00:41:59,818
we talk about how humans for

860
00:41:57,659 --> 00:42:02,159
to brightness humans do not proceed

861
00:41:59,818 --> 00:42:05,699
brightness by saying how much light from

862
00:42:02,159 --> 00:42:07,920
this light source fell on my eye if they

863
00:42:05,699 --> 00:42:10,529
did it would look much dimmer to you

864
00:42:07,920 --> 00:42:12,568
because hey guess what the light source

865
00:42:10,530 --> 00:42:15,000
went from being really big in your eyes

866
00:42:12,568 --> 00:42:16,650
which is very bright to being very small

867
00:42:15,000 --> 00:42:18,420
in your eye which is not very much light

868
00:42:16,650 --> 00:42:20,250
at all right but that's not how you

869
00:42:18,420 --> 00:42:23,159
think of brightness what you think of

870
00:42:20,250 --> 00:42:26,369
brightness as is for the area of my eye

871
00:42:23,159 --> 00:42:29,548
that this light is taking up how bright

872
00:42:26,369 --> 00:42:32,369
is it and it just so happens that the

873
00:42:29,548 --> 00:42:36,809
projection equation is the inverse of

874
00:42:32,369 --> 00:42:40,200
the photons rent equation right my light

875
00:42:36,809 --> 00:42:43,069
source over here that's shooting out

876
00:42:40,199 --> 00:42:47,460
these photons right they are getting

877
00:42:43,068 --> 00:42:50,038
smaller at 1 over d squared right but my

878
00:42:47,460 --> 00:42:52,530
projection equation is doing the exact

879
00:42:50,039 --> 00:42:55,200
opposite to the light source as I get

880
00:42:52,530 --> 00:42:57,809
further away right it's shrinking it

881
00:42:55,199 --> 00:43:00,348
down so the size of the light source is

882
00:42:57,809 --> 00:43:04,170
going to be 1 over this distance squared

883
00:43:00,349 --> 00:43:06,480
right so effectively you have to D

884
00:43:04,170 --> 00:43:08,490
square is cancelling each other out yes

885
00:43:06,480 --> 00:43:11,250
I have 1 over d squared the number of

886
00:43:08,489 --> 00:43:13,739
photons but they're taking up 1 over D

887
00:43:11,250 --> 00:43:15,239
squares the amount of space on my eye so

888
00:43:13,739 --> 00:43:17,250
they still look exactly as bright

889
00:43:15,239 --> 00:43:23,519
because I have that many fewer cells

890
00:43:17,250 --> 00:43:26,519
receiving them right so here we get to

891
00:43:23,519 --> 00:43:30,920
the first weird part about lights which

892
00:43:26,519 --> 00:43:44,849
is that direct lighting a direct view of

893
00:43:30,920 --> 00:43:47,210
a light is constant from any reasonable

894
00:43:44,849 --> 00:43:47,210
distance

895
00:43:51,358 --> 00:43:58,900
okay I don't care how far away from this

896
00:43:55,659 --> 00:44:01,569
light you walk the only way you can make

897
00:43:58,900 --> 00:44:06,039
it look any dimmer to you if you are in

898
00:44:01,570 --> 00:44:07,840
a vacuum right in space is to get so far

899
00:44:06,039 --> 00:44:10,059
away from it that your retina cells are

900
00:44:07,840 --> 00:44:12,760
no longer at a sufficient resolution to

901
00:44:10,059 --> 00:44:16,329
pick up the photons then it will start

902
00:44:12,760 --> 00:44:17,680
looking dinner but until then it will

903
00:44:16,329 --> 00:44:20,170
look through back same brightness and

904
00:44:17,679 --> 00:44:22,500
the reason for that is the projection of

905
00:44:20,170 --> 00:44:25,720
the size of the light onto your eye is

906
00:44:22,500 --> 00:44:27,820
exactly the inverse equation of the

907
00:44:25,719 --> 00:44:30,789
photon projection equation that's

908
00:44:27,820 --> 00:44:33,760
spreading out the photons so they

909
00:44:30,789 --> 00:44:36,099
perfectly cancel just as less photons

910
00:44:33,760 --> 00:44:37,990
hit your eye you are trying to collect

911
00:44:36,099 --> 00:44:43,409
them with less cells so the apparent

912
00:44:37,989 --> 00:44:43,409
brightness is exactly the same right

913
00:44:43,559 --> 00:44:51,599
okay so now let's talk about the next

914
00:44:47,380 --> 00:44:51,599
thing that can happen in the real world

915
00:44:51,719 --> 00:44:54,699
photons do not make it all the way to

916
00:44:54,280 --> 00:44:58,780
your eye

917
00:44:54,699 --> 00:45:03,069
here is my light source again do do and

918
00:44:58,780 --> 00:45:04,780
here is my eye so Tom's launched out

919
00:45:03,070 --> 00:45:08,340
from the light source they're trying to

920
00:45:04,780 --> 00:45:16,090
get to the eye but what happens oops

921
00:45:08,340 --> 00:45:21,160
it's something in the air just sad sad

922
00:45:16,090 --> 00:45:23,230
for the photon right and what happens is

923
00:45:21,159 --> 00:45:28,500
the photon hits the dust and it's

924
00:45:23,230 --> 00:45:30,579
scattered in some direction right now

925
00:45:28,500 --> 00:45:33,489
photons that would have hit the eye

926
00:45:30,579 --> 00:45:36,460
cannot make it to the eye so some of

927
00:45:33,489 --> 00:45:38,829
them hit right that happened to avoid

928
00:45:36,460 --> 00:45:41,500
the dust some of them don't and there's

929
00:45:38,829 --> 00:45:48,130
dust all throughout here right this is

930
00:45:41,500 --> 00:45:50,289
called participating media and it

931
00:45:48,130 --> 00:45:52,809
basically means that in most real-world

932
00:45:50,289 --> 00:45:55,059
scenarios since the air even the

933
00:45:52,809 --> 00:45:56,849
atmosphere itself has water droplets in

934
00:45:55,059 --> 00:45:59,289
it and things like this can reflect life

935
00:45:56,849 --> 00:46:00,920
in a lot of circumstances when we're

936
00:45:59,289 --> 00:46:03,139
talking about

937
00:46:00,920 --> 00:46:05,480
the lighting of things we can't even

938
00:46:03,139 --> 00:46:08,719
really take it as literally as I just

939
00:46:05,480 --> 00:46:11,559
said because even though it should be

940
00:46:08,719 --> 00:46:14,149
the case that lights do not diminish

941
00:46:11,559 --> 00:46:16,009
along a distance in the real world they

942
00:46:14,150 --> 00:46:19,579
actually will and the reason that they

943
00:46:16,010 --> 00:46:22,370
will is because things dust particles

944
00:46:19,579 --> 00:46:25,549
air molecules that reflect the light are

945
00:46:22,369 --> 00:46:27,589
in the way and that will affect your

946
00:46:25,550 --> 00:46:29,690
perception of the brightness and this is

947
00:46:27,590 --> 00:46:31,430
why if you get far enough away from the

948
00:46:29,690 --> 00:46:33,769
light source or you look at it in dusty

949
00:46:31,429 --> 00:46:39,889
room it will change the appearance of

950
00:46:33,769 --> 00:46:41,599
that light source now one thing to keep

951
00:46:39,889 --> 00:46:43,579
in mind is this doesn't necessarily mean

952
00:46:41,599 --> 00:46:45,079
things will get dimmer sometimes it may

953
00:46:43,579 --> 00:46:46,730
mean that things will get brighter and

954
00:46:45,079 --> 00:46:48,079
the reason that they may get brighter is

955
00:46:46,730 --> 00:46:50,150
because gas remember light is coming

956
00:46:48,079 --> 00:46:52,309
from everywhere and can bounce in all

957
00:46:50,150 --> 00:46:54,470
sorts of directions it maybe does a

958
00:46:52,309 --> 00:46:57,739
participating media actually makes it

959
00:46:54,469 --> 00:47:01,549
easier to see so for example let's say I

960
00:46:57,739 --> 00:47:02,289
cut dense smoke right so like something

961
00:47:01,550 --> 00:47:04,490
on fire

962
00:47:02,289 --> 00:47:06,349
this is participating media that will

963
00:47:04,489 --> 00:47:07,789
make light look dimmer when I try to

964
00:47:06,349 --> 00:47:09,980
look at a light on the other side of the

965
00:47:07,789 --> 00:47:11,509
smoke it will look dimmer or may black

966
00:47:09,980 --> 00:47:13,250
it out entirely if the smoke is very

967
00:47:11,510 --> 00:47:14,990
thick that is because that smoke is

968
00:47:13,250 --> 00:47:17,510
absorbing the light it doesn't reflect

969
00:47:14,989 --> 00:47:19,250
very much light so you don't get much in

970
00:47:17,510 --> 00:47:20,450
the way of scattering that you can use

971
00:47:19,250 --> 00:47:22,010
to collect some of that light source

972
00:47:20,449 --> 00:47:24,829
it's basically just absorbing and

973
00:47:22,010 --> 00:47:29,840
getting rid of it on the other hand you

974
00:47:24,829 --> 00:47:31,460
may see on a hazy day right yes I look

975
00:47:29,840 --> 00:47:33,470
out and I can't see the mountains in the

976
00:47:31,460 --> 00:47:35,269
distance but it's very bright back there

977
00:47:33,469 --> 00:47:36,889
why is it bright well it's because all

978
00:47:35,269 --> 00:47:38,840
of this light is coming in from

979
00:47:36,889 --> 00:47:40,940
elsewhere getting scattered toward me

980
00:47:38,840 --> 00:47:42,500
that normally wouldn't so it may

981
00:47:40,940 --> 00:47:43,970
actually be much brighter in that

982
00:47:42,500 --> 00:47:45,500
direction than it should have been the

983
00:47:43,969 --> 00:47:46,849
light from behind the mountains were

984
00:47:45,500 --> 00:47:48,409
actually kind of dark-colored are

985
00:47:46,849 --> 00:47:50,509
sitting the scene very much instead I

986
00:47:48,409 --> 00:47:52,759
see much brighter and that's because all

987
00:47:50,510 --> 00:47:54,230
of the sky incoming light and the Sun

988
00:47:52,760 --> 00:47:55,820
and everything else they're getting

989
00:47:54,230 --> 00:47:58,659
scattered back towards me in ways it

990
00:47:55,820 --> 00:48:01,010
wouldn't otherwise have right

991
00:47:58,659 --> 00:48:02,690
so again participating media really

992
00:48:01,010 --> 00:48:04,670
changes things up and you have to sort

993
00:48:02,690 --> 00:48:06,050
of start thinking about the properties

994
00:48:04,670 --> 00:48:07,490
of the particles and how many there are

995
00:48:06,050 --> 00:48:08,240
dense they are what kind of scattering

996
00:48:07,489 --> 00:48:09,859
they're doing where the lights coming

997
00:48:08,239 --> 00:48:12,849
from that's a much more complicated

998
00:48:09,860 --> 00:48:12,849
situation right

999
00:48:13,900 --> 00:48:18,079
but again relative to the relevant to

1000
00:48:17,030 --> 00:48:22,760
your understanding of light because

1001
00:48:18,079 --> 00:48:25,099
participating media will do that okay so

1002
00:48:22,760 --> 00:48:27,080
finally let's talk about the last bit of

1003
00:48:25,099 --> 00:48:29,779
of the problem which is the part that we

1004
00:48:27,079 --> 00:48:35,750
care probably most about in handmade

1005
00:48:29,780 --> 00:48:39,700
hero and that is reflection so basically

1006
00:48:35,750 --> 00:48:42,199
most light we see is reflected light

1007
00:48:39,699 --> 00:48:44,089
typically we're not staring directly at

1008
00:48:42,199 --> 00:48:46,879
something that's emitting photons right

1009
00:48:44,090 --> 00:48:48,200
that's uncommon and in fact you might

1010
00:48:46,880 --> 00:48:50,300
even say that typically when you're

1011
00:48:48,199 --> 00:48:51,529
looking at a lightbulb even that's not

1012
00:48:50,300 --> 00:48:54,500
really looking at something as emitting

1013
00:48:51,530 --> 00:48:55,760
photons because the photons that are

1014
00:48:54,500 --> 00:48:59,360
coming out of that lightbulb are

1015
00:48:55,760 --> 00:49:01,340
actually hitting a coated surface that

1016
00:48:59,360 --> 00:49:03,980
diffuses them more than they would

1017
00:49:01,340 --> 00:49:05,720
normally be diffused right typically we

1018
00:49:03,980 --> 00:49:07,880
don't look directly at the filament of a

1019
00:49:05,719 --> 00:49:10,819
lightbulb unless your gut artisinal

1020
00:49:07,880 --> 00:49:12,980
light bulbs which are increasingly

1021
00:49:10,820 --> 00:49:14,420
common in places like Seattle but I'm

1022
00:49:12,980 --> 00:49:19,940
pretty sure all right

1023
00:49:14,420 --> 00:49:21,590
anyway so uh in this case what we're

1024
00:49:19,940 --> 00:49:23,210
really concerned most about when we talk

1025
00:49:21,590 --> 00:49:25,130
about how things look is how light is

1026
00:49:23,210 --> 00:49:27,110
reflected how it's reflected off objects

1027
00:49:25,130 --> 00:49:29,030
how it's reflected off coatings on

1028
00:49:27,110 --> 00:49:31,309
things that like even if it's

1029
00:49:29,030 --> 00:49:32,630
translucent that's what determines most

1030
00:49:31,309 --> 00:49:38,869
of what we see because most of what we

1031
00:49:32,630 --> 00:49:41,750
see isn't emitters it's reflectors yeah

1032
00:49:38,869 --> 00:49:42,980
now I guess I should caveat that by

1033
00:49:41,750 --> 00:49:43,909
saying well maybe that's not true

1034
00:49:42,980 --> 00:49:45,409
anymore because a lot of times we look

1035
00:49:43,909 --> 00:49:46,579
computer screens all day and computer

1036
00:49:45,409 --> 00:49:48,250
screens are sort of emitters of light

1037
00:49:46,579 --> 00:49:51,590
source so maybe that's not exactly right

1038
00:49:48,250 --> 00:49:54,230
but you know oops

1039
00:49:51,590 --> 00:49:58,150
looking at the real world that doesn't

1040
00:49:54,230 --> 00:50:00,949
have a computer screen on it a good hold

1041
00:49:58,150 --> 00:50:02,990
okay so how do a reflection work well

1042
00:50:00,949 --> 00:50:04,699
reflection just works by saying all

1043
00:50:02,989 --> 00:50:08,449
right I've got a light source right and

1044
00:50:04,699 --> 00:50:10,069
I've got an eye and what happens is

1045
00:50:08,449 --> 00:50:11,750
photons get shot out that wouldn't

1046
00:50:10,070 --> 00:50:15,559
normally hit the light source right

1047
00:50:11,750 --> 00:50:16,699
here's my object so normally the side

1048
00:50:15,559 --> 00:50:19,519
wouldn't see them because they're going

1049
00:50:16,699 --> 00:50:20,899
to go this way right and it's not going

1050
00:50:19,519 --> 00:50:22,340
to feed those photons you know maybe

1051
00:50:20,900 --> 00:50:24,079
there are some photons that do shoot out

1052
00:50:22,340 --> 00:50:26,150
right that will hit the eye directly but

1053
00:50:24,079 --> 00:50:26,449
there's a bunch that won't however some

1054
00:50:26,150 --> 00:50:27,858
of these

1055
00:50:26,449 --> 00:50:30,259
it sounds going to hit the subject and

1056
00:50:27,858 --> 00:50:32,150
they get reflected back in a Provident

1057
00:50:30,260 --> 00:50:35,570
direction that happens to also hit the

1058
00:50:32,150 --> 00:50:38,000
eye right the lens of the eye and so

1059
00:50:35,570 --> 00:50:40,700
that is how we see most things that we

1060
00:50:38,000 --> 00:50:42,739
see is a photon has launched off of a

1061
00:50:40,699 --> 00:50:44,779
light source it's hit an object and it's

1062
00:50:42,739 --> 00:50:46,969
bounced into our eye that's how we even

1063
00:50:44,780 --> 00:50:49,490
know the objects there at all right it's

1064
00:50:46,969 --> 00:50:51,709
basically a flood of photons that's

1065
00:50:49,489 --> 00:50:56,719
bouncing off of things and we're seeing

1066
00:50:51,710 --> 00:50:58,070
the bounces right and you can even see

1067
00:50:56,719 --> 00:51:00,500
this for yourself if you've never done

1068
00:50:58,070 --> 00:51:02,780
this if you're in a very dark room that

1069
00:51:00,500 --> 00:51:05,599
drops below the sampling integration

1070
00:51:02,780 --> 00:51:08,210
ability of your eye to smooth out in a

1071
00:51:05,599 --> 00:51:11,838
very dark room you can actually see it

1072
00:51:08,210 --> 00:51:13,940
like very noisy it's very very noisy

1073
00:51:11,838 --> 00:51:15,739
right and the reason for that is you're

1074
00:51:13,940 --> 00:51:18,559
just not getting enough photons bouncing

1075
00:51:15,739 --> 00:51:20,449
off things for your eye to actually come

1076
00:51:18,559 --> 00:51:21,619
up with a solid estimate of what the

1077
00:51:20,449 --> 00:51:25,429
lighting is in that direction

1078
00:51:21,619 --> 00:51:27,470
right so it's varying wildly a second a

1079
00:51:25,429 --> 00:51:29,500
second as different numbers of photons

1080
00:51:27,469 --> 00:51:31,549
hit your eye from the same direction

1081
00:51:29,500 --> 00:51:34,010
normally when you have lots of light

1082
00:51:31,550 --> 00:51:35,630
that's that noise level of photons

1083
00:51:34,010 --> 00:51:37,730
because remember photons are randomly

1084
00:51:35,630 --> 00:51:39,588
spewing out all over the place right so

1085
00:51:37,730 --> 00:51:42,099
you're not getting a constant number of

1086
00:51:39,588 --> 00:51:44,509
photons hitting your eye every second

1087
00:51:42,099 --> 00:51:47,030
you're getting a very variable number

1088
00:51:44,510 --> 00:51:48,800
but that number variance is so small

1089
00:51:47,030 --> 00:51:51,670
compared to the magnitude so if you

1090
00:51:48,800 --> 00:51:54,680
looked at it right of brightness right

1091
00:51:51,670 --> 00:51:58,700
over time you're getting something like

1092
00:51:54,679 --> 00:52:01,608
you know like this so there's this tiny

1093
00:51:58,699 --> 00:52:03,348
wobble but the amount is so huge

1094
00:52:01,608 --> 00:52:04,909
compared to the wobble that your eye has

1095
00:52:03,349 --> 00:52:06,260
no trouble just filtering it and going

1096
00:52:04,909 --> 00:52:08,480
here is a constant color and so it

1097
00:52:06,260 --> 00:52:10,940
doesn't look noisy but when you're

1098
00:52:08,480 --> 00:52:11,659
weighed down here and you get that same

1099
00:52:10,940 --> 00:52:13,730
labo

1100
00:52:11,659 --> 00:52:15,078
you're going to magnify that part of the

1101
00:52:13,730 --> 00:52:17,179
graph and here's what we're looking at

1102
00:52:15,079 --> 00:52:19,220
now well all the sudden it looks like

1103
00:52:17,179 --> 00:52:21,409
this right because remember your eye is

1104
00:52:19,219 --> 00:52:23,000
adaptive and when things get darker

1105
00:52:21,409 --> 00:52:24,889
right it dilates the pupils to collect

1106
00:52:23,000 --> 00:52:29,659
more light and your your brain is trying

1107
00:52:24,889 --> 00:52:31,670
to like scale up the amount it uses for

1108
00:52:29,659 --> 00:52:35,059
a particular level of brightness you can

1109
00:52:31,670 --> 00:52:37,400
see now relative to the number of

1110
00:52:35,059 --> 00:52:39,769
photons hitting your eye right the noise

1111
00:52:37,400 --> 00:52:42,139
is really relevant it's drastically

1112
00:52:39,769 --> 00:52:46,159
changing the number of a parent photons

1113
00:52:42,139 --> 00:52:47,869
hitting your eye right so again random

1114
00:52:46,159 --> 00:52:49,940
photons just spewing out into the world

1115
00:52:47,869 --> 00:52:53,659
hitting things bouncing off hitting our

1116
00:52:49,940 --> 00:52:56,389
eyes that's how we see so now we have to

1117
00:52:53,659 --> 00:52:58,250
ask the question well how does all that

1118
00:52:56,389 --> 00:53:00,440
stuff we just talked about how does that

1119
00:52:58,250 --> 00:53:02,630
affect light that hits the surface of an

1120
00:53:00,440 --> 00:53:04,280
object right because that's we haven't

1121
00:53:02,630 --> 00:53:06,470
handmade here oh we've got all these

1122
00:53:04,280 --> 00:53:08,600
objects they're not emitting light

1123
00:53:06,469 --> 00:53:11,239
they're just reflecting light you know

1124
00:53:08,599 --> 00:53:14,539
how do we think about their illumination

1125
00:53:11,239 --> 00:53:18,109
properly well when things hit an object

1126
00:53:14,539 --> 00:53:23,449
what happens is that same inverse square

1127
00:53:18,110 --> 00:53:26,120
law applies right so however many

1128
00:53:23,449 --> 00:53:29,629
photons came out of this light source

1129
00:53:26,119 --> 00:53:31,489
when they hit this object right as the

1130
00:53:29,630 --> 00:53:34,130
object gets further away from the light

1131
00:53:31,489 --> 00:53:36,169
source the inverse-square number of

1132
00:53:34,130 --> 00:53:39,680
photons will be hitting its surface

1133
00:53:36,170 --> 00:53:42,889
right so the strength of a light source

1134
00:53:39,679 --> 00:53:46,009
again diminishes with one over the

1135
00:53:42,889 --> 00:53:47,960
square of the distance traveled to reach

1136
00:53:46,010 --> 00:53:49,670
the object that's the number of photons

1137
00:53:47,960 --> 00:53:51,860
that will hit it so the number of

1138
00:53:49,670 --> 00:53:53,809
photons that are reflected also this is

1139
00:53:51,860 --> 00:53:58,849
again proportional to one over the

1140
00:53:53,809 --> 00:54:03,289
distance squared of the object right now

1141
00:53:58,849 --> 00:54:05,690
keep in mind again it does not do 1 over

1142
00:54:03,289 --> 00:54:08,210
the distance squared to the eye for the

1143
00:54:05,690 --> 00:54:10,099
same reason as this object gets further

1144
00:54:08,210 --> 00:54:12,530
away from the eye it takes up less space

1145
00:54:10,099 --> 00:54:14,659
in the eye so the apparent brightness is

1146
00:54:12,530 --> 00:54:16,970
again you're concentrating the photons

1147
00:54:14,659 --> 00:54:18,529
on smaller numbers of cells so the

1148
00:54:16,969 --> 00:54:20,809
distance between the light and the

1149
00:54:18,530 --> 00:54:24,190
object changes its brightness because

1150
00:54:20,809 --> 00:54:27,049
less photons can be bounced off of it

1151
00:54:24,190 --> 00:54:30,349
but the distance back to the eyes from

1152
00:54:27,050 --> 00:54:33,170
the object not relevant does not affect

1153
00:54:30,349 --> 00:54:35,779
the brightness right should be critical

1154
00:54:33,170 --> 00:54:37,849
to understand and very strange right

1155
00:54:35,780 --> 00:54:40,960
when you don't it doesn't make quite

1156
00:54:37,849 --> 00:54:40,960
intuitive sense at first

1157
00:54:43,940 --> 00:54:54,210
okay so for our purposes that there is

1158
00:54:51,719 --> 00:54:56,189
an inverse-square follow up on lighting

1159
00:54:54,210 --> 00:54:58,260
if we want to be accurate now remember

1160
00:54:56,190 --> 00:55:00,960
accuracy is not our goal in handmade

1161
00:54:58,260 --> 00:55:03,300
hero it's just good to know what would

1162
00:55:00,960 --> 00:55:04,829
be correct when we go to do things but

1163
00:55:03,300 --> 00:55:06,870
that doesn't mean we will want an

1164
00:55:04,829 --> 00:55:09,779
inverse squared fall-off it doesn't mean

1165
00:55:06,869 --> 00:55:11,909
that we have to even do things like take

1166
00:55:09,780 --> 00:55:13,140
into account the distance from the light

1167
00:55:11,909 --> 00:55:14,789
source objects we can do whatever we

1168
00:55:13,139 --> 00:55:16,619
want right as long as it looks good

1169
00:55:14,789 --> 00:55:19,949
but it helps to understand how light

1170
00:55:16,619 --> 00:55:21,569
works so you can start there and work

1171
00:55:19,949 --> 00:55:23,819
backwards to something that looks like

1172
00:55:21,570 --> 00:55:25,650
what you want rather than going I have

1173
00:55:23,820 --> 00:55:26,970
no idea I'll just start making up

1174
00:55:25,650 --> 00:55:28,650
equations and then they don't really

1175
00:55:26,969 --> 00:55:30,869
look at all like light and you're kind

1176
00:55:28,650 --> 00:55:34,760
of confused so it's good to just

1177
00:55:30,869 --> 00:55:37,710
understand now what is going on there

1178
00:55:34,760 --> 00:55:41,600
so that is how light bounces off a

1179
00:55:37,710 --> 00:55:45,510
surface and what's worth noting about

1180
00:55:41,599 --> 00:55:48,269
surfaces is how they distribute light

1181
00:55:45,510 --> 00:55:51,600
makes a big difference as to how that

1182
00:55:48,269 --> 00:55:54,960
light will be perceived why is that the

1183
00:55:51,599 --> 00:55:57,269
case well let's talk a little bit about

1184
00:55:54,960 --> 00:55:59,039
reflectance functions and hopefully we

1185
00:55:57,269 --> 00:56:03,829
can see that why we care about that

1186
00:55:59,039 --> 00:56:09,739
right so here's the surface of an object

1187
00:56:03,829 --> 00:56:09,739
here's my light source and here's my eye

1188
00:56:09,889 --> 00:56:16,469
and look down at it I so let's say I

1189
00:56:14,070 --> 00:56:19,110
look at this surface here right and

1190
00:56:16,469 --> 00:56:21,449
again it here's my lens so I'm going to

1191
00:56:19,110 --> 00:56:23,610
look down at this point on the surface

1192
00:56:21,449 --> 00:56:25,469
and you can see that you know that lens

1193
00:56:23,610 --> 00:56:27,780
is going to collect everything in a cone

1194
00:56:25,469 --> 00:56:29,459
so from this particular point on the

1195
00:56:27,780 --> 00:56:32,010
object I'm actually getting everything

1196
00:56:29,460 --> 00:56:36,119
that bounced off and sort of like again

1197
00:56:32,010 --> 00:56:40,050
a conical sort of outpouring there if

1198
00:56:36,119 --> 00:56:42,239
you will so if we want to know what the

1199
00:56:40,050 --> 00:56:44,970
brightness of this surface would be at

1200
00:56:42,239 --> 00:56:48,119
this point what we basically are asking

1201
00:56:44,969 --> 00:56:50,069
is for any photons that could come into

1202
00:56:48,119 --> 00:56:52,109
the surface from any light sources from

1203
00:56:50,070 --> 00:56:53,640
anywhere how many of them would bounce

1204
00:56:52,110 --> 00:56:58,510
out along this cone

1205
00:56:53,639 --> 00:57:00,039
right that's the brightest and if we

1206
00:56:58,510 --> 00:57:01,330
care about things like the color and

1207
00:57:00,039 --> 00:57:03,670
that sort of stuff we would also want to

1208
00:57:01,329 --> 00:57:04,840
ask how do those photons change their

1209
00:57:03,670 --> 00:57:06,490
color like what color were they when

1210
00:57:04,840 --> 00:57:08,050
they came in how does the wavelength

1211
00:57:06,489 --> 00:57:08,379
shift when it hits this object blah blah

1212
00:57:08,050 --> 00:57:10,090
blah

1213
00:57:08,380 --> 00:57:12,099
right right now let's not care about

1214
00:57:10,090 --> 00:57:16,210
that we're just going to talk about the

1215
00:57:12,099 --> 00:57:20,139
brightness well the answer is surfaces

1216
00:57:16,210 --> 00:57:23,860
each have sort of a molecular structure

1217
00:57:20,139 --> 00:57:27,190
if you will at their surface boundary

1218
00:57:23,860 --> 00:57:29,200
that determines what will happen so you

1219
00:57:27,190 --> 00:57:31,450
have to imagine the surface isn't flat

1220
00:57:29,199 --> 00:57:33,210
no matter what it is it's actually like

1221
00:57:31,449 --> 00:57:36,849
a bunch of molecules bouncing around

1222
00:57:33,210 --> 00:57:38,260
right that are all held together in like

1223
00:57:36,849 --> 00:57:40,750
a lattice form or something like this

1224
00:57:38,260 --> 00:57:43,000
emits a solid object and what happens

1225
00:57:40,750 --> 00:57:46,510
when a photon comes in is it's going to

1226
00:57:43,000 --> 00:57:50,230
strike these things and bounce out right

1227
00:57:46,510 --> 00:57:52,080
if it's not absorbed it's going to

1228
00:57:50,230 --> 00:57:58,119
bounce these things and it's going to

1229
00:57:52,079 --> 00:58:01,210
screw down right and by the way I

1230
00:57:58,119 --> 00:58:02,799
shouldn't use the word absorbed I think

1231
00:58:01,210 --> 00:58:05,619
so I've been using this whole time

1232
00:58:02,800 --> 00:58:07,330
because in the graphics world we think

1233
00:58:05,619 --> 00:58:09,489
of it as absorption because it's

1234
00:58:07,329 --> 00:58:15,400
absorbing light but really it's probably

1235
00:58:09,489 --> 00:58:18,929
not absorbing light per se it's going to

1236
00:58:15,400 --> 00:58:21,970
go into heat energy or you know there's

1237
00:58:18,929 --> 00:58:22,869
the actual molecular activity of it is

1238
00:58:21,969 --> 00:58:25,959
not our concern

1239
00:58:22,869 --> 00:58:28,179
when I say absorb I don't mean to say

1240
00:58:25,960 --> 00:58:30,400
that it captures the photon in some

1241
00:58:28,179 --> 00:58:33,730
specific way that's clogged from dynamic

1242
00:58:30,400 --> 00:58:35,829
and all this other sort of stuff I don't

1243
00:58:33,730 --> 00:58:38,469
care about that and I don't know about

1244
00:58:35,829 --> 00:58:40,329
that all I'm trying to say is the light

1245
00:58:38,469 --> 00:58:43,179
gets absorbed from a lighting

1246
00:58:40,329 --> 00:58:44,769
perspective it will not bounce out but

1247
00:58:43,179 --> 00:58:47,109
what actually happens to it is a

1248
00:58:44,769 --> 00:58:49,179
physicists concern not ours

1249
00:58:47,110 --> 00:58:50,860
you know maybe it sort of knocks the

1250
00:58:49,179 --> 00:58:53,559
thing around and transfers its energy

1251
00:58:50,860 --> 00:58:55,510
and goes away or maybe it gets captured

1252
00:58:53,559 --> 00:58:58,360
in some way and released later or some

1253
00:58:55,510 --> 00:59:01,390
other forms like heat energy so it's

1254
00:58:58,360 --> 00:59:03,070
converted to IR wavelengths right the

1255
00:59:01,389 --> 00:59:05,799
point is from our perspective when we

1256
00:59:03,070 --> 00:59:07,390
say absorb what we mean is a photon at a

1257
00:59:05,800 --> 00:59:10,150
visible wavelength

1258
00:59:07,389 --> 00:59:13,298
struck an object and it never came back

1259
00:59:10,150 --> 00:59:14,680
that's all we know whether it translated

1260
00:59:13,298 --> 00:59:18,309
into heat or something else we don't

1261
00:59:14,679 --> 00:59:20,710
know we don't care or ultraviolet not

1262
00:59:18,309 --> 00:59:22,298
our responsibility but we know that it

1263
00:59:20,710 --> 00:59:24,130
didn't come back in the visible spectrum

1264
00:59:22,298 --> 00:59:29,858
and that's all we need to know for

1265
00:59:24,130 --> 00:59:34,990
lighting okay so what that means is that

1266
00:59:29,858 --> 00:59:37,358
the micro facet geometry of the surface

1267
00:59:34,989 --> 00:59:42,788
what happens to it at a molecular level

1268
00:59:37,358 --> 00:59:45,940
what it looks like changes how photons

1269
00:59:42,789 --> 00:59:48,700
reflect on an angular basis if the

1270
00:59:45,940 --> 00:59:50,829
surface is completely fair and will

1271
00:59:48,699 --> 00:59:53,018
reflect in a completely uniform way

1272
00:59:50,829 --> 00:59:55,869
which almost no surface is but there are

1273
00:59:53,018 --> 00:59:59,919
some that are quite close then what will

1274
00:59:55,869 --> 01:00:02,619
happen is a photon that comes in has an

1275
00:59:59,920 --> 01:00:05,230
equal chance of being reflected out in

1276
01:00:02,619 --> 01:00:10,358
any direction this is called a perfectly

1277
01:00:05,230 --> 01:00:13,269
diffused surface basically what it means

1278
01:00:10,358 --> 01:00:15,278
is that it's a completely random

1279
01:00:13,268 --> 01:00:17,348
collection of molecules on the surface

1280
01:00:15,278 --> 01:00:19,199
as far as reflection is concerned when

1281
01:00:17,349 --> 01:00:25,059
you kit you could go in any direction

1282
01:00:19,199 --> 01:00:27,639
completely randomly right that is not

1283
01:00:25,059 --> 01:00:30,579
the common case most surfaces are not

1284
01:00:27,639 --> 01:00:32,828
perfectly diffuse what is more likely is

1285
01:00:30,579 --> 01:00:34,809
the micro facet geometry and let me draw

1286
01:00:32,829 --> 01:00:38,579
something for you there what that means

1287
01:00:34,809 --> 01:00:41,349
is that for an incident photon the lobe

1288
01:00:38,579 --> 01:00:44,380
right coming in at this direction is

1289
01:00:41,349 --> 01:00:47,259
perfectly uniform it could go out in

1290
01:00:44,380 --> 01:00:49,390
every direction right so photon comes

1291
01:00:47,259 --> 01:00:51,099
out in here it has an equal chance of

1292
01:00:49,389 --> 01:00:55,058
going out in every possible direction

1293
01:00:51,099 --> 01:00:58,059
from the surface right that is not the

1294
01:00:55,059 --> 01:01:02,440
common case the common case is that it's

1295
01:00:58,059 --> 01:01:05,349
biased so the light comes in right and

1296
01:01:02,440 --> 01:01:07,630
yeah it may come out in a lot of

1297
01:01:05,349 --> 01:01:10,630
directions but it's actually strongly

1298
01:01:07,630 --> 01:01:12,369
sort of biased in the direction that's a

1299
01:01:10,630 --> 01:01:14,230
perfect reflection or something or maybe

1300
01:01:12,369 --> 01:01:17,470
not a perfect reflection but so it could

1301
01:01:14,230 --> 01:01:19,690
back scatter and often does but it more

1302
01:01:17,469 --> 01:01:20,919
often goes out in these other directions

1303
01:01:19,690 --> 01:01:22,720
right so it's more

1304
01:01:20,920 --> 01:01:24,579
likely and the way you draw these lobes

1305
01:01:22,719 --> 01:01:27,099
right is these lives that people draw

1306
01:01:24,579 --> 01:01:28,960
are just ways of saying oh here is sort

1307
01:01:27,099 --> 01:01:32,110
of the distribution it's basically like

1308
01:01:28,960 --> 01:01:33,490
taking a graph of percentage chance the

1309
01:01:32,110 --> 01:01:35,950
photon will go off in a direction and

1310
01:01:33,489 --> 01:01:38,500
wrapping it around the angle that it

1311
01:01:35,949 --> 01:01:40,000
will go out right so if it's if the lobe

1312
01:01:38,500 --> 01:01:41,679
is further out in this direction it

1313
01:01:40,000 --> 01:01:43,840
means there's a higher chance if it's

1314
01:01:41,679 --> 01:01:48,839
closer in there's a lesser chance right

1315
01:01:43,840 --> 01:01:51,100
now remember this is a completely

1316
01:01:48,840 --> 01:01:53,350
four-dimensional function the angle that

1317
01:01:51,099 --> 01:01:55,150
you go out at is determined by the angle

1318
01:01:53,349 --> 01:01:57,000
you come in at and of course it's three

1319
01:01:55,150 --> 01:02:00,610
dimensions so there's two angles right

1320
01:01:57,000 --> 01:02:02,469
so we have to think about this for every

1321
01:02:00,610 --> 01:02:03,820
possible incident angle you can see why

1322
01:02:02,469 --> 01:02:06,250
this is a pretty complicated function

1323
01:02:03,820 --> 01:02:07,990
these are four D functions at a minimum

1324
01:02:06,250 --> 01:02:09,280
they're actually worse than that in the

1325
01:02:07,989 --> 01:02:13,929
real world because they think about what

1326
01:02:09,280 --> 01:02:16,690
actually happens is a four D is only

1327
01:02:13,929 --> 01:02:18,309
four point reflectors and really what

1328
01:02:16,690 --> 01:02:21,130
happens in the real world is most

1329
01:02:18,309 --> 01:02:23,110
surfaces do not bounce things off

1330
01:02:21,130 --> 01:02:25,960
directly from their surface most of them

1331
01:02:23,110 --> 01:02:28,090
have some depth at the photon comes in

1332
01:02:25,960 --> 01:02:29,860
it travels around and then comes back

1333
01:02:28,090 --> 01:02:32,200
out later what that means

1334
01:02:29,860 --> 01:02:34,870
is that the point of impact is also a

1335
01:02:32,199 --> 01:02:36,369
parameter so it's really 60 it's the 2d

1336
01:02:34,869 --> 01:02:41,829
parameter on the surface where the light

1337
01:02:36,369 --> 01:02:45,730
came in and and then where it bounces

1338
01:02:41,829 --> 01:02:47,349
out right so it's pretty nasty it and

1339
01:02:45,730 --> 01:02:48,849
really just might not even be the right

1340
01:02:47,349 --> 01:02:51,400
way to think about it point being it's

1341
01:02:48,849 --> 01:02:53,559
worse than 40 because you basically have

1342
01:02:51,400 --> 01:02:57,730
scattering that happens inside the

1343
01:02:53,559 --> 01:02:59,110
surface so typically I think if you if

1344
01:02:57,730 --> 01:03:00,789
you try to do this really accurately you

1345
01:02:59,110 --> 01:03:02,380
don't try to wrap it up in one function

1346
01:03:00,789 --> 01:03:04,300
what you do is you have a penetration

1347
01:03:02,380 --> 01:03:07,269
function that basically says when I hit

1348
01:03:04,300 --> 01:03:09,910
the surface of this what direction do I

1349
01:03:07,269 --> 01:03:13,179
go in right and that's a probability

1350
01:03:09,909 --> 01:03:15,609
then when I go in I actually simulate

1351
01:03:13,179 --> 01:03:18,129
bouncing around in here so I do several

1352
01:03:15,610 --> 01:03:20,050
bounces interior till I strike the

1353
01:03:18,130 --> 01:03:21,789
surface again when I strike the surface

1354
01:03:20,050 --> 01:03:24,250
again I have a function that says what

1355
01:03:21,789 --> 01:03:27,639
direction I emanate and then I go out

1356
01:03:24,250 --> 01:03:30,480
and that's the full simulation heaven

1357
01:03:27,639 --> 01:03:30,480
help you right

1358
01:03:34,400 --> 01:03:40,559
so anyway there you go

1359
01:03:37,409 --> 01:03:44,699
so all that lighting stuff again worth

1360
01:03:40,559 --> 01:03:46,230
knowing and I we covered this we did

1361
01:03:44,699 --> 01:03:48,329
some lighting way way way back on

1362
01:03:46,230 --> 01:03:50,579
handmade here but it's been so long ago

1363
01:03:48,329 --> 01:03:52,860
I just want to refresh everything that

1364
01:03:50,579 --> 01:03:56,909
is the basis of lighting hopefully

1365
01:03:52,860 --> 01:03:59,309
everything is a you know paged back in

1366
01:03:56,909 --> 01:04:03,539
for you here but that is essentially how

1367
01:03:59,309 --> 01:04:05,519
to think about the light as it travels

1368
01:04:03,539 --> 01:04:06,960
around the world now there's some more

1369
01:04:05,519 --> 01:04:08,969
complicated stuff that goes on in here

1370
01:04:06,960 --> 01:04:11,070
as well that have to do with the cosine

1371
01:04:08,969 --> 01:04:13,949
fell off there's the there's sort of

1372
01:04:11,070 --> 01:04:18,210
this concept that as I think about

1373
01:04:13,949 --> 01:04:21,689
lighting that falls onto a surface if it

1374
01:04:18,210 --> 01:04:24,990
if it's coming down straight versus this

1375
01:04:21,690 --> 01:04:27,659
coming down an angle the shaft of light

1376
01:04:24,989 --> 01:04:30,799
is truncated based on the cosine of the

1377
01:04:27,659 --> 01:04:33,420
angle that it's coming down at which is

1378
01:04:30,800 --> 01:04:35,700
again not something I think we'll end up

1379
01:04:33,420 --> 01:04:37,380
having deal with in hand-made here but

1380
01:04:35,699 --> 01:04:38,730
it's another micro facet element that

1381
01:04:37,380 --> 01:04:41,369
affects if you're trying to produce

1382
01:04:38,730 --> 01:04:42,539
accurate lighting equations it's

1383
01:04:41,369 --> 01:04:44,339
something to be aware of but basically

1384
01:04:42,539 --> 01:04:47,250
all that is just saying well you can

1385
01:04:44,340 --> 01:04:49,079
imagine if I've got photons coming down

1386
01:04:47,250 --> 01:04:51,179
into surface and they're coming directly

1387
01:04:49,079 --> 01:04:53,610
down at the surface then the whole

1388
01:04:51,179 --> 01:04:57,149
surface you know the whole sort of

1389
01:04:53,610 --> 01:05:00,030
amount of photons hitting will bounce

1390
01:04:57,150 --> 01:05:02,369
back the width of this is on the bounce

1391
01:05:00,030 --> 01:05:06,570
is exactly what it is on the incidence

1392
01:05:02,369 --> 01:05:11,509
right but on the other hand if I take

1393
01:05:06,570 --> 01:05:17,990
that and I shoot it at it this way right

1394
01:05:11,510 --> 01:05:17,990
what you can see is hopefully here

1395
01:05:18,940 --> 01:05:24,460
what you can see is the same number of

1396
01:05:21,068 --> 01:05:27,460
photons coming in at this angle spread

1397
01:05:24,460 --> 01:05:30,940
out on unfortunately a much wider angle

1398
01:05:27,460 --> 01:05:36,150
right so what ends up happening is that

1399
01:05:30,940 --> 01:05:40,568
this area here the hypotenuse here right

1400
01:05:36,150 --> 01:05:43,108
the cosine of that hypothesis test good

1401
01:05:40,568 --> 01:05:46,960
hypothesis of that hypotenuse is

1402
01:05:43,108 --> 01:05:51,338
actually the amount of light that is

1403
01:05:46,960 --> 01:05:52,659
incoming there right and the same would

1404
01:05:51,338 --> 01:05:57,779
be true for reflection so when it's

1405
01:05:52,659 --> 01:06:00,190
going out in angle you have a cosine

1406
01:05:57,780 --> 01:06:03,640
whatever the surface area passed you're

1407
01:06:00,190 --> 01:06:07,119
working with you have a cosine term that

1408
01:06:03,639 --> 01:06:09,309
says how big the outgoing shaft is by

1409
01:06:07,119 --> 01:06:11,079
comparison to how far how much it was on

1410
01:06:09,309 --> 01:06:13,389
the surface so at a micro level what

1411
01:06:11,079 --> 01:06:14,740
this leads to is you end up having a lot

1412
01:06:13,389 --> 01:06:15,789
of cosine terms of you're letting

1413
01:06:14,739 --> 01:06:18,189
equations if you're trying to simulate

1414
01:06:15,789 --> 01:06:21,190
them correctly because you have to model

1415
01:06:18,190 --> 01:06:22,568
the fact that the light falling onto a

1416
01:06:21,190 --> 01:06:25,750
surface and then getting bounced back

1417
01:06:22,568 --> 01:06:28,000
out is undergoing this cut off for a

1418
01:06:25,750 --> 01:06:30,059
particular pixel you know however much

1419
01:06:28,000 --> 01:06:36,960
the element sizes that you're trying to

1420
01:06:30,059 --> 01:06:40,210
simulate on that sample all right so all

1421
01:06:36,960 --> 01:06:41,710
that stuff is again not something we're

1422
01:06:40,210 --> 01:06:42,970
really concerned with I hand me here I

1423
01:06:41,710 --> 01:06:45,760
just want to make sure you've got the

1424
01:06:42,969 --> 01:06:49,078
basics again I think we covered it let

1425
01:06:45,760 --> 01:06:49,079
me know what day we covered it on

1426
01:06:55,750 --> 01:07:03,039
Niblo says d 96 or 97 so day 96 or 97

1427
01:07:00,369 --> 01:07:04,599
back there somewhere there's another set

1428
01:07:03,039 --> 01:07:06,519
of this hopefully between the two of

1429
01:07:04,599 --> 01:07:09,309
these those I've hopefully gotten

1430
01:07:06,519 --> 01:07:12,849
everything that you need to know on that

1431
01:07:09,309 --> 01:07:17,139
out there sometimes I forget things so I

1432
01:07:12,849 --> 01:07:18,340
don't know hopefully it's the case but

1433
01:07:17,139 --> 01:07:21,069
now let's talk about what we might want

1434
01:07:18,340 --> 01:07:25,720
to do in hammer here so on handmade here

1435
01:07:21,070 --> 01:07:27,039
we have a couple of choices right but

1436
01:07:25,719 --> 01:07:29,589
basically the main thing we care about

1437
01:07:27,039 --> 01:07:33,250
with our life is we're going to have in

1438
01:07:29,590 --> 01:07:35,710
our world right we're going to have some

1439
01:07:33,250 --> 01:07:37,570
light sources like maybe there's a

1440
01:07:35,710 --> 01:07:40,019
campfire or something like this probably

1441
01:07:37,570 --> 01:07:42,519
not a campfire but let's say there was

1442
01:07:40,019 --> 01:07:45,358
there's campfire or something and we

1443
01:07:42,519 --> 01:07:48,579
want the player to see sort of some

1444
01:07:45,358 --> 01:07:50,829
shading some lighting happening in the

1445
01:07:48,579 --> 01:07:52,929
region of the campfire now there's two

1446
01:07:50,829 --> 01:07:55,569
ways that we can do this right the most

1447
01:07:52,929 --> 01:07:57,848
straightforward simple artistic way to

1448
01:07:55,570 --> 01:07:59,740
do it is to literally just bright you

1449
01:07:57,849 --> 01:08:03,430
know have the brightness occur within

1450
01:07:59,739 --> 01:08:05,079
radii or something like this and so it's

1451
01:08:03,429 --> 01:08:07,088
basically sort of like a almost like a

1452
01:08:05,079 --> 01:08:11,259
sphere that you splat down that just

1453
01:08:07,088 --> 01:08:13,779
makes things brighter and you see this

1454
01:08:11,260 --> 01:08:16,180
in a lot of games especially if they

1455
01:08:13,780 --> 01:08:19,298
don't if they're sprite games because

1456
01:08:16,180 --> 01:08:26,890
it's harder to do much better in sprite

1457
01:08:19,298 --> 01:08:30,778
games but let's see here so here is

1458
01:08:26,890 --> 01:08:30,779
stardew valley at night

1459
01:08:36,000 --> 01:08:40,948
and what you can see in star devalue at

1460
01:08:38,338 --> 01:08:43,278
night is here's two torches and another

1461
01:08:40,948 --> 01:08:45,238
let me let me make that fullscreen their

1462
01:08:43,279 --> 01:08:47,580
release I don't need to start a value

1463
01:08:45,238 --> 01:08:49,698
review I just want to do the image thank

1464
01:08:47,579 --> 01:08:49,698
you

1465
01:08:49,939 --> 01:08:55,769
so here's star D value at night right

1466
01:08:52,710 --> 01:08:58,770
and again this is you know it's a XM a

1467
01:08:55,770 --> 01:09:01,020
game I think if I'm not very much

1468
01:08:58,770 --> 01:09:03,750
mistaken it doesn't have it really any

1469
01:09:01,020 --> 01:09:05,819
concept of what's going on in 3d so it

1470
01:09:03,750 --> 01:09:09,329
has to do something to give you the

1471
01:09:05,819 --> 01:09:11,310
sense of lighting at nighttime so what's

1472
01:09:09,329 --> 01:09:14,729
going to do and what you can see here is

1473
01:09:11,310 --> 01:09:16,890
all they do is they just take a region

1474
01:09:14,729 --> 01:09:20,698
around the right of the light and they

1475
01:09:16,890 --> 01:09:24,298
color that region and any region that is

1476
01:09:20,698 --> 01:09:27,899
not around the light is darker right it

1477
01:09:24,298 --> 01:09:29,338
darkens and this is pretty effective

1478
01:09:27,899 --> 01:09:32,429
right it works and it doesn't require

1479
01:09:29,338 --> 01:09:35,338
anything special now it has obvious

1480
01:09:32,429 --> 01:09:37,980
problems with it in terms of what you

1481
01:09:35,338 --> 01:09:40,350
might want as a nice effect and what you

1482
01:09:37,979 --> 01:09:42,178
can see is there's clearly reflections

1483
01:09:40,350 --> 01:09:43,710
painted into the bitmap part of the

1484
01:09:42,179 --> 01:09:47,850
light you can see that the light is

1485
01:09:43,710 --> 01:09:50,158
brighter here for example and that is

1486
01:09:47,850 --> 01:09:52,140
completely wrong so you can see that's

1487
01:09:50,158 --> 01:09:54,028
this light like this is the light source

1488
01:09:52,140 --> 01:09:55,170
right here the reflection is as if the

1489
01:09:54,029 --> 01:09:56,940
light was coming from here it's

1490
01:09:55,170 --> 01:09:58,980
completely wrong here is the closest

1491
01:09:56,939 --> 01:10:00,359
light here the reflections came from up

1492
01:09:58,979 --> 01:10:03,809
here there isn't even a light coming

1493
01:10:00,359 --> 01:10:05,908
from up there right so it's I guess

1494
01:10:03,810 --> 01:10:08,520
maybe the moonlight but you know that's

1495
01:10:05,908 --> 01:10:10,349
much weaker than this so you can kind of

1496
01:10:08,520 --> 01:10:13,110
see that like it just it's completely

1497
01:10:10,350 --> 01:10:15,120
wrong like objects don't respond to the

1498
01:10:13,109 --> 01:10:17,729
light correctly at all and if the player

1499
01:10:15,119 --> 01:10:20,010
was trying to use the light sources as a

1500
01:10:17,729 --> 01:10:23,419
way of determining the shapes of these

1501
01:10:20,010 --> 01:10:27,780
objects it would completely fail right

1502
01:10:23,420 --> 01:10:31,109
but fortunately that's not what humans

1503
01:10:27,779 --> 01:10:34,259
do humans understand approximations like

1504
01:10:31,109 --> 01:10:35,819
this so this works just fine and they

1505
01:10:34,260 --> 01:10:38,460
understand that this is a rock shape

1506
01:10:35,819 --> 01:10:40,380
because it's representatively shaded

1507
01:10:38,460 --> 01:10:41,789
this way even though that's not the way

1508
01:10:40,380 --> 01:10:43,889
it would have been shaded and yeah it

1509
01:10:41,789 --> 01:10:45,689
doesn't add to the sense of atmosphere

1510
01:10:43,889 --> 01:10:47,340
and lighting so you get less of an

1511
01:10:45,689 --> 01:10:47,799
effect that it doesn't respond in the

1512
01:10:47,340 --> 01:10:51,220
right way

1513
01:10:47,800 --> 01:10:52,659
me but it still works just fine and so

1514
01:10:51,220 --> 01:10:53,890
something like that is probably more of

1515
01:10:52,659 --> 01:10:56,260
what we'll have to do on handmade hero

1516
01:10:53,890 --> 01:10:58,270
because again we don't have 3d geometry

1517
01:10:56,260 --> 01:11:00,699
for most of our stuff they're just

1518
01:10:58,270 --> 01:11:03,900
sprites so we don't really have a lot of

1519
01:11:00,699 --> 01:11:03,899
information about how they would reflect

1520
01:11:04,979 --> 01:11:08,849
again I'll show you another picture here

1521
01:11:09,659 --> 01:11:15,779
of the simplest case right and it's just

1522
01:11:12,960 --> 01:11:19,149
again everywhere there's a light source

1523
01:11:15,779 --> 01:11:23,670
there's just sort of this this flap of

1524
01:11:19,149 --> 01:11:27,670
light there and that's it now you can do

1525
01:11:23,670 --> 01:11:34,810
something faster than this obviously if

1526
01:11:27,670 --> 01:11:39,210
you take a look at say stuff where

1527
01:11:34,810 --> 01:11:42,760
you've got a where you have a normal map

1528
01:11:39,210 --> 01:11:44,409
and so what that involves is basic thing

1529
01:11:42,760 --> 01:11:46,900
we've got a normal map on top of our

1530
01:11:44,409 --> 01:11:48,880
sprite then what you can do is you can

1531
01:11:46,899 --> 01:11:51,969
sort of relight the sprites to a certain

1532
01:11:48,880 --> 01:11:54,400
degree and you know you can see what

1533
01:11:51,970 --> 01:11:57,579
this looks like if you take a look at

1534
01:11:54,399 --> 01:11:59,859
say something like sprite lamp which is

1535
01:11:57,579 --> 01:12:02,649
just a tool that people use for creating

1536
01:11:59,859 --> 01:12:05,380
these you can kind of see that you get

1537
01:12:02,649 --> 01:12:07,719
right on a 2d surface you can move the

1538
01:12:05,380 --> 01:12:10,359
light around and by using the normal map

1539
01:12:07,720 --> 01:12:12,940
to relight it you can kind of get

1540
01:12:10,359 --> 01:12:14,649
something that sort of maybe looks like

1541
01:12:12,939 --> 01:12:20,469
it's getting lit

1542
01:12:14,649 --> 01:12:24,909
sort of right now the problem with this

1543
01:12:20,470 --> 01:12:27,220
is just that it's not great like you

1544
01:12:24,909 --> 01:12:28,869
know it it maybe gives you a better

1545
01:12:27,220 --> 01:12:30,940
sense that whether it's artistically

1546
01:12:28,869 --> 01:12:33,539
better or not is kind of hard to say

1547
01:12:30,939 --> 01:12:33,539
really

1548
01:12:33,750 --> 01:12:40,979
it's it's it you know it's a bit of

1549
01:12:39,039 --> 01:12:43,180
personal preference I guess I would say

1550
01:12:40,979 --> 01:12:44,739
sometimes it looks better sometimes it

1551
01:12:43,180 --> 01:12:47,820
looks worse it probably depends it's

1552
01:12:44,739 --> 01:12:47,819
probably in the eye of the beholder

1553
01:12:48,689 --> 01:12:55,449
whether that's good or bad and again

1554
01:12:53,140 --> 01:12:57,280
even that is only talking about inside

1555
01:12:55,449 --> 01:12:58,960
particular sprites getting some

1556
01:12:57,279 --> 01:13:01,569
curvature information in there for the

1557
01:12:58,960 --> 01:13:05,198
lighting but it doesn't really

1558
01:13:01,569 --> 01:13:07,719
even help with shadowing and stuff like

1559
01:13:05,198 --> 01:13:09,759
that because that's not really you know

1560
01:13:07,719 --> 01:13:11,920
again you still don't know like when we

1561
01:13:09,760 --> 01:13:14,440
run handmade hero if we want to do some

1562
01:13:11,920 --> 01:13:17,590
lighting in here we have the problem of

1563
01:13:14,439 --> 01:13:19,328
well what do we do - shadow things if a

1564
01:13:17,590 --> 01:13:21,219
lights on one side of somebody how much

1565
01:13:19,328 --> 01:13:27,158
shadow - the cast in the other direction

1566
01:13:21,219 --> 01:13:29,408
bla bla bla bla all right uh so let's

1567
01:13:27,158 --> 01:13:31,299
start with star G Valley style lighting

1568
01:13:29,408 --> 01:13:33,098
because it's the easiest pop of the

1569
01:13:31,300 --> 01:13:35,590
lighting right the easiest possible

1570
01:13:33,099 --> 01:13:37,239
lighting to do is we just have splats of

1571
01:13:35,590 --> 01:13:40,170
light and they're completely

1572
01:13:37,238 --> 01:13:45,069
indiscriminate so they just light things

1573
01:13:40,170 --> 01:13:45,489
in a radius right so how would we do

1574
01:13:45,069 --> 01:13:47,799
that

1575
01:13:45,488 --> 01:13:49,750
well we would start by saying we need a

1576
01:13:47,800 --> 01:13:51,010
light direction and all this hard code

1577
01:13:49,750 --> 01:13:53,500
the light Direction directly in this

1578
01:13:51,010 --> 01:13:55,659
rate are sorry light position all it's

1579
01:13:53,500 --> 01:13:57,130
hard code the light position in the

1580
01:13:55,658 --> 01:14:01,420
shader and then we can always just pass

1581
01:13:57,130 --> 01:14:04,270
it down later right so let's go ahead

1582
01:14:01,420 --> 01:14:10,260
and say that we've got the light in the

1583
01:14:04,270 --> 01:14:14,500
shader and that'll be you know a v3

1584
01:14:10,260 --> 01:14:17,079
light cause and the light pause is going

1585
01:14:14,500 --> 01:14:18,069
to be let's just say it's at zero zero

1586
01:14:17,078 --> 01:14:19,179
zero for now of course they don't

1587
01:14:18,069 --> 01:14:21,368
actually know where zero zero zero

1588
01:14:19,179 --> 01:14:23,199
actually is but I guess we'll find out

1589
01:14:21,368 --> 01:14:26,500
and then we're going to need another

1590
01:14:23,198 --> 01:14:29,769
thing which is going to be I guess the

1591
01:14:26,500 --> 01:14:31,889
light strength because we need some

1592
01:14:29,770 --> 01:14:35,349
concept of how strong the light is

1593
01:14:31,889 --> 01:14:37,779
because the FIR been a comp computer a

1594
01:14:35,349 --> 01:14:40,900
fall off for our light we need to know

1595
01:14:37,779 --> 01:14:45,250
how much how strong it is to begin with

1596
01:14:40,899 --> 01:14:46,658
right what we need to know we need to

1597
01:14:45,250 --> 01:14:49,300
have some notion of how strong it is to

1598
01:14:46,658 --> 01:14:50,618
begin with so let's go ahead and say

1599
01:14:49,300 --> 01:14:52,329
that we have a light strength I'll set

1600
01:14:50,618 --> 01:14:55,569
to 1.0 for now which again is unitless

1601
01:14:52,328 --> 01:14:57,908
we don't have any real unless we

1602
01:14:55,569 --> 01:14:59,259
actually go and try to simulate physical

1603
01:14:57,908 --> 01:15:01,448
lighting at which point we would be

1604
01:14:59,260 --> 01:15:03,909
talking about lumens or something like

1605
01:15:01,448 --> 01:15:05,710
this we don't really have any way other

1606
01:15:03,908 --> 01:15:07,689
than just sort of approximately saying

1607
01:15:05,710 --> 01:15:09,760
we're going to come up with a brightness

1608
01:15:07,689 --> 01:15:13,229
scheme for our game that's completely

1609
01:15:09,760 --> 01:15:13,230
arbitrary right

1610
01:15:14,630 --> 01:15:20,359
so we have a light Frank that a light

1611
01:15:17,359 --> 01:15:22,069
pause that come in here and then what we

1612
01:15:20,359 --> 01:15:24,529
want to do is we want to have a way of

1613
01:15:22,069 --> 01:15:27,229
taking the color values that we see and

1614
01:15:24,529 --> 01:15:29,569
modulating them properly by whatever

1615
01:15:27,229 --> 01:15:31,519
that light strength actually is so the

1616
01:15:29,569 --> 01:15:34,158
first step to that is finding out how

1617
01:15:31,520 --> 01:15:36,050
far away the light is and so what we

1618
01:15:34,158 --> 01:15:39,339
want to do there is say well whatever

1619
01:15:36,050 --> 01:15:43,010
our actual position in the real world is

1620
01:15:39,340 --> 01:15:44,449
we want to take the distance to the

1621
01:15:43,010 --> 01:15:46,520
light source and so we're going to do

1622
01:15:44,448 --> 01:15:49,488
that we need to do our 3d position and

1623
01:15:46,520 --> 01:15:51,560
we don't really know our 3d position

1624
01:15:49,488 --> 01:15:53,899
right all we get here is our fragment

1625
01:15:51,560 --> 01:15:55,400
coordinate so if you take a look at what

1626
01:15:53,899 --> 01:15:57,319
we actually want to know here we

1627
01:15:55,399 --> 01:16:00,460
probably want to go ahead and add a

1628
01:15:57,319 --> 01:16:03,380
thing here that's like smooth out v3

1629
01:16:00,460 --> 01:16:05,658
world pose or something like that right

1630
01:16:03,380 --> 01:16:07,310
and so these in vertices are coming in

1631
01:16:05,658 --> 01:16:12,908
here right they're getting transformed

1632
01:16:07,310 --> 01:16:15,020
by stuff and that transform is a full

1633
01:16:12,908 --> 01:16:17,679
transform that we don't actually want

1634
01:16:15,020 --> 01:16:20,179
anything to do with at the moment right

1635
01:16:17,679 --> 01:16:21,770
so what we want to do is we want to have

1636
01:16:20,179 --> 01:16:24,800
some way of getting the world's position

1637
01:16:21,770 --> 01:16:26,780
in here and we can assume I think since

1638
01:16:24,800 --> 01:16:29,150
we don't use transforms to move things

1639
01:16:26,779 --> 01:16:32,899
around our vertex positions are actually

1640
01:16:29,149 --> 01:16:34,639
in world space I'm pretty sure that's

1641
01:16:32,899 --> 01:16:35,988
the case it could be wrong about that

1642
01:16:34,640 --> 01:16:37,489
we'll have to go back and check but I'm

1643
01:16:35,988 --> 01:16:38,689
pretty sure that's the case in fact no I

1644
01:16:37,488 --> 01:16:41,329
know that's the case so the transfer

1645
01:16:38,689 --> 01:16:46,369
doesn't get set for them so if we were

1646
01:16:41,329 --> 01:16:48,649
just to output the world position all we

1647
01:16:46,369 --> 01:16:50,719
really need to do here is say ok there's

1648
01:16:48,649 --> 01:16:53,149
a world position it just gets written

1649
01:16:50,719 --> 01:16:56,000
out directly so the world pose is just

1650
01:16:53,149 --> 01:16:58,579
the input pose right it's just whatever

1651
01:16:56,000 --> 01:17:05,179
we started with and we just don't care

1652
01:16:58,579 --> 01:17:07,460
about the W value right now since our

1653
01:17:05,179 --> 01:17:08,899
trees use that the bias thing I guess

1654
01:17:07,460 --> 01:17:11,149
really technically what we want to do is

1655
01:17:08,899 --> 01:17:12,439
use the V vertex version and I think

1656
01:17:11,149 --> 01:17:14,149
about it because we do want to account

1657
01:17:12,439 --> 01:17:15,889
for the V bias I guess because we want

1658
01:17:14,149 --> 01:17:17,899
lighting to change as it gets higher so

1659
01:17:15,890 --> 01:17:19,900
really we want to use with V vertex as X

1660
01:17:17,899 --> 01:17:22,129
Y Z I think that's what we actually want

1661
01:17:19,899 --> 01:17:24,229
so that's our world position and it

1662
01:17:22,130 --> 01:17:25,909
comes out we can then say we've got our

1663
01:17:24,229 --> 01:17:30,139
smooth in

1664
01:17:25,909 --> 01:17:31,698
Veck three also but now we know where in

1665
01:17:30,140 --> 01:17:33,560
the world each pixel actually is

1666
01:17:31,698 --> 01:17:37,039
supposed to be and so we can figure out

1667
01:17:33,560 --> 01:17:41,300
how far away it is right I don't

1668
01:17:37,039 --> 01:17:43,250
remember I have to do this computation

1669
01:17:41,300 --> 01:17:46,070
myself but I'm pretty sure it's actually

1670
01:17:43,250 --> 01:17:49,689
built in so I'm going to just double

1671
01:17:46,069 --> 01:18:00,039
check that it is don't quote me on that

1672
01:17:49,689 --> 01:18:06,500
oops that's es I don't want yes and I

1673
01:18:00,039 --> 01:18:13,250
don't want yes I want GLSL spec where is

1674
01:18:06,500 --> 01:18:15,560
it just it Jeolla so oh you know what I

1675
01:18:13,250 --> 01:18:17,689
want quick reference cards that's sorry

1676
01:18:15,560 --> 01:18:23,300
I typed the wrong thing that's what I

1677
01:18:17,689 --> 01:18:25,069
wanted all right so here's all the

1678
01:18:23,300 --> 01:18:27,320
geometric functions we have and look our

1679
01:18:25,069 --> 01:18:28,939
thing I believe yet there is I was gonna

1680
01:18:27,319 --> 01:18:32,059
say I believe this is something I can

1681
01:18:28,939 --> 01:18:32,869
just ask for directly and I can because

1682
01:18:32,060 --> 01:18:36,219
you know we could just write it

1683
01:18:32,869 --> 01:18:39,170
ourselves but we want to use these

1684
01:18:36,219 --> 01:18:41,149
built-ins when we can usually because

1685
01:18:39,170 --> 01:18:42,679
the graphic card is presumably going to

1686
01:18:41,149 --> 01:18:43,488
insert the code that's most optimal for

1687
01:18:42,679 --> 01:18:46,399
it

1688
01:18:43,488 --> 01:18:48,079
so there's distance right there so I can

1689
01:18:46,399 --> 01:18:51,409
just use the light distance is just

1690
01:18:48,079 --> 01:18:55,069
distance the world closed and the light

1691
01:18:51,409 --> 01:18:58,789
pose and that's it right now I know how

1692
01:18:55,069 --> 01:19:01,909
far away the light is and I can use one

1693
01:18:58,789 --> 01:19:03,409
over that to compute the distance so all

1694
01:19:01,909 --> 01:19:09,880
I should have to do there is say well

1695
01:19:03,409 --> 01:19:14,649
okay my light the lighting value here is

1696
01:19:09,880 --> 01:19:14,650
just going to be the light strength

1697
01:19:14,679 --> 01:19:23,329
divided by the light distance squared

1698
01:19:19,219 --> 01:19:28,159
and that would be inverse all off right

1699
01:19:23,329 --> 01:19:31,880
and that's the lighting so if I then

1700
01:19:28,159 --> 01:19:35,090
want to darken everything I can just

1701
01:19:31,880 --> 01:19:40,039
multiply by that value and iron Theory

1702
01:19:35,090 --> 01:19:44,179
should get a thing that lights in

1703
01:19:40,039 --> 01:19:48,439
fear around this light don't know if I

1704
01:19:44,179 --> 01:19:52,760
will or not but in theory I should where

1705
01:19:48,439 --> 01:19:58,488
is my heir fixer compilers oh I'm sorry

1706
01:19:52,760 --> 01:20:01,340
I didn't mean say that oops

1707
01:19:58,488 --> 01:20:03,709
yeah didn't mean to put that there was

1708
01:20:01,340 --> 01:20:05,420
complaining there was a missing can I

1709
01:20:03,710 --> 01:20:07,100
call him there didn't quite do it in the

1710
01:20:05,420 --> 01:20:12,409
most clear terms but that's what it was

1711
01:20:07,100 --> 01:20:13,900
um so what you can see here is we've got

1712
01:20:12,409 --> 01:20:16,488
our light sources centered at the origin

1713
01:20:13,899 --> 01:20:19,189
and it does exactly what you would

1714
01:20:16,488 --> 01:20:23,599
expect right it lights things in a

1715
01:20:19,189 --> 01:20:26,809
sphere around it and it looks like a

1716
01:20:23,600 --> 01:20:31,730
light all right and like I think before

1717
01:20:26,810 --> 01:20:34,880
it's surprising how little your eye uses

1718
01:20:31,729 --> 01:20:37,789
the reality of the cue it's it's a

1719
01:20:34,880 --> 01:20:40,069
completely incorrect light I mean this

1720
01:20:37,789 --> 01:20:43,359
space that's facing directly at the

1721
01:20:40,069 --> 01:20:46,009
light versus this face that's facing Oh

1722
01:20:43,359 --> 01:20:47,899
perpendicular to the light they don't

1723
01:20:46,010 --> 01:20:49,039
respond properly this one should be much

1724
01:20:47,899 --> 01:20:50,988
brighter this one should be much darker

1725
01:20:49,039 --> 01:20:54,079
because of the way most typical

1726
01:20:50,988 --> 01:20:55,968
real-world reflection functions work and

1727
01:20:54,079 --> 01:20:58,689
yet that is not at all what we get

1728
01:20:55,969 --> 01:21:01,159
instead what we get is something that

1729
01:20:58,689 --> 01:21:03,678
the eye still interprets as a light

1730
01:21:01,159 --> 01:21:05,359
emanating from that area even though

1731
01:21:03,679 --> 01:21:07,340
completely wrong right and this is why I

1732
01:21:05,359 --> 01:21:09,829
say you know it's worth understanding

1733
01:21:07,340 --> 01:21:13,010
the basics of light because then as you

1734
01:21:09,829 --> 01:21:17,319
need more from them you will know how to

1735
01:21:13,010 --> 01:21:23,810
get that that mourneth of that's more

1736
01:21:17,319 --> 01:21:27,369
but you typically will be very surprised

1737
01:21:23,810 --> 01:21:32,480
at how forgiving the viewer is of

1738
01:21:27,369 --> 01:21:35,960
complete incorrect results as long as

1739
01:21:32,479 --> 01:21:38,689
they have some basis in the properties

1740
01:21:35,960 --> 01:21:40,960
of light gamers have been looking at

1741
01:21:38,689 --> 01:21:43,279
wrong lighting for so long that they are

1742
01:21:40,960 --> 01:21:48,859
very used to it to say the least

1743
01:21:43,279 --> 01:21:51,170
um so you know that's a obviously a very

1744
01:21:48,859 --> 01:21:53,268
simple light source and a very simple

1745
01:21:51,170 --> 01:21:57,788
way to add some lighting to the scene

1746
01:21:53,269 --> 01:22:00,739
let's try making that be something

1747
01:21:57,788 --> 01:22:02,988
that's a little more systemic so what we

1748
01:22:00,738 --> 01:22:04,788
could do right if you think about how if

1749
01:22:02,988 --> 01:22:06,828
we wanted more lights we can add more

1750
01:22:04,788 --> 01:22:11,418
lights but it starts to get expensive

1751
01:22:06,828 --> 01:22:13,308
right if we wanted to sum up the

1752
01:22:11,418 --> 01:22:16,578
lighting in this area you could imagine

1753
01:22:13,309 --> 01:22:22,219
it would start to look kind of costly as

1754
01:22:16,578 --> 01:22:25,578
we start to do this if we created a

1755
01:22:22,219 --> 01:22:30,739
second light then we're doing more

1756
01:22:25,578 --> 01:22:43,849
distance calculations and we end up with

1757
01:22:30,738 --> 01:22:45,228
this sort of thing so here I'm going to

1758
01:22:43,849 --> 01:22:51,229
create a brighter light and I'm going to

1759
01:22:45,229 --> 01:22:54,708
move it a little bit off to the side it

1760
01:22:51,229 --> 01:22:56,918
might not be far enough to the side it's

1761
01:22:54,708 --> 01:22:56,918
not

1762
01:23:05,899 --> 01:23:13,368
so there you've got two lights right

1763
01:23:09,038 --> 01:23:15,618
that you can see and the one of the

1764
01:23:13,368 --> 01:23:18,828
center is not as bright as the one on

1765
01:23:15,618 --> 01:23:21,469
the side but they sum together properly

1766
01:23:18,828 --> 01:23:24,710
in between them and stuff and off we go

1767
01:23:21,469 --> 01:23:27,948
now we could do all our lighting this

1768
01:23:24,710 --> 01:23:30,800
way if we wanted to we could push all

1769
01:23:27,948 --> 01:23:34,698
the lighting into the cosmos door and

1770
01:23:30,800 --> 01:23:36,349
you know off we would go however you

1771
01:23:34,698 --> 01:23:41,229
know the question is is that the most

1772
01:23:36,349 --> 01:23:45,078
efficient way to do it and you know the

1773
01:23:41,229 --> 01:23:47,439
it's a difficult question it might be

1774
01:23:45,078 --> 01:23:49,880
the most efficient way to do it

1775
01:23:47,439 --> 01:23:51,979
certainly for a small number of light

1776
01:23:49,880 --> 01:23:54,409
sources it would be the most efficient

1777
01:23:51,979 --> 01:23:56,178
way to do that for as that number of

1778
01:23:54,408 --> 01:23:58,578
light sources get larger though it

1779
01:23:56,179 --> 01:24:01,340
becomes too expensive potentially and

1780
01:23:58,578 --> 01:24:04,069
what we might want to do is pre compute

1781
01:24:01,340 --> 01:24:06,020
the lighting first into something like a

1782
01:24:04,069 --> 01:24:08,750
voxel grid or something like this and

1783
01:24:06,020 --> 01:24:10,270
then just sample the lighting where we

1784
01:24:08,750 --> 01:24:13,099
actually are in the world at that time

1785
01:24:10,270 --> 01:24:16,690
right that tends to be the kind of thing

1786
01:24:13,099 --> 01:24:19,130
that might be a little bit easier to do

1787
01:24:16,689 --> 01:24:22,250
because then it prevents us from having

1788
01:24:19,130 --> 01:24:34,130
to have like you know 20 light sources

1789
01:24:22,250 --> 01:24:36,500
summed for every pixel we draw so I

1790
01:24:34,130 --> 01:24:40,279
don't know so it's so that of course is

1791
01:24:36,500 --> 01:24:42,738
a tough question because it is something

1792
01:24:40,279 --> 01:24:45,800
that concerns how we're going to handle

1793
01:24:42,738 --> 01:24:47,718
lighting in sort of a structural way I'm

1794
01:24:45,800 --> 01:24:48,829
not going to dive into that today maybe

1795
01:24:47,719 --> 01:24:51,198
that's something we'll talk about a

1796
01:24:48,828 --> 01:24:53,868
little more tomorrow but what I want to

1797
01:24:51,198 --> 01:24:55,669
talk about today now is okay so now that

1798
01:24:53,868 --> 01:24:57,889
we know that we're going to compute some

1799
01:24:55,670 --> 01:25:02,480
lighting this way what else might we do

1800
01:24:57,889 --> 01:25:05,118
here to improve the quality of the

1801
01:25:02,479 --> 01:25:07,399
lighting a little bit so the first thing

1802
01:25:05,118 --> 01:25:11,058
we could do is we could start to take a

1803
01:25:07,399 --> 01:25:15,198
look at sort of the facing direction of

1804
01:25:11,059 --> 01:25:18,010
these surfaces in in some way that would

1805
01:25:15,198 --> 01:25:23,149
allow us to

1806
01:25:18,010 --> 01:25:24,770
actually respond to the light

1807
01:25:23,149 --> 01:25:30,439
differently depending on how we're

1808
01:25:24,770 --> 01:25:40,100
facing right so you know I gotta be

1809
01:25:30,439 --> 01:25:42,529
honest I'm not sure I mean I guess for

1810
01:25:40,100 --> 01:25:44,510
our cubes it's easy to understand

1811
01:25:42,529 --> 01:25:46,819
because our cubes are actually 3d

1812
01:25:44,510 --> 01:25:48,710
geometry so we can talk about how the

1813
01:25:46,819 --> 01:25:54,049
light should really bei went when it

1814
01:25:48,710 --> 01:25:57,170
hits the cube for our for our sprites

1815
01:25:54,050 --> 01:25:59,750
it's a little trickier but I suppose

1816
01:25:57,170 --> 01:26:02,270
still fine for our sprites since our

1817
01:25:59,750 --> 01:26:05,060
sprites are facing only one direction in

1818
01:26:02,270 --> 01:26:06,050
a sense and by one direction I mean to

1819
01:26:05,060 --> 01:26:09,350
band One Direction

1820
01:26:06,050 --> 01:26:13,570
you know just absolutely fabulous some

1821
01:26:09,350 --> 01:26:13,570
of some of the best music really

1822
01:26:13,869 --> 01:26:20,809
pinnacle of mankind's new school

1823
01:26:15,679 --> 01:26:22,579
achievements it's like you know it's

1824
01:26:20,810 --> 01:26:24,199
like Mahler and then and then one

1825
01:26:22,579 --> 01:26:27,140
direction but that's getting sort of off

1826
01:26:24,198 --> 01:26:30,589
into a different situation but anyway so

1827
01:26:27,140 --> 01:26:31,850
here you know I wonder what just I'm

1828
01:26:30,590 --> 01:26:33,289
just looking at it what should the

1829
01:26:31,850 --> 01:26:35,270
lighting do on this and I'm guessing you

1830
01:26:33,289 --> 01:26:37,760
know we probably want something where we

1831
01:26:35,270 --> 01:26:39,830
want to treat it as just a flat card I

1832
01:26:37,760 --> 01:26:40,760
guess and say well if I'm on this side

1833
01:26:39,829 --> 01:26:42,829
of the light source I should be

1834
01:26:40,760 --> 01:26:45,699
reflecting the light if I'm on this side

1835
01:26:42,829 --> 01:26:48,649
of the light source I shouldn't and my

1836
01:26:45,698 --> 01:26:50,299
my character should be darker right my

1837
01:26:48,649 --> 01:26:53,809
carrot my character should be reflecting

1838
01:26:50,300 --> 01:26:56,480
less less light I think

1839
01:26:53,810 --> 01:26:58,929
but either way what this basically says

1840
01:26:56,479 --> 01:27:02,479
is in order to start treating this

1841
01:26:58,929 --> 01:27:06,730
lighting a little bit more reasonably

1842
01:27:02,479 --> 01:27:06,729
what we need to do is have some way of

1843
01:27:07,779 --> 01:27:14,689
some way of taking that lighting and

1844
01:27:10,869 --> 01:27:17,750
testing what direction the you you know

1845
01:27:14,689 --> 01:27:20,988
what the the facing direction of the

1846
01:27:17,750 --> 01:27:24,460
services versus the light and so what is

1847
01:27:20,988 --> 01:27:26,359
what is that transom you light well

1848
01:27:24,460 --> 01:27:28,819
there's two separate things or

1849
01:27:26,359 --> 01:27:29,719
transferring light there so let's take

1850
01:27:28,819 --> 01:27:38,389
the first one

1851
01:27:29,719 --> 01:27:43,819
here's my cube here's the eye and here's

1852
01:27:38,390 --> 01:27:55,360
the light actually let's make the leg a

1853
01:27:43,819 --> 01:27:58,819
little higher okay so if we imagine

1854
01:27:55,359 --> 01:28:01,250
hitting this surface here and the light

1855
01:27:58,819 --> 01:28:03,198
hitting this surface here what you can

1856
01:28:01,250 --> 01:28:05,810
see is there's a reasonable reflection

1857
01:28:03,198 --> 01:28:08,750
path for something that's facing you

1858
01:28:05,810 --> 01:28:11,120
know this face of that of the cube which

1859
01:28:08,750 --> 01:28:14,420
is like sort of the the face of the cube

1860
01:28:11,119 --> 01:28:17,329
there right whereas the face of the

1861
01:28:14,420 --> 01:28:26,289
qubits facing effort it's a really tough

1862
01:28:17,329 --> 01:28:30,710
road to hoe right when both when the the

1863
01:28:26,289 --> 01:28:34,219
the light source is so oblique to the

1864
01:28:30,710 --> 01:28:37,159
cube like this most of the light for a

1865
01:28:34,219 --> 01:28:40,340
normal lighting function is going to

1866
01:28:37,159 --> 01:28:42,139
reflect that light out this way and very

1867
01:28:40,340 --> 01:28:44,779
literate little of the light is going to

1868
01:28:42,140 --> 01:28:46,640
back scatter on a typical surface like

1869
01:28:44,779 --> 01:28:52,759
that very little of the light is going

1870
01:28:46,640 --> 01:28:56,060
to back scatter back to the eye right so

1871
01:28:52,760 --> 01:28:57,920
a perfect mirror you know if it was a

1872
01:28:56,060 --> 01:28:59,870
perfect mirror surface nothing comes

1873
01:28:57,920 --> 01:29:01,399
back that way basically the only thing

1874
01:28:59,869 --> 01:29:02,869
that comes back that way is stuff that

1875
01:29:01,399 --> 01:29:04,279
comes in from over here and there's no

1876
01:29:02,869 --> 01:29:08,569
light out here the lights come from over

1877
01:29:04,279 --> 01:29:11,210
here right for a perfect mirror and as

1878
01:29:08,569 --> 01:29:13,819
the surface gets more diffuse it has to

1879
01:29:11,210 --> 01:29:16,670
get up to an incredibly high level of

1880
01:29:13,819 --> 01:29:18,979
diffusion before it's going to kick much

1881
01:29:16,670 --> 01:29:23,090
light out this way and even once it does

1882
01:29:18,979 --> 01:29:25,309
now we get into the cosine theta term

1883
01:29:23,090 --> 01:29:28,279
problem here that we were talking about

1884
01:29:25,310 --> 01:29:31,039
before where it's like as this light

1885
01:29:28,279 --> 01:29:35,119
shines in here and as its passes out

1886
01:29:31,039 --> 01:29:39,519
this way the actual portion of a light

1887
01:29:35,119 --> 01:29:42,800
shaft that can go out in that direction

1888
01:29:39,520 --> 01:29:43,570
from something that hits is going to

1889
01:29:42,800 --> 01:29:45,730
have the

1890
01:29:43,569 --> 01:29:48,549
I'm term in there right because what's

1891
01:29:45,729 --> 01:29:55,359
going to happen here is if we imagine

1892
01:29:48,550 --> 01:29:58,020
the light shaft coming in however much

1893
01:29:55,359 --> 01:30:04,238
light is coming in right if we call this

1894
01:29:58,020 --> 01:30:12,820
RL that's going to get spread onto this

1895
01:30:04,238 --> 01:30:14,769
big of a surface and then the amount

1896
01:30:12,819 --> 01:30:18,219
that's actually going to go out in that

1897
01:30:14,770 --> 01:30:22,929
direction same diagram right if we want

1898
01:30:18,219 --> 01:30:25,960
to know I guess let's say the outgoing

1899
01:30:22,929 --> 01:30:28,000
reflection here same difference right

1900
01:30:25,960 --> 01:30:30,880
the amount of light that comes from a

1901
01:30:28,000 --> 01:30:33,250
unit of the surface is going to go out

1902
01:30:30,880 --> 01:30:36,159
proportional to the cosine of the angle

1903
01:30:33,250 --> 01:30:38,649
to that surface right so that means as

1904
01:30:36,158 --> 01:30:42,460
you get really oblique this cosine term

1905
01:30:38,649 --> 01:30:45,519
right as as that angle gets get steeper

1906
01:30:42,460 --> 01:30:48,039
and steeper the amount of light that can

1907
01:30:45,520 --> 01:30:50,440
come out from there diminishes to

1908
01:30:48,039 --> 01:30:55,658
basically zero right as you get

1909
01:30:50,439 --> 01:30:57,729
perfectly down so again really kind of

1910
01:30:55,658 --> 01:31:01,799
tricky there there's just a lot at play

1911
01:30:57,729 --> 01:31:03,939
so what we would expect though again is

1912
01:31:01,800 --> 01:31:05,650
whatever lighting function we come up

1913
01:31:03,939 --> 01:31:07,719
with here it's probably going to take

1914
01:31:05,649 --> 01:31:10,059
into account the angle there and it's

1915
01:31:07,719 --> 01:31:13,149
probably going to want to become dimmer

1916
01:31:10,060 --> 01:31:17,679
as you get facing away from the light

1917
01:31:13,149 --> 01:31:19,598
source right or rather you know the

1918
01:31:17,679 --> 01:31:21,819
surface as the surface becomes that

1919
01:31:19,599 --> 01:31:23,139
oblique to the light source especially

1920
01:31:21,819 --> 01:31:25,328
if the light source is on the other side

1921
01:31:23,139 --> 01:31:26,739
of it there is a weird property of light

1922
01:31:25,328 --> 01:31:29,380
where if you happen to be going like

1923
01:31:26,738 --> 01:31:31,419
this where the light is perfectly on the

1924
01:31:29,380 --> 01:31:33,219
other side as you get to really bleak

1925
01:31:31,420 --> 01:31:34,750
angle it tends to just graze off the

1926
01:31:33,219 --> 01:31:36,310
surface and it's most services are

1927
01:31:34,750 --> 01:31:38,078
actually really bright reflectors in

1928
01:31:36,310 --> 01:31:40,300
this way so the light was over here

1929
01:31:38,078 --> 01:31:43,000
you'd actually get quite a bit of it if

1930
01:31:40,300 --> 01:31:44,349
you don't believe me on that one you can

1931
01:31:43,000 --> 01:31:50,010
do something weird if you take a piece

1932
01:31:44,349 --> 01:31:52,809
of paper and you look at a light source

1933
01:31:50,010 --> 01:31:55,270
really just glancing along the paper

1934
01:31:52,809 --> 01:31:56,770
what you can see is you get a very

1935
01:31:55,270 --> 01:32:00,540
bright reflection

1936
01:31:56,770 --> 01:32:02,230
I can really do this paper consol folded

1937
01:32:00,539 --> 01:32:05,079
then I'm going to look at the light

1938
01:32:02,229 --> 01:32:09,339
source here you get almost a mirror as

1939
01:32:05,079 --> 01:32:11,769
you get to like the perfectly 90-degree

1940
01:32:09,340 --> 01:32:14,289
angle it's very very bright along the

1941
01:32:11,770 --> 01:32:16,240
paper right whereas if I just bring the

1942
01:32:14,289 --> 01:32:18,539
paper down a little bit it's much darker

1943
01:32:16,239 --> 01:32:22,659
so like as you get to that perfect

1944
01:32:18,539 --> 01:32:24,930
glancing angle it's it's pretty darn

1945
01:32:22,659 --> 01:32:24,930
good

1946
01:32:25,619 --> 01:32:31,449
it's almost yeah if it's almost like the

1947
01:32:28,479 --> 01:32:34,059
surface of water right there if you look

1948
01:32:31,449 --> 01:32:40,779
at a piece of paper so a lot of services

1949
01:32:34,060 --> 01:32:42,820
they get very reflective right at that

1950
01:32:40,779 --> 01:32:47,109
point where the light is just grazing

1951
01:32:42,819 --> 01:32:49,409
off them but again we don't really care

1952
01:32:47,109 --> 01:32:52,210
about that so we can ignore that for now

1953
01:32:49,409 --> 01:32:53,889
so what we would have to do if we want

1954
01:32:52,210 --> 01:32:56,020
to start taking into account angular

1955
01:32:53,890 --> 01:32:58,150
issues is we need to start passing in

1956
01:32:56,020 --> 01:33:01,240
what's called a surface normal and a

1957
01:32:58,149 --> 01:33:05,399
surface normal is just a fancy way of

1958
01:33:01,239 --> 01:33:08,409
saying that we want to start passing in

1959
01:33:05,399 --> 01:33:10,239
information about how the surfaces are

1960
01:33:08,409 --> 01:33:14,680
facing what direction they're facing

1961
01:33:10,239 --> 01:33:17,079
right and so what we want to do is say

1962
01:33:14,680 --> 01:33:18,460
hey this is a flat surface it's facing

1963
01:33:17,079 --> 01:33:20,590
that direction right this is the flat

1964
01:33:18,460 --> 01:33:22,420
surface was facing that direction so we

1965
01:33:20,590 --> 01:33:24,850
just need something a vector that tells

1966
01:33:22,420 --> 01:33:27,520
us what direction it's facing so for

1967
01:33:24,850 --> 01:33:29,320
every vertex we pass in we can just pass

1968
01:33:27,520 --> 01:33:31,120
in a vector that says this is the

1969
01:33:29,319 --> 01:33:34,569
direction that the surface is facing

1970
01:33:31,119 --> 01:33:37,210
right it's pretty easy to do but it

1971
01:33:34,569 --> 01:33:39,029
would it would require us again to sort

1972
01:33:37,210 --> 01:33:40,840
of augment how we're doing things

1973
01:33:39,029 --> 01:33:42,789
unfortunately we've I think set

1974
01:33:40,840 --> 01:33:46,090
ourselves up to make that not be

1975
01:33:42,789 --> 01:33:48,899
particularly difficult right so if we

1976
01:33:46,090 --> 01:33:52,239
were to take a look at our vertex here

1977
01:33:48,899 --> 01:33:54,699
extra vertex if we want to do we can

1978
01:33:52,239 --> 01:33:56,439
just add a normal vector in here right

1979
01:33:54,699 --> 01:33:57,340
and that normal vector just a

1980
01:33:56,439 --> 01:33:59,379
three-dimensional vector

1981
01:33:57,340 --> 01:34:01,119
it just is going to say what direction

1982
01:33:59,380 --> 01:34:03,760
the surface is pointing it'd be pretty

1983
01:34:01,119 --> 01:34:06,659
trivial for us to add that right there's

1984
01:34:03,760 --> 01:34:10,440
nothing very difficult about that at all

1985
01:34:06,659 --> 01:34:10,439
so if I was to go

1986
01:34:10,979 --> 01:34:21,159
find where we're writing these out which

1987
01:34:14,289 --> 01:34:22,359
is in our render group what you can see

1988
01:34:21,159 --> 01:34:24,760
is we've kind of nicely isolated

1989
01:34:22,359 --> 01:34:26,380
everything down the only place we do

1990
01:34:24,760 --> 01:34:28,840
anything with it is in this push blog

1991
01:34:26,380 --> 01:34:30,670
function here right and so what we would

1992
01:34:28,840 --> 01:34:42,100
have to do is augment this push squad

1993
01:34:30,670 --> 01:34:45,970
function to somehow figure out what

1994
01:34:42,100 --> 01:34:48,090
these normals are right now we can

1995
01:34:45,970 --> 01:34:50,619
actually just pass the normals down and

1996
01:34:48,090 --> 01:34:53,800
that may well be what we want to do

1997
01:34:50,619 --> 01:34:55,809
eventually but if we don't mind spending

1998
01:34:53,800 --> 01:34:59,020
a little extra computational multiplying

1999
01:34:55,810 --> 01:35:02,170
here we can actually produce normals

2000
01:34:59,020 --> 01:35:04,300
without that in the first place right if

2001
01:35:02,170 --> 01:35:05,800
we assume all our triangles are supposed

2002
01:35:04,300 --> 01:35:09,460
to be coming from flat objects which

2003
01:35:05,800 --> 01:35:11,590
they are at the moment right then what

2004
01:35:09,460 --> 01:35:13,300
we know is if we're given three vertices

2005
01:35:11,590 --> 01:35:15,699
or in this case four vertices because of

2006
01:35:13,300 --> 01:35:22,480
the quad then really we actually know

2007
01:35:15,699 --> 01:35:25,869
remember the cross product remember that

2008
01:35:22,479 --> 01:35:28,539
guy we have this idea that if you cross

2009
01:35:25,869 --> 01:35:31,449
a vector a with a vector B you'd get a

2010
01:35:28,539 --> 01:35:34,630
vector perpendicular to it right well

2011
01:35:31,449 --> 01:35:37,029
all we would have to do is pick three of

2012
01:35:34,630 --> 01:35:39,430
these vertices produce the two vectors

2013
01:35:37,029 --> 01:35:44,019
and cross them and we would get the

2014
01:35:39,430 --> 01:35:45,490
normal right that's all we would have to

2015
01:35:44,020 --> 01:35:47,830
do because the cross products gives us a

2016
01:35:45,489 --> 01:35:49,689
perpendicular vector if we want a arrow

2017
01:35:47,829 --> 01:35:52,000
pointing out of our triangle it's pretty

2018
01:35:49,689 --> 01:35:54,839
easy to get so what we could do is say

2019
01:35:52,000 --> 01:35:54,840
you know what

2020
01:35:55,529 --> 01:36:09,210
[Applause]

2021
01:36:06,109 --> 01:36:14,039
let's just go ahead and produce the

2022
01:36:09,210 --> 01:36:16,529
cross product of you know two of these

2023
01:36:14,039 --> 01:36:19,140
now we want this to be in the direction

2024
01:36:16,529 --> 01:36:21,090
you can see the triangle right and

2025
01:36:19,140 --> 01:36:24,690
remember we were talking about the right

2026
01:36:21,090 --> 01:36:26,400
hand rule so we know that if we if we

2027
01:36:24,689 --> 01:36:28,529
have a triangle that's wound

2028
01:36:26,399 --> 01:36:31,019
counterclockwise which is how we round

2029
01:36:28,529 --> 01:36:34,170
our triangles and we know that this is

2030
01:36:31,020 --> 01:36:36,540
going to go like 0 1 2 for example right

2031
01:36:34,170 --> 01:36:39,270
then what we want to do is make sure

2032
01:36:36,539 --> 01:36:41,369
that we cross in this direction so the

2033
01:36:39,270 --> 01:36:43,830
normal comes out pointing us remember

2034
01:36:41,369 --> 01:36:46,949
right hand rule curl your fingers from

2035
01:36:43,829 --> 01:36:48,930
the vector a to the vector B and your

2036
01:36:46,949 --> 01:36:50,399
thumb is pointing out if it use your

2037
01:36:48,930 --> 01:36:52,770
right hand your thumb is pointing out

2038
01:36:50,399 --> 01:36:57,599
towards the direction the normal the

2039
01:36:52,770 --> 01:37:00,990
results the cross product right so we

2040
01:36:57,600 --> 01:37:04,079
want P 1 minus p 0 and p 2 minus p 0

2041
01:37:00,989 --> 01:37:06,329
right looking at that diagram we want to

2042
01:37:04,079 --> 01:37:07,800
do the cross of those true and that will

2043
01:37:06,329 --> 01:37:10,859
give us our normal now of course

2044
01:37:07,800 --> 01:37:13,890
remember our normal is actually not

2045
01:37:10,859 --> 01:37:14,819
quite right yet because one of the

2046
01:37:13,890 --> 01:37:16,829
things that we're going to want to do

2047
01:37:14,819 --> 01:37:17,939
with this normal probably since we're

2048
01:37:16,829 --> 01:37:18,840
going to use it in letting equations

2049
01:37:17,939 --> 01:37:20,849
we're going to need to do things like

2050
01:37:18,840 --> 01:37:26,250
that product is so on so forth on it so

2051
01:37:20,850 --> 01:37:28,829
one of the reasons we want when we're

2052
01:37:26,250 --> 01:37:30,510
producing our surface normals one of the

2053
01:37:28,829 --> 01:37:33,000
reasons we often call them normals is

2054
01:37:30,510 --> 01:37:37,170
because we want them to be normalized so

2055
01:37:33,000 --> 01:37:38,760
we want them to be unit length right so

2056
01:37:37,170 --> 01:37:40,140
since we know that the cross product

2057
01:37:38,760 --> 01:37:41,850
will actually produce something that's

2058
01:37:40,140 --> 01:37:45,240
the length of a time's the length of B

2059
01:37:41,850 --> 01:37:47,180
right this is not going to be a normal

2060
01:37:45,239 --> 01:37:51,449
it's not going to normalize like we knew

2061
01:37:47,180 --> 01:37:53,789
unit length but we can just normalize it

2062
01:37:51,449 --> 01:38:00,059
that since we have that we can do that

2063
01:37:53,789 --> 01:38:00,859
like this I forgot these are four

2064
01:38:00,060 --> 01:38:03,230
dimensional

2065
01:38:00,859 --> 01:38:09,449
[Applause]

2066
01:38:03,229 --> 01:38:12,299
oops so that will actually produce a

2067
01:38:09,449 --> 01:38:14,590
normal for us and now that normal will

2068
01:38:12,300 --> 01:38:23,729
be correct and I can put it to do here

2069
01:38:14,590 --> 01:38:23,729
[Applause]

2070
01:38:25,640 --> 01:38:31,170
let me pass down the normal there is

2071
01:38:27,930 --> 01:38:34,350
sort of a caveat there I guess to which

2072
01:38:31,170 --> 01:38:35,940
is that when we do this subtraction if

2073
01:38:34,350 --> 01:38:38,190
we want to compute this correctly

2074
01:38:35,939 --> 01:38:39,750
that's device value that's in the W that

2075
01:38:38,189 --> 01:38:43,710
gets added to the Z we should probably

2076
01:38:39,750 --> 01:38:45,810
add it first right so probably what we

2077
01:38:43,710 --> 01:38:49,260
want to do here is we want to do

2078
01:38:45,810 --> 01:38:50,730
something a little bit more Safi in a

2079
01:38:49,260 --> 01:38:57,840
sense right we probably want to do

2080
01:38:50,729 --> 01:39:11,369
something like this which is like edge

2081
01:38:57,840 --> 01:39:23,159
one zero is this an edge to zero is this

2082
01:39:11,369 --> 01:39:24,960
right so what we probably want to do

2083
01:39:23,159 --> 01:39:27,239
here is when we do this subtract we're

2084
01:39:24,960 --> 01:39:31,159
going to get an additional Z value out

2085
01:39:27,239 --> 01:39:35,099
of it right so we probably want to do

2086
01:39:31,159 --> 01:39:37,409
the Z bias here so that we will properly

2087
01:39:35,100 --> 01:39:39,810
produce the normal for things that are

2088
01:39:37,409 --> 01:39:43,229
four as if the things were actually

2089
01:39:39,810 --> 01:39:46,590
there's biased Z right which I think

2090
01:39:43,229 --> 01:39:48,509
this will do properly I'd have to think

2091
01:39:46,590 --> 01:39:51,170
about it we'll check it a little bit

2092
01:39:48,510 --> 01:39:54,960
more carefully later but there you go

2093
01:39:51,170 --> 01:39:57,779
right so there's the surface normal and

2094
01:39:54,960 --> 01:39:59,310
now that's getting stored right so now

2095
01:39:57,779 --> 01:40:02,279
we're writing out that surface normal

2096
01:39:59,310 --> 01:40:04,470
and we have it in our vertices what that

2097
01:40:02,279 --> 01:40:07,259
means is we can pop back to our OpenGL

2098
01:40:04,470 --> 01:40:10,560
now and we can say that that surface

2099
01:40:07,260 --> 01:40:11,880
normal is something that we can handle

2100
01:40:10,560 --> 01:40:15,210
in our

2101
01:40:11,880 --> 01:40:17,520
common set so what we can do here is

2102
01:40:15,210 --> 01:40:23,609
take a look at this we do use program

2103
01:40:17,520 --> 01:40:29,790
begin we can say there's now an NRA and

2104
01:40:23,609 --> 01:40:31,198
there's a normal ID and then we're just

2105
01:40:29,789 --> 01:40:45,000
going to use that exact like everything

2106
01:40:31,198 --> 01:40:49,289
else so I will say NRA and that's really

2107
01:40:45,000 --> 01:40:54,179
all there is to it right I we only three

2108
01:40:49,289 --> 01:40:58,590
long one of the things we want to do

2109
01:40:54,179 --> 01:41:01,739
here with that normal is we want to like

2110
01:40:58,590 --> 01:41:16,289
I said set it up so we also got to take

2111
01:41:01,738 --> 01:41:18,089
it down so this will unset it and then

2112
01:41:16,289 --> 01:41:24,380
the other thing we got to do is when we

2113
01:41:18,090 --> 01:41:24,380
actually get the uniform locations

2114
01:41:27,109 --> 01:41:33,769
let's see where that's happening there

2115
01:41:31,529 --> 01:41:33,769
it is

2116
01:41:35,560 --> 01:41:42,470
[Applause]

2117
01:41:38,810 --> 01:41:50,110
so it looks like we did this manually

2118
01:41:42,470 --> 01:41:50,110
every time what we do

2119
01:41:54,538 --> 01:41:59,059
so why do we do that manually every time

2120
01:42:01,279 --> 01:42:12,689
does anybody know why we do that manual

2121
01:42:03,479 --> 01:42:22,558
every time like why wouldn't we just do

2122
01:42:12,689 --> 01:42:28,319
that in OpenGL create program I feel

2123
01:42:22,559 --> 01:42:30,360
like we just should right I mean doesn't

2124
01:42:28,319 --> 01:42:37,139
that seem like a more reasonable thing

2125
01:42:30,359 --> 01:42:45,538
to do so we can opengl create program

2126
01:42:37,139 --> 01:42:48,239
right why don't we just do this like

2127
01:42:45,538 --> 01:42:58,920
OpenGL create program and then it takes

2128
01:42:48,238 --> 01:43:15,479
one of these things here and so then you

2129
01:42:58,920 --> 01:43:18,019
don't return anything you just say get

2130
01:43:15,479 --> 01:43:18,018
all the stuff

2131
01:43:20,238 --> 01:43:40,849
I don't know why I didn't call that vert

2132
01:43:27,020 --> 01:43:52,340
n I probably should have Virtanen but

2133
01:43:40,850 --> 01:44:04,280
that seems a lot saner to me so I think

2134
01:43:52,340 --> 01:44:06,170
I'm just going to do that okay and then

2135
01:44:04,279 --> 01:44:08,179
we found our OpenGL create program here

2136
01:44:06,170 --> 01:44:10,909
now and I think we can just get rid of

2137
01:44:08,180 --> 01:44:16,850
all of this stuff so basically result

2138
01:44:10,909 --> 01:44:18,859
common is now going to be written into

2139
01:44:16,850 --> 01:44:23,469
directly and this thing only has to get

2140
01:44:18,859 --> 01:44:23,469
the stuff it's actually specific to it

2141
01:44:24,550 --> 01:44:32,409
what's the problem cannot convert from

2142
01:44:29,229 --> 01:44:36,589
void to why isn't this wrapping anymore

2143
01:44:32,409 --> 01:44:39,039
it's weird that from void to gluant yes

2144
01:44:36,590 --> 01:44:39,039
that's correct

2145
01:44:41,460 --> 01:44:46,090
[Applause]

2146
01:44:47,350 --> 01:44:56,930
clog handles yeah all right so that's

2147
01:44:53,899 --> 01:44:59,059
just cleaner I think and you know what I

2148
01:44:56,930 --> 01:45:02,350
could still return the Frog handle as

2149
01:44:59,060 --> 01:45:02,350
well just to make things a little easier

2150
01:45:02,619 --> 01:45:11,380
there's no reason not to I guess as so

2151
01:45:06,710 --> 01:45:11,380
we can still return program IDs

2152
01:45:15,679 --> 01:45:41,929
and this goes away sort of all that code

2153
01:45:36,500 --> 01:45:45,090
[Applause]

2154
01:45:41,929 --> 01:45:48,689
so now in theory we should have that

2155
01:45:45,090 --> 01:45:50,788
array getting submitted but in theory

2156
01:45:48,689 --> 01:45:54,449
unless they mess something up and I

2157
01:45:50,788 --> 01:45:57,149
obviously did Oh God

2158
01:45:54,448 --> 01:45:59,998
I was going to say it shouldn't do

2159
01:45:57,149 --> 01:46:02,219
anything because nobody's looking for it

2160
01:45:59,998 --> 01:46:04,708
yet right or at least they should not be

2161
01:46:02,219 --> 01:46:06,840
looking for it yet I don't even want to

2162
01:46:04,708 --> 01:46:10,819
know what just happened there because

2163
01:46:06,840 --> 01:46:13,979
nothing should have happened there right

2164
01:46:10,819 --> 01:46:16,728
because we're not touching that array at

2165
01:46:13,979 --> 01:46:21,119
all so I'm not sure why it would be

2166
01:46:16,729 --> 01:46:25,050
upset about it why the class should not

2167
01:46:21,118 --> 01:46:27,978
have had any effect on anything at least

2168
01:46:25,050 --> 01:46:27,979
not that I could think of

2169
01:46:34,649 --> 01:46:45,099
we make sure I mess something up in the

2170
01:46:37,479 --> 01:46:47,939
create program there we go so the

2171
01:46:45,100 --> 01:46:52,239
program handle is getting set properly

2172
01:46:47,939 --> 01:46:55,960
the it's attribute locations are in

2173
01:46:52,238 --> 01:46:58,329
theory getting queried here and set I'm

2174
01:46:55,960 --> 01:46:59,880
going to step in to use program begin

2175
01:46:58,329 --> 01:47:04,859
[Applause]

2176
01:46:59,880 --> 01:47:04,859
just to see if anything looks weird

2177
01:47:14,020 --> 01:47:17,940
that all looks totally normal

2178
01:47:24,109 --> 01:47:27,239
[Applause]

2179
01:47:43,149 --> 01:47:48,250
so I have no idea why that's unhappy

2180
01:47:51,260 --> 01:47:57,909
[Applause]

2181
01:47:54,250 --> 01:48:05,850
it doesn't seem like it should be

2182
01:47:57,909 --> 01:48:05,849
I must have mistyped something somewhere

2183
01:48:18,029 --> 01:48:21,199
[Applause]

2184
01:48:23,429 --> 01:48:30,289
because we always use textured vertex ah

2185
01:48:27,408 --> 01:48:33,608
that's the problem right there

2186
01:48:30,289 --> 01:48:33,609
[Applause]

2187
01:48:33,800 --> 01:48:41,850
one of those reasons I really do wish

2188
01:48:38,219 --> 01:48:45,300
that C had a way of bulk initializing

2189
01:48:41,850 --> 01:48:47,520
things more cleanly right I would have

2190
01:48:45,300 --> 01:48:50,369
liked that to have been able to say

2191
01:48:47,520 --> 01:48:53,520
which one of these I was specifying you

2192
01:48:50,369 --> 01:48:56,880
know which I think they do in more

2193
01:48:53,520 --> 01:48:58,679
modern versions now have but anyway this

2194
01:48:56,880 --> 01:49:04,859
doesn't have normals so we need to

2195
01:48:58,679 --> 01:49:06,810
insert in here see where's the other

2196
01:49:04,859 --> 01:49:11,279
third is you need to insert in here

2197
01:49:06,810 --> 01:49:15,080
space for the normals so that we can

2198
01:49:11,279 --> 01:49:17,789
still set the other elements there we go

2199
01:49:15,079 --> 01:49:20,158
okay so let's go ahead and go to the QA

2200
01:49:17,789 --> 01:49:22,920
we have prepared ourselves for tomorrow

2201
01:49:20,158 --> 01:49:26,219
where we will have normals for doing a

2202
01:49:22,920 --> 01:49:30,020
little bit more with our lighting but

2203
01:49:26,219 --> 01:49:30,020
let's go ahead and go to Q&amp;A for now

2204
01:49:48,880 --> 01:49:54,739
or the lighting of the sprites do you

2205
01:49:52,069 --> 01:50:01,029
need to compensate for the angle offset

2206
01:49:54,738 --> 01:50:04,988
if is it using the same light source as

2207
01:50:01,029 --> 01:50:04,988
the terrain

2208
01:50:20,359 --> 01:50:29,059
I don't think I understand the question

2209
01:50:24,010 --> 01:50:31,220
we do for or for the normals right we do

2210
01:50:29,060 --> 01:50:34,960
want to take into account the fact that

2211
01:50:31,220 --> 01:50:39,050
the sprites are sort of standing upright

2212
01:50:34,960 --> 01:50:45,380
and we will we are doing that by using

2213
01:50:39,050 --> 01:50:47,239
the WZ bias offset part of that in doing

2214
01:50:45,380 --> 01:50:50,480
the normal calculation at the moment so

2215
01:50:47,239 --> 01:50:52,130
in theory we are going to be taking that

2216
01:50:50,479 --> 01:50:55,329
into account if that's what you mean but

2217
01:50:52,130 --> 01:50:55,329
if that's not what you mean I'm not sure

2218
01:50:59,470 --> 01:51:04,789
SF Gartner says there seems to be a lot

2219
01:51:02,090 --> 01:51:06,800
of banding around the lights actually no

2220
01:51:04,789 --> 01:51:09,140
that is not the twitch encoding there

2221
01:51:06,800 --> 01:51:14,090
just is a lot of banding around the

2222
01:51:09,140 --> 01:51:21,800
lights and I don't know exactly what the

2223
01:51:14,090 --> 01:51:23,960
banding is from but I would assume well

2224
01:51:21,800 --> 01:51:26,270
I don't know what I would assume there's

2225
01:51:23,960 --> 01:51:33,020
a couple different things that can be

2226
01:51:26,270 --> 01:51:36,920
from right and I would guess some of it

2227
01:51:33,020 --> 01:51:40,580
may have to do with the precision at

2228
01:51:36,920 --> 01:51:43,609
which things are computed because that

2229
01:51:40,579 --> 01:51:45,890
can change but I don't actually know so

2230
01:51:43,609 --> 01:51:48,199
it could actually just be because of the

2231
01:51:45,890 --> 01:51:50,410
fact that we don't have enough color

2232
01:51:48,199 --> 01:51:50,409
resolution

2233
01:52:04,319 --> 01:52:13,049
in theory I would expect that to not be

2234
01:52:08,559 --> 01:52:13,050
so banded unless those are actually the

2235
01:52:18,689 --> 01:52:24,638
so here's one thing I will say it is at

2236
01:52:22,118 --> 01:52:27,098
least theoretically plausible to me that

2237
01:52:24,639 --> 01:52:30,069
the internal precision of the buffer

2238
01:52:27,099 --> 01:52:32,349
that we store back to is not sufficient

2239
01:52:30,069 --> 01:52:35,679
and so when we square an unsquare later

2240
01:52:32,349 --> 01:52:36,969
it's a problem let me just test

2241
01:52:35,679 --> 01:52:40,210
something really quickly to see if

2242
01:52:36,969 --> 01:52:41,948
that's the case but the short answer is

2243
01:52:40,210 --> 01:52:45,359
I'm not sure that I've investigated yet

2244
01:52:41,948 --> 01:52:45,359
I couldn't tell you what it is

2245
01:52:50,500 --> 01:52:53,670
[Applause]

2246
01:53:05,579 --> 01:53:13,500
so this right here OpenGL default frame

2247
01:53:10,359 --> 01:53:13,500
buffer texture format

2248
01:53:14,760 --> 01:53:28,329
in it we set it to RGB a8 and then if we

2249
01:53:20,770 --> 01:53:30,580
allow we set to srgb alpha 8 so what we

2250
01:53:28,329 --> 01:53:34,269
can do here if we want to is we could

2251
01:53:30,579 --> 01:53:39,340
try setting this to an actual higher

2252
01:53:34,270 --> 01:53:42,190
depth right so we could try some kind of

2253
01:53:39,340 --> 01:53:46,360
a deeper frame buffer to see what

2254
01:53:42,189 --> 01:53:50,769
happens to the banding and I don't see I

2255
01:53:46,359 --> 01:53:52,979
don't see any improvement to the banding

2256
01:53:50,770 --> 01:53:52,980
there

2257
01:54:10,719 --> 01:54:16,539
so I mean I would assume that it's some

2258
01:54:14,770 --> 01:54:18,870
kind of a math precision problem but I

2259
01:54:16,539 --> 01:54:18,869
don't know

2260
01:54:27,380 --> 01:54:36,390
we've defined where it is so we can set

2261
01:54:34,680 --> 01:54:40,380
it to full a full floating-point frame

2262
01:54:36,390 --> 01:54:43,260
buffer which is you know in theory way

2263
01:54:40,380 --> 01:54:45,000
more than we could possibly need and see

2264
01:54:43,260 --> 01:54:48,900
if we still get the banding but yeah so

2265
01:54:45,000 --> 01:54:50,729
I still see the banding there so we've

2266
01:54:48,899 --> 01:54:57,750
got some other problem right it's not

2267
01:54:50,729 --> 01:55:01,559
that which is you know I just wanted to

2268
01:54:57,750 --> 01:55:04,050
double-check but yeah I don't know what

2269
01:55:01,560 --> 01:55:06,420
the bandings from it it's possible I

2270
01:55:04,050 --> 01:55:10,890
suppose let me also check just to make

2271
01:55:06,420 --> 01:55:12,810
sure I'll try to see what the actual

2272
01:55:10,890 --> 01:55:15,150
pixel values are there it may be that

2273
01:55:12,810 --> 01:55:18,210
the banding is actually just unavoidable

2274
01:55:15,149 --> 01:55:21,599
in terms of that's the color that's the

2275
01:55:18,210 --> 01:55:23,000
level of color you get an 8-bit and in

2276
01:55:21,600 --> 01:55:26,850
order to avoid it we have to differ

2277
01:55:23,000 --> 01:55:33,090
right which you might want to do but

2278
01:55:26,850 --> 01:55:37,350
let's find out so here is a boundary

2279
01:55:33,090 --> 01:55:41,190
between two of them so I'm taking this

2280
01:55:37,350 --> 01:55:46,680
this upper one here tonight because that

2281
01:55:41,189 --> 01:55:48,839
stay open while I do this no doesn't

2282
01:55:46,680 --> 01:55:56,159
seem to actually work so there's the

2283
01:55:48,840 --> 01:56:00,619
upper one it's 26 4026 here's the lower

2284
01:55:56,159 --> 01:56:09,180
one twenty-five thirty nine twenty five

2285
01:56:00,619 --> 01:56:11,930
so it's pretty much that that says much

2286
01:56:09,180 --> 01:56:18,659
as that is the color resolution of 8-bit

2287
01:56:11,930 --> 01:56:20,400
. right so the only way we could get rid

2288
01:56:18,659 --> 01:56:25,170
of that banding unfortunately is to

2289
01:56:20,399 --> 01:56:33,149
deter the output which to be honest I

2290
01:56:25,170 --> 01:56:37,800
don't remember what you'll turn on we

2291
01:56:33,149 --> 01:56:41,210
should have been able to if if we use

2292
01:56:37,800 --> 01:56:48,420
the higher resolution back buffer

2293
01:56:41,210 --> 01:56:53,819
it should deter on display normally so

2294
01:56:48,420 --> 01:56:55,289
I'm not sure why it wasn't we don't

2295
01:56:53,819 --> 01:57:12,329
that's not we that's not the good three

2296
01:56:55,289 --> 01:57:15,439
I'm talking about all right so I just

2297
01:57:12,329 --> 01:57:15,439
don't know

2298
01:57:27,140 --> 01:57:30,329
[Applause]

2299
01:57:45,050 --> 01:57:54,250
I don't know if this is the case or not

2300
01:57:50,840 --> 01:57:54,250
like I just don't know

2301
01:58:14,119 --> 01:58:26,449
so yeah I don't know about this let me

2302
01:58:18,140 --> 01:58:29,300
just see I'll I'll try turning this on I

2303
01:58:26,449 --> 01:58:31,519
know I'm going to have to like spend

2304
01:58:29,300 --> 01:58:34,130
more time finding out about exactly how

2305
01:58:31,520 --> 01:58:37,400
we get it to get there the final frame

2306
01:58:34,130 --> 01:58:44,659
buffer down but assuming we set this to

2307
01:58:37,399 --> 01:58:46,279
RGB a 16 so that our you know

2308
01:58:44,659 --> 01:58:48,619
intermediate services have more

2309
01:58:46,279 --> 01:58:50,719
resolution than eight bits you should be

2310
01:58:48,619 --> 01:58:53,329
able to get to disser unresolved I don't

2311
01:58:50,720 --> 01:58:57,140
actually know though what the correct

2312
01:58:53,329 --> 01:59:00,229
way to do that is I do not remember what

2313
01:58:57,140 --> 01:59:09,230
the OpenGL magic sauce is to make that

2314
01:59:00,229 --> 01:59:11,569
happen I mean we could implement it

2315
01:59:09,229 --> 01:59:14,229
ourselves as well to which maybe we

2316
01:59:11,569 --> 01:59:14,229
should do but

2317
01:59:22,179 --> 01:59:37,800
so here is our final blitt right it's

2318
01:59:28,988 --> 01:59:37,799
right here so right before we do this

2319
01:59:41,189 --> 01:59:46,658
we're we're actually drawing to the

2320
01:59:43,210 --> 01:59:48,969
final frame buffer I can try just seeing

2321
01:59:46,658 --> 01:59:51,189
if telling it to use this in there helps

2322
01:59:48,969 --> 01:59:53,980
I don't know that it will yeah it

2323
01:59:51,189 --> 01:59:55,389
doesn't so we're going to have to look

2324
01:59:53,979 --> 01:59:58,500
up if we want to get rid of that banding

2325
01:59:55,390 --> 02:00:02,100
we're going to have to look up how to

2326
01:59:58,500 --> 02:00:02,100
force it to differ

2327
02:00:27,179 --> 02:00:33,929
let's see flying silences as our hero

2328
02:00:31,800 --> 02:00:35,820
does not represent the actual hero that

2329
02:00:33,929 --> 02:00:37,890
save our lives every day all over the

2330
02:00:35,819 --> 02:00:41,309
world I took the liberty and made some

2331
02:00:37,890 --> 02:00:54,869
corrections to the game art that was

2332
02:00:41,310 --> 02:00:56,340
what okay miss Kipps that one - yo cat

2333
02:00:54,869 --> 02:00:59,309
what kind of rendering pipeline does

2334
02:00:56,340 --> 02:01:03,270
this use forward deferred or both well

2335
02:00:59,310 --> 02:01:07,469
it's it's forward but it's a desk filled

2336
02:01:03,270 --> 02:01:14,280
renderer which is unusual it's pretty

2337
02:01:07,469 --> 02:01:17,579
bizarre um we may in the future want to

2338
02:01:14,279 --> 02:01:18,238
do something with deferred maybe but

2339
02:01:17,579 --> 02:01:20,219
probably not

2340
02:01:18,238 --> 02:01:21,869
I don't think we're going to need to so

2341
02:01:20,219 --> 02:01:26,880
it's forward with depth feeling at the

2342
02:01:21,869 --> 02:01:30,119
moment crammed 7 it's a debug text being

2343
02:01:26,880 --> 02:01:32,429
lighted yes at the moment it is use

2344
02:01:30,119 --> 02:01:38,069
sampler with Shift key pressed to get

2345
02:01:32,429 --> 02:01:40,949
info window Oh in you mean I'll

2346
02:01:38,069 --> 02:01:42,599
have to do that I missed a little line

2347
02:01:40,948 --> 02:01:44,069
showing the current file name inside for

2348
02:01:42,600 --> 02:01:46,650
critter it was easier to follow that way

2349
02:01:44,069 --> 02:01:49,590
yeah I don't use that anymore but I

2350
02:01:46,649 --> 02:01:53,329
could try to compile a special for coder

2351
02:01:49,590 --> 02:01:53,329
custom for that if you want to remind me

2352
02:01:57,260 --> 02:02:02,310
if someone want to send me an email to

2353
02:02:00,170 --> 02:02:05,149
remind me to do that I'll do that I'll

2354
02:02:02,310 --> 02:02:05,150
build one of my other machine

2355
02:02:07,979 --> 02:02:13,149
Arif 86 how expensive it will be if the

2356
02:02:11,590 --> 02:02:14,980
light source is moving for example

2357
02:02:13,149 --> 02:02:16,750
following the torch the hero could be

2358
02:02:14,979 --> 02:02:19,750
carrying or the flying light projectile

2359
02:02:16,750 --> 02:02:24,220
well right now the lighting doesn't care

2360
02:02:19,750 --> 02:02:26,979
where it is so it's no more expensive to

2361
02:02:24,220 --> 02:02:34,240
have it move than then to have it be

2362
02:02:26,979 --> 02:02:36,869
stationary right so this gives it's free

2363
02:02:34,239 --> 02:02:39,609
to have it follow the here around

2364
02:02:36,869 --> 02:02:42,130
basically all we do is change that value

2365
02:02:39,609 --> 02:02:46,599
in the constant store right and then the

2366
02:02:42,130 --> 02:02:50,609
light moves so because we're not using

2367
02:02:46,600 --> 02:02:50,610
any pre computed lighting at the moment

2368
02:03:00,809 --> 02:03:04,920
I think code or update code Excel it

2369
02:03:03,779 --> 02:03:06,269
will not be able to step into the shader

2370
02:03:04,920 --> 02:03:07,980
but you should be able to see the open

2371
02:03:06,270 --> 02:03:09,900
till state I don't know I think I'm

2372
02:03:07,979 --> 02:03:12,299
going to uninstall code Excel because it

2373
02:03:09,899 --> 02:03:14,399
makes Visual Studio not work anymore I

2374
02:03:12,300 --> 02:03:15,510
will at least need to uninstall the

2375
02:03:14,399 --> 02:03:17,538
Visual Studio you're a part of it I

2376
02:03:15,510 --> 02:03:17,539
think

2377
02:03:32,979 --> 02:03:37,869
uh all right so I think that's it stream

2378
02:03:37,180 --> 02:03:41,079
has ended

2379
02:03:37,869 --> 02:03:43,269
I will be back here tomorrow for sure

2380
02:03:41,079 --> 02:03:45,760
because we got more lighting to do but

2381
02:03:43,270 --> 02:03:47,230
for now I think we'll just call it it'd

2382
02:03:45,760 --> 02:03:48,909
be interesting yeah we'll have to take a

2383
02:03:47,229 --> 02:03:54,250
look at what we can do about the banding

2384
02:03:48,909 --> 02:03:59,199
oh I forgot right since those lights are

2385
02:03:54,250 --> 02:04:01,689
just absolute they will as we move down

2386
02:03:59,199 --> 02:04:05,170
as the world wreath centers since we

2387
02:04:01,689 --> 02:04:07,179
always render around the camera in terms

2388
02:04:05,170 --> 02:04:10,000
of coordinates as the world.we centers

2389
02:04:07,180 --> 02:04:12,720
the light moves that's cool that's

2390
02:04:10,000 --> 02:04:12,720
really cool

2391
02:04:20,769 --> 02:04:27,338
awesome alright

2392
02:04:23,828 --> 02:04:29,668
anyway um alright so I'm going to wind

2393
02:04:27,338 --> 02:04:29,668
it down

2394
02:04:38,139 --> 02:04:42,380
yeah thank you very much for joining me

2395
02:04:41,029 --> 02:04:44,238
for the episode of handmade hero for the

2396
02:04:42,380 --> 02:04:46,460
pleasure coating with you as always if

2397
02:04:44,238 --> 02:04:48,019
you would like to follow along theories

2398
02:04:46,460 --> 02:04:50,329
at home you can always peer to the game

2399
02:04:48,020 --> 02:04:51,530
on handmade hero org and it comes with

2400
02:04:50,329 --> 02:04:53,569
source code so you could do your own

2401
02:04:51,529 --> 02:04:54,710
experimentation with it we also have

2402
02:04:53,569 --> 02:04:56,299
forms that you can go to if you want to

2403
02:04:54,710 --> 02:04:58,399
ask questions a patreon page if you want

2404
02:04:56,300 --> 02:05:00,260
to support the video series a schedule

2405
02:04:58,399 --> 02:05:01,579
bot you can go to if you want to know

2406
02:05:00,260 --> 02:05:03,460
one we're going to be live and an

2407
02:05:01,579 --> 02:05:06,769
episode guide for catching up on old

2408
02:05:03,460 --> 02:05:08,810
episodes that's it for today I'll be

2409
02:05:06,770 --> 02:05:10,670
back here tomorrow I believe I said it'd

2410
02:05:08,810 --> 02:05:11,860
be noon tomorrow noon Pacific Daylight

2411
02:05:10,670 --> 02:05:15,859
Time

2412
02:05:11,859 --> 02:05:17,149
until then we'll probably be doing just

2413
02:05:15,859 --> 02:05:18,319
putting in the normal stuff and maybe

2414
02:05:17,149 --> 02:05:20,599
we'll take a look at that death ring as

2415
02:05:18,319 --> 02:05:23,210
well if we can figure out a good way to

2416
02:05:20,600 --> 02:05:25,789
open Jill together for us that's about

2417
02:05:23,210 --> 02:05:27,109
it until then have fun programming and

2418
02:05:25,789 --> 02:05:29,469
I'll see you on the Internet take these

2419
02:05:27,109 --> 02:05:29,469
everybody

