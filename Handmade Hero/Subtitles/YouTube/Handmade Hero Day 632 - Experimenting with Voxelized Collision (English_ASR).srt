1
00:00:00,960 --> 00:00:04,640
hello everyone and welcome to handmade

2
00:00:02,638 --> 00:00:06,240
hero sure we could complete game live on

3
00:00:04,639 --> 00:00:08,080
stream today i want to take a little bit

4
00:00:06,240 --> 00:00:10,719
of a look at the collision detector uh

5
00:00:08,080 --> 00:00:11,199
probably this in like two ways last week

6
00:00:10,718 --> 00:00:13,279
i

7
00:00:11,199 --> 00:00:14,879
did some diagrams on the board just to

8
00:00:13,279 --> 00:00:16,320
sort of talk out like how do we want to

9
00:00:14,880 --> 00:00:17,839
approach this for

10
00:00:16,320 --> 00:00:19,359
what will be our final collision

11
00:00:17,839 --> 00:00:21,920
detector that we're you know

12
00:00:19,359 --> 00:00:23,439
we need one that we can ship now so this

13
00:00:21,920 --> 00:00:24,800
is not like a prototype thing anymore

14
00:00:23,439 --> 00:00:26,719
this is actually we want one that's

15
00:00:24,800 --> 00:00:29,839
going to be reliable

16
00:00:26,719 --> 00:00:31,439
um and so what we need to do here is

17
00:00:29,839 --> 00:00:33,520
start to go down that route

18
00:00:31,439 --> 00:00:35,119
and what i sort of said was look i

19
00:00:33,520 --> 00:00:37,200
probably want to do something

20
00:00:35,119 --> 00:00:38,558
that's actually not that dissimilar to

21
00:00:37,200 --> 00:00:41,920
the one i made for

22
00:00:38,558 --> 00:00:43,679
the witness because actually i do

23
00:00:41,920 --> 00:00:45,520
want something that's going to have the

24
00:00:43,679 --> 00:00:47,280
same kind of robustness to it i don't

25
00:00:45,520 --> 00:00:50,160
really like shipping code

26
00:00:47,280 --> 00:00:51,359
that's super janky so i would like to

27
00:00:50,159 --> 00:00:52,558
have something that i have some

28
00:00:51,359 --> 00:00:54,960
confidence

29
00:00:52,558 --> 00:00:56,079
that it's actually been architected well

30
00:00:54,960 --> 00:00:59,520
from the standpoint

31
00:00:56,079 --> 00:01:02,640
of knowing that things can't get stuck

32
00:00:59,520 --> 00:01:04,960
or things like that so on the screen

33
00:01:02,640 --> 00:01:08,478
right now we have uh the blue

34
00:01:04,959 --> 00:01:09,759
lines are the collision boxes and

35
00:01:08,478 --> 00:01:11,679
currently this is running through a

36
00:01:09,760 --> 00:01:13,359
super crappy collision detector that i

37
00:01:11,680 --> 00:01:14,720
think we wrote in like somewhere in the

38
00:01:13,359 --> 00:01:18,319
first hundred days

39
00:01:14,719 --> 00:01:21,280
that really doesn't do anything smart

40
00:01:18,319 --> 00:01:22,719
uh and so now what we're gonna wanna do

41
00:01:21,280 --> 00:01:24,719
is start replacing that

42
00:01:22,719 --> 00:01:25,759
and so like i said what i'd like to do

43
00:01:24,719 --> 00:01:29,920
to that

44
00:01:25,759 --> 00:01:33,438
if possible is i'd like to

45
00:01:29,920 --> 00:01:36,240
have the um we can go in here it's

46
00:01:33,438 --> 00:01:36,239
called move entity

47
00:01:36,640 --> 00:01:40,000
so in here what i'd like to do is i'd

48
00:01:39,040 --> 00:01:43,118
like to have a collision

49
00:01:40,000 --> 00:01:44,959
routine that in general works

50
00:01:43,118 --> 00:01:46,478
in the positive sense rather than the

51
00:01:44,959 --> 00:01:49,919
negative sense so

52
00:01:46,478 --> 00:01:51,118
rather than something which looks to see

53
00:01:49,920 --> 00:01:53,840
where you can't go

54
00:01:51,118 --> 00:01:54,159
and stops you i'd rather have something

55
00:01:53,840 --> 00:01:56,320
that

56
00:01:54,159 --> 00:01:57,759
every frame looks for where you can go

57
00:01:56,319 --> 00:02:00,158
and puts you there

58
00:01:57,759 --> 00:02:01,759
and the reason that i want that framing

59
00:02:00,159 --> 00:02:03,920
uh is because

60
00:02:01,759 --> 00:02:05,920
numerical precision is a very difficult

61
00:02:03,920 --> 00:02:08,399
thing to work with

62
00:02:05,920 --> 00:02:09,520
floating point is not a precise way to

63
00:02:08,399 --> 00:02:11,439
do calculations

64
00:02:09,520 --> 00:02:12,959
it's floating point for a reason it only

65
00:02:11,439 --> 00:02:13,439
handles a certain amount of precision

66
00:02:12,959 --> 00:02:16,560
for you

67
00:02:13,439 --> 00:02:17,199
that's just how uh fast computations

68
00:02:16,560 --> 00:02:19,039
have to work

69
00:02:17,199 --> 00:02:21,119
they have to be limited in terms of

70
00:02:19,039 --> 00:02:24,560
their accuracy

71
00:02:21,120 --> 00:02:28,239
or their preciseness um

72
00:02:24,560 --> 00:02:31,120
and as a result of that we we don't

73
00:02:28,239 --> 00:02:32,800
want especially in a game scenario where

74
00:02:31,120 --> 00:02:33,920
hacking things is important because you

75
00:02:32,800 --> 00:02:36,959
want to constantly

76
00:02:33,919 --> 00:02:38,719
do random stuff based on arbitrary game

77
00:02:36,959 --> 00:02:41,039
design ideas you might have

78
00:02:38,719 --> 00:02:42,239
or your designer might have the last

79
00:02:41,039 --> 00:02:45,598
thing you want to do

80
00:02:42,239 --> 00:02:49,120
is make it so that you need to maintain

81
00:02:45,598 --> 00:02:50,878
extremely rigorous definitions of

82
00:02:49,120 --> 00:02:52,480
numerical precision throughout large

83
00:02:50,878 --> 00:02:54,000
swaths of the code base because that

84
00:02:52,479 --> 00:02:57,359
will just immediately drag

85
00:02:54,000 --> 00:02:59,598
everything down to a crawl um because

86
00:02:57,360 --> 00:03:00,959
you really want the ability to just move

87
00:02:59,598 --> 00:03:04,238
entities around and

88
00:03:00,959 --> 00:03:06,479
and slap you know different velocities

89
00:03:04,239 --> 00:03:08,158
onto them or doing all sorts of things

90
00:03:06,479 --> 00:03:10,000
that are just based on making the game

91
00:03:08,158 --> 00:03:11,359
feel good to play and game design ideas

92
00:03:10,000 --> 00:03:13,280
people are exploring

93
00:03:11,360 --> 00:03:14,879
so you really want that underlying

94
00:03:13,280 --> 00:03:18,080
system

95
00:03:14,878 --> 00:03:21,120
to not really care about how crappy

96
00:03:18,080 --> 00:03:24,120
the inputs were you want it to take very

97
00:03:21,120 --> 00:03:25,920
lousy inputs that might be

98
00:03:24,120 --> 00:03:28,560
interpenetrating they may have been

99
00:03:25,919 --> 00:03:30,318
teleported from one frame to the next

100
00:03:28,560 --> 00:03:32,000
they may have very high velocities very

101
00:03:30,318 --> 00:03:33,679
low velocities they might be really

102
00:03:32,000 --> 00:03:35,519
close to each other really far apart you

103
00:03:33,680 --> 00:03:39,120
wanted to just be able to take

104
00:03:35,519 --> 00:03:42,400
whatever random crap the game designer

105
00:03:39,120 --> 00:03:45,360
or designers

106
00:03:42,400 --> 00:03:47,200
randomly did and you want it to produce

107
00:03:45,360 --> 00:03:50,080
the best possible outcome

108
00:03:47,199 --> 00:03:51,359
so you want to try and make a routine

109
00:03:50,080 --> 00:03:54,000
that on every frame

110
00:03:51,360 --> 00:03:54,720
is trying to help you rather than trying

111
00:03:54,000 --> 00:03:58,158
to screw you

112
00:03:54,719 --> 00:03:58,719
up right uh if you've seen glenbary glen

113
00:03:58,158 --> 00:04:00,079
ross

114
00:03:58,719 --> 00:04:01,598
you know what i'm talking about if

115
00:04:00,080 --> 00:04:04,239
you're going to make something up make

116
00:04:01,598 --> 00:04:04,238
sure it helps

117
00:04:04,959 --> 00:04:09,199
so we're going to take this in two

118
00:04:08,479 --> 00:04:11,438
passes

119
00:04:09,199 --> 00:04:14,158
the first pass is going to be to try to

120
00:04:11,438 --> 00:04:17,358
change the move entity routine

121
00:04:14,158 --> 00:04:18,000
as it exists currently to one that is

122
00:04:17,358 --> 00:04:20,959
simply

123
00:04:18,000 --> 00:04:21,839
trying uh the opposite way around

124
00:04:20,959 --> 00:04:24,639
instead of

125
00:04:21,839 --> 00:04:25,279
taking a motion and seeing how far the

126
00:04:24,639 --> 00:04:27,280
motion

127
00:04:25,279 --> 00:04:28,879
we can go before we hit something which

128
00:04:27,279 --> 00:04:30,638
is it was kind of doing like that sort

129
00:04:28,879 --> 00:04:32,159
of a thing

130
00:04:30,639 --> 00:04:35,040
we're going to change it into a routine

131
00:04:32,160 --> 00:04:37,840
that just goes look i was here

132
00:04:35,040 --> 00:04:38,800
a straight linear extrapolation of the

133
00:04:37,839 --> 00:04:42,000
path that the

134
00:04:38,800 --> 00:04:44,478
game design asked for would put me here

135
00:04:42,000 --> 00:04:46,160
what's the closest place to that that i

136
00:04:44,478 --> 00:04:50,079
can put myself

137
00:04:46,160 --> 00:04:52,400
right and still be in a valid location

138
00:04:50,079 --> 00:04:54,079
so changing it from a let's try to go

139
00:04:52,399 --> 00:04:55,839
somewhere and see where we stop

140
00:04:54,079 --> 00:04:57,918
to a different thing which is let's look

141
00:04:55,839 --> 00:04:58,719
for valid positions to put myself and

142
00:04:57,918 --> 00:05:00,399
we'll just pick

143
00:04:58,720 --> 00:05:02,080
whatever one we can find that's closest

144
00:05:00,399 --> 00:05:04,399
to where we're going but we

145
00:05:02,079 --> 00:05:06,560
always will never be doing numerically

146
00:05:04,399 --> 00:05:07,839
inaccurate things like doing very small

147
00:05:06,560 --> 00:05:09,360
motions or anything like that we're just

148
00:05:07,839 --> 00:05:11,519
going to change it the way we look at it

149
00:05:09,360 --> 00:05:13,680
to looking through space for some place

150
00:05:11,519 --> 00:05:15,918
valid to put people

151
00:05:13,680 --> 00:05:17,759
we're gonna do that first and then the

152
00:05:15,918 --> 00:05:20,240
next thing we're gonna do

153
00:05:17,759 --> 00:05:22,639
is if we get that working nicely and

154
00:05:20,240 --> 00:05:24,319
we're happy enough with it

155
00:05:22,639 --> 00:05:26,800
uh next week or two weeks or however

156
00:05:24,319 --> 00:05:28,478
long that takes

157
00:05:26,800 --> 00:05:30,560
then what we want to do is look to see

158
00:05:28,478 --> 00:05:33,599
if we can upgrade this routine

159
00:05:30,560 --> 00:05:36,079
to being more about simultaneous motion

160
00:05:33,600 --> 00:05:37,600
so we take all the entities see where

161
00:05:36,079 --> 00:05:40,478
they all want to go

162
00:05:37,600 --> 00:05:42,160
and then only resolve problems that

163
00:05:40,478 --> 00:05:43,839
actually occur when entities collide

164
00:05:42,160 --> 00:05:46,960
with each other and the reason that we

165
00:05:43,839 --> 00:05:49,758
might want to do something like this

166
00:05:46,959 --> 00:05:50,879
is because if we keep a system in place

167
00:05:49,759 --> 00:05:52,960
like the one we have now

168
00:05:50,879 --> 00:05:54,079
where everybody moves incrementally so i

169
00:05:52,959 --> 00:05:57,359
move entity a then b

170
00:05:54,079 --> 00:06:00,318
then c then d then e right then

171
00:05:57,360 --> 00:06:01,520
two entities right next to each other

172
00:06:00,319 --> 00:06:04,160
who are both moving

173
00:06:01,519 --> 00:06:05,519
in the same direction will not both be

174
00:06:04,160 --> 00:06:08,800
able to move sometimes

175
00:06:05,519 --> 00:06:09,758
if the one that's further back tries to

176
00:06:08,800 --> 00:06:12,079
move first

177
00:06:09,759 --> 00:06:14,240
it will be disallowed because it can't

178
00:06:12,079 --> 00:06:15,918
move into where the other entity was

179
00:06:14,240 --> 00:06:17,439
and then it doesn't matter that that

180
00:06:15,918 --> 00:06:20,639
entity happens to then move

181
00:06:17,439 --> 00:06:22,478
out of the way on the next frame right

182
00:06:20,639 --> 00:06:24,160
now this is a fairly minor issue because

183
00:06:22,478 --> 00:06:24,399
then on every subsequent frame it will

184
00:06:24,160 --> 00:06:27,199
be

185
00:06:24,399 --> 00:06:28,560
basically correct so but you can produce

186
00:06:27,199 --> 00:06:29,199
some little micro stutters and stuff

187
00:06:28,560 --> 00:06:30,399
like that

188
00:06:29,199 --> 00:06:32,478
so we might want to try and get rid of

189
00:06:30,399 --> 00:06:33,519
that if we can not a huge deal because

190
00:06:32,478 --> 00:06:35,279
again that doesn't really affect

191
00:06:33,519 --> 00:06:36,159
robustness it's just kind of a nice to

192
00:06:35,279 --> 00:06:38,000
have

193
00:06:36,160 --> 00:06:39,199
so we'll look at that but we don't care

194
00:06:38,000 --> 00:06:40,879
about that until we get

195
00:06:39,199 --> 00:06:42,960
this part right because this is the part

196
00:06:40,879 --> 00:06:45,038
that really can ruin the game

197
00:06:42,959 --> 00:06:46,638
if you have a collision routine that can

198
00:06:45,038 --> 00:06:48,159
produce inter-penetrating objects or

199
00:06:46,639 --> 00:06:48,879
things that get stuck in walls or those

200
00:06:48,160 --> 00:06:50,080
sorts of things

201
00:06:48,879 --> 00:06:52,478
like the one that we have currently

202
00:06:50,079 --> 00:06:55,198
would totally let you do

203
00:06:52,478 --> 00:06:56,719
um that's just a horrible experience for

204
00:06:55,199 --> 00:06:57,520
players and we want to take that out of

205
00:06:56,720 --> 00:06:59,199
the equation

206
00:06:57,519 --> 00:07:01,519
there will be enough bugs in any

207
00:06:59,199 --> 00:07:03,439
sufficiently complicated game

208
00:07:01,519 --> 00:07:05,198
to worry about without having the

209
00:07:03,439 --> 00:07:05,598
collision detector producing crap like

210
00:07:05,199 --> 00:07:07,680
that

211
00:07:05,598 --> 00:07:09,279
so that's our goal is to get rid of that

212
00:07:07,680 --> 00:07:10,000
here and to try and move towards

213
00:07:09,279 --> 00:07:12,079
something

214
00:07:10,000 --> 00:07:13,680
that's trying to help us every frame

215
00:07:12,079 --> 00:07:14,399
it's trying to put things into legal

216
00:07:13,680 --> 00:07:16,240
positions

217
00:07:14,399 --> 00:07:18,000
instead of generating problems for us

218
00:07:16,240 --> 00:07:19,598
every frame which is potentially moving

219
00:07:18,000 --> 00:07:22,720
them into illegal positions

220
00:07:19,598 --> 00:07:27,598
right so that's what we're going to try

221
00:07:22,720 --> 00:07:29,520
so uh looking at what we've got

222
00:07:27,598 --> 00:07:30,800
here in the move entity routine you can

223
00:07:29,519 --> 00:07:32,799
see that right away

224
00:07:30,800 --> 00:07:34,079
we know we already are computing the

225
00:07:32,800 --> 00:07:35,919
thing that we actually care about which

226
00:07:34,079 --> 00:07:39,359
is the desired position

227
00:07:35,918 --> 00:07:41,038
if we just turned off uh the entire loop

228
00:07:39,360 --> 00:07:41,840
right if we just said look we're not

229
00:07:41,038 --> 00:07:44,719
going to do

230
00:07:41,839 --> 00:07:46,878
anything this loop is not going to occur

231
00:07:44,720 --> 00:07:48,960
right

232
00:07:46,879 --> 00:07:50,879
so this loop goes away and instead we

233
00:07:48,959 --> 00:07:52,799
just said okay the entity's position

234
00:07:50,879 --> 00:07:56,000
equals this desired position

235
00:07:52,800 --> 00:07:57,280
that would move everybody to where they

236
00:07:56,000 --> 00:08:00,879
want to go

237
00:07:57,279 --> 00:08:03,279
with no concern for collision right

238
00:08:00,879 --> 00:08:05,280
so if we did that then all entities and

239
00:08:03,279 --> 00:08:07,839
you can see it's like interpenetrating

240
00:08:05,279 --> 00:08:09,359
uh anytime it wants to right you can see

241
00:08:07,839 --> 00:08:10,878
that like if i wanted to go over here it

242
00:08:09,360 --> 00:08:12,800
can move straight through a wall for

243
00:08:10,879 --> 00:08:15,919
example like that right

244
00:08:12,800 --> 00:08:17,520
so we know starting out we have two

245
00:08:15,918 --> 00:08:20,240
things we have where we were

246
00:08:17,519 --> 00:08:21,680
and we have where we would be if if we

247
00:08:20,240 --> 00:08:23,360
did not collide

248
00:08:21,680 --> 00:08:25,120
right and we can verify that by doing

249
00:08:23,360 --> 00:08:26,400
what i just did so we know this desired

250
00:08:25,120 --> 00:08:28,240
position

251
00:08:26,399 --> 00:08:30,239
is the correct thing based on whatever

252
00:08:28,240 --> 00:08:32,240
the random physical requests are that

253
00:08:30,240 --> 00:08:34,000
for acceleration and velocity and crap

254
00:08:32,240 --> 00:08:35,200
that the gameplay code wanted to do so

255
00:08:34,000 --> 00:08:36,479
that's a separate piece code we'd have

256
00:08:35,200 --> 00:08:37,759
to care about we just know that it's

257
00:08:36,479 --> 00:08:39,680
going to set those things

258
00:08:37,759 --> 00:08:41,599
we can produce those things here so we

259
00:08:39,679 --> 00:08:43,838
do right

260
00:08:41,599 --> 00:08:43,839
now

261
00:08:48,639 --> 00:08:53,360
i suspect uh first of all

262
00:08:52,320 --> 00:08:55,360
i'm going to get rid of that because i

263
00:08:53,360 --> 00:08:57,759
don't care about that at all

264
00:08:55,360 --> 00:09:00,320
but i would suspect that this should

265
00:08:57,759 --> 00:09:03,439
probably move

266
00:09:00,320 --> 00:09:08,399
of this routine and be in

267
00:09:03,440 --> 00:09:11,440
some requested physics stuff

268
00:09:08,399 --> 00:09:14,879
and we just take the desired

269
00:09:11,440 --> 00:09:16,000
point here so really what i want the

270
00:09:14,879 --> 00:09:17,600
screen to be and you can see

271
00:09:16,000 --> 00:09:19,440
so this is fine we can leave it here for

272
00:09:17,600 --> 00:09:20,240
now we don't care but eventually what

273
00:09:19,440 --> 00:09:22,080
i'd like to do

274
00:09:20,240 --> 00:09:24,879
is i'd like to make it so you just pass

275
00:09:22,080 --> 00:09:26,399
in desired position so you just say look

276
00:09:24,879 --> 00:09:28,240
i'm going to do whatever i'm going to do

277
00:09:26,399 --> 00:09:29,600
gameplay wise maybe that has some

278
00:09:28,240 --> 00:09:30,240
physics in it like acceleration or

279
00:09:29,600 --> 00:09:32,720
velocity

280
00:09:30,240 --> 00:09:35,200
maybe it doesn't maybe i just have other

281
00:09:32,720 --> 00:09:37,600
ways that i'm going to move things

282
00:09:35,200 --> 00:09:38,640
and when i call move entity all i really

283
00:09:37,600 --> 00:09:40,800
want to know

284
00:09:38,639 --> 00:09:41,919
is where should this thing end up on

285
00:09:40,799 --> 00:09:44,399
this frame

286
00:09:41,919 --> 00:09:46,000
where do you actually want it to go and

287
00:09:44,399 --> 00:09:46,480
then we're just going to go from there

288
00:09:46,000 --> 00:09:48,958
and say

289
00:09:46,480 --> 00:09:51,360
now let's see if we can make a routine

290
00:09:48,958 --> 00:09:54,239
that puts that somewhere

291
00:09:51,360 --> 00:09:55,519
you know that puts it into a legal

292
00:09:54,240 --> 00:09:57,839
position

293
00:09:55,519 --> 00:10:00,399
that is close or as close as possible to

294
00:09:57,839 --> 00:10:04,079
that desired position

295
00:10:00,399 --> 00:10:06,639
right um now if we look in here we can

296
00:10:04,078 --> 00:10:07,759
actually uh keep some aspects of this

297
00:10:06,639 --> 00:10:10,240
routine because

298
00:10:07,759 --> 00:10:11,039
in a sense we do uh want to have

299
00:10:10,240 --> 00:10:14,159
something like

300
00:10:11,039 --> 00:10:15,120
iteration because we probably will need

301
00:10:14,159 --> 00:10:18,159
to do a few

302
00:10:15,120 --> 00:10:19,519
tries for this um we don't really know

303
00:10:18,159 --> 00:10:21,199
exactly what that would look like yet

304
00:10:19,519 --> 00:10:21,839
but we probably will have a for loop

305
00:10:21,200 --> 00:10:23,759
here

306
00:10:21,839 --> 00:10:25,360
and we're probably going to try a few

307
00:10:23,759 --> 00:10:26,958
subdivisions of things or something like

308
00:10:25,360 --> 00:10:30,959
this

309
00:10:26,958 --> 00:10:33,919
so uh we might leave that this stuff

310
00:10:30,958 --> 00:10:34,479
is not this is not gonna happen anymore

311
00:10:33,919 --> 00:10:37,039
now

312
00:10:34,480 --> 00:10:39,519
this uh right here obviously will

313
00:10:37,039 --> 00:10:39,519
replace

314
00:10:41,679 --> 00:10:45,519
because this is now n squared for every

315
00:10:43,919 --> 00:10:46,000
entity we move we have to test against

316
00:10:45,519 --> 00:10:48,639
all and

317
00:10:46,000 --> 00:10:49,360
other entities uh and this is not quite

318
00:10:48,639 --> 00:10:53,039
n squared

319
00:10:49,360 --> 00:10:55,360
uh in our particular case

320
00:10:53,039 --> 00:10:56,159
it's actually way way way faster than n

321
00:10:55,360 --> 00:10:58,560
squared

322
00:10:56,159 --> 00:10:59,600
because there are very few entities who

323
00:10:58,559 --> 00:11:02,719
actually move

324
00:10:59,600 --> 00:11:05,440
so the reason that this isn't

325
00:11:02,720 --> 00:11:06,879
already tanking the frame rate is

326
00:11:05,440 --> 00:11:07,440
because although we have to iterate all

327
00:11:06,879 --> 00:11:09,200
over

328
00:11:07,440 --> 00:11:10,640
you know thousand two thousand entities

329
00:11:09,200 --> 00:11:12,480
however many are in the active set at

330
00:11:10,639 --> 00:11:13,919
any given time

331
00:11:12,480 --> 00:11:16,159
although we're iterating all of those

332
00:11:13,919 --> 00:11:18,958
entities we don't actually have to test

333
00:11:16,159 --> 00:11:20,159
uh uh we don't have to call move entity

334
00:11:18,958 --> 00:11:21,838
on most of them

335
00:11:20,159 --> 00:11:23,439
so every call to move entity would

336
00:11:21,839 --> 00:11:24,720
iterate over all the entities in the

337
00:11:23,440 --> 00:11:25,920
active system to see if they have

338
00:11:24,720 --> 00:11:28,320
collision volumes

339
00:11:25,919 --> 00:11:29,759
terrible waste of time very inefficient

340
00:11:28,320 --> 00:11:31,278
but the reason it doesn't because

341
00:11:29,759 --> 00:11:32,799
become n squared and blow up the

342
00:11:31,278 --> 00:11:35,039
performance of the system right now

343
00:11:32,799 --> 00:11:36,000
already is because move entities only

344
00:11:35,039 --> 00:11:39,039
called on like

345
00:11:36,000 --> 00:11:42,639
six people it's like the floating heads

346
00:11:39,039 --> 00:11:44,319
and the glove and that's it so we do

347
00:11:42,639 --> 00:11:45,919
also kind of get a benefit here that

348
00:11:44,320 --> 00:11:47,680
actually this routine probably won't

349
00:11:45,919 --> 00:11:49,439
have to be that fast in practice because

350
00:11:47,679 --> 00:11:50,719
the number of things that actually run

351
00:11:49,440 --> 00:11:52,399
through the collision system are going

352
00:11:50,720 --> 00:11:54,639
to be actually fairly small

353
00:11:52,399 --> 00:11:56,240
but we probably do want to fix this

354
00:11:54,639 --> 00:11:58,320
either way because a simple spatial

355
00:11:56,240 --> 00:11:59,759
partition even a crappy one would speed

356
00:11:58,320 --> 00:12:01,040
it up tremendously because rather than

357
00:11:59,759 --> 00:12:02,639
stepping through all the things

358
00:12:01,039 --> 00:12:04,000
you'd only step through a little region

359
00:12:02,639 --> 00:12:04,720
of things and that seems like it'll be

360
00:12:04,000 --> 00:12:07,759
much better so

361
00:12:04,720 --> 00:12:09,839
a two-phase pass through would probably

362
00:12:07,759 --> 00:12:10,958
be a better idea so we probably want to

363
00:12:09,839 --> 00:12:11,680
replace this with a space partition

364
00:12:10,958 --> 00:12:13,599
either way

365
00:12:11,679 --> 00:12:15,359
but the reason we're not seeing that

366
00:12:13,600 --> 00:12:18,639
need yet the reason we're not

367
00:12:15,360 --> 00:12:20,000
actually caring about that is because

368
00:12:18,639 --> 00:12:21,039
move entity is probably only called like

369
00:12:20,000 --> 00:12:24,320
10 times a frame

370
00:12:21,039 --> 00:12:26,078
right so it just it it doesn't go n

371
00:12:24,320 --> 00:12:27,600
squared because rather than calling it 2

372
00:12:26,078 --> 00:12:30,399
000 times a frame we're calling it

373
00:12:27,600 --> 00:12:30,399
you know 10.

374
00:12:36,839 --> 00:12:42,800
so inside here

375
00:12:39,839 --> 00:12:44,240
uh we've got volume uh stuff for

376
00:12:42,799 --> 00:12:45,759
everybody

377
00:12:44,240 --> 00:12:47,360
now we know that the entities collision

378
00:12:45,759 --> 00:12:48,720
volumes doesn't change

379
00:12:47,360 --> 00:12:50,639
so i'm just going to move that up to the

380
00:12:48,720 --> 00:12:54,079
top not because the compiler won't do

381
00:12:50,639 --> 00:12:56,639
that for us it will hoist usually

382
00:12:54,078 --> 00:12:58,239
things out of loops more just so i can

383
00:12:56,639 --> 00:13:01,200
see it more clearly

384
00:12:58,240 --> 00:13:02,159
i prefer to see the stuff up at the top

385
00:13:01,200 --> 00:13:03,920
that's

386
00:13:02,159 --> 00:13:05,759
you know my constants for this entity

387
00:13:03,919 --> 00:13:07,039
these are things that

388
00:13:05,759 --> 00:13:09,120
you know aren't going to be changing

389
00:13:07,039 --> 00:13:10,399
here uh and then

390
00:13:09,120 --> 00:13:12,399
i should probably get rid of this

391
00:13:10,399 --> 00:13:14,320
because we're not doing that yet um

392
00:13:12,399 --> 00:13:15,919
so i want to hoist those out and that

393
00:13:14,320 --> 00:13:17,360
way i can see okay these are the ones

394
00:13:15,919 --> 00:13:20,799
that i'm actually using for testing so

395
00:13:17,360 --> 00:13:22,320
these are certificate to the entity

396
00:13:20,799 --> 00:13:24,240
now if we look here you can see we're

397
00:13:22,320 --> 00:13:25,920
computing them in casket diameter

398
00:13:24,240 --> 00:13:28,799
this is for dilation this is so that we

399
00:13:25,919 --> 00:13:32,078
can test the entity as if it's a point

400
00:13:28,799 --> 00:13:32,879
right um and against the things that

401
00:13:32,078 --> 00:13:35,519
we're moving

402
00:13:32,879 --> 00:13:36,240
i don't know that we'll actually need to

403
00:13:35,519 --> 00:13:37,839
do that

404
00:13:36,240 --> 00:13:40,159
in practice because we're going to be

405
00:13:37,839 --> 00:13:43,360
sort of changing the way

406
00:13:40,159 --> 00:13:47,039
uh that we are looking at this to be

407
00:13:43,360 --> 00:13:48,560
different um so i don't actually know if

408
00:13:47,039 --> 00:13:52,240
we really want

409
00:13:48,559 --> 00:13:56,000
this per se uh this may not really be

410
00:13:52,240 --> 00:13:59,600
um this may not really be what we want

411
00:13:56,000 --> 00:13:59,600
but that's okay um

412
00:14:00,240 --> 00:14:04,079
yeah uh but we'll see we'll leave it in

413
00:14:02,480 --> 00:14:06,480
for now

414
00:14:04,078 --> 00:14:07,679
uh so anyway you can see us here uh

415
00:14:06,480 --> 00:14:11,039
doing some nonsense

416
00:14:07,679 --> 00:14:13,359
where we then do some testing that is

417
00:14:11,039 --> 00:14:14,480
totally ad hoc it looks like testing we

418
00:14:13,360 --> 00:14:17,360
did

419
00:14:14,480 --> 00:14:18,079
for like corners of walls it looks like

420
00:14:17,360 --> 00:14:19,759
and uh

421
00:14:18,078 --> 00:14:22,078
furthermore this looks like this was

422
00:14:19,759 --> 00:14:25,759
only in uh 2d

423
00:14:22,078 --> 00:14:25,759
this is when we wrote this so

424
00:14:26,639 --> 00:14:31,039
i mean that's probably fine for this

425
00:14:29,039 --> 00:14:35,120
game if we really

426
00:14:31,039 --> 00:14:35,120
asked ourselves that question um

427
00:14:37,278 --> 00:14:43,838
but if you look it's just like i mean

428
00:14:40,480 --> 00:14:46,480
why bother like so this

429
00:14:43,839 --> 00:14:48,000
this was old 2d collision code i don't

430
00:14:46,480 --> 00:14:49,519
think we care about this at all

431
00:14:48,000 --> 00:14:51,278
uh so i'm just going to go ahead and say

432
00:14:49,519 --> 00:14:53,360
that this is going away this this is

433
00:14:51,278 --> 00:14:56,639
just this is just lousy and we don't

434
00:14:53,360 --> 00:14:59,519
need it it's not going to do anything um

435
00:14:56,639 --> 00:15:00,480
that we care about uh and for that

436
00:14:59,519 --> 00:15:02,799
matter

437
00:15:00,480 --> 00:15:04,240
neither is any of this stuff uh it looks

438
00:15:02,799 --> 00:15:05,919
like we've got handle collision and

439
00:15:04,240 --> 00:15:09,759
speculative collide

440
00:15:05,919 --> 00:15:13,838
uh and again um

441
00:15:09,759 --> 00:15:17,198
i don't really know that we care about

442
00:15:13,839 --> 00:15:18,160
this yet so when we go to speculative

443
00:15:17,198 --> 00:15:20,799
collide

444
00:15:18,159 --> 00:15:23,120
you can see here that it's just sort of

445
00:15:20,799 --> 00:15:23,120
um

446
00:15:25,039 --> 00:15:28,799
it's just really more of a canvas

447
00:15:27,759 --> 00:15:31,919
collide

448
00:15:28,799 --> 00:15:33,599
so speculative collide is probably not

449
00:15:31,919 --> 00:15:38,078
the right term

450
00:15:33,600 --> 00:15:41,278
um we probably just want like

451
00:15:38,078 --> 00:15:43,120
a does this collide and this is

452
00:15:41,278 --> 00:15:45,120
uh this has nothing to do with collision

453
00:15:43,120 --> 00:15:48,320
detection this is just now us thinking

454
00:15:45,120 --> 00:15:51,360
how do we want this like integrated into

455
00:15:48,320 --> 00:15:53,600
the game design part of things so

456
00:15:51,360 --> 00:15:54,639
there's a couple things here first of

457
00:15:53,600 --> 00:15:56,959
all we

458
00:15:54,639 --> 00:15:58,399
want to know whether or not this thing

459
00:15:56,958 --> 00:16:02,319
collides

460
00:15:58,399 --> 00:16:02,320
uh from the standpoint of

461
00:16:02,639 --> 00:16:06,720
do we test against it and then there's

462
00:16:05,839 --> 00:16:10,560
probably

463
00:16:06,720 --> 00:16:13,278
also one which is do we stop

464
00:16:10,559 --> 00:16:13,679
when we hit it because you can imagine

465
00:16:13,278 --> 00:16:16,320
us

466
00:16:13,679 --> 00:16:18,319
wanting something that that does a

467
00:16:16,320 --> 00:16:20,320
trigger when two things

468
00:16:18,320 --> 00:16:21,360
collide but that we don't actually stop

469
00:16:20,320 --> 00:16:24,959
them

470
00:16:21,360 --> 00:16:29,360
and at the moment we don't really need

471
00:16:24,958 --> 00:16:29,359
that very often

472
00:16:32,240 --> 00:16:37,839
but but like um

473
00:16:37,919 --> 00:16:41,519
the way to think about it is this we

474
00:16:39,519 --> 00:16:43,198
have an opportunity here to unify more

475
00:16:41,519 --> 00:16:43,919
of our systems as well i guess what i'm

476
00:16:43,198 --> 00:16:45,758
trying to say

477
00:16:43,919 --> 00:16:47,120
so right now we have some things like

478
00:16:45,759 --> 00:16:49,440
which room are you in

479
00:16:47,120 --> 00:16:51,039
we do that check it's a separate check

480
00:16:49,440 --> 00:16:53,600
we have things where we test

481
00:16:51,039 --> 00:16:54,399
like uh are you in a place where the

482
00:16:53,600 --> 00:16:56,879
camera

483
00:16:54,399 --> 00:16:58,480
should zoom in here right i don't know

484
00:16:56,879 --> 00:16:59,039
if you remember but there's stuff in the

485
00:16:58,480 --> 00:17:02,399
game

486
00:16:59,039 --> 00:17:04,558
um from a long time ago that did this

487
00:17:02,399 --> 00:17:08,240
sort of stuff right so we come up here

488
00:17:04,558 --> 00:17:12,000
and we're gonna hop um over to like

489
00:17:08,240 --> 00:17:14,798
uh you know um

490
00:17:12,000 --> 00:17:15,279
yeah like the cat right so we hop in

491
00:17:14,798 --> 00:17:17,918
here

492
00:17:15,279 --> 00:17:18,639
and and it zooms in right to look at the

493
00:17:17,919 --> 00:17:20,160
npc

494
00:17:18,640 --> 00:17:21,759
that we're that we're talking to or

495
00:17:20,160 --> 00:17:24,880
whatever so we've got some

496
00:17:21,759 --> 00:17:25,359
markup in there that's like where um you

497
00:17:24,880 --> 00:17:27,520
know where

498
00:17:25,359 --> 00:17:28,879
where the where the pus is you know you

499
00:17:27,519 --> 00:17:31,279
you zoom in

500
00:17:28,880 --> 00:17:32,559
on uh on npcs if there's these are

501
00:17:31,279 --> 00:17:35,440
actual people

502
00:17:32,558 --> 00:17:36,798
um not puss but you know they same thing

503
00:17:35,440 --> 00:17:39,279
zoom in right

504
00:17:36,798 --> 00:17:41,679
uh and so what we want to be able to do

505
00:17:39,279 --> 00:17:44,079
uh in those cases is we want to be able

506
00:17:41,679 --> 00:17:44,080
to

507
00:17:44,839 --> 00:17:47,839
um

508
00:17:46,000 --> 00:17:49,440
want to be able to know are you standing

509
00:17:47,839 --> 00:17:50,720
in this particular location are you in

510
00:17:49,440 --> 00:17:53,919
this particular region

511
00:17:50,720 --> 00:17:55,440
blah blah blah we could then

512
00:17:53,919 --> 00:17:56,799
make the collision system just output

513
00:17:55,440 --> 00:17:58,240
that information because since we're

514
00:17:56,798 --> 00:17:59,440
already doing all these checks and we're

515
00:17:58,240 --> 00:18:01,200
already going to have that system in

516
00:17:59,440 --> 00:18:02,480
place it we might as well piggyback on

517
00:18:01,200 --> 00:18:04,720
top of it

518
00:18:02,480 --> 00:18:06,960
so like i said we probably want a thing

519
00:18:04,720 --> 00:18:09,200
here that tells us these collision flags

520
00:18:06,960 --> 00:18:11,360
and probably what we want to do is just

521
00:18:09,200 --> 00:18:13,440
make them direct flags we can test

522
00:18:11,359 --> 00:18:15,279
so i don't think we really want things

523
00:18:13,440 --> 00:18:17,519
like speculative collide to be happening

524
00:18:15,279 --> 00:18:19,359
that doesn't sound like a very good idea

525
00:18:17,519 --> 00:18:21,759
so probably what we want to do and we

526
00:18:19,359 --> 00:18:22,798
removed the other flag which is the can

527
00:18:21,759 --> 00:18:24,000
collide flag

528
00:18:22,798 --> 00:18:25,200
which i do think is a good idea to

529
00:18:24,000 --> 00:18:26,000
remove because i don't think it's what

530
00:18:25,200 --> 00:18:28,319
we actually want

531
00:18:26,000 --> 00:18:29,359
but i do think we want some actual flags

532
00:18:28,319 --> 00:18:31,759
here um

533
00:18:29,359 --> 00:18:32,719
and so what we probably want to do is is

534
00:18:31,759 --> 00:18:37,038
make these

535
00:18:32,720 --> 00:18:41,200
be something like this

536
00:18:37,038 --> 00:18:44,640
where we have uh an entity flag

537
00:18:41,200 --> 00:18:47,440
for whether or not collisions

538
00:18:44,640 --> 00:18:47,919
are triggered so like whether or not we

539
00:18:47,440 --> 00:18:51,759
will

540
00:18:47,919 --> 00:18:55,280
report uh so like reports collisions

541
00:18:51,759 --> 00:18:58,558
uh and then another one which is like

542
00:18:55,279 --> 00:18:59,038
uh prevents motion through or prevents

543
00:18:58,558 --> 00:19:00,558
motion

544
00:18:59,038 --> 00:19:02,798
on collision or something like that

545
00:19:00,558 --> 00:19:02,798
right

546
00:19:03,759 --> 00:19:08,839
uh event on

547
00:19:07,349 --> 00:19:11,279
[Music]

548
00:19:08,839 --> 00:19:14,480
collision

549
00:19:11,279 --> 00:19:17,359
and prevent motion on collision

550
00:19:14,480 --> 00:19:18,400
now we don't actually have to do both of

551
00:19:17,359 --> 00:19:20,879
these

552
00:19:18,400 --> 00:19:21,519
because we could choose to have the

553
00:19:20,880 --> 00:19:23,919
event

554
00:19:21,519 --> 00:19:25,359
thing be actually what determines that

555
00:19:23,919 --> 00:19:26,880
so we could say like oh

556
00:19:25,359 --> 00:19:28,399
events get generated on collisions and

557
00:19:26,880 --> 00:19:29,520
then there's motion that's prevented on

558
00:19:28,400 --> 00:19:32,400
collisions

559
00:19:29,519 --> 00:19:34,160
or something like this and the reason

560
00:19:32,400 --> 00:19:38,798
that i'm not necessarily psyched about

561
00:19:34,160 --> 00:19:41,919
doing that

562
00:19:38,798 --> 00:19:44,639
uh sorry should say that the other way

563
00:19:41,919 --> 00:19:46,640
i'm not psyched about the idea of when

564
00:19:44,640 --> 00:19:48,960
two things collide

565
00:19:46,640 --> 00:19:50,320
i fire some event handler and the event

566
00:19:48,960 --> 00:19:51,519
handler tells me whether or not motion

567
00:19:50,319 --> 00:19:53,599
can proceed

568
00:19:51,519 --> 00:19:54,720
obviously that's the most flexible thing

569
00:19:53,599 --> 00:19:55,759
uh and the reason that's the most

570
00:19:54,720 --> 00:19:57,519
flexible thing is because it means

571
00:19:55,759 --> 00:19:59,200
there's procedural stuff in play that

572
00:19:57,519 --> 00:19:59,839
can say like oh yeah allow this question

573
00:19:59,200 --> 00:20:01,679
or don't

574
00:19:59,839 --> 00:20:02,879
based on who knows what like we check

575
00:20:01,679 --> 00:20:04,080
some things about the entity and how

576
00:20:02,880 --> 00:20:05,120
many hit points the player has and

577
00:20:04,079 --> 00:20:06,079
whether or not they're doing a

578
00:20:05,119 --> 00:20:09,199
particular action at that

579
00:20:06,079 --> 00:20:09,759
time and what i think i would like to do

580
00:20:09,200 --> 00:20:12,798
is say

581
00:20:09,759 --> 00:20:13,519
no i don't want to do that let's just

582
00:20:12,798 --> 00:20:14,720
assume

583
00:20:13,519 --> 00:20:16,879
that we're never going to have anything

584
00:20:14,720 --> 00:20:18,480
that needs that level of

585
00:20:16,880 --> 00:20:20,320
tweakiness to whether things can

586
00:20:18,480 --> 00:20:21,759
interpenetrate or not

587
00:20:20,319 --> 00:20:23,359
and the reason for that is i think it

588
00:20:21,759 --> 00:20:24,960
will just simplify writing the routine

589
00:20:23,359 --> 00:20:26,879
we'll be able to make a more performant

590
00:20:24,960 --> 00:20:27,679
more streamlined routine if it doesn't

591
00:20:26,880 --> 00:20:29,760
have to go

592
00:20:27,679 --> 00:20:31,120
out to some other piece of code right in

593
00:20:29,759 --> 00:20:32,558
the middle of trying to solve for these

594
00:20:31,119 --> 00:20:35,359
collisions

595
00:20:32,558 --> 00:20:36,399
to ask whether or not it should allow

596
00:20:35,359 --> 00:20:38,959
something to go through

597
00:20:36,400 --> 00:20:41,200
something else or not right so what i'd

598
00:20:38,960 --> 00:20:43,120
rather do is say look entity system

599
00:20:41,200 --> 00:20:44,558
unless we actually can point to

600
00:20:43,119 --> 00:20:46,639
something eventually in this game design

601
00:20:44,558 --> 00:20:48,000
where we're like we need to have this be

602
00:20:46,640 --> 00:20:49,679
completely dynamic

603
00:20:48,000 --> 00:20:51,839
and there's no way we can set flags

604
00:20:49,679 --> 00:20:53,280
ahead of time that would say it

605
00:20:51,839 --> 00:20:54,798
um because remember you can always clear

606
00:20:53,279 --> 00:20:55,678
and set this flag so you can always have

607
00:20:54,798 --> 00:20:57,200
things that like turn

608
00:20:55,679 --> 00:20:59,519
on prevent motion and turn off prevent

609
00:20:57,200 --> 00:21:01,759
motion that's fine it's only just like

610
00:20:59,519 --> 00:21:03,599
do you need to actually take two things

611
00:21:01,759 --> 00:21:05,038
and compare them in some complicated way

612
00:21:03,599 --> 00:21:07,839
to determine whether motion can

613
00:21:05,038 --> 00:21:08,640
can pass i mean we can even have things

614
00:21:07,839 --> 00:21:10,480
like

615
00:21:08,640 --> 00:21:12,240
different prevent motion flags that you

616
00:21:10,480 --> 00:21:13,679
know if you could just set entities up

617
00:21:12,240 --> 00:21:16,798
so that they have a flags

618
00:21:13,679 --> 00:21:18,400
a mask that would work too so

619
00:21:16,798 --> 00:21:19,679
i'm just going to assume that no matter

620
00:21:18,400 --> 00:21:20,880
what we want in the game design we can

621
00:21:19,679 --> 00:21:23,200
make something like that

622
00:21:20,880 --> 00:21:24,080
but in general there's always a way to

623
00:21:23,200 --> 00:21:26,480
know without

624
00:21:24,079 --> 00:21:28,000
calling out to a gameplay routine

625
00:21:26,480 --> 00:21:31,360
whether or not two things

626
00:21:28,000 --> 00:21:33,200
can coincide or not in space so

627
00:21:31,359 --> 00:21:35,519
that i just want to make that statement

628
00:21:33,200 --> 00:21:37,120
up front and so what we have here is

629
00:21:35,519 --> 00:21:38,720
two flags that control what the

630
00:21:37,119 --> 00:21:40,319
collision sector's behavior can be one

631
00:21:38,720 --> 00:21:41,440
of them says whether or not you want to

632
00:21:40,319 --> 00:21:44,639
be notified

633
00:21:41,440 --> 00:21:46,480
when two things are overlapping uh

634
00:21:44,640 --> 00:21:48,559
and the event on collision thing will

635
00:21:46,480 --> 00:21:49,440
just be if either of the two things has

636
00:21:48,558 --> 00:21:51,279
that flag

637
00:21:49,440 --> 00:21:52,880
right so if either of the two things has

638
00:21:51,279 --> 00:21:54,798
that flag an event will go

639
00:21:52,880 --> 00:21:56,320
into some log somewhere for processing

640
00:21:54,798 --> 00:21:58,319
gameplay purposes or however we want to

641
00:21:56,319 --> 00:22:00,720
do it doesn't matter

642
00:21:58,319 --> 00:22:02,240
uh that system will just end up getting

643
00:22:00,720 --> 00:22:03,600
notified out of the pleasure system at

644
00:22:02,240 --> 00:22:05,759
that point

645
00:22:03,599 --> 00:22:06,719
if we have prevent motion on collision

646
00:22:05,759 --> 00:22:08,558
set then

647
00:22:06,720 --> 00:22:10,798
the anytime there's a question of that

648
00:22:08,558 --> 00:22:12,000
form whether there is an event generated

649
00:22:10,798 --> 00:22:13,918
or not

650
00:22:12,000 --> 00:22:15,519
it will prevent motion through there so

651
00:22:13,919 --> 00:22:16,320
those are the two things that i wanted

652
00:22:15,519 --> 00:22:17,839
to have there

653
00:22:16,319 --> 00:22:19,519
and we're not going to call things like

654
00:22:17,839 --> 00:22:20,158
speculative collide that's not going to

655
00:22:19,519 --> 00:22:23,599
happen

656
00:22:20,159 --> 00:22:25,360
right okay

657
00:22:23,599 --> 00:22:27,119
so we don't care about any of this i

658
00:22:25,359 --> 00:22:29,038
don't care about any of this stuff

659
00:22:27,119 --> 00:22:31,199
or this stuff like literally none of

660
00:22:29,038 --> 00:22:33,279
this stuff right

661
00:22:31,200 --> 00:22:35,919
so more or less all we're going to do

662
00:22:33,279 --> 00:22:39,200
here is we're going to want to have

663
00:22:35,919 --> 00:22:39,520
this handle collision call at some point

664
00:22:39,200 --> 00:22:41,919
but

665
00:22:39,519 --> 00:22:43,038
what i'm going to try and say uh like i

666
00:22:41,919 --> 00:22:44,880
said before

667
00:22:43,038 --> 00:22:46,798
is i want to try and have that on the

668
00:22:44,880 --> 00:22:50,159
outside so we're in here

669
00:22:46,798 --> 00:22:50,798
uh in the the the for loop situation

670
00:22:50,159 --> 00:22:52,880
whatever

671
00:22:50,798 --> 00:22:54,400
i want to make handle collision in so

672
00:22:52,880 --> 00:22:57,600
much as i can

673
00:22:54,400 --> 00:23:00,000
uh be something

674
00:22:57,599 --> 00:23:01,599
that is called after the fact so

675
00:23:00,000 --> 00:23:04,640
basically like

676
00:23:01,599 --> 00:23:07,279
we do all the work we

677
00:23:04,640 --> 00:23:08,240
will stack up like who is gonna get

678
00:23:07,279 --> 00:23:09,759
notified

679
00:23:08,240 --> 00:23:11,679
and those are just gonna go into some

680
00:23:09,759 --> 00:23:15,038
like ring of things to get processed

681
00:23:11,679 --> 00:23:15,038
later or something like that right

682
00:23:19,200 --> 00:23:21,519
now fortunately for us we don't even

683
00:23:20,558 --> 00:23:23,678
have to do that right now what you can

684
00:23:21,519 --> 00:23:26,319
see here is we didn't

685
00:23:23,679 --> 00:23:28,000
have anything in that routine and

686
00:23:26,319 --> 00:23:29,918
similarly like can overlap

687
00:23:28,000 --> 00:23:31,359
doesn't look like it was used either so

688
00:23:29,919 --> 00:23:33,440
hopefully we can just get rid of most of

689
00:23:31,359 --> 00:23:36,719
this stuff

690
00:23:33,440 --> 00:23:39,919
so um in can overlap

691
00:23:36,720 --> 00:23:40,880
which we now have a uh boolean for i i

692
00:23:39,919 --> 00:23:42,559
could

693
00:23:40,880 --> 00:23:44,080
keep that routine around i'm not sure if

694
00:23:42,558 --> 00:23:45,599
i actually want to or not we'll see in a

695
00:23:44,079 --> 00:23:49,278
second

696
00:23:45,599 --> 00:23:51,119
uh whether i do um but if i just do this

697
00:23:49,278 --> 00:23:52,558
and get rid of can overlap it should

698
00:23:51,119 --> 00:23:54,479
just be removed yeah

699
00:23:52,558 --> 00:23:56,480
so maybe i want to keep that routine

700
00:23:54,480 --> 00:23:57,440
around round and it just does that flag

701
00:23:56,480 --> 00:23:59,278
test i just said

702
00:23:57,440 --> 00:24:00,960
but maybe i want the flag test welded

703
00:23:59,278 --> 00:24:02,480
directly into here so we'll see

704
00:24:00,960 --> 00:24:05,038
whether i want to pull it out later i'll

705
00:24:02,480 --> 00:24:07,759
just assume for now that i don't

706
00:24:05,038 --> 00:24:08,879
okay so taking a look at what's going to

707
00:24:07,759 --> 00:24:11,679
happen here

708
00:24:08,880 --> 00:24:13,760
now what we need to do is say all right

709
00:24:11,679 --> 00:24:15,440
how are we what's our strategy

710
00:24:13,759 --> 00:24:17,519
for determining whether or not we hit

711
00:24:15,440 --> 00:24:19,278
things and if we hit things

712
00:24:17,519 --> 00:24:21,200
determining whether or not we need to

713
00:24:19,278 --> 00:24:25,839
actually stop the motion

714
00:24:21,200 --> 00:24:25,840
uh one way or the other right

715
00:24:30,839 --> 00:24:33,839
so

716
00:24:35,759 --> 00:24:40,798
let's do um a

717
00:24:42,159 --> 00:24:45,360
trying to think of how i want to do this

718
00:24:44,000 --> 00:24:48,480
here

719
00:24:45,359 --> 00:24:50,158
so let's do something

720
00:24:48,480 --> 00:24:51,679
because i think what i'd like to do is

721
00:24:50,159 --> 00:24:53,120
is again do something where i kind of

722
00:24:51,679 --> 00:24:57,440
subdivide

723
00:24:53,119 --> 00:25:01,038
space a little bit and search i don't

724
00:24:57,440 --> 00:25:03,120
want a line because a line doesn't allow

725
00:25:01,038 --> 00:25:05,038
gliding along walls and it also wouldn't

726
00:25:03,119 --> 00:25:08,079
help us displace ourselves

727
00:25:05,038 --> 00:25:12,480
out of inter penetration so we want a

728
00:25:08,079 --> 00:25:15,599
search over some space right

729
00:25:12,480 --> 00:25:18,880
and we know some things about

730
00:25:15,599 --> 00:25:19,759
the size of the delta so whatever this

731
00:25:18,880 --> 00:25:21,679
is i don't it's

732
00:25:19,759 --> 00:25:23,359
player delta is a dumb word because this

733
00:25:21,679 --> 00:25:26,159
is not the player

734
00:25:23,359 --> 00:25:27,199
um so this is really just delta p here

735
00:25:26,159 --> 00:25:29,120
right it's not

736
00:25:27,200 --> 00:25:30,400
it's not like have anything to do with a

737
00:25:29,119 --> 00:25:33,359
player because this is moving

738
00:25:30,400 --> 00:25:35,440
any entity not just the player so when i

739
00:25:33,359 --> 00:25:38,558
take a look at the delta p

740
00:25:35,440 --> 00:25:40,798
um in this case can we also just

741
00:25:38,558 --> 00:25:42,000
take a minute to reflect on the fact

742
00:25:40,798 --> 00:25:46,798
that that purple

743
00:25:42,000 --> 00:25:46,798
color is absolutely horrid um

744
00:25:47,038 --> 00:25:51,200
we don't know for a fact that ryan

745
00:25:49,359 --> 00:25:55,038
fleury is colorblind

746
00:25:51,200 --> 00:25:58,240
but it would seem that he may

747
00:25:55,038 --> 00:25:59,519
in fact be colorblind uh if that was the

748
00:25:58,240 --> 00:26:02,480
default color

749
00:25:59,519 --> 00:26:03,119
um let me take a look inside here at the

750
00:26:02,480 --> 00:26:05,919
themes

751
00:26:03,119 --> 00:26:06,639
this is the themes where what is that

752
00:26:05,919 --> 00:26:10,080
color

753
00:26:06,640 --> 00:26:12,400
uh is it is it token highlight

754
00:26:10,079 --> 00:26:12,399
um

755
00:26:17,200 --> 00:26:20,240
you know what i'm saying like that is

756
00:26:18,400 --> 00:26:22,559
just a horrible purple

757
00:26:20,240 --> 00:26:22,558
um

758
00:26:23,798 --> 00:26:31,759
2f2f37 no that would be like a blue

759
00:26:26,880 --> 00:26:33,679
right am i am i wrong about that

760
00:26:31,759 --> 00:26:35,839
so that's actually this underline here

761
00:26:33,679 --> 00:26:38,559
so it's like a different it's like a

762
00:26:35,839 --> 00:26:39,599
it's like a token highlight for other

763
00:26:38,558 --> 00:26:44,158
places

764
00:26:39,599 --> 00:26:46,000
that aren't there or something

765
00:26:44,159 --> 00:26:48,000
does anyone know what that is offhand

766
00:26:46,000 --> 00:26:51,200
because it's really

767
00:26:48,000 --> 00:26:54,000
it's really aggressive that purple

768
00:26:51,200 --> 00:26:55,360
a little bit too aggressive you know

769
00:26:54,000 --> 00:26:58,400
what i'm saying to you

770
00:26:55,359 --> 00:26:58,399
anyone know what that is

771
00:27:04,839 --> 00:27:07,839
anybody

772
00:27:16,319 --> 00:27:20,000
purple means it couldn't find the

773
00:27:17,919 --> 00:27:23,300
variable okay so basically there's

774
00:27:20,000 --> 00:27:24,880
some variable we're not setting um

775
00:27:23,299 --> 00:27:28,720
[Music]

776
00:27:24,880 --> 00:27:28,720
you know what i'm saying uh

777
00:27:33,038 --> 00:27:37,839
oh terrius python but is there a way to

778
00:27:35,038 --> 00:27:37,839
just set the color

779
00:27:38,960 --> 00:27:42,480
but can i just set the color is there

780
00:27:41,200 --> 00:27:49,840
some

781
00:27:42,480 --> 00:27:49,839
setting for the color

782
00:27:50,640 --> 00:27:55,600
minor highlights okay minor

783
00:27:53,679 --> 00:27:57,038
yeah that's just not set so let's just

784
00:27:55,599 --> 00:27:58,719
set that and then we can just

785
00:27:57,038 --> 00:28:00,480
just have it right it's it's not an

786
00:27:58,720 --> 00:28:01,919
issue um

787
00:28:00,480 --> 00:28:03,519
if we just set it to a color that

788
00:28:01,919 --> 00:28:06,559
doesn't kill it that isn't

789
00:28:03,519 --> 00:28:10,000
a horrid right um

790
00:28:06,558 --> 00:28:13,359
flurry color token minor highlight

791
00:28:10,000 --> 00:28:13,359
uh and

792
00:28:14,839 --> 00:28:18,879
minorly

793
00:28:16,398 --> 00:28:20,719
we don't know who's responsible terry's

794
00:28:18,880 --> 00:28:24,399
python

795
00:28:20,720 --> 00:28:25,200
terrius python says uh that that's the

796
00:28:24,398 --> 00:28:28,479
case

797
00:28:25,200 --> 00:28:31,840
so if i just do this um

798
00:28:28,480 --> 00:28:31,839
do we do we now believe

799
00:28:32,240 --> 00:28:35,839
that this will be fine that everything

800
00:28:33,679 --> 00:28:39,759
will be fine

801
00:28:35,839 --> 00:28:39,759
move entity let's take a look

802
00:28:40,240 --> 00:28:47,359
oh yeah thank you tarius python

803
00:28:44,640 --> 00:28:48,799
for saving the day because that was that

804
00:28:47,359 --> 00:28:51,599
was pretty garish

805
00:28:48,798 --> 00:28:53,839
you know if you don't mind me saying so

806
00:28:51,599 --> 00:28:59,839
just a garish purple

807
00:28:53,839 --> 00:28:59,839
um so yeah

808
00:29:01,038 --> 00:29:03,759
we could make that a little brighter too

809
00:29:02,398 --> 00:29:04,959
if people are having trouble seeing it

810
00:29:03,759 --> 00:29:06,398
but

811
00:29:04,960 --> 00:29:08,399
i don't know how much i care like i

812
00:29:06,398 --> 00:29:11,519
don't usually need to see that that well

813
00:29:08,398 --> 00:29:11,918
um but you know at least now it's kind

814
00:29:11,519 --> 00:29:15,599
of like

815
00:29:11,919 --> 00:29:19,120
okay not too bad all right

816
00:29:15,599 --> 00:29:20,879
so uh at this point like i said what i

817
00:29:19,119 --> 00:29:25,439
need is a way to

818
00:29:20,880 --> 00:29:28,880
go through and test space in a way

819
00:29:25,440 --> 00:29:30,640
that lets me figure out uh where i could

820
00:29:28,880 --> 00:29:33,278
put this thing that's close to the place

821
00:29:30,640 --> 00:29:35,200
it actually wants to go

822
00:29:33,278 --> 00:29:37,359
and i think the way i'd like to do that

823
00:29:35,200 --> 00:29:38,880
again is just to break down space into

824
00:29:37,359 --> 00:29:42,000
some pieces

825
00:29:38,880 --> 00:29:42,960
and so maybe what i'll do is just kind

826
00:29:42,000 --> 00:29:45,759
of look at it

827
00:29:42,960 --> 00:29:45,759
like a uh

828
00:29:48,079 --> 00:29:55,599
like kind of a subdivided grid probably

829
00:29:52,480 --> 00:29:59,599
so what i may do

830
00:29:55,599 --> 00:29:59,599
uh is something like

831
00:30:04,398 --> 00:30:11,599
oops uh did that just

832
00:30:08,000 --> 00:30:12,000
yeah deleted my stuff um so maybe what

833
00:30:11,599 --> 00:30:14,959
i'll do

834
00:30:12,000 --> 00:30:16,159
is something like this i'll do like

835
00:30:14,960 --> 00:30:20,640
subdivision

836
00:30:16,159 --> 00:30:23,840
levels here uh

837
00:30:20,640 --> 00:30:23,840
or something like this

838
00:30:24,079 --> 00:30:27,519
and for each subdivision level i will

839
00:30:26,398 --> 00:30:30,558
look through

840
00:30:27,519 --> 00:30:32,960
uh some level some number

841
00:30:30,558 --> 00:30:32,960
of

842
00:30:33,679 --> 00:30:40,640
i i may even want to stack so

843
00:30:37,359 --> 00:30:44,240
for each i i want some way of like

844
00:30:40,640 --> 00:30:46,320
subdividing space and i could do this by

845
00:30:44,240 --> 00:30:48,558
just doing a blanket grid in fact you

846
00:30:46,319 --> 00:30:52,079
know what

847
00:30:48,558 --> 00:30:54,639
let's do it with a blanket grid first so

848
00:30:52,079 --> 00:30:55,599
just a fixed size grid and it'll be kind

849
00:30:54,640 --> 00:30:58,159
of crappy

850
00:30:55,599 --> 00:30:59,038
right but let's do it with a fixed side

851
00:30:58,159 --> 00:31:01,360
grid first

852
00:30:59,038 --> 00:31:02,319
and then we'll add subdivision after

853
00:31:01,359 --> 00:31:04,158
because that'll just

854
00:31:02,319 --> 00:31:06,558
make the problem a little bit simpler

855
00:31:04,159 --> 00:31:08,960
you know what i'm saying to you

856
00:31:06,558 --> 00:31:09,918
so let's do it with a few for loops here

857
00:31:08,960 --> 00:31:14,319
where we just

858
00:31:09,919 --> 00:31:14,320
take and we we do like a

859
00:31:15,038 --> 00:31:18,480
um a dimension here where we say all

860
00:31:17,038 --> 00:31:20,798
right we're just gonna look

861
00:31:18,480 --> 00:31:22,079
through like a four by four by four or

862
00:31:20,798 --> 00:31:26,158
something

863
00:31:22,079 --> 00:31:30,398
um and we're going to see uh

864
00:31:26,159 --> 00:31:33,519
which of these cells is

865
00:31:30,398 --> 00:31:36,719
available to place the

866
00:31:33,519 --> 00:31:36,720
uh entity in

867
00:31:38,159 --> 00:31:41,679
where is the best place we could place

868
00:31:40,000 --> 00:31:44,960
it in this series of cells

869
00:31:41,679 --> 00:31:47,278
right so starting from the location

870
00:31:44,960 --> 00:31:48,159
and moving outward in a radius that's

871
00:31:47,278 --> 00:31:51,278
roughly

872
00:31:48,159 --> 00:31:53,760
the size that you want to move um we're

873
00:31:51,278 --> 00:31:55,440
going to see

874
00:31:53,759 --> 00:31:57,919
to what extent we can like break the

875
00:31:55,440 --> 00:31:59,919
break thing down

876
00:31:57,919 --> 00:32:01,120
uh into pieces and we'll see what

877
00:31:59,919 --> 00:32:03,120
happens right

878
00:32:01,119 --> 00:32:05,278
and what i might do is say look this

879
00:32:03,119 --> 00:32:07,678
thing is going to potentially

880
00:32:05,278 --> 00:32:09,519
have to run multiple times as well so

881
00:32:07,679 --> 00:32:11,600
what we may do is make like kind of a

882
00:32:09,519 --> 00:32:14,798
little bit of a kernel here

883
00:32:11,599 --> 00:32:19,519
um that's maybe something like uh

884
00:32:14,798 --> 00:32:19,519
move entity small or uh

885
00:32:19,919 --> 00:32:25,360
move n and c locally like something

886
00:32:22,480 --> 00:32:28,399
that's just a very small perturbation

887
00:32:25,359 --> 00:32:29,839
uh and then this code here is going to

888
00:32:28,398 --> 00:32:32,959
be something that happens

889
00:32:29,839 --> 00:32:37,599
only on like a small movement

890
00:32:32,960 --> 00:32:41,038
and so here what we may do is say well

891
00:32:37,599 --> 00:32:44,319
if this move is too large so if if the

892
00:32:41,038 --> 00:32:47,599
actual like the the length of

893
00:32:44,319 --> 00:32:50,960
most of the motion is too large

894
00:32:47,599 --> 00:32:51,759
for uh what we're doing we're going to

895
00:32:50,960 --> 00:32:55,278
break it up

896
00:32:51,759 --> 00:32:58,398
into pieces you know what i'm saying so

897
00:32:55,278 --> 00:32:59,759
we'll just say and this is why i didn't

898
00:32:58,398 --> 00:33:00,798
care about that to do from before we had

899
00:32:59,759 --> 00:33:02,240
to do that was like

900
00:33:00,798 --> 00:33:04,240
cap the maximum velocity i don't think

901
00:33:02,240 --> 00:33:05,839
we want to i want to just

902
00:33:04,240 --> 00:33:11,839
take whatever velocity you asked us to

903
00:33:05,839 --> 00:33:11,839
and split right

904
00:33:21,278 --> 00:33:25,200
okay so if we're going to take the

905
00:33:23,599 --> 00:33:27,918
velocity and split i need

906
00:33:25,200 --> 00:33:28,319
like uh some total motion and again you

907
00:33:27,919 --> 00:33:31,600
know what

908
00:33:28,319 --> 00:33:35,359
to do subdivide motion

909
00:33:31,599 --> 00:33:37,918
into max size steps

910
00:33:35,359 --> 00:33:39,678
again i won't bother with that yet i'm

911
00:33:37,919 --> 00:33:41,919
just going to call move entity locally

912
00:33:39,679 --> 00:33:43,519
first and we'll do that

913
00:33:41,919 --> 00:33:45,759
subdivision there is a separate step as

914
00:33:43,519 --> 00:33:45,759
well

915
00:33:45,919 --> 00:33:49,278
so off we go and what we want to do here

916
00:33:48,798 --> 00:33:52,639
is

917
00:33:49,278 --> 00:33:55,759
call this function uh

918
00:33:52,640 --> 00:33:59,200
with the entity who's moving and

919
00:33:55,759 --> 00:34:02,480
the desired position of the entity

920
00:33:59,200 --> 00:34:04,880
um so where you're actually trying to

921
00:34:02,480 --> 00:34:04,880
put it

922
00:34:05,359 --> 00:34:09,918
and i might even say like something like

923
00:34:08,639 --> 00:34:13,679
that

924
00:34:09,918 --> 00:34:17,358
so we want like a v3 from

925
00:34:13,679 --> 00:34:19,679
and a v32 uh so this is where we're

926
00:34:17,358 --> 00:34:21,679
coming from this is where we're going to

927
00:34:19,679 --> 00:34:25,918
this is guaranteed to work as long as

928
00:34:21,679 --> 00:34:25,918
these are fairly small motions

929
00:34:26,159 --> 00:34:29,760
and then we need to pass the region and

930
00:34:28,639 --> 00:34:31,200
the entity

931
00:34:29,760 --> 00:34:33,599
because we need to know the entity's

932
00:34:31,199 --> 00:34:38,799
collision volume we could

933
00:34:33,599 --> 00:34:38,800
if we want to just pass the collision

934
00:34:46,838 --> 00:34:49,838
volume

935
00:34:55,760 --> 00:34:58,960
i'm going to pass the unity for now

936
00:34:57,358 --> 00:35:00,400
we'll think about how we want to do that

937
00:34:58,960 --> 00:35:04,400
later

938
00:35:00,400 --> 00:35:06,320
so we're going to do this which gives us

939
00:35:04,400 --> 00:35:08,160
information about that motion we're not

940
00:35:06,320 --> 00:35:11,039
going to do the subdivision yet

941
00:35:08,159 --> 00:35:13,440
um i might want to make this a little

942
00:35:11,039 --> 00:35:16,719
easier on myself for iterating

943
00:35:13,440 --> 00:35:17,838
um we've never made a voxel iterator

944
00:35:16,719 --> 00:35:20,879
here

945
00:35:17,838 --> 00:35:24,880
so maybe that's not a great idea uh

946
00:35:20,880 --> 00:35:24,880
but um you know

947
00:35:25,599 --> 00:35:29,440
the index to the voxel we would

948
00:35:27,838 --> 00:35:30,000
basically do something like you know

949
00:35:29,440 --> 00:35:33,679
while

950
00:35:30,000 --> 00:35:37,039
voxel i z is less than the dim z

951
00:35:33,679 --> 00:35:38,879
you know off you go uh and then at the

952
00:35:37,039 --> 00:35:42,159
end you do like a voxel

953
00:35:38,880 --> 00:35:44,960
i x plus and you say if voxel i

954
00:35:42,159 --> 00:35:46,159
is uh less or sorry greater than or

955
00:35:44,960 --> 00:35:49,039
equal to

956
00:35:46,159 --> 00:35:49,039
the um

957
00:35:50,079 --> 00:35:53,039
the voxel dim

958
00:35:54,239 --> 00:35:57,598
this is just a standard way to do the

959
00:35:56,000 --> 00:35:59,679
iteration right so if it's

960
00:35:57,599 --> 00:36:00,640
greater than equal to voxel dim then you

961
00:35:59,679 --> 00:36:03,759
do

962
00:36:00,639 --> 00:36:03,759
your other increment

963
00:36:06,000 --> 00:36:11,599
and in here i would also do voxel i

964
00:36:09,119 --> 00:36:13,119
x equals zero and then the last one

965
00:36:11,599 --> 00:36:17,599
voxel i z

966
00:36:13,119 --> 00:36:22,160
oops y greater than nuclear voxel dim

967
00:36:17,599 --> 00:36:22,160
y voxel i y

968
00:36:22,559 --> 00:36:28,639
zero plus plus x light z

969
00:36:26,239 --> 00:36:29,358
so that's a simple way to just do one

970
00:36:28,639 --> 00:36:31,039
for loop

971
00:36:29,358 --> 00:36:33,199
well it's not a for loop but you get the

972
00:36:31,039 --> 00:36:36,880
idea one loop

973
00:36:33,199 --> 00:36:36,879
uh that is going to do

974
00:36:39,358 --> 00:36:44,480
all of the squares of a voxel right all

975
00:36:42,400 --> 00:36:47,440
of the indices of a voxel

976
00:36:44,480 --> 00:36:48,960
uh and then in each one of these i'm

977
00:36:47,440 --> 00:36:49,900
just going to go ahead

978
00:36:48,960 --> 00:36:52,240
and

979
00:36:49,900 --> 00:36:55,920
[Music]

980
00:36:52,239 --> 00:36:58,399
test so this allows us to do our

981
00:36:55,920 --> 00:37:01,358
sort of our breakup right our our

982
00:36:58,400 --> 00:37:04,480
discretization of the space

983
00:37:01,358 --> 00:37:05,358
and in each one of these i then uh need

984
00:37:04,480 --> 00:37:07,519
to

985
00:37:05,358 --> 00:37:09,679
put in like the cell dim so here's the

986
00:37:07,519 --> 00:37:11,440
cell dim

987
00:37:09,679 --> 00:37:13,838
this is going to be how big that voxel

988
00:37:11,440 --> 00:37:23,838
is and

989
00:37:13,838 --> 00:37:23,838
again i think

990
00:37:30,000 --> 00:37:34,800
i think the way that i want to do this

991
00:37:32,320 --> 00:37:38,160
uh like i said is i want to break out

992
00:37:34,800 --> 00:37:39,680
the space in a way that that ensures

993
00:37:38,159 --> 00:37:42,000
that i'm looking at

994
00:37:39,679 --> 00:37:43,358
the place that i was at the place that

995
00:37:42,000 --> 00:37:47,760
i'm going to

996
00:37:43,358 --> 00:37:51,199
and some reasonable apron

997
00:37:47,760 --> 00:37:54,320
around it again the reason for that

998
00:37:51,199 --> 00:37:56,078
is this is not trying to be an accurate

999
00:37:54,320 --> 00:37:59,280
physical simulation

1000
00:37:56,079 --> 00:37:59,680
at all because this is a game we do not

1001
00:37:59,280 --> 00:38:01,839
care

1002
00:37:59,679 --> 00:38:03,598
fundamentally about the accuracy of the

1003
00:38:01,838 --> 00:38:06,960
physical simulation

1004
00:38:03,599 --> 00:38:10,000
what we care about is that we recover

1005
00:38:06,960 --> 00:38:12,800
from screw-ups gracefully so

1006
00:38:10,000 --> 00:38:15,280
if the game design code that like does a

1007
00:38:12,800 --> 00:38:17,680
bunch of random crap

1008
00:38:15,280 --> 00:38:20,720
ends up sticking to objects inside each

1009
00:38:17,679 --> 00:38:23,440
other right or like one side another

1010
00:38:20,719 --> 00:38:24,159
we want to be doing searches outside of

1011
00:38:23,440 --> 00:38:26,880
that space

1012
00:38:24,159 --> 00:38:28,078
to try and ensure that like we'll get

1013
00:38:26,880 --> 00:38:31,280
those things will separate

1014
00:38:28,079 --> 00:38:33,599
at some point right so what we want to

1015
00:38:31,280 --> 00:38:36,320
do is we want to try and

1016
00:38:33,599 --> 00:38:38,480
look for places we can put things so

1017
00:38:36,320 --> 00:38:41,280
that they will split in those cases

1018
00:38:38,480 --> 00:38:42,159
now the only thing that's a little bit

1019
00:38:41,280 --> 00:38:44,320
dicey here

1020
00:38:42,159 --> 00:38:45,920
is you may want to do something like you

1021
00:38:44,320 --> 00:38:47,760
check to see whether or not you're

1022
00:38:45,920 --> 00:38:49,599
currently interpenetrating at the start

1023
00:38:47,760 --> 00:38:50,320
of a frame and if you are you search for

1024
00:38:49,599 --> 00:38:52,800
a wide

1025
00:38:50,320 --> 00:38:53,838
you search over a relatively large area

1026
00:38:52,800 --> 00:38:56,480
to try to get yourself

1027
00:38:53,838 --> 00:38:57,920
out of that location i don't know to

1028
00:38:56,480 --> 00:38:59,599
what extent we want to do that it

1029
00:38:57,920 --> 00:39:00,000
probably depends on just how bad we

1030
00:38:59,599 --> 00:39:01,440
expect

1031
00:39:00,000 --> 00:39:04,000
the gameplay code to be doing things

1032
00:39:01,440 --> 00:39:04,960
like that my hope is is the answer is

1033
00:39:04,000 --> 00:39:09,199
not very

1034
00:39:04,960 --> 00:39:09,199
right um

1035
00:39:10,480 --> 00:39:15,838
so yeah uh

1036
00:39:24,960 --> 00:39:29,920
so i think that's i don't know this

1037
00:39:28,000 --> 00:39:31,280
part is not that important because we

1038
00:39:29,920 --> 00:39:33,119
can't always pick

1039
00:39:31,280 --> 00:39:35,280
larger ones later but what i want to do

1040
00:39:33,119 --> 00:39:38,240
here is basically say okay

1041
00:39:35,280 --> 00:39:40,160
we've got from p and 2p and those are

1042
00:39:38,239 --> 00:39:41,039
going to be like the corners of this

1043
00:39:40,159 --> 00:39:44,879
voxel

1044
00:39:41,039 --> 00:39:47,920
and then we're going to extend it by an

1045
00:39:44,880 --> 00:39:51,519
apron right uh

1046
00:39:47,920 --> 00:39:54,559
so we want to do like a total voxel dim

1047
00:39:51,519 --> 00:39:55,358
and the total voxel dim uh is going to

1048
00:39:54,559 --> 00:39:58,559
be

1049
00:39:55,358 --> 00:40:00,639
uh like and in fact i guess we could do

1050
00:39:58,559 --> 00:40:03,838
we have a rectangle three

1051
00:40:00,639 --> 00:40:06,960
uh wrecked min max

1052
00:40:03,838 --> 00:40:08,078
right so voxel bounds maybe is the right

1053
00:40:06,960 --> 00:40:11,119
way to do it

1054
00:40:08,079 --> 00:40:11,839
so we do voxel mounds uh and we say we

1055
00:40:11,119 --> 00:40:15,119
want to go

1056
00:40:11,838 --> 00:40:17,358
from the from p to the 2p right

1057
00:40:15,119 --> 00:40:17,358
and

1058
00:40:22,159 --> 00:40:26,078
the problem with this is we want the min

1059
00:40:25,199 --> 00:40:29,039
and the max i don't

1060
00:40:26,079 --> 00:40:32,240
do we have a min and a max for vectors

1061
00:40:29,039 --> 00:40:32,239
like we want this right

1062
00:40:35,280 --> 00:40:39,760
you know what i'm saying to you looks

1063
00:40:38,079 --> 00:40:42,560
like that works

1064
00:40:39,760 --> 00:40:44,160
so basically we want to take the entire

1065
00:40:42,559 --> 00:40:47,599
span of the move

1066
00:40:44,159 --> 00:40:52,000
like whatever that is um

1067
00:40:47,599 --> 00:40:54,880
what the heck is this

1068
00:40:52,000 --> 00:40:55,440
this is like the this loaded this is

1069
00:40:54,880 --> 00:40:57,760
like the c

1070
00:40:55,440 --> 00:40:59,440
tray i don't we don't need that i don't

1071
00:40:57,760 --> 00:41:02,720
know why that's up there

1072
00:40:59,440 --> 00:41:04,318
um so this is the total bounds of the

1073
00:41:02,719 --> 00:41:07,598
move and then what i want to do

1074
00:41:04,318 --> 00:41:10,559
is i want to do like an add radius too

1075
00:41:07,599 --> 00:41:12,079
um and so i want to make sure that

1076
00:41:10,559 --> 00:41:14,799
however big that is

1077
00:41:12,079 --> 00:41:17,119
we also look at some region or some

1078
00:41:14,800 --> 00:41:19,039
small region around it

1079
00:41:17,119 --> 00:41:20,960
that's like the epsilon and i can call

1080
00:41:19,039 --> 00:41:24,480
this the apron

1081
00:41:20,960 --> 00:41:24,480
um size or something

1082
00:41:25,199 --> 00:41:29,118
and again i don't really know how big

1083
00:41:26,960 --> 00:41:30,720
that should be uh that's that's a really

1084
00:41:29,119 --> 00:41:33,358
tough call

1085
00:41:30,719 --> 00:41:34,480
because i don't know like how much space

1086
00:41:33,358 --> 00:41:38,318
we want to look

1087
00:41:34,480 --> 00:41:39,440
uh at but it's going to be something

1088
00:41:38,318 --> 00:41:40,960
right and we're going to want to tweak

1089
00:41:39,440 --> 00:41:41,920
that and hopefully we can maybe draw

1090
00:41:40,960 --> 00:41:43,838
some of this stuff

1091
00:41:41,920 --> 00:41:45,039
so we can see it and make some more

1092
00:41:43,838 --> 00:41:48,159
informed decisions about it

1093
00:41:45,039 --> 00:41:50,318
we know that 1.0 in this game

1094
00:41:48,159 --> 00:41:51,598
is a fairly large distance right that's

1095
00:41:50,318 --> 00:41:55,199
like the distance from like

1096
00:41:51,599 --> 00:41:56,240
one square to another uh on the hopping

1097
00:41:55,199 --> 00:41:57,759
or whatever it's like

1098
00:41:56,239 --> 00:41:59,838
you know about one or something like

1099
00:41:57,760 --> 00:42:02,400
that so

1100
00:41:59,838 --> 00:42:03,039
we know that like point uh this would be

1101
00:42:02,400 --> 00:42:05,920
like 1

1102
00:42:03,039 --> 00:42:07,519
100th of that distance which would be

1103
00:42:05,920 --> 00:42:09,519
pretty tiny

1104
00:42:07,519 --> 00:42:11,358
uh and so like i said i don't know what

1105
00:42:09,519 --> 00:42:13,199
we want this apron size to be

1106
00:42:11,358 --> 00:42:14,799
it's it's tough to say but it'd be

1107
00:42:13,199 --> 00:42:16,159
something in this range you know maybe

1108
00:42:14,800 --> 00:42:18,880
it's that maybe it's this i don't know

1109
00:42:16,159 --> 00:42:18,879
we can play with it

1110
00:42:19,519 --> 00:42:22,880
so from there we would say okay the

1111
00:42:21,119 --> 00:42:23,920
voxel dim is something we know that the

1112
00:42:22,880 --> 00:42:26,880
voxel bounds

1113
00:42:23,920 --> 00:42:27,680
divided by the voxel dim would be the uh

1114
00:42:26,880 --> 00:42:30,640
actual

1115
00:42:27,679 --> 00:42:32,480
thing the actual dimensions of each

1116
00:42:30,639 --> 00:42:36,480
individual cell

1117
00:42:32,480 --> 00:42:39,519
and i don't know

1118
00:42:36,480 --> 00:42:39,519
why this is

1119
00:42:40,480 --> 00:42:46,240
that i suppose another way to write this

1120
00:42:43,199 --> 00:42:46,239
would probably be this

1121
00:42:48,480 --> 00:42:51,599
um and

1122
00:42:50,130 --> 00:42:53,440
[Music]

1123
00:42:51,599 --> 00:42:59,838
why am i getting grumpus why is it

1124
00:42:53,440 --> 00:42:59,838
grumpus here

1125
00:43:06,960 --> 00:43:13,199
all right so here

1126
00:43:10,800 --> 00:43:15,119
we have the voxel bounds and the voxel

1127
00:43:13,199 --> 00:43:15,919
dim we want to do a divide we don't have

1128
00:43:15,119 --> 00:43:17,410
a divide

1129
00:43:15,920 --> 00:43:19,599
for vectors um

1130
00:43:17,409 --> 00:43:22,879
[Music]

1131
00:43:19,599 --> 00:43:25,280
for no real reason we probably should

1132
00:43:22,880 --> 00:43:26,480
uh because sometimes you want to divide

1133
00:43:25,280 --> 00:43:29,599
right

1134
00:43:26,480 --> 00:43:32,240
um and so i'm not sure yeah i'm not sure

1135
00:43:29,599 --> 00:43:32,240
why we wouldn't

1136
00:43:32,960 --> 00:43:37,599
uh i guess this is actually

1137
00:43:37,920 --> 00:43:43,039
do we have a hadamard divide

1138
00:43:41,280 --> 00:43:45,040
so we call that hadamard i probably

1139
00:43:43,039 --> 00:43:48,480
should have just used multiply

1140
00:43:45,039 --> 00:43:51,039
it used to be that this was rare to see

1141
00:43:48,480 --> 00:43:52,480
a hadamard product written as operator

1142
00:43:51,039 --> 00:43:55,838
times

1143
00:43:52,480 --> 00:43:56,639
uh but now it's not because shaders do

1144
00:43:55,838 --> 00:43:58,318
it

1145
00:43:56,639 --> 00:44:00,639
and so now everyone's used to just

1146
00:43:58,318 --> 00:44:05,199
writing times for this

1147
00:44:00,639 --> 00:44:05,199
so you know um

1148
00:44:05,679 --> 00:44:10,239
i think i may just cave on that and say

1149
00:44:07,920 --> 00:44:13,680
look man

1150
00:44:10,239 --> 00:44:15,118
hadamard is just times now

1151
00:44:13,679 --> 00:44:17,679
because it's not doesn't really make a

1152
00:44:15,119 --> 00:44:17,680
lot of sense

1153
00:44:18,239 --> 00:44:23,838
uh all right so anyway let's suppose

1154
00:44:20,800 --> 00:44:23,839
this is operator slash

1155
00:44:24,000 --> 00:44:30,400
from guns and roses and then we'll just

1156
00:44:27,358 --> 00:44:32,639
you know do the divide here and really

1157
00:44:30,400 --> 00:44:35,200
this should probably be operator times

1158
00:44:32,639 --> 00:44:35,759
you know that should probably be that uh

1159
00:44:35,199 --> 00:44:37,118
and

1160
00:44:35,760 --> 00:44:39,200
you know we should probably just change

1161
00:44:37,119 --> 00:44:42,000
that right so

1162
00:44:39,199 --> 00:44:43,838
in here where we had these uh we should

1163
00:44:42,000 --> 00:44:44,719
probably change those to something else

1164
00:44:43,838 --> 00:44:48,000
and you can see

1165
00:44:44,719 --> 00:44:49,199
like just trying to look at how many we

1166
00:44:48,000 --> 00:44:52,639
have

1167
00:44:49,199 --> 00:44:55,279
uh it's not even that many

1168
00:44:52,639 --> 00:44:55,838
you know so i do think maybe we we do

1169
00:44:55,280 --> 00:44:58,560
that

1170
00:44:55,838 --> 00:45:00,078
um let's let's maybe do that as well

1171
00:44:58,559 --> 00:45:02,000
just get rid of those

1172
00:45:00,079 --> 00:45:03,119
because i don't think it makes a lot of

1173
00:45:02,000 --> 00:45:06,239
sense

1174
00:45:03,119 --> 00:45:10,559
um honestly anymore

1175
00:45:06,239 --> 00:45:13,919
to bother with that like this is in in

1176
00:45:10,559 --> 00:45:17,679
in game parlance nowadays

1177
00:45:13,920 --> 00:45:18,559
operator star is pretty much what it is

1178
00:45:17,679 --> 00:45:20,399
uh

1179
00:45:18,559 --> 00:45:21,440
and and so it's you might as well get

1180
00:45:20,400 --> 00:45:23,519
used to it because that's what it's

1181
00:45:21,440 --> 00:45:26,480
going to be

1182
00:45:23,519 --> 00:45:27,280
in basically everything you do um so

1183
00:45:26,480 --> 00:45:31,358
seldim

1184
00:45:27,280 --> 00:45:35,280
times whatever this is here

1185
00:45:31,358 --> 00:45:35,279
right is all that's going to be

1186
00:45:36,559 --> 00:45:39,279
same here

1187
00:45:44,159 --> 00:45:48,719
there's that super aggressive token

1188
00:45:45,920 --> 00:45:52,639
killing for some reason

1189
00:45:48,719 --> 00:45:53,519
um does anyone know that answer targus

1190
00:45:52,639 --> 00:45:55,279
python

1191
00:45:53,519 --> 00:45:57,440
do you know how to get it to like

1192
00:45:55,280 --> 00:45:59,280
actually just delete a token

1193
00:45:57,440 --> 00:46:02,079
when you do that rather than deleting

1194
00:45:59,280 --> 00:46:04,480
two tokens for some reason

1195
00:46:02,079 --> 00:46:05,920
right like it for some reason deletes

1196
00:46:04,480 --> 00:46:08,079
way more than

1197
00:46:05,920 --> 00:46:09,039
a token even though i thought i bound

1198
00:46:08,079 --> 00:46:12,400
that

1199
00:46:09,039 --> 00:46:16,239
to delete token but

1200
00:46:12,400 --> 00:46:18,559
maybe not um i don't know

1201
00:46:16,239 --> 00:46:20,239
we'll have to look maybe that's in the

1202
00:46:18,559 --> 00:46:21,920
uh yeah i don't know

1203
00:46:20,239 --> 00:46:23,439
something something's weird i'm not sure

1204
00:46:21,920 --> 00:46:24,960
like what that is but it's it's not

1205
00:46:23,440 --> 00:46:29,838
great

1206
00:46:24,960 --> 00:46:29,838
um so anyway looking at this

1207
00:46:30,000 --> 00:46:43,838
again all looks pretty straightforward

1208
00:46:51,838 --> 00:46:57,519
why is that say hadamard when there's no

1209
00:46:54,960 --> 00:46:59,920
hadamard there

1210
00:46:57,519 --> 00:46:59,920
is that

1211
00:47:00,719 --> 00:47:03,519
is this that

1212
00:47:04,960 --> 00:47:08,318
that's a bit weird i don't want to know

1213
00:47:06,880 --> 00:47:13,280
what was going on there

1214
00:47:08,318 --> 00:47:13,279
we won't ask these questions um

1215
00:47:13,358 --> 00:47:16,400
all right there we go

1216
00:47:18,079 --> 00:47:23,760
and oops yeah i would really love to get

1217
00:47:22,318 --> 00:47:25,920
that fixed it's one of the only

1218
00:47:23,760 --> 00:47:29,200
remaining things that super bothers me

1219
00:47:25,920 --> 00:47:31,119
uh in in this editor right now is that

1220
00:47:29,199 --> 00:47:32,078
weird like super aggressive like when

1221
00:47:31,119 --> 00:47:34,318
you hit

1222
00:47:32,079 --> 00:47:35,760
delete it deletes like everything and i

1223
00:47:34,318 --> 00:47:37,358
don't know why it does that because i

1224
00:47:35,760 --> 00:47:42,079
thought i bound it to just

1225
00:47:37,358 --> 00:47:42,078
the token delete like if you look

1226
00:47:42,400 --> 00:47:53,838
at the bindings file

1227
00:47:58,719 --> 00:48:03,919
so this is what they're bound to um

1228
00:48:01,500 --> 00:48:08,480
[Music]

1229
00:48:03,920 --> 00:48:09,920
which is obviously not right or

1230
00:48:08,480 --> 00:48:11,838
you know maybe it is maybe the only

1231
00:48:09,920 --> 00:48:16,079
thing that there is but

1232
00:48:11,838 --> 00:48:19,199
is there like a thing um

1233
00:48:16,079 --> 00:48:20,000
that's better like something that would

1234
00:48:19,199 --> 00:48:23,039
not

1235
00:48:20,000 --> 00:48:27,280
do that that would just delete one token

1236
00:48:23,039 --> 00:48:29,519
at a time um maybe it's white space or

1237
00:48:27,280 --> 00:48:32,559
token boundary or just

1238
00:48:29,519 --> 00:48:35,519
backspace token boundary

1239
00:48:32,559 --> 00:48:37,760
anyone any guesses for coder experts out

1240
00:48:35,519 --> 00:48:37,759
there

1241
00:48:38,318 --> 00:48:41,838
there's that and there's also the other

1242
00:48:39,920 --> 00:48:43,200
fact was that like the weird like when

1243
00:48:41,838 --> 00:48:46,000
i'm opening a file

1244
00:48:43,199 --> 00:48:47,358
it deletes the whole thing like only

1245
00:48:46,000 --> 00:48:49,280
deleting just

1246
00:48:47,358 --> 00:48:51,199
characters at a time in that thing up

1247
00:48:49,280 --> 00:48:52,800
there those are the two things i would

1248
00:48:51,199 --> 00:48:55,358
be very interested to know if anyone

1249
00:48:52,800 --> 00:48:58,400
knows the answer

1250
00:48:55,358 --> 00:49:01,519
uh alright so

1251
00:48:58,400 --> 00:49:05,119
doing some stuff

1252
00:49:01,519 --> 00:49:08,400
getting rid of the hadamard thing

1253
00:49:05,119 --> 00:49:09,119
um because i think it's pretty standard

1254
00:49:08,400 --> 00:49:12,480
now

1255
00:49:09,119 --> 00:49:15,680
these days that times times

1256
00:49:12,480 --> 00:49:18,318
had times has had a mard product

1257
00:49:15,679 --> 00:49:19,598
that's just what happened i don't know

1258
00:49:18,318 --> 00:49:21,920
why

1259
00:49:19,599 --> 00:49:23,599
um you know they could have picked dot

1260
00:49:21,920 --> 00:49:24,159
product they could have picked cross

1261
00:49:23,599 --> 00:49:27,838
product

1262
00:49:24,159 --> 00:49:29,920
they could have picked hadamard products

1263
00:49:27,838 --> 00:49:31,119
the powers that be picked hadamard

1264
00:49:29,920 --> 00:49:33,119
product so

1265
00:49:31,119 --> 00:49:35,920
at this point i don't think there's much

1266
00:49:33,119 --> 00:49:35,920
point in

1267
00:49:36,559 --> 00:49:45,839
differing about it um

1268
00:49:49,820 --> 00:49:53,389
[Music]

1269
00:49:56,838 --> 00:49:59,838
uh

1270
00:50:02,239 --> 00:50:05,838
it's really weird too it's like not even

1271
00:50:03,920 --> 00:50:08,720
symmetric right

1272
00:50:05,838 --> 00:50:10,400
like if you're here and you hit delete

1273
00:50:08,719 --> 00:50:12,480
it deletes the parentheses

1274
00:50:10,400 --> 00:50:14,960
and the hadamard if you're here and you

1275
00:50:12,480 --> 00:50:17,039
hit delete it just deletes the hadamard

1276
00:50:14,960 --> 00:50:18,559
so like it'd be it's really hard to even

1277
00:50:17,039 --> 00:50:19,440
wrap your brain around because it's

1278
00:50:18,559 --> 00:50:21,440
using

1279
00:50:19,440 --> 00:50:22,480
it's doing like all the alphanumerics

1280
00:50:21,440 --> 00:50:24,639
and stopping

1281
00:50:22,480 --> 00:50:27,039
when it hits white space or a symbol

1282
00:50:24,639 --> 00:50:29,358
which is not something that your brain

1283
00:50:27,039 --> 00:50:31,279
does very like it's not an operation

1284
00:50:29,358 --> 00:50:34,239
your brain would normally think to do

1285
00:50:31,280 --> 00:50:34,880
you know what i mean or that it wants to

1286
00:50:34,239 --> 00:50:37,519
do

1287
00:50:34,880 --> 00:50:41,838
like or naturally you know i feel like

1288
00:50:37,519 --> 00:50:41,838
so it's kind of like always confusing

1289
00:50:43,679 --> 00:50:49,118
victor c minus says that there are some

1290
00:50:47,519 --> 00:50:50,639
things i can try

1291
00:50:49,119 --> 00:50:52,160
so we're going to try them because the

1292
00:50:50,639 --> 00:50:56,879
way it is right now i don't like

1293
00:50:52,159 --> 00:51:00,318
so it can't be worse backspace

1294
00:50:56,880 --> 00:51:00,318
token boundary

1295
00:51:00,800 --> 00:51:05,680
is it actually d-r-y or is it d-a-r-y is

1296
00:51:03,920 --> 00:51:09,599
it actually spelled wrong

1297
00:51:05,679 --> 00:51:14,399
i guess we'll find out in a second uh

1298
00:51:09,599 --> 00:51:14,400
part delete token boundary

1299
00:51:15,760 --> 00:51:20,440
okay um so if we do that and then do for

1300
00:51:19,119 --> 00:51:21,760
red

1301
00:51:20,440 --> 00:51:24,720
[Music]

1302
00:51:21,760 --> 00:51:24,720
let's take a look

1303
00:51:25,519 --> 00:51:28,239
at what happens

1304
00:51:30,880 --> 00:51:34,318
ah yes

1305
00:51:35,280 --> 00:51:39,280
much better thank you ryan and thank you

1306
00:51:37,679 --> 00:51:41,358
victor c minus

1307
00:51:39,280 --> 00:51:43,440
so yeah other only other question is is

1308
00:51:41,358 --> 00:51:45,279
there a way to stop it from doing that

1309
00:51:43,440 --> 00:51:47,440
like when you do this is there a way to

1310
00:51:45,280 --> 00:51:50,559
make it only just do

1311
00:51:47,440 --> 00:51:53,599
a character at a time does anyone know

1312
00:51:50,559 --> 00:51:55,599
that'd be another nice thing to have

1313
00:51:53,599 --> 00:51:56,640
um so we're getting down to things where

1314
00:51:55,599 --> 00:51:59,440
there's not too much

1315
00:51:56,639 --> 00:52:00,799
problems at the moment there's the

1316
00:51:59,440 --> 00:52:03,039
indentation is broken

1317
00:52:00,800 --> 00:52:04,079
which is just a bug i don't know how

1318
00:52:03,039 --> 00:52:07,039
long it's been in there

1319
00:52:04,079 --> 00:52:07,839
a long time so that's unfortunate but

1320
00:52:07,039 --> 00:52:09,279
hopefully that

1321
00:52:07,838 --> 00:52:12,960
that's just a bug that will hopefully

1322
00:52:09,280 --> 00:52:12,960
get fixed at some point

1323
00:52:14,880 --> 00:52:22,000
all right so that's all good

1324
00:52:18,719 --> 00:52:26,078
and this just needs to be

1325
00:52:22,000 --> 00:52:30,838
like a v3 a fide version

1326
00:52:26,079 --> 00:52:33,760
um so voxel bounds

1327
00:52:30,838 --> 00:52:36,078
uh so we can divide those two

1328
00:52:33,760 --> 00:52:37,760
right uh and that will give us the

1329
00:52:36,079 --> 00:52:40,640
dimensions of each individual cell

1330
00:52:37,760 --> 00:52:42,559
which is good so we have those um and

1331
00:52:40,639 --> 00:52:47,838
then we should be able to

1332
00:52:42,559 --> 00:52:47,839
uh construct the positions from there

1333
00:52:56,719 --> 00:53:04,959
oh cool more infos

1334
00:53:00,079 --> 00:53:04,960
someone says that in the config file

1335
00:53:05,440 --> 00:53:11,200
if i set lister whole world whole word

1336
00:53:08,559 --> 00:53:11,200
backspace

1337
00:53:12,838 --> 00:53:18,880
yes

1338
00:53:15,760 --> 00:53:18,880
wait but that's set to false

1339
00:53:23,599 --> 00:53:29,838
isn't that isn't that what

1340
00:53:39,119 --> 00:53:45,039
lister whole world whole word

1341
00:53:42,159 --> 00:53:45,759
backspace when modified is already set

1342
00:53:45,039 --> 00:53:48,960
to false

1343
00:53:45,760 --> 00:53:50,319
is the only thing which

1344
00:53:48,960 --> 00:53:53,679
does that mean it just doesn't work

1345
00:53:50,318 --> 00:53:56,719
anymore maybe

1346
00:53:53,679 --> 00:53:59,039
or do we set it to true for some reason

1347
00:53:56,719 --> 00:53:59,039
um

1348
00:53:59,920 --> 00:54:02,159
which

1349
00:54:07,358 --> 00:54:13,679
try true now that's confusing

1350
00:54:10,559 --> 00:54:13,680
but we'll give it a shot

1351
00:54:15,440 --> 00:54:20,318
yep that was it wow okay so that may

1352
00:54:17,679 --> 00:54:22,879
just be a poorly labeled parameter

1353
00:54:20,318 --> 00:54:24,960
i guess but hey man i don't care as long

1354
00:54:22,880 --> 00:54:25,920
as i get as long as that gets what i

1355
00:54:24,960 --> 00:54:29,519
wanted

1356
00:54:25,920 --> 00:54:30,720
i don't care uh okay so now

1357
00:54:29,519 --> 00:54:32,079
uh we're compiling again with the

1358
00:54:30,719 --> 00:54:33,199
hadamard product let me just test to

1359
00:54:32,079 --> 00:54:34,480
make sure i didn't break anything with

1360
00:54:33,199 --> 00:54:37,279
the hadamard product

1361
00:54:34,480 --> 00:54:38,559
so that's all good uh looks like

1362
00:54:37,280 --> 00:54:41,119
everything's fine

1363
00:54:38,559 --> 00:54:43,599
so let's go back to trying to help these

1364
00:54:41,119 --> 00:54:47,358
little fellows move

1365
00:54:43,599 --> 00:54:50,838
uh how much time we got here we have

1366
00:54:47,358 --> 00:54:52,558
like one hour probably i don't really

1367
00:54:50,838 --> 00:54:54,960
know uh

1368
00:54:52,559 --> 00:54:56,960
so if i go back to move entity locally

1369
00:54:54,960 --> 00:55:01,519
and we take a look here

1370
00:54:56,960 --> 00:55:05,039
um you can see that i've got my voxel

1371
00:55:01,519 --> 00:55:08,559
i'm stepping through and at each point

1372
00:55:05,039 --> 00:55:12,000
in the voxel stepping

1373
00:55:08,559 --> 00:55:15,760
what i want to do is determine um

1374
00:55:12,000 --> 00:55:15,760
whether or not i could

1375
00:55:16,318 --> 00:55:25,039
stand in this place on the voxel

1376
00:55:20,239 --> 00:55:25,039
and what i might do is just look to see

1377
00:55:32,838 --> 00:55:35,838
uh

1378
00:55:37,760 --> 00:55:42,160
what i might do is just look to see like

1379
00:55:45,679 --> 00:55:50,399
what the corners of the vaxlar that i

1380
00:55:48,719 --> 00:55:54,798
can stand on

1381
00:55:50,400 --> 00:55:54,798
you know what i'm saying uh

1382
00:56:00,838 --> 00:56:03,838
and

1383
00:56:36,960 --> 00:56:40,240
i'm trying to think if i'm actually over

1384
00:56:38,559 --> 00:56:41,680
complicating this by actually bothering

1385
00:56:40,239 --> 00:56:43,118
to step through a voxel at all

1386
00:56:41,679 --> 00:56:44,798
because what i was thinking is can i

1387
00:56:43,119 --> 00:56:46,559
just start at the place i was trying to

1388
00:56:44,798 --> 00:56:48,880
put myself so the 2p

1389
00:56:46,559 --> 00:56:50,720
can i just look around there to see if i

1390
00:56:48,880 --> 00:56:51,760
can place the player anywhere and if i

1391
00:56:50,719 --> 00:56:59,838
can't

1392
00:56:51,760 --> 00:56:59,839
i just move outward from there

1393
00:57:08,159 --> 00:57:13,838
i'm just really not sure about that

1394
00:57:19,679 --> 00:57:23,039
so here's what we're going to do for

1395
00:57:20,880 --> 00:57:26,400
starters just because

1396
00:57:23,039 --> 00:57:27,279
um because i don't really want to think

1397
00:57:26,400 --> 00:57:28,880
about it too much

1398
00:57:27,280 --> 00:57:30,400
until i actually have something working

1399
00:57:28,880 --> 00:57:32,240
i can play with it

1400
00:57:30,400 --> 00:57:34,160
so what i'm going to do first is i'm

1401
00:57:32,239 --> 00:57:35,199
just going to say okay there's a voxel

1402
00:57:34,159 --> 00:57:38,399
dim

1403
00:57:35,199 --> 00:57:55,519
here uh and

1404
00:57:38,400 --> 00:57:58,798
and it's maybe more like this

1405
00:57:55,519 --> 00:57:59,440
uh and i just want a voxel occupancy

1406
00:57:58,798 --> 00:58:00,798
like uh

1407
00:57:59,440 --> 00:58:03,200
a thing that basically says like could

1408
00:58:00,798 --> 00:58:07,358
you stand here or not right

1409
00:58:03,199 --> 00:58:10,480
so there's like a uh

1410
00:58:07,358 --> 00:58:13,759
a vacant you know what i mean

1411
00:58:10,480 --> 00:58:16,798
um and i want that to literally be

1412
00:58:13,760 --> 00:58:18,079
whatever the va to be voxel addressable

1413
00:58:16,798 --> 00:58:20,318
so we just have a little thing that's

1414
00:58:18,079 --> 00:58:22,798
going to say where everything

1415
00:58:20,318 --> 00:58:24,318
is or isn't right so when we come

1416
00:58:22,798 --> 00:58:27,440
through here i need to first

1417
00:58:24,318 --> 00:58:30,558
say like hey uh this

1418
00:58:27,440 --> 00:58:32,480
better not be the one i'm actually on

1419
00:58:30,559 --> 00:58:33,599
so like test entity had better not be

1420
00:58:32,480 --> 00:58:36,559
equal to entity

1421
00:58:33,599 --> 00:58:37,920
right but assuming that they're not then

1422
00:58:36,559 --> 00:58:39,760
we'll go through here

1423
00:58:37,920 --> 00:58:41,920
and take a look at them you know what

1424
00:58:39,760 --> 00:58:45,359
i'm saying

1425
00:58:41,920 --> 00:58:47,200
okay uh and then what i wanna do

1426
00:58:45,358 --> 00:58:48,880
is for each of these we're gonna take a

1427
00:58:47,199 --> 00:58:51,679
look and we're just gonna test

1428
00:58:48,880 --> 00:58:53,519
the place in the voxel that we are so

1429
00:58:51,679 --> 00:58:54,318
wherever the voxel location is we're

1430
00:58:53,519 --> 00:58:57,119
actually at

1431
00:58:54,318 --> 00:58:58,000
we're just going to test that voxel and

1432
00:58:57,119 --> 00:59:00,798
i want to

1433
00:58:58,000 --> 00:59:01,838
make this an iterator so like i want a

1434
00:59:00,798 --> 00:59:05,759
voxel

1435
00:59:01,838 --> 00:59:11,199
iterator um here actually

1436
00:59:05,760 --> 00:59:11,200
and so i want to make this thing be

1437
00:59:16,239 --> 00:59:19,598
something like that probably so that i

1438
00:59:19,199 --> 00:59:21,838
can

1439
00:59:19,599 --> 00:59:23,039
roll this in so there's a thing that

1440
00:59:21,838 --> 00:59:26,880
looks

1441
00:59:23,039 --> 00:59:26,880
like uh

1442
00:59:27,280 --> 00:59:33,839
iterate foxhole um

1443
00:59:35,599 --> 00:59:38,798
this kind of thing you know i'm talking

1444
00:59:44,838 --> 00:59:47,838
about

1445
00:59:51,358 --> 00:59:55,358
so all i want to do is exactly this so

1446
00:59:54,400 --> 00:59:58,639
i'm going to grab

1447
00:59:55,358 --> 01:00:02,798
the while loop condition and i'm going

1448
00:59:58,639 --> 01:00:02,798
to make that be the thing i return

1449
01:00:03,039 --> 01:00:09,519
uh and i'm gonna return the

1450
01:00:06,639 --> 01:00:10,798
this condition as whether or not we're

1451
01:00:09,519 --> 01:00:13,920
still iterating

1452
01:00:10,798 --> 01:00:15,519
for advance it's literally just this the

1453
01:00:13,920 --> 01:00:19,519
code we already wrote

1454
01:00:15,519 --> 01:00:22,960
right um and then for

1455
01:00:19,519 --> 01:00:25,280
starting and this is all just

1456
01:00:22,960 --> 01:00:25,280
you know

1457
01:00:26,838 --> 01:00:29,838
oops

1458
01:00:32,480 --> 01:00:36,000
uh and all this is just going to be

1459
01:00:33,838 --> 01:00:39,199
whether it's the i or the dim

1460
01:00:36,000 --> 01:00:41,358
right so here we've got you know the i

1461
01:00:39,199 --> 01:00:42,960
is the thing that's in each of the left

1462
01:00:41,358 --> 01:00:44,880
sides and the dim

1463
01:00:42,960 --> 01:00:46,079
is the thing that's in each of the right

1464
01:00:44,880 --> 01:00:48,960
sides

1465
01:00:46,079 --> 01:00:50,480
now we don't actually need this thing to

1466
01:00:48,960 --> 01:00:51,440
record the dimension because it's

1467
01:00:50,480 --> 01:00:53,920
duplicative

1468
01:00:51,440 --> 01:00:55,440
so you could choose to just not have

1469
01:00:53,920 --> 01:00:57,440
that right

1470
01:00:55,440 --> 01:00:58,720
and to do that we would just say

1471
01:00:57,440 --> 01:01:01,440
something like this

1472
01:00:58,719 --> 01:01:03,279
which seems plausible to me so that now

1473
01:01:01,440 --> 01:01:06,880
it's just that

1474
01:01:03,280 --> 01:01:09,200
um and

1475
01:01:06,880 --> 01:01:10,720
that seems fine you could even go one

1476
01:01:09,199 --> 01:01:11,679
further and say we don't even have a

1477
01:01:10,719 --> 01:01:14,159
type for it

1478
01:01:11,679 --> 01:01:15,519
it's just iterate voxel and it returns a

1479
01:01:14,159 --> 01:01:18,839
v3s

1480
01:01:15,519 --> 01:01:20,960
right which would be kind of nice um

1481
01:01:18,840 --> 01:01:23,838
[Music]

1482
01:01:20,960 --> 01:01:26,240
but who knows like i don't know maybe we

1483
01:01:23,838 --> 01:01:27,838
want this to be fancier so for now i'm

1484
01:01:26,239 --> 01:01:30,558
just going to do it this way

1485
01:01:27,838 --> 01:01:31,199
and be fancy but we don't really need

1486
01:01:30,559 --> 01:01:32,880
that so

1487
01:01:31,199 --> 01:01:34,480
i don't know if we'll you know i don't

1488
01:01:32,880 --> 01:01:38,318
know if maybe we'll simplify it

1489
01:01:34,480 --> 01:01:41,280
later on um okay so

1490
01:01:38,318 --> 01:01:42,239
supposing we do this uh the voxel this

1491
01:01:41,280 --> 01:01:46,559
part here

1492
01:01:42,239 --> 01:01:49,279
is just literally just dim uh

1493
01:01:46,559 --> 01:01:51,119
and zero we can have an offset but i'm

1494
01:01:49,280 --> 01:01:53,040
not going to have one at the moment

1495
01:01:51,119 --> 01:01:54,640
uh so here we're just gonna say iterate

1496
01:01:53,039 --> 01:01:56,480
voxel and you pass in the dimension it

1497
01:01:54,639 --> 01:01:59,519
remembers the dimension and sets the

1498
01:01:56,480 --> 01:02:01,519
initial thing to zero like this uh

1499
01:01:59,519 --> 01:02:02,798
and off we go so that's the voxel

1500
01:02:01,519 --> 01:02:06,159
iterator and in here

1501
01:02:02,798 --> 01:02:10,400
we would now do a for loop voxel

1502
01:02:06,159 --> 01:02:14,399
iterator vox i equals

1503
01:02:10,400 --> 01:02:17,760
or voxhitter or something iterate voxel

1504
01:02:14,400 --> 01:02:18,480
it's going to take the voxel dim and off

1505
01:02:17,760 --> 01:02:21,760
we go now

1506
01:02:18,480 --> 01:02:24,240
also those are all s's right yeah so

1507
01:02:21,760 --> 01:02:25,839
we pass that in there and then we just

1508
01:02:24,239 --> 01:02:30,639
have an is valid

1509
01:02:25,838 --> 01:02:30,639
voxitter and an advance

1510
01:02:32,719 --> 01:02:36,639
or next in order maybe

1511
01:02:39,358 --> 01:02:42,078
maybe it should be

1512
01:02:46,159 --> 01:02:50,078
um and so this is just we'll march

1513
01:02:48,480 --> 01:02:54,559
through the voxel in order

1514
01:02:50,079 --> 01:02:59,359
and do what we wanted to do so

1515
01:02:54,559 --> 01:02:59,359
i think that's all we need

1516
01:02:59,519 --> 01:03:03,838
uh and now we're iterating over all the

1517
01:03:01,599 --> 01:03:06,400
pieces of the voxel and

1518
01:03:03,838 --> 01:03:07,599
we can then say that as we loop through

1519
01:03:06,400 --> 01:03:10,720
here

1520
01:03:07,599 --> 01:03:13,359
what we could do is say that the thing

1521
01:03:10,719 --> 01:03:14,798
is uh and you know what maybe we'll do

1522
01:03:13,358 --> 01:03:16,318
occupied instead

1523
01:03:14,798 --> 01:03:19,519
so everything it defaults to not

1524
01:03:16,318 --> 01:03:21,920
occupied uh if we find somebody who is

1525
01:03:19,519 --> 01:03:24,559
occupying it in here we just set that

1526
01:03:21,920 --> 01:03:28,079
right so if someone's occupying it

1527
01:03:24,559 --> 01:03:30,960
um we would set voxiter uh

1528
01:03:28,079 --> 01:03:31,599
i z it doesn't really matter which way

1529
01:03:30,960 --> 01:03:35,199
we do this

1530
01:03:31,599 --> 01:03:38,400
but you know x y and z

1531
01:03:35,199 --> 01:03:38,879
so we want the occupied uh to be set to

1532
01:03:38,400 --> 01:03:41,119
true

1533
01:03:38,880 --> 01:03:41,920
and we can also stop because then we've

1534
01:03:41,119 --> 01:03:46,400
found

1535
01:03:41,920 --> 01:03:46,400
out that you can't stand there right

1536
01:03:47,119 --> 01:03:50,480
so i want to do something like that uh

1537
01:03:49,599 --> 01:03:51,920
where we test

1538
01:03:50,480 --> 01:03:53,760
and and here is where we would do the

1539
01:03:51,920 --> 01:03:57,119
test so like if

1540
01:03:53,760 --> 01:04:00,960
you know the overlap test uh

1541
01:03:57,119 --> 01:04:03,599
on this piece of the voxel corner um

1542
01:04:00,960 --> 01:04:05,599
off we would go finally we will step

1543
01:04:03,599 --> 01:04:08,559
through the voxel a second time

1544
01:04:05,599 --> 01:04:10,160
so just a two pass algorithm where now

1545
01:04:08,559 --> 01:04:14,798
we will look to see

1546
01:04:10,159 --> 01:04:14,798
and uh what i want to do here is

1547
01:04:15,519 --> 01:04:19,038
step through the voxel at one less

1548
01:04:17,679 --> 01:04:21,440
dimension

1549
01:04:19,039 --> 01:04:23,039
so what i want to do is i want to step

1550
01:04:21,440 --> 01:04:27,039
through the voxel dim

1551
01:04:23,039 --> 01:04:30,079
minus one right

1552
01:04:27,039 --> 01:04:31,200
uh so i'm just gonna now so so before i

1553
01:04:30,079 --> 01:04:34,798
was looking through like

1554
01:04:31,199 --> 01:04:37,279
voxel positions right uh and now

1555
01:04:34,798 --> 01:04:38,798
i want to so like one way to think about

1556
01:04:37,280 --> 01:04:42,798
it is i wanted to step over

1557
01:04:38,798 --> 01:04:45,519
vertices here and now i'm stepping over

1558
01:04:42,798 --> 01:04:47,440
cells here so i want there to be one

1559
01:04:45,519 --> 01:04:48,960
vertex

1560
01:04:47,440 --> 01:04:51,760
on like the other side of what i'm

1561
01:04:48,960 --> 01:04:51,760
looking at right

1562
01:04:52,639 --> 01:04:56,318
and so then what i can do is i can just

1563
01:04:54,559 --> 01:05:00,160
see uh

1564
01:04:56,318 --> 01:05:01,119
are is this voxel completely unoccupied

1565
01:05:00,159 --> 01:05:03,358
and if it is

1566
01:05:01,119 --> 01:05:05,599
i'll just take the closest point inside

1567
01:05:03,358 --> 01:05:06,159
it and treat that as a new valid

1568
01:05:05,599 --> 01:05:09,200
position

1569
01:05:06,159 --> 01:05:23,838
and if not i won't right and that's all

1570
01:05:09,199 --> 01:05:23,838
i was gonna do

1571
01:05:32,159 --> 01:05:35,279
someone on the chat asked can the amount

1572
01:05:33,679 --> 01:05:36,239
of time the entering second hour notice

1573
01:05:35,280 --> 01:05:40,960
be displayed

1574
01:05:36,239 --> 01:05:44,078
can it be adjusted um yeah

1575
01:05:40,960 --> 01:05:46,318
it can be adjusted in c tray right i

1576
01:05:44,079 --> 01:05:46,318
think

1577
01:05:48,838 --> 01:05:53,838
um

1578
01:05:51,838 --> 01:05:55,279
to be honest i don't really remember

1579
01:05:53,838 --> 01:05:58,558
anything about this program

1580
01:05:55,280 --> 01:06:01,839
when i wrote it but

1581
01:05:58,559 --> 01:06:05,039
uh it it does have a

1582
01:06:01,838 --> 01:06:07,358
thing in there that that determines

1583
01:06:05,039 --> 01:06:09,520
whether or not it's going to show that

1584
01:06:07,358 --> 01:06:13,358
um

1585
01:06:09,519 --> 01:06:15,440
so it looks like it displays it for one

1586
01:06:13,358 --> 01:06:19,038
minute

1587
01:06:15,440 --> 01:06:20,159
so if you wanted to change you know

1588
01:06:19,039 --> 01:06:22,079
if you were building this program

1589
01:06:20,159 --> 01:06:24,879
yourself and you wanted to change it

1590
01:06:22,079 --> 01:06:25,599
this else statement uh would be what you

1591
01:06:24,880 --> 01:06:28,079
would change

1592
01:06:25,599 --> 01:06:29,440
right and arguably if you want to start

1593
01:06:28,079 --> 01:06:31,599
doing cool stuff here you could just

1594
01:06:29,440 --> 01:06:33,119
make an array of ranges so rather than

1595
01:06:31,599 --> 01:06:34,798
doing in minute you could do something

1596
01:06:33,119 --> 01:06:36,160
like is it between here and here and

1597
01:06:34,798 --> 01:06:38,400
then you just make like a range and you

1598
01:06:36,159 --> 01:06:42,480
know set whatever you want

1599
01:06:38,400 --> 01:06:44,559
so you can fuss with that if you want to

1600
01:06:42,480 --> 01:06:46,079
you can also just change this routine if

1601
01:06:44,559 --> 01:06:48,400
you want everything to display

1602
01:06:46,079 --> 01:06:50,318
longer you can just change file time

1603
01:06:48,400 --> 01:06:52,000
minute to two times file time minute or

1604
01:06:50,318 --> 01:06:53,279
ten times file time minute or whatever

1605
01:06:52,000 --> 01:06:56,159
however many

1606
01:06:53,280 --> 01:06:58,319
minutes you want display for you could

1607
01:06:56,159 --> 01:07:01,838
do

1608
01:06:58,318 --> 01:07:05,920
so so there's that uh but yeah anyway

1609
01:07:01,838 --> 01:07:05,920
um so back to our story

1610
01:07:06,639 --> 01:07:12,159
um yeah so

1611
01:07:10,079 --> 01:07:14,400
in here what i want to do is just say

1612
01:07:12,159 --> 01:07:17,920
look if all of these are

1613
01:07:14,400 --> 01:07:21,119
so so if i were to just like take all of

1614
01:07:17,920 --> 01:07:21,119
the occupieds

1615
01:07:21,920 --> 01:07:28,798
um and just do a big munge so like

1616
01:07:25,199 --> 01:07:29,079
if not

1617
01:07:28,798 --> 01:07:32,199
uh

1618
01:07:29,079 --> 01:07:32,199
[Music]

1619
01:07:36,719 --> 01:07:45,679
like so

1620
01:07:42,079 --> 01:07:46,810
and i said like vox spitter i

1621
01:07:45,679 --> 01:07:48,798
uh z

1622
01:07:46,809 --> 01:07:52,639
[Music]

1623
01:07:48,798 --> 01:07:54,960
bloop bloop um so if we were to just

1624
01:07:52,639 --> 01:07:56,558
check like all of these booleans

1625
01:07:54,960 --> 01:07:59,599
and and again there's gonna be like a

1626
01:07:56,559 --> 01:08:01,920
better way to do this um

1627
01:07:59,599 --> 01:08:03,359
then we're doing it but again i'm just

1628
01:08:01,920 --> 01:08:05,200
sketching out the routine

1629
01:08:03,358 --> 01:08:07,679
i'm not thinking about optimization god

1630
01:08:05,199 --> 01:08:08,879
i wish the indentation in four coder

1631
01:08:07,679 --> 01:08:12,798
would be fixed

1632
01:08:08,880 --> 01:08:16,400
i do not know it used to work it broke

1633
01:08:12,798 --> 01:08:18,479
and it seems to not be like

1634
01:08:16,399 --> 01:08:19,599
going to be fixed for some reason which

1635
01:08:18,479 --> 01:08:21,519
is weird

1636
01:08:19,600 --> 01:08:24,159
because how that doesn't drive people

1637
01:08:21,520 --> 01:08:27,520
crazy i have no idea

1638
01:08:24,158 --> 01:08:30,479
um so looking in here

1639
01:08:27,520 --> 01:08:31,759
like if we look at what's happening we

1640
01:08:30,479 --> 01:08:38,318
could just like

1641
01:08:31,759 --> 01:08:40,000
smush these together um

1642
01:08:38,319 --> 01:08:41,920
there's going to be eight of them right

1643
01:08:40,000 --> 01:08:44,079
because it's the vertices of a

1644
01:08:41,920 --> 01:08:45,759
of a cube well it's not necessarily a

1645
01:08:44,079 --> 01:08:49,119
cube it's a vertices of a

1646
01:08:45,759 --> 01:08:50,640
of an axis-aligned uh bounding box

1647
01:08:49,119 --> 01:08:54,000
effectively

1648
01:08:50,640 --> 01:08:56,640
uh but we would gather up a bunch of

1649
01:08:54,000 --> 01:09:01,119
booleans and smush them all together or

1650
01:08:56,640 --> 01:09:05,359
uh and we would then know like look

1651
01:09:01,119 --> 01:09:08,640
if there's nobody occupying um

1652
01:09:05,359 --> 01:09:11,759
this whole set so if nobody's occupying

1653
01:09:08,640 --> 01:09:14,798
anything in here right

1654
01:09:11,759 --> 01:09:17,838
uh then i'm free to place the player

1655
01:09:14,798 --> 01:09:21,838
at the closest point uh

1656
01:09:17,838 --> 01:09:24,158
in this in this region

1657
01:09:21,838 --> 01:09:24,158
and

1658
01:09:27,520 --> 01:09:31,040
this function is the is what would do

1659
01:09:29,920 --> 01:09:34,319
that

1660
01:09:31,039 --> 01:09:34,880
right so if we said what's the closest

1661
01:09:34,319 --> 01:09:36,960
point

1662
01:09:34,880 --> 01:09:38,640
to the thing in this box well we can

1663
01:09:36,960 --> 01:09:40,239
make the box

1664
01:09:38,640 --> 01:09:42,079
uh and we can get the closest point

1665
01:09:40,238 --> 01:09:43,759
which as you can see is a trivial

1666
01:09:42,079 --> 01:09:45,119
operation right you're just min maxing

1667
01:09:43,759 --> 01:09:48,479
it right

1668
01:09:45,119 --> 01:09:50,000
um and off we go you don't have to

1669
01:09:48,479 --> 01:09:50,479
virtual white space neighborhood or is

1670
01:09:50,000 --> 01:09:52,319
that the way

1671
01:09:50,479 --> 01:09:54,718
yeah i couldn't really get virtual white

1672
01:09:52,319 --> 01:09:56,960
space to work right when i tried

1673
01:09:54,719 --> 01:09:58,640
so i just gave up on it like it had

1674
01:09:56,960 --> 01:10:00,000
trouble with like comments and it had

1675
01:09:58,640 --> 01:10:02,239
trouble and i had trouble with a lot of

1676
01:10:00,000 --> 01:10:05,600
things so i just like forget it

1677
01:10:02,238 --> 01:10:07,599
um but

1678
01:10:05,600 --> 01:10:09,039
uh so i'm just using the regular but i

1679
01:10:07,600 --> 01:10:10,079
but i would like indentation to work

1680
01:10:09,039 --> 01:10:13,679
properly right

1681
01:10:10,079 --> 01:10:13,679
um if that makes sense

1682
01:10:14,238 --> 01:10:17,279
uh so all i want to do is say get

1683
01:10:15,679 --> 01:10:20,399
closest point in box

1684
01:10:17,279 --> 01:10:24,559
uh to to this so

1685
01:10:20,399 --> 01:10:26,479
i want to put it in the 2p place

1686
01:10:24,560 --> 01:10:28,000
so i want to get the closest point in

1687
01:10:26,479 --> 01:10:31,039
this cell

1688
01:10:28,000 --> 01:10:34,800
this voxel region and

1689
01:10:31,039 --> 01:10:37,279
uh that's going to be my test point

1690
01:10:34,800 --> 01:10:37,920
and then i just want to do like look if

1691
01:10:37,279 --> 01:10:40,559
the

1692
01:10:37,920 --> 01:10:45,279
do i have a distance squared yeah or no

1693
01:10:40,560 --> 01:10:48,400
i don't

1694
01:10:45,279 --> 01:10:51,759
all right so if the distance between

1695
01:10:48,399 --> 01:10:53,198
um the test point

1696
01:10:51,760 --> 01:10:54,719
and and i guess what i should probably

1697
01:10:53,198 --> 01:10:56,000
do here is just have a best distance

1698
01:10:54,719 --> 01:10:56,880
squared so now i think about it up i'll

1699
01:10:56,000 --> 01:11:00,800
probably just do this

1700
01:10:56,880 --> 01:11:02,319
like a test dist squared so if i take

1701
01:11:00,800 --> 01:11:05,440
the squared length

1702
01:11:02,319 --> 01:11:07,679
uh from the test point um

1703
01:11:05,439 --> 01:11:08,719
to where i'm trying to go which is the

1704
01:11:07,679 --> 01:11:10,960
2p that's

1705
01:11:08,719 --> 01:11:12,158
that's the like i'm going to say how far

1706
01:11:10,960 --> 01:11:13,439
is it from

1707
01:11:12,158 --> 01:11:15,439
the point that i'm actually trying to

1708
01:11:13,439 --> 01:11:18,639
get to

1709
01:11:15,439 --> 01:11:19,759
if my best distance squared so far is

1710
01:11:18,640 --> 01:11:22,880
greater than that

1711
01:11:19,760 --> 01:11:23,520
then i want the new one so i want my

1712
01:11:22,880 --> 01:11:25,440
best p

1713
01:11:23,520 --> 01:11:28,239
to be test p you've seen me do this type

1714
01:11:25,439 --> 01:11:30,879
this code a thousand times

1715
01:11:28,238 --> 01:11:32,238
so we'll just keep that one as our new

1716
01:11:30,880 --> 01:11:33,760
best point

1717
01:11:32,238 --> 01:11:36,000
so here we're going to have our best

1718
01:11:33,760 --> 01:11:36,800
distance squared our best distance

1719
01:11:36,000 --> 01:11:39,679
squared

1720
01:11:36,800 --> 01:11:40,000
um from the test point is going to be

1721
01:11:39,679 --> 01:11:45,119
our

1722
01:11:40,000 --> 01:11:45,119
current point probably i would say right

1723
01:11:52,319 --> 01:11:55,039
well that'd be only if it was in there

1724
01:11:53,359 --> 01:11:57,599
so no i'm just going to say this is f32

1725
01:11:55,039 --> 01:11:57,600
max for now

1726
01:11:58,238 --> 01:12:01,839
uh and then i'm going to say our best p

1727
01:11:59,840 --> 01:12:05,760
is where we're standing

1728
01:12:01,840 --> 01:12:07,679
right and so and and maybe we should

1729
01:12:05,760 --> 01:12:08,800
change this maybe we should be like if

1730
01:12:07,679 --> 01:12:10,399
you can't find

1731
01:12:08,800 --> 01:12:11,840
anywhere to put the thing then the

1732
01:12:10,399 --> 01:12:15,119
player just goes wherever they want

1733
01:12:11,840 --> 01:12:15,760
right you can see why that might be

1734
01:12:15,119 --> 01:12:17,679
safer

1735
01:12:15,760 --> 01:12:20,079
like if the player just gets stuck in

1736
01:12:17,679 --> 01:12:21,440
some crazy out of bounds scenario just

1737
01:12:20,079 --> 01:12:24,000
let them be in god mode

1738
01:12:21,439 --> 01:12:25,519
so they can get themselves the heck out

1739
01:12:24,000 --> 01:12:29,679
plus speedrunners

1740
01:12:25,520 --> 01:12:29,679
right this is the stuff they live for

1741
01:12:34,560 --> 01:12:40,080
you know what i'm saying um

1742
01:12:38,000 --> 01:12:41,840
so yeah so maybe we default to saying

1743
01:12:40,079 --> 01:12:43,198
entities can do the move they were

1744
01:12:41,840 --> 01:12:43,840
trying to do of course this doesn't

1745
01:12:43,198 --> 01:12:44,960
really help them

1746
01:12:43,840 --> 01:12:46,960
well would help for the glove i'm

1747
01:12:44,960 --> 01:12:49,039
thinking like the player moves on the

1748
01:12:46,960 --> 01:12:50,319
squares they can't they don't run this

1749
01:12:49,039 --> 01:12:53,279
through this routine but

1750
01:12:50,319 --> 01:12:54,799
you get the idea so uh speedrunners

1751
01:12:53,279 --> 01:12:55,119
you're welcome so this will be like if

1752
01:12:54,800 --> 01:12:58,719
we

1753
01:12:55,119 --> 01:13:01,760
can't find any legal place to put you

1754
01:12:58,719 --> 01:13:02,560
in the vicinity uh we just let you do

1755
01:13:01,760 --> 01:13:04,640
the move

1756
01:13:02,560 --> 01:13:06,960
and that way you can't get something

1757
01:13:04,640 --> 01:13:08,800
stuck uh permanently

1758
01:13:06,960 --> 01:13:11,039
it'll it'll be able to get out somehow

1759
01:13:08,800 --> 01:13:13,119
right

1760
01:13:11,039 --> 01:13:14,880
okay so we go through here we test we

1761
01:13:13,119 --> 01:13:17,039
see if we find a place if we do

1762
01:13:14,880 --> 01:13:20,079
uh then we use that and then at the end

1763
01:13:17,039 --> 01:13:23,198
we just say all right so the result here

1764
01:13:20,079 --> 01:13:24,960
is that the entities uh gets placed at

1765
01:13:23,198 --> 01:13:28,158
the best location

1766
01:13:24,960 --> 01:13:31,439
that we can find and you continue onward

1767
01:13:28,158 --> 01:13:32,799
right so very straightforward this

1768
01:13:31,439 --> 01:13:35,839
is complaining i don't know what it's

1769
01:13:32,800 --> 01:13:35,840
complaining about

1770
01:13:37,920 --> 01:13:41,440
to be completely honest with you uh so i

1771
01:13:40,079 --> 01:13:45,600
don't know what's going on there

1772
01:13:41,439 --> 01:13:47,599
uh oh that is wrong uh

1773
01:13:45,600 --> 01:13:49,520
so i'm really in the habit of typing v3s

1774
01:13:47,600 --> 01:13:50,880
because of starcode galaxy there are no

1775
01:13:49,520 --> 01:13:51,840
floating point things in the beginner

1776
01:13:50,880 --> 01:13:54,159
course

1777
01:13:51,840 --> 01:13:57,600
so i'm very used to it's like my brain

1778
01:13:54,158 --> 01:13:57,599
is not thinking of v3s at all

1779
01:13:57,679 --> 01:14:00,719
um so we just need to produce this cell

1780
01:14:00,319 --> 01:14:03,198
and

1781
01:14:00,719 --> 01:14:04,079
that's not particularly difficult

1782
01:14:03,198 --> 01:14:05,359
obviously

1783
01:14:04,079 --> 01:14:08,079
because we know that that's just going

1784
01:14:05,359 --> 01:14:11,439
to be whatever our voxel bounds are

1785
01:14:08,079 --> 01:14:14,640
plus an offset right so the cell

1786
01:14:11,439 --> 01:14:18,238
in this case uh is

1787
01:14:14,640 --> 01:14:22,079
just gonna be a rectangle three

1788
01:14:18,238 --> 01:14:25,359
um which is a rectman dim probably

1789
01:14:22,079 --> 01:14:28,719
where we take them in we offset by

1790
01:14:25,359 --> 01:14:31,839
the voxhitter eye

1791
01:14:28,719 --> 01:14:34,480
right um and

1792
01:14:31,840 --> 01:14:36,239
times the cell dim and that's just going

1793
01:14:34,479 --> 01:14:38,319
to place us in the right place

1794
01:14:36,238 --> 01:14:39,519
and then we have the cell dim itself as

1795
01:14:38,319 --> 01:14:44,399
the dimension

1796
01:14:39,520 --> 01:14:44,400
so the cell should be pretty easy to get

1797
01:14:44,560 --> 01:14:49,520
and off we would go this is supposed to

1798
01:14:46,079 --> 01:14:51,279
be a minus don't ask me why it wasn't

1799
01:14:49,520 --> 01:14:53,520
and now iterate voxel seems to be

1800
01:14:51,279 --> 01:14:57,599
complaining what's it complaining about

1801
01:14:53,520 --> 01:14:59,600
we have a voxel dim here which is a v3s

1802
01:14:57,600 --> 01:15:00,719
and we're subtracting one one one from

1803
01:14:59,600 --> 01:15:03,920
it i'm not sure

1804
01:15:00,719 --> 01:15:05,600
why that would be complaining um

1805
01:15:03,920 --> 01:15:08,840
it returns a voxel iter so that's a

1806
01:15:05,600 --> 01:15:10,000
little bit weird what's the actual

1807
01:15:08,840 --> 01:15:24,400
warning

1808
01:15:10,000 --> 01:15:27,679
oh what

1809
01:15:24,399 --> 01:15:27,679
is that just because of this

1810
01:15:29,520 --> 01:15:33,600
okay so the fact that there was a

1811
01:15:32,238 --> 01:15:35,678
placeholder in there was causing the

1812
01:15:33,600 --> 01:15:37,840
compiler to not realize that this

1813
01:15:35,679 --> 01:15:40,000
had been closed at that time so it was

1814
01:15:37,840 --> 01:15:41,279
thinking i was like voxitter only exists

1815
01:15:40,000 --> 01:15:43,520
inside this for loop scope it's

1816
01:15:41,279 --> 01:15:46,639
definitely not being shadowed

1817
01:15:43,520 --> 01:15:47,120
but okay so if we basically say that

1818
01:15:46,640 --> 01:15:48,960
look

1819
01:15:47,119 --> 01:15:50,719
we're going to run this in a not really

1820
01:15:48,960 --> 01:15:52,480
real way

1821
01:15:50,719 --> 01:15:54,319
but i want to test it in waves because

1822
01:15:52,479 --> 01:15:55,839
we've got a bunch of complexity here

1823
01:15:54,319 --> 01:15:57,198
this is going to test all the voxel

1824
01:15:55,840 --> 01:15:59,199
cells and it's going to put you in the

1825
01:15:57,198 --> 01:16:00,879
closest point in a particular cell to

1826
01:15:59,198 --> 01:16:01,678
where you were trying to go if that cell

1827
01:16:00,880 --> 01:16:03,279
was empty

1828
01:16:01,679 --> 01:16:05,520
what i want to do is just leave all the

1829
01:16:03,279 --> 01:16:07,119
cells empty right now so it should in

1830
01:16:05,520 --> 01:16:10,960
general

1831
01:16:07,119 --> 01:16:12,719
uh just this should

1832
01:16:10,960 --> 01:16:14,399
we want to get this working first

1833
01:16:12,719 --> 01:16:15,679
because if this doesn't work we already

1834
01:16:14,399 --> 01:16:16,879
have a bug before we ever do any

1835
01:16:15,679 --> 01:16:18,480
collision detection right

1836
01:16:16,880 --> 01:16:20,079
we're we're just trying to say like you

1837
01:16:18,479 --> 01:16:22,479
should be able to move inside the cell

1838
01:16:20,079 --> 01:16:23,920
that you're in um and whatever and so

1839
01:16:22,479 --> 01:16:25,839
you can now see like okay

1840
01:16:23,920 --> 01:16:27,600
everyone's moving freely which is what

1841
01:16:25,840 --> 01:16:28,960
we would expect they can penetrate

1842
01:16:27,600 --> 01:16:30,480
directly through things they don't have

1843
01:16:28,960 --> 01:16:31,840
to stop which is exactly what we expect

1844
01:16:30,479 --> 01:16:33,678
because we're not testing anything

1845
01:16:31,840 --> 01:16:35,199
so that means this is probably working

1846
01:16:33,679 --> 01:16:36,640
okay we don't know for sure but at least

1847
01:16:35,198 --> 01:16:37,439
i'm just you know bringing it up in

1848
01:16:36,640 --> 01:16:39,760
waves

1849
01:16:37,439 --> 01:16:42,000
so that we kind of have a reasonable

1850
01:16:39,760 --> 01:16:44,719
idea of what's going on

1851
01:16:42,000 --> 01:16:46,960
one step at a time so now all we have to

1852
01:16:44,719 --> 01:16:48,800
do is test these corners

1853
01:16:46,960 --> 01:16:50,399
so we can you know determine whether or

1854
01:16:48,800 --> 01:16:53,199
not something's in there or not

1855
01:16:50,399 --> 01:16:54,960
um uh and so this should be pretty

1856
01:16:53,198 --> 01:16:57,359
straightforward it's just a point test

1857
01:16:54,960 --> 01:17:00,319
so it's just a point in box test

1858
01:16:57,359 --> 01:17:01,599
we are going to grow this uh minkowski

1859
01:17:00,319 --> 01:17:04,559
diameter here

1860
01:17:01,600 --> 01:17:06,800
and see like can can the player's cube

1861
01:17:04,560 --> 01:17:08,400
or can the collision cube standard now

1862
01:17:06,800 --> 01:17:09,440
this is going to get more complicated

1863
01:17:08,399 --> 01:17:11,039
and the reason that this is going to get

1864
01:17:09,439 --> 01:17:12,399
more complicated is that in the future i

1865
01:17:11,039 --> 01:17:13,519
think we probably want cylinders so

1866
01:17:12,399 --> 01:17:14,559
we're going to have more of a cylinder

1867
01:17:13,520 --> 01:17:17,199
cylinder

1868
01:17:14,560 --> 01:17:18,400
uh collision test here or you know other

1869
01:17:17,198 --> 01:17:21,439
things like that

1870
01:17:18,399 --> 01:17:23,839
so we're going to want this to be more

1871
01:17:21,439 --> 01:17:25,198
uh flexible than it is because we're

1872
01:17:23,840 --> 01:17:26,319
going to want at least a few different

1873
01:17:25,198 --> 01:17:28,079
permutations

1874
01:17:26,319 --> 01:17:30,079
cylinder we're probably going to want

1875
01:17:28,079 --> 01:17:32,880
cylinder cylinder cylinder box

1876
01:17:30,079 --> 01:17:32,880
and box box

1877
01:17:35,198 --> 01:17:37,439
right

1878
01:17:39,520 --> 01:17:45,840
so that's presumably what we're going to

1879
01:17:40,640 --> 01:17:45,840
want there um

1880
01:17:50,238 --> 01:17:55,439
okay so here's us taking

1881
01:17:55,520 --> 01:18:02,159
here's us doing stuff for no reason

1882
01:17:58,880 --> 01:18:02,159
uh is what we're actually doing

1883
01:18:06,000 --> 01:18:09,679
you know i might take a quick break uh

1884
01:18:08,399 --> 01:18:10,399
actually because we've been going a

1885
01:18:09,679 --> 01:18:11,840
while here

1886
01:18:10,399 --> 01:18:15,439
we've been going god how long have we

1887
01:18:11,840 --> 01:18:16,800
been going i might get some more water

1888
01:18:15,439 --> 01:18:18,879
well this is actually lemonade full

1889
01:18:16,800 --> 01:18:20,640
disclosure uh

1890
01:18:18,880 --> 01:18:27,840
i'm gonna take a quick break i'll be

1891
01:18:20,640 --> 01:18:27,840
right back

1892
01:18:38,840 --> 01:20:20,829
oh

1893
01:18:40,130 --> 01:20:23,899
[Music]

1894
01:20:20,829 --> 01:20:23,899
[Applause]

1895
01:20:25,800 --> 01:20:55,599
[Music]

1896
01:20:58,840 --> 01:21:01,840
be

1897
01:21:12,840 --> 01:22:10,949
foreign

1898
01:21:14,859 --> 01:22:10,948
[Music]

1899
01:22:12,238 --> 01:22:14,559
all right

1900
01:22:18,158 --> 01:22:24,079
water has been refilled so we started it

1901
01:22:22,840 --> 01:22:27,279
like

1902
01:22:24,079 --> 01:22:30,719
started two and a half hours ago

1903
01:22:27,279 --> 01:22:33,599
i gotta talk more quietly so i don't

1904
01:22:30,719 --> 01:22:34,319
don't get my voice too going all right

1905
01:22:33,600 --> 01:22:37,520
okay

1906
01:22:34,319 --> 01:22:42,639
um hopefully everyone enjoyed that brief

1907
01:22:37,520 --> 01:22:42,639
peppy peppy song

1908
01:22:49,039 --> 01:22:54,000
all right um so this all seems fine

1909
01:22:52,319 --> 01:22:55,920
and so all we really need to do now is

1910
01:22:54,000 --> 01:22:57,119
to just do an overlap test here

1911
01:22:55,920 --> 01:22:58,960
where we take a look at that collision

1912
01:22:57,119 --> 01:23:00,399
volume

1913
01:22:58,960 --> 01:23:02,480
and we make sure we know what's going on

1914
01:23:00,399 --> 01:23:03,279
here so you can see here we do a

1915
01:23:02,479 --> 01:23:07,599
relative like

1916
01:23:03,279 --> 01:23:09,198
nadp volume p test volume p nonsense

1917
01:23:07,600 --> 01:23:10,960
this is simpler than we're making it out

1918
01:23:09,198 --> 01:23:13,919
to be i think probably

1919
01:23:10,960 --> 01:23:15,119
all we really need to do is go if the

1920
01:23:13,920 --> 01:23:18,960
person was

1921
01:23:15,119 --> 01:23:20,399
standing here and so on so if we look

1922
01:23:18,960 --> 01:23:22,319
at the collision volumes the collision

1923
01:23:20,399 --> 01:23:24,719
volumes are presumably yeah i don't even

1924
01:23:22,319 --> 01:23:24,719
remember

1925
01:23:27,359 --> 01:23:37,198
not that

1926
01:23:35,439 --> 01:23:38,638
there's a collision volume thing in here

1927
01:23:37,198 --> 01:23:41,359
somewhere there it is

1928
01:23:38,639 --> 01:23:43,440
so these are just offsets from the

1929
01:23:41,359 --> 01:23:46,719
position

1930
01:23:43,439 --> 01:23:48,638
of the entity so in theory i think

1931
01:23:46,719 --> 01:23:51,039
all we really need to do is say look we

1932
01:23:48,639 --> 01:23:54,239
know where this

1933
01:23:51,039 --> 01:23:56,639
rectangle would be so uh the test

1934
01:23:54,238 --> 01:23:59,678
rectangle

1935
01:23:56,639 --> 01:24:02,239
is just going to be uh

1936
01:23:59,679 --> 01:24:03,199
whatever the test entity's position is

1937
01:24:02,238 --> 01:24:06,638
plus

1938
01:24:03,198 --> 01:24:08,399
uh like as an offset right um

1939
01:24:06,639 --> 01:24:09,920
of the test entities position and the

1940
01:24:08,399 --> 01:24:12,799
test entities collision volume

1941
01:24:09,920 --> 01:24:14,158
produces the rectangle in question uh

1942
01:24:12,800 --> 01:24:17,279
the rectangle

1943
01:24:14,158 --> 01:24:20,799
for the uh vox

1944
01:24:17,279 --> 01:24:23,279
like where the player where the

1945
01:24:20,800 --> 01:24:24,960
mover would be so like mover wrecked i

1946
01:24:23,279 --> 01:24:28,319
don't know we want to call that

1947
01:24:24,960 --> 01:24:31,198
is just um taking whatever the

1948
01:24:28,319 --> 01:24:34,639
base voxel position is so whatever this

1949
01:24:31,198 --> 01:24:34,638
position is on the voxel

1950
01:24:34,800 --> 01:24:39,520
and offsetting uh the collision volume

1951
01:24:37,279 --> 01:24:41,039
of that now i don't remember much about

1952
01:24:39,520 --> 01:24:42,560
the offset function but it looks like

1953
01:24:41,039 --> 01:24:44,000
yeah so you just take so it's the volume

1954
01:24:42,560 --> 01:24:47,120
first and then the position so it's it's

1955
01:24:44,000 --> 01:24:49,600
really it's really that way around

1956
01:24:47,119 --> 01:24:51,679
uh and none of this matters that's all

1957
01:24:49,600 --> 01:24:54,719
gone so then we just do like

1958
01:24:51,679 --> 01:24:57,920
uh inter section

1959
01:24:54,719 --> 01:24:59,679
we just use our intersection call to see

1960
01:24:57,920 --> 01:25:00,319
whether or not the rectangles intersect

1961
01:24:59,679 --> 01:25:03,920
here

1962
01:25:00,319 --> 01:25:06,799
uh so presumably we can just call that

1963
01:25:03,920 --> 01:25:08,319
on these two so the mover rect and the

1964
01:25:06,800 --> 01:25:10,239
test rect

1965
01:25:08,319 --> 01:25:12,158
and presumably we can just go from there

1966
01:25:10,238 --> 01:25:14,799
so all we need now is to know

1967
01:25:12,158 --> 01:25:15,839
what is the base voxel position and

1968
01:25:14,800 --> 01:25:17,520
again i think that's

1969
01:25:15,840 --> 01:25:18,960
pretty much straightforward it's really

1970
01:25:17,520 --> 01:25:21,520
just whatever the vox

1971
01:25:18,960 --> 01:25:23,119
it's this right here uh that we were

1972
01:25:21,520 --> 01:25:23,679
going whatever we're going to use is the

1973
01:25:23,119 --> 01:25:26,880
position

1974
01:25:23,679 --> 01:25:28,480
uh from before right

1975
01:25:26,880 --> 01:25:29,920
so i'm pretty sure that all we have to

1976
01:25:28,479 --> 01:25:31,519
do is take the entity's collision volume

1977
01:25:29,920 --> 01:25:33,440
and offset it there and now what we've

1978
01:25:31,520 --> 01:25:36,960
done is like point sampled

1979
01:25:33,439 --> 01:25:40,000
this collision function um to see

1980
01:25:36,960 --> 01:25:42,719
which uh vertices of the voxel

1981
01:25:40,000 --> 01:25:43,840
you could place the player on or place

1982
01:25:42,719 --> 01:25:46,000
the mover on

1983
01:25:43,840 --> 01:25:47,119
and then we just use whatever the

1984
01:25:46,000 --> 01:25:49,520
largest

1985
01:25:47,119 --> 01:25:51,198
whatever the closest open voxel is and

1986
01:25:49,520 --> 01:25:54,480
we place you in there

1987
01:25:51,198 --> 01:25:56,719
right and that's all we're doing um

1988
01:25:54,479 --> 01:25:58,158
and so that should maybe start to

1989
01:25:56,719 --> 01:25:59,760
actually work now

1990
01:25:58,158 --> 01:26:00,719
uh but i don't actually know it doesn't

1991
01:25:59,760 --> 01:26:03,798
look like oh um

1992
01:26:00,720 --> 01:26:03,798
[Music]

1993
01:26:04,399 --> 01:26:07,439
i should make sure we're actually

1994
01:26:05,600 --> 01:26:09,760
setting this properly so

1995
01:26:07,439 --> 01:26:12,479
recommend diminished cell dim closest

1996
01:26:09,760 --> 01:26:12,480
point in box

1997
01:26:13,520 --> 01:26:20,239
if not occupied this

1998
01:26:16,800 --> 01:26:23,199
does offset rectangles intersect then

1999
01:26:20,238 --> 01:26:23,759
it's set to talk about okay so this

2000
01:26:23,198 --> 01:26:25,198
should

2001
01:26:23,760 --> 01:26:26,960
now be working although it doesn't look

2002
01:26:25,198 --> 01:26:28,000
like it was so now we have to actually

2003
01:26:26,960 --> 01:26:31,119
start debugging it

2004
01:26:28,000 --> 01:26:32,960
um like

2005
01:26:31,119 --> 01:26:34,238
right because i can punch i can still go

2006
01:26:32,960 --> 01:26:36,158
straight through that wall right which i

2007
01:26:34,238 --> 01:26:40,079
should not be able to do

2008
01:26:36,158 --> 01:26:42,319
um although actually

2009
01:26:40,079 --> 01:26:42,319
i guess

2010
01:26:43,520 --> 01:26:46,639
yeah so we're actually doing this right

2011
01:26:45,439 --> 01:26:48,799
like everything is actually

2012
01:26:46,639 --> 01:26:49,679
happening we're calling move entity

2013
01:26:48,800 --> 01:26:52,719
locally

2014
01:26:49,679 --> 01:26:57,440
we're doing in here we're saying

2015
01:26:52,719 --> 01:26:57,439
uh you know place these two things um

2016
01:27:04,639 --> 01:27:08,800
all right so why aren't we working we

2017
01:27:07,039 --> 01:27:10,719
have voxel bounds min plus oxygen so

2018
01:27:08,800 --> 01:27:12,960
that that's the corner of the voxel

2019
01:27:10,719 --> 01:27:12,960
uh

2020
01:27:13,840 --> 01:27:17,520
that that would be the point where the

2021
01:27:15,679 --> 01:27:19,840
player would be standing

2022
01:27:17,520 --> 01:27:21,199
so that seems right we're placing the

2023
01:27:19,840 --> 01:27:23,119
collision volume there

2024
01:27:21,198 --> 01:27:25,198
this is placing the collision line

2025
01:27:23,119 --> 01:27:33,840
wherever this entity actually is

2026
01:27:25,198 --> 01:27:33,839
right which is what we would expect um

2027
01:27:38,960 --> 01:27:45,600
so yeah i can't say i see

2028
01:27:42,000 --> 01:27:46,800
why that's not working what i would like

2029
01:27:45,600 --> 01:27:48,239
to do

2030
01:27:46,800 --> 01:27:50,159
so i'd like to step through here so i

2031
01:27:48,238 --> 01:27:52,238
can watch the only problem is

2032
01:27:50,158 --> 01:27:53,279
like i'm not sure there's much i can

2033
01:27:52,238 --> 01:27:56,238
really

2034
01:27:53,279 --> 01:27:57,750
like we kind of need to set up a case

2035
01:27:56,238 --> 01:27:58,839
here

2036
01:27:57,750 --> 01:28:01,840
[Music]

2037
01:27:58,840 --> 01:28:01,840
um

2038
01:28:08,319 --> 01:28:11,519
because this is just going to be if we

2039
01:28:10,000 --> 01:28:12,639
try to step through it in the real game

2040
01:28:11,520 --> 01:28:13,520
it's i think it's going to be too

2041
01:28:12,639 --> 01:28:15,840
complicated

2042
01:28:13,520 --> 01:28:15,840
right

2043
01:28:17,679 --> 01:28:20,960
so there's two different things i'm

2044
01:28:19,679 --> 01:28:25,039
thinking one

2045
01:28:20,960 --> 01:28:25,039
is i could draw this

2046
01:28:25,840 --> 01:28:29,180
which i think i probably want to do

2047
01:28:28,880 --> 01:28:32,279
um

2048
01:28:29,180 --> 01:28:32,279
[Music]

2049
01:28:39,039 --> 01:28:43,359
but the other is i kind of want this to

2050
01:28:41,359 --> 01:28:45,198
be something i can test i just need a

2051
01:28:43,359 --> 01:28:46,960
case i can step through

2052
01:28:45,198 --> 01:28:48,719
where i kind of have some idea of what

2053
01:28:46,960 --> 01:28:49,520
should be happening so i can watch

2054
01:28:48,719 --> 01:28:57,840
carefully

2055
01:28:49,520 --> 01:28:57,840
what actually goes on um

2056
01:29:01,439 --> 01:29:07,039
because yeah it sure seems

2057
01:29:04,479 --> 01:29:08,879
so let me see i'm curious is this just

2058
01:29:07,039 --> 01:29:10,000
always failing out or something too

2059
01:29:08,880 --> 01:29:13,679
would be the other thing so

2060
01:29:10,000 --> 01:29:15,760
if i prevent motion in the case

2061
01:29:13,679 --> 01:29:18,960
so speedrunners you're not welcome does

2062
01:29:15,760 --> 01:29:22,079
that stop everyone from moving

2063
01:29:18,960 --> 01:29:24,560
yes so basically what's happening here

2064
01:29:22,079 --> 01:29:26,158
is we're never actually getting an

2065
01:29:24,560 --> 01:29:29,020
unoccupied one of these

2066
01:29:26,158 --> 01:29:32,048
it looks like right um

2067
01:29:29,020 --> 01:29:32,049
[Music]

2068
01:29:33,520 --> 01:29:41,679
appears to be the problem

2069
01:29:38,800 --> 01:29:43,600
so if that's the case maybe i can just

2070
01:29:41,679 --> 01:29:46,158
step through it directly if it's always

2071
01:29:43,600 --> 01:29:53,840
failing i should be able to just look

2072
01:29:46,158 --> 01:29:53,839
and see uh

2073
01:29:59,920 --> 01:30:02,960
i should be able to just look and see at

2074
01:30:01,439 --> 01:30:05,759
that point

2075
01:30:02,960 --> 01:30:06,000
what's going on because this should set

2076
01:30:05,760 --> 01:30:08,159
this

2077
01:30:06,000 --> 01:30:09,359
should be it should be relatively clear

2078
01:30:08,158 --> 01:30:21,839
what's going on

2079
01:30:09,359 --> 01:30:21,839
at that point

2080
01:30:22,399 --> 01:30:26,158
so maybe i just do that um

2081
01:30:28,639 --> 01:30:35,359
and we just see what we can see oops

2082
01:30:32,319 --> 01:30:37,599
uh entity

2083
01:30:35,359 --> 01:30:37,599
and

2084
01:30:41,359 --> 01:30:48,639
let's take a look um should be

2085
01:30:44,399 --> 01:30:51,759
like in here somewhere right

2086
01:30:48,639 --> 01:30:53,760
or does it not i guess it's in the

2087
01:30:51,760 --> 01:30:56,000
sim region code i don't know where we

2088
01:30:53,760 --> 01:31:03,840
actually put this thing

2089
01:30:56,000 --> 01:31:03,840
here probably

2090
01:31:04,079 --> 01:31:11,119
yeah uh so

2091
01:31:08,399 --> 01:31:12,960
let's just take a look uh at what this

2092
01:31:11,119 --> 01:31:14,000
looks like i i should probably be in

2093
01:31:12,960 --> 01:31:15,439
debug mode because

2094
01:31:14,000 --> 01:31:17,760
we we don't really want to have to deal

2095
01:31:15,439 --> 01:31:19,439
with all the

2096
01:31:17,760 --> 01:31:20,960
nonsense can't inspect any variables in

2097
01:31:19,439 --> 01:31:23,759
debug mode because how would you ever

2098
01:31:20,960 --> 01:31:25,359
inspect variables that's just an

2099
01:31:23,760 --> 01:31:26,800
unsolved problem in computer science

2100
01:31:25,359 --> 01:31:28,799
it's not like the cpu ever computes

2101
01:31:26,800 --> 01:31:32,159
those variables or anything

2102
01:31:28,800 --> 01:31:34,880
so if we go ahead and look here

2103
01:31:32,158 --> 01:31:35,679
to see what is the stuff that's

2104
01:31:34,880 --> 01:31:39,119
happening

2105
01:31:35,679 --> 01:31:42,239
so from p and 2p so this is an

2106
01:31:39,119 --> 01:31:44,000
actual move right which is good that's

2107
01:31:42,238 --> 01:31:48,000
what we want

2108
01:31:44,000 --> 01:31:50,079
um and if we look at the apron size here

2109
01:31:48,000 --> 01:31:53,359
and set up these bounds let's let's take

2110
01:31:50,079 --> 01:31:56,880
a look at what the bounce ends up being

2111
01:31:53,359 --> 01:31:59,359
um so that's seems fine

2112
01:31:56,880 --> 01:32:00,719
like doesn't seem totally ridiculous to

2113
01:31:59,359 --> 01:32:04,799
me

2114
01:32:00,719 --> 01:32:07,198
uh so the cell dimension what is it

2115
01:32:04,800 --> 01:32:08,239
uh cell dimension quite small which is

2116
01:32:07,198 --> 01:32:12,479
what we want

2117
01:32:08,238 --> 01:32:15,119
uh we're trying to do small

2118
01:32:12,479 --> 01:32:16,559
small stuff here so let's see what

2119
01:32:15,119 --> 01:32:19,359
voxitter says

2120
01:32:16,560 --> 01:32:20,159
voxiter is exactly what we would expect

2121
01:32:19,359 --> 01:32:22,399
um

2122
01:32:20,158 --> 01:32:23,279
we are going to iterate through these

2123
01:32:22,399 --> 01:32:26,638
things here

2124
01:32:23,279 --> 01:32:27,840
and see you know we're we're definitely

2125
01:32:26,639 --> 01:32:29,760
not getting

2126
01:32:27,840 --> 01:32:31,679
like it's not like everything is

2127
01:32:29,760 --> 01:32:35,119
suddenly intersecting

2128
01:32:31,679 --> 01:32:39,039
oh duh uh

2129
01:32:35,119 --> 01:32:41,599
forgot soft bean

2130
01:32:39,039 --> 01:32:42,880
yeah yeah yeah how you doing bean do you

2131
01:32:41,600 --> 01:32:46,400
wanna say hi

2132
01:32:42,880 --> 01:32:49,279
say hi say hi to the camera

2133
01:32:46,399 --> 01:32:51,679
no okay don't say hi to the camera then

2134
01:32:49,279 --> 01:32:53,920
what are you doing puss

2135
01:32:51,679 --> 01:32:55,679
i just i just was to tell people that

2136
01:32:53,920 --> 01:32:58,800
there was a bug in here

2137
01:32:55,679 --> 01:33:01,119
um did you want to tell them did you

2138
01:32:58,800 --> 01:33:02,880
tell them about the bug you can tell

2139
01:33:01,119 --> 01:33:06,840
them

2140
01:33:02,880 --> 01:33:10,719
you can tell them about the bug you know

2141
01:33:06,840 --> 01:33:13,679
okay here tell them about the bug

2142
01:33:10,719 --> 01:33:13,679
tell them about the bug

2143
01:33:20,639 --> 01:33:23,119
tell them about

2144
01:33:24,560 --> 01:33:28,560
you know what it is right do you know

2145
01:33:27,198 --> 01:33:30,238
what it is

2146
01:33:28,560 --> 01:33:32,239
you already know what the bug is here

2147
01:33:30,238 --> 01:33:33,599
come up come up you can come up i know

2148
01:33:32,238 --> 01:33:34,399
you want to hang out on my shoulder come

2149
01:33:33,600 --> 01:33:36,639
on

2150
01:33:34,399 --> 01:33:38,559
tell them what the bug is don't keep

2151
01:33:36,639 --> 01:33:42,400
them in suspense

2152
01:33:38,560 --> 01:33:42,400
don't keep them in suspense bean

2153
01:33:42,639 --> 01:33:46,319
you already know what the bug is don't

2154
01:33:44,158 --> 01:33:46,319
you

2155
01:33:46,560 --> 01:33:49,600
you're one of the best programming cats

2156
01:33:48,158 --> 01:33:51,679
i know

2157
01:33:49,600 --> 01:33:54,000
you always know what the bug is you

2158
01:33:51,679 --> 01:33:57,520
don't always tell me because you just

2159
01:33:54,000 --> 01:34:00,479
all you do is muse sometimes

2160
01:33:57,520 --> 01:34:03,040
but you know what it is i bet you do

2161
01:34:00,479 --> 01:34:03,039
that's right

2162
01:34:03,439 --> 01:34:08,638
here you go tell them what the bug is

2163
01:34:05,520 --> 01:34:08,639
can you tell them what the bug is

2164
01:34:08,880 --> 01:34:13,359
hmm what do you think

2165
01:34:13,920 --> 01:34:22,800
you want to give them a hint

2166
01:34:18,800 --> 01:34:24,320
all right that's okay i know

2167
01:34:22,800 --> 01:34:25,679
i know everyone needs to learn on their

2168
01:34:24,319 --> 01:34:27,279
own if you just told everyone what the

2169
01:34:25,679 --> 01:34:30,560
bug was all the time

2170
01:34:27,279 --> 01:34:34,559
they would never learn so that's fine

2171
01:34:30,560 --> 01:34:34,560
i understand your pedagogical methods

2172
01:34:36,319 --> 01:34:38,799
all right you want to sit in my lap what

2173
01:34:37,760 --> 01:34:40,079
do you want to do you can't be on my

2174
01:34:38,800 --> 01:34:42,079
shoulder for the entire time because i

2175
01:34:40,079 --> 01:34:45,600
can't type but you can sit on my lap

2176
01:34:42,079 --> 01:34:47,519
if you want to so

2177
01:34:45,600 --> 01:34:50,320
that will work if you want to give it a

2178
01:34:47,520 --> 01:34:50,320
shot go right ahead

2179
01:34:50,639 --> 01:34:54,319
okay so what i was going to say is i

2180
01:34:52,000 --> 01:34:54,880
forgot we we literally said this at the

2181
01:34:54,319 --> 01:34:56,880
outset

2182
01:34:54,880 --> 01:34:57,920
so the problem here is that we have

2183
01:34:56,880 --> 01:35:00,800
things that are not

2184
01:34:57,920 --> 01:35:02,239
actually motion preventing elements

2185
01:35:00,800 --> 01:35:05,360
right

2186
01:35:02,238 --> 01:35:08,238
so what we want to do here is say look

2187
01:35:05,359 --> 01:35:09,679
we don't actually we don't want you to

2188
01:35:08,238 --> 01:35:12,959
actually

2189
01:35:09,679 --> 01:35:15,920
prevent motion or collide

2190
01:35:12,960 --> 01:35:17,760
if the thing that you're colliding with

2191
01:35:15,920 --> 01:35:19,118
doesn't have a flag set that says it

2192
01:35:17,760 --> 01:35:22,480
stops motion

2193
01:35:19,118 --> 01:35:24,158
right uh so you gotta

2194
01:35:22,479 --> 01:35:25,678
we gotta test those flags in here

2195
01:35:24,158 --> 01:35:27,118
otherwise you're always gonna be hitting

2196
01:35:25,679 --> 01:35:28,239
something like you'll always be hitting

2197
01:35:27,118 --> 01:35:32,399
at least the room

2198
01:35:28,238 --> 01:35:34,319
boundary marker right um and so

2199
01:35:32,399 --> 01:35:35,679
you know that's that's just something we

2200
01:35:34,319 --> 01:35:39,359
have to deal with

2201
01:35:35,679 --> 01:35:44,560
so what are you doing

2202
01:35:39,359 --> 01:35:47,359
what are you doing what are you doing

2203
01:35:44,560 --> 01:35:47,360
what's going on

2204
01:35:49,039 --> 01:35:56,399
oh come on come on okay

2205
01:35:52,399 --> 01:35:57,839
all right

2206
01:35:56,399 --> 01:36:00,079
you just want to cuddle you don't want

2207
01:35:57,840 --> 01:36:02,079
to do any programming you just want to

2208
01:36:00,079 --> 01:36:03,679
hang out

2209
01:36:02,079 --> 01:36:05,039
did you just eat your oh you know what

2210
01:36:03,679 --> 01:36:07,440
you just ate your dinner didn't i mean

2211
01:36:05,039 --> 01:36:10,238
your lunch didn't you

2212
01:36:07,439 --> 01:36:12,000
your automated feed or go off you just

2213
01:36:10,238 --> 01:36:14,399
had your dry food your today's

2214
01:36:12,000 --> 01:36:16,479
your lunch dry food is that what

2215
01:36:14,399 --> 01:36:19,599
happened

2216
01:36:16,479 --> 01:36:22,559
yeah that's a good girl

2217
01:36:19,600 --> 01:36:22,560
that's a good girl

2218
01:36:23,359 --> 01:36:30,399
that's a good girl all right

2219
01:36:27,439 --> 01:36:31,919
oh you're gonna eat my hair now okay

2220
01:36:30,399 --> 01:36:33,839
well

2221
01:36:31,920 --> 01:36:35,359
i don't know that we really need you to

2222
01:36:33,840 --> 01:36:38,480
do that though

2223
01:36:35,359 --> 01:36:41,279
so maybe why don't you just sit there

2224
01:36:38,479 --> 01:36:42,718
and i can type in the flags code how

2225
01:36:41,279 --> 01:36:47,359
about that

2226
01:36:42,719 --> 01:36:49,840
what do you think does that sound good

2227
01:36:47,359 --> 01:36:49,839
at all

2228
01:36:51,439 --> 01:36:56,000
um okay so yeah

2229
01:36:54,479 --> 01:36:58,399
i don't know how we want to do this

2230
01:36:56,000 --> 01:37:00,079
exactly because most things that have a

2231
01:36:58,399 --> 01:37:01,359
collision to volume probably want to

2232
01:37:00,079 --> 01:37:03,279
prevent motion

2233
01:37:01,359 --> 01:37:04,639
and it's probably the rarer case that

2234
01:37:03,279 --> 01:37:06,000
you have a collision volume that doesn't

2235
01:37:04,639 --> 01:37:08,000
want to prevent motion

2236
01:37:06,000 --> 01:37:09,920
so i don't know if we actually want to

2237
01:37:08,000 --> 01:37:10,319
do the flags the way around that we did

2238
01:37:09,920 --> 01:37:12,319
them

2239
01:37:10,319 --> 01:37:13,599
we probably want to do it the other way

2240
01:37:12,319 --> 01:37:16,719
so that we specify

2241
01:37:13,600 --> 01:37:17,600
things that act that don't um or

2242
01:37:16,719 --> 01:37:20,639
something like that

2243
01:37:17,600 --> 01:37:23,039
you know what i'm saying uh so

2244
01:37:20,639 --> 01:37:23,920
you know if if we look at the flags for

2245
01:37:23,039 --> 01:37:25,600
entities

2246
01:37:23,920 --> 01:37:28,000
i'm just guessing that that's what we

2247
01:37:25,600 --> 01:37:31,039
would want to do so maybe like

2248
01:37:28,000 --> 01:37:32,719
um maybe this should really be more like

2249
01:37:31,039 --> 01:37:34,560
a louse motion on collision that's a

2250
01:37:32,719 --> 01:37:36,000
good puss okay puss has settled down now

2251
01:37:34,560 --> 01:37:37,520
she's sitting on my arm

2252
01:37:36,000 --> 01:37:39,760
which is not the most comfortable thing

2253
01:37:37,520 --> 01:37:42,080
for me but it does allow me to type

2254
01:37:39,760 --> 01:37:45,039
which is really the important part

2255
01:37:42,079 --> 01:37:46,960
so what we'll do maybe is set allows

2256
01:37:45,039 --> 01:37:50,639
motion on collision for things

2257
01:37:46,960 --> 01:37:53,520
like the room so uh if we look for where

2258
01:37:50,639 --> 01:37:56,400
we create the room by tommy wiseau

2259
01:37:53,520 --> 01:37:57,600
uh we can set for those types of

2260
01:37:56,399 --> 01:37:59,198
entities

2261
01:37:57,600 --> 01:38:00,639
things that say look you can just walk

2262
01:37:59,198 --> 01:38:02,399
through these right they don't

2263
01:38:00,639 --> 01:38:04,239
actually stop you well not walk through

2264
01:38:02,399 --> 01:38:07,039
them but you can

2265
01:38:04,238 --> 01:38:09,039
uh move smooth movers through them

2266
01:38:07,039 --> 01:38:11,760
obviously walking is is done by the

2267
01:38:09,039 --> 01:38:12,479
the actual transactional motion system

2268
01:38:11,760 --> 01:38:15,679
so it

2269
01:38:12,479 --> 01:38:18,799
doesn't care um about these settings but

2270
01:38:15,679 --> 01:38:20,800
when we set the thing like the room uh

2271
01:38:18,800 --> 01:38:24,719
boundary stuff that would actually do it

2272
01:38:20,800 --> 01:38:27,920
so in here where we do add entity

2273
01:38:24,719 --> 01:38:30,480
uh right here you can see this

2274
01:38:27,920 --> 01:38:31,039
right um what we would want to do is say

2275
01:38:30,479 --> 01:38:34,479
like

2276
01:38:31,039 --> 01:38:36,719
cam room flags or equals

2277
01:38:34,479 --> 01:38:38,399
entity flags allow motion on collision

2278
01:38:36,719 --> 01:38:39,760
so that we know that this thing won't

2279
01:38:38,399 --> 01:38:42,158
actually stop

2280
01:38:39,760 --> 01:38:44,239
other stuff from going and we do have at

2281
01:38:42,158 --> 01:38:46,000
least one other one of those

2282
01:38:44,238 --> 01:38:47,839
uh so we might as well set that one now

2283
01:38:46,000 --> 01:38:49,760
as well which is when we

2284
01:38:47,840 --> 01:38:51,760
create things like a conversation

2285
01:38:49,760 --> 01:38:53,600
section so like when you go

2286
01:38:51,760 --> 01:38:55,280
uh somewhere that you're going to like

2287
01:38:53,600 --> 01:38:58,400
um

2288
01:38:55,279 --> 01:39:00,880
someone hops onto it uh and and

2289
01:38:58,399 --> 01:39:01,679
oh gosh okay you all sat there puss what

2290
01:39:00,880 --> 01:39:04,400
are you doing

2291
01:39:01,679 --> 01:39:06,319
puss is wrecking havoc uh so

2292
01:39:04,399 --> 01:39:06,799
conversation stuff when we add one of

2293
01:39:06,319 --> 01:39:09,118
those

2294
01:39:06,800 --> 01:39:10,239
those also would like those would not

2295
01:39:09,118 --> 01:39:11,679
stop you either

2296
01:39:10,238 --> 01:39:13,279
like the glove should be able to move

2297
01:39:11,679 --> 01:39:16,319
through those uh cleanly

2298
01:39:13,279 --> 01:39:16,639
and so on all right so let's start with

2299
01:39:16,319 --> 01:39:18,719
with

2300
01:39:16,639 --> 01:39:19,679
those and let's see if that maybe

2301
01:39:18,719 --> 01:39:21,039
doesn't change

2302
01:39:19,679 --> 01:39:23,359
what's going on in the system at the

2303
01:39:21,039 --> 01:39:26,479
moment uh so if in here

2304
01:39:23,359 --> 01:39:30,158
um i go ahead and

2305
01:39:26,479 --> 01:39:32,238
i test now so in the vox iter stuff

2306
01:39:30,158 --> 01:39:33,279
when we when we're going to do these

2307
01:39:32,238 --> 01:39:35,759
testing

2308
01:39:33,279 --> 01:39:36,639
i'll just do if test entity is not equal

2309
01:39:35,760 --> 01:39:40,159
to entity

2310
01:39:36,639 --> 01:39:44,400
and uh if there's

2311
01:39:40,158 --> 01:39:48,000
not a flag test entity flags

2312
01:39:44,399 --> 01:39:50,399
and allow motion on collision because we

2313
01:39:48,000 --> 01:39:52,479
we don't want to prevent the motion we

2314
01:39:50,399 --> 01:39:54,158
want to potentially trigger an event

2315
01:39:52,479 --> 01:39:55,839
in the future so that's the thing we

2316
01:39:54,158 --> 01:39:59,039
might want to do

2317
01:39:55,840 --> 01:40:02,239
um but we don't actually want to prevent

2318
01:39:59,039 --> 01:40:05,679
um the motion when we have those

2319
01:40:02,238 --> 01:40:08,079
those hits uh and so now let me just

2320
01:40:05,679 --> 01:40:10,639
quick let me run this again to see

2321
01:40:08,079 --> 01:40:13,920
whether that changed things at all

2322
01:40:10,639 --> 01:40:16,480
um first

2323
01:40:13,920 --> 01:40:17,118
uh okay so people can now move as we can

2324
01:40:16,479 --> 01:40:20,158
see

2325
01:40:17,118 --> 01:40:22,960
and so uh now we're back to actually

2326
01:40:20,158 --> 01:40:24,559
working on

2327
01:40:22,960 --> 01:40:26,000
uh oh by the way you can see why

2328
01:40:24,560 --> 01:40:26,639
proportional derivative controllers are

2329
01:40:26,000 --> 01:40:28,560
bad

2330
01:40:26,639 --> 01:40:29,840
do you see it how low like at low frame

2331
01:40:28,560 --> 01:40:32,639
rates the glove just

2332
01:40:29,840 --> 01:40:33,840
just does weird stuff that's because the

2333
01:40:32,639 --> 01:40:35,359
there's like the

2334
01:40:33,840 --> 01:40:37,600
the weird thing we slapped on there is

2335
01:40:35,359 --> 01:40:38,158
like under damped so it's just gonna go

2336
01:40:37,600 --> 01:40:42,159
nuts

2337
01:40:38,158 --> 01:40:45,519
right um as it keeps moving around

2338
01:40:42,158 --> 01:40:46,319
so uh now we get more what we would

2339
01:40:45,520 --> 01:40:49,199
expect

2340
01:40:46,319 --> 01:40:50,880
uh which is you know we're we're moving

2341
01:40:49,198 --> 01:40:53,678
stuff around and we're not getting into

2342
01:40:50,880 --> 01:40:56,639
the situation where everything says

2343
01:40:53,679 --> 01:40:58,239
that it's occupied so as long as it

2344
01:40:56,639 --> 01:40:59,039
doesn't have that allows motion on

2345
01:40:58,238 --> 01:41:02,000
collision test

2346
01:40:59,039 --> 01:41:03,600
we will allow sorry allow motion on

2347
01:41:02,000 --> 01:41:06,960
collision flag

2348
01:41:03,600 --> 01:41:07,360
as long as that flag is not set we will

2349
01:41:06,960 --> 01:41:09,920
do

2350
01:41:07,359 --> 01:41:13,599
a test and we'll set occupied to whether

2351
01:41:09,920 --> 01:41:13,600
or not the rectangles intersect

2352
01:41:16,840 --> 01:41:21,840
right

2353
01:41:18,319 --> 01:41:23,840
okay so now

2354
01:41:21,840 --> 01:41:25,119
uh we have to figure out why we're not

2355
01:41:23,840 --> 01:41:27,679
getting any

2356
01:41:25,118 --> 01:41:29,198
actual stopping of motion which is more

2357
01:41:27,679 --> 01:41:30,560
what we would have expected to see so

2358
01:41:29,198 --> 01:41:32,479
when nothing moved that was like how

2359
01:41:30,560 --> 01:41:33,840
that was kind of weird because it's not

2360
01:41:32,479 --> 01:41:36,238
the bug you would expect and it turns

2361
01:41:33,840 --> 01:41:38,000
out like well okay yeah that's because

2362
01:41:36,238 --> 01:41:39,678
this was always triggering on like the

2363
01:41:38,000 --> 01:41:42,158
rooms

2364
01:41:39,679 --> 01:41:42,719
boundaries and stuff like that so we

2365
01:41:42,158 --> 01:41:44,638
know that

2366
01:41:42,719 --> 01:41:46,158
this code at least sort of does

2367
01:41:44,639 --> 01:41:47,760
something because it means that when you

2368
01:41:46,158 --> 01:41:48,638
do have a large collider nothing was

2369
01:41:47,760 --> 01:41:51,039
allowed to move

2370
01:41:48,639 --> 01:41:52,400
but it appears that this doesn't really

2371
01:41:51,039 --> 01:41:53,279
prevent you from moving through things

2372
01:41:52,399 --> 01:41:55,118
for some reason

2373
01:41:53,279 --> 01:41:56,639
so we're not quite at the point where

2374
01:41:55,118 --> 01:41:58,079
we're actually doing what i think we're

2375
01:41:56,639 --> 01:42:01,039
supposed to be doing here

2376
01:41:58,079 --> 01:42:02,238
which is preventing motion uh at least

2377
01:42:01,039 --> 01:42:04,079
small motions which

2378
01:42:02,238 --> 01:42:05,279
you know something like the the floating

2379
01:42:04,079 --> 01:42:08,719
familiar head

2380
01:42:05,279 --> 01:42:10,800
uh would be doing so we kind of need to

2381
01:42:08,719 --> 01:42:13,600
know like what is the deal here like

2382
01:42:10,800 --> 01:42:14,079
why are we not um why are we getting an

2383
01:42:13,600 --> 01:42:18,000
entire

2384
01:42:14,079 --> 01:42:19,519
box that is marked as as movable

2385
01:42:18,000 --> 01:42:21,359
in a way that allows you to move through

2386
01:42:19,520 --> 01:42:23,040
things like what's going on there

2387
01:42:21,359 --> 01:42:24,880
and looking at this i just want to make

2388
01:42:23,039 --> 01:42:25,760
sure that this is testing what i think

2389
01:42:24,880 --> 01:42:29,840
it's testing

2390
01:42:25,760 --> 01:42:29,840
i think it is

2391
01:42:31,840 --> 01:42:37,199
also i would note that this is actually

2392
01:42:34,960 --> 01:42:39,039
just to clear up what's going on this

2393
01:42:37,198 --> 01:42:41,839
only actually gets used in here

2394
01:42:39,039 --> 01:42:44,079
right so really all we're doing is we're

2395
01:42:41,840 --> 01:42:48,079
just testing these flags

2396
01:42:44,079 --> 01:42:48,079
and we're saying all right if

2397
01:42:48,399 --> 01:42:52,319
all of these are not occupied so we or

2398
01:42:51,359 --> 01:42:54,399
them all together

2399
01:42:52,319 --> 01:42:55,439
which means if any of the squares are

2400
01:42:54,399 --> 01:42:58,319
occupied

2401
01:42:55,439 --> 01:42:58,879
it will be one and then we're knotting

2402
01:42:58,319 --> 01:43:01,759
it

2403
01:42:58,880 --> 01:43:02,800
so basically all eight corners in this

2404
01:43:01,760 --> 01:43:06,560
lookup

2405
01:43:02,800 --> 01:43:10,719
have to have said that they were uh

2406
01:43:06,560 --> 01:43:12,800
that it was possible to move there right

2407
01:43:10,719 --> 01:43:14,079
and so this looks pretty reasonable to

2408
01:43:12,800 --> 01:43:17,119
me so i guess i'm

2409
01:43:14,079 --> 01:43:18,639
not sure why we're getting nothing

2410
01:43:17,118 --> 01:43:20,000
we'll have to step through it uh but

2411
01:43:18,639 --> 01:43:22,840
again i'm not sure how to set up a

2412
01:43:20,000 --> 01:43:26,319
scenario that will actually produce

2413
01:43:22,840 --> 01:43:31,279
um what we want to have happen there so

2414
01:43:26,319 --> 01:43:31,279
i kind of want to see do we ever hit

2415
01:43:33,520 --> 01:43:39,840
it doesn't look like it really it looks

2416
01:43:35,520 --> 01:43:42,480
like you can just punch straight through

2417
01:43:39,840 --> 01:43:43,920
so it doesn't really look like it's ever

2418
01:43:42,479 --> 01:43:53,839
actually preventing

2419
01:43:43,920 --> 01:43:53,840
any types of motion there um

2420
01:44:10,560 --> 01:44:14,400
so why would that be why would we not be

2421
01:44:13,439 --> 01:44:17,759
seeing at least

2422
01:44:14,399 --> 01:44:17,759
some uh

2423
01:44:18,079 --> 01:44:22,399
why would we be never seeing any uh

2424
01:44:21,198 --> 01:44:24,638
change there right

2425
01:44:22,399 --> 01:44:25,599
um and just to make sure i don't

2426
01:44:24,639 --> 01:44:27,039
actually know what this

2427
01:44:25,600 --> 01:44:28,639
rectangle's intersect thing does but i'm

2428
01:44:27,039 --> 01:44:31,039
assuming we're already using it

2429
01:44:28,639 --> 01:44:33,039
so we know that it's not completely

2430
01:44:31,039 --> 01:44:35,118
busted or something like that as well

2431
01:44:33,039 --> 01:44:49,840
which i suppose this thing but let me

2432
01:44:35,118 --> 01:44:49,839
just verify

2433
01:44:54,639 --> 01:45:03,199
looks reasonable so yeah

2434
01:44:58,960 --> 01:45:04,560
not sure what i would most like to do is

2435
01:45:03,198 --> 01:45:07,198
draw this out

2436
01:45:04,560 --> 01:45:08,159
um so i'm wondering if maybe i just will

2437
01:45:07,198 --> 01:45:11,039
so basically like

2438
01:45:08,158 --> 01:45:11,839
a way that i can draw out a thing that

2439
01:45:11,039 --> 01:45:15,279
shows me

2440
01:45:11,840 --> 01:45:16,639
the voxel that was used on a particular

2441
01:45:15,279 --> 01:45:20,479
move

2442
01:45:16,639 --> 01:45:23,118
um and i can see like

2443
01:45:20,479 --> 01:45:23,839
whether what the actual occupied status

2444
01:45:23,118 --> 01:45:27,039
is so

2445
01:45:23,840 --> 01:45:30,079
for example like if we go

2446
01:45:27,039 --> 01:45:32,639
into the uh

2447
01:45:30,079 --> 01:45:33,840
entity code and we've got you know

2448
01:45:32,639 --> 01:45:37,199
something that push

2449
01:45:33,840 --> 01:45:40,560
down uh some of this debug stuff

2450
01:45:37,198 --> 01:45:40,559
like push volume outline

2451
01:45:41,118 --> 01:45:48,799
and i put one of those in here

2452
01:45:45,039 --> 01:45:50,960
for uh the voxel for example

2453
01:45:48,800 --> 01:45:52,880
and the problem here is we would need to

2454
01:45:50,960 --> 01:45:55,760
actually send down

2455
01:45:52,880 --> 01:45:57,199
a render group to this but i'm okay with

2456
01:45:55,760 --> 01:45:59,039
that for now

2457
01:45:57,198 --> 01:46:02,399
for debugging purposes i also don't know

2458
01:45:59,039 --> 01:46:02,399
like we don't have debugging

2459
01:46:02,479 --> 01:46:05,039
maybe we do

2460
01:46:06,560 --> 01:46:10,560
i'm assuming we don't have any drawing

2461
01:46:10,840 --> 01:46:13,840
here

2462
01:46:25,118 --> 01:46:28,960
yeah we really should have the our debug

2463
01:46:27,520 --> 01:46:31,760
system sucks

2464
01:46:28,960 --> 01:46:33,679
frankly um it's one of the worst things

2465
01:46:31,760 --> 01:46:35,600
we did on handmade hero

2466
01:46:33,679 --> 01:46:38,000
uh just mostly because of focusing on

2467
01:46:35,600 --> 01:46:41,840
the wrong things i think

2468
01:46:38,000 --> 01:46:41,840
but what are you gonna do um

2469
01:46:42,319 --> 01:46:46,799
so anyway what we would like to do here

2470
01:46:44,399 --> 01:46:50,638
is the render group

2471
01:46:46,800 --> 01:46:55,279
uh if we pass down the render group here

2472
01:46:50,639 --> 01:46:57,520
and i just take a look and see like

2473
01:46:55,279 --> 01:46:57,519
uh

2474
01:46:58,960 --> 01:47:02,880
about pushing down some of these guys so

2475
01:47:01,039 --> 01:47:06,000
if we have a rectangle

2476
01:47:02,880 --> 01:47:08,000
and we want to draw it uh what i can do

2477
01:47:06,000 --> 01:47:11,359
is just draw which cells it thinks

2478
01:47:08,000 --> 01:47:13,198
are open for now i don't have a better

2479
01:47:11,359 --> 01:47:14,399
idea right but we can just do this and

2480
01:47:13,198 --> 01:47:19,678
say look

2481
01:47:14,399 --> 01:47:21,679
um go ahead and draw the cells

2482
01:47:19,679 --> 01:47:23,679
that you think are open and maybe for

2483
01:47:21,679 --> 01:47:25,840
now i'll move this back out here and

2484
01:47:23,679 --> 01:47:29,679
we'll just draw them each time

2485
01:47:25,840 --> 01:47:33,440
so we would basically do like you know

2486
01:47:29,679 --> 01:47:37,840
a cell color equals you know

2487
01:47:33,439 --> 01:47:37,839
uh maybe maybe you know green

2488
01:47:38,158 --> 01:47:43,519
um and then set it to red or something

2489
01:47:41,920 --> 01:47:46,719
like that

2490
01:47:43,520 --> 01:47:47,679
if it can't be moved so so like red is

2491
01:47:46,719 --> 01:47:52,079
can't go

2492
01:47:47,679 --> 01:47:55,679
green is um and then we just do

2493
01:47:52,079 --> 01:47:55,679
some nonsense like this

2494
01:47:55,920 --> 01:47:58,639
where we

2495
01:47:58,689 --> 01:48:01,819
[Music]

2496
01:48:02,960 --> 01:48:10,719
you know you know we do that and

2497
01:48:07,520 --> 01:48:19,199
i don't know

2498
01:48:10,719 --> 01:48:22,399
what's it complaining about um

2499
01:48:19,198 --> 01:48:25,599
cell color is the wrong

2500
01:48:22,399 --> 01:48:27,839
type and not only that but i'm so in

2501
01:48:25,600 --> 01:48:30,320
star code galaxy mode right now

2502
01:48:27,840 --> 01:48:32,719
i just have not been thinking um in

2503
01:48:30,319 --> 01:48:34,479
terms of floats

2504
01:48:32,719 --> 01:48:35,840
the brain just goes in in a direction

2505
01:48:34,479 --> 01:48:37,439
right um

2506
01:48:35,840 --> 01:48:39,679
so i'm going to pass the render group

2507
01:48:37,439 --> 01:48:39,678
here

2508
01:48:39,840 --> 01:48:42,960
for debugging and again we just want to

2509
01:48:41,760 --> 01:48:45,520
pull this out later

2510
01:48:42,960 --> 01:48:47,118
after we're done uh because we don't

2511
01:48:45,520 --> 01:48:50,480
actually want

2512
01:48:47,118 --> 01:48:51,839
any of this stuff uh to be in there

2513
01:48:50,479 --> 01:48:53,439
but for now we want to just do some

2514
01:48:51,840 --> 01:48:55,039
drawing in there and so we can just we

2515
01:48:53,439 --> 01:48:56,319
can see what what the heck's going on

2516
01:48:55,039 --> 01:48:59,359
right

2517
01:48:56,319 --> 01:49:01,198
um and so uh my hope

2518
01:48:59,359 --> 01:49:02,639
is that like if we zoomed in we could

2519
01:49:01,198 --> 01:49:05,759
sort of see like

2520
01:49:02,639 --> 01:49:06,880
because i can right you can see it right

2521
01:49:05,760 --> 01:49:09,119
you can sort of see

2522
01:49:06,880 --> 01:49:10,239
it drawing now those this green streaks

2523
01:49:09,118 --> 01:49:13,598
right

2524
01:49:10,238 --> 01:49:15,359
um and so like as it moves

2525
01:49:13,599 --> 01:49:17,360
you can sort of see that like it's all

2526
01:49:15,359 --> 01:49:19,759
green in there like there's no

2527
01:49:17,359 --> 01:49:21,839
red even when it probably should be

2528
01:49:19,760 --> 01:49:24,880
right so if i

2529
01:49:21,840 --> 01:49:27,360
um for example if i place

2530
01:49:24,880 --> 01:49:29,199
myself oh so there's actually some red

2531
01:49:27,359 --> 01:49:32,319
right there in fact

2532
01:49:29,198 --> 01:49:32,319
so it's actually got

2533
01:49:32,960 --> 01:49:39,920
that's weird it actually

2534
01:49:36,158 --> 01:49:39,920
looks like it's correctly

2535
01:49:41,279 --> 01:49:45,039
it actually looks like it's correctly

2536
01:49:43,198 --> 01:49:48,559
denying those motions

2537
01:49:45,039 --> 01:49:48,560
but then they're still happening

2538
01:49:50,880 --> 01:49:54,239
i mean it could be because we're just

2539
01:49:52,639 --> 01:49:55,279
not actually subdividing the step and

2540
01:49:54,238 --> 01:49:56,879
it's able to tunnel through but it

2541
01:49:55,279 --> 01:50:00,079
doesn't look like it like the

2542
01:49:56,880 --> 01:50:02,639
the hand is appearing inside here so it

2543
01:50:00,079 --> 01:50:02,639
seems like

2544
01:50:08,840 --> 01:50:11,840
maybe

2545
01:50:28,479 --> 01:50:31,839
i must be thinking through this a little

2546
01:50:31,039 --> 01:50:34,960
bit wrong

2547
01:50:31,840 --> 01:50:37,520
somehow so

2548
01:50:34,960 --> 01:50:41,599
again let me try switching to preventing

2549
01:50:37,520 --> 01:50:41,599
moves in the case where nothing is found

2550
01:50:45,439 --> 01:50:48,158
weird

2551
01:50:51,599 --> 01:50:54,800
so that actually makes the collision

2552
01:50:53,920 --> 01:50:57,199
detector

2553
01:50:54,800 --> 01:50:57,199
work

2554
01:50:58,479 --> 01:51:06,959
right which

2555
01:51:01,679 --> 01:51:09,359
makes no sense to me whatsoever

2556
01:51:06,960 --> 01:51:09,359
um

2557
01:51:12,639 --> 01:51:21,199
because it should always be able to find

2558
01:51:16,000 --> 01:51:23,599
its existing point

2559
01:51:21,198 --> 01:51:26,079
i guess not when it gets close enough to

2560
01:51:23,599 --> 01:51:26,079
something

2561
01:51:32,840 --> 01:51:35,840
interesting

2562
01:51:41,118 --> 01:51:50,719
i mean

2563
01:51:48,319 --> 01:51:53,039
i'm not sure what we want to do about

2564
01:51:50,719 --> 01:51:53,039
that

2565
01:51:55,840 --> 01:52:00,000
when we add subdivision it may take care

2566
01:51:58,158 --> 01:52:03,839
of itself

2567
01:52:00,000 --> 01:52:03,840
um but i don't know

2568
01:52:06,319 --> 01:52:10,479
that actually works remarkably well now

2569
01:52:08,800 --> 01:52:12,639
uh and see do you see the tunneling if i

2570
01:52:10,479 --> 01:52:14,799
get up enough speed on this thing

2571
01:52:12,639 --> 01:52:16,239
i can tunnel it through which we're

2572
01:52:14,800 --> 01:52:18,159
allowing right now because we don't we

2573
01:52:16,238 --> 01:52:21,039
never subdivide the move at all

2574
01:52:18,158 --> 01:52:21,920
so if the voxel can span it will allow

2575
01:52:21,039 --> 01:52:25,599
you to tunnel

2576
01:52:21,920 --> 01:52:28,840
which is by design um

2577
01:52:25,599 --> 01:52:31,840
that's what we would like it for it to

2578
01:52:28,840 --> 01:52:31,840
do

2579
01:52:41,679 --> 01:52:45,840
so that's great i mean i'm just testing

2580
01:52:43,679 --> 01:52:47,118
this here and it works really nicely

2581
01:52:45,840 --> 01:52:50,480
right because i can

2582
01:52:47,118 --> 01:52:54,639
so these guys the these things

2583
01:52:50,479 --> 01:52:57,759
don't obey any collision detection right

2584
01:52:54,639 --> 01:52:59,199
and so you can get the gloves stuck into

2585
01:52:57,760 --> 01:53:02,400
it pretty easily

2586
01:52:59,198 --> 01:53:04,638
um and uh

2587
01:53:02,399 --> 01:53:05,519
so that it you know goes through there

2588
01:53:04,639 --> 01:53:07,599
and

2589
01:53:05,520 --> 01:53:09,440
and it gets stuck on on stuff which is

2590
01:53:07,599 --> 01:53:11,279
what i wanted and it comes back

2591
01:53:09,439 --> 01:53:12,799
out which is the main thing that i

2592
01:53:11,279 --> 01:53:13,359
wanted to make sure was always happening

2593
01:53:12,800 --> 01:53:15,440
right

2594
01:53:13,359 --> 01:53:16,399
so you can see now with like really

2595
01:53:15,439 --> 01:53:18,960
large

2596
01:53:16,399 --> 01:53:20,879
motion steps you can tunnel through

2597
01:53:18,960 --> 01:53:22,079
things you can get out of things which

2598
01:53:20,880 --> 01:53:24,400
is what i want

2599
01:53:22,079 --> 01:53:25,439
right that's what i wanted to see so

2600
01:53:24,399 --> 01:53:28,479
that's good

2601
01:53:25,439 --> 01:53:30,638
actually um but now

2602
01:53:28,479 --> 01:53:31,759
we have to actually go in and say well

2603
01:53:30,639 --> 01:53:35,118
okay

2604
01:53:31,760 --> 01:53:38,880
but so if i subdivide

2605
01:53:35,118 --> 01:53:41,598
uh to to only relatively small motions

2606
01:53:38,880 --> 01:53:42,880
the tunneling won't happen anymore and

2607
01:53:41,599 --> 01:53:44,719
then we would be left with

2608
01:53:42,880 --> 01:53:46,319
basically a correct collision detector i

2609
01:53:44,719 --> 01:53:48,319
think

2610
01:53:46,319 --> 01:53:50,238
but the only problem is that i kind of

2611
01:53:48,319 --> 01:53:51,359
don't like the fact that we default to

2612
01:53:50,238 --> 01:53:54,158
non-motion

2613
01:53:51,359 --> 01:53:54,559
so if we start subdividing i'm wondering

2614
01:53:54,158 --> 01:53:56,719
if

2615
01:53:54,560 --> 01:53:58,400
we will be able to do something where we

2616
01:53:56,719 --> 01:54:00,239
can fix that

2617
01:53:58,399 --> 01:54:03,920
so that we default to being allowed to

2618
01:54:00,238 --> 01:54:06,799
move but i'm not sure

2619
01:54:03,920 --> 01:54:09,118
but already very promising i really like

2620
01:54:06,800 --> 01:54:11,199
what i'm seeing so far

2621
01:54:09,118 --> 01:54:13,279
and that's because i can get this thing

2622
01:54:11,198 --> 01:54:15,118
stuck by putting it in a place

2623
01:54:13,279 --> 01:54:17,279
where it can't move anymore and it it

2624
01:54:15,118 --> 01:54:18,880
always comes back out and that's the

2625
01:54:17,279 --> 01:54:21,279
main thing i want

2626
01:54:18,880 --> 01:54:22,719
um is to make sure that it's that we're

2627
01:54:21,279 --> 01:54:26,158
not going to get stuck

2628
01:54:22,719 --> 01:54:29,039
right um and so i think that's okay

2629
01:54:26,158 --> 01:54:29,679
but like i said i'm nervous that if i

2630
01:54:29,039 --> 01:54:31,840
then go to

2631
01:54:29,679 --> 01:54:33,679
the subdivision thing so that it can't

2632
01:54:31,840 --> 01:54:36,319
take large steps anymore

2633
01:54:33,679 --> 01:54:37,760
if the default is can't move then it

2634
01:54:36,319 --> 01:54:42,158
might get stuck again

2635
01:54:37,760 --> 01:54:43,280
right um so i'm at least a little bit

2636
01:54:42,158 --> 01:54:46,319
worried about that

2637
01:54:43,279 --> 01:54:51,840
it's it's not it's not

2638
01:54:46,319 --> 01:54:51,840
wouldn't be my first choice right um

2639
01:55:23,920 --> 01:55:27,520
so i don't know i don't know what to do

2640
01:55:25,760 --> 01:55:30,159
about that let's start adding the

2641
01:55:27,520 --> 01:55:30,159
subdivision

2642
01:55:30,840 --> 01:55:34,000
um i guess

2643
01:55:32,639 --> 01:55:37,140
for now um

2644
01:55:34,000 --> 01:55:37,140
[Music]

2645
01:55:39,439 --> 01:55:43,598
and maybe we'll just call that good

2646
01:55:41,359 --> 01:55:45,118
enough but i don't know i may want some

2647
01:55:43,599 --> 01:55:46,800
more i just don't know if that's

2648
01:55:45,118 --> 01:55:49,039
sufficient

2649
01:55:46,800 --> 01:55:49,039
right

2650
01:55:50,560 --> 01:55:56,239
um i i just don't know if this is

2651
01:55:54,238 --> 01:55:58,238
so so i'm i don't know what i want to

2652
01:55:56,238 --> 01:56:00,319
say about that um

2653
01:55:58,238 --> 01:56:01,759
that worries me a little so we'll start

2654
01:56:00,319 --> 01:56:04,479
though by just doing this

2655
01:56:01,760 --> 01:56:05,760
uh desired subdivision part here so

2656
01:56:04,479 --> 01:56:08,158
basically we just have a t

2657
01:56:05,760 --> 01:56:08,159
value

2658
01:56:11,679 --> 01:56:15,679
and all i want to do is i just want to

2659
01:56:13,920 --> 01:56:19,359
make sure that we subdivide this

2660
01:56:15,679 --> 01:56:23,760
into a reasonable number of steps

2661
01:56:19,359 --> 01:56:26,238
uh and so if it's too large

2662
01:56:23,760 --> 01:56:28,079
i want to subdivide it i want to like

2663
01:56:26,238 --> 01:56:30,718
basically bisect it

2664
01:56:28,079 --> 01:56:33,118
uh so that large motions get bisected

2665
01:56:30,719 --> 01:56:36,800
into smaller motions

2666
01:56:33,118 --> 01:56:38,559
until we get down below um a particular

2667
01:56:36,800 --> 01:56:43,440
threshold

2668
01:56:38,560 --> 01:56:48,000
and so you know

2669
01:56:43,439 --> 01:56:48,000
something along the lines of

2670
01:56:49,679 --> 01:56:57,840
let's suppose that we have a

2671
01:56:54,840 --> 01:56:57,840
um

2672
01:57:04,238 --> 01:57:14,079
a total length

2673
01:57:10,560 --> 01:57:17,119
that's whatever the delta p was right

2674
01:57:14,079 --> 01:57:19,359
and there's some stuff we want to do

2675
01:57:17,118 --> 01:57:20,880
separate from this that's like reverse

2676
01:57:19,359 --> 01:57:21,439
engineering the acceleration and the

2677
01:57:20,880 --> 01:57:25,840
position

2678
01:57:21,439 --> 01:57:25,839
there's this other stuff we wanted yeah

2679
01:57:39,198 --> 01:57:42,719
we probably want to be position based

2680
01:57:41,118 --> 01:57:45,118
and reverse solve

2681
01:57:42,719 --> 01:57:46,079
but that's a separate issue for physics

2682
01:57:45,118 --> 01:57:47,279
purposes that

2683
01:57:46,079 --> 01:57:49,118
it does nothing to do with collision

2684
01:57:47,279 --> 01:57:51,039
detection it's just what we will do at

2685
01:57:49,118 --> 01:57:53,759
some point

2686
01:57:51,039 --> 01:57:55,279
don't remind me of that we'll take the

2687
01:57:53,760 --> 01:57:58,480
total length here

2688
01:57:55,279 --> 01:58:02,319
uh and what i want to do is like a max

2689
01:57:58,479 --> 01:58:04,319
or like a a step length right

2690
01:58:02,319 --> 01:58:06,319
and i want to say that look i don't want

2691
01:58:04,319 --> 01:58:09,759
anyone moving more than some

2692
01:58:06,319 --> 01:58:11,759
amount whatever that amount is um

2693
01:58:09,760 --> 01:58:13,199
and this is probably like some

2694
01:58:11,760 --> 01:58:17,119
fundamental constant

2695
01:58:13,198 --> 01:58:21,118
like you know uh

2696
01:58:17,118 --> 01:58:23,920
physics or like uh

2697
01:58:21,118 --> 01:58:25,039
motion displacement size or something

2698
01:58:23,920 --> 01:58:28,399
like this

2699
01:58:25,039 --> 01:58:30,880
where we say when we're doing this

2700
01:58:28,399 --> 01:58:31,839
we've got some fundamental constant

2701
01:58:30,880 --> 01:58:35,679
that's like

2702
01:58:31,840 --> 01:58:38,800
you know 0.01 or something

2703
01:58:35,679 --> 01:58:40,719
and the apron that we use

2704
01:58:38,800 --> 01:58:41,840
you know and and maybe it's more like

2705
01:58:40,719 --> 01:58:44,319
that

2706
01:58:41,840 --> 01:58:45,760
and so the apron that we use is like a

2707
01:58:44,319 --> 01:58:48,319
tenth

2708
01:58:45,760 --> 01:58:51,119
you know of the motion displacement size

2709
01:58:48,319 --> 01:58:53,359
or something like that

2710
01:58:51,118 --> 01:58:54,719
i don't know um and then the motion

2711
01:58:53,359 --> 01:58:58,479
displacement size

2712
01:58:54,719 --> 01:59:00,239
is is this right um

2713
01:58:58,479 --> 01:59:02,000
and so we want to do is say how many

2714
01:59:00,238 --> 01:59:04,319
steps are we going to have

2715
01:59:02,000 --> 01:59:06,479
so we would say like you know the step

2716
01:59:04,319 --> 01:59:08,319
count here

2717
01:59:06,479 --> 01:59:09,759
is going to be the total length of the

2718
01:59:08,319 --> 01:59:11,679
thing

2719
01:59:09,760 --> 01:59:13,920
divided by how many steps there should

2720
01:59:11,679 --> 01:59:13,920
be

2721
01:59:14,238 --> 01:59:19,919
and we know that we want at least one

2722
01:59:17,198 --> 01:59:19,919
step count

2723
01:59:25,198 --> 01:59:30,158
so however many there are uh we know

2724
01:59:28,079 --> 01:59:33,439
that there can't be

2725
01:59:30,158 --> 01:59:36,079
less than one step

2726
01:59:33,439 --> 01:59:36,079
you know what i'm saying

2727
01:59:40,880 --> 01:59:48,719
all right

2728
01:59:44,399 --> 01:59:52,559
fine just fine whatever

2729
01:59:48,719 --> 01:59:54,560
be that way no one cares about you

2730
01:59:52,560 --> 01:59:56,320
uh okay so we're going to go ahead and

2731
01:59:54,560 --> 02:00:00,400
say produce a step count

2732
01:59:56,319 --> 02:00:00,399
it has to be are you kidding me

2733
02:00:03,599 --> 02:00:10,079
there jeez

2734
02:00:06,639 --> 02:00:14,239
um so it has to be at least

2735
02:00:10,079 --> 02:00:16,238
one and it will be up to

2736
02:00:14,238 --> 02:00:18,000
uh the total length divided by the

2737
02:00:16,238 --> 02:00:19,598
motion displacement size so if there's a

2738
02:00:18,000 --> 02:00:21,198
longer one

2739
02:00:19,599 --> 02:00:23,119
like someone's trying to move an entire

2740
02:00:21,198 --> 02:00:24,399
unit in one frame we'll actually do 10

2741
02:00:23,118 --> 02:00:26,399
subdivisions

2742
02:00:24,399 --> 02:00:27,920
that's probably too much so we're

2743
02:00:26,399 --> 02:00:31,279
probably gonna make this

2744
02:00:27,920 --> 02:00:33,279
not be that large as it is right now

2745
02:00:31,279 --> 02:00:36,158
but you know that's a constant we can

2746
02:00:33,279 --> 02:00:39,439
tweak based on what we want

2747
02:00:36,158 --> 02:00:40,799
um our largest things to be it's so it's

2748
02:00:39,439 --> 02:00:42,238
sort of a separate issue

2749
02:00:40,800 --> 02:00:44,560
right we don't have to care about that

2750
02:00:42,238 --> 02:00:44,559
right now

2751
02:00:49,840 --> 02:00:54,480
all right so looking in here where we

2752
02:00:52,960 --> 02:00:56,000
get the step count

2753
02:00:54,479 --> 02:00:58,718
we would then just say look we're going

2754
02:00:56,000 --> 02:01:00,719
to do our step index

2755
02:00:58,719 --> 02:01:01,840
and we're going to go through the step

2756
02:01:00,719 --> 02:01:05,359
counts

2757
02:01:01,840 --> 02:01:06,800
one by one and for each one of them

2758
02:01:05,359 --> 02:01:08,799
we're just going to produce

2759
02:01:06,800 --> 02:01:10,960
a new desired position and attempt to

2760
02:01:08,800 --> 02:01:11,679
move the entity locally from its current

2761
02:01:10,960 --> 02:01:15,599
position to

2762
02:01:11,679 --> 02:01:15,599
to wherever that is right

2763
02:01:15,760 --> 02:01:23,840
um and

2764
02:01:31,679 --> 02:01:37,840
i mean i guess we kind of just want to

2765
02:01:33,520 --> 02:01:37,840
stop if it can't

2766
02:01:49,439 --> 02:01:53,519
so i i mean i guess we kind of really

2767
02:01:52,639 --> 02:01:55,599
actually

2768
02:01:53,520 --> 02:01:57,599
want to just stop if it can't so we want

2769
02:01:55,599 --> 02:02:04,880
to do like

2770
02:01:57,599 --> 02:02:19,840
you know we may just want to do

2771
02:02:04,880 --> 02:02:19,840
something like this

2772
02:02:21,679 --> 02:02:27,840
so we would take the desired position

2773
02:02:28,639 --> 02:02:35,039
uh would be

2774
02:02:32,719 --> 02:02:36,800
would be the entity's uh original

2775
02:02:35,039 --> 02:02:40,238
position

2776
02:02:36,800 --> 02:02:40,239
right so so

2777
02:02:44,840 --> 02:02:47,840
like

2778
02:02:48,158 --> 02:02:54,479
before anybody moved it um

2779
02:02:51,359 --> 02:02:57,679
it would be the original position uh

2780
02:02:54,479 --> 02:03:00,238
plus the step index over the step count

2781
02:02:57,679 --> 02:03:01,440
times the delta that we were trying to

2782
02:03:00,238 --> 02:03:03,389
move

2783
02:03:01,439 --> 02:03:04,559
right um

2784
02:03:03,390 --> 02:03:07,440
[Music]

2785
02:03:04,560 --> 02:03:09,039
so that much of the thing we like add in

2786
02:03:07,439 --> 02:03:12,479
each time

2787
02:03:09,039 --> 02:03:15,599
you know what i'm saying to you uh

2788
02:03:12,479 --> 02:03:17,839
so like if the step index uh

2789
02:03:15,599 --> 02:03:19,599
and and it's it's gonna be like plus one

2790
02:03:17,840 --> 02:03:20,319
because the step index starts at zero so

2791
02:03:19,599 --> 02:03:22,639
we wanna

2792
02:03:20,319 --> 02:03:23,920
start if their step count was one we'd

2793
02:03:22,639 --> 02:03:25,279
wanna move it the whole way

2794
02:03:23,920 --> 02:03:26,960
because we're only gonna try once if the

2795
02:03:25,279 --> 02:03:27,519
step count is two we wanna start out at

2796
02:03:26,960 --> 02:03:30,399
50

2797
02:03:27,520 --> 02:03:32,960
and then try to go to 100 right so we've

2798
02:03:30,399 --> 02:03:36,079
basically got a t

2799
02:03:32,960 --> 02:03:38,719
on the uh like on the step so we can

2800
02:03:36,079 --> 02:03:38,719
compute that

2801
02:03:38,800 --> 02:03:46,239
like so and then use that to move

2802
02:03:43,198 --> 02:03:50,319
our saucy gentlemen whoever

2803
02:03:46,238 --> 02:03:52,319
they are and then what we want to do

2804
02:03:50,319 --> 02:03:53,359
is we want to let move entity locally

2805
02:03:52,319 --> 02:03:56,559
tell us if it

2806
02:03:53,359 --> 02:03:58,319
succeeded if it didn't succeed

2807
02:03:56,560 --> 02:03:59,679
then we don't want to keep trying

2808
02:03:58,319 --> 02:04:03,439
because there's no

2809
02:03:59,679 --> 02:04:04,319
uh point in doing so uh so in here we

2810
02:04:03,439 --> 02:04:08,559
just want to say

2811
02:04:04,319 --> 02:04:11,599
look if we never hit a positive case

2812
02:04:08,560 --> 02:04:13,840
then just give up uh and stop trying

2813
02:04:11,599 --> 02:04:17,039
because you're never going to

2814
02:04:13,840 --> 02:04:20,800
uh ever get anywhere

2815
02:04:17,039 --> 02:04:22,399
um uh beyond that right or you could but

2816
02:04:20,800 --> 02:04:23,119
you might tunnel so we don't even want

2817
02:04:22,399 --> 02:04:26,319
you to try

2818
02:04:23,118 --> 02:04:26,319
might be the better way to say it

2819
02:04:26,560 --> 02:04:30,079
um so i think that's what we want there

2820
02:04:29,359 --> 02:04:33,039
uh

2821
02:04:30,078 --> 02:04:35,439
that is missing a parenthesis i think is

2822
02:04:33,039 --> 02:04:38,639
it no it's not i take it back

2823
02:04:35,439 --> 02:04:41,519
um what is the problem here

2824
02:04:38,639 --> 02:04:42,400
missing but oh yeah well okay i'll give

2825
02:04:41,520 --> 02:04:53,840
you that

2826
02:04:42,399 --> 02:04:53,839
i'll give you that one uh

2827
02:04:55,439 --> 02:04:59,439
so for reasons unknown

2828
02:05:01,039 --> 02:05:07,840
that seemed to allow those two to move

2829
02:05:04,479 --> 02:05:07,839
on to each other

2830
02:05:08,158 --> 02:05:14,879
which is very strange so that actually

2831
02:05:11,439 --> 02:05:14,879
seems bad what i just did

2832
02:05:17,039 --> 02:05:21,840
and also the glove can't move but the

2833
02:05:19,198 --> 02:05:21,839
other dude can

2834
02:05:21,920 --> 02:05:26,639
which is very strange oh i guess because

2835
02:05:24,238 --> 02:05:35,839
it sunk into the floor

2836
02:05:26,639 --> 02:05:35,840
is the problem there

2837
02:05:37,198 --> 02:05:42,078
so this is why you can see why i

2838
02:05:45,840 --> 02:06:03,840
i wanted that to accept the 2 the 2p

2839
02:05:48,560 --> 02:06:03,840
value right um

2840
02:06:26,880 --> 02:06:33,599
hmm hmm he says so i'm curious about

2841
02:06:31,279 --> 02:06:33,599
uh

2842
02:06:34,880 --> 02:06:38,000
other kinds of motion you can see it

2843
02:06:37,439 --> 02:06:41,279
having

2844
02:06:38,000 --> 02:06:41,279
it's struggling a little bit

2845
02:06:41,359 --> 02:06:47,519
so you can see like this dude is

2846
02:06:44,399 --> 02:06:49,759
properly not allowed to move

2847
02:06:47,520 --> 02:06:49,760
right

2848
02:06:51,198 --> 02:06:54,319
and if he were a cylinder he'd glide off

2849
02:06:52,960 --> 02:06:58,000
that edge which is why

2850
02:06:54,319 --> 02:06:59,920
we want that right

2851
02:06:58,000 --> 02:07:01,439
so he's he's probably not allowed to

2852
02:06:59,920 --> 02:07:03,599
root you can see the subdivisions

2853
02:07:01,439 --> 02:07:06,879
actually chugs the frame right there

2854
02:07:03,599 --> 02:07:07,760
right but the problem that we're going

2855
02:07:06,880 --> 02:07:13,840
to have here

2856
02:07:07,760 --> 02:07:13,840
is just like okay so at that point

2857
02:07:14,078 --> 02:07:21,679
the subdivision for the motion is

2858
02:07:18,158 --> 02:07:22,319
down to a level where it really doesn't

2859
02:07:21,679 --> 02:07:24,840
allow

2860
02:07:22,319 --> 02:07:26,639
the glove to like get out of

2861
02:07:24,840 --> 02:07:29,840
interpenetration

2862
02:07:26,639 --> 02:07:31,260
so i don't know what we want to do about

2863
02:07:29,840 --> 02:07:34,390
that

2864
02:07:31,260 --> 02:07:34,390
[Music]

2865
02:07:38,840 --> 02:07:41,840
um

2866
02:07:45,679 --> 02:07:55,840
that's a tough one

2867
02:08:06,078 --> 02:08:11,279
i'm also at least a little weirded out

2868
02:08:09,039 --> 02:08:11,279
by

2869
02:08:12,560 --> 02:08:16,480
how many steps that seems to have been

2870
02:08:20,840 --> 02:08:25,039
taking

2871
02:08:22,479 --> 02:08:27,759
because this really should not happen

2872
02:08:25,039 --> 02:08:27,760
that much

2873
02:08:32,960 --> 02:08:39,198
in my opinion

2874
02:08:37,198 --> 02:08:41,598
because people should not be moving that

2875
02:08:39,198 --> 02:08:41,598
fast

2876
02:08:42,479 --> 02:08:49,039
um i'm going to get rid of the push

2877
02:08:46,399 --> 02:08:50,879
volume outline there

2878
02:08:49,039 --> 02:08:53,599
uh since that is generating a bunch of

2879
02:08:50,880 --> 02:08:57,599
stuff but like

2880
02:08:53,599 --> 02:08:58,960
it's really kind of remarkably

2881
02:08:57,599 --> 02:08:59,840
hitting performance i wonder if i did

2882
02:08:58,960 --> 02:09:00,639
something weird there because there's

2883
02:08:59,840 --> 02:09:03,360
not that

2884
02:09:00,639 --> 02:09:04,000
many like there's a lot of chugging

2885
02:09:03,359 --> 02:09:07,198
going on there

2886
02:09:04,000 --> 02:09:09,920
right which suggests that we're sort of

2887
02:09:07,198 --> 02:09:12,960
subdividing this thing a lot which

2888
02:09:09,920 --> 02:09:16,800
doesn't make a whole lot of sense to me

2889
02:09:12,960 --> 02:09:16,800
like you see how harsh that is

2890
02:09:17,118 --> 02:09:20,960
right um

2891
02:09:27,439 --> 02:09:31,439
so that's a bit strange and i'm

2892
02:09:29,118 --> 02:09:35,039
wondering why there would be something

2893
02:09:31,439 --> 02:09:35,039
trying to do that much

2894
02:09:38,560 --> 02:09:43,280
like like what is this step count

2895
02:09:40,399 --> 02:09:43,279
actually getting up to

2896
02:09:44,560 --> 02:09:48,000
such that we're seeing that now granted

2897
02:09:46,479 --> 02:09:48,718
like i said there's no spatial partition

2898
02:09:48,000 --> 02:09:50,319
so

2899
02:09:48,719 --> 02:09:51,920
it's looping over all the entities for

2900
02:09:50,319 --> 02:09:53,599
those collision detection cases so it

2901
02:09:51,920 --> 02:09:56,960
should be slow

2902
02:09:53,599 --> 02:09:56,960
but i mean look at that

2903
02:09:57,520 --> 02:10:04,400
look right off the bat it hit one

2904
02:10:01,279 --> 02:10:08,800
where it was trying to take a step of 10

2905
02:10:04,399 --> 02:10:12,000
right um and motion displacement

2906
02:10:08,800 --> 02:10:15,360
size is 0.1 so

2907
02:10:12,000 --> 02:10:19,039
that's suggesting that on on one frame

2908
02:10:15,359 --> 02:10:23,279
right it was trying to go a distance of

2909
02:10:19,039 --> 02:10:26,319
one unit on that frame alone

2910
02:10:23,279 --> 02:10:30,238
which seems a little bit broken um

2911
02:10:26,319 --> 02:10:35,118
and so i'm just curious to know like who

2912
02:10:30,238 --> 02:10:36,718
is that like who is doing that and why

2913
02:10:35,118 --> 02:10:38,799
so let me go ahead and see maybe i've

2914
02:10:36,719 --> 02:10:41,039
got something stupid in the code here

2915
02:10:38,800 --> 02:10:42,000
um also i think we're out of time so i

2916
02:10:41,039 --> 02:10:43,439
should probably stop because

2917
02:10:42,000 --> 02:10:45,599
we did mostly we want to do today which

2918
02:10:43,439 --> 02:10:46,479
was rewrite that routine to get us into

2919
02:10:45,599 --> 02:10:48,639
a better position

2920
02:10:46,479 --> 02:10:50,158
for doing stuff but yeah it's kind of a

2921
02:10:48,639 --> 02:10:51,920
separate issue

2922
02:10:50,158 --> 02:10:56,078
um so let's see like what's the step

2923
02:10:51,920 --> 02:11:01,520
count here 15

2924
02:10:56,078 --> 02:11:04,399
uh oops so it's trying to move 1.5

2925
02:11:01,520 --> 02:11:04,400
which is nuts

2926
02:11:05,439 --> 02:11:12,799
um that's just nuts we need uh it's it's

2927
02:11:09,359 --> 02:11:15,519
a floating guy so we need some

2928
02:11:12,800 --> 02:11:17,360
limits on how much these people are

2929
02:11:15,520 --> 02:11:20,400
supposed to be moving right that's just

2930
02:11:17,359 --> 02:11:22,639
really crazy um

2931
02:11:20,399 --> 02:11:24,000
and you know we could artificially cap

2932
02:11:22,639 --> 02:11:27,359
it so we could just say

2933
02:11:24,000 --> 02:11:29,679
look the step count here is

2934
02:11:27,359 --> 02:11:29,679
you know

2935
02:11:37,439 --> 02:11:41,598
is only five uh and so we'll just say

2936
02:11:39,439 --> 02:11:44,960
like to do casey

2937
02:11:41,599 --> 02:11:48,560
uh look into capping

2938
02:11:44,960 --> 02:11:50,239
more directly

2939
02:11:48,560 --> 02:11:51,599
right because we don't really know how

2940
02:11:50,238 --> 02:11:53,359
we want to do this but but

2941
02:11:51,599 --> 02:11:55,119
that is way too much and so that means

2942
02:11:53,359 --> 02:11:56,719
someone's asking for unreasonably large

2943
02:11:55,118 --> 02:11:58,479
moves which makes sense because we just

2944
02:11:56,719 --> 02:12:00,399
slap some springs on some

2945
02:11:58,479 --> 02:12:02,000
like you know it makes sense that that

2946
02:12:00,399 --> 02:12:03,679
kind of nonsense is happening

2947
02:12:02,000 --> 02:12:06,399
but let's just take that out of the

2948
02:12:03,679 --> 02:12:10,078
equation for now

2949
02:12:06,399 --> 02:12:12,879
um so we'll see uh

2950
02:12:10,078 --> 02:12:13,198
we'll see if that's any better and now

2951
02:12:12,880 --> 02:12:15,359
but

2952
02:12:13,198 --> 02:12:16,799
you know we still don't have any any

2953
02:12:15,359 --> 02:12:17,920
real plan and so this is our thing to

2954
02:12:16,800 --> 02:12:19,520
think about for next week

2955
02:12:17,920 --> 02:12:21,039
how do we want to start progressing a

2956
02:12:19,520 --> 02:12:22,880
little bit better on this routine

2957
02:12:21,039 --> 02:12:24,880
for how we deal with the like startup

2958
02:12:22,880 --> 02:12:26,400
and shutdown cases there because

2959
02:12:24,880 --> 02:12:30,078
since right at the moment we're only

2960
02:12:26,399 --> 02:12:34,319
doing that still seem too slow

2961
02:12:30,078 --> 02:12:37,198
um yeah there's still way too much

2962
02:12:34,319 --> 02:12:37,198
lagginess there

2963
02:12:37,679 --> 02:12:42,480
which granted might just be because hey

2964
02:12:39,198 --> 02:12:44,960
it loops over all the things

2965
02:12:42,479 --> 02:12:46,879
um so it could just be because hey this

2966
02:12:44,960 --> 02:12:48,880
doesn't have a spatial partition

2967
02:12:46,880 --> 02:12:50,719
we need a spatial partition so you know

2968
02:12:48,880 --> 02:12:53,039
it could be that

2969
02:12:50,719 --> 02:12:53,039
um

2970
02:12:54,719 --> 02:13:00,560
but we'll see sorry

2971
02:13:00,880 --> 02:13:17,920
uh let's go to brief q a

2972
02:13:16,479 --> 02:13:20,399
why would you cpu absolutely the render

2973
02:13:17,920 --> 02:13:24,078
is done by gpu uh it's lighting

2974
02:13:20,399 --> 02:13:25,519
is the is the main link the reason um

2975
02:13:24,078 --> 02:13:27,759
we do the lighting on the cpu side right

2976
02:13:25,520 --> 02:13:27,760
now

2977
02:13:28,319 --> 02:13:31,519
if we didn't do that if the lighting was

2978
02:13:30,719 --> 02:13:33,039
disabled

2979
02:13:31,520 --> 02:13:35,520
so like if you know if we went into the

2980
02:13:33,039 --> 02:13:36,319
lighting and just say you don't have to

2981
02:13:35,520 --> 02:13:44,719
do lighting

2982
02:13:36,319 --> 02:13:49,039
so you know um

2983
02:13:44,719 --> 02:13:49,039
so in here somewhere we just said

2984
02:13:51,118 --> 02:13:56,158
you know like that um

2985
02:13:54,319 --> 02:13:57,439
then we would we wouldn't have to worry

2986
02:13:56,158 --> 02:14:00,158
about it uh

2987
02:13:57,439 --> 02:14:01,039
i hate unreachable code warnings because

2988
02:14:00,158 --> 02:14:03,359
they

2989
02:14:01,039 --> 02:14:04,639
i want a way to just say like returning

2990
02:14:03,359 --> 02:14:08,399
yes i know

2991
02:14:04,639 --> 02:14:10,960
like i know it's a re it's

2992
02:14:08,399 --> 02:14:13,679
yes like like we all know it like thank

2993
02:14:10,960 --> 02:14:17,039
you so much for your help

2994
02:14:13,679 --> 02:14:17,840
um but you know they can't do that or

2995
02:14:17,039 --> 02:14:20,078
whatever

2996
02:14:17,840 --> 02:14:20,078
so

2997
02:14:21,118 --> 02:14:23,439
here

2998
02:14:24,719 --> 02:14:29,359
so if you like nerfed the lighting um

2999
02:14:30,479 --> 02:14:36,959
and so you were just doing this right

3000
02:14:33,760 --> 02:14:39,039
uh then if we

3001
02:14:36,960 --> 02:14:41,520
switch this to debug mode you you

3002
02:14:39,039 --> 02:14:44,960
wouldn't probably have

3003
02:14:41,520 --> 02:14:48,159
a whole lot of need for it um but

3004
02:14:44,960 --> 02:14:51,439
you know i don't know we'll see so

3005
02:14:48,158 --> 02:14:52,719
uh or not

3006
02:14:51,439 --> 02:14:54,238
so it looks like we still are pretty

3007
02:14:52,719 --> 02:14:57,039
slow i'm not so i'm not sure where

3008
02:14:54,238 --> 02:14:57,039
that's coming from

3009
02:15:00,078 --> 02:15:06,038
we could run the profiler and see

3010
02:15:02,970 --> 02:15:06,039
[Music]

3011
02:15:06,479 --> 02:15:12,559
so what's the actual slow part uh

3012
02:15:09,520 --> 02:15:15,440
it could be also in our debug our

3013
02:15:12,560 --> 02:15:17,440
super crappy debug system which i

3014
02:15:15,439 --> 02:15:22,319
suppose is also an issue but

3015
02:15:17,439 --> 02:15:37,839
um let's take a look

3016
02:15:22,319 --> 02:15:37,840
at who that is

3017
02:15:52,399 --> 02:15:57,519
so here we are um

3018
02:15:55,140 --> 02:16:01,039
[Music]

3019
02:15:57,520 --> 02:16:04,719
so update and render entities

3020
02:16:01,039 --> 02:16:07,279
is the other big frame time

3021
02:16:04,719 --> 02:16:08,880
uh and i guess we don't really know it

3022
02:16:07,279 --> 02:16:09,439
could even be the thing that we just

3023
02:16:08,880 --> 02:16:12,159
wrote

3024
02:16:09,439 --> 02:16:12,799
that is the problem there but who knows

3025
02:16:12,158 --> 02:16:14,719
so

3026
02:16:12,800 --> 02:16:16,719
if we took out some of that stuff we

3027
02:16:14,719 --> 02:16:18,480
could we can maybe start to see

3028
02:16:16,719 --> 02:16:20,239
like maybe i can go in there and to move

3029
02:16:18,479 --> 02:16:21,198
entity and say like is the stuff we're

3030
02:16:20,238 --> 02:16:25,598
working on now

3031
02:16:21,198 --> 02:16:25,598
which is crappy um you know

3032
02:16:25,840 --> 02:16:30,159
is that something we could uh that is a

3033
02:16:29,039 --> 02:16:33,840
problem

3034
02:16:30,158 --> 02:16:33,840
timed function

3035
02:16:37,200 --> 02:16:46,319
isn't that supposed to just work what is

3036
02:16:38,638 --> 02:16:49,598
the problem with timed function

3037
02:16:46,318 --> 02:16:52,000
all right um i don't know yet to what

3038
02:16:49,599 --> 02:16:53,599
extent move entity is now a problem

3039
02:16:52,000 --> 02:17:01,840
uh because we're doing all this voxel

3040
02:16:53,599 --> 02:17:01,840
stuff in there but we can take a look

3041
02:17:07,200 --> 02:17:10,719
yeah so it's it's what we're doing now

3042
02:17:09,040 --> 02:17:13,519
is part of the problem although

3043
02:17:10,718 --> 02:17:14,638
update and render entities is also kind

3044
02:17:13,519 --> 02:17:16,639
of slow

3045
02:17:14,638 --> 02:17:17,839
so all the crap that's going on in there

3046
02:17:16,638 --> 02:17:22,799
is not great

3047
02:17:17,840 --> 02:17:26,000
um so like if you imagined

3048
02:17:22,799 --> 02:17:26,840
uh you nerfed this out so you just said

3049
02:17:26,000 --> 02:17:31,040
like

3050
02:17:26,840 --> 02:17:34,000
ndp plus equals delta p

3051
02:17:31,040 --> 02:17:34,000
and this went away

3052
02:17:36,558 --> 02:17:40,959
so you don't have that loop over all the

3053
02:17:38,318 --> 02:17:45,279
entities anymore

3054
02:17:40,959 --> 02:17:47,358
then you run in debug mode and uh

3055
02:17:45,280 --> 02:17:48,960
now we're down to just the updated

3056
02:17:47,359 --> 02:17:51,439
render entities call

3057
02:17:48,959 --> 02:17:51,438
i think

3058
02:17:55,599 --> 02:18:11,840
compute light propagation work i have to

3059
02:17:58,478 --> 02:18:11,840
turn off

3060
02:18:17,040 --> 02:18:21,920
um and so now like our update and render

3061
02:18:19,599 --> 02:18:24,159
entities call is still kind of crappy

3062
02:18:21,920 --> 02:18:25,280
right um because you can see like here's

3063
02:18:24,159 --> 02:18:27,599
us not calling that

3064
02:18:25,280 --> 02:18:29,200
and we're running along at 60 frames a

3065
02:18:27,599 --> 02:18:33,599
second right

3066
02:18:29,200 --> 02:18:36,240
and then uh as soon as we actually start

3067
02:18:33,599 --> 02:18:39,439
in the game though it's it drops down

3068
02:18:36,239 --> 02:18:42,879
quite a bit

3069
02:18:39,439 --> 02:18:44,719
so you can see here like you know

3070
02:18:42,879 --> 02:18:46,079
this is totally playable though you

3071
02:18:44,718 --> 02:18:49,919
could play at this frame rate

3072
02:18:46,079 --> 02:18:52,558
and be fine um

3073
02:18:49,920 --> 02:18:54,318
so actually yeah like it's it's mostly

3074
02:18:52,558 --> 02:18:56,239
just the lighting and the collision

3075
02:18:54,318 --> 02:18:57,359
now the collision will get much faster

3076
02:18:56,239 --> 02:18:58,879
as we work on it

3077
02:18:57,359 --> 02:19:01,439
so that we could probably just define

3078
02:18:58,879 --> 02:19:04,079
but the lighting there's nothing

3079
02:19:01,439 --> 02:19:06,159
like the lighting is what it is so that

3080
02:19:04,079 --> 02:19:08,478
as long as the lighting stays cpu side

3081
02:19:06,159 --> 02:19:09,840
we need optimization there

3082
02:19:08,478 --> 02:19:13,039
and there's not much we can really do

3083
02:19:09,840 --> 02:19:16,398
about that right that's just how it is

3084
02:19:13,040 --> 02:19:16,399
um so yeah

3085
02:19:17,280 --> 02:19:21,200
doesn't the orig p need to be updated

3086
02:19:19,599 --> 02:19:25,120
each step

3087
02:19:21,200 --> 02:19:27,200
um no i don't think so

3088
02:19:25,120 --> 02:19:28,479
so if you look at how this this loop is

3089
02:19:27,200 --> 02:19:32,000
working

3090
02:19:28,478 --> 02:19:35,119
it basically says look i'm gonna go from

3091
02:19:32,000 --> 02:19:37,359
where i was and i'm gonna move

3092
02:19:35,120 --> 02:19:39,439
the percentage of the requested delta

3093
02:19:37,359 --> 02:19:42,639
that is the step i'm on

3094
02:19:39,439 --> 02:19:43,599
right so it's always starting at the

3095
02:19:42,638 --> 02:19:45,839
start point

3096
02:19:43,599 --> 02:19:47,519
and moving some percentage of the delta

3097
02:19:45,840 --> 02:19:49,439
going from zero percent

3098
02:19:47,519 --> 02:19:50,719
well going from some fractional percent

3099
02:19:49,439 --> 02:19:53,200
to one

3100
02:19:50,719 --> 02:19:55,760
to one hundred percent over the course

3101
02:19:53,200 --> 02:19:55,760
of this loop

3102
02:19:55,920 --> 02:20:00,478
right um and i did it that way on

3103
02:19:58,959 --> 02:20:02,559
purpose i didn't wanna

3104
02:20:00,478 --> 02:20:04,318
keep adding small vectors together

3105
02:20:02,559 --> 02:20:06,239
because if you do that you may end up

3106
02:20:04,318 --> 02:20:09,760
again in numerical precision land

3107
02:20:06,239 --> 02:20:09,760
where it doesn't actually work correctly

3108
02:20:11,959 --> 02:20:14,959
so

