1
00:00:02,500 --> 00:00:05,000
Hello everyone, and welcome to handmade hero.

2
00:00:05,000 --> 00:00:08,200
The show we code a complete game live on stream.

3
00:00:08,200 --> 00:00:13,200
Today we are going to go continue what we started yesterday.

4
00:00:13,600 --> 00:00:15,900
We are now moving back.

5
00:00:15,900 --> 00:00:19,200
We kind of have a sort in place that we liked and that we think is

6
00:00:19,200 --> 00:00:19,900
reasonable.

7
00:00:20,600 --> 00:00:24,500
We'll probably have to maybe play with it a little bit as we go

8
00:00:24,500 --> 00:00:29,400
forwards, but we need to kind of come back now to the sort of the

9
00:00:29,400 --> 00:00:31,100
final pass on.

10
00:00:31,600 --> 00:00:36,300
Z handling in the renderer and in order to do that we kind of sketched

11
00:00:36,300 --> 00:00:37,800
out some stuff that we need to do.

12
00:00:39,000 --> 00:00:44,600
And it's probably going to be our job for next week, but I mean,

13
00:00:44,700 --> 00:00:48,200
there's no sense wasting a day so we should get started on it as much

14
00:00:48,200 --> 00:00:48,800
as possible.

15
00:00:48,800 --> 00:00:52,000
Yesterday, we kind of started playing around with it and today I think

16
00:00:52,000 --> 00:00:55,000
we can start making some Headway in and put us ourselves in a good

17
00:00:55,000 --> 00:00:57,300
position to get it done next week.

18
00:00:58,700 --> 00:01:00,200
Like I said, there isn't anything magical?

19
00:01:00,200 --> 00:01:01,800
That's about to happen really?

20
00:01:01,800 --> 00:01:03,400
All we're doing is now going through.

21
00:01:03,400 --> 00:01:06,400
Now that we definitively know how we want to handle Z because we kind

22
00:01:06,400 --> 00:01:08,600
of had to experiment to figure out what we really wanted.

23
00:01:09,400 --> 00:01:11,900
Because there's an art style issues, there's code issues.

24
00:01:11,900 --> 00:01:17,300
There's a lot of factors that went into deciding how Z really should

25
00:01:17,300 --> 00:01:20,200
work and what we wanted Z to do.

26
00:01:20,800 --> 00:01:25,400
And so now that we do actually have a coherent idea of what Z should

27
00:01:25,400 --> 00:01:30,300
do, we have to go through and make sure that we just do a certain

28
00:01:30,300 --> 00:01:34,600
amount of cleaning for how that pipeline looks because otherwise we're

29
00:01:34,600 --> 00:01:37,600
going to start building everything on top of, kind of a frail and

30
00:01:37,600 --> 00:01:38,600
janky system.

31
00:01:39,300 --> 00:01:41,300
Of how Z was being handled before.

32
00:01:41,600 --> 00:01:44,100
So that's really what I want to get to is the place where we're

33
00:01:44,100 --> 00:01:48,100
starting to feel confident about our use of Z through the renderer

34
00:01:48,100 --> 00:01:51,300
where there aren't a lot of gotchas, or why did that, do what it did?

35
00:01:51,300 --> 00:01:54,800
We want to be in a place where we're like, okay, we have a coherent

36
00:01:54,800 --> 00:01:58,800
idea of how we specify Z and off, we go.

37
00:02:07,100 --> 00:02:08,900
Because for those of you who have watched the stream since the

38
00:02:08,900 --> 00:02:11,400
beginning, you know that there's been a lot of times when we like what

39
00:02:11,400 --> 00:02:14,000
should you do, okay, halfsies stop doing that.

40
00:02:14,000 --> 00:02:14,300
Okay.

41
00:02:14,300 --> 00:02:14,400
Easy.

42
00:02:14,400 --> 00:02:20,400
Now, looks at this and not that and it's just, you don't want that to

43
00:02:20,400 --> 00:02:22,800
be left in the game, right?

44
00:02:22,800 --> 00:02:26,800
It's fine to go through those learning stages where you kind of go

45
00:02:26,800 --> 00:02:27,000
like.

46
00:02:27,000 --> 00:02:29,200
Okay, this is a little weird right now, but we're trying to figure out

47
00:02:29,200 --> 00:02:29,700
how it works.

48
00:02:30,100 --> 00:02:30,800
That's all fine.

49
00:02:30,800 --> 00:02:34,400
But you want to make sure that once you have a coherent plan for house

50
00:02:34,600 --> 00:02:38,300
So work you can get it down to a place where you're not constantly

51
00:02:38,300 --> 00:02:40,900
having to second-guess it or anything like that.

52
00:02:40,900 --> 00:02:43,300
So I'm going to go ahead and get started.

53
00:02:44,800 --> 00:02:47,500
Today is day 3, 14 as it says at the bottom.

54
00:02:47,700 --> 00:02:50,800
So you're going to want to start with de 313 source code.

55
00:02:50,900 --> 00:02:55,100
If you are in the mood to follow along at home,

56
00:02:59,100 --> 00:02:59,800
all right.

57
00:03:02,000 --> 00:03:03,500
So, let's see here.

58
00:03:06,000 --> 00:03:08,000
Here's where we were at yesterday.

59
00:03:08,000 --> 00:03:11,500
And if you remember, we were sort of working on.

60
00:03:11,500 --> 00:03:14,900
We want the the next sort of thing that we wanted to make sure that we

61
00:03:14,900 --> 00:03:21,300
got right was when we look at what happens here with these stairs, we

62
00:03:21,300 --> 00:03:26,500
can sort of see that the stairwell up that kind of goes up here.

63
00:03:26,800 --> 00:03:31,300
Not all the stairs are properly included with the bottom level, right?

64
00:03:31,900 --> 00:03:35,200
And part of that is because we're not coherently.

65
00:03:36,500 --> 00:03:39,300
We're not actually coherently tracking.

66
00:03:40,200 --> 00:03:47,100
Z throughout the, I guess, for lack of a better term, the way in which

67
00:03:47,100 --> 00:03:48,200
we treat Z.

68
00:03:48,200 --> 00:03:56,800
We're not actually Computing it in a way that looks at what chunkier

69
00:03:56,800 --> 00:04:01,400
in because what we sort of decided was all right, we want our Z chunks

70
00:04:01,400 --> 00:04:03,100
to line up with each individual floor.

71
00:04:03,100 --> 00:04:06,100
So, everything on one floor is in one chunk because obviously they're

72
00:04:06,100 --> 00:04:07,700
going to get pulled in together in that case.

73
00:04:07,700 --> 00:04:10,100
And so then what we want to do is

74
00:04:10,300 --> 00:04:14,400
Well, the the Z of the chunk should also be the Z that the renderer

75
00:04:14,400 --> 00:04:14,900
uses.

76
00:04:15,100 --> 00:04:19,899
So, basically like the chunks, each chunk Z each single Z chunk, is

77
00:04:19,899 --> 00:04:25,700
passed as a slice to the renderer but in the actual render output as

78
00:04:25,700 --> 00:04:30,200
we are using it, currently we never actually had those values happen.

79
00:04:31,200 --> 00:04:33,100
And so that's the first thing that we want to do.

80
00:04:33,400 --> 00:04:36,600
And then the next thing that we want to do is as you can see, like we

81
00:04:36,600 --> 00:04:39,900
said yesterday, we need to start passing these slices to the render

82
00:04:39,900 --> 00:04:40,000
us.

83
00:04:40,200 --> 00:04:42,800
Separate slices because right now, they're all mixed together and they

84
00:04:42,800 --> 00:04:46,700
just rely on the sort rule currently to sort it out which, as we know,

85
00:04:46,700 --> 00:04:50,800
we didn't write to handle multiple layers like that because we, it's

86
00:04:50,800 --> 00:04:52,100
not supposed to be going through there.

87
00:04:52,700 --> 00:04:53,600
So that's, we need to do.

88
00:04:53,600 --> 00:04:56,200
So first, we're going to try and get the chunks, the things the line

89
00:04:56,200 --> 00:04:59,800
for the chunks properly and then we're going to move from there to

90
00:05:00,100 --> 00:05:04,300
trying to get the renderer to think about these layers in a coherent

91
00:05:04,300 --> 00:05:09,000
way so that it's known in the sorting system exactly how they work.

92
00:05:15,600 --> 00:05:17,600
all right, so

93
00:05:20,100 --> 00:05:29,600
here we are an entity that CPP and convert to later relative is what

94
00:05:29,600 --> 00:05:34,800
we were actually using before in order to figure out where things were

95
00:05:34,800 --> 00:05:39,000
in Z and what I wanted to do and I think we put a little to do in here

96
00:05:39,000 --> 00:05:40,300
to this effect.

97
00:05:41,300 --> 00:05:44,400
So it says here, it's the chunk see difference that tells us what the

98
00:05:44,400 --> 00:05:46,800
relative layer is and we no longer care about the camera.

99
00:05:46,800 --> 00:05:49,400
Z Delta because things inside of layer aren't transform prospectively

100
00:05:49,400 --> 00:05:49,700
anymore.

101
00:05:49,800 --> 00:05:53,600
So you can see that like this convert to layer relative bit.

102
00:05:53,600 --> 00:05:56,500
We don't actually want to deal with this anymore, right?

103
00:05:56,500 --> 00:05:58,000
That's not what we want.

104
00:05:58,000 --> 00:05:59,800
What we want to do is start looking

105
00:06:00,200 --> 00:06:03,600
At the the chunk see and you can see we wrote it here, we wrote it

106
00:06:03,600 --> 00:06:04,100
out.

107
00:06:04,600 --> 00:06:07,700
What the relative layer values actually should be now

108
00:06:09,500 --> 00:06:17,500
We have a problem obviously that we don't actually know what the new

109
00:06:18,100 --> 00:06:21,800
chunk Z is for a individual entity yet, right.

110
00:06:21,900 --> 00:06:25,600
Because this world position value isn't actually going to exist

111
00:06:25,600 --> 00:06:29,800
because in the same region we've moved the person and we need to know

112
00:06:29,800 --> 00:06:34,000
what their chunk Z will be once we go to repack them right.

113
00:06:34,000 --> 00:06:37,400
Once we once we go to condense everything down then we could look to

114
00:06:37,400 --> 00:06:39,000
see what the, you know, the

115
00:06:39,300 --> 00:06:41,500
See difference was here.

116
00:06:43,000 --> 00:06:44,900
Let's go ahead and get that out of there.

117
00:06:46,100 --> 00:06:47,200
So at that point.

118
00:06:47,200 --> 00:06:50,800
Yes, we could, but we're not there yet, right?

119
00:06:50,800 --> 00:06:52,600
We don't actually know what.

120
00:06:53,000 --> 00:06:57,600
We don't have a coherent plan for what that actually entails.

121
00:06:57,900 --> 00:07:02,800
So so what we have to do is take a look over at some region.

122
00:07:03,000 --> 00:07:07,200
And in fact, we can probably also say, and I don't actually remember

123
00:07:07,500 --> 00:07:09,900
this part of the code to well, because it's been a long time.

124
00:07:09,900 --> 00:07:11,700
So we touched it, but

125
00:07:12,900 --> 00:07:18,100
We actually go to pack things when we do pack entity into world.

126
00:07:18,400 --> 00:07:22,800
I I believe that it's sort of expected that, you know.

127
00:07:23,100 --> 00:07:23,600
It's yeah.

128
00:07:23,600 --> 00:07:26,100
You can see it passing this the world position here.

129
00:07:26,500 --> 00:07:32,900
So I believe that what actually occurs is when we do n Sim and and

130
00:07:32,900 --> 00:07:38,400
there we go, when we do an end Sim and everyone's getting pushed back,

131
00:07:38,400 --> 00:07:41,600
you can see that we have this concept of pack and it into World taking

132
00:07:41,600 --> 00:07:42,700
the chunk pay now.

133
00:07:42,800 --> 00:07:45,700
Now, the chunky is something that only gets computed in here.

134
00:07:45,900 --> 00:07:49,000
So you can see it happening here where it does map any trunk space.

135
00:07:49,300 --> 00:07:54,700
So, even though it pains me a little to do this twice at the moment, I

136
00:07:54,700 --> 00:07:58,200
don't know that we have a lot of other options, we could just store it

137
00:07:58,200 --> 00:07:59,500
in the entity and use it again.

138
00:07:59,500 --> 00:08:02,200
So you know, I'll put it to do for that if we want to take a look at

139
00:08:02,200 --> 00:08:05,900
that in the future but that's essentially all we're really talking

140
00:08:05,900 --> 00:08:06,500
about here.

141
00:08:07,400 --> 00:08:11,500
So if we want to know what the entity P would be for the chunks of the

142
00:08:11,500 --> 00:08:12,400
or whatever and

143
00:08:12,900 --> 00:08:15,200
To be fair, we don't even really need to keep the result of this.

144
00:08:15,200 --> 00:08:17,900
We could just do, you know,

145
00:08:21,300 --> 00:08:22,600
Entity chunk Z.

146
00:08:25,400 --> 00:08:27,700
And when we do map interest, it's although you know, the way I think

147
00:08:27,700 --> 00:08:30,100
about we probably want we're probably going to want to know that

148
00:08:30,100 --> 00:08:30,900
offset.

149
00:08:31,300 --> 00:08:35,200
So I'm going to I'm going to keep it the full thing around.

150
00:08:35,500 --> 00:08:40,400
So if I do World position and I'll maybe I'll just call it where I'll

151
00:08:40,400 --> 00:08:40,799
post for.

152
00:08:40,799 --> 00:08:46,600
Now I do that map into chunks face and now I actually have what I

153
00:08:46,600 --> 00:08:48,300
would need for the relative layer, right?

154
00:08:48,300 --> 00:08:53,500
I've got in here and updated value.

155
00:08:53,600 --> 00:08:54,600
Meaning after the

156
00:08:54,700 --> 00:08:55,900
Six step for this.

157
00:08:56,000 --> 00:08:57,200
After this entity is moved.

158
00:08:57,400 --> 00:08:59,800
I now know what they're relatively.

159
00:09:00,000 --> 00:09:02,200
Areas based on that operation.

160
00:09:02,800 --> 00:09:08,600
Now once I do that I will have the relative layer probably correct.

161
00:09:08,600 --> 00:09:13,400
But now I also need to think a little bit about the.

162
00:09:13,500 --> 00:09:13,800
Yeah.

163
00:09:13,800 --> 00:09:16,400
The rest of the stuff that we need to do with this entity.

164
00:09:20,700 --> 00:09:26,200
Because you can kind of see in here, where we're doing our, where

165
00:09:26,200 --> 00:09:27,700
we're doing sort of our output.

166
00:09:27,700 --> 00:09:31,700
We still need to have the enemy transform, set up to transform things

167
00:09:31,700 --> 00:09:35,700
such that they get displaced in Z in the right way, you know,

168
00:09:37,200 --> 00:09:41,100
So we still do actually need a little more information where this

169
00:09:41,100 --> 00:09:45,500
chunk is, you know, where the enemy is going to get drawn is gonna is

170
00:09:45,500 --> 00:09:50,900
going to matter, and so we still have a little bit of work to do

171
00:09:50,900 --> 00:09:51,200
there.

172
00:09:51,200 --> 00:09:55,500
Now, I'm going to leave that for now because we don't have any of the

173
00:09:55,500 --> 00:09:58,700
rest of stuff in place for it anyway, but I just wanted to point out

174
00:09:58,700 --> 00:10:00,800
that that's kind of where we have to start going next.

175
00:10:01,900 --> 00:10:06,400
Apparently, we don't have the world struct in here at the moment.

176
00:10:06,500 --> 00:10:07,300
I meant.

177
00:10:07,300 --> 00:10:08,000
Is that true?

178
00:10:08,000 --> 00:10:09,500
That seems weird.

179
00:10:09,800 --> 00:10:12,000
It's probably just World mode World though.

180
00:10:12,000 --> 00:10:13,800
Like we probably have it.

181
00:10:14,200 --> 00:10:16,000
We just didn't dereference it.

182
00:10:16,500 --> 00:10:19,500
It's probably just that right?

183
00:10:20,500 --> 00:10:25,300
But I guess nobody else was using it or people who were using it, you

184
00:10:25,300 --> 00:10:28,500
know, didn't bother you, reference it into a local.

185
00:10:28,500 --> 00:10:31,200
So now we can kind of see.

186
00:10:31,200 --> 00:10:31,600
All right.

187
00:10:31,600 --> 00:10:32,800
We're in much better shape.

188
00:10:32,800 --> 00:10:38,500
Now, we got our stairwell sorted so that all of its sorts exactly

189
00:10:38,500 --> 00:10:39,300
where we expect.

190
00:10:39,300 --> 00:10:44,100
And so now, we're finally getting the part where these floors are a

191
00:10:44,100 --> 00:10:45,300
little more coherent, right?

192
00:10:45,300 --> 00:10:49,000
We still have the problem of, we're not slicing them up, so we still

193
00:10:49,000 --> 00:10:49,900
have that error.

194
00:10:51,400 --> 00:10:55,800
But at least now we've got that first pass of things that are supposed

195
00:10:55,800 --> 00:10:59,300
to be on a particular floor are actually on that floor and that's

196
00:10:59,300 --> 00:10:59,600
good.

197
00:10:59,700 --> 00:11:00,600
That's what we want.

198
00:11:01,500 --> 00:11:05,300
Okay, so the next thing that we need to do is now we need to start

199
00:11:05,300 --> 00:11:09,000
getting a little more serious about the other part of our Z transform

200
00:11:09,100 --> 00:11:11,700
and this is where things are going to start to get hairy for us.

201
00:11:11,800 --> 00:11:14,900
So we need to, this is why we need to start tightening down and have a

202
00:11:14,900 --> 00:11:17,600
really clear conceptualization of what supposed to happen because in

203
00:11:17,600 --> 00:11:19,200
order to get to the next step.

204
00:11:20,800 --> 00:11:24,900
We need to have a concept in the renderer.

205
00:11:26,000 --> 00:11:30,500
Of the layers e and the actual Z value, right?

206
00:11:30,700 --> 00:11:35,500
Because the layer Z, basically, that chunk dim Z that value is.

207
00:11:35,500 --> 00:11:38,100
Now something that needs to be known to the renderer for like an

208
00:11:38,100 --> 00:11:43,100
absolute sorting criteria right now, we can hack that in temporarily

209
00:11:43,100 --> 00:11:45,900
and I don't know if maybe this is the way we'll actually want to do it

210
00:11:45,900 --> 00:11:49,400
in the end, I don't know, but we can hack that in temporarily by

211
00:11:49,400 --> 00:11:53,100
having the concept of the Z layer baked directly into the sort key,

212
00:11:53,300 --> 00:11:53,800
right?

213
00:11:54,000 --> 00:11:55,500
That's something we could do.

214
00:11:56,200 --> 00:11:59,800
and so, you know, we don't we probably want to simplify

215
00:12:00,000 --> 00:12:03,200
That sort key eventually because it's just a very bulky, there's a lot

216
00:12:03,200 --> 00:12:07,700
of sort of work going on in that sort key now, which maybe isn't the

217
00:12:07,700 --> 00:12:08,700
best thing in the world.

218
00:12:08,700 --> 00:12:12,200
So I don't want to suggest that we can just keep throwing things in

219
00:12:12,200 --> 00:12:15,300
here ad infinitum and never end up having to pay the piper.

220
00:12:15,800 --> 00:12:19,200
But at the moment, as we are working at how these things are going to

221
00:12:19,200 --> 00:12:19,900
come together.

222
00:12:20,000 --> 00:12:22,400
Certainly that is one thing we could do, right?

223
00:12:22,400 --> 00:12:26,400
We could have it so that the sort breaks these things back apart,

224
00:12:27,200 --> 00:12:34,400
Now in the in the eventual version of the final render pass, it may be

225
00:12:34,400 --> 00:12:37,800
that we have to be smarter about how things work than that.

226
00:12:37,900 --> 00:12:41,700
It may be that we want to break things up into separate buffers, you

227
00:12:41,700 --> 00:12:44,700
know, instead of sorting after the fact, I don't know.

228
00:12:44,700 --> 00:12:47,400
But for right now, since we already have the sword in place, I'm going

229
00:12:47,400 --> 00:12:50,200
to propose that we just do something here.

230
00:12:50,300 --> 00:12:52,600
That's like an Uber app.

231
00:12:52,600 --> 00:12:56,900
That's like, chunk Z and, you know, chunk Z would be

232
00:12:57,000 --> 00:13:03,300
A thing that always demands priority in the sort even above manual

233
00:13:03,300 --> 00:13:03,600
sorting.

234
00:13:03,600 --> 00:13:08,300
So it's like this is a thing that's just it's totally takes people out

235
00:13:08,300 --> 00:13:11,900
of the sort and moves them into it like basically it's like a group if

236
00:13:11,900 --> 00:13:18,000
you will of sorting and so when we do that, you know, and we go to do

237
00:13:18,000 --> 00:13:20,300
the test for is in front of, right.

238
00:13:20,300 --> 00:13:26,000
All we have to do, there is first say that the result, whatever the

239
00:13:26,000 --> 00:13:26,900
result is that we're going.

240
00:13:27,000 --> 00:13:27,600
Owing to do.

241
00:13:29,500 --> 00:13:31,400
You know we basically had one more case here.

242
00:13:31,400 --> 00:13:33,800
You could just see, you can see why I say.

243
00:13:33,800 --> 00:13:36,300
We may have to get a little bit more smart about this because you can

244
00:13:36,300 --> 00:13:38,300
just see this as a very complicated thing to starting.

245
00:13:38,300 --> 00:13:41,200
Go on here and that's every time we compared to people we're doing

246
00:13:41,300 --> 00:13:43,800
there's just a lot of fussing right.

247
00:13:44,600 --> 00:13:47,000
And so you know it's just it makes me a little nervous.

248
00:13:47,000 --> 00:13:48,700
Does it mean we're actually have to deal with it?

249
00:13:48,700 --> 00:13:49,000
I don't know.

250
00:13:49,000 --> 00:13:50,800
We're going to see as we go forwards.

251
00:13:50,800 --> 00:13:52,100
Obviously we'll find out.

252
00:13:52,200 --> 00:13:54,900
This isn't a game about having hundreds of thousands of Sprites on the

253
00:13:54,900 --> 00:13:55,200
screen.

254
00:13:55,200 --> 00:13:57,800
So at that point, you know, we kind of get a little bit of a free

255
00:13:57,800 --> 00:13:58,300
pass.

256
00:14:02,000 --> 00:14:09,900
You know that is true but you know just the point of it is that as

257
00:14:09,900 --> 00:14:13,300
things get more complex and like this, they start to like kind of

258
00:14:13,500 --> 00:14:17,700
trigger on my radar of like, well this could be a problem, doesn't

259
00:14:17,700 --> 00:14:19,200
matter right now so it's fine.

260
00:14:19,200 --> 00:14:22,800
But you know, it's just worth noting when things happen to just want

261
00:14:22,800 --> 00:14:25,500
to be aware of where your possible trouble points are.

262
00:14:25,500 --> 00:14:29,000
You don't usually want to have them take you completely by surprise.

263
00:14:29,900 --> 00:14:31,600
So we could say here that

264
00:14:31,800 --> 00:14:37,900
If a chunk Z is not equal to B chunk Z, then we could basically just

265
00:14:37,900 --> 00:14:38,300
say that.

266
00:14:38,300 --> 00:14:43,200
Well, if a is going to be in front of B, then a should have a higher Z

267
00:14:43,200 --> 00:14:44,300
value, right?

268
00:14:44,400 --> 00:14:49,400
So, a chunk Z greater than b, chunk Z would be the result.

269
00:14:49,600 --> 00:14:54,400
And that way the chunk Z is sort of always specified to me.

270
00:14:56,000 --> 00:14:59,500
as a layering operation on top of everything else, which means that we

271
00:14:59,500 --> 00:14:59,800
can start,

272
00:15:00,500 --> 00:15:06,200
Feel free to group stuff in into those sort of broad categories, if

273
00:15:06,200 --> 00:15:06,900
that makes sense.

274
00:15:07,900 --> 00:15:10,400
And again, for the render group, this is not a particularly hard.

275
00:15:10,400 --> 00:15:11,400
Like these are, these are.

276
00:15:11,400 --> 00:15:14,200
When I say that these are things, that trouble me a little, I'm not

277
00:15:14,200 --> 00:15:15,700
talking about code architecture wise.

278
00:15:15,700 --> 00:15:17,900
They're very, very simple and not difficult at all.

279
00:15:17,900 --> 00:15:25,100
I'm talking more about sort of the overall notion that I worry about,

280
00:15:25,200 --> 00:15:25,700
you know,

281
00:15:27,200 --> 00:15:32,000
What the cost will be in the end for certain things, not worry like we

282
00:15:32,000 --> 00:15:34,200
shouldn't do it but more worried about like well in the back of my

283
00:15:34,200 --> 00:15:36,800
mind I think we might have to revisit this and do something better for

284
00:15:36,800 --> 00:15:38,900
the final version if we find, it's too slow.

285
00:15:40,300 --> 00:15:43,100
So all I'm doing here is for manual sort.

286
00:15:49,100 --> 00:15:51,000
I'm just going to go ahead and

287
00:15:54,400 --> 00:15:55,600
Make sure I see what's going on.

288
00:15:55,600 --> 00:15:55,800
Yeah.

289
00:15:55,800 --> 00:15:59,200
So basically the only thing I have to do here is just say well Sprite

290
00:15:59,200 --> 00:16:02,900
bound chunks equals object transform Chauncey.

291
00:16:04,900 --> 00:16:06,200
And I think that's really it.

292
00:16:06,200 --> 00:16:09,600
So in theory now that shouldn't affect anything because we're not

293
00:16:09,600 --> 00:16:10,700
setting it to anything.

294
00:16:11,200 --> 00:16:14,900
So when we come up here, we should see Executives kind of went the

295
00:16:14,900 --> 00:16:15,800
wrong way around there.

296
00:16:17,200 --> 00:16:20,800
So we should see exactly the same weird sorting and we do.

297
00:16:21,300 --> 00:16:23,900
And so, now, the question is, well what would happen?

298
00:16:23,900 --> 00:16:28,400
And I guess we can sort of maybe see this live, if we want to what'll

299
00:16:28,400 --> 00:16:33,000
happen, if I go ahead and and change that.

300
00:16:35,200 --> 00:16:36,400
That render code.

301
00:16:36,400 --> 00:16:40,100
So that we actually do set the sort key in entity, right?

302
00:16:40,200 --> 00:16:42,000
Because we sort of have a manual.

303
00:16:42,000 --> 00:16:44,500
Sort part manual sort.

304
00:16:45,300 --> 00:16:50,700
If we say any transform chunks equals World, post chunk Z.

305
00:16:51,400 --> 00:16:55,200
Now, we sort of have this automatic sort that's going to that's going

306
00:16:55,200 --> 00:16:56,100
to kick in for that.

307
00:16:57,400 --> 00:17:02,600
So, once I've done that, you can now kind of see how it works.

308
00:17:02,700 --> 00:17:04,800
And we do get we do

309
00:17:04,900 --> 00:17:06,800
At Z sorting their kind of for free.

310
00:17:06,800 --> 00:17:11,700
Can see how were, you know, everything's kind of nice A-line but we do

311
00:17:11,700 --> 00:17:15,500
have potentially one problem of that.

312
00:17:16,200 --> 00:17:20,099
I guess I don't know off hand off to think about to what extent it

313
00:17:20,099 --> 00:17:21,300
actually is a problem.

314
00:17:23,599 --> 00:17:24,700
Maybe, it's not really a problem.

315
00:17:24,700 --> 00:17:25,000
I don't know.

316
00:17:25,000 --> 00:17:28,300
We'll see what happens in the final version but the thing that I was

317
00:17:28,300 --> 00:17:32,100
noticing that was a problem was when I actually go up these stairs

318
00:17:32,100 --> 00:17:32,500
here.

319
00:17:34,100 --> 00:17:34,700
Like so,

320
00:17:34,900 --> 00:17:38,600
so, I also wonder, why is there no Alpha on the

321
00:17:41,300 --> 00:17:43,400
Oh, right because I'm not, I didn't set the end of the alphabet.

322
00:17:43,400 --> 00:17:43,700
Right, right.

323
00:17:43,700 --> 00:17:44,100
That's it.

324
00:17:44,100 --> 00:17:45,300
Yeah, that's for sure.

325
00:17:45,700 --> 00:17:47,200
What I'm standing on the stairs here.

326
00:17:47,400 --> 00:17:53,900
You know, I would like to see my guy be in front of the the top piece

327
00:17:53,900 --> 00:17:59,900
here and so what we met, you know, I might say though that

328
00:18:00,000 --> 00:18:02,500
That's not really a problem where we're going to have to solve that

329
00:18:02,500 --> 00:18:02,800
way.

330
00:18:03,300 --> 00:18:09,800
What we could definitely decide to do here is just once the hero is up

331
00:18:09,800 --> 00:18:14,100
on that stair, they move to the next chunk up right there at a point

332
00:18:14,100 --> 00:18:17,100
where that's that's a reasonable thing to do or something.

333
00:18:18,400 --> 00:18:20,900
So that looks pretty reasonable.

334
00:18:21,100 --> 00:18:25,300
So what I would like to do here is I want to see to what happens if I

335
00:18:25,300 --> 00:18:29,400
expand out those those bounds a little bit.

336
00:18:30,000 --> 00:18:34,100
To be honest, I don't really remember all that much how we were

337
00:18:34,100 --> 00:18:35,000
drawing those.

338
00:18:35,100 --> 00:18:40,100
I don't even know who is is drawing.

339
00:18:42,700 --> 00:18:46,300
Those traversable looks like this code right here.

340
00:18:47,700 --> 00:18:53,000
Yeah, so if I wanted to draw those a little bit more like actual

341
00:18:53,000 --> 00:18:54,400
tiles, right?

342
00:18:56,900 --> 00:19:00,500
I guess, now we can kind of see what's happening in terms of like,

343
00:19:00,500 --> 00:19:04,100
what this might actually look like in an actual game, right?

344
00:19:04,400 --> 00:19:07,700
As I sort of go through, it looks like we're getting some again,

345
00:19:07,700 --> 00:19:10,200
sorting flicker their up.

346
00:19:12,400 --> 00:19:14,100
Which I'm not really sure what that come from.

347
00:19:14,300 --> 00:19:15,300
I almost guarantee you.

348
00:19:15,300 --> 00:19:19,000
That's psycho problems again, but see me.

349
00:19:19,000 --> 00:19:20,200
Make sure that's actually true.

350
00:19:22,900 --> 00:19:27,000
We should probably all go put the debug stuff in the it in a separate

351
00:19:27,000 --> 00:19:30,300
chunk now, too, so that it would be on top for since we wanted to fix

352
00:19:30,300 --> 00:19:31,100
that bug as well.

353
00:19:31,800 --> 00:19:33,800
Let's see here.

354
00:19:38,900 --> 00:19:41,900
Yeah, you can kind of see you get some nasty cycling going on there.

355
00:19:42,000 --> 00:19:44,800
I think that's just one of those things where, you know, if you're if

356
00:19:44,800 --> 00:19:49,300
you sort of overlap, the fact that we're doing overlap testing in such

357
00:19:49,300 --> 00:19:55,400
a broad sense, I think we get kind of a lot of unnecessary tiling,

358
00:19:55,600 --> 00:19:59,400
like these things don't really overlap significantly yet.

359
00:19:59,400 --> 00:20:02,900
We, you know, we get sort of that thing and I almost wonder if we

360
00:20:02,900 --> 00:20:07,300
shouldn't shrink things, a little before we do our overlap testing, I

361
00:20:07,300 --> 00:20:07,900
feel like that

362
00:20:08,100 --> 00:20:11,200
Would be a positive Improvement for because we don't really need to

363
00:20:11,200 --> 00:20:13,300
sort things that only barely overlap.

364
00:20:13,400 --> 00:20:14,100
You know what I mean?

365
00:20:14,800 --> 00:20:16,600
At least I feel like that would be true.

366
00:20:17,800 --> 00:20:19,000
How did I get?

367
00:20:19,300 --> 00:20:22,400
How did I get those things to flicker?

368
00:20:24,400 --> 00:20:27,800
I know I was getting a subtree flicker there, but I can't seem to get

369
00:20:27,800 --> 00:20:28,500
it to happen again.

370
00:20:28,700 --> 00:20:30,300
Maybe I was down a little lower.

371
00:20:34,900 --> 00:20:35,500
There it is.

372
00:20:41,300 --> 00:20:43,300
And you can see there's just tons of Cycles.

373
00:20:43,300 --> 00:20:45,300
Like everything is a cycle at that point.

374
00:20:46,400 --> 00:20:47,000
You know what I mean?

375
00:20:49,000 --> 00:20:51,500
Surprising the sort holds up as well as it does when there's so many

376
00:20:51,500 --> 00:20:52,100
cycles.

377
00:20:52,500 --> 00:20:55,100
So I'm curious in the sort.

378
00:20:56,800 --> 00:20:59,800
When we do the sort of overlap test, right?

379
00:21:00,400 --> 00:21:04,800
And we do rectangles intersect, I'm kind of interested to know whether

380
00:21:05,400 --> 00:21:07,400
that rectangle intersection code.

381
00:21:09,500 --> 00:21:11,000
whether that would,

382
00:21:14,300 --> 00:21:14,800
You know what?

383
00:21:14,800 --> 00:21:17,700
That would end up doing if I did it I can add radius to with some

384
00:21:17,700 --> 00:21:18,300
shrink.

385
00:21:26,000 --> 00:21:28,000
right, so if we had something like this,

386
00:21:30,000 --> 00:21:33,600
And we were to say that we wanted to shrink something, you know, for

387
00:21:33,600 --> 00:21:35,200
pixels or something like this.

388
00:21:36,800 --> 00:21:37,800
I'm just curious.

389
00:21:48,200 --> 00:21:52,200
Oh, and I forgot that's actually not in that's in the platform

390
00:21:52,200 --> 00:21:53,100
specific part of the code.

391
00:21:53,100 --> 00:21:53,400
So

392
00:21:55,200 --> 00:21:59,900
all right, so let's say that we shrink you know we shrink things a

393
00:21:59,900 --> 00:22:03,900
little a little bit here and I guess you know what?

394
00:22:03,900 --> 00:22:04,900
I should probably also good to I think.

395
00:22:04,900 --> 00:22:06,600
So we can use our debug system again.

396
00:22:08,600 --> 00:22:13,900
Now, that we have the ability to second in there, I'm just gonna say

397
00:22:13,900 --> 00:22:16,900
like hey all of these transforms.

398
00:22:17,700 --> 00:22:21,300
Let's also make all of these transforms.

399
00:22:22,300 --> 00:22:22,800
Oops.

400
00:22:25,300 --> 00:22:28,600
Let's instead of doing in fact, I don't even know if sort bias needs

401
00:22:28,600 --> 00:22:29,500
to be there anymore.

402
00:22:29,700 --> 00:22:32,500
I think sort bias may not have to be there anymore.

403
00:22:35,300 --> 00:22:35,800
Right.

404
00:22:35,800 --> 00:22:40,500
Because I think, now we can just make chunk Z chunk, Z is now or sort

405
00:22:40,500 --> 00:22:43,600
by us, and I think sort bias is completely useless.

406
00:22:43,600 --> 00:22:48,000
It's because why would you ever use it when you have actual sorting

407
00:22:48,000 --> 00:22:48,400
happening?

408
00:22:48,400 --> 00:22:52,000
It was, it was kind of a waste e sort of thing.

409
00:22:53,000 --> 00:22:55,600
In fact, let's just let's just see what happens if we get rid of sort

410
00:22:55,600 --> 00:22:55,800
bias.

411
00:22:55,800 --> 00:23:01,800
Entirely sort bias, oops, not soft bias group.

412
00:23:03,900 --> 00:23:04,400
Here we go.

413
00:23:06,200 --> 00:23:09,300
All right, so get rid of the sort bias.

414
00:23:11,200 --> 00:23:12,800
Entirely and off we go.

415
00:23:12,900 --> 00:23:16,000
All right, so let's see if that helps to, with our debug overlay much

416
00:23:16,000 --> 00:23:16,500
nicer.

417
00:23:17,300 --> 00:23:21,800
So now on here, I'm going to go ahead and turn on those groups and you

418
00:23:21,800 --> 00:23:24,900
can see how much nicer that is when we don't count things that are

419
00:23:24,900 --> 00:23:28,500
just barely a budding because we don't really want this order to have

420
00:23:28,500 --> 00:23:29,100
to deal with that.

421
00:23:29,100 --> 00:23:31,800
There's not a lot of reason for it to deal with that, right?

422
00:23:34,200 --> 00:23:36,700
So you know, I'm pretty happy about that.

423
00:23:36,900 --> 00:23:38,400
And that also fixes our Flickr.

424
00:23:38,400 --> 00:23:42,100
So you know we do kind of now know that we probably want to break

425
00:23:42,100 --> 00:23:45,900
Cycles a little bit more intelligently and we kind of had a feeling

426
00:23:45,900 --> 00:23:49,500
that was going to be the case but you know, I'm pretty happy about

427
00:23:49,500 --> 00:23:50,200
that.

428
00:23:50,500 --> 00:23:51,500
Where that's at at the moment.

429
00:23:51,500 --> 00:23:59,300
Anyway, so yeah, so if we kind of excuse me sir, excuse me.

430
00:24:01,000 --> 00:24:05,400
If we see how that looks, I'm pretty okay with with that Alpha thing

431
00:24:05,400 --> 00:24:06,500
in and out, as well.

432
00:24:07,600 --> 00:24:09,200
But yeah, yeah.

433
00:24:11,100 --> 00:24:16,000
So the next thing we have to do to is this stuff is illegal as well.

434
00:24:16,000 --> 00:24:19,500
So, before we get any too much further down there, we're also going to

435
00:24:19,500 --> 00:24:23,000
have to deal with the fact that these are not supposed to be skew in X

436
00:24:23,500 --> 00:24:25,500
because that breaks our sort criteria as well.

437
00:24:26,100 --> 00:24:29,000
Alright, so it seems like we're okay, so far

438
00:24:30,200 --> 00:24:31,400
Looks reasonable here.

439
00:24:31,800 --> 00:24:33,900
I think are we allowed to jump down now?

440
00:24:33,900 --> 00:24:34,600
We're not.

441
00:24:35,200 --> 00:24:36,600
It always picks a square.

442
00:24:36,600 --> 00:24:38,000
That's like not too far down.

443
00:24:38,000 --> 00:24:38,600
It looks like.

444
00:24:40,000 --> 00:24:43,000
All right, so that all seems reasonable.

445
00:24:45,200 --> 00:24:48,900
And we mostly just have problems with those guys that all seems

446
00:24:48,900 --> 00:24:49,600
reasonable.

447
00:24:49,700 --> 00:24:50,200
Wow.

448
00:24:55,200 --> 00:24:56,400
So now let's see.

449
00:25:00,500 --> 00:25:07,700
With the chunk Z in there and having that slicing everyone into

450
00:25:07,700 --> 00:25:08,500
groups.

451
00:25:09,000 --> 00:25:11,400
At this point, we're sort of doing

452
00:25:13,100 --> 00:25:19,500
I guess we don't really, we don't really have a way to

453
00:25:21,300 --> 00:25:24,600
Leverage any of this stuff in the actual renderer and that's kind of

454
00:25:24,600 --> 00:25:27,400
the problematic part, right?

455
00:25:28,400 --> 00:25:29,900
So we had those clip.

456
00:25:29,900 --> 00:25:35,500
Rex we had clip Rex in there and we had the notion that we could

457
00:25:35,500 --> 00:25:37,700
associate things with different clip Rex.

458
00:25:38,300 --> 00:25:43,600
So we do kind of know some of the information about what we need to

459
00:25:43,600 --> 00:25:44,000
do.

460
00:25:44,800 --> 00:25:48,700
But unfortunately it's kind of a little all tangled up because what

461
00:25:48,700 --> 00:25:50,400
we're going to want to do, right?

462
00:25:50,400 --> 00:25:50,900
Is we want to

463
00:25:51,100 --> 00:25:59,400
Able to draw the stuff that's in, that's in the alpha group all into

464
00:25:59,400 --> 00:26:02,000
like a separate buffer and then blend it on top.

465
00:26:02,000 --> 00:26:05,600
That's kind of it requires the render and knowing more than it knows

466
00:26:05,600 --> 00:26:08,300
right now about what's going on, you know what I mean?

467
00:26:09,600 --> 00:26:15,100
But we could say at the moment is that our fog, we could re enable our

468
00:26:15,100 --> 00:26:20,200
fog properly and not really have to push that through to the renderer.

469
00:26:21,000 --> 00:26:28,600
so I feel like we're kind of at a position here, where we, you know,

470
00:26:28,600 --> 00:26:29,200
we

471
00:26:31,600 --> 00:26:35,800
We should sort of extricate a little bit of what's going on from the

472
00:26:35,800 --> 00:26:36,200
renderer.

473
00:26:36,200 --> 00:26:41,300
Let me see if I can give a little bit more concrete explanation, but

474
00:26:41,300 --> 00:26:47,100
basically at the top, we're going to do entity rendering and we come

475
00:26:47,100 --> 00:26:47,800
through here.

476
00:26:48,000 --> 00:26:52,400
We do this sort of we build this let these sets of levels.

477
00:26:52,600 --> 00:26:55,600
That's what are the effects for each level that we want to have,

478
00:26:55,600 --> 00:26:56,100
right?

479
00:26:56,100 --> 00:26:58,900
And so each level has something like okay you know we're going to do a

480
00:26:58,900 --> 00:26:59,800
particular background.

481
00:27:00,000 --> 00:27:01,800
Their Blend or something or whatever.

482
00:27:03,100 --> 00:27:08,400
And so what we're really talking about here is the fact that we don't

483
00:27:08,400 --> 00:27:15,900
really need to treat this as we don't really need what we're getting

484
00:27:15,900 --> 00:27:16,900
here, right?

485
00:27:17,100 --> 00:27:20,400
Because we're actually treating this, like, we need the renderer to

486
00:27:20,400 --> 00:27:24,000
understand that we have seven levels or whatever.

487
00:27:24,000 --> 00:27:25,700
I don't know, five levels, six levels.

488
00:27:25,700 --> 00:27:29,300
However, many we have there - 403 and over, 2 and over 1 0 and 1.

489
00:27:29,300 --> 00:27:29,900
So it's actually

490
00:27:30,000 --> 00:27:31,100
Really going to be six levels.

491
00:27:32,400 --> 00:27:37,500
We have six levels and really, it only knows needs to know about two

492
00:27:37,500 --> 00:27:38,100
things.

493
00:27:38,100 --> 00:27:41,700
It needs to know about the alpha 1 and everything else.

494
00:27:42,300 --> 00:27:45,500
And so, most of this is for our benefit.

495
00:27:45,600 --> 00:27:49,500
Most of this is just for the fog, right?

496
00:27:50,100 --> 00:27:54,700
And so if we took that out and just handled the fogging ourselves,

497
00:27:57,400 --> 00:28:00,300
That would be nicer because then what we have to change in the render

498
00:28:00,300 --> 00:28:01,100
is more minimal.

499
00:28:01,100 --> 00:28:05,000
It's just, are you in the alpha phase layer and how much Alpha fade is

500
00:28:05,000 --> 00:28:06,000
happening in that layer?

501
00:28:06,000 --> 00:28:07,200
Or are you not?

502
00:28:11,800 --> 00:28:12,300
So,

503
00:28:14,000 --> 00:28:18,800
Let's start by doing that and the way that I'd like to do that is say

504
00:28:18,800 --> 00:28:23,700
like okay you know, maybe we just do fog amount or something like

505
00:28:23,700 --> 00:28:24,200
this.

506
00:28:25,600 --> 00:28:28,300
And you can see in here where we sort of are doing the fog amount

507
00:28:28,300 --> 00:28:33,900
computation, you can see that happening here, here's the fade, you

508
00:28:33,900 --> 00:28:35,200
know, Topsy stuff.

509
00:28:35,200 --> 00:28:40,200
This is the stuff for actually Alpha laying out if that makes sense.

510
00:28:40,900 --> 00:28:43,200
So what we could really do here instead is

511
00:28:43,400 --> 00:28:47,700
Say like, oh yeah, we don't need a clip, rect for any of this stuff.

512
00:28:47,700 --> 00:28:50,000
In fact, we don't really need to be creating these clip Breck's at

513
00:28:50,000 --> 00:28:50,500
all.

514
00:28:52,000 --> 00:28:58,300
Probably we probably just need if anything One Clip, rect if we want

515
00:28:58,300 --> 00:29:03,700
to associate or, or maybe to clip RX1 for the stuff that's in that

516
00:29:03,700 --> 00:29:09,000
Alpha layer and one for the stuff that's not in that Alpha layer, so

517
00:29:09,000 --> 00:29:09,900
we could do that.

518
00:29:10,000 --> 00:29:13,200
Now, the only thing about that is we don't really process.

519
00:29:13,400 --> 00:29:16,300
S things by their cliprect layer at all.

520
00:29:17,400 --> 00:29:22,100
So I'm actually thinking probably I just want to mix that whole

521
00:29:22,100 --> 00:29:23,000
concept.

522
00:29:23,300 --> 00:29:26,100
I don't think we need it and we'll see why.

523
00:29:26,100 --> 00:29:28,300
So I think that was just a bad idea on my part.

524
00:29:28,400 --> 00:29:30,100
It was like a thing that we tried.

525
00:29:30,400 --> 00:29:32,700
I don't like it and I don't think we're going to use it.

526
00:29:33,300 --> 00:29:35,300
So I'm just going to pull that out now.

527
00:29:35,300 --> 00:29:37,100
So we don't have it sitting around anymore.

528
00:29:38,600 --> 00:29:39,300
All right.

529
00:29:39,500 --> 00:29:40,900
So let's take a look inside the clip.

530
00:29:40,900 --> 00:29:41,800
Rect structure.

531
00:29:42,200 --> 00:29:44,000
You can see the clip, rect effects thing.

532
00:29:44,400 --> 00:29:46,000
I don't want that anymore.

533
00:29:46,600 --> 00:29:50,900
I don't really want any of this at all, so I'm just going to recompile

534
00:29:50,900 --> 00:29:51,800
without that.

535
00:29:51,900 --> 00:29:54,500
And I'm going to see who ends up having a problem with it.

536
00:29:54,500 --> 00:29:59,400
So, there's us pushing the FX when the FX actually happens.

537
00:29:59,400 --> 00:29:59,800
I don't know that.

538
00:30:00,000 --> 00:30:01,100
Was even using it.

539
00:30:02,200 --> 00:30:04,100
Let's see and everything else isn't rendered.

540
00:30:04,300 --> 00:30:09,800
So for render fog amount, we know that we've got this many

541
00:30:10,900 --> 00:30:14,700
I'm going to get rid of that and for now I'm going to leave the test

542
00:30:14,700 --> 00:30:17,200
Alpha in even though we're probably going to yank that in a minute

543
00:30:17,200 --> 00:30:17,500
here.

544
00:30:18,200 --> 00:30:23,200
So when we come through here, I'm going to say, get rid of the clip

545
00:30:23,200 --> 00:30:28,900
effects, get rid of all the cliprect nonsense that was happening.

546
00:30:29,500 --> 00:30:33,400
We don't need any of it, it's not relevant and then I'm going to say

547
00:30:33,400 --> 00:30:37,600
like okay, we'll just assume that the test Alpha.

548
00:30:39,100 --> 00:30:44,900
Is one for whatever this layer is and we'll assume that the fog amount

549
00:30:44,900 --> 00:30:48,800
is also set to a prescribed value.

550
00:30:48,800 --> 00:30:50,900
In this case, Zero will say that fog.

551
00:30:50,900 --> 00:30:54,300
Zero means you're not fog at all and fog, one means you're completely

552
00:30:54,300 --> 00:30:55,000
fogged.

553
00:30:55,500 --> 00:30:58,700
So then when we come in here and we do our clamp map to range, really,

554
00:30:58,700 --> 00:31:00,100
all we're doing is saying well.

555
00:31:00,100 --> 00:31:06,100
Okay, our Alpha is always going to be one in less it it turns out to

556
00:31:06,100 --> 00:31:08,200
be 0.

557
00:31:08,400 --> 00:31:10,800
Well, actually it may be that you can just always do this.

558
00:31:11,300 --> 00:31:13,500
Can I just always do Clint map to range?

559
00:31:13,800 --> 00:31:18,700
I think I probably could because if you have gone off one end you'll

560
00:31:18,700 --> 00:31:20,400
just always be back at 1, right?

561
00:31:20,400 --> 00:31:24,600
And so I feel like that's probably just fine and the same is probably

562
00:31:24,600 --> 00:31:25,300
true here.

563
00:31:25,300 --> 00:31:29,200
I would I would wager so we can probably just do that.

564
00:31:29,400 --> 00:31:33,900
Everything can be computed just fine at that point and then we don't

565
00:31:33,900 --> 00:31:35,500
have to deal with any of this.

566
00:31:36,500 --> 00:31:38,200
This nonsense here now.

567
00:31:38,300 --> 00:31:42,900
Now for a test Alpha, I feel like it was going the wrong way because

568
00:31:42,900 --> 00:31:44,300
we're doing a one- there.

569
00:31:44,500 --> 00:31:47,600
So if we want to know what the alpha value is rather than the the fade

570
00:31:47,600 --> 00:31:50,900
amount we can just invert this this and we'll get it.

571
00:31:50,900 --> 00:31:52,300
We'll get a reversed range.

572
00:31:52,600 --> 00:31:54,500
So, I think that's roughly what we need.

573
00:31:55,900 --> 00:31:57,400
Let's take fog them out there.

574
00:31:57,700 --> 00:31:58,100
Yeah.

575
00:32:00,200 --> 00:32:02,100
And fog mounts.

576
00:32:03,300 --> 00:32:06,500
Okay, so Dad at the end here, right?

577
00:32:06,500 --> 00:32:09,800
A group, current cliprect index is not gonna get modified anymore.

578
00:32:10,600 --> 00:32:13,200
So we're just going to use the default clipping rectangle at this

579
00:32:13,200 --> 00:32:13,800
point.

580
00:32:14,600 --> 00:32:17,600
And now we are at, I think we're at a place where everything should be

581
00:32:17,600 --> 00:32:20,100
working as before, but now, we just don't have any of those clip

582
00:32:20,100 --> 00:32:21,200
bricks, right?

583
00:32:21,200 --> 00:32:24,500
All of that stuff is, is not happening anymore.

584
00:32:25,100 --> 00:32:28,800
So now I should be able to actually set the entity color blend value.

585
00:32:29,900 --> 00:32:33,000
And that color blend value Jimmy.

586
00:32:35,700 --> 00:32:38,800
That color button value is going to affect everything that we draw.

587
00:32:38,900 --> 00:32:41,900
So what we were doing right now is we're kind of doing that manually.

588
00:32:42,100 --> 00:32:44,800
I don't know if we want to do it manually or not, you know, maybe we

589
00:32:44,800 --> 00:32:47,500
do, maybe we don't, I'm not sure but you can see what's happening

590
00:32:47,500 --> 00:32:51,200
here, but that's also, you know, the fact that we're doing it manually

591
00:32:51,200 --> 00:32:54,700
has some downsides and means that it's a little confusing, sometimes,

592
00:32:54,700 --> 00:32:55,600
what's going to happen.

593
00:32:56,100 --> 00:32:59,300
So maybe we want to make that be a property of the transform.

594
00:32:59,300 --> 00:32:59,800
So when the

595
00:33:00,000 --> 00:33:04,600
Is rectified like this is sort of how we had it a little bit before,

596
00:33:05,300 --> 00:33:07,600
maybe that kicks in at that point.

597
00:33:07,600 --> 00:33:10,100
So let's go ahead and try that out.

598
00:33:10,600 --> 00:33:12,000
Just see what we've got here at.

599
00:33:12,000 --> 00:33:12,500
There we go.

600
00:33:14,100 --> 00:33:15,400
Where's that Alpha value?

601
00:33:18,800 --> 00:33:19,300
There it is.

602
00:33:23,700 --> 00:33:24,700
So this is p scars.

603
00:33:24,700 --> 00:33:26,900
That doesn't have to happen anymore so I think we're all good.

604
00:33:26,900 --> 00:33:30,800
Okay so now that I've turned that off now we're going to see those

605
00:33:30,800 --> 00:33:32,200
those bits above us, right?

606
00:33:32,200 --> 00:33:34,500
They haven't outfit out 20 yet.

607
00:33:35,200 --> 00:33:39,100
And so now what we need to do is we need to kind of go back into the

608
00:33:39,100 --> 00:33:43,300
render group and sort of I think I kind of have it this way before a

609
00:33:43,300 --> 00:33:47,700
little bit, when we Rectify a color, which is something that we had

610
00:33:47,700 --> 00:33:49,600
before, where do we do that?

611
00:33:49,600 --> 00:33:51,900
It's in here somewhere.

612
00:33:52,900 --> 00:33:54,800
somewhere when we do a store color,

613
00:33:57,600 --> 00:33:58,700
You can actually see.

614
00:34:02,600 --> 00:34:05,400
We've got sort of the global color thing happening here, right?

615
00:34:07,000 --> 00:34:12,199
And so I think we can do we left in actually the exact stuff we need.

616
00:34:12,400 --> 00:34:14,500
So I think we can do everything that we want here.

617
00:34:14,500 --> 00:34:18,900
Now my only question is, when we do the store color, could we have not

618
00:34:18,900 --> 00:34:20,900
gotten that from the object transform?

619
00:34:21,900 --> 00:34:24,800
Like, I kind of feel like we kind of want that to be object transform

620
00:34:24,800 --> 00:34:25,600
specific.

621
00:34:25,800 --> 00:34:30,500
So I feel like, you know, that's better than having a global value

622
00:34:30,500 --> 00:34:31,699
that sets on and off.

623
00:34:32,000 --> 00:34:34,500
We already have this notion that the object transform is kind of the

624
00:34:34,500 --> 00:34:36,500
thing that stores that transient state.

625
00:34:36,900 --> 00:34:41,800
So I'd rather you know if we could I'd rather have it look more like

626
00:34:41,800 --> 00:34:47,100
this, where we do the store color rather than ever having those global

627
00:34:47,100 --> 00:34:47,800
values.

628
00:34:48,500 --> 00:34:50,400
Let's see, that store color.

629
00:34:50,500 --> 00:34:51,000
There we go.

630
00:34:53,300 --> 00:34:55,300
If you look at what actually needs to happen here, right?

631
00:34:55,300 --> 00:34:58,400
I can just do a thing where I say, like, okay object, transform

632
00:34:59,000 --> 00:35:03,300
transform, and I don't know if that's a pointer or something like this

633
00:35:04,000 --> 00:35:08,100
and then transform transform.

634
00:35:12,800 --> 00:35:13,600
In there.

635
00:35:13,600 --> 00:35:18,400
I now have the ability to sort of specify that on a per transform

636
00:35:18,400 --> 00:35:21,700
basis, rather than a global basis, which I think I like better.

637
00:35:22,800 --> 00:35:24,900
So, here we are in the object transform.

638
00:35:25,000 --> 00:35:28,900
There we go, and I don't really know.

639
00:35:29,300 --> 00:35:32,800
So these get passed around, and if they actually get in line to, I

640
00:35:32,800 --> 00:35:33,800
suppose that's fine.

641
00:35:34,300 --> 00:35:36,400
I think the compiler will be smart enough to do that, right?

642
00:35:36,400 --> 00:35:39,300
But otherwise, we might want to start passing those because they're

643
00:35:39,300 --> 00:35:40,900
pretty big by pointer.

644
00:35:41,300 --> 00:35:46,200
Um so I'm not, I'm not really sure about that.

645
00:35:46,200 --> 00:35:49,300
I kind of feel like we might want to start passing pointers to the

646
00:35:49,300 --> 00:35:52,800
object transform, rather than saying the object transform itself.

647
00:35:53,500 --> 00:35:59,300
So I might, I might suggest moving in that direction a little bit

648
00:35:59,300 --> 00:35:59,700
based on the

649
00:36:00,000 --> 00:36:00,600
Of those.

650
00:36:07,300 --> 00:36:09,600
So okay, let's go back over here and a rent.

651
00:36:11,300 --> 00:36:18,000
Clean that out a bit and we go make these into pointers everywhere.

652
00:36:20,300 --> 00:36:20,900
Go.

653
00:36:31,700 --> 00:36:34,500
And get Bender into two bases pee.

654
00:36:38,200 --> 00:36:41,800
And let's see it because I don't really know if the compilers.

655
00:36:41,800 --> 00:36:44,200
What the compiler isn't isn't smart enough to do there.

656
00:36:48,200 --> 00:36:52,300
It's been a long time since I really sat down and looked at what the

657
00:36:52,300 --> 00:36:53,900
compiler does for code.

658
00:36:54,600 --> 00:36:59,600
And so, I feel like my knowledge about what the best thing is to do,

659
00:36:59,700 --> 00:37:01,800
especially for debug code.

660
00:37:02,000 --> 00:37:06,600
Like, sometimes I'll do things even if the global, I mean, even if the

661
00:37:06,600 --> 00:37:11,700
optimizer would have done it fine, sometimes I still like to do it

662
00:37:11,700 --> 00:37:16,500
manually if I can just because I don't want to

663
00:37:17,200 --> 00:37:21,500
Have my debug builds be slow, you know, because I like to be able to

664
00:37:21,500 --> 00:37:25,500
step through code cleanly, without having to deal with all the sort of

665
00:37:26,200 --> 00:37:29,200
crap, where the bugger can't inspect values and doesn't know what's

666
00:37:29,200 --> 00:37:30,200
going on all the time.

667
00:37:31,400 --> 00:37:35,100
So, you know, to a certain extent, there is a lot of that.

668
00:37:36,100 --> 00:37:39,600
But anyway, so let's take a look, here, I'm just sort of

669
00:37:42,300 --> 00:37:43,300
Pushing this through.

670
00:37:45,700 --> 00:37:46,100
Yeah.

671
00:37:52,300 --> 00:37:55,300
And this is not a particularly interesting thing at this is just busy

672
00:37:55,300 --> 00:37:56,200
work, right?

673
00:37:56,600 --> 00:37:59,400
Busy work, that our tools should do it for us these days, of course

674
00:37:59,400 --> 00:38:00,100
they don't.

675
00:38:00,700 --> 00:38:01,400
Why would they?

676
00:38:01,400 --> 00:38:04,900
We've only had 50 years of programming tools.

677
00:38:06,600 --> 00:38:09,700
You know, let's not get too excited.

678
00:38:10,600 --> 00:38:11,000
Okay?

679
00:38:11,000 --> 00:38:16,600
So yeah, anywhere here where we were doing transforms.

680
00:38:16,600 --> 00:38:18,800
Let's just go ahead and keep passing that through.

681
00:38:19,600 --> 00:38:24,100
So, in here, we would do an address of an entity transform same with

682
00:38:24,100 --> 00:38:24,500
here.

683
00:38:27,600 --> 00:38:28,800
And here.

684
00:38:30,700 --> 00:38:31,300
We go.

685
00:38:33,100 --> 00:38:34,000
Keep it coming.

686
00:38:35,600 --> 00:38:36,800
Keep coming.

687
00:38:40,600 --> 00:38:44,700
And I don't think this needs to do anything now because now we're not.

688
00:38:44,700 --> 00:38:47,000
We don't have that nasty Global making things.

689
00:38:47,000 --> 00:38:50,400
Scrappy, let's see.

690
00:38:50,400 --> 00:38:50,700
So.

691
00:38:50,700 --> 00:38:52,100
Default flat transform.

692
00:38:52,100 --> 00:38:53,400
I don't know if we're allowed to pass that.

693
00:38:53,400 --> 00:38:55,700
That was one of the nice things about it is, you could just call it in

694
00:38:55,700 --> 00:38:58,500
line, but that's okay, I don't know.

695
00:39:08,000 --> 00:39:10,200
How often we were really taking advantage of that.

696
00:39:10,200 --> 00:39:10,800
Anyway, though.

697
00:39:13,100 --> 00:39:14,300
Let's see here.

698
00:39:14,300 --> 00:39:15,600
So

699
00:39:19,900 --> 00:39:20,900
Where are we?

700
00:39:21,200 --> 00:39:24,800
We are in rendered layered scene and so okay.

701
00:39:24,800 --> 00:39:28,800
So we're going to just have to take the address of that transform.

702
00:39:30,200 --> 00:39:31,800
address of a set of

703
00:39:36,400 --> 00:39:38,500
Transform that.

704
00:39:41,100 --> 00:39:44,800
I suspect some of these probably don't really want to be just the flat

705
00:39:44,800 --> 00:39:47,200
transform but who knows?

706
00:39:47,900 --> 00:39:51,300
So no transform just passed address of.

707
00:39:56,700 --> 00:39:57,100
Go.

708
00:39:58,200 --> 00:39:58,700
Oddly enough.

709
00:39:58,700 --> 00:40:02,100
Most of the stuff is in the debug system.

710
00:40:08,500 --> 00:40:12,500
And you are transform transform.

711
00:40:26,300 --> 00:40:26,900
There we go.

712
00:40:38,200 --> 00:40:39,900
And hopefully we're getting towards the end.

713
00:40:40,200 --> 00:40:42,200
Not that this isn't so exciting.

714
00:40:44,100 --> 00:40:45,400
In theory, this is a computer.

715
00:40:45,400 --> 00:40:46,000
Yes.

716
00:40:49,000 --> 00:40:53,800
if only there was a machine that was good at doing repetitive tasks,

717
00:41:01,600 --> 00:41:02,500
all right.

718
00:41:05,900 --> 00:41:07,300
Hopefully everything's still fine.

719
00:41:07,300 --> 00:41:08,000
There we go.

720
00:41:09,100 --> 00:41:13,500
And so now in theory, all of our stuff is actually working properly

721
00:41:14,100 --> 00:41:16,700
through the pipeline with that color as well, which is what we

722
00:41:16,700 --> 00:41:17,600
initially did.

723
00:41:17,800 --> 00:41:23,800
And so now I should be able to set those values and per entity when I

724
00:41:23,800 --> 00:41:27,800
do the transform and have them do what they need to do.

725
00:41:28,600 --> 00:41:33,500
So, in theory again, only in theory, I should be able to set entity

726
00:41:33,500 --> 00:41:34,300
transform.

727
00:41:35,100 --> 00:41:38,200
Color and any transfer multicolor.

728
00:41:42,400 --> 00:41:43,100
In this case.

729
00:41:43,500 --> 00:41:45,200
Now, what we know is that

730
00:41:47,000 --> 00:41:48,200
The fog value.

731
00:41:49,400 --> 00:41:52,900
It's dependent on what relative layer in certainly.

732
00:41:53,600 --> 00:41:56,800
So, what we need to do here is say, well, if the relative layer equals

733
00:41:56,800 --> 00:41:59,800
the maximum level index, then we've got the alpha.

734
00:42:00,000 --> 00:42:01,700
Wise, we don't right?

735
00:42:02,800 --> 00:42:05,400
So we essentially have two separate things.

736
00:42:05,400 --> 00:42:06,200
We're going to do here.

737
00:42:07,100 --> 00:42:11,200
So in the case, where at the maximum level and level index, what we

738
00:42:11,200 --> 00:42:16,400
want to do here is create a tea color value, that's only affecting the

739
00:42:16,400 --> 00:42:19,400
alpha and it is going to blend.

740
00:42:19,400 --> 00:42:22,500
In fact I don't think we even need to set the color to anything but in

741
00:42:22,500 --> 00:42:25,800
the other case we do need to set the blend to color to be the

742
00:42:25,800 --> 00:42:30,600
background color and we need to set the tea color to be whatever the

743
00:42:30,600 --> 00:42:31,800
fog amount is.

744
00:42:32,700 --> 00:42:35,400
For this for this layer, right?

745
00:42:45,100 --> 00:42:47,500
so as we can make life a little easier on ourselves like this,

746
00:42:50,500 --> 00:42:55,400
And so I'll pull out that fog amount and that's just going to be you

747
00:42:55,400 --> 00:42:58,400
know in the first portion and we're not going to affect the alpha at

748
00:42:58,400 --> 00:42:58,700
all.

749
00:42:59,100 --> 00:42:59,600
Right.

750
00:43:00,800 --> 00:43:04,900
So at that point I think we're good and so when those colors get

751
00:43:04,900 --> 00:43:08,100
stored by the renderer now in theory they should be working.

752
00:43:08,100 --> 00:43:13,000
Of course, I'm not seeing that happen and I would like to set a

753
00:43:13,000 --> 00:43:14,300
breakpoint please there we go.

754
00:43:16,400 --> 00:43:16,800
There you go.

755
00:43:18,100 --> 00:43:23,400
So, when I set that to color that should actually oh

756
00:43:25,800 --> 00:43:26,600
No, default upright.

757
00:43:26,600 --> 00:43:28,500
Transform it would set everything to 0.

758
00:43:28,500 --> 00:43:29,400
Correct.

759
00:43:29,400 --> 00:43:32,200
I think I might have to go in there and initialize those because

760
00:43:32,200 --> 00:43:34,700
actually I think about it that might not clear them.

761
00:43:36,400 --> 00:43:38,400
I don't really remember what it does by default.

762
00:43:39,200 --> 00:43:42,700
So let's see T color color and T color.

763
00:43:44,100 --> 00:43:47,400
Well actually it looks like our problem is more that our T value our

764
00:43:47,400 --> 00:43:49,900
test Alpha value doesn't actually

765
00:43:51,800 --> 00:43:53,100
Oh right.

766
00:43:54,700 --> 00:43:56,600
Now we're back to being inverted.

767
00:44:00,300 --> 00:44:04,600
So this test Alpha value here is actually now back to the old way it

768
00:44:04,600 --> 00:44:08,300
was so that's actually what's going on there.

769
00:44:13,400 --> 00:44:17,400
Okay, so there's our color happening inside the render.

770
00:44:17,400 --> 00:44:21,400
Now we come up here and that all looks fine, so that's good.

771
00:44:21,900 --> 00:44:24,700
And now we should see whether or not we can get five, we might have to

772
00:44:24,700 --> 00:44:26,000
create another layer for fog.

773
00:44:26,000 --> 00:44:29,300
Now, you can actually already see the fog happening, so let's create

774
00:44:29,300 --> 00:44:32,400
some more layers just so we can get up a little higher and see more

775
00:44:32,400 --> 00:44:35,900
fog, just to make sure what's happening is get down there, but I think

776
00:44:35,900 --> 00:44:39,300
that's now a reasonable situation.

777
00:44:40,600 --> 00:44:40,900
Okay?

778
00:44:40,900 --> 00:44:43,000
So that is just

779
00:44:43,100 --> 00:44:44,900
Is going to be inside World mode.

780
00:44:45,300 --> 00:44:49,000
And when I do my ad standard room,

781
00:44:51,100 --> 00:44:55,200
And I just put, you know, bunch of rooms on top of each other.

782
00:44:57,200 --> 00:44:58,500
Hopefully, that all works.

783
00:44:59,200 --> 00:44:59,800
So yeah.

784
00:45:00,200 --> 00:45:03,100
And also, you'll note that as we put more rooms on top of each other,

785
00:45:03,100 --> 00:45:04,200
I believe.

786
00:45:07,800 --> 00:45:08,900
We'll see.

787
00:45:10,400 --> 00:45:11,300
That's interesting.

788
00:45:13,000 --> 00:45:18,300
Huh, as I say, I thought bills virus the only thing but get close to

789
00:45:18,300 --> 00:45:20,700
reversible is also one that doesn't use the space partition.

790
00:45:20,700 --> 00:45:24,400
Currently, build Sprite graph has a lot of stress on it right now.

791
00:45:25,200 --> 00:45:31,400
And so we kind of know that that guy has just has a lot of issues in

792
00:45:31,600 --> 00:45:32,500
debug mode.

793
00:45:32,900 --> 00:45:36,500
I would be curious to know how he's doing in an optimized.

794
00:45:36,500 --> 00:45:38,400
I'm just going to take a quick trip, quick check.

795
00:45:42,900 --> 00:45:45,100
As quite quite fast.

796
00:45:45,100 --> 00:45:45,500
So

797
00:45:49,300 --> 00:45:55,800
Yeah, so but it's still a little bit high, so yeah, still a little bit

798
00:45:55,800 --> 00:45:56,200
High.

799
00:45:57,400 --> 00:46:00,400
Are tooltips look like they're not on a on the right layer, just

800
00:46:00,400 --> 00:46:01,000
interesting.

801
00:46:02,000 --> 00:46:05,400
Anyway, so that was Again, part of the thing where I was talking about

802
00:46:05,400 --> 00:46:11,600
before I think we want to do some work to make a better situation for

803
00:46:11,600 --> 00:46:14,900
ourselves in terms of how we pass things down and not have the sort

804
00:46:15,000 --> 00:46:16,200
have to deal with the layers.

805
00:46:16,200 --> 00:46:17,000
Oh my God.

806
00:46:17,200 --> 00:46:18,800
Why are there so many heads following me?

807
00:46:21,000 --> 00:46:22,700
Geez, that's creepy.

808
00:46:25,600 --> 00:46:29,400
All right, so the fog looks looks correct down there though, right?

809
00:46:29,600 --> 00:46:31,200
Which is all I really wanted to know.

810
00:46:33,900 --> 00:46:38,700
There's too many things happening on the screen right now, and this

811
00:46:38,700 --> 00:46:39,200
game.

812
00:46:40,700 --> 00:46:42,300
Which is not my intention, but yeah.

813
00:46:42,300 --> 00:46:42,500
Okay.

814
00:46:42,500 --> 00:46:44,300
So that all looks pretty good down there.

815
00:46:45,200 --> 00:46:45,700
All right.

816
00:46:47,100 --> 00:46:48,300
So I think we're good.

817
00:46:49,800 --> 00:46:50,300
So okay.

818
00:46:50,300 --> 00:46:56,700
So now before we can really take a good look at our sort for reals

819
00:46:56,700 --> 00:47:00,900
again, we still have one more thing at least that we have to do which

820
00:47:00,900 --> 00:47:06,200
is start to get the Z handled correctly in terms of displacement from

821
00:47:06,300 --> 00:47:07,600
a layer, right?

822
00:47:07,900 --> 00:47:12,300
Because now we've got sort of two different concepts of the Z position

823
00:47:12,300 --> 00:47:16,900
of an entity and that's a thing that's going to have to be dealt with.

824
00:47:17,900 --> 00:47:19,100
And we've got what

825
00:47:19,300 --> 00:47:19,500
You got.

826
00:47:19,500 --> 00:47:22,300
We've got 12 minutes if that makes sense.

827
00:47:24,500 --> 00:47:25,000
Is that right?

828
00:47:25,000 --> 00:47:25,600
12 minutes.

829
00:47:25,800 --> 00:47:30,300
Yeah, we've got 12 minutes to go and so yeah.

830
00:47:30,300 --> 00:47:32,500
I don't know how far we're going to be able to get in that, but that's

831
00:47:32,500 --> 00:47:34,000
roughly what we need to do.

832
00:47:35,700 --> 00:47:40,400
I also don't really know why we're getting some bleed-through on the

833
00:47:40,400 --> 00:47:41,200
layers there.

834
00:47:41,200 --> 00:47:42,200
That's very odd.

835
00:47:42,200 --> 00:47:44,200
Because in theory, the layer is totally Primal.

836
00:47:44,200 --> 00:47:47,300
You shouldn't be able to ever see anything through it, but there are

837
00:47:47,300 --> 00:47:49,100
some like peeking through of

838
00:47:49,200 --> 00:47:57,400
Of of the health rectangles there, which is odd, right?

839
00:47:57,700 --> 00:47:59,500
So we may have some bugs in there because that's

840
00:48:03,900 --> 00:48:05,300
Oh, but you know what?

841
00:48:05,400 --> 00:48:09,700
No, that's not true because we put all of those things into the graph,

842
00:48:09,800 --> 00:48:11,200
which I really didn't want to do.

843
00:48:11,200 --> 00:48:14,400
So actually, if there are Cycles, you could even get a bug there,

844
00:48:14,700 --> 00:48:15,400
right?

845
00:48:15,700 --> 00:48:18,100
So yeah, so I think that really does argue for what I said before.

846
00:48:18,100 --> 00:48:20,800
Is where I like we have to do we're going to have two segments, these

847
00:48:20,800 --> 00:48:22,700
things up into those different passes.

848
00:48:23,200 --> 00:48:25,300
I think that's definitely going to have to occur.

849
00:48:26,100 --> 00:48:27,700
But, you know, we've got some tricks for that.

850
00:48:27,700 --> 00:48:30,100
I don't think that's the end of the world, if that makes sense.

851
00:48:31,000 --> 00:48:33,100
And there's also some things we can do.

852
00:48:33,600 --> 00:48:37,400
One of the things that's a little bit janky is that it would be pretty

853
00:48:37,400 --> 00:48:38,100
great.

854
00:48:41,500 --> 00:48:43,100
It would be really, really nice.

855
00:48:43,900 --> 00:48:51,400
If we could always ensure that, you know, the, if we always rendered

856
00:48:51,400 --> 00:48:54,400
everyone with the chunk Z, they started with at the beginning of the

857
00:48:54,400 --> 00:48:58,800
simulation, instead of the chunk Z they end with, if that makes sense.

858
00:49:00,000 --> 00:49:04,200
And the reason for that is, since we happen to stream the entities in

859
00:49:04,500 --> 00:49:08,800
and we gather them based on chunks to begin with every all of the

860
00:49:08,800 --> 00:49:11,400
enemies are already in sorted order.

861
00:49:12,200 --> 00:49:15,200
If we want them to be in the, in the same region.

862
00:49:15,500 --> 00:49:19,800
So we would literally not have to do any work there if we could just

863
00:49:19,800 --> 00:49:21,700
count on that, right?

864
00:49:22,400 --> 00:49:23,800
But of course, you know,

865
00:49:26,700 --> 00:49:30,800
When somebody is moving between two regions, it would be raw wrong for

866
00:49:30,800 --> 00:49:31,700
one frame.

867
00:49:33,000 --> 00:49:35,100
I don't know how big of a deal that is.

868
00:49:39,300 --> 00:49:45,100
I think I might like that fact so much that it feels like we probably

869
00:49:45,100 --> 00:49:47,200
would want to still do it anyway.

870
00:49:57,200 --> 00:50:02,000
Yeah, I mean that that kind of feels good to me I'll be honest.

871
00:50:02,000 --> 00:50:03,500
That feels like something that

872
00:50:04,600 --> 00:50:08,900
Feels like if you used it, you would it's just kind of too cool to not

873
00:50:08,900 --> 00:50:09,900
have that happen.

874
00:50:13,200 --> 00:50:16,500
And I wish we could do the same thing for the screen space sorting but

875
00:50:16,500 --> 00:50:19,300
again that one's going to be too visible of a bug.

876
00:50:19,300 --> 00:50:23,400
I think if you actually did that that's just my assumption.

877
00:50:34,700 --> 00:50:36,900
So I think I'm going to take a look at that before we go and do the Z

878
00:50:36,900 --> 00:50:37,400
thing, man.

879
00:50:38,600 --> 00:50:42,400
So here is a, here's a proposal for you.

880
00:50:42,400 --> 00:50:45,700
And maybe, I guess, one thing that I could do is just explain it and

881
00:50:45,700 --> 00:50:49,400
not start it till tomorrow, but not start till next week.

882
00:50:50,500 --> 00:50:53,100
So let me just kind of give you what I was sort of thinking here.

883
00:51:06,600 --> 00:51:08,300
What I was thinking of doing for this.

884
00:51:09,700 --> 00:51:14,800
Is saying, well, we've got these slices, it would be great.

885
00:51:14,800 --> 00:51:17,000
If what we could do is make it.

886
00:51:17,000 --> 00:51:20,200
So those slices are essentially like

887
00:51:22,500 --> 00:51:23,700
Coming out in the buffer.

888
00:51:25,600 --> 00:51:28,500
in the render buffer in order roughly,

889
00:51:30,900 --> 00:51:35,400
And in between each layer, there would just be a barrier.

890
00:51:35,400 --> 00:51:39,600
Token, like a thing that basically says like, hey, sort everything

891
00:51:39,600 --> 00:51:40,300
here.

892
00:51:41,600 --> 00:51:45,300
But don't include the stuff that comes after it, right?

893
00:51:45,500 --> 00:51:50,500
So that we're only sorting in like in bucking like buckets, right?

894
00:51:51,900 --> 00:51:57,300
And then if you put all of your entities out in order like that, then

895
00:51:57,300 --> 00:51:58,800
you wouldn't have this problem.

896
00:51:59,500 --> 00:52:02,800
So for example, if we go over to the sort

897
00:52:07,900 --> 00:52:10,000
Where we do sort entries.

898
00:52:12,800 --> 00:52:13,300
Right.

899
00:52:15,400 --> 00:52:20,000
I think, although I don't actually know, I think if we just make this

900
00:52:20,000 --> 00:52:25,000
be a for, I Loop that basically, like goes through and says, oh, you

901
00:52:25,000 --> 00:52:31,200
know, when I do the build Sprite graph, I walk through the nodes,

902
00:52:32,300 --> 00:52:33,000
Right?

903
00:52:33,000 --> 00:52:38,700
And when I hit one of these nodes, you know, when I hit a note that's

904
00:52:38,700 --> 00:52:40,100
got a special key in it.

905
00:52:40,400 --> 00:52:45,100
I know that that's a barrier and I just stopped do the sort and then

906
00:52:45,100 --> 00:52:46,900
continue, right?

907
00:52:47,100 --> 00:52:50,800
So it'd be something like inside the sorts, right bound?

908
00:52:52,100 --> 00:52:58,600
You know, maybe we just take that that manual key and maybe the manual

909
00:52:58,600 --> 00:53:02,000
key just has a special code in it, right?

910
00:53:02,100 --> 00:53:06,100
So there's maybe like a thing that's like, you know, Sprite.

911
00:53:08,000 --> 00:53:11,800
Barrier value or something like that and maybe this right barrier

912
00:53:11,800 --> 00:53:16,700
value, you know, is some some puffy value.

913
00:53:18,300 --> 00:53:21,300
So you know it'd be something like okay you're kind of coming through

914
00:53:21,300 --> 00:53:24,100
here until you get to the input node count.

915
00:53:25,100 --> 00:53:27,600
And let me see what we've actually got here.

916
00:53:27,600 --> 00:53:29,100
Input node count.

917
00:53:31,200 --> 00:53:34,000
And index.

918
00:53:41,700 --> 00:53:48,200
Yeah, yeah, yes.

919
00:53:48,300 --> 00:53:49,800
So I think

920
00:53:57,000 --> 00:53:59,900
yeah, so I think all we have to

921
00:54:00,000 --> 00:54:07,200
Here is, instead of making this b02 input node count, we would really

922
00:54:07,200 --> 00:54:08,900
just take in a value.

923
00:54:09,300 --> 00:54:11,500
That was what the

924
00:54:13,400 --> 00:54:17,600
note index was that we were going to start with, right?

925
00:54:17,600 --> 00:54:21,100
So, we don't must just say like, oh okay, you know, whatever.

926
00:54:22,900 --> 00:54:24,500
Whatever one we're going to start with you.

927
00:54:24,500 --> 00:54:25,300
Tell us.

928
00:54:30,800 --> 00:54:34,500
And when we're doing the build Sprite graph, we would just say, like,

929
00:54:34,500 --> 00:54:42,700
okay, you know, do you know for eyelid outside where we say, hey

930
00:54:42,700 --> 00:54:47,300
there's a node index or like you know, first index or something.

931
00:54:47,500 --> 00:54:52,400
That's going to equal 0 assume that we run until first index is less

932
00:54:52,400 --> 00:54:53,700
than whatever the count is.

933
00:54:54,200 --> 00:54:56,500
And we don't increment it at all.

934
00:54:56,800 --> 00:55:00,100
Actually we passed that to build.

935
00:55:00,300 --> 00:55:01,100
Right graph.

936
00:55:05,300 --> 00:55:07,800
And we like get it back as well.

937
00:55:08,700 --> 00:55:10,600
So inside builds Frank graph.

938
00:55:10,700 --> 00:55:12,400
We can return a value here.

939
00:55:12,400 --> 00:55:16,600
That is whatever, note index a actually turns out to be when it's

940
00:55:16,600 --> 00:55:17,000
done.

941
00:55:20,500 --> 00:55:23,800
And, you know, we can even do the test here.

942
00:55:23,800 --> 00:55:29,200
We could say like oh, okay, so you know, in the test will do something

943
00:55:29,200 --> 00:55:34,800
where we say if we hit the sort barrier, stop right?

944
00:55:35,200 --> 00:55:37,200
So do something like,

945
00:55:39,800 --> 00:55:40,500
If?

946
00:55:42,300 --> 00:55:46,100
A manual dots.

947
00:55:46,100 --> 00:55:48,500
What is the remember what this is here?

948
00:55:53,500 --> 00:55:58,400
if a manual Foo equals, the Sprite barrier value, then we just bail

949
00:56:02,200 --> 00:56:03,000
And that's it.

950
00:56:03,500 --> 00:56:03,900
All right.

951
00:56:06,600 --> 00:56:08,600
Not a member of sorts, right bound.

952
00:56:17,100 --> 00:56:17,900
Is that so?

953
00:56:20,900 --> 00:56:22,000
It's in here actually.

954
00:56:22,700 --> 00:56:27,600
So I guess, in that case, if it's actually in here, if this is what

955
00:56:27,600 --> 00:56:33,300
We're looping over, we could actually, it actually wouldn't have to be

956
00:56:33,300 --> 00:56:34,700
stored in the manual part.

957
00:56:34,700 --> 00:56:40,500
I suppose we could store that in the offset instead, so maybe we'll do

958
00:56:40,500 --> 00:56:41,000
that.

959
00:56:41,900 --> 00:56:43,200
So in here, we'll do like

960
00:56:44,100 --> 00:56:45,700
Spray Perry offset value.

961
00:56:48,500 --> 00:56:49,500
and we'll say,

962
00:56:59,400 --> 00:56:59,700
okay.

963
00:57:00,100 --> 00:57:03,300
A manual that offset is not right.

964
00:57:03,300 --> 00:57:07,200
We just want offset and and that's it.

965
00:57:08,200 --> 00:57:11,000
So if we run it now because we're basically out of time, we should,

966
00:57:11,000 --> 00:57:14,200
yeah, we shouldn't have any chain, so everything should be fine, but

967
00:57:14,200 --> 00:57:19,800
now we should be able to go back and and and make that make that

968
00:57:19,800 --> 00:57:22,000
change, which I think is what I'd like to do on Monday.

969
00:57:22,900 --> 00:57:26,300
I'm going to go to build that bat and say that we're going back to

970
00:57:26,300 --> 00:57:27,100
debug mode.

971
00:57:28,400 --> 00:57:31,600
And then I think we're going to call it for tonight because I don't

972
00:57:31,600 --> 00:57:35,500
want to start that and until then, and I think we'll also get our

973
00:57:35,500 --> 00:57:36,600
frame rate back at that point.

974
00:57:36,600 --> 00:57:39,900
Because right now, it's a complete crazy town, right?

975
00:57:39,900 --> 00:57:43,200
Like if you look at what happens with the,

976
00:57:47,400 --> 00:57:51,200
you know, right now there's everything is just nuts in terms of like

977
00:57:51,200 --> 00:57:54,300
how much stuff there is getting sorted and what not,

978
00:58:01,900 --> 00:58:04,800
And there's really no need to create these ridiculous graphs there.

979
00:58:04,800 --> 00:58:07,300
They're just and they're going to create all kinds of cycle problems

980
00:58:07,300 --> 00:58:08,200
for us as well.

981
00:58:10,400 --> 00:58:12,400
Yeah, all right.

982
00:58:16,800 --> 00:58:17,000
All right.

983
00:58:17,000 --> 00:58:18,800
Let's go to the Q&A.

984
00:58:44,200 --> 00:58:44,700
Diplo.

985
00:58:44,700 --> 00:58:47,100
Where are all those familiars coming from?

986
00:58:49,500 --> 00:58:51,000
I have no idea.

987
00:58:51,000 --> 00:58:56,400
I mean, there's a one familiar created for every level and I guess I

988
00:58:56,400 --> 00:58:58,800
don't know that I've looked at the familiar code in a while.

989
00:58:58,800 --> 00:59:02,100
I don't know that we, they might just be able to.

990
00:59:03,200 --> 00:59:07,100
Yeah, I think they're allowed to just go straight line a little bit.

991
00:59:09,100 --> 00:59:09,800
I guess.

992
00:59:11,200 --> 00:59:12,000
I don't really know.

993
00:59:18,300 --> 00:59:21,700
So I think they just kind of--can float on down their code is such

994
00:59:21,700 --> 00:59:24,500
that they don't I don't think they check.

995
00:59:28,500 --> 00:59:32,500
For anything other than whether the thing they're going to is blocked.

996
00:59:40,500 --> 00:59:41,900
This things are creepy.

997
01:01:01,300 --> 01:01:02,700
So, I don't think there's any questions.

998
01:01:06,800 --> 01:01:08,300
Which I guess means we can end early.

999
01:01:15,900 --> 01:01:17,000
Snake looks broken.

1000
01:01:23,800 --> 01:01:26,600
Yeah, I guess why is there only one piece of the snake?

1001
01:01:32,200 --> 01:01:38,500
The snake was like, went up the stairs or something, how is it allowed

1002
01:01:38,500 --> 01:01:39,200
to do that?

1003
01:01:47,000 --> 01:01:48,500
That's a pretty interesting bug.

1004
01:01:53,400 --> 01:01:53,800
Snake.

1005
01:01:53,800 --> 01:01:55,000
How did you do that?

1006
01:01:58,300 --> 01:02:03,200
It went up at not even the stairs, he just went up to a higher level.

1007
01:02:05,100 --> 01:02:08,500
But only that snake all the rest of the snakes.

1008
01:02:10,200 --> 01:02:11,300
Are apparently fine.

1009
01:02:14,200 --> 01:02:15,200
That's real weird.

1010
01:02:35,400 --> 01:02:36,000
Hmm.

1011
01:02:39,600 --> 01:02:41,300
I also don't think we've ever seen that before.

1012
01:02:42,800 --> 01:02:43,400
Have we?

1013
01:02:46,700 --> 01:02:47,100
Oops.

1014
01:02:50,100 --> 01:02:52,400
It's going to be nice to finally be on game code after a.

1015
01:02:52,400 --> 01:02:55,600
So I can go make all this stuff a lot, tighter and cleaner.

1016
01:02:55,600 --> 01:02:57,500
That it's also it's also kind of stupid.

1017
01:02:57,500 --> 01:02:58,100
Now, the

1018
01:03:01,200 --> 01:03:06,500
since we haven't really written any actual game code here like guys,

1019
01:03:06,500 --> 01:03:07,400
seriously

1020
01:03:08,900 --> 01:03:09,600
Come on.

1021
01:03:09,800 --> 01:03:11,600
Get get out of there.

1022
01:03:11,600 --> 01:03:13,100
Get, I'm trying to go up the stairs.

1023
01:03:13,100 --> 01:03:14,900
Just come on over here for a second.

1024
01:03:23,900 --> 01:03:25,800
And just stay out of my way, please.

1025
01:03:26,900 --> 01:03:28,400
Oh, now the snake is going, okay?

1026
01:03:28,400 --> 01:03:32,100
That time, the snake actually decided to go up the stairs, which I

1027
01:03:32,100 --> 01:03:35,200
suppose is fine as long as it gets out of the way.

1028
01:03:41,400 --> 01:03:43,400
so yes, somehow

1029
01:03:44,500 --> 01:03:48,500
And we will have to develop how oh wait no.

1030
01:03:48,500 --> 01:03:49,900
But that's the snake that just went upstairs.

1031
01:03:49,900 --> 01:03:52,500
So now we still don't know where that other snake went, we have no

1032
01:03:52,500 --> 01:03:52,900
idea.

1033
01:03:53,100 --> 01:03:55,500
Okay guys, stop going up the stairs.

1034
01:03:55,600 --> 01:03:56,800
Where do you think you're going?

1035
01:03:57,200 --> 01:03:58,600
Is there even another floor?

1036
01:03:58,900 --> 01:03:59,700
I guess there is

1037
01:04:09,800 --> 01:04:13,200
this still does not answer our question as to where that for a snake

1038
01:04:13,200 --> 01:04:15,400
even when we have no idea,

1039
01:04:23,400 --> 01:04:24,200
So there it is.

1040
01:04:24,800 --> 01:04:29,100
So somehow that guy jumped all the way to the top level.

1041
01:04:29,400 --> 01:04:34,100
I'm assuming that we must have a bug or because we haven't.

1042
01:04:34,300 --> 01:04:37,100
Well, I guess we didn't really do much on the code for

1043
01:04:39,000 --> 01:04:42,100
In fact we haven't done anything, I guess on the code for Z like, how

1044
01:04:42,100 --> 01:04:45,500
far you can jump up, it must have done something interesting where it

1045
01:04:45,500 --> 01:04:48,000
was able to pick a high floor right away.

1046
01:05:04,300 --> 01:05:05,500
These are the creepiest.

1047
01:05:05,900 --> 01:05:11,800
I tell you dismembered heads floating around is just it's just creepy.

1048
01:06:03,200 --> 01:06:05,200
Don't know where the snake had actually is here.

1049
01:06:06,200 --> 01:06:08,100
Unfortunately, I can't really look.

1050
01:06:12,300 --> 01:06:14,700
Like I said, I'm not really too concerned about that code, because

1051
01:06:14,700 --> 01:06:17,700
that's not really stuff that we've kind of dealt with.

1052
01:06:17,700 --> 01:06:21,200
Finally, it's just weird.

1053
01:06:21,200 --> 01:06:22,900
Some of the behaviors you get.

1054
01:06:47,200 --> 01:06:47,700
Alright.

1055
01:06:47,700 --> 01:06:48,700
Imma wrap it up.

1056
01:06:58,100 --> 01:07:01,100
Okay, thank you for joining me for an episode handmade here.

1057
01:07:01,100 --> 01:07:02,200
It's a pleasure coding with you.

1058
01:07:02,200 --> 01:07:05,100
As always, if you would like to follow along at home, you can always

1059
01:07:05,100 --> 01:07:07,600
pre-order the game on handmade here a.org, and it comes to the source

1060
01:07:07,600 --> 01:07:08,000
code.

1061
01:07:08,300 --> 01:07:12,400
We also have a forum site, you can use ask questions a patreon page.

1062
01:07:12,400 --> 01:07:15,500
If you want to support our video series, a schedule about the tweets

1063
01:07:15,500 --> 01:07:16,000
to schedule it.

1064
01:07:16,000 --> 01:07:18,600
You, if you want to know where we're going to be live and an episode

1065
01:07:18,600 --> 01:07:23,800
guide, which will help you catch up on our past.

1066
01:07:24,000 --> 01:07:24,400
Fine.

1067
01:07:24,400 --> 01:07:27,000
Fine episodes, that's about it for tonight.

1068
01:07:27,000 --> 01:07:27,800
I'll be back next.

1069
01:07:27,900 --> 01:07:30,900
Tweak be sure to check the schedule about if you want to know when

1070
01:07:31,400 --> 01:07:35,200
until then have fun coating everyone and I will see you on the

1071
01:07:35,200 --> 01:07:35,600
internet.

1072
01:07:35,600 --> 01:07:36,400
Take it easy everyone.

