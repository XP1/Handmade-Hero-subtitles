1
00:00:01,500 --> 00:00:03,700
Hello everyone, welcome to handmade hero.

2
00:00:03,700 --> 00:00:06,900
The the show where we could complete game live on Twitch.

3
00:00:06,900 --> 00:00:08,400
No engines, no libraries.

4
00:00:08,600 --> 00:00:09,300
It's just us.

5
00:00:09,800 --> 00:00:13,900
And basically, we're trying to make a sort of a complete survey of

6
00:00:13,900 --> 00:00:17,000
absolutely everything that's involved in the development of the game,

7
00:00:17,000 --> 00:00:20,100
so that if you actually follow the series from start to finish, you

8
00:00:20,100 --> 00:00:24,400
will know absolutely everything that goes into the execution of a

9
00:00:24,400 --> 00:00:27,200
game, right down to how the pixels are drawn and all the way up to the

10
00:00:27,200 --> 00:00:29,800
very highest levels of like how the AI works and stuff.

11
00:00:30,000 --> 00:00:30,500
Like that.

12
00:00:31,400 --> 00:00:36,000
And yesterday basically we had a little bit of a problem which is that

13
00:00:36,000 --> 00:00:39,900
I could not seem to figure out a very good way to explain how we need

14
00:00:39,900 --> 00:00:43,200
to transferred and normals without getting mired in a lot of Matrix

15
00:00:43,200 --> 00:00:44,400
math and stuff like that.

16
00:00:44,500 --> 00:00:46,600
Which I realize is challenging for people, especially because we

17
00:00:46,600 --> 00:00:51,100
haven't really done much of it on the stream and specifically, I do

18
00:00:51,100 --> 00:00:56,800
know that that me blow on on the chat was like I cannot follow this

19
00:00:57,400 --> 00:00:58,800
and I totally appreciate that.

20
00:00:58,800 --> 00:00:59,900
I do know that it's difficult.

21
00:01:00,000 --> 00:01:04,500
So I was trying to think if we could possibly do it in some other way.

22
00:01:04,500 --> 00:01:08,600
And I think I may have thought of a relatively easy way to describe

23
00:01:08,600 --> 00:01:13,100
how normals have to be transformed without having to actually talk

24
00:01:13,100 --> 00:01:14,200
about matrices at all.

25
00:01:14,400 --> 00:01:15,400
I'm not sure.

26
00:01:15,700 --> 00:01:21,100
But I'll try and then you can see if this makes more sense as we go,

27
00:01:21,300 --> 00:01:22,000
right?

28
00:01:22,000 --> 00:01:25,300
So I'm going to try it and you can tell me whether this is is better.

29
00:01:25,800 --> 00:01:28,800
So this is the Matrix version of what we are trying to say, but this

30
00:01:28,800 --> 00:01:29,700
was very complicated.

31
00:01:29,900 --> 00:01:30,400
People.

32
00:01:30,700 --> 00:01:32,700
So, I'm going to try a slightly different version.

33
00:01:33,000 --> 00:01:39,200
All right, so I want to talk about the following example, suppose that

34
00:01:39,200 --> 00:01:42,100
we were to draw a house and it's a Sprite, right?

35
00:01:42,100 --> 00:01:43,100
It's a Sprite house.

36
00:01:43,900 --> 00:01:46,300
And so, here is my house bitmap.

37
00:01:46,500 --> 00:01:50,500
And this is, you know, the actual this is the color bitmap, right?

38
00:01:50,500 --> 00:01:52,600
This is the actual house for drawing on the screen.

39
00:01:52,800 --> 00:01:54,800
So we have a y axis and an X axis.

40
00:01:54,800 --> 00:01:58,000
And we're drawing this house right now.

41
00:01:58,000 --> 00:01:59,800
If you imagine the normal map,

42
00:02:00,000 --> 00:02:01,600
For this thing, right?

43
00:02:02,100 --> 00:02:04,800
You can imagine that there is going to be normals.

44
00:02:04,800 --> 00:02:08,400
For example, if I wanted to point out off of the side of this house or

45
00:02:08,400 --> 00:02:10,699
something like this, you could imagine putting a normal and that

46
00:02:10,699 --> 00:02:12,600
pointed off of the roof of the house.

47
00:02:12,600 --> 00:02:16,800
Like so now, how would you have found what that normal was like, what

48
00:02:16,800 --> 00:02:17,200
does it?

49
00:02:17,200 --> 00:02:18,400
What does that normal mean?

50
00:02:18,500 --> 00:02:19,100
Right?

51
00:02:19,100 --> 00:02:23,700
Well if you imagine these two points here, okay, let's say that I have

52
00:02:24,000 --> 00:02:25,000
one point here.

53
00:02:25,000 --> 00:02:28,300
Let's say that this is P1 and I have this point down here which is P0.

54
00:02:28,600 --> 00:02:29,500
And so if I took the

55
00:02:29,900 --> 00:02:33,800
ER, from P0 to P1, I would have that Vector, right?

56
00:02:34,300 --> 00:02:39,100
And you could imagine me saying, well in fact, Let me let me do it the

57
00:02:39,100 --> 00:02:39,600
other direction.

58
00:02:39,600 --> 00:02:41,300
Just so our perp goes the right way.

59
00:02:41,600 --> 00:02:42,400
Let's do it this way.

60
00:02:42,700 --> 00:02:43,100
Let's do it.

61
00:02:43,300 --> 00:02:44,200
Let's do it like that.

62
00:02:44,300 --> 00:02:45,800
Let's let's stay right hand rule for now.

63
00:02:45,800 --> 00:02:46,400
All right.

64
00:02:47,500 --> 00:02:52,300
So if you imagine this Vector here and the one that goes from P0 to

65
00:02:52,300 --> 00:02:53,200
P1, right?

66
00:02:53,200 --> 00:02:54,500
I'll call that V for now.

67
00:02:54,500 --> 00:02:56,500
Let's say that Vector.

68
00:02:56,700 --> 00:02:59,800
If you think about how this normal is related, right?

69
00:03:00,100 --> 00:03:04,000
The normal is the vector, that's perpendicular to the to this roof of

70
00:03:04,000 --> 00:03:04,800
the house, right?

71
00:03:04,800 --> 00:03:06,700
That's kind of the definition of the normal, right?

72
00:03:06,700 --> 00:03:10,800
It's the perpendiculars there to the things that we have constructed.

73
00:03:10,800 --> 00:03:13,500
Now this is in 2D yes, but you'll have to just bear with me for a

74
00:03:13,500 --> 00:03:18,500
second because I think this extends the 3D for us just fine because we

75
00:03:18,500 --> 00:03:20,400
don't actually have any 3D rotations.

76
00:03:22,600 --> 00:03:23,700
Or 3D scaling, right?

77
00:03:23,700 --> 00:03:27,500
We're just scaling and rotating Sprites on the screen.

78
00:03:27,500 --> 00:03:33,000
We don't actually have to tilt them in 3D, so if you imagine what

79
00:03:33,000 --> 00:03:37,800
happens right here, you can you can sort of Imagine, writing some kind

80
00:03:37,800 --> 00:03:39,400
of equation for this normal.

81
00:03:39,400 --> 00:03:40,900
That's actually very simple, right?

82
00:03:40,900 --> 00:03:46,200
I could say that I just wanted to take the perpendicular right of P.

83
00:03:46,200 --> 00:03:51,000
1, minus p 0 or the perpendicular of V, right.

84
00:03:51,100 --> 00:03:52,300
And now if you remember,

85
00:03:52,900 --> 00:03:55,800
We already talked about how to get that perpendicular, right?

86
00:03:55,900 --> 00:03:58,200
The perpendicular of some Vector, right?

87
00:03:58,200 --> 00:03:59,200
We already said that.

88
00:03:59,200 --> 00:04:03,100
If the vector, you know, is vxvy, right?

89
00:04:03,200 --> 00:04:04,400
We already talked about how to get it.

90
00:04:04,400 --> 00:04:06,800
It was - v yv x, right?

91
00:04:06,800 --> 00:04:08,700
And the reason for that was very straightforward.

92
00:04:10,400 --> 00:04:14,300
It's just because if you imagine how to make a 90 degree rotated,

93
00:04:14,300 --> 00:04:16,800
Vector from any Vector in the plane, right?

94
00:04:16,899 --> 00:04:22,200
Whatever my whatever my Y and my ex are well, the

95
00:04:22,300 --> 00:04:26,700
Corresponding version, just has the Y here, negated, right?

96
00:04:26,700 --> 00:04:30,800
It's going off that way, and it just has the X here is this the same

97
00:04:31,400 --> 00:04:32,400
positive, right?

98
00:04:32,400 --> 00:04:34,700
The same, the same sign as it was, right?

99
00:04:34,800 --> 00:04:38,200
So it's really just, it's just swapping which coordinates are using

100
00:04:38,300 --> 00:04:41,200
and the gating one of them to get that 90 degree rotation, right?

101
00:04:41,400 --> 00:04:43,600
And in fact, you can imagine doing this all the way around, right?

102
00:04:43,600 --> 00:04:47,300
You could imagine doing this is the negated Vector entirely, right?

103
00:04:47,300 --> 00:04:49,500
This is - why - x, right?

104
00:04:49,600 --> 00:04:52,200
And here's the other, the other 90 degree

105
00:04:52,400 --> 00:04:52,800
Station.

106
00:04:52,800 --> 00:04:52,900
Right?

107
00:04:52,900 --> 00:04:54,200
Because there's two perpendiculars.

108
00:04:54,200 --> 00:04:55,700
There's a perpendicular in either direction.

109
00:04:55,900 --> 00:04:58,000
This one is just the other way, round.

110
00:04:58,300 --> 00:05:00,200
This one also, right?

111
00:05:00,200 --> 00:05:02,300
Has exactly like, it has the why, right?

112
00:05:02,300 --> 00:05:05,900
But the Y is positive this time and the x is the thing that's negative

113
00:05:05,900 --> 00:05:06,700
on the right?

114
00:05:06,700 --> 00:05:08,300
So there's actually two perpendiculars.

115
00:05:08,300 --> 00:05:11,100
There are sort of you might think of it as the counter clockwise,

116
00:05:11,500 --> 00:05:11,800
right?

117
00:05:11,800 --> 00:05:14,500
And that's the one we have been using, but there's also a clockwise

118
00:05:14,500 --> 00:05:15,200
one, right?

119
00:05:15,200 --> 00:05:18,000
And the clockwise one would be exactly the same thing.

120
00:05:18,000 --> 00:05:19,700
But just negated, right?

121
00:05:20,900 --> 00:05:22,200
So, hopefully you still remember

122
00:05:22,300 --> 00:05:22,700
All that.

123
00:05:22,700 --> 00:05:23,100
And that's true.

124
00:05:23,100 --> 00:05:24,400
And that's not confusing.

125
00:05:25,100 --> 00:05:27,200
You'll have to tell me me, blow at the end if for some reason, your

126
00:05:27,200 --> 00:05:29,500
computer's about this stuff as well, but hopefully, that stuff is all

127
00:05:29,500 --> 00:05:30,100
really straightforward.

128
00:05:30,100 --> 00:05:32,500
It's just a case of constructing those vectors.

129
00:05:32,900 --> 00:05:36,200
So if we were to look at how we would construct this normal, right?

130
00:05:37,200 --> 00:05:40,000
Well, you can kind of see how it would work, you just say, well,

131
00:05:40,000 --> 00:05:43,000
whatever, the vector for the roof is, I want the perpendicular Vector

132
00:05:43,000 --> 00:05:43,700
to that.

133
00:05:43,900 --> 00:05:46,300
And so, when I construct the perpendicular Vector, that that's my

134
00:05:46,300 --> 00:05:47,700
normal, right?

135
00:05:48,600 --> 00:05:52,200
But now we've gone and done something, we've created a normal map,

136
00:05:52,200 --> 00:05:52,900
right?

137
00:05:52,900 --> 00:05:58,600
So we've essentially saved this normal constructed as if we were not

138
00:05:58,600 --> 00:05:59,900
doing any kind of work.

139
00:06:00,000 --> 00:06:02,000
Transforms to this thing, right?

140
00:06:02,500 --> 00:06:07,700
So if we wanted to later, if we were to go ahead and rotate our map,

141
00:06:07,700 --> 00:06:08,000
right?

142
00:06:08,000 --> 00:06:13,100
So we want to rotate it in the world like so and we want to rotate our

143
00:06:13,100 --> 00:06:13,700
house.

144
00:06:14,800 --> 00:06:17,700
Well, all the points we talked about how we would rotate the points.

145
00:06:17,700 --> 00:06:22,100
So all of the points like especially P1 and P0, right?

146
00:06:22,600 --> 00:06:27,200
They would rotate by the standard rotation that we were using the

147
00:06:27,200 --> 00:06:29,600
standard rotation, the way that we were using

148
00:06:30,100 --> 00:06:33,200
Before it to build up our coordinate systems, right?

149
00:06:33,200 --> 00:06:35,900
If you remember, we have an X axis, we have a y-axis.

150
00:06:36,000 --> 00:06:41,100
We can just find the points by saying p0x write X.

151
00:06:41,100 --> 00:06:42,200
The x axis plus p.

152
00:06:42,200 --> 00:06:46,200
0, y times, the y axis that gives us a vector.

153
00:06:46,400 --> 00:06:51,500
That is @p 0 and similarly P 1 x times, x axis and P1.

154
00:06:51,800 --> 00:06:56,100
Y times the y axis that would give us write the new points in the

155
00:06:56,100 --> 00:06:56,700
world.

156
00:06:56,700 --> 00:06:58,800
And so if we wanted to find out what that new

157
00:07:00,000 --> 00:07:01,300
Norma was, right.

158
00:07:02,400 --> 00:07:06,700
You could imagine applying the exact same transform to it, because all

159
00:07:06,700 --> 00:07:10,100
the normal has done in this, in this case, it is, that is rotated.

160
00:07:10,100 --> 00:07:10,700
Exactly.

161
00:07:10,700 --> 00:07:12,500
As if it was one of these points, right?

162
00:07:12,500 --> 00:07:16,500
If we imagine the normal, doesn't have early a location to it, right?

163
00:07:16,700 --> 00:07:19,500
So you have to imagine, it's being coded as if that's all pointing.

164
00:07:19,500 --> 00:07:21,500
All the normals are just kind of as if there are pointing out of the

165
00:07:21,700 --> 00:07:23,100
out of the origin, right?

166
00:07:23,100 --> 00:07:26,400
But you can imagine it would just get the exact same process would

167
00:07:26,400 --> 00:07:27,400
happen to that normal.

168
00:07:27,400 --> 00:07:29,800
Write the exact same thing would happen to it and its direction.

169
00:07:29,900 --> 00:07:32,200
Ian would change appropriately, right?

170
00:07:32,500 --> 00:07:36,200
So if all we were talking about was rotation, we would not actually

171
00:07:36,200 --> 00:07:39,500
have to do anything differently to process our normal map, we could

172
00:07:39,500 --> 00:07:42,300
literally just use the same algorithm we were using.

173
00:07:42,300 --> 00:07:47,600
We could just use MX x + NY y to compute, what the new normal would

174
00:07:47,600 --> 00:07:47,900
be.

175
00:07:47,900 --> 00:07:50,100
That would be totally fine, right?

176
00:07:50,600 --> 00:07:53,800
There'd be no problem with that because that would allow it to rotate

177
00:07:53,800 --> 00:07:57,700
just the way everything else is rotating and if it were to scale.

178
00:07:57,700 --> 00:07:59,800
So if we were to scale this up, let's say we

179
00:08:00,000 --> 00:08:03,500
Scaling it up to twice, the exercise of the x-axis, and the y-axis

180
00:08:03,800 --> 00:08:04,800
that would be fine too.

181
00:08:04,800 --> 00:08:06,400
As long as the scale is uniform.

182
00:08:06,400 --> 00:08:09,100
Because if the scales uniform, the direction of the normal doesn't

183
00:08:09,100 --> 00:08:12,200
change and we know we were already going to normalize the normal

184
00:08:12,200 --> 00:08:12,500
anyway.

185
00:08:12,500 --> 00:08:15,800
We already said we already have code in there that that changes it

186
00:08:15,800 --> 00:08:18,900
back to length 1, right?

187
00:08:19,100 --> 00:08:22,300
So it so we really could do anything that we wanted to as long as we

188
00:08:22,300 --> 00:08:27,300
did uniform scale, right and rotation.

189
00:08:28,100 --> 00:08:31,000
So the only problem and the thing that I was trying to get at the

190
00:08:31,000 --> 00:08:35,400
other day was what would happen is this we wanted to do non-uniform

191
00:08:35,400 --> 00:08:36,700
scale, okay?

192
00:08:37,299 --> 00:08:41,700
So what happens if we do non-uniform scale so non-uniform scale, we

193
00:08:41,700 --> 00:08:42,500
have our house

194
00:08:45,100 --> 00:08:50,400
Okay, there's a there's rp0, there's rp1 and there's RN.

195
00:08:50,500 --> 00:08:51,700
Oops, that's really bad.

196
00:08:53,400 --> 00:08:54,100
There's RN.

197
00:08:54,600 --> 00:08:58,300
Okay, we then want to do non-uniform, scale to it.

198
00:08:58,300 --> 00:08:59,800
Let's say that we go ahead and

199
00:09:00,100 --> 00:09:06,300
Take this this x-axis and we're going to scale out the x axis quite a

200
00:09:06,300 --> 00:09:06,900
bit, right?

201
00:09:06,900 --> 00:09:10,200
So it's going to be very elongated, but the y-axis is not going to

202
00:09:10,200 --> 00:09:10,600
change.

203
00:09:10,700 --> 00:09:12,700
The y axis is going to be the same, right?

204
00:09:13,000 --> 00:09:16,200
So if we did that, we would end up with something that looked a lot

205
00:09:16,200 --> 00:09:18,100
more like this, right?

206
00:09:20,100 --> 00:09:21,100
That's what we would get.

207
00:09:25,100 --> 00:09:25,600
Okay.

208
00:09:26,100 --> 00:09:30,600
And what you can see here is that our normal has actually done the

209
00:09:30,600 --> 00:09:33,400
opposite thing as what the points of done, right?

210
00:09:33,400 --> 00:09:35,400
So imagine what happens to the normal here.

211
00:09:35,400 --> 00:09:38,800
Think about this normal, as if it was down at the origin, right?

212
00:09:38,900 --> 00:09:41,300
We've got a normal that's basically pointing 45 degrees.

213
00:09:41,300 --> 00:09:45,600
Here we scale out the x axis, what we would think we would get.

214
00:09:45,600 --> 00:09:49,800
If we scaled out, this x-axis is a normal, that's pointing much more

215
00:09:50,500 --> 00:09:51,500
like much lower.

216
00:09:51,500 --> 00:09:54,300
If this is the 45 degrees, it's pointing much lower.

217
00:09:54,300 --> 00:09:54,800
It's deflected.

218
00:09:54,900 --> 00:09:58,400
Up to 45 degrees but actually if you look at what the normal should

219
00:09:58,400 --> 00:10:02,900
be, the normal should actually be pointing higher than the 45 degree.

220
00:10:03,000 --> 00:10:05,000
It can actually be pointing that way.

221
00:10:06,700 --> 00:10:07,700
Does that make sense?

222
00:10:08,300 --> 00:10:10,200
I hope everyone's on board with that, okay?

223
00:10:10,200 --> 00:10:12,100
It's a very subtle thing that's very important.

224
00:10:15,000 --> 00:10:15,300
Okay.

225
00:10:15,300 --> 00:10:20,300
So using the same transform, if it has non-uniform scaling, it using

226
00:10:20,300 --> 00:10:24,000
the same transform for the normals doesn't work, right?

227
00:10:24,100 --> 00:10:25,000
It doesn't work.

228
00:10:25,200 --> 00:10:31,700
And the reason that it doesn't work is because as surfaces elongate

229
00:10:31,900 --> 00:10:38,400
right, the normal, the perpendicular follows, the exact same rule, as

230
00:10:38,400 --> 00:10:41,500
what we were using to construct the perpendicular before, right?

231
00:10:41,500 --> 00:10:44,700
If this is how a vector is constructed in the space, then if

232
00:10:44,900 --> 00:10:48,300
These things are scaled along X differently than why.

233
00:10:48,500 --> 00:10:52,300
Well, the normals got them flipped, which one is the Y and the X,

234
00:10:52,300 --> 00:10:52,500
right?

235
00:10:52,500 --> 00:10:53,700
That's where it came from.

236
00:10:54,000 --> 00:10:58,200
So if you scale the X up, it's actually the Y component of the normal

237
00:10:58,200 --> 00:10:59,800
that's going to get affected.

238
00:11:01,100 --> 00:11:03,100
So hopefully that makes some sense, right?

239
00:11:03,200 --> 00:11:04,900
And let's see exactly how that works.

240
00:11:05,400 --> 00:11:07,900
So, if I want to compute this normal, right?

241
00:11:08,000 --> 00:11:11,000
I've got, like I said before, I've got that n, I'm going to call this

242
00:11:11,000 --> 00:11:11,800
vector v.

243
00:11:11,900 --> 00:11:12,200
Okay.

244
00:11:12,200 --> 00:11:14,900
And I've got here this vector v over here and I guess we'll call this

245
00:11:14,900 --> 00:11:16,900
m Prime and V prime or something like this, right?

246
00:11:16,900 --> 00:11:18,700
Just can see there's difference between them, right.

247
00:11:20,400 --> 00:11:23,700
So, if I want to create these, these vectors here, right?

248
00:11:24,900 --> 00:11:25,800
What ends up happening?

249
00:11:25,800 --> 00:11:29,300
Is my normal, is that perpendicular right to V?

250
00:11:29,700 --> 00:11:30,100
Okay?

251
00:11:30,300 --> 00:11:34,600
And the normal here, M Prime is the perpendicular to V Prime, right?

252
00:11:35,100 --> 00:11:39,800
And so what happens when I, when I look at what, what?

253
00:11:39,900 --> 00:11:45,000
What goes on with v Prime right here, V is equal to v x v, y, right?

254
00:11:45,800 --> 00:11:49,100
Which means that the perpendicular here is going to be negative V.

255
00:11:49,600 --> 00:11:51,100
VX, right.

256
00:11:51,100 --> 00:11:58,500
That's what it's going to be but here my V Prime is equal to its you

257
00:11:58,500 --> 00:11:59,600
know, let's say we've

258
00:12:00,300 --> 00:12:02,500
How long this x axis is right?

259
00:12:03,100 --> 00:12:07,800
My V Prime is going to be to VX essentially v y after that transform.

260
00:12:07,900 --> 00:12:08,400
Right?

261
00:12:09,600 --> 00:12:14,300
And so the perpendicular to it is actually going to be negative v y.

262
00:12:14,300 --> 00:12:17,800
Same thing up top to VX.

263
00:12:18,400 --> 00:12:18,700
Okay.

264
00:12:18,700 --> 00:12:21,300
That's actually going to be the new perpendicular.

265
00:12:22,200 --> 00:12:28,300
So what I hope you can see here is that the action the activity of the

266
00:12:28,300 --> 00:12:29,800
X and the y axis

267
00:12:30,000 --> 00:12:32,600
He is flipping, right?

268
00:12:32,600 --> 00:12:35,200
It's, it's whichever is getting elongated.

269
00:12:35,200 --> 00:12:39,700
It's actually affecting the other axis for the normal, okay?

270
00:12:39,900 --> 00:12:44,700
So if the x-axis went by 2X or went up by two, right?

271
00:12:44,800 --> 00:12:51,700
Then it's actually the why I'm sorry, then it's the, why of the normal

272
00:12:51,700 --> 00:12:54,600
that's actually getting that to multiplier, okay?

273
00:12:55,500 --> 00:13:01,700
And so this is the part that really important to understand, okay?

274
00:13:02,400 --> 00:13:09,400
The normals because they are perpendicular to two vectors in the

275
00:13:09,400 --> 00:13:12,400
actual transform space because they're perpendicular.

276
00:13:12,500 --> 00:13:19,900
They they are affected in a perpendicular way by any transforms that

277
00:13:19,900 --> 00:13:20,700
we might do.

278
00:13:20,900 --> 00:13:24,400
And so if we were to transform them without respecting that,

279
00:13:25,100 --> 00:13:29,400
We would end up having very incorrect Reflections, right?

280
00:13:31,100 --> 00:13:33,600
So how can we work around this, right?

281
00:13:33,800 --> 00:13:36,300
We know we're going to load this normal, right?

282
00:13:36,300 --> 00:13:38,700
Because this is the normal that your written into the map, right?

283
00:13:38,700 --> 00:13:42,700
Basically, the original encoding of whatever the our asset was with no

284
00:13:42,700 --> 00:13:43,900
transform whatsoever.

285
00:13:44,000 --> 00:13:46,200
This got written into the map, right?

286
00:13:46,500 --> 00:13:48,200
And we know that we can't use.

287
00:13:48,200 --> 00:13:54,200
N XX + n YY for our normals because we know that the links are wrong

288
00:13:54,200 --> 00:13:55,100
here, right?

289
00:13:55,500 --> 00:13:59,700
But we also, right, so that's not that's not allowed.

290
00:14:00,100 --> 00:14:01,100
I don't know how you do that.

291
00:14:02,000 --> 00:14:02,900
Not allowed.

292
00:14:03,500 --> 00:14:04,900
That won't help us, right?

293
00:14:05,200 --> 00:14:07,100
Similarly, we can't use n.

294
00:14:08,200 --> 00:14:08,900
We can't use n.

295
00:14:08,900 --> 00:14:14,700
XY, plus NYX, we can't just flip which acts as we're using, because

296
00:14:14,700 --> 00:14:17,100
that will actually rotate our normal, right?

297
00:14:17,100 --> 00:14:20,400
Because the rotation for the normals actually, correct, right?

298
00:14:20,500 --> 00:14:26,100
We actually do want to preserve the direction of the X and y-axes we

299
00:14:26,100 --> 00:14:29,800
just want to make sure that we we treat the

300
00:14:29,900 --> 00:14:32,200
the scaling differently, right?

301
00:14:33,600 --> 00:14:36,800
So, what we actually want here, right?

302
00:14:36,800 --> 00:14:42,500
What we actually want is we want NX X, right?

303
00:14:42,500 --> 00:14:47,700
But instead of its size, we actually want the length of Y to determine

304
00:14:47,700 --> 00:14:48,100
its size.

305
00:14:48,100 --> 00:14:52,800
So, essentially we want a normalized x axis X however, long, the

306
00:14:52,800 --> 00:14:58,200
y-axis is Right plus RN y.

307
00:14:58,300 --> 00:14:59,800
Then we want the

308
00:15:00,000 --> 00:15:01,300
Axis normalized.

309
00:15:01,300 --> 00:15:02,200
Whatever Direction.

310
00:15:02,200 --> 00:15:06,400
The y axis is pointing is times the length of that x-axis, right?

311
00:15:06,800 --> 00:15:12,200
That actually performs the flip that we actually wanted right, but

312
00:15:12,200 --> 00:15:16,200
preserves the direction of the axes, which we need to capture the

313
00:15:16,200 --> 00:15:17,700
rotation, right?

314
00:15:18,600 --> 00:15:22,500
So if you take a look at how this actually works out, it ends up being

315
00:15:22,500 --> 00:15:24,000
NX, right?

316
00:15:24,200 --> 00:15:25,900
And this, you can see that this right here.

317
00:15:25,900 --> 00:15:28,300
Basically forms a coefficient term on the x-axis.

318
00:15:28,300 --> 00:15:29,800
So it's length of the y-axis over

319
00:15:30,000 --> 00:15:31,500
Length of the x-axis, right?

320
00:15:31,600 --> 00:15:40,700
Like so plus NY length of the x-axis over length of the y, axis, X Y.

321
00:15:41,400 --> 00:15:45,900
So these are the terms that we actually care about here, okay?

322
00:15:46,300 --> 00:15:49,400
And we need to make sure that we compute those terms and apply them to

323
00:15:49,400 --> 00:15:50,200
our normal transform.

324
00:15:50,200 --> 00:15:52,200
Otherwise, it will come out wrong.

325
00:15:52,500 --> 00:15:55,300
And what you can see, if you take a look at this, right?

326
00:15:56,300 --> 00:15:59,600
Is that when we have a transform,

327
00:16:00,100 --> 00:16:04,200
That does not scale the axes in a non-uniform way, right?

328
00:16:04,200 --> 00:16:07,600
Just like I said, remember I set up here as long as we have rotation

329
00:16:07,600 --> 00:16:08,900
and uniform scaling, we're fine.

330
00:16:09,000 --> 00:16:12,400
Well, you can see exactly why because what would be true if we have

331
00:16:12,400 --> 00:16:16,200
uniform scaling uniform, scaling is when the length of the y axis and

332
00:16:16,200 --> 00:16:20,000
the length of the x axis both equal each other, right?

333
00:16:20,300 --> 00:16:23,500
And if these two are equal than both of these ratios will be equal to

334
00:16:23,500 --> 00:16:27,300
1 at which point the transform is the same as the old transform,

335
00:16:27,400 --> 00:16:29,600
right, and xx + n YY.

336
00:16:30,300 --> 00:16:33,800
So the only thing we need to do is just adjust for that non-uniform

337
00:16:33,800 --> 00:16:34,900
scale, okay?

338
00:16:35,600 --> 00:16:38,300
So, does that make sense to everyone?

339
00:16:38,300 --> 00:16:39,400
Hopefully, that makes more sense.

340
00:16:39,400 --> 00:16:44,800
I didn't have to use any of this but suffice to say when we get, maybe

341
00:16:44,800 --> 00:16:47,900
we can come back to this someday later when we talk about matrices

342
00:16:47,900 --> 00:16:49,400
more extensively.

343
00:16:49,400 --> 00:16:55,900
But basically, this activity here, inverse transpose is, what does

344
00:16:55,900 --> 00:16:58,000
that operation to The Matrix?

345
00:16:58,000 --> 00:17:01,800
It basically finds out essentially exactly.

346
00:17:01,800 --> 00:17:05,200
It does exactly this this sort of perpendicular.

347
00:17:05,700 --> 00:17:11,599
Armed to the lengths without affecting the direction of those vectors

348
00:17:11,700 --> 00:17:12,400
inside.

349
00:17:14,900 --> 00:17:18,599
It does that for our specific type of Matrix, but that's a separate

350
00:17:18,599 --> 00:17:19,000
issue.

351
00:17:20,200 --> 00:17:21,300
All right, so does that make sense?

352
00:17:21,300 --> 00:17:22,400
Hopefully, that makes sense.

353
00:17:22,400 --> 00:17:26,900
I will check with the stream at the end and see if me blow is now on

354
00:17:26,900 --> 00:17:27,599
board with this.

355
00:17:29,200 --> 00:17:33,800
And and hopefully, that is a, is a solid enough, sort of explanation

356
00:17:33,800 --> 00:17:35,900
of how everything needs to work.

357
00:17:36,000 --> 00:17:39,900
So that when I go code, it here you will know exactly why I am doing

358
00:17:40,000 --> 00:17:40,900
what I am doing.

359
00:17:41,300 --> 00:17:42,800
So let's open up emacs.

360
00:17:43,600 --> 00:17:44,600
Let's go ahead into

361
00:17:44,700 --> 00:17:45,600
Are handmade.

362
00:17:47,800 --> 00:17:48,600
Render group.

363
00:17:48,900 --> 00:17:52,400
Okay, and we have to draw a rectangle slowly.

364
00:17:52,800 --> 00:17:53,400
Here we are.

365
00:17:54,100 --> 00:17:58,500
And we are at the point, I believe where we were just letting a little

366
00:17:58,500 --> 00:17:59,800
guy rotate around there.

367
00:18:00,000 --> 00:18:01,700
I could see that it was incorrect.

368
00:18:01,700 --> 00:18:01,900
Right.

369
00:18:01,900 --> 00:18:05,900
You can, you can see that it's it's not actually rotating those

370
00:18:05,900 --> 00:18:07,400
Reflections at all.

371
00:18:08,100 --> 00:18:12,000
And so, if I go in here now and start to account for that when we pull

372
00:18:12,000 --> 00:18:13,700
our normal out, right?

373
00:18:14,000 --> 00:18:14,800
So here we go.

374
00:18:15,200 --> 00:18:18,800
So right before we normalize it, we don't want to normalize it yet.

375
00:18:18,800 --> 00:18:21,900
Probably because we'd rather rotate it first and then normalize it so

376
00:18:21,900 --> 00:18:26,600
that we end up just only have to do that one normalize and I feel like

377
00:18:26,600 --> 00:18:29,100
there's really no reason why we wouldn't do that because only the

378
00:18:29,100 --> 00:18:29,700
direction that we

379
00:18:30,000 --> 00:18:31,100
Only care about their so.

380
00:18:31,900 --> 00:18:35,100
So, what we want to do is right here, we want to do, our rotate

381
00:18:35,100 --> 00:18:36,700
normals based on X Y axis.

382
00:18:36,800 --> 00:18:37,300
Right?

383
00:18:37,500 --> 00:18:41,700
And the way that that's going to work, remember, we don't actually

384
00:18:41,700 --> 00:18:47,300
have a 3D rotation, but our normals do have three components, right?

385
00:18:47,400 --> 00:18:49,100
They have X Y & Z.

386
00:18:49,600 --> 00:18:52,400
The Z doesn't rotate, right?

387
00:18:52,500 --> 00:18:56,300
The Z pointing in and out of the screen, we don't allow you to rotate

388
00:18:56,300 --> 00:18:58,300
that at all, we're only rotating this way.

389
00:18:58,700 --> 00:18:59,800
So really it's just the

390
00:19:00,100 --> 00:19:04,900
And why it's just that Vector is the only one that we are actually

391
00:19:04,900 --> 00:19:07,100
trying to affect, right?

392
00:19:08,100 --> 00:19:12,100
And so what we want to do is actually do that transform.

393
00:19:12,100 --> 00:19:12,600
I don't know.

394
00:19:12,600 --> 00:19:17,000
Does are handmade Mass support assignments to just x's and y's, it

395
00:19:17,000 --> 00:19:18,000
does so.

396
00:19:18,000 --> 00:19:18,800
So there we go.

397
00:19:21,300 --> 00:19:25,200
So if I go ahead and update that all, I really need to do is say, all

398
00:19:25,200 --> 00:19:29,400
right, I've got my normal x times my

399
00:19:29,900 --> 00:19:30,900
Where's my x axis?

400
00:19:30,900 --> 00:19:32,200
I don't even remember what it's called.

401
00:19:32,200 --> 00:19:35,400
It's been so long since we've looked at this x axis.

402
00:19:35,500 --> 00:19:37,100
Okay, so we've got x axis.

403
00:19:37,500 --> 00:19:38,500
Where is my x-axis.

404
00:19:38,500 --> 00:19:39,000
There it is.

405
00:19:39,200 --> 00:19:40,300
We've got x axis.

406
00:19:40,500 --> 00:19:44,600
We've got normal, y times, y, axis, and remember on the Blackboard.

407
00:19:44,600 --> 00:19:46,300
So we've got those two terms.

408
00:19:46,300 --> 00:19:50,100
We need length of Y over X length of X and length of X, over length of

409
00:19:50,100 --> 00:19:51,100
Y, right?

410
00:19:51,600 --> 00:19:54,400
So basically what we need, I don't know what we should call this.

411
00:19:54,400 --> 00:19:57,300
We basically, this is our, this is our n x coefficient will just call

412
00:19:57,300 --> 00:19:59,800
it right and

413
00:20:00,000 --> 00:20:03,700
Then we've also got our rny coefficient like so.

414
00:20:04,600 --> 00:20:07,800
And what I want to do is now I want to compute these guys, right.

415
00:20:07,800 --> 00:20:11,300
So I've got this, I want to compute the length of the x axis

416
00:20:12,600 --> 00:20:15,000
and the length of the y-axis, right?

417
00:20:15,800 --> 00:20:17,600
And let's make sure we've got these right.

418
00:20:17,700 --> 00:20:21,800
So we've got length of Y axis over length of x axis for that for the,

419
00:20:22,100 --> 00:20:23,900
for the, for the X term, right?

420
00:20:24,200 --> 00:20:28,100
And then for that y term, I just want it flipped, okay?

421
00:20:28,600 --> 00:20:30,200
And now, these are not going to change.

422
00:20:30,200 --> 00:20:31,900
We don't need to compute these per pixel.

423
00:20:31,900 --> 00:20:33,700
They're just coefficients, right?

424
00:20:34,500 --> 00:20:38,300
So what we could do is also just bake those into the, to the axes

425
00:20:38,300 --> 00:20:39,800
themselves, right?

426
00:20:40,000 --> 00:20:40,500
Does that?

427
00:20:40,600 --> 00:20:41,400
You see how that would work?

428
00:20:41,400 --> 00:20:42,200
Because what we could do,

429
00:20:42,300 --> 00:20:46,300
Do is just say, you know what, let's just go ahead and make a normal

430
00:20:46,300 --> 00:20:52,100
x-axis and a normal y-axis, which are just these terms baked baked

431
00:20:52,100 --> 00:20:55,000
into the axis that they are affecting, right?

432
00:20:55,300 --> 00:20:55,900
Like so.

433
00:20:57,800 --> 00:20:59,900
And then this just becomes a single X.

434
00:21:01,000 --> 00:21:02,100
By this actually.

435
00:21:02,100 --> 00:21:03,500
So it's the exact same transform.

436
00:21:03,500 --> 00:21:06,800
It's just using slightly different axes, okay.

437
00:21:07,200 --> 00:21:10,300
And so I'm going to go ahead and put that up at the top since.

438
00:21:10,300 --> 00:21:14,900
Like I said, doesn't really need to be and you can see that these are

439
00:21:14,900 --> 00:21:17,000
all common terms to the length and all that stuff.

440
00:21:19,100 --> 00:21:21,700
All things we can factor out for Speed later and stuff like that.

441
00:21:25,600 --> 00:21:27,300
Oh, that's a V4 though.

442
00:21:30,100 --> 00:21:31,200
Oh, and lovely.

443
00:21:31,300 --> 00:21:33,000
So much like yesterday.

444
00:21:33,500 --> 00:21:37,700
My keyboard is now again, having trouble processing fee, the up and

445
00:21:37,700 --> 00:21:37,900
back.

446
00:21:37,900 --> 00:21:38,200
He's okay.

447
00:21:38,200 --> 00:21:39,100
There it go, re-registered.

448
00:21:39,200 --> 00:21:41,300
I'm gonna send this stuff keyboard back.

449
00:21:41,800 --> 00:21:43,200
It's giving me so much trouble.

450
00:21:43,200 --> 00:21:45,200
I'm very disappointed in it.

451
00:21:45,500 --> 00:21:45,800
All right.

452
00:21:45,800 --> 00:21:50,400
Anyway, hopefully it'll last for the rest of the stream if not.

453
00:21:50,400 --> 00:21:52,900
I may have to take a break and switch out to the o to the other

454
00:21:52,900 --> 00:21:53,500
keyboard.

455
00:21:54,100 --> 00:21:58,800
So R V4 is right now don't actually have the ability to assign

456
00:21:59,000 --> 00:22:01,900
Just to, you know, X Y, or y, z, or those guys.

457
00:22:01,900 --> 00:22:07,000
So we really would probably want to go ahead and stick that in here,

458
00:22:07,300 --> 00:22:07,800
right?

459
00:22:08,900 --> 00:22:18,400
That would basically be be this ignored 3 2014 that y z.

460
00:22:18,400 --> 00:22:23,500
And then I guess we've got one more which is this sort of thing for

461
00:22:23,500 --> 00:22:24,200
5zw.

462
00:22:25,400 --> 00:22:27,300
That's right, that look right.

463
00:22:29,800 --> 00:22:32,900
I think so let's give it a shot.

464
00:22:34,000 --> 00:22:37,900
not actually sure I should probably verify that well,

465
00:22:40,400 --> 00:22:42,900
That doesn't quite look like what we wanted.

466
00:22:43,400 --> 00:22:45,300
So, hold on one second.

467
00:22:45,300 --> 00:22:48,400
Let's, let's take a quick look there at what we did wrong.

468
00:22:50,600 --> 00:22:51,700
Ah, well.

469
00:22:51,700 --> 00:22:56,100
So we do have one other problem, which is that are normalized.

470
00:22:57,100 --> 00:23:00,100
This will actually affect the size of everything.

471
00:23:00,100 --> 00:23:03,300
It won't affect the Z sized properly, right?

472
00:23:03,300 --> 00:23:08,400
If we only were, we really, we have this problem of, we can't just

473
00:23:08,400 --> 00:23:12,000
normalize afterwards because since we have affected this, the X&Y

474
00:23:12,000 --> 00:23:17,400
sizes, but not actually touched the Z size with however, much the Z

475
00:23:17,400 --> 00:23:21,800
should be, scaled that creates, you know, a dis symmetry there.

476
00:23:21,800 --> 00:23:26,900
Basically, you know, we need to do normal z x equals something.

477
00:23:27,200 --> 00:23:31,200
You compensate for whatever the size changes are here.

478
00:23:31,700 --> 00:23:33,500
So that it scales up properly.

479
00:23:33,700 --> 00:23:38,900
Now I'm not sure what we actually want to put there.

480
00:23:39,400 --> 00:23:44,500
It's sort of like we would want the user to probably specify how they

481
00:23:44,500 --> 00:23:50,800
want that to be handled but you could imagine just doing it as, you

482
00:23:50,800 --> 00:23:53,500
know, like like an average of the two or something like this, right?

483
00:23:53,500 --> 00:23:55,100
So if we did something like

484
00:23:58,000 --> 00:23:59,400
X axis blank.

485
00:24:00,100 --> 00:24:02,800
Y axis length.

486
00:24:03,900 --> 00:24:04,400
so,

487
00:24:06,800 --> 00:24:11,700
Yeah, X is length x axis.

488
00:24:11,700 --> 00:24:16,000
Length length acts like

489
00:24:18,900 --> 00:24:22,700
And then our Z scale, or I guess I should probably say NZ scale.

490
00:24:22,800 --> 00:24:26,600
Maybe I should make those more like that are rnz scale would just be,

491
00:24:27,000 --> 00:24:30,200
you know, the average of those two, let's say x axis, like this, Y,

492
00:24:30,200 --> 00:24:33,500
axis length, and we'll talk about that in the Blackboard in a second

493
00:24:33,500 --> 00:24:35,500
here, and Z scale.

494
00:24:35,700 --> 00:24:39,900
Oh, and I forgot to actually use or n YN x axis.

495
00:24:40,000 --> 00:24:40,600
There we go.

496
00:24:42,100 --> 00:24:49,500
Okay, so now in theory, we are accounting for that rotation, actually

497
00:24:49,500 --> 00:24:50,300
correctly.

498
00:24:50,300 --> 00:24:56,300
And I guess it's kind of a little bit hard to even know if we are or

499
00:24:56,300 --> 00:24:56,500
not.

500
00:24:56,500 --> 00:25:01,800
That's one of the, the tough Parts about these, I suppose, but it now,

501
00:25:01,800 --> 00:25:02,900
at least you can see that.

502
00:25:02,900 --> 00:25:05,900
When it rotates the sideways, it fades out, which is what should

503
00:25:05,900 --> 00:25:06,200
happen.

504
00:25:06,200 --> 00:25:10,900
Because as it rotates to sideways, it is, it is pointing off into that

505
00:25:10,900 --> 00:25:11,500
map that we have.

506
00:25:11,500 --> 00:25:12,000
We don't

507
00:25:12,100 --> 00:25:15,100
Actually use yet, the sort of the around it map kind of a thing.

508
00:25:16,200 --> 00:25:22,900
And so, you know, you can also see that red is on top and stays on

509
00:25:22,900 --> 00:25:24,000
top, right?

510
00:25:24,000 --> 00:25:25,200
Which is correct.

511
00:25:25,300 --> 00:25:29,200
Whereas, before red was actually moving whether it was on top and

512
00:25:29,200 --> 00:25:29,700
bottom.

513
00:25:30,400 --> 00:25:33,300
So we're, at least handling them, not only correctly now.

514
00:25:35,800 --> 00:25:41,400
Right, we can actually see that that's you know, that that's that's

515
00:25:41,500 --> 00:25:45,500
doing a more correct thing than what we were doing, so that's good.

516
00:25:45,700 --> 00:25:46,200
Okay.

517
00:25:47,400 --> 00:25:54,300
So we still I believe even though we've taken a brief aside to handle

518
00:25:54,600 --> 00:25:59,100
normals there, well let me explain the Z's, the NZ scale part first.

519
00:26:01,800 --> 00:26:07,000
So what happens once we do our our transform, right?

520
00:26:07,300 --> 00:26:08,800
Is we have a normal

521
00:26:11,800 --> 00:26:14,100
and after we do our transform, right?

522
00:26:14,300 --> 00:26:15,500
It may look like this.

523
00:26:15,500 --> 00:26:16,200
In fact, that's this.

524
00:26:16,200 --> 00:26:16,700
Is what's happening?

525
00:26:16,700 --> 00:26:20,200
Think we have a very scaled up the thing happening right now, right.

526
00:26:20,700 --> 00:26:22,900
Our normal becomes much larger than it should be.

527
00:26:22,900 --> 00:26:28,700
So if this normal is, you know, if this is length 1, this is actually

528
00:26:28,700 --> 00:26:30,200
going to be like something else, right?

529
00:26:30,200 --> 00:26:32,700
This is going to be length, you know, equals 100 or whatever.

530
00:26:32,700 --> 00:26:33,100
Who knows?

531
00:26:33,100 --> 00:26:34,300
How big it got?

532
00:26:34,400 --> 00:26:35,400
You know, scaled up.

533
00:26:36,100 --> 00:26:40,800
So if we just use those directly, right then we end up in a situation.

534
00:26:41,300 --> 00:26:44,400
Where we would have normals, that are much too large, they aren't

535
00:26:44,400 --> 00:26:46,900
actually normal length and so the math that we worked out with them

536
00:26:46,900 --> 00:26:49,600
assuming they were normal length wouldn't work, right?

537
00:26:49,900 --> 00:26:52,100
So we want to ensure that their normal length which is why we're

538
00:26:52,100 --> 00:26:55,400
calling normalized which means we're taking the normal or making a new

539
00:26:55,400 --> 00:26:58,000
normal out of it which is whatever the old normal was divided by its

540
00:26:58,000 --> 00:26:58,400
length.

541
00:26:58,600 --> 00:26:59,900
So now we know that its length

542
00:27:00,000 --> 00:27:01,100
One, right?

543
00:27:01,800 --> 00:27:05,500
The problem is when we were doing, when we do the normal transform,

544
00:27:05,500 --> 00:27:09,600
we're only actually transforming the the X&Y, right?

545
00:27:09,600 --> 00:27:13,100
We're only transforming the X, Y Vector, the Z Vector, is it.

546
00:27:13,200 --> 00:27:15,400
So the nxy, right?

547
00:27:16,000 --> 00:27:20,000
It's length is might be large, it may have gotten to be a hundred long

548
00:27:20,000 --> 00:27:24,800
in the XY address but it's Z is still somewhere in the range of 0 to 1

549
00:27:24,800 --> 00:27:27,000
it never got scaled up right?

550
00:27:27,300 --> 00:27:29,800
And this is what this would basically be equivalent of is

551
00:27:30,000 --> 00:27:33,600
if you imagine what happens in 3D you could think about what we were

552
00:27:33,600 --> 00:27:34,800
actually doing in 3D.

553
00:27:35,100 --> 00:27:38,200
If you think about what's happening in 3D, here's my x axis here is my

554
00:27:38,200 --> 00:27:38,700
y-axis.

555
00:27:38,700 --> 00:27:40,200
Here is my Z axis, right?

556
00:27:40,800 --> 00:27:44,300
Effectively, what we were doing, is scaling up, the Y, and X to

557
00:27:44,300 --> 00:27:46,500
whatever they need to be and Z stays the same.

558
00:27:46,600 --> 00:27:49,800
It's as if we would make something that's very wide and tall but

559
00:27:49,800 --> 00:27:51,500
almost no depth, right?

560
00:27:51,700 --> 00:27:55,400
And so, when we would normalize, we would basically lose that that

561
00:27:55,400 --> 00:27:59,500
normalization would normalize a giant huge Vector in x y, and a little

562
00:27:59,500 --> 00:27:59,800
tiny.

563
00:28:00,000 --> 00:28:00,900
Movement in Z.

564
00:28:01,100 --> 00:28:03,700
When that normalizes, it's going to turn out to be something, that's

565
00:28:03,700 --> 00:28:07,000
almost entirely dominated by its X and Y components.

566
00:28:07,500 --> 00:28:10,200
And so to compensate for that, we want to at least pretend that we're

567
00:28:10,200 --> 00:28:12,300
scaling up this object in 3D.

568
00:28:12,300 --> 00:28:16,900
So if the normals which are themselves of 3D and coding get respected

569
00:28:16,900 --> 00:28:20,800
properly and that's why I was saying we want to scale up the Z by some

570
00:28:20,800 --> 00:28:24,500
notion of the scale that we're using in X and Y and really we could

571
00:28:24,500 --> 00:28:28,600
allow the user to specify that like when the user is saying, I want to

572
00:28:28,600 --> 00:28:29,800
elongate something

573
00:28:30,700 --> 00:28:33,600
You know, in various ways, they could also tell us how much they want

574
00:28:33,600 --> 00:28:36,900
to elongate it along the other axis so that we would know what the

575
00:28:36,900 --> 00:28:38,500
normal should do, right?

576
00:28:38,600 --> 00:28:40,700
And you can imagine that being a real thing, right?

577
00:28:40,700 --> 00:28:44,700
If you, if you think about us having say a cylinder in coded, in those

578
00:28:44,700 --> 00:28:46,300
normals, like, we were doing, right?

579
00:28:46,300 --> 00:28:49,700
So it's kind of like this sort of a thing, right?

580
00:28:50,200 --> 00:28:54,800
And so if you want to think about it, it's like it's it's a view from

581
00:28:54,800 --> 00:28:57,100
from here of a cylinder, right?

582
00:28:59,000 --> 00:29:03,100
It's how much you want to elongate it this way, right?

583
00:29:03,200 --> 00:29:04,500
That's what that Z scale is.

584
00:29:04,700 --> 00:29:06,500
How much did you want to do that elongation?

585
00:29:06,700 --> 00:29:12,700
And so, a uniform scale would be where the length of the x-axis equals

586
00:29:12,700 --> 00:29:16,400
the length of the y axis, equals R Z scale, right?

587
00:29:16,400 --> 00:29:19,400
And you'll note, that's exactly what I did, right?

588
00:29:20,400 --> 00:29:23,500
Hey, big surprise, my Das Keyboard is dying.

589
00:29:24,700 --> 00:29:27,600
Hold please for one second while I replace the keyboard.

590
00:29:59,000 --> 00:29:59,600
All right.

591
00:30:01,000 --> 00:30:04,100
Back back in business, with an old-school keyboard.

592
00:30:04,200 --> 00:30:06,900
A keyboard that's many, many, more years old than the dust keyboard,

593
00:30:06,900 --> 00:30:09,200
but it is actually working.

594
00:30:12,200 --> 00:30:15,400
So as you can see, what I did is I actually set the NZ scale exactly.

595
00:30:15,400 --> 00:30:15,800
That way.

596
00:30:15,800 --> 00:30:19,500
If the x axis and the y axis were both the same length and the NZ.

597
00:30:19,900 --> 00:30:23,700
The the Z scale will be exactly what that is if they were different,

598
00:30:23,700 --> 00:30:26,900
it'll just pick like an in-between and pretend well it's scaled up on

599
00:30:26,900 --> 00:30:27,400
Z.

600
00:30:28,000 --> 00:30:30,500
The average of how much it scaled up on X and Y.

601
00:30:30,700 --> 00:30:31,300
Right?

602
00:30:31,800 --> 00:30:35,000
But like I said if we turns out for some reason we want to be doing

603
00:30:35,000 --> 00:30:37,800
something a little more careful there with whatever we're animating

604
00:30:37,800 --> 00:30:41,700
stuff, when we actually have stuff in the game that we want to

605
00:30:41,700 --> 00:30:45,700
fine-tune then we could decide to make this a parameter, right?

606
00:30:45,800 --> 00:30:51,000
And so I could even say no and Z scale could be a parameter.

607
00:30:51,900 --> 00:31:00,400
If we want people to have control over the amount of scaling in the

608
00:31:02,000 --> 00:31:09,000
In the Z direction that the normals appear to, right?

609
00:31:10,600 --> 00:31:15,500
So I think that's just about it for the normal transform stuff.

610
00:31:15,500 --> 00:31:18,600
What we really need to do now is go back and I believe we never.

611
00:31:18,800 --> 00:31:22,300
We kind of got sidetracked on this because we made a rotating thing.

612
00:31:23,600 --> 00:31:25,300
We never quite finished.

613
00:31:25,300 --> 00:31:29,400
Making sure that we're actually sampling from our other Maps correctly

614
00:31:29,800 --> 00:31:30,500
because I thought our

615
00:31:30,700 --> 00:31:33,200
Fear was still a little busted and stuff.

616
00:31:33,700 --> 00:31:36,300
So I want to kind of go take a look at that.

617
00:31:38,000 --> 00:31:42,000
And try to make sure that that's working correctly before we go and do

618
00:31:42,000 --> 00:31:45,400
a coordinate system, sweep on the code base, basically, which I think

619
00:31:45,400 --> 00:31:46,600
was our next thing to do.

620
00:31:47,900 --> 00:31:56,900
So if I go to make sphere normal map, I believe, what I can do here is

621
00:31:56,900 --> 00:31:59,800
get rid of this and we can get back to a sphere.

622
00:32:00,200 --> 00:32:05,500
If I'm not very much in error, let's find out if that's the case,

623
00:32:06,700 --> 00:32:07,500
there we go.

624
00:32:08,400 --> 00:32:10,000
So there is our sphere.

625
00:32:12,000 --> 00:32:13,400
and,

626
00:32:18,100 --> 00:32:19,300
Yeah.

627
00:32:23,500 --> 00:32:26,100
So, there's a couple things that are interesting about our sphere,

628
00:32:26,100 --> 00:32:26,600
right?

629
00:32:27,200 --> 00:32:31,700
Like, you can see we've got sparkly reflection things happening, kind

630
00:32:31,700 --> 00:32:34,900
of at the borders of, it would be nice to figure out what was going on

631
00:32:34,900 --> 00:32:35,500
there.

632
00:32:37,100 --> 00:32:43,000
We also have, you know, a question about whether we're actually you

633
00:32:43,000 --> 00:32:47,600
know, is that the right reflection pattern and I'm not certain about

634
00:32:47,600 --> 00:32:52,100
either of those two things, it's a, it's a little hard to say, but I

635
00:32:52,100 --> 00:32:53,100
would think

636
00:32:53,200 --> 00:32:53,500
Think.

637
00:32:53,700 --> 00:32:57,200
I mean I'm just trying to imagine this is where you kind of want to

638
00:32:57,200 --> 00:32:59,800
reference renderer to kind of go like a lot of

639
00:33:00,000 --> 00:33:02,700
And if I'm doing like this, all actually have written a ray Tracer or

640
00:33:02,700 --> 00:33:05,900
something that does exact computations of stuff.

641
00:33:05,900 --> 00:33:09,200
And so I can see like, all right, if this is where we were at.

642
00:33:09,700 --> 00:33:13,100
So if we take a look at this though, I would have expected.

643
00:33:13,300 --> 00:33:16,800
Actually I feel like I would have expected it to be bowed the other

644
00:33:16,800 --> 00:33:17,600
way, right.

645
00:33:17,600 --> 00:33:18,400
I would have expected.

646
00:33:18,400 --> 00:33:21,400
It probably to be bowed that way, not this way.

647
00:33:22,200 --> 00:33:25,800
And so that's why I say I think we want to just take a look at that

648
00:33:26,300 --> 00:33:28,400
and see if we can get a little bit more.

649
00:33:29,800 --> 00:33:32,400
Of a, you know, of a clear idea and make sure everything's okay.

650
00:33:32,700 --> 00:33:37,200
And also our sparklies I'm a little worried that like some of that is

651
00:33:37,200 --> 00:33:40,900
like us degenerating as we get, because those are where that's

652
00:33:40,900 --> 00:33:46,100
happening, is right at the edge where the the reflection is almost a

653
00:33:46,100 --> 00:33:46,700
bleak.

654
00:33:47,000 --> 00:33:52,000
And so I want to make sure that that we're not having some numerical

655
00:33:52,000 --> 00:33:52,700
weirdness there.

656
00:33:52,700 --> 00:33:55,800
Like, you know, divide by zero or who knows what's going on or getting

657
00:33:55,800 --> 00:33:58,600
really funky results back

658
00:33:59,400 --> 00:34:02,900
You know, over there, I feel like that warrant some attention as well.

659
00:34:03,700 --> 00:34:06,200
So I feel like there's plenty of things to look at in here.

660
00:34:06,600 --> 00:34:08,699
The good news is this.

661
00:34:08,800 --> 00:34:12,100
As you can see, our normal rotation stuff seems to be working quite

662
00:34:12,100 --> 00:34:16,199
well, because our sphere is like completely stable as this thing spins

663
00:34:16,199 --> 00:34:18,300
around, which is pretty awesome, right?

664
00:34:18,400 --> 00:34:20,900
Like, if you think about what's going on there, all of the normals are

665
00:34:20,900 --> 00:34:24,199
actually getting translated a transformed in order to make sure that

666
00:34:24,199 --> 00:34:29,000
the sphere is still reflecting as if it was, you know, had never been

667
00:34:29,300 --> 00:34:32,000
dated because no matter how much we rotate the sphere, it should never

668
00:34:32,000 --> 00:34:33,300
change how its reflecting, right?

669
00:34:33,300 --> 00:34:36,800
Because it's a sphere and so that's pretty cool that that's working,

670
00:34:37,000 --> 00:34:37,400
right?

671
00:34:44,500 --> 00:34:46,699
All right, so let's take a look here.

672
00:34:48,500 --> 00:34:52,100
We've got about a half hour, so we've got plenty of time to dive in

673
00:34:52,100 --> 00:34:56,100
here and see if we can and figure out exactly what's happening with

674
00:34:56,100 --> 00:34:57,600
all of our normals.

675
00:34:57,700 --> 00:35:02,300
So, let me go ahead and take a look at our render group.

676
00:35:03,900 --> 00:35:04,700
Let's see.

677
00:35:05,000 --> 00:35:07,500
Actually think I'm wanted on the other side.

678
00:35:07,800 --> 00:35:08,200
Here we go.

679
00:35:09,100 --> 00:35:12,100
So let's see.

680
00:35:12,100 --> 00:35:15,600
Let's start with our sample environment map code.

681
00:35:15,600 --> 00:35:19,900
Just so we kind of maybe like document this a little bit and just make

682
00:35:19,900 --> 00:35:22,000
sure that we know what we're talking about here.

683
00:35:22,000 --> 00:35:26,900
So when we go to sample environment map, the screen space UV.

684
00:35:26,900 --> 00:35:32,000
Basically gives us where, you know, in fact I might just put this here

685
00:35:32,000 --> 00:35:38,900
screen space, UV tells us where the ray is being cast from

686
00:35:40,900 --> 00:35:42,800
In normalized.

687
00:35:45,600 --> 00:35:48,300
Screen coordinates, right?

688
00:35:50,800 --> 00:35:55,300
So that's where we're at sample direction, right?

689
00:35:56,200 --> 00:35:58,400
And in fact, I guess maybe what I'll do is I'll just open a long

690
00:35:58,400 --> 00:35:59,000
comment here.

691
00:36:05,500 --> 00:36:06,000
Okay.

692
00:36:06,900 --> 00:36:12,200
Sample Direction tells us what direction the cast is going.

693
00:36:13,600 --> 00:36:16,200
And it is supposed to be normalized.

694
00:36:17,400 --> 00:36:22,300
It is expected to be normalized, right?

695
00:36:23,100 --> 00:36:26,300
So if I verify that, let's make sure that's true.

696
00:36:26,600 --> 00:36:27,700
I don't actually know if that's true.

697
00:36:27,800 --> 00:36:30,400
Maybe it's not expected to be normalized now that I think about it, I

698
00:36:30,400 --> 00:36:32,200
don't know that it actually has to be normalized.

699
00:36:36,200 --> 00:36:38,000
So, bounce Direction.

700
00:36:41,400 --> 00:36:41,700
Yeah.

701
00:36:41,700 --> 00:36:48,200
So it's not actually necessarily normalized.

702
00:36:48,200 --> 00:36:49,500
Well.

703
00:36:50,900 --> 00:36:52,100
I guess, actually.

704
00:36:52,100 --> 00:36:55,300
Yeah, I guess it technically would always be normalized, still,

705
00:36:55,300 --> 00:36:56,000
probably.

706
00:36:56,400 --> 00:36:57,900
But do we expect it to be?

707
00:36:58,300 --> 00:37:08,000
Do we care if it is, let's see, sample direction, we don't care.

708
00:37:08,100 --> 00:37:09,000
So never mind.

709
00:37:10,700 --> 00:37:16,000
So really, it does not have to be normalized because we're dividing by

710
00:37:16,000 --> 00:37:16,900
the why here?

711
00:37:16,900 --> 00:37:17,900
So it doesn't matter.

712
00:37:17,900 --> 00:37:20,800
We're just finding out how far we have to go in terms of that

713
00:37:21,200 --> 00:37:24,500
direction in that direction could be any length, really?

714
00:37:25,200 --> 00:37:27,900
Because we're it's all going to be proportional in there, so that's

715
00:37:27,900 --> 00:37:28,200
fine.

716
00:37:30,200 --> 00:37:32,900
All right, so it does not have to be normalized.

717
00:37:34,100 --> 00:37:39,600
Roughness says which Maps which

718
00:37:39,800 --> 00:37:45,200
Odie's of the environment map of of map, we sample from.

719
00:37:45,800 --> 00:37:48,200
And right now we're only supporting really the first one.

720
00:37:48,200 --> 00:37:52,100
I mean, it actually does pick one but we have initialized the other

721
00:37:52,100 --> 00:37:54,300
LOD, so the map yet, so that doesn't do anything.

722
00:37:55,200 --> 00:37:56,800
All right, so that all makes sense.

723
00:37:57,200 --> 00:37:58,800
So, the first thing we do, right?

724
00:37:58,800 --> 00:38:00,700
Is here we go here.

725
00:38:00,700 --> 00:38:08,500
We pick which LOD to sample from based on the roughness.

726
00:38:09,000 --> 00:38:09,600
So, we do that.

727
00:38:09,700 --> 00:38:16,800
That then we compute the distance to the map.

728
00:38:20,400 --> 00:38:25,100
And it looks like we always expect why to be positive.

729
00:38:25,300 --> 00:38:25,800
Right?

730
00:38:26,700 --> 00:38:31,100
But why, but it's why must be positive

731
00:38:33,400 --> 00:38:37,300
So it expects to always be looking in that same direction, right?

732
00:38:41,500 --> 00:38:45,800
And I, guess what we could do instead of that, you know, we wouldn't

733
00:38:45,800 --> 00:38:48,100
have to actually do that.

734
00:38:48,200 --> 00:38:52,500
If we had distance from map in Z actually be

735
00:38:55,400 --> 00:38:58,200
if we had distance from a pansy, be a parameter passed in because then

736
00:38:58,200 --> 00:38:59,600
the people would just pass in

737
00:39:00,000 --> 00:39:04,200
Have one or something so that must that actually seems a little bit

738
00:39:04,200 --> 00:39:05,700
better to me, right?

739
00:39:05,700 --> 00:39:09,500
So instead of doing that maybe we do a thing that's like distance from

740
00:39:09,500 --> 00:39:13,100
map in Z, right actually gets passed in

741
00:39:14,200 --> 00:39:18,300
And then we don't have this restriction anymore because it's just

742
00:39:18,300 --> 00:39:23,400
assumed that you put the map out where in whichever direction the, the

743
00:39:23,400 --> 00:39:27,700
sample would that the normal was actually pointing, right?

744
00:39:28,100 --> 00:39:30,000
So that seems pretty reasonable to me.

745
00:39:30,800 --> 00:39:38,000
And so what we would do for that is we just say, real 32 distance from

746
00:39:38,000 --> 00:39:43,700
map in Z and this is kind of a weird, I guess we

747
00:39:43,900 --> 00:39:48,500
Want to see in y, actually, might be a better way to say that,

748
00:39:48,800 --> 00:39:51,600
because, why is really the thing that we're using for that?

749
00:39:52,600 --> 00:39:55,500
So it's a little but the distance,

750
00:39:58,500 --> 00:40:00,800
That's just the encoding of the normal.

751
00:40:07,300 --> 00:40:08,800
Let's think about this for a second.

752
00:40:11,600 --> 00:40:13,000
We need to think about this for a second.

753
00:40:22,000 --> 00:40:22,500
Yet.

754
00:40:22,500 --> 00:40:27,600
So this is just a really odd thing about this and I guess we're not

755
00:40:27,600 --> 00:40:30,000
doing it wrong, but it's just very strange, right?

756
00:40:30,400 --> 00:40:34,100
This is part of the problem of the fact that the games pretty much

757
00:40:34,100 --> 00:40:36,700
most almost all 2D games including RS, right?

758
00:40:37,000 --> 00:40:40,400
Is the ground, right?

759
00:40:40,400 --> 00:40:41,500
Is flat on.

760
00:40:41,700 --> 00:40:45,300
So like if you were to have stuff on the ground, right, it looks like

761
00:40:45,300 --> 00:40:49,000
actually you're looking top down on it but stuff that's in.

762
00:40:49,000 --> 00:40:51,000
It is is not that way.

763
00:40:51,200 --> 00:40:51,800
Right.

764
00:40:52,400 --> 00:40:56,800
So if you were to light these things, it's kind of this fake

765
00:40:56,800 --> 00:40:57,500
transform.

766
00:40:57,500 --> 00:40:58,400
That happens here.

767
00:40:58,400 --> 00:41:03,400
We're like even though you're pointing off in this direction which

768
00:41:03,400 --> 00:41:06,100
should mean that you're looking at the stuff that's like off the

769
00:41:06,100 --> 00:41:07,200
screen to the top.

770
00:41:07,400 --> 00:41:11,600
What you're actually lighting with is stuff, that's above this thing

771
00:41:11,700 --> 00:41:15,600
here like on a, let on the Z level above it, right?

772
00:41:15,700 --> 00:41:16,300
It's like

773
00:41:17,800 --> 00:41:22,100
If you imagine this case here, even though the normal is pointing that

774
00:41:22,100 --> 00:41:25,200
way, we're actually lighting it with the stuff that comes from here.

775
00:41:26,500 --> 00:41:30,600
And this is just again, like I said, light certain things in 2D games

776
00:41:30,600 --> 00:41:35,300
are just really annoying to do because there is no the way that we've

777
00:41:35,300 --> 00:41:39,600
built the grammar of how the art is drawn is so unlike anything that

778
00:41:39,600 --> 00:41:42,600
could ever happen in the real world, you end up having to do kind of

779
00:41:42,600 --> 00:41:46,200
these weird gyrations in the code to be like wait a minute but there's

780
00:41:46,200 --> 00:41:46,800
really no other.

781
00:41:46,900 --> 00:41:49,100
I mean that's just how you have to do it.

782
00:41:49,100 --> 00:41:53,300
You you don't have the luxury of using the correct math, right?

783
00:41:55,100 --> 00:41:55,900
So really all we're

784
00:41:56,000 --> 00:41:58,800
flipping is that distance from a pansy and that also means that our

785
00:41:58,800 --> 00:41:59,800
ground map and our sky.

786
00:42:00,000 --> 00:42:02,700
Can be different distances which is why I did that.

787
00:42:02,900 --> 00:42:07,700
Because now we actually have essentially you know, that sort of

788
00:42:11,400 --> 00:42:16,100
We've got a way to move them separate so that they don't both have to

789
00:42:16,100 --> 00:42:17,800
move the same amount, right?

790
00:42:17,800 --> 00:42:19,200
And I think that might be useful.

791
00:42:19,700 --> 00:42:20,500
So there we go.

792
00:42:20,900 --> 00:42:25,700
There's our distance from map in Z and that should leave us exactly

793
00:42:25,700 --> 00:42:26,700
where we were right.

794
00:42:26,700 --> 00:42:27,500
Pretty much.

795
00:42:27,600 --> 00:42:27,900
Yeah.

796
00:42:28,100 --> 00:42:31,500
So because I mean that should compute the exact same results and does.

797
00:42:32,400 --> 00:42:35,800
So, let's go ahead and keep taking a look at at this function over

798
00:42:35,800 --> 00:42:37,500
here and continue to verify it.

799
00:42:38,100 --> 00:42:41,000
So we compute the distance to the map here by doing

800
00:42:41,200 --> 00:42:42,200
This right?

801
00:42:42,700 --> 00:42:44,100
You've he's per meter.

802
00:42:44,200 --> 00:42:46,600
I guess we're doing two things here, right?

803
00:42:46,800 --> 00:42:48,500
We're both Computing.

804
00:42:48,500 --> 00:42:53,200
The distance to the map and we are sort of scaling up the map.

805
00:42:55,900 --> 00:42:59,100
We're we're not only Computing, the distance.

806
00:42:59,200 --> 00:43:04,500
We're also sort of scaling up the the units into UVS because that's

807
00:43:04,500 --> 00:43:06,000
what we actually want.

808
00:43:06,700 --> 00:43:07,100
Oops.

809
00:43:07,300 --> 00:43:10,500
That's what we actually want to compute here at the end.

810
00:43:10,800 --> 00:43:11,000
So

811
00:43:11,100 --> 00:43:14,200
We've rolled those two things in their compute, the distance to the

812
00:43:14,200 --> 00:43:19,300
map and the scaling factor for M to you've.

813
00:43:19,300 --> 00:43:20,900
He's right.

814
00:43:24,500 --> 00:43:30,500
And then we find the intersection point.

815
00:43:31,700 --> 00:43:38,500
Like so we clamp to the valid range.

816
00:43:40,600 --> 00:43:44,100
And then bilinear sample.

817
00:43:45,700 --> 00:43:46,300
Right.

818
00:43:46,500 --> 00:43:49,400
And we're just using the UVS.

819
00:43:49,600 --> 00:43:55,400
Yeah, so I don't see this seems like a pretty simple function.

820
00:43:55,400 --> 00:43:58,400
I don't see anything particularly troubling here.

821
00:43:58,500 --> 00:44:03,800
I don't know if anyone else does, but it looks pretty clean, right?

822
00:44:04,400 --> 00:44:06,900
It looks pretty clean.

823
00:44:08,700 --> 00:44:11,400
And so I guess the other question is, is this correct?

824
00:44:11,500 --> 00:44:14,900
So we have the sample Direction, X, right.

825
00:44:17,200 --> 00:44:23,100
That's pretty uncontroversial because, you know, as as we're sampling

826
00:44:23,100 --> 00:44:30,400
we're going to move in X that much and I guess sample Direction Z is

827
00:44:30,400 --> 00:44:33,700
one that we don't really know whether that should Flip or not.

828
00:44:33,900 --> 00:44:37,300
Because we kind of like this to do says that one's a little iffy

829
00:44:37,300 --> 00:44:40,800
because we need to go through and decide exactly how all of our

830
00:44:40,800 --> 00:44:42,300
coordinate systems are going to go.

831
00:44:42,700 --> 00:44:44,000
But in general,

832
00:44:45,900 --> 00:44:49,800
I think we pretty much are saying that we're going to use bottom up as

833
00:44:49,800 --> 00:44:54,900
our sort of you know, I want to say namik later but our bottom-up is

834
00:44:54,900 --> 00:44:59,800
our scheme which would mean that the Z as the

835
00:45:00,000 --> 00:45:00,500
Of.

836
00:45:02,500 --> 00:45:04,500
Moves in and out, right?

837
00:45:05,300 --> 00:45:09,100
What we would want to do is presumably that would flatten out sort of

838
00:45:09,100 --> 00:45:09,600
this way.

839
00:45:09,600 --> 00:45:11,400
Let me see if we can draw that out.

840
00:45:11,400 --> 00:45:15,300
So we could figure out which direction that should be sampling in the

841
00:45:15,300 --> 00:45:15,900
map.

842
00:45:16,000 --> 00:45:16,400
Right?

843
00:45:17,600 --> 00:45:23,200
So if we have, let's say our our sphere here, right?

844
00:45:23,500 --> 00:45:27,600
So if we have something that's, that's sort of on this side of the, of

845
00:45:27,600 --> 00:45:31,000
the sphere, versus this side of the sphere, right?

846
00:45:31,100 --> 00:45:32,000
So, it's X is are going.

847
00:45:32,200 --> 00:45:32,600
Way.

848
00:45:33,000 --> 00:45:35,000
It's these are both going out.

849
00:45:35,100 --> 00:45:40,600
I guess, when you reflect off of these, I guess you'd have to get

850
00:45:40,600 --> 00:45:46,900
somewhere fairly steep before the Z is actually going in the other

851
00:45:46,900 --> 00:45:48,200
direction, though, right?

852
00:45:48,200 --> 00:45:52,800
Like, if I have trying to think of when you'd actually, but how steep

853
00:45:52,800 --> 00:45:54,100
you'd have to be before?

854
00:45:54,100 --> 00:45:57,800
The reflected Vector is actually pointing backwards, I guess.

855
00:45:57,800 --> 00:45:59,400
You'd have to be past 45.

856
00:45:59,500 --> 00:46:02,000
So essentially, when you flip 45,

857
00:46:02,200 --> 00:46:05,200
I've here, you know, here, somewhere, right about here.

858
00:46:05,200 --> 00:46:09,600
Let's say this is still reflecting such that the reflection Vector,

859
00:46:09,700 --> 00:46:13,900
the sampling Direction, Vector is going to be having a positive Z

860
00:46:14,100 --> 00:46:15,400
coming out, right?

861
00:46:15,600 --> 00:46:19,700
But by the time we get back to here somewhere you know in between here

862
00:46:19,700 --> 00:46:24,300
and here then that's going to be casting back to negative Z and so if

863
00:46:24,300 --> 00:46:27,700
we imagine, let's say we were to take the ground map and we're saying

864
00:46:27,700 --> 00:46:30,400
that the ground map is supposed to start here, right?

865
00:46:30,600 --> 00:46:32,000
So this is negative and

866
00:46:32,200 --> 00:46:33,000
Up to here.

867
00:46:33,000 --> 00:46:37,600
So this is positive, then it does seem like this is actually going the

868
00:46:37,600 --> 00:46:39,600
wrong direction, right?

869
00:46:40,300 --> 00:46:43,200
Because things, you know, if it was sampling the ground to be

870
00:46:43,200 --> 00:46:47,100
sampling, the ground behind it and behind it in our terms is actually

871
00:46:47,100 --> 00:46:47,800
positive.

872
00:46:47,900 --> 00:46:52,800
So, I think we actually do know what this should be which is that

873
00:46:54,500 --> 00:47:01,800
Which is that Z that Z is actually wants to be negated there and I

874
00:47:01,800 --> 00:47:07,400
don't actually know I think we want to push that up to the head end.

875
00:47:07,400 --> 00:47:09,400
So I don't think we want to touch that here.

876
00:47:09,500 --> 00:47:12,400
I think what we want to do is negate it here.

877
00:47:13,100 --> 00:47:16,900
So we basically have bounced Direction, Z equals negative, bounce,

878
00:47:16,900 --> 00:47:17,700
Direction Z.

879
00:47:18,000 --> 00:47:23,000
And this is going to be a to do, which is eventually we need to

880
00:47:23,000 --> 00:47:23,900
support.

881
00:47:24,400 --> 00:47:25,600
To mappings.

882
00:47:29,200 --> 00:47:34,800
14 top down view which we don't do now.

883
00:47:36,600 --> 00:47:42,100
And one for sideways, which is What's Happening Here?

884
00:47:43,300 --> 00:47:43,800
Right,

885
00:47:46,100 --> 00:47:48,300
So that's what's going on at the moment, right?

886
00:47:48,300 --> 00:47:55,300
So I believe that is technically the the more correct thing to have

887
00:47:55,300 --> 00:47:55,900
happen there.

888
00:47:56,000 --> 00:47:59,100
I feel like that should be saying, I don't know if that that shouldn't

889
00:47:59,100 --> 00:47:59,800
actually have much of

890
00:48:00,000 --> 00:48:04,700
Friends, I wouldn't think meaning, if we, if we do this, it should be

891
00:48:04,700 --> 00:48:05,600
basically the same.

892
00:48:06,200 --> 00:48:08,200
I would think, but I'm wrong.

893
00:48:08,300 --> 00:48:11,000
It looks like it does change the direction of that curvature.

894
00:48:11,200 --> 00:48:13,900
That's not what I would have expected to be honest with you because

895
00:48:14,100 --> 00:48:15,500
our map is symmetric.

896
00:48:15,800 --> 00:48:17,300
So I wasn't expecting it.

897
00:48:17,300 --> 00:48:21,800
The curvature to change in that way, but I guess it did.

898
00:48:22,300 --> 00:48:24,000
So that's a good question.

899
00:48:24,100 --> 00:48:25,800
Why did the curvature change?

900
00:48:28,800 --> 00:48:31,600
Based on that does the bounce Direction.

901
00:48:31,600 --> 00:48:34,000
Have some other effect that I have.

902
00:48:34,000 --> 00:48:38,200
I'm not thinking of because I feel like it really shouldn't have

903
00:48:38,200 --> 00:48:39,200
mattered.

904
00:48:41,300 --> 00:48:44,800
This is whether we were casting backwards or forwards in the map Z

905
00:48:44,800 --> 00:48:46,100
wise, right?

906
00:48:46,200 --> 00:48:48,600
That didn't that doesn't make a lot of sense to me.

907
00:48:48,900 --> 00:48:50,100
So, bounce Direction

908
00:48:53,900 --> 00:48:55,300
When that gets passed here.

909
00:48:59,200 --> 00:49:01,500
Yeah, that that just feels very strange.

910
00:49:01,500 --> 00:49:02,900
That that, that was true.

911
00:49:08,300 --> 00:49:10,300
I am at a loss to explain that behavior.

912
00:49:11,200 --> 00:49:13,900
Let me go take back to the sample environment and take a look.

913
00:49:15,400 --> 00:49:18,400
So it is only used here, right?

914
00:49:18,600 --> 00:49:23,600
So it is only is only changing what direction we step in y.

915
00:49:24,100 --> 00:49:25,900
So in theory we should do exactly.

916
00:49:25,900 --> 00:49:30,800
It should be doing exactly the same stuff but it's just changing the,

917
00:49:30,800 --> 00:49:35,800
the direction it's stepping in the y axis of the the map that we're

918
00:49:35,800 --> 00:49:36,400
sampling.

919
00:49:37,100 --> 00:49:39,700
And so why would change the curvature Direction?

920
00:49:39,700 --> 00:49:40,800
I'm not sure.

921
00:49:42,400 --> 00:49:45,100
I guess it could be because it

922
00:49:45,600 --> 00:49:51,800
Scrolls it sort of flips which area of the map we happen to be on.

923
00:49:52,400 --> 00:49:54,700
I guess I could convince myself that that was true.

924
00:49:54,700 --> 00:49:59,900
Like if we were on we were immediately centered on some part of the

925
00:49:59,900 --> 00:50:00,800
map, right?

926
00:50:01,000 --> 00:50:04,800
I could imagine flipping it would just kind of move where that line

927
00:50:04,800 --> 00:50:05,200
was.

928
00:50:05,300 --> 00:50:08,100
Let me see if I can convince myself that that's actually reasonable

929
00:50:09,000 --> 00:50:13,100
because I'm not sure that I actually buy that explanation if that

930
00:50:13,100 --> 00:50:13,700
makes sense.

931
00:50:14,200 --> 00:50:15,100
So, I

932
00:50:15,400 --> 00:50:15,900
22.

933
00:50:17,400 --> 00:50:18,000
It's over here.

934
00:50:18,900 --> 00:50:21,300
I want to see that again.

935
00:50:25,500 --> 00:50:30,300
Because it feels to me like that line is not even really moving

936
00:50:30,300 --> 00:50:31,300
though, right?

937
00:50:31,300 --> 00:50:33,700
So it feels to me, like it's still totally aligned.

938
00:50:33,700 --> 00:50:37,100
It's just changing what the curvature is there, right?

939
00:50:37,500 --> 00:50:40,400
And so, I don't know that's very strange to me.

940
00:50:40,600 --> 00:50:44,100
I'm going to go ahead and make the distance less so I can see more of

941
00:50:44,100 --> 00:50:46,200
the checkerboard, if that makes sense.

942
00:50:51,600 --> 00:50:51,800
Yeah.

943
00:50:51,800 --> 00:50:55,800
See that seems wrong to me as oh wait, no, that does seem right to me.

944
00:50:56,400 --> 00:50:57,000
I

945
00:50:59,300 --> 00:50:59,800
no, that's seems

946
00:51:00,000 --> 00:51:00,600
To me as well.

947
00:51:00,800 --> 00:51:04,800
I think we've got a bug in here because if I move the map closer,

948
00:51:05,300 --> 00:51:05,900
right?

949
00:51:10,800 --> 00:51:11,300
No, no.

950
00:51:11,500 --> 00:51:11,700
Okay.

951
00:51:11,700 --> 00:51:12,500
We don't have a button here.

952
00:51:12,500 --> 00:51:14,800
Never mind if I move the map further away, I would see more of the

953
00:51:14,800 --> 00:51:16,100
checkerboard, right?

954
00:51:16,400 --> 00:51:16,700
Yeah.

955
00:51:16,800 --> 00:51:18,100
That I think that is actually true.

956
00:51:18,900 --> 00:51:21,100
So if I move the map further away, I should see more of the

957
00:51:21,100 --> 00:51:21,600
checkerboard.

958
00:51:21,600 --> 00:51:23,400
Let me continue to move it further away.

959
00:51:26,500 --> 00:51:29,500
Yeah, so it's very interesting.

960
00:51:30,000 --> 00:51:31,200
So the bottom

961
00:51:32,600 --> 00:51:35,000
Looks pretty reasonable, right?

962
00:51:35,100 --> 00:51:37,000
But the top looks totally wack.

963
00:51:39,800 --> 00:51:41,300
Like what is going on there?

964
00:51:44,200 --> 00:51:45,500
It's super bizarre.

965
00:51:46,700 --> 00:51:47,000
Right.

966
00:51:47,000 --> 00:51:50,800
I mean, I have no idea what that's supposed to be showing me, that

967
00:51:50,800 --> 00:51:53,500
seems very strange that could, of course, be a problem with the

968
00:51:53,500 --> 00:51:54,900
normals that we've actually encoded.

969
00:51:54,900 --> 00:51:57,300
Although, no, we know, it's not because we're rotating now.

970
00:51:57,500 --> 00:52:00,900
So we know that this is purely sampling based because if it was a

971
00:52:00,900 --> 00:52:03,000
problem with the normals, we'd see it, go around.

972
00:52:03,400 --> 00:52:03,700
All right.

973
00:52:03,700 --> 00:52:09,400
So our top reflection, let's take a look at srei bottom reflection.

974
00:52:09,600 --> 00:52:11,900
Let's take a look at what is happening there.

975
00:52:12,400 --> 00:52:14,400
That's making that be so weird.

976
00:52:14,500 --> 00:52:14,800
Right?

977
00:52:14,800 --> 00:52:15,700
Like what is happening?

978
00:52:15,700 --> 00:52:16,400
That's that's

979
00:52:16,500 --> 00:52:17,900
Saying such weirdness.

980
00:52:17,900 --> 00:52:20,500
So if I, if I go ahead and comment this out, right, just so I know

981
00:52:20,500 --> 00:52:23,000
which path were talking about, so it's this path.

982
00:52:23,500 --> 00:52:27,200
So basically we suspect oops.

983
00:52:29,300 --> 00:52:30,500
We suspect.

984
00:52:32,000 --> 00:52:36,700
This path seems particularly broken, right?

985
00:52:40,000 --> 00:52:45,100
So this seems particularly broken to me, the tea Farm app value is

986
00:52:45,100 --> 00:52:47,300
only used for learning the color values.

987
00:52:47,800 --> 00:52:51,000
So I feel like that's not really something we need to worry about

988
00:52:51,000 --> 00:52:54,000
because I don't see how that could possibly be affecting anything,

989
00:52:54,000 --> 00:52:54,600
right?

990
00:52:55,600 --> 00:53:00,500
So the next question is, let's think about how the reflection works

991
00:53:00,500 --> 00:53:04,000
because this happens to be the path where we are talking about the

992
00:53:04,000 --> 00:53:09,400
negated direction of computation, right?

993
00:53:10,200 --> 00:53:15,700
So, maybe that is, you know, being done incorrectly in some way.

994
00:53:16,500 --> 00:53:19,500
So we're only in this case, when we're happening pointing downwards.

995
00:53:19,500 --> 00:53:22,500
So boy, bounce Direction y will be negative, right?

996
00:53:22,800 --> 00:53:26,400
And we're saying that the map is below us, and then we're doing the

997
00:53:26,400 --> 00:53:30,700
sample, and I feel like I looked at this relatively closely, but I

998
00:53:30,700 --> 00:53:35,100
guess I must have not looked at it closely enough or I'm missing

999
00:53:35,100 --> 00:53:38,000
something special about about the way this is happening.

1000
00:53:39,600 --> 00:53:41,900
But assuming that this is negative and this is negative, it cancels

1001
00:53:41,900 --> 00:53:42,100
out.

1002
00:53:42,100 --> 00:53:44,400
You're still gonna get the positive and you're just going to get a

1003
00:53:44,400 --> 00:53:49,100
scaling amount that's going to be how much you should sample from that

1004
00:53:49,100 --> 00:53:50,200
map, right?

1005
00:53:51,000 --> 00:53:53,700
And I feel like that's what we want because the maps are actually

1006
00:53:53,700 --> 00:53:57,900
facing opposite directions so we don't want to negate the direction

1007
00:53:58,800 --> 00:53:59,800
that we're going.

1008
00:54:00,000 --> 00:54:02,900
Say we don't want to like flip power reading from the map or anything.

1009
00:54:02,900 --> 00:54:05,200
It seems like it should be the same.

1010
00:54:05,500 --> 00:54:11,200
In either case we just need to know how far we were going in that map

1011
00:54:11,200 --> 00:54:11,500
right.

1012
00:54:11,500 --> 00:54:12,600
There doesn't seem to be anything.

1013
00:54:12,600 --> 00:54:17,600
Particularly odd about that to me unless I'm again missing something

1014
00:54:17,900 --> 00:54:18,700
special there.

1015
00:54:19,400 --> 00:54:22,200
So I don't see immediately.

1016
00:54:22,400 --> 00:54:25,500
What would be wrong about?

1017
00:54:25,500 --> 00:54:26,400
What we're doing there?

1018
00:54:26,400 --> 00:54:29,800
We sample from the farm app, but I mean,

1019
00:54:30,000 --> 00:54:33,600
I mean it really does seem like it's busted, right?

1020
00:54:33,600 --> 00:54:36,400
I mean if you look at that I just I don't see how that could be a

1021
00:54:36,400 --> 00:54:41,700
plausible reflection pattern in any case, right?

1022
00:54:42,600 --> 00:54:45,700
So I guess the other question is, is there something weird that's

1023
00:54:45,700 --> 00:54:51,600
happening with our, with our normal values when you happen to have

1024
00:54:51,600 --> 00:54:51,800
one?

1025
00:54:51,800 --> 00:54:55,800
That's pointing up directly up like that, right?

1026
00:55:00,500 --> 00:55:04,300
And I'm not totally sure.

1027
00:55:14,300 --> 00:55:18,200
We could double-check this math again just to see if there's anything

1028
00:55:18,500 --> 00:55:22,100
weird happening here as well but I don't know like the spouse

1029
00:55:22,100 --> 00:55:22,700
Direction.

1030
00:55:22,700 --> 00:55:24,100
Z, minus Z equals 1.

1031
00:55:24,100 --> 00:55:27,200
I mean, I feel like we worked it all out relatively carefully so I'm

1032
00:55:27,200 --> 00:55:27,700
not sure.

1033
00:55:27,700 --> 00:55:29,200
Why would I suspect it?

1034
00:55:29,200 --> 00:55:33,200
But it is one of those things where I'm just, I'm a little bit curious

1035
00:55:33,800 --> 00:55:37,100
to know if perhaps there's something strange going on there.

1036
00:55:37,100 --> 00:55:38,900
So let's take a quick look at that.

1037
00:55:40,600 --> 00:55:42,700
So we're taking the Bauhaus direction.

1038
00:55:43,100 --> 00:55:47,300
We're saying, 2 times the normal Z normal XYZ.

1039
00:55:47,600 --> 00:55:51,200
So basically whatever the Z component is.

1040
00:55:51,200 --> 00:55:53,200
And that's I assume that's because we're just starting with the I

1041
00:55:53,200 --> 00:55:58,100
Vector which is 0 0 1 whatever, the normal Z component is, we need to

1042
00:55:58,100 --> 00:56:04,300
move essentially the the negated I Vector up by that much, right?

1043
00:56:05,300 --> 00:56:08,300
And then we just need to subtract negative.

1044
00:56:08,300 --> 00:56:09,500
I the vector, which is what's happening.

1045
00:56:09,700 --> 00:56:10,800
And here, right?

1046
00:56:11,200 --> 00:56:16,400
So that all seems pretty solid e transpose n which is just going to be

1047
00:56:16,400 --> 00:56:22,300
normal Z times normal XYZ and we all want the whole thing doubled,

1048
00:56:22,300 --> 00:56:22,800
right?

1049
00:56:23,200 --> 00:56:27,500
And that that does and that is what I would expect to do there.

1050
00:56:27,500 --> 00:56:32,400
That's not an odd equation to to be doing.

1051
00:56:33,900 --> 00:56:37,100
And we do know it's normalized or at least we tried to normalize it,

1052
00:56:37,200 --> 00:56:37,700
right.

1053
00:56:38,000 --> 00:56:39,100
So all that's true.

1054
00:56:40,700 --> 00:56:46,200
So yeah, then we come down here when we want to change the bounce

1055
00:56:46,200 --> 00:56:48,900
Direction, Z just because we want it to sample in a different

1056
00:56:48,900 --> 00:56:50,200
direction than it was sampling.

1057
00:56:50,900 --> 00:56:52,900
And again, I don't think that.

1058
00:56:53,500 --> 00:56:58,100
Let's see what effect that also has on this guy just to try and get

1059
00:56:58,100 --> 00:56:59,700
some more data here to see what's

1060
00:57:02,700 --> 00:57:03,400
Wow.

1061
00:57:04,500 --> 00:57:08,100
That is just Ultra Ultra Ultra weird to me.

1062
00:57:08,800 --> 00:57:13,400
So it's almost like it's actually sampling out of a the wrong are

1063
00:57:13,400 --> 00:57:18,000
because so changing what the bounce Direction, Z sampling is actually

1064
00:57:18,000 --> 00:57:18,700
changes.

1065
00:57:18,700 --> 00:57:25,000
Where that sort of anomaly actually is, which is super bizarre to me.

1066
00:57:25,300 --> 00:57:28,400
I do not see why that should be happening at all.

1067
00:57:30,300 --> 00:57:31,500
This is a bit of a Puzzler.

1068
00:57:31,700 --> 00:57:35,300
This may have to be like The Puzzler for today like who could figure

1069
00:57:35,300 --> 00:57:37,400
out what is happening.

1070
00:57:37,800 --> 00:57:44,200
Strangely here, I guess if sample Direction Why simple directions see

1071
00:57:44,900 --> 00:57:45,800
was Zero?

1072
00:57:45,800 --> 00:57:47,100
Yeah, I don't know.

1073
00:57:51,100 --> 00:57:51,700
I don't know.

1074
00:57:51,700 --> 00:57:54,800
I mean this could be our motivation to go write some actual debugging

1075
00:57:54,800 --> 00:57:57,100
tools here because I'm trying to think of how to debug this without

1076
00:57:57,100 --> 00:57:58,600
some semblance of debugging tools.

1077
00:57:58,600 --> 00:58:03,500
And I'm not sure that there's much of a good way to do that because

1078
00:58:03,500 --> 00:58:09,100
I'm stumped as to things we could try and we definitely.

1079
00:58:09,100 --> 00:58:11,800
I mean, I just can't see any way that that could be right, it just

1080
00:58:11,800 --> 00:58:12,700
doesn't seem

1081
00:58:13,600 --> 00:58:18,700
Plausible to me and you can see that it's it's right in a circular

1082
00:58:18,800 --> 00:58:23,900
like a well and ovular region as well, which is sort of as that

1083
00:58:23,900 --> 00:58:29,800
reflection passes through some, some critical point, it would seem but

1084
00:58:29,800 --> 00:58:33,200
I don't have a good explanation for exactly what that is.

1085
00:58:35,300 --> 00:58:35,800
Yeah.

1086
00:58:36,700 --> 00:58:37,100
Yeah.

1087
00:58:40,200 --> 00:58:43,800
so, I guess I'll leave that as The Puzzler, I'll leave the code

1088
00:58:44,100 --> 00:58:48,400
exactly as it is right now, and we'll leave that as The Puzzler to see

1089
00:58:48,400 --> 00:58:53,100
if anyone can figure out what's going on before tomorrow when we, when

1090
00:58:53,100 --> 00:58:54,000
we take a look,

1091
00:58:57,400 --> 00:58:59,000
And let's see.

1092
00:58:59,100 --> 00:59:00,400
Let me go to Q&A.

1093
00:59:02,000 --> 00:59:02,400
so,

1094
00:59:05,100 --> 00:59:09,500
Grumpy giant says draw the sampling Vector as RGB to visualize it.

1095
00:59:09,600 --> 00:59:11,200
We totally could do that.

1096
00:59:11,400 --> 00:59:12,600
That is a good idea.

1097
00:59:15,600 --> 00:59:17,100
To draw the sampling Vector.

1098
00:59:17,100 --> 00:59:19,800
We just need to go in here instead of doing any of this stuff.

1099
00:59:20,500 --> 00:59:23,700
We would actually just take our bounce Direction.

1100
00:59:27,100 --> 00:59:27,700
Like so.

1101
00:59:30,900 --> 00:59:36,500
And say, all right, the Texel RGB is going to be the, well, I guess

1102
00:59:36,500 --> 00:59:39,000
the text effects are.

1103
00:59:40,000 --> 00:59:43,200
Well, I guess I could do it this way, is going to be 0.5.

1104
00:59:43,200 --> 00:59:45,700
Plus 0.5 x lb direction, right?

1105
00:59:45,700 --> 00:59:50,200
So, that shifts it up from negative, 1 to 1 to 0, to 1, right?

1106
00:59:51,600 --> 00:59:55,100
See here, right?

1107
00:59:55,100 --> 00:59:55,800
Got to do.

1108
00:59:57,100 --> 00:59:58,100
Vector for that.

1109
00:59:59,300 --> 00:59:59,700
Light.

1110
01:00:00,200 --> 01:00:01,000
Undeclared.

1111
01:00:01,000 --> 01:00:03,300
Identifier, that is true.

1112
01:00:04,100 --> 01:00:06,100
It's because I didn't actually want that.

1113
01:00:07,200 --> 01:00:08,200
That's what I wanted.

1114
01:00:18,700 --> 01:00:22,000
So, there is our sampling Vector pattern.

1115
01:00:23,300 --> 01:00:28,200
it's kind of pretty actually, I mean, you know,

1116
01:00:29,400 --> 01:00:31,200
You got to respect that sampling pattern.

1117
01:00:31,800 --> 01:00:32,500
Wouldn't you say?

1118
01:00:34,400 --> 01:00:36,200
It's a little confusing to read right now.

1119
01:00:36,200 --> 01:00:40,400
So I think what I might do is say let's knock out the are and the the

1120
01:00:40,400 --> 01:00:40,700
G.

1121
01:00:40,700 --> 01:00:46,300
So now we're just going to visualize the Z component of it, right?

1122
01:00:47,700 --> 01:00:48,500
Or at least try to

1123
01:00:51,600 --> 01:00:53,000
Why am I still getting?

1124
01:01:00,800 --> 01:01:02,500
What's wrong here?

1125
01:01:03,000 --> 01:01:04,000
Why am I still getting

1126
01:01:06,100 --> 01:01:11,300
Text illegals, hadamard text, the color color is not being fed in.

1127
01:01:11,300 --> 01:01:12,400
Oddly is it?

1128
01:01:16,000 --> 01:01:16,900
Yeah, I don't understand.

1129
01:01:16,900 --> 01:01:21,200
Textile de R equals 0 x, 0 dot g, equals 0.

1130
01:01:21,200 --> 01:01:24,300
Oh that's the wrong path.

1131
01:01:25,000 --> 01:01:25,400
There we go.

1132
01:01:27,600 --> 01:01:30,300
So, there is our Z Direction.

1133
01:01:34,200 --> 01:01:39,600
And that seems correct to me.

1134
01:01:41,200 --> 01:01:41,700
Right?

1135
01:01:43,100 --> 01:01:44,900
Because remember we're going to gated.

1136
01:01:44,900 --> 01:01:46,600
So this is negative 1.

1137
01:01:46,700 --> 01:01:52,100
This would be directly back at us and as we get out to the sides, it

1138
01:01:52,100 --> 01:01:53,900
gets less and less, right?

1139
01:01:56,400 --> 01:01:58,000
That seems correct to me.

1140
01:01:58,500 --> 01:02:01,700
Let's take a look at at the

1141
01:02:03,900 --> 01:02:05,700
At The X sampling.

1142
01:02:07,500 --> 01:02:08,800
That seems

1143
01:02:11,700 --> 01:02:14,400
Pretty reasonable.

1144
01:02:15,400 --> 01:02:16,300
It's hard to say in here?

1145
01:02:16,300 --> 01:02:22,200
I mean I guess it's encoded in srgb now, which is a little odd, but I

1146
01:02:22,200 --> 01:02:24,000
could believe that's true, right?

1147
01:02:24,000 --> 01:02:27,900
You get the brightest part here in the darkest part at 40, 45 and 45?

1148
01:02:27,900 --> 01:02:31,000
I think that's about right, right?

1149
01:02:31,300 --> 01:02:33,900
That's seems plausible.

1150
01:02:36,300 --> 01:02:40,300
I could believe it anyway, you can see again that kind of I feel like

1151
01:02:40,300 --> 01:02:40,800
we do have

1152
01:02:41,000 --> 01:02:41,600
Miracle stuff.

1153
01:02:41,600 --> 01:02:43,700
We want to work out around the edges where things are probably

1154
01:02:43,700 --> 01:02:46,700
degenerating in a bad way but that's not part of the problem we're

1155
01:02:46,700 --> 01:02:47,900
seeing right now obviously.

1156
01:02:48,700 --> 01:02:53,800
And so let's take a look at finally the green and that that looks

1157
01:02:53,800 --> 01:02:54,400
right as well.

1158
01:02:54,400 --> 01:02:59,800
It's so, I mean, we're, we're having that problem is where the Y gets

1159
01:03:00,000 --> 01:03:01,300
Particularly negative.

1160
01:03:02,600 --> 01:03:08,400
I mean, so we do kind of now at least know that it's where the Y is

1161
01:03:08,400 --> 01:03:12,800
negative but I don't really understand why the why being particularly

1162
01:03:12,800 --> 01:03:18,400
- would cause problems that are different from the why being positive,

1163
01:03:21,700 --> 01:03:24,000
like what is the difference in here.

1164
01:03:25,500 --> 01:03:26,700
If we have

1165
01:03:28,000 --> 01:03:29,700
Doing that divide.

1166
01:03:30,100 --> 01:03:33,500
If the why is, you know,

1167
01:03:40,900 --> 01:03:43,400
I'm not really sure why that would be the case.

1168
01:03:48,100 --> 01:03:50,100
I guess one thing that would be interesting.

1169
01:03:51,400 --> 01:03:52,700
Is.

1170
01:03:55,300 --> 01:04:00,600
Let's take a look at where the equal zero line is for y, right?

1171
01:04:00,700 --> 01:04:02,500
So, basically, like

1172
01:04:04,700 --> 01:04:07,800
what I'm kind of interested in doing here is saying, all right, what

1173
01:04:07,800 --> 01:04:14,600
if we were to say that if the bounce Direction, y equals, you know,

1174
01:04:15,400 --> 01:04:18,400
and maybe I'll give it a little bit of a range, right?

1175
01:04:19,300 --> 01:04:21,200
So if it's greater than or equal to

1176
01:04:24,000 --> 01:04:25,800
groups, and

1177
01:04:28,200 --> 01:04:29,700
Less than or equal to.

1178
01:04:30,800 --> 01:04:35,100
So if it's within that range, the bow show and I guess I we're not

1179
01:04:35,100 --> 01:04:37,700
shifted up anymore so I guess I actually want if it's greater than

1180
01:04:37,700 --> 01:04:43,300
equal to negative 0.1 positive 0.1, something like that.

1181
01:04:43,300 --> 01:04:46,900
So if the bass directions within their I just want to know where where

1182
01:04:46,900 --> 01:04:49,100
Y is close to zero.

1183
01:04:49,200 --> 01:04:56,700
I want, you know, Texel rgb2 equal, you know 111 and otherwise I want

1184
01:04:56,700 --> 01:04:57,800
Texel rgb2.

1185
01:04:58,000 --> 01:04:58,400
12000.

1186
01:04:59,700 --> 01:05:04,100
All right, and so I just want to see where that is.

1187
01:05:04,600 --> 01:05:07,400
So that's exactly what I would have expected, right?

1188
01:05:07,600 --> 01:05:11,200
And we never draw the map that we never do the sampling there.

1189
01:05:12,600 --> 01:05:19,600
So I feel like we aren't getting some kind of like, dividing by a high

1190
01:05:19,600 --> 01:05:20,000
number.

1191
01:05:20,000 --> 01:05:22,200
Kind of a weirdness happening there, right?

1192
01:05:22,300 --> 01:05:26,800
That doesn't seem to be true but it still is definitely the case that

1193
01:05:26,800 --> 01:05:27,800
if you take a look at what,

1194
01:05:27,900 --> 01:05:32,200
Happens here right around where you know where that's occurring.

1195
01:05:32,500 --> 01:05:33,700
We see that.

1196
01:05:33,800 --> 01:05:36,000
We're kind of getting that weird sort of why?

1197
01:05:36,500 --> 01:05:37,500
I wonder what that value.

1198
01:05:37,500 --> 01:05:38,000
Well, you know what?

1199
01:05:38,000 --> 01:05:43,500
Let's do this, I guess we could try to find what that range is so you

1200
01:05:43,500 --> 01:05:48,100
know it's called this isoline and we'll just say, let's take a look at

1201
01:05:48,100 --> 01:05:51,400
where the isoline is near -.5, right.

1202
01:05:51,800 --> 01:05:53,000
And so we'll just do

1203
01:05:54,700 --> 01:05:56,800
Isoline isoline.

1204
01:05:57,100 --> 01:05:59,800
So, and this will just show us

1205
01:06:00,000 --> 01:06:04,200
And right around where that is happening, right?

1206
01:06:04,400 --> 01:06:08,600
And so then we can see what kinds of values.

1207
01:06:08,800 --> 01:06:12,000
They must actually be where we're getting our bug, right?

1208
01:06:12,200 --> 01:06:13,500
So here's a step.

1209
01:06:13,500 --> 01:06:16,300
It up, 2.7, Step It Up 2.9.

1210
01:06:17,600 --> 01:06:25,300
I guess so it looks like it's it's right about right about there.

1211
01:06:25,300 --> 01:06:29,100
Right, let me let me increase the resolution here of where we're

1212
01:06:29,100 --> 01:06:31,000
looking at are banding, right?

1213
01:06:31,200 --> 01:06:36,100
So that's that's looking sort of sort of like what we're talking

1214
01:06:36,100 --> 01:06:36,300
about.

1215
01:06:36,300 --> 01:06:40,600
So when we're sort of getting up two numbers that are very close,

1216
01:06:40,600 --> 01:06:44,200
there were getting that discontinuity but I don't really know why.

1217
01:06:51,500 --> 01:06:56,000
Me Blair, is the mapping clipped on, either the top or bottom Edge.

1218
01:06:56,000 --> 01:06:57,100
Don't know if that makes sense.

1219
01:06:57,200 --> 01:06:57,800
I don't know.

1220
01:06:57,800 --> 01:07:03,600
It might be, I wouldn't think so because the cross section of the map

1221
01:07:03,600 --> 01:07:05,200
that we're looking at, seems

1222
01:07:08,900 --> 01:07:12,000
Seems like it should have plenty of room, you know?

1223
01:07:24,200 --> 01:07:25,100
Robot chocolate.

1224
01:07:25,100 --> 01:07:28,700
Dino could be calculated value for the NZ scale from the normal X and

1225
01:07:28,700 --> 01:07:29,300
normal wives.

1226
01:07:29,300 --> 01:07:33,000
With the normal Z is unchanged after normalization.

1227
01:07:41,400 --> 01:07:45,600
I mean, we certainly could make sure that the normal Z is unchanged.

1228
01:07:46,800 --> 01:07:50,600
That's that's certainly true and the way that we would do that.

1229
01:07:50,900 --> 01:07:52,700
So if you wanted to do that, right?

1230
01:07:53,800 --> 01:07:58,500
If you know what the normal Z is, so what you want to do is you want

1231
01:07:58,500 --> 01:08:04,100
to say that like x squared plus y squared, plus Z squared, right

1232
01:08:04,100 --> 01:08:04,500
square?

1233
01:08:04,500 --> 01:08:08,800
Rooted you want this to equal one and so if you're saying that you

1234
01:08:08,800 --> 01:08:09,600
want to hold,

1235
01:08:09,800 --> 01:08:16,500
This term fixed right essentially, what you're saying is you're saying

1236
01:08:16,500 --> 01:08:19,800
well you want because I can square both sides, right?

1237
01:08:20,399 --> 01:08:25,700
Like so, essentially what you're saying there is you're saying okay I

1238
01:08:25,700 --> 01:08:29,700
want my x squared plus y squared right?

1239
01:08:30,000 --> 01:08:33,200
I want that to be whatever it would have to be

1240
01:08:34,800 --> 01:08:39,300
To make sure that it's it's combined.

1241
01:08:39,300 --> 01:08:42,000
Length was 1 minus Z squared, right?

1242
01:08:42,700 --> 01:08:47,300
So what you'd end up doing is you end up saying, okay, you know,

1243
01:08:48,300 --> 01:08:54,700
instead of normalizing, the whole Vector, you would take the vector,

1244
01:08:54,700 --> 01:08:59,700
just the X Y of the normal, you take just that portion and you would

1245
01:08:59,700 --> 01:08:59,800
develop

1246
01:09:00,200 --> 01:09:02,200
I'd buy this, right?

1247
01:09:02,200 --> 01:09:05,600
You would you would, you would make it so that this length,

1248
01:09:08,100 --> 01:09:10,399
Is equal to that, right?

1249
01:09:10,399 --> 01:09:14,800
You would make it so that that I'm not explaining myself very well

1250
01:09:14,800 --> 01:09:15,100
here.

1251
01:09:15,399 --> 01:09:17,899
So if this is your normal Vector, right?

1252
01:09:19,700 --> 01:09:20,100
Sorry

1253
01:09:24,500 --> 01:09:26,500
If this is your normal Vector, right?

1254
01:09:26,500 --> 01:09:32,300
Then what we were doing before is we were basically saying like The

1255
01:09:32,300 --> 01:09:34,500
New Normal is going to equal to the old.

1256
01:09:34,500 --> 01:09:38,700
No moral will however much scaling it had in it, you know, rescaled

1257
01:09:38,700 --> 01:09:39,899
like this, right?

1258
01:09:39,899 --> 01:09:45,100
And so if your pre saying that you don't want the Z to change, right,

1259
01:09:45,100 --> 01:09:50,100
then you're just talking about this part of this term, right?

1260
01:09:50,100 --> 01:09:54,000
So instead what you want to do is first,

1261
01:09:54,600 --> 01:09:58,600
Of to get the the amount that you're actually talking about that, you

1262
01:09:58,600 --> 01:10:00,500
want X and Y to be right.

1263
01:10:00,500 --> 01:10:03,500
And so I could square root both sides here, right?

1264
01:10:03,500 --> 01:10:09,800
Like this and say, all right, I want the length of my of just the X Y

1265
01:10:09,900 --> 01:10:15,100
of just the X Y Vector to equal the square root of 1 minus Z squared,

1266
01:10:15,300 --> 01:10:15,800
right?

1267
01:10:16,100 --> 01:10:21,000
So then when you take n, XY and you're producing the new nxy, what you

1268
01:10:21,000 --> 01:10:24,400
do is you take the old x y and instead of

1269
01:10:24,500 --> 01:10:28,500
Normalizing, it like this which is what we were doing before, right?

1270
01:10:28,600 --> 01:10:33,100
You would normalize it by first dividing by its current length and

1271
01:10:33,100 --> 01:10:36,200
then multiplying, by by this, right?

1272
01:10:37,700 --> 01:10:42,200
You know, I'm saying so that you would actually so that you would turn

1273
01:10:42,200 --> 01:10:44,200
it into a length of that, I'm sorry.

1274
01:10:44,200 --> 01:10:44,900
Put that in the wrong place.

1275
01:10:44,900 --> 01:10:50,100
You'd you normalize it and then multiply it by this, right 1, minus Z

1276
01:10:50,100 --> 01:10:50,500
squared.

1277
01:10:51,100 --> 01:10:54,900
Because now you would know that you'd have this would be a unit length

1278
01:10:54,900 --> 01:10:56,400
Vector, right?

1279
01:10:56,600 --> 01:10:59,500
And now you're multiplying by this which is the length you actually

1280
01:10:59,500 --> 01:11:00,600
want it to be.

1281
01:11:01,700 --> 01:11:04,200
And then I believe in theory, then it would all work out.

1282
01:11:04,200 --> 01:11:09,000
So that now you would have, you know, an x + y squared, that would

1283
01:11:09,000 --> 01:11:10,500
would come out to those values.

1284
01:11:11,200 --> 01:11:15,300
I believe, I'd have to go sit down and work out that work.

1285
01:11:15,300 --> 01:11:18,700
That out more carefully to make sure I didn't miss something there.

1286
01:11:18,700 --> 01:11:21,100
But you see basically the process, right?

1287
01:11:22,100 --> 01:11:25,300
I just solved for the length that these guys would actually have to

1288
01:11:25,300 --> 01:11:31,100
produce in order to to make this to make Z state.

1289
01:11:31,300 --> 01:11:33,800
Same in the final thing, right?

1290
01:11:54,800 --> 01:11:58,100
Only flip the bounce Direction Z when you use the top map.

1291
01:11:58,500 --> 01:11:59,800
So yeah, the

1292
01:12:00,000 --> 01:12:04,800
Problem with that is that obviously would fix the problem but we don't

1293
01:12:04,800 --> 01:12:06,900
know why, right?

1294
01:12:07,600 --> 01:12:11,200
And so I don't want to just like, flip a variable and be like, well,

1295
01:12:11,200 --> 01:12:13,800
we flipped a variable and now it's not a problem.

1296
01:12:14,500 --> 01:12:19,100
We should have a reason why that fixes the the issue, right?

1297
01:12:19,800 --> 01:12:23,400
And if we don't have an explanation for that then we're in trouble.

1298
01:12:23,600 --> 01:12:26,900
So I feel like we need to go take a look and actually figure out

1299
01:12:26,900 --> 01:12:29,300
what's going on there before we do anything weird.

1300
01:12:30,200 --> 01:12:33,900
Like that because that's that's kind of the old just keep adding

1301
01:12:33,900 --> 01:12:34,900
negatives to it works.

1302
01:12:35,200 --> 01:12:38,700
And the problem is that always comes back to bite you eventually,

1303
01:12:39,000 --> 01:12:39,600
right?

1304
01:12:42,400 --> 01:12:43,000
So, yeah.

1305
01:12:43,600 --> 01:12:46,700
And so, someone was asking how this about how bounce Direction,

1306
01:12:46,700 --> 01:12:51,800
effects effects, the, the map drawing, right?

1307
01:12:52,700 --> 01:12:57,600
And it looks like it does not well, obviously bounce Direction Z would

1308
01:12:57,600 --> 01:13:00,300
not affect the map drawing at all.

1309
01:13:00,900 --> 01:13:01,900
So that's interesting though.

1310
01:13:01,900 --> 01:13:04,600
The way that's actually a very interesting piece of data, isn't it?

1311
01:13:05,000 --> 01:13:06,700
Because we know that bounce Direction.

1312
01:13:06,700 --> 01:13:10,800
Z does change who has the bug, right?

1313
01:13:10,800 --> 01:13:11,700
When we do it.

1314
01:13:13,300 --> 01:13:16,000
But the Y values don't change.

1315
01:13:16,000 --> 01:13:20,900
So it isn't really about what's happening with the Y values.

1316
01:13:21,600 --> 01:13:22,500
It's very interesting.

1317
01:13:23,500 --> 01:13:24,100
This is a bit.

1318
01:13:24,100 --> 01:13:27,100
This is such a weird, such a weird, little guy.

1319
01:13:28,000 --> 01:13:30,700
I do Wonder like I'm trying to figure out if there's any way you could

1320
01:13:30,700 --> 01:13:31,500
have clipping.

1321
01:13:31,600 --> 01:13:34,300
I don't feel like you could because the screen space u and v should be

1322
01:13:34,500 --> 01:13:37,100
fairly close to this to the middle.

1323
01:13:37,500 --> 01:13:42,700
And so we're only just displacing off of that u and v.

1324
01:13:43,000 --> 01:13:46,900
It seems odd that we would.

1325
01:13:49,200 --> 01:13:52,800
That we would ever end up clamping right now.

1326
01:13:52,800 --> 01:13:57,900
We could, we could see if we were clamping by just saying, you know,

1327
01:13:57,900 --> 01:14:02,800
assert that that we're not right, we could do it, we could just flat

1328
01:14:02,800 --> 01:14:07,100
out say, you know, hey let's let's make sure we're not clamping,

1329
01:14:07,700 --> 01:14:08,200
right?

1330
01:14:10,900 --> 01:14:15,900
But you know, it certainly doesn't look like we're clamping because as

1331
01:14:15,900 --> 01:14:20,500
far as I can tell, the the assertions, never fire, which means we're

1332
01:14:20,700 --> 01:14:26,700
well within the map boundaries when we're actually doing our sampling,

1333
01:14:27,000 --> 01:14:27,500
right?

1334
01:14:28,200 --> 01:14:28,800
And

1335
01:14:33,600 --> 01:14:38,400
Yeah, and all of this looks pretty straightforward rights doing the

1336
01:14:38,400 --> 01:14:40,300
srgb by linear blend stuff.

1337
01:14:42,100 --> 01:14:46,400
So yeah, so it all seems pretty reasonable.

1338
01:14:50,600 --> 01:14:54,800
It just doesn't seem like there's a lot of Aditi going on there and

1339
01:14:54,800 --> 01:14:56,800
it's interesting that this is primarily.

1340
01:14:56,800 --> 01:14:59,800
What causes that anomaly?

1341
01:15:02,600 --> 01:15:05,700
the fact that the sample Direction Z,

1342
01:15:07,900 --> 01:15:11,200
Because right, that's that's what determines whether we pick up the

1343
01:15:11,200 --> 01:15:12,800
anomaly or not, right?

1344
01:15:12,900 --> 01:15:17,300
Is whether we whether we've got that guy in there, right?

1345
01:15:18,100 --> 01:15:22,400
So there's something about the stepping in why?

1346
01:15:23,100 --> 01:15:28,500
That's not obvious how it's working, or why it's working that way,

1347
01:15:29,000 --> 01:15:29,500
right?

1348
01:15:30,200 --> 01:15:34,000
And I'm not sure, I'm not sure what's going on there.

1349
01:15:39,400 --> 01:15:45,800
You know, it's just it's we've we've done something stupid with the

1350
01:15:45,800 --> 01:15:48,800
way that we're sampling the maps but I just don't know what it is and

1351
01:15:48,800 --> 01:15:49,800
I shouldn't say they were sampling.

1352
01:15:49,800 --> 01:15:54,400
The way we're Computing the reflection because this does seem this

1353
01:15:54,400 --> 01:15:56,000
seems fairly innocuous.

1354
01:15:56,400 --> 01:15:58,100
Like it's not clear to me.

1355
01:15:58,100 --> 01:16:00,300
How we could have that bug in here really

1356
01:16:02,300 --> 01:16:06,500
So it feels like maybe it's a more subtle thing with what we're asking

1357
01:16:06,500 --> 01:16:08,200
it to do is different.

1358
01:16:13,400 --> 01:16:14,000
So yeah.

1359
01:16:28,100 --> 01:16:32,000
so, yeah, and eventually this euv, permeated this actually needs to be

1360
01:16:33,600 --> 01:16:39,600
A parameter, I do Wonder.

1361
01:16:41,400 --> 01:16:43,000
Hibiscus exit as well.

1362
01:16:43,700 --> 01:16:44,000
Oops.

1363
01:16:54,900 --> 01:16:56,900
That's pretty interesting.

1364
01:16:58,400 --> 01:17:03,100
So as we sample more of the map, the anomaly doesn't look as

1365
01:17:03,100 --> 01:17:05,000
pronounced or even if it's there at.

1366
01:17:05,000 --> 01:17:09,200
All right, so

1367
01:17:12,500 --> 01:17:13,700
As I zoom in.

1368
01:17:24,800 --> 01:17:26,600
With auvs for M there.

1369
01:17:29,900 --> 01:17:34,600
It's kind of interesting to, it's like it elongates, it's elongating

1370
01:17:34,600 --> 01:17:39,100
part of this reflection much more than its real on getting this

1371
01:17:39,100 --> 01:17:39,800
reflection.

1372
01:17:41,100 --> 01:17:41,700
Right.

1373
01:17:44,600 --> 01:17:47,500
I wonder if that's just based on where it is on the screen.

1374
01:17:56,000 --> 01:17:59,800
I do wonder, I want to add another parameter.

1375
01:18:00,000 --> 01:18:01,000
U2 system here.

1376
01:18:02,000 --> 01:18:04,100
Right, let's keep going here 5.

1377
01:18:06,200 --> 01:18:06,800
Four.

1378
01:18:09,000 --> 01:18:11,000
So yeah, that's what's actually happening.

1379
01:18:12,300 --> 01:18:17,000
We're almost puncturing through the map.

1380
01:18:21,400 --> 01:18:22,700
How is that possible?

1381
01:18:25,400 --> 01:18:29,500
It's like we've we've gone much too close to them, it's like we've

1382
01:18:29,500 --> 01:18:35,800
inverted the map, I wonder and that, wow, this is going to be

1383
01:18:35,800 --> 01:18:36,700
interesting one to solve.

1384
01:18:36,700 --> 01:18:38,000
This is the first interesting bug.

1385
01:18:38,000 --> 01:18:39,900
We've really had on hand made a hero.

1386
01:18:43,000 --> 01:18:44,200
That's just fascinating.

1387
01:18:46,800 --> 01:18:49,200
So, what we're seeing there, I think, is actually the map inverted

1388
01:18:49,200 --> 01:18:49,600
cell.

1389
01:18:49,800 --> 01:18:51,200
That's very strange.

1390
01:18:54,300 --> 01:18:57,700
And the bottom one is always seemingly correct.

1391
01:18:57,800 --> 01:19:01,600
It does never have that problem, no matter what we do to it, it seems

1392
01:19:01,600 --> 01:19:03,300
fine, right?

1393
01:19:06,600 --> 01:19:07,800
So fascinating.

1394
01:19:08,500 --> 01:19:12,400
So how is that guy getting punctured in that way?

1395
01:19:18,600 --> 01:19:22,000
And why would that be tied to the direction you're stepping in?

1396
01:19:22,000 --> 01:19:23,400
Why in the map?

1397
01:19:24,700 --> 01:19:25,300
Right?

1398
01:19:25,400 --> 01:19:26,700
Those are the questions.

1399
01:19:27,200 --> 01:19:28,600
Those are the key questions.

1400
01:19:33,100 --> 01:19:34,600
We're picking the map.

1401
01:19:35,400 --> 01:19:37,100
You don't care about tea far map.

1402
01:19:38,300 --> 01:19:39,400
We're taking the distance.

1403
01:19:39,400 --> 01:19:41,300
The distance is becoming negative.

1404
01:19:42,600 --> 01:19:43,200
In the path.

1405
01:19:43,200 --> 01:19:44,000
That's broken.

1406
01:19:50,900 --> 01:19:55,700
But the fact that the distance is negative, we know that the actual

1407
01:19:55,700 --> 01:19:56,800
bounce Direction.

1408
01:19:56,900 --> 01:20:01,300
Why the thing that we're passing, we know that the bounce Direction Y

1409
01:20:02,000 --> 01:20:03,200
is actually

1410
01:20:08,200 --> 01:20:09,200
Also, going to be negative.

1411
01:20:09,200 --> 01:20:10,500
So those divided out

1412
01:20:15,300 --> 01:20:17,800
And it's always that way for the entire reflection.

1413
01:20:17,800 --> 01:20:20,700
So it's not like just part of it, it's always that way for the entire

1414
01:20:20,700 --> 01:20:21,300
reflection.

1415
01:20:29,800 --> 01:20:31,500
I'm not sure, I'm still not sure.

1416
01:20:35,500 --> 01:20:38,600
Maybe you can try to write code to show points on the textures from

1417
01:20:38,600 --> 01:20:39,500
which it is doing.

1418
01:20:39,500 --> 01:20:40,200
Sampling.

1419
01:20:40,900 --> 01:20:43,100
Yeah, I think that's a, that's an excellent idea.

1420
01:20:46,600 --> 01:20:48,100
That's a very good idea, actually.

1421
01:20:50,900 --> 01:20:52,000
Yeah, so that's okay.

1422
01:20:52,000 --> 01:20:54,200
So the next person said, how would the anomaly shift at the server to

1423
01:20:54,200 --> 01:20:55,400
move up or down instead of up, right?

1424
01:20:55,400 --> 01:20:57,600
That was the thing that I said, I was about to, to do.

1425
01:20:58,000 --> 01:20:59,800
I'm glad you just reminded me because I kind of lost that.

1426
01:21:00,000 --> 01:21:02,600
I thought I said I wanted to add a new parameter, I want to see what

1427
01:21:02,600 --> 01:21:06,700
happens when it moves up and down, although I'm a less.

1428
01:21:06,800 --> 01:21:07,500
I'm less sure.

1429
01:21:07,500 --> 01:21:12,300
Now that that's actually going to be useful, but let's, let's see.

1430
01:21:14,600 --> 01:21:15,500
Let's see here.

1431
01:21:15,800 --> 01:21:16,900
Let's go ahead and Boop's

1432
01:21:18,600 --> 01:21:26,400
Let's go ahead and make that disp and go ahead and make display V2.

1433
01:21:27,900 --> 01:21:34,700
And so we'll do you know, whatever that is will sign angle.

1434
01:21:37,200 --> 01:21:37,800
Alexei.

1435
01:21:53,600 --> 01:21:56,100
So, that's even more crazy, right?

1436
01:21:56,300 --> 01:21:56,800
It's

1437
01:22:00,200 --> 01:22:01,700
It's like we're not.

1438
01:22:04,500 --> 01:22:05,300
I'm just puzzled.

1439
01:22:05,300 --> 01:22:08,200
It's like we're somehow not sampling, the why correctly?

1440
01:22:08,200 --> 01:22:10,300
But only for that one map.

1441
01:22:12,200 --> 01:22:13,500
It's so quick.

1442
01:22:13,500 --> 01:22:14,200
You'll Eur.

1443
01:22:17,700 --> 01:22:19,900
I am, I'm really stumped.

1444
01:22:22,100 --> 01:22:23,600
As to why that would be happening.

1445
01:22:24,100 --> 01:22:28,700
It's got the answers like right in front of our face and it's going to

1446
01:22:28,700 --> 01:22:31,200
be like a bit of a head slapper when we finally find it.

1447
01:22:31,900 --> 01:22:32,500
But yeah.

1448
01:22:41,200 --> 01:22:46,100
Grumpy giant 256 wondering if it shouldn't maybe be F ABS sample

1449
01:22:46,100 --> 01:22:46,500
Direction.

1450
01:22:46,500 --> 01:22:47,000
Why

1451
01:22:49,000 --> 01:22:53,400
Well, certainly, I am in no position to say yes or no.

1452
01:22:53,400 --> 01:22:55,400
Since we don't know why this code isn't working.

1453
01:22:55,400 --> 01:22:58,400
But what I don't understand is why would it be that way?

1454
01:22:58,500 --> 01:23:02,500
Because distance from mapping Z is going to be the same sign as

1455
01:23:02,500 --> 01:23:04,600
sample, Direction y, right.

1456
01:23:06,400 --> 01:23:11,300
So I feel like the only thing it would do and maybe this is where I'm

1457
01:23:11,300 --> 01:23:13,700
just not understanding things or something.

1458
01:23:14,400 --> 01:23:18,300
I feel like the only thing that would happen, if this were F, ABS is,

1459
01:23:18,300 --> 01:23:25,000
you would flip the direction of the reflection, right?

1460
01:23:25,400 --> 01:23:27,200
But why would it produce that pattern?

1461
01:23:27,200 --> 01:23:28,900
And I mean, we might as well try it.

1462
01:23:30,200 --> 01:23:31,800
It doesn't help us know, why it's wrong.

1463
01:23:31,800 --> 01:23:33,700
Unless, you know, in which case you should tell us,

1464
01:23:36,400 --> 01:23:37,800
Yeah, that did not help.

1465
01:23:41,700 --> 01:23:43,500
Because like, it's just completing an offset.

1466
01:23:43,500 --> 01:23:46,600
So, the only thing that would happen was this would flip, right?

1467
01:23:47,200 --> 01:23:52,200
This, this, this Vector would flip it would go, you know, the opposite

1468
01:23:52,200 --> 01:23:52,800
direction.

1469
01:23:55,400 --> 01:23:56,800
Screwface uv+ offset.

1470
01:23:56,800 --> 01:23:58,900
We clamp the X and the Y.

1471
01:23:59,500 --> 01:23:59,800
We

1472
01:24:00,400 --> 01:24:05,000
Multiply out the TX by taking a look at the, the width and the height.

1473
01:24:08,100 --> 01:24:11,000
And blowing that out, which makes sense.

1474
01:24:12,800 --> 01:24:15,700
Of course, we haven't really handled the fact that the UVS parameter

1475
01:24:15,700 --> 01:24:18,500
is should be different for both for the X and the Y.

1476
01:24:36,000 --> 01:24:37,700
Clamp it, we do the t x to Y.

1477
01:24:37,700 --> 01:24:41,300
We take the fractional value, that sure does look right.

1478
01:24:41,900 --> 01:24:44,500
And so, it seems like there's something going wrong out here.

1479
01:24:44,500 --> 01:24:46,000
We unscanned bias, our normals.

1480
01:24:46,000 --> 01:24:46,800
That's good.

1481
01:24:47,300 --> 01:24:52,400
We do our normal XY pass, we normalize the mount, we compute the

1482
01:24:52,400 --> 01:24:53,500
bounce Direction.

1483
01:24:53,800 --> 01:24:55,000
The bounce fraction is direction.

1484
01:24:55,000 --> 01:24:58,900
We're going from the point that we are on the screen.

1485
01:24:58,900 --> 01:25:02,200
Space UV rays are screen, space UV.

1486
01:25:03,600 --> 01:25:07,500
with Max x, x, invite mass times y, That's

1487
01:25:09,500 --> 01:25:10,700
Seems right.

1488
01:25:14,900 --> 01:25:18,300
Can't can't fault that logic really.

1489
01:25:20,400 --> 01:25:23,000
Let's retrace UV, we passed the bounce Direction.

1490
01:25:23,800 --> 01:25:26,700
We've got the normal W which is just for the roughness.

1491
01:25:27,300 --> 01:25:29,000
Doesn't really have anything else to do with it?

1492
01:25:31,300 --> 01:25:37,300
Got the farm app, you pass the distance to the mapping Z and then we

1493
01:25:37,300 --> 01:25:37,800
lerp

1494
01:25:50,200 --> 01:25:50,900
so,

1495
01:25:57,600 --> 01:25:58,000
No.

1496
01:26:05,200 --> 01:26:07,500
So yeah, showing the sampling on the texture would be the nice thing

1497
01:26:07,500 --> 01:26:08,000
to do.

1498
01:26:08,100 --> 01:26:10,400
I'm not sure we really have time to do that.

1499
01:26:10,400 --> 01:26:12,300
That might be what we have to do tomorrow, right?

1500
01:26:12,400 --> 01:26:16,500
Like I'm not sure there's really a lot of ways that we could do it.

1501
01:26:16,500 --> 01:26:17,600
I guess what we could do.

1502
01:26:19,700 --> 01:26:24,800
Is have bilinear sample, actually just draw into the texture so we see

1503
01:26:24,800 --> 01:26:25,900
where we're sampling from.

1504
01:26:27,600 --> 01:26:29,000
That's interesting idea.

1505
01:26:29,600 --> 01:26:31,200
So let's say we turn this off.

1506
01:26:32,200 --> 01:26:33,100
How does this sound?

1507
01:26:36,800 --> 01:26:38,500
Right, so we're only doing that.

1508
01:26:45,000 --> 01:26:48,500
And now let's actually just go in here and just just right straight on

1509
01:26:48,500 --> 01:26:50,300
into the texture, right?

1510
01:26:50,300 --> 01:26:55,000
So what we'll do is we'll say, Okay, instead of just sort of like by

1511
01:26:55,000 --> 01:26:59,800
linearly sampling from that X and Y, what will actually do?

1512
01:27:00,100 --> 01:27:02,800
Is well, I mean we'll also do the bilinear sample, obviously, but what

1513
01:27:02,800 --> 01:27:08,700
we'll do is we'll right into that location, so we'll take LOD pixels,

1514
01:27:09,100 --> 01:27:09,800
right?

1515
01:27:13,000 --> 01:27:18,800
And basically we'll do we'll do this, we'll just do Tesla pointer

1516
01:27:18,800 --> 01:27:24,000
equals log, memory odd, right.

1517
01:27:24,000 --> 01:27:25,100
Look, so we'll do it.

1518
01:27:25,100 --> 01:27:34,200
Our text the pointer equals 0, this will do it this way so it will

1519
01:27:34,200 --> 01:27:37,400
actually just go ahead there and bright white into it wherever we're

1520
01:27:37,400 --> 01:27:37,900
sampling.

1521
01:27:46,800 --> 01:27:47,300
Right.

1522
01:27:49,700 --> 01:27:51,300
And I guess I didn't need to turn that other guy off.

1523
01:27:51,300 --> 01:27:54,500
Now, I think about it is he's sampling from a different map.

1524
01:28:01,300 --> 01:28:04,500
So yeah, the reflection is totally different.

1525
01:28:04,600 --> 01:28:05,000
Right?

1526
01:28:05,000 --> 01:28:08,000
What is is reflecting this extremely thin?

1527
01:28:09,400 --> 01:28:10,500
What on earth?

1528
01:28:10,500 --> 01:28:13,300
Oh, that's just because these guys, right, that's fine.

1529
01:28:15,800 --> 01:28:21,500
So one is extremely thin, this is kind of, this is what's so nice

1530
01:28:21,500 --> 01:28:24,500
about having your own when you're not using opengl.

1531
01:28:24,500 --> 01:28:27,700
You don't have to go through all the mental steps of like, how do I do

1532
01:28:27,700 --> 01:28:28,100
this?

1533
01:28:28,400 --> 01:28:30,900
You could just go like a, let me just draw a directly into the

1534
01:28:30,900 --> 01:28:32,800
texture, right?

1535
01:28:32,800 --> 01:28:33,400
I mean,

1536
01:28:34,700 --> 01:28:37,600
That is exactly what we expect it to be.

1537
01:28:38,100 --> 01:28:42,500
And that is totally not, so the streams over.

1538
01:28:42,500 --> 01:28:46,500
So, let's let's call it a day, but we pretty much have our work cut

1539
01:28:46,500 --> 01:28:46,800
out for us.

1540
01:28:46,800 --> 01:28:49,600
Now, we have to figure out why we're getting such a lensing

1541
01:28:49,600 --> 01:28:50,400
reflection.

1542
01:28:52,800 --> 01:28:58,400
It does kind of seem like maybe our normals like our computation for

1543
01:28:58,400 --> 01:29:00,000
the bounce is just wrong.

1544
01:29:01,300 --> 01:29:07,800
It's rotated in some weird way because I like RI Vector is not is just

1545
01:29:07,800 --> 01:29:10,100
it's not proper compared to what it should be.

1546
01:29:10,100 --> 01:29:11,600
Or something is happening weird?

1547
01:29:11,600 --> 01:29:15,100
I'm not sure, but it does seem like maybe we're Computing.

1548
01:29:15,500 --> 01:29:17,500
We're just flat-out Computing, the balance wrong.

1549
01:29:19,300 --> 01:29:20,500
I think that's what's happening.

1550
01:29:22,200 --> 01:29:23,700
But this is a pretty cool Vis.

1551
01:29:24,400 --> 01:29:25,200
I'd really like that.

1552
01:29:25,200 --> 01:29:26,000
That's neat.

1553
01:29:27,400 --> 01:29:28,600
That's that's really cool.

1554
01:29:29,400 --> 01:29:33,800
All right, let's, let's close it down for the day and we will pick it

1555
01:29:33,800 --> 01:29:36,300
up tomorrow and go ahead and save the Mischief board.

1556
01:29:39,600 --> 01:29:40,200
There we go.

1557
01:29:41,600 --> 01:29:44,600
All right, thank you for joining me for another episode of handmade

1558
01:29:44,600 --> 01:29:44,800
hero.

1559
01:29:44,800 --> 01:29:48,600
Hopefully, today we cleared up the whole thing about how to transform

1560
01:29:48,600 --> 01:29:52,100
normals properly, because I know we went down the math, whole deeply

1561
01:29:52,100 --> 01:29:55,600
and me blow at the end said that he understood it now.

1562
01:29:55,800 --> 01:29:56,900
So, that's a good sign.

1563
01:29:56,900 --> 01:29:59,800
I think so, mission accomplished there in the real sense.

1564
01:30:00,200 --> 01:30:04,200
The word not the George Bush sense of the word but we do have another

1565
01:30:04,200 --> 01:30:07,500
mission that is not accomplished in any sense of the word except maybe

1566
01:30:07,500 --> 01:30:08,100
in the George Bush.

1567
01:30:08,100 --> 01:30:11,200
Sense of the word, which is that we had to figure out why our

1568
01:30:11,200 --> 01:30:15,000
Reflections on the top are being computed seemingly very strangely.

1569
01:30:15,200 --> 01:30:17,700
And I think maybe we might have a problem with that reflection Mass.

1570
01:30:17,700 --> 01:30:20,000
So we'll have to go over it again and not necessary.

1571
01:30:20,000 --> 01:30:22,500
The math of the reflection that we worked on the board but how we end

1572
01:30:22,500 --> 01:30:25,100
up implementing may just be incorrect and we'll have to think that

1573
01:30:25,100 --> 01:30:28,200
through and make sure that that we're not doing something stupid.

1574
01:30:28,400 --> 01:30:29,800
So we

1575
01:30:30,000 --> 01:30:33,600
We'll do that tomorrow and then hopefully we will have our normal map

1576
01:30:33,600 --> 01:30:36,600
stuff complete and we can move on to getting our coordinate system

1577
01:30:36,600 --> 01:30:37,700
stuff straightened out.

1578
01:30:38,200 --> 01:30:43,000
And then I think we're getting to the end of rendering stuff we have.

1579
01:30:43,100 --> 01:30:47,200
I think we have one more real thing to tackle at that point, which is

1580
01:30:47,200 --> 01:30:49,200
how we're going to do that near-field, light sampling.

1581
01:30:49,700 --> 01:30:51,600
So that's going to be a bit of a trip because I'm not sure how we're

1582
01:30:51,600 --> 01:30:53,400
going to do that, but we'll figure it out when we get there.

1583
01:30:54,400 --> 01:30:56,500
And so we're closing in on the end and then wear it, then it's time to

1584
01:30:56,500 --> 01:30:58,900
start render optimization, which is going to be, I think probably a

1585
01:30:58,900 --> 01:30:59,900
lot of fun cause we haven't talked about

1586
01:31:00,000 --> 01:31:01,900
Position at all in the Stream and it's going to be kind of interesting

1587
01:31:01,900 --> 01:31:05,100
to shift gears and Baton to show how some of that stuff works.

1588
01:31:05,600 --> 01:31:08,600
So I hope you'll stick with us and come back tomorrow.

1589
01:31:08,800 --> 01:31:09,400
5:00 p.m.

1590
01:31:09,400 --> 01:31:11,000
Pacific Standard time on Twitch.

1591
01:31:11,100 --> 01:31:12,300
It'll be good to see everyone here.

1592
01:31:12,800 --> 01:31:13,800
Hope you tune in.

1593
01:31:13,800 --> 01:31:15,900
If you would like to follow along at home and want to play with the

1594
01:31:15,900 --> 01:31:18,500
source code, you can go to handmade hero dot-org and click on the

1595
01:31:18,500 --> 01:31:19,200
pre-order button.

1596
01:31:20,100 --> 01:31:22,600
If you preorder the game, it comes to the source code every night.

1597
01:31:22,700 --> 01:31:24,900
So if you want to follow along, that's an easy way to do it.

1598
01:31:25,200 --> 01:31:26,300
We also have a patreon page.

1599
01:31:26,300 --> 01:31:29,100
If you want to support the video series, you can subscribe there and

1600
01:31:29,100 --> 01:31:29,800
we have a forum site.

1601
01:31:29,900 --> 01:31:33,800
You can go to with an annotated episode guide, porcelain X and Mac.

1602
01:31:33,800 --> 01:31:36,000
If you're trying to follow along a different platform and a place to

1603
01:31:36,000 --> 01:31:39,400
ask questions, if you just want to ask questions about the code, maybe

1604
01:31:39,400 --> 01:31:41,000
four previous episodes, that sort of thing.

1605
01:31:41,300 --> 01:31:43,400
There's also a tweet but you can check out if you want to know what

1606
01:31:43,400 --> 01:31:45,400
the schedule is for the weak, it tweets schedule at you.

1607
01:31:45,400 --> 01:31:47,700
And also, let you do an hour before it starts, other can be things

1608
01:31:47,700 --> 01:31:48,200
like that.

1609
01:31:48,400 --> 01:31:51,100
So subscribe to that if you want to be able to catch the live stream

1610
01:31:51,100 --> 01:31:53,100
to eat easily, that's about it.

1611
01:31:53,100 --> 01:31:56,000
Thank you very much for joining me and I will hopefully see everyone

1612
01:31:56,000 --> 01:31:56,500
tomorrow.

1613
01:31:56,500 --> 01:31:57,200
Take it easy.

